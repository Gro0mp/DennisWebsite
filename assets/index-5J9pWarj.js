var ele=Object.defineProperty;var tle=(n,e,t)=>e in n?ele(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var cw=(n,e,t)=>tle(n,typeof e!="symbol"?e+"":e,t);function Aq(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var aH=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qp(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function nle(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var $k={exports:{}},uw={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oH;function rle(){if(oH)return uw;oH=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,s){var a=null;if(s!==void 0&&(a=""+s),i.key!==void 0&&(a=""+i.key),"key"in i){s={};for(var o in i)o!=="key"&&(s[o]=i[o])}else s=i;return i=s.ref,{$$typeof:n,type:r,key:a,ref:i!==void 0?i:null,props:s}}return uw.Fragment=e,uw.jsx=t,uw.jsxs=t,uw}var lH;function ile(){return lH||(lH=1,$k.exports=rle()),$k.exports}var V=ile(),Lk={exports:{}},Mr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cH;function sle(){if(cH)return Mr;cH=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),d=Symbol.iterator;function h(q){return q===null||typeof q!="object"?null:(q=d&&q[d]||q["@@iterator"],typeof q=="function"?q:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,v={};function b(q,te,ne){this.props=q,this.context=te,this.refs=v,this.updater=ne||p}b.prototype.isReactComponent={},b.prototype.setState=function(q,te){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,te,"setState")},b.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function x(){}x.prototype=b.prototype;function C(q,te,ne){this.props=q,this.context=te,this.refs=v,this.updater=ne||p}var E=C.prototype=new x;E.constructor=C,g(E,b.prototype),E.isPureReactComponent=!0;var _=Array.isArray,M={H:null,A:null,T:null,S:null,V:null},R=Object.prototype.hasOwnProperty;function L(q,te,ne,le,ye,ue){return ne=ue.ref,{$$typeof:n,type:q,key:te,ref:ne!==void 0?ne:null,props:ue}}function $(q,te){return L(q.type,te,void 0,void 0,void 0,q.props)}function N(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function I(q){var te={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(ne){return te[ne]})}var k=/\/+/g;function P(q,te){return typeof q=="object"&&q!==null&&q.key!=null?I(""+q.key):te.toString(36)}function G(){}function W(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(G,G):(q.status="pending",q.then(function(te){q.status==="pending"&&(q.status="fulfilled",q.value=te)},function(te){q.status==="pending"&&(q.status="rejected",q.reason=te)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function X(q,te,ne,le,ye){var ue=typeof q;(ue==="undefined"||ue==="boolean")&&(q=null);var ve=!1;if(q===null)ve=!0;else switch(ue){case"bigint":case"string":case"number":ve=!0;break;case"object":switch(q.$$typeof){case n:case e:ve=!0;break;case u:return ve=q._init,X(ve(q._payload),te,ne,le,ye)}}if(ve)return ye=ye(q),ve=le===""?"."+P(q,0):le,_(ye)?(ne="",ve!=null&&(ne=ve.replace(k,"$&/")+"/"),X(ye,te,ne,"",function(ze){return ze})):ye!=null&&(N(ye)&&(ye=$(ye,ne+(ye.key==null||q&&q.key===ye.key?"":(""+ye.key).replace(k,"$&/")+"/")+ve)),te.push(ye)),1;ve=0;var xe=le===""?".":le+":";if(_(q))for(var Pe=0;Pe<q.length;Pe++)le=q[Pe],ue=xe+P(le,Pe),ve+=X(le,te,ne,ue,ye);else if(Pe=h(q),typeof Pe=="function")for(q=Pe.call(q),Pe=0;!(le=q.next()).done;)le=le.value,ue=xe+P(le,Pe++),ve+=X(le,te,ne,ue,ye);else if(ue==="object"){if(typeof q.then=="function")return X(W(q),te,ne,le,ye);throw te=String(q),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return ve}function z(q,te,ne){if(q==null)return q;var le=[],ye=0;return X(q,le,"","",function(ue){return te.call(ne,ue,ye++)}),le}function J(q){if(q._status===-1){var te=q._result;te=te(),te.then(function(ne){(q._status===0||q._status===-1)&&(q._status=1,q._result=ne)},function(ne){(q._status===0||q._status===-1)&&(q._status=2,q._result=ne)}),q._status===-1&&(q._status=0,q._result=te)}if(q._status===1)return q._result.default;throw q._result}var Q=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)};function Y(){}return Mr.Children={map:z,forEach:function(q,te,ne){z(q,function(){te.apply(this,arguments)},ne)},count:function(q){var te=0;return z(q,function(){te++}),te},toArray:function(q){return z(q,function(te){return te})||[]},only:function(q){if(!N(q))throw Error("React.Children.only expected to receive a single React element child.");return q}},Mr.Component=b,Mr.Fragment=t,Mr.Profiler=i,Mr.PureComponent=C,Mr.StrictMode=r,Mr.Suspense=l,Mr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Mr.__COMPILER_RUNTIME={__proto__:null,c:function(q){return M.H.useMemoCache(q)}},Mr.cache=function(q){return function(){return q.apply(null,arguments)}},Mr.cloneElement=function(q,te,ne){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var le=g({},q.props),ye=q.key,ue=void 0;if(te!=null)for(ve in te.ref!==void 0&&(ue=void 0),te.key!==void 0&&(ye=""+te.key),te)!R.call(te,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&te.ref===void 0||(le[ve]=te[ve]);var ve=arguments.length-2;if(ve===1)le.children=ne;else if(1<ve){for(var xe=Array(ve),Pe=0;Pe<ve;Pe++)xe[Pe]=arguments[Pe+2];le.children=xe}return L(q.type,ye,void 0,void 0,ue,le)},Mr.createContext=function(q){return q={$$typeof:a,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:s,_context:q},q},Mr.createElement=function(q,te,ne){var le,ye={},ue=null;if(te!=null)for(le in te.key!==void 0&&(ue=""+te.key),te)R.call(te,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(ye[le]=te[le]);var ve=arguments.length-2;if(ve===1)ye.children=ne;else if(1<ve){for(var xe=Array(ve),Pe=0;Pe<ve;Pe++)xe[Pe]=arguments[Pe+2];ye.children=xe}if(q&&q.defaultProps)for(le in ve=q.defaultProps,ve)ye[le]===void 0&&(ye[le]=ve[le]);return L(q,ue,void 0,void 0,null,ye)},Mr.createRef=function(){return{current:null}},Mr.forwardRef=function(q){return{$$typeof:o,render:q}},Mr.isValidElement=N,Mr.lazy=function(q){return{$$typeof:u,_payload:{_status:-1,_result:q},_init:J}},Mr.memo=function(q,te){return{$$typeof:c,type:q,compare:te===void 0?null:te}},Mr.startTransition=function(q){var te=M.T,ne={};M.T=ne;try{var le=q(),ye=M.S;ye!==null&&ye(ne,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(Y,Q)}catch(ue){Q(ue)}finally{M.T=te}},Mr.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Mr.use=function(q){return M.H.use(q)},Mr.useActionState=function(q,te,ne){return M.H.useActionState(q,te,ne)},Mr.useCallback=function(q,te){return M.H.useCallback(q,te)},Mr.useContext=function(q){return M.H.useContext(q)},Mr.useDebugValue=function(){},Mr.useDeferredValue=function(q,te){return M.H.useDeferredValue(q,te)},Mr.useEffect=function(q,te,ne){var le=M.H;if(typeof ne=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return le.useEffect(q,te)},Mr.useId=function(){return M.H.useId()},Mr.useImperativeHandle=function(q,te,ne){return M.H.useImperativeHandle(q,te,ne)},Mr.useInsertionEffect=function(q,te){return M.H.useInsertionEffect(q,te)},Mr.useLayoutEffect=function(q,te){return M.H.useLayoutEffect(q,te)},Mr.useMemo=function(q,te){return M.H.useMemo(q,te)},Mr.useOptimistic=function(q,te){return M.H.useOptimistic(q,te)},Mr.useReducer=function(q,te,ne){return M.H.useReducer(q,te,ne)},Mr.useRef=function(q){return M.H.useRef(q)},Mr.useState=function(q){return M.H.useState(q)},Mr.useSyncExternalStore=function(q,te,ne){return M.H.useSyncExternalStore(q,te,ne)},Mr.useTransition=function(){return M.H.useTransition()},Mr.version="19.1.0",Mr}var uH;function wv(){return uH||(uH=1,Lk.exports=sle()),Lk.exports}var F=wv();const Ne=qp(F),UM=Aq({__proto__:null,default:Ne},[F]);var Fk={exports:{}},dw={},Pk={exports:{}},Uk={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dH;function ale(){return dH||(dH=1,function(n){function e(z,J){var Q=z.length;z.push(J);e:for(;0<Q;){var Y=Q-1>>>1,q=z[Y];if(0<i(q,J))z[Y]=J,z[Q]=q,Q=Y;else break e}}function t(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var J=z[0],Q=z.pop();if(Q!==J){z[0]=Q;e:for(var Y=0,q=z.length,te=q>>>1;Y<te;){var ne=2*(Y+1)-1,le=z[ne],ye=ne+1,ue=z[ye];if(0>i(le,Q))ye<q&&0>i(ue,le)?(z[Y]=ue,z[ye]=Q,Y=ye):(z[Y]=le,z[ne]=Q,Y=ne);else if(ye<q&&0>i(ue,Q))z[Y]=ue,z[ye]=Q,Y=ye;else break e}}return J}function i(z,J){var Q=z.sortIndex-J.sortIndex;return Q!==0?Q:z.id-J.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,d=null,h=3,p=!1,g=!1,v=!1,b=!1,x=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function _(z){for(var J=t(c);J!==null;){if(J.callback===null)r(c);else if(J.startTime<=z)r(c),J.sortIndex=J.expirationTime,e(l,J);else break;J=t(c)}}function M(z){if(v=!1,_(z),!g)if(t(l)!==null)g=!0,R||(R=!0,P());else{var J=t(c);J!==null&&X(M,J.startTime-z)}}var R=!1,L=-1,$=5,N=-1;function I(){return b?!0:!(n.unstable_now()-N<$)}function k(){if(b=!1,R){var z=n.unstable_now();N=z;var J=!0;try{e:{g=!1,v&&(v=!1,C(L),L=-1),p=!0;var Q=h;try{t:{for(_(z),d=t(l);d!==null&&!(d.expirationTime>z&&I());){var Y=d.callback;if(typeof Y=="function"){d.callback=null,h=d.priorityLevel;var q=Y(d.expirationTime<=z);if(z=n.unstable_now(),typeof q=="function"){d.callback=q,_(z),J=!0;break t}d===t(l)&&r(l),_(z)}else r(l);d=t(l)}if(d!==null)J=!0;else{var te=t(c);te!==null&&X(M,te.startTime-z),J=!1}}break e}finally{d=null,h=Q,p=!1}J=void 0}}finally{J?P():R=!1}}}var P;if(typeof E=="function")P=function(){E(k)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,W=G.port2;G.port1.onmessage=k,P=function(){W.postMessage(null)}}else P=function(){x(k,0)};function X(z,J){L=x(function(){z(n.unstable_now())},J)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(z){z.callback=null},n.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<z?Math.floor(1e3/z):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_next=function(z){switch(h){case 1:case 2:case 3:var J=3;break;default:J=h}var Q=h;h=J;try{return z()}finally{h=Q}},n.unstable_requestPaint=function(){b=!0},n.unstable_runWithPriority=function(z,J){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Q=h;h=z;try{return J()}finally{h=Q}},n.unstable_scheduleCallback=function(z,J,Q){var Y=n.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?Y+Q:Y):Q=Y,z){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=Q+q,z={id:u++,callback:J,priorityLevel:z,startTime:Q,expirationTime:q,sortIndex:-1},Q>Y?(z.sortIndex=Q,e(c,z),t(l)===null&&z===t(c)&&(v?(C(L),L=-1):v=!0,X(M,Q-Y))):(z.sortIndex=q,e(l,z),g||p||(g=!0,R||(R=!0,P()))),z},n.unstable_shouldYield=I,n.unstable_wrapCallback=function(z){var J=h;return function(){var Q=h;h=J;try{return z.apply(this,arguments)}finally{h=Q}}}}(Uk)),Uk}var fH;function ole(){return fH||(fH=1,Pk.exports=ale()),Pk.exports}var zk={exports:{}},Wo={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hH;function lle(){if(hH)return Wo;hH=1;var n=wv();function e(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)c+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(l,c,u){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:d==null?null:""+d,children:l,containerInfo:c,implementation:u}}var a=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return Wo.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Wo.createPortal=function(l,c){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return s(l,c,null,u)},Wo.flushSync=function(l){var c=a.T,u=r.p;try{if(a.T=null,r.p=2,l)return l()}finally{a.T=c,r.p=u,r.d.f()}},Wo.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(l,c))},Wo.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},Wo.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var u=c.as,d=o(u,c.crossOrigin),h=typeof c.integrity=="string"?c.integrity:void 0,p=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;u==="style"?r.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:d,integrity:h,fetchPriority:p}):u==="script"&&r.d.X(l,{crossOrigin:d,integrity:h,fetchPriority:p,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},Wo.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var u=o(c.as,c.crossOrigin);r.d.M(l,{crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(l)},Wo.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var u=c.as,d=o(u,c.crossOrigin);r.d.L(l,u,{crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},Wo.preloadModule=function(l,c){if(typeof l=="string")if(c){var u=o(c.as,c.crossOrigin);r.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(l)},Wo.requestFormReset=function(l){r.d.r(l)},Wo.unstable_batchedUpdates=function(l,c){return l(c)},Wo.useFormState=function(l,c,u){return a.H.useFormState(l,c,u)},Wo.useFormStatus=function(){return a.H.useHostTransitionStatus()},Wo.version="19.1.0",Wo}var pH;function Tq(){if(pH)return zk.exports;pH=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),zk.exports=lle(),zk.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mH;function cle(){if(mH)return dw;mH=1;var n=ole(),e=wv(),t=Tq();function r(f){var m="https://react.dev/errors/"+f;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)m+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+f+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)}function s(f){var m=f,w=f;if(f.alternate)for(;m.return;)m=m.return;else{f=m;do m=f,(m.flags&4098)!==0&&(w=m.return),f=m.return;while(f)}return m.tag===3?w:null}function a(f){if(f.tag===13){var m=f.memoizedState;if(m===null&&(f=f.alternate,f!==null&&(m=f.memoizedState)),m!==null)return m.dehydrated}return null}function o(f){if(s(f)!==f)throw Error(r(188))}function l(f){var m=f.alternate;if(!m){if(m=s(f),m===null)throw Error(r(188));return m!==f?null:f}for(var w=f,A=m;;){var D=w.return;if(D===null)break;var U=D.alternate;if(U===null){if(A=D.return,A!==null){w=A;continue}break}if(D.child===U.child){for(U=D.child;U;){if(U===w)return o(D),f;if(U===A)return o(D),m;U=U.sibling}throw Error(r(188))}if(w.return!==A.return)w=D,A=U;else{for(var ie=!1,fe=D.child;fe;){if(fe===w){ie=!0,w=D,A=U;break}if(fe===A){ie=!0,A=D,w=U;break}fe=fe.sibling}if(!ie){for(fe=U.child;fe;){if(fe===w){ie=!0,w=U,A=D;break}if(fe===A){ie=!0,A=U,w=D;break}fe=fe.sibling}if(!ie)throw Error(r(189))}}if(w.alternate!==A)throw Error(r(190))}if(w.tag!==3)throw Error(r(188));return w.stateNode.current===w?f:m}function c(f){var m=f.tag;if(m===5||m===26||m===27||m===6)return f;for(f=f.child;f!==null;){if(m=c(f),m!==null)return m;f=f.sibling}return null}var u=Object.assign,d=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),C=Symbol.for("react.consumer"),E=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),I=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function P(f){return f===null||typeof f!="object"?null:(f=k&&f[k]||f["@@iterator"],typeof f=="function"?f:null)}var G=Symbol.for("react.client.reference");function W(f){if(f==null)return null;if(typeof f=="function")return f.$$typeof===G?null:f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case g:return"Fragment";case b:return"Profiler";case v:return"StrictMode";case M:return"Suspense";case R:return"SuspenseList";case N:return"Activity"}if(typeof f=="object")switch(f.$$typeof){case p:return"Portal";case E:return(f.displayName||"Context")+".Provider";case C:return(f._context.displayName||"Context")+".Consumer";case _:var m=f.render;return f=f.displayName,f||(f=m.displayName||m.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case L:return m=f.displayName||null,m!==null?m:W(f.type)||"Memo";case $:m=f._payload,f=f._init;try{return W(f(m))}catch{}}return null}var X=Array.isArray,z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},Y=[],q=-1;function te(f){return{current:f}}function ne(f){0>q||(f.current=Y[q],Y[q]=null,q--)}function le(f,m){q++,Y[q]=f.current,f.current=m}var ye=te(null),ue=te(null),ve=te(null),xe=te(null);function Pe(f,m){switch(le(ve,m),le(ue,f),le(ye,null),m.nodeType){case 9:case 11:f=(f=m.documentElement)&&(f=f.namespaceURI)?O6(f):0;break;default:if(f=m.tagName,m=m.namespaceURI)m=O6(m),f=B6(m,f);else switch(f){case"svg":f=1;break;case"math":f=2;break;default:f=0}}ne(ye),le(ye,f)}function ze(){ne(ye),ne(ue),ne(ve)}function Ke(f){f.memoizedState!==null&&le(xe,f);var m=ye.current,w=B6(m,f.type);m!==w&&(le(ue,f),le(ye,w))}function pt(f){ue.current===f&&(ne(ye),ne(ue)),xe.current===f&&(ne(xe),iw._currentValue=Q)}var dt=Object.prototype.hasOwnProperty,pe=n.unstable_scheduleCallback,Le=n.unstable_cancelCallback,Ue=n.unstable_shouldYield,Ze=n.unstable_requestPaint,je=n.unstable_now,lt=n.unstable_getCurrentPriorityLevel,st=n.unstable_ImmediatePriority,ot=n.unstable_UserBlockingPriority,Ut=n.unstable_NormalPriority,mt=n.unstable_LowPriority,ce=n.unstable_IdlePriority,re=n.log,$e=n.unstable_setDisableYieldValue,Xe=null,at=null;function et(f){if(typeof re=="function"&&$e(f),at&&typeof at.setStrictMode=="function")try{at.setStrictMode(Xe,f)}catch{}}var Ft=Math.clz32?Math.clz32:Xt,At=Math.log,_t=Math.LN2;function Xt(f){return f>>>=0,f===0?32:31-(At(f)/_t|0)|0}var yt=256,Mt=4194304;function an(f){var m=f&42;if(m!==0)return m;switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return f&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return f}}function tn(f,m,w){var A=f.pendingLanes;if(A===0)return 0;var D=0,U=f.suspendedLanes,ie=f.pingedLanes;f=f.warmLanes;var fe=A&134217727;return fe!==0?(A=fe&~U,A!==0?D=an(A):(ie&=fe,ie!==0?D=an(ie):w||(w=fe&~f,w!==0&&(D=an(w))))):(fe=A&~U,fe!==0?D=an(fe):ie!==0?D=an(ie):w||(w=A&~f,w!==0&&(D=an(w)))),D===0?0:m!==0&&m!==D&&(m&U)===0&&(U=D&-D,w=m&-m,U>=w||U===32&&(w&4194048)!==0)?m:D}function zt(f,m){return(f.pendingLanes&~(f.suspendedLanes&~f.pingedLanes)&m)===0}function hn(f,m){switch(f){case 1:case 2:case 4:case 8:case 64:return m+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Te(){var f=yt;return yt<<=1,(yt&4194048)===0&&(yt=256),f}function qe(){var f=Mt;return Mt<<=1,(Mt&62914560)===0&&(Mt=4194304),f}function $t(f){for(var m=[],w=0;31>w;w++)m.push(f);return m}function en(f,m){f.pendingLanes|=m,m!==268435456&&(f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0)}function Vt(f,m,w,A,D,U){var ie=f.pendingLanes;f.pendingLanes=w,f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0,f.expiredLanes&=w,f.entangledLanes&=w,f.errorRecoveryDisabledLanes&=w,f.shellSuspendCounter=0;var fe=f.entanglements,Re=f.expirationTimes,rt=f.hiddenUpdates;for(w=ie&~w;0<w;){var Dt=31-Ft(w),Pt=1<<Dt;fe[Dt]=0,Re[Dt]=-1;var ft=rt[Dt];if(ft!==null)for(rt[Dt]=null,Dt=0;Dt<ft.length;Dt++){var gt=ft[Dt];gt!==null&&(gt.lane&=-536870913)}w&=~Pt}A!==0&&kt(f,A,0),U!==0&&D===0&&f.tag!==0&&(f.suspendedLanes|=U&~(ie&~m))}function kt(f,m,w){f.pendingLanes|=m,f.suspendedLanes&=~m;var A=31-Ft(m);f.entangledLanes|=m,f.entanglements[A]=f.entanglements[A]|1073741824|w&4194090}function un(f,m){var w=f.entangledLanes|=m;for(f=f.entanglements;w;){var A=31-Ft(w),D=1<<A;D&m|f[A]&m&&(f[A]|=m),w&=~D}}function In(f){switch(f){case 2:f=1;break;case 8:f=4;break;case 32:f=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:f=128;break;case 268435456:f=134217728;break;default:f=0}return f}function Tr(f){return f&=-f,2<f?8<f?(f&134217727)!==0?32:268435456:8:2}function lr(){var f=J.p;return f!==0?f:(f=window.event,f===void 0?32:eH(f.type))}function Qs(f,m){var w=J.p;try{return J.p=f,m()}finally{J.p=w}}var es=Math.random().toString(36).slice(2),pi="__reactFiber$"+es,Si="__reactProps$"+es,Ri="__reactContainer$"+es,as="__reactEvents$"+es,$o="__reactListeners$"+es,vr="__reactHandles$"+es,Nn="__reactResources$"+es,$s="__reactMarker$"+es;function ci(f){delete f[pi],delete f[Si],delete f[as],delete f[$o],delete f[vr]}function ae(f){var m=f[pi];if(m)return m;for(var w=f.parentNode;w;){if(m=w[Ri]||w[pi]){if(w=m.alternate,m.child!==null||w!==null&&w.child!==null)for(f=P6(f);f!==null;){if(w=f[pi])return w;f=P6(f)}return m}f=w,w=f.parentNode}return null}function me(f){if(f=f[pi]||f[Ri]){var m=f.tag;if(m===5||m===6||m===13||m===26||m===27||m===3)return f}return null}function Oe(f){var m=f.tag;if(m===5||m===26||m===27||m===6)return f.stateNode;throw Error(r(33))}function nt(f){var m=f[Nn];return m||(m=f[Nn]={hoistableStyles:new Map,hoistableScripts:new Map}),m}function ct(f){f[$s]=!0}var St=new Set,jt={};function se(f,m){Se(f,m),Se(f+"Capture",m)}function Se(f,m){for(jt[f]=m,f=0;f<m.length;f++)St.add(m[f])}var Ae=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Me={},_e={};function Nt(f){return dt.call(_e,f)?!0:dt.call(Me,f)?!1:Ae.test(f)?_e[f]=!0:(Me[f]=!0,!1)}function vt(f,m,w){if(Nt(m))if(w===null)f.removeAttribute(m);else{switch(typeof w){case"undefined":case"function":case"symbol":f.removeAttribute(m);return;case"boolean":var A=m.toLowerCase().slice(0,5);if(A!=="data-"&&A!=="aria-"){f.removeAttribute(m);return}}f.setAttribute(m,""+w)}}function Tt(f,m,w){if(w===null)f.removeAttribute(m);else{switch(typeof w){case"undefined":case"function":case"symbol":case"boolean":f.removeAttribute(m);return}f.setAttribute(m,""+w)}}function Et(f,m,w,A){if(A===null)f.removeAttribute(w);else{switch(typeof A){case"undefined":case"function":case"symbol":case"boolean":f.removeAttribute(w);return}f.setAttributeNS(m,w,""+A)}}var qt,Qt;function Wt(f){if(qt===void 0)try{throw Error()}catch(w){var m=w.stack.trim().match(/\n( *(at )?)/);qt=m&&m[1]||"",Qt=-1<w.stack.indexOf(`
    at`)?" (<anonymous>)":-1<w.stack.indexOf("@")?"@unknown:0:0":""}return`
`+qt+f+Qt}var bn=!1;function Hn(f,m){if(!f||bn)return"";bn=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var A={DetermineComponentFrameRoot:function(){try{if(m){var Pt=function(){throw Error()};if(Object.defineProperty(Pt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Pt,[])}catch(gt){var ft=gt}Reflect.construct(f,[],Pt)}else{try{Pt.call()}catch(gt){ft=gt}f.call(Pt.prototype)}}else{try{throw Error()}catch(gt){ft=gt}(Pt=f())&&typeof Pt.catch=="function"&&Pt.catch(function(){})}}catch(gt){if(gt&&ft&&typeof gt.stack=="string")return[gt.stack,ft.stack]}return[null,null]}};A.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var D=Object.getOwnPropertyDescriptor(A.DetermineComponentFrameRoot,"name");D&&D.configurable&&Object.defineProperty(A.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var U=A.DetermineComponentFrameRoot(),ie=U[0],fe=U[1];if(ie&&fe){var Re=ie.split(`
`),rt=fe.split(`
`);for(D=A=0;A<Re.length&&!Re[A].includes("DetermineComponentFrameRoot");)A++;for(;D<rt.length&&!rt[D].includes("DetermineComponentFrameRoot");)D++;if(A===Re.length||D===rt.length)for(A=Re.length-1,D=rt.length-1;1<=A&&0<=D&&Re[A]!==rt[D];)D--;for(;1<=A&&0<=D;A--,D--)if(Re[A]!==rt[D]){if(A!==1||D!==1)do if(A--,D--,0>D||Re[A]!==rt[D]){var Dt=`
`+Re[A].replace(" at new "," at ");return f.displayName&&Dt.includes("<anonymous>")&&(Dt=Dt.replace("<anonymous>",f.displayName)),Dt}while(1<=A&&0<=D);break}}}finally{bn=!1,Error.prepareStackTrace=w}return(w=f?f.displayName||f.name:"")?Wt(w):""}function On(f){switch(f.tag){case 26:case 27:case 5:return Wt(f.type);case 16:return Wt("Lazy");case 13:return Wt("Suspense");case 19:return Wt("SuspenseList");case 0:case 15:return Hn(f.type,!1);case 11:return Hn(f.type.render,!1);case 1:return Hn(f.type,!0);case 31:return Wt("Activity");default:return""}}function or(f){try{var m="";do m+=On(f),f=f.return;while(f);return m}catch(w){return`
Error generating stack: `+w.message+`
`+w.stack}}function yn(f){switch(typeof f){case"bigint":case"boolean":case"number":case"string":case"undefined":return f;case"object":return f;default:return""}}function ln(f){var m=f.type;return(f=f.nodeName)&&f.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function Rr(f){var m=ln(f)?"checked":"value",w=Object.getOwnPropertyDescriptor(f.constructor.prototype,m),A=""+f[m];if(!f.hasOwnProperty(m)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var D=w.get,U=w.set;return Object.defineProperty(f,m,{configurable:!0,get:function(){return D.call(this)},set:function(ie){A=""+ie,U.call(this,ie)}}),Object.defineProperty(f,m,{enumerable:w.enumerable}),{getValue:function(){return A},setValue:function(ie){A=""+ie},stopTracking:function(){f._valueTracker=null,delete f[m]}}}}function Jn(f){f._valueTracker||(f._valueTracker=Rr(f))}function Kr(f){if(!f)return!1;var m=f._valueTracker;if(!m)return!0;var w=m.getValue(),A="";return f&&(A=ln(f)?f.checked?"true":"false":f.value),f=A,f!==w?(m.setValue(f),!0):!1}function cr(f){if(f=f||(typeof document<"u"?document:void 0),typeof f>"u")return null;try{return f.activeElement||f.body}catch{return f.body}}var jn=/[\n"\\]/g;function Zn(f){return f.replace(jn,function(m){return"\\"+m.charCodeAt(0).toString(16)+" "})}function Mn(f,m,w,A,D,U,ie,fe){f.name="",ie!=null&&typeof ie!="function"&&typeof ie!="symbol"&&typeof ie!="boolean"?f.type=ie:f.removeAttribute("type"),m!=null?ie==="number"?(m===0&&f.value===""||f.value!=m)&&(f.value=""+yn(m)):f.value!==""+yn(m)&&(f.value=""+yn(m)):ie!=="submit"&&ie!=="reset"||f.removeAttribute("value"),m!=null?wi(f,ie,yn(m)):w!=null?wi(f,ie,yn(w)):A!=null&&f.removeAttribute("value"),D==null&&U!=null&&(f.defaultChecked=!!U),D!=null&&(f.checked=D&&typeof D!="function"&&typeof D!="symbol"),fe!=null&&typeof fe!="function"&&typeof fe!="symbol"&&typeof fe!="boolean"?f.name=""+yn(fe):f.removeAttribute("name")}function Wr(f,m,w,A,D,U,ie,fe){if(U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"&&(f.type=U),m!=null||w!=null){if(!(U!=="submit"&&U!=="reset"||m!=null))return;w=w!=null?""+yn(w):"",m=m!=null?""+yn(m):w,fe||m===f.value||(f.value=m),f.defaultValue=m}A=A??D,A=typeof A!="function"&&typeof A!="symbol"&&!!A,f.checked=fe?f.checked:!!A,f.defaultChecked=!!A,ie!=null&&typeof ie!="function"&&typeof ie!="symbol"&&typeof ie!="boolean"&&(f.name=ie)}function wi(f,m,w){m==="number"&&cr(f.ownerDocument)===f||f.defaultValue===""+w||(f.defaultValue=""+w)}function Sr(f,m,w,A){if(f=f.options,m){m={};for(var D=0;D<w.length;D++)m["$"+w[D]]=!0;for(w=0;w<f.length;w++)D=m.hasOwnProperty("$"+f[w].value),f[w].selected!==D&&(f[w].selected=D),D&&A&&(f[w].defaultSelected=!0)}else{for(w=""+yn(w),m=null,D=0;D<f.length;D++){if(f[D].value===w){f[D].selected=!0,A&&(f[D].defaultSelected=!0);return}m!==null||f[D].disabled||(m=f[D])}m!==null&&(m.selected=!0)}}function Ci(f,m,w){if(m!=null&&(m=""+yn(m),m!==f.value&&(f.value=m),w==null)){f.defaultValue!==m&&(f.defaultValue=m);return}f.defaultValue=w!=null?""+yn(w):""}function id(f,m,w,A){if(m==null){if(A!=null){if(w!=null)throw Error(r(92));if(X(A)){if(1<A.length)throw Error(r(93));A=A[0]}w=A}w==null&&(w=""),m=w}w=yn(m),f.defaultValue=w,A=f.textContent,A===w&&A!==""&&A!==null&&(f.value=A)}function hs(f,m){if(m){var w=f.firstChild;if(w&&w===f.lastChild&&w.nodeType===3){w.nodeValue=m;return}}f.textContent=m}var t0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function au(f,m,w){var A=m.indexOf("--")===0;w==null||typeof w=="boolean"||w===""?A?f.setProperty(m,""):m==="float"?f.cssFloat="":f[m]="":A?f.setProperty(m,w):typeof w!="number"||w===0||t0.has(m)?m==="float"?f.cssFloat=w:f[m]=(""+w).trim():f[m]=w+"px"}function yf(f,m,w){if(m!=null&&typeof m!="object")throw Error(r(62));if(f=f.style,w!=null){for(var A in w)!w.hasOwnProperty(A)||m!=null&&m.hasOwnProperty(A)||(A.indexOf("--")===0?f.setProperty(A,""):A==="float"?f.cssFloat="":f[A]="");for(var D in m)A=m[D],m.hasOwnProperty(D)&&w[D]!==A&&au(f,D,A)}else for(var U in m)m.hasOwnProperty(U)&&au(f,U,m[U])}function Oh(f){if(f.indexOf("-")===-1)return!1;switch(f){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Fv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Bh(f){return Fv.test(""+f)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":f}var im=null;function sm(f){return f=f.target||f.srcElement||window,f.correspondingUseElement&&(f=f.correspondingUseElement),f.nodeType===3?f.parentNode:f}var Wl=null,ll=null;function n0(f){var m=me(f);if(m&&(f=m.stateNode)){var w=f[Si]||null;e:switch(f=m.stateNode,m.type){case"input":if(Mn(f,w.value,w.defaultValue,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name),m=w.name,w.type==="radio"&&m!=null){for(w=f;w.parentNode;)w=w.parentNode;for(w=w.querySelectorAll('input[name="'+Zn(""+m)+'"][type="radio"]'),m=0;m<w.length;m++){var A=w[m];if(A!==f&&A.form===f.form){var D=A[Si]||null;if(!D)throw Error(r(90));Mn(A,D.value,D.defaultValue,D.defaultValue,D.checked,D.defaultChecked,D.type,D.name)}}for(m=0;m<w.length;m++)A=w[m],A.form===f.form&&Kr(A)}break e;case"textarea":Ci(f,w.value,w.defaultValue);break e;case"select":m=w.value,m!=null&&Sr(f,!!w.multiple,m,!1)}}}var $h=!1;function r0(f,m,w){if($h)return f(m,w);$h=!0;try{var A=f(m);return A}finally{if($h=!1,(Wl!==null||ll!==null)&&(wu(),Wl&&(m=Wl,f=ll,ll=Wl=null,n0(m),f)))for(m=0;m<f.length;m++)n0(f[m])}}function vf(f,m){var w=f.stateNode;if(w===null)return null;var A=w[Si]||null;if(A===null)return null;w=A[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(A=!A.disabled)||(f=f.type,A=!(f==="button"||f==="input"||f==="select"||f==="textarea")),f=!A;break e;default:f=!1}if(f)return null;if(w&&typeof w!="function")throw Error(r(231,m,typeof w));return w}var Lo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bf=!1;if(Lo)try{var ad={};Object.defineProperty(ad,"passive",{get:function(){bf=!0}}),window.addEventListener("test",ad,ad),window.removeEventListener("test",ad,ad)}catch{bf=!1}var fo=null,ho=null,am=null;function i0(){if(am)return am;var f,m=ho,w=m.length,A,D="value"in fo?fo.value:fo.textContent,U=D.length;for(f=0;f<w&&m[f]===D[f];f++);var ie=w-f;for(A=1;A<=ie&&m[w-A]===D[U-A];A++);return am=D.slice(f,1<A?1-A:void 0)}function Ic(f){var m=f.keyCode;return"charCode"in f?(f=f.charCode,f===0&&m===13&&(f=13)):f=m,f===10&&(f=13),32<=f||f===13?f:0}function od(){return!0}function ld(){return!1}function ea(f){function m(w,A,D,U,ie){this._reactName=w,this._targetInst=D,this.type=A,this.nativeEvent=U,this.target=ie,this.currentTarget=null;for(var fe in f)f.hasOwnProperty(fe)&&(w=f[fe],this[fe]=w?w(U):U[fe]);return this.isDefaultPrevented=(U.defaultPrevented!=null?U.defaultPrevented:U.returnValue===!1)?od:ld,this.isPropagationStopped=ld,this}return u(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var w=this.nativeEvent;w&&(w.preventDefault?w.preventDefault():typeof w.returnValue!="unknown"&&(w.returnValue=!1),this.isDefaultPrevented=od)},stopPropagation:function(){var w=this.nativeEvent;w&&(w.stopPropagation?w.stopPropagation():typeof w.cancelBubble!="unknown"&&(w.cancelBubble=!0),this.isPropagationStopped=od)},persist:function(){},isPersistent:od}),m}var po={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(f){return f.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cd=ea(po),ou=u({},po,{view:0,detail:0}),Pv=ea(ou),jl,cl,ud,dd=u({},ou,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xf,button:0,buttons:0,relatedTarget:function(f){return f.relatedTarget===void 0?f.fromElement===f.srcElement?f.toElement:f.fromElement:f.relatedTarget},movementX:function(f){return"movementX"in f?f.movementX:(f!==ud&&(ud&&f.type==="mousemove"?(jl=f.screenX-ud.screenX,cl=f.screenY-ud.screenY):cl=jl=0,ud=f),jl)},movementY:function(f){return"movementY"in f?f.movementY:cl}}),s0=ea(dd),a0=u({},dd,{dataTransfer:0}),om=ea(a0),Ls=u({},ou,{relatedTarget:0}),lm=ea(Ls),o0=u({},po,{animationName:0,elapsedTime:0,pseudoElement:0}),l0=ea(o0),c0=u({},po,{clipboardData:function(f){return"clipboardData"in f?f.clipboardData:window.clipboardData}}),u0=ea(c0),fd=u({},po,{data:0}),Lh=ea(fd),Uv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function d0(f){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(f):(f=Hv[f])?!!m[f]:!1}function xf(){return d0}var Vv=u({},ou,{key:function(f){if(f.key){var m=Uv[f.key]||f.key;if(m!=="Unidentified")return m}return f.type==="keypress"?(f=Ic(f),f===13?"Enter":String.fromCharCode(f)):f.type==="keydown"||f.type==="keyup"?zv[f.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xf,charCode:function(f){return f.type==="keypress"?Ic(f):0},keyCode:function(f){return f.type==="keydown"||f.type==="keyup"?f.keyCode:0},which:function(f){return f.type==="keypress"?Ic(f):f.type==="keydown"||f.type==="keyup"?f.keyCode:0}}),f0=ea(Vv),Fh=u({},dd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cm=ea(Fh),Gv=u({},ou,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xf}),h0=ea(Gv),Ph=u({},po,{propertyName:0,elapsedTime:0,pseudoElement:0}),Dc=ea(Ph),p0=u({},dd,{deltaX:function(f){return"deltaX"in f?f.deltaX:"wheelDeltaX"in f?-f.wheelDeltaX:0},deltaY:function(f){return"deltaY"in f?f.deltaY:"wheelDeltaY"in f?-f.wheelDeltaY:"wheelDelta"in f?-f.wheelDelta:0},deltaZ:0,deltaMode:0}),lS=ea(p0),m0=u({},po,{newState:0,oldState:0}),kc=ea(m0),O=[9,13,27,32],j=Lo&&"CompositionEvent"in window,ee=null;Lo&&"documentMode"in document&&(ee=document.documentMode);var oe=Lo&&"TextEvent"in window&&!ee,we=Lo&&(!j||ee&&8<ee&&11>=ee),Ee=" ",Ce=!1;function He(f,m){switch(f){case"keyup":return O.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ht(f){return f=f.detail,typeof f=="object"&&"data"in f?f.data:null}var Ht=!1;function Zt(f,m){switch(f){case"compositionend":return ht(m);case"keypress":return m.which!==32?null:(Ce=!0,Ee);case"textInput":return f=m.data,f===Ee&&Ce?null:f;default:return null}}function Un(f,m){if(Ht)return f==="compositionend"||!j&&He(f,m)?(f=i0(),am=ho=fo=null,Ht=!1,f):null;switch(f){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return we&&m.locale!=="ko"?null:m.data;default:return null}}var _n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cn(f){var m=f&&f.nodeName&&f.nodeName.toLowerCase();return m==="input"?!!_n[f.type]:m==="textarea"}function xn(f,m,w,A){Wl?ll?ll.push(A):ll=[A]:Wl=A,m=xA(m,"onChange"),0<m.length&&(w=new cd("onChange","change",null,w,A),f.push({event:w,listeners:m}))}var ir=null,Yr=null;function mi(f){R6(f,0)}function os(f){var m=Oe(f);if(Kr(m))return f}function Ma(f,m){if(f==="change")return m}var ta=!1;if(Lo){var kr;if(Lo){var ts="oninput"in document;if(!ts){var mo=document.createElement("div");mo.setAttribute("oninput","return;"),ts=typeof mo.oninput=="function"}kr=ts}else kr=!1;ta=kr&&(!document.documentMode||9<document.documentMode)}function Fi(){ir&&(ir.detachEvent("onpropertychange",Wv),Yr=ir=null)}function Wv(f){if(f.propertyName==="value"&&os(Yr)){var m=[];xn(m,Yr,f,sm(f)),r0(mi,m)}}function cS(f,m,w){f==="focusin"?(Fi(),ir=m,Yr=w,ir.attachEvent("onpropertychange",Wv)):f==="focusout"&&Fi()}function jv(f){if(f==="selectionchange"||f==="keyup"||f==="keydown")return os(Yr)}function Uh(f,m){if(f==="click")return os(m)}function ul(f,m){if(f==="input"||f==="change")return os(m)}function E2(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var Fo=typeof Object.is=="function"?Object.is:E2;function Oc(f,m){if(Fo(f,m))return!0;if(typeof f!="object"||f===null||typeof m!="object"||m===null)return!1;var w=Object.keys(f),A=Object.keys(m);if(w.length!==A.length)return!1;for(A=0;A<w.length;A++){var D=w[A];if(!dt.call(m,D)||!Fo(f[D],m[D]))return!1}return!0}function Po(f){for(;f&&f.firstChild;)f=f.firstChild;return f}function uS(f,m){var w=Po(f);f=0;for(var A;w;){if(w.nodeType===3){if(A=f+w.textContent.length,f<=m&&A>=m)return{node:w,offset:m-f};f=A}e:{for(;w;){if(w.nextSibling){w=w.nextSibling;break e}w=w.parentNode}w=void 0}w=Po(w)}}function dS(f,m){return f&&m?f===m?!0:f&&f.nodeType===3?!1:m&&m.nodeType===3?dS(f,m.parentNode):"contains"in f?f.contains(m):f.compareDocumentPosition?!!(f.compareDocumentPosition(m)&16):!1:!1}function fS(f){f=f!=null&&f.ownerDocument!=null&&f.ownerDocument.defaultView!=null?f.ownerDocument.defaultView:window;for(var m=cr(f.document);m instanceof f.HTMLIFrameElement;){try{var w=typeof m.contentWindow.location.href=="string"}catch{w=!1}if(w)f=m.contentWindow;else break;m=cr(f.document)}return m}function g0(f){var m=f&&f.nodeName&&f.nodeName.toLowerCase();return m&&(m==="input"&&(f.type==="text"||f.type==="search"||f.type==="tel"||f.type==="url"||f.type==="password")||m==="textarea"||f.contentEditable==="true")}var hS=Lo&&"documentMode"in document&&11>=document.documentMode,hd=null,qv=null,y0=null,Xv=!1;function pS(f,m,w){var A=w.window===w?w.document:w.nodeType===9?w:w.ownerDocument;Xv||hd==null||hd!==cr(A)||(A=hd,"selectionStart"in A&&g0(A)?A={start:A.selectionStart,end:A.selectionEnd}:(A=(A.ownerDocument&&A.ownerDocument.defaultView||window).getSelection(),A={anchorNode:A.anchorNode,anchorOffset:A.anchorOffset,focusNode:A.focusNode,focusOffset:A.focusOffset}),y0&&Oc(y0,A)||(y0=A,A=xA(qv,"onSelect"),0<A.length&&(m=new cd("onSelect","select",null,m,w),f.push({event:m,listeners:A}),m.target=hd)))}function Ra(f,m){var w={};return w[f.toLowerCase()]=m.toLowerCase(),w["Webkit"+f]="webkit"+m,w["Moz"+f]="moz"+m,w}var Sf={animationend:Ra("Animation","AnimationEnd"),animationiteration:Ra("Animation","AnimationIteration"),animationstart:Ra("Animation","AnimationStart"),transitionrun:Ra("Transition","TransitionRun"),transitionstart:Ra("Transition","TransitionStart"),transitioncancel:Ra("Transition","TransitionCancel"),transitionend:Ra("Transition","TransitionEnd")},Kv={},A2={};Lo&&(A2=document.createElement("div").style,"AnimationEvent"in window||(delete Sf.animationend.animation,delete Sf.animationiteration.animation,delete Sf.animationstart.animation),"TransitionEvent"in window||delete Sf.transitionend.transition);function pd(f){if(Kv[f])return Kv[f];if(!Sf[f])return f;var m=Sf[f],w;for(w in m)if(m.hasOwnProperty(w)&&w in A2)return Kv[f]=m[w];return f}var go=pd("animationend"),mS=pd("animationiteration"),Uo=pd("animationstart"),T2=pd("transitionrun"),md=pd("transitionstart"),um=pd("transitioncancel"),gd=pd("transitionend"),Yv=new Map,v0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");v0.push("scrollEnd");function fa(f,m){Yv.set(f,m),se(m,[f])}var gS=new WeakMap;function Na(f,m){if(typeof f=="object"&&f!==null){var w=gS.get(f);return w!==void 0?w:(m={value:f,source:m,stack:or(m)},gS.set(f,m),m)}return{value:f,source:m,stack:or(m)}}var Wa=[],ql=0,Jv=0;function b0(){for(var f=ql,m=Jv=ql=0;m<f;){var w=Wa[m];Wa[m++]=null;var A=Wa[m];Wa[m++]=null;var D=Wa[m];Wa[m++]=null;var U=Wa[m];if(Wa[m++]=null,A!==null&&D!==null){var ie=A.pending;ie===null?D.next=D:(D.next=ie.next,ie.next=D),A.pending=D}U!==0&&yS(w,D,U)}}function wf(f,m,w,A){Wa[ql++]=f,Wa[ql++]=m,Wa[ql++]=w,Wa[ql++]=A,Jv|=A,f.lanes|=A,f=f.alternate,f!==null&&(f.lanes|=A)}function Zv(f,m,w,A){return wf(f,m,w,A),dm(f)}function yd(f,m){return wf(f,null,null,m),dm(f)}function yS(f,m,w){f.lanes|=w;var A=f.alternate;A!==null&&(A.lanes|=w);for(var D=!1,U=f.return;U!==null;)U.childLanes|=w,A=U.alternate,A!==null&&(A.childLanes|=w),U.tag===22&&(f=U.stateNode,f===null||f._visibility&1||(D=!0)),f=U,U=U.return;return f.tag===3?(U=f.stateNode,D&&m!==null&&(D=31-Ft(w),f=U.hiddenUpdates,A=f[D],A===null?f[D]=[m]:A.push(m),m.lane=w|536870912),U):null}function dm(f){if(50<Su)throw Su=0,ip=null,Error(r(185));for(var m=f.return;m!==null;)f=m,m=f.return;return f.tag===3?f.stateNode:null}var Cf={};function vS(f,m,w,A){this.tag=f,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=A,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zo(f,m,w,A){return new vS(f,m,w,A)}function x0(f){return f=f.prototype,!(!f||!f.isReactComponent)}function Cs(f,m){var w=f.alternate;return w===null?(w=zo(f.tag,m,f.key,f.mode),w.elementType=f.elementType,w.type=f.type,w.stateNode=f.stateNode,w.alternate=f,f.alternate=w):(w.pendingProps=m,w.type=f.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=f.flags&65011712,w.childLanes=f.childLanes,w.lanes=f.lanes,w.child=f.child,w.memoizedProps=f.memoizedProps,w.memoizedState=f.memoizedState,w.updateQueue=f.updateQueue,m=f.dependencies,w.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},w.sibling=f.sibling,w.index=f.index,w.ref=f.ref,w.refCleanup=f.refCleanup,w}function bS(f,m){f.flags&=65011714;var w=f.alternate;return w===null?(f.childLanes=0,f.lanes=m,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=w.childLanes,f.lanes=w.lanes,f.child=w.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=w.memoizedProps,f.memoizedState=w.memoizedState,f.updateQueue=w.updateQueue,f.type=w.type,m=w.dependencies,f.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),f}function ha(f,m,w,A,D,U){var ie=0;if(A=f,typeof f=="function")x0(f)&&(ie=1);else if(typeof f=="string")ie=zoe(f,w,ye.current)?26:f==="html"||f==="head"||f==="body"?27:5;else e:switch(f){case N:return f=zo(31,w,m,D),f.elementType=N,f.lanes=U,f;case g:return _f(w.children,D,U,m);case v:ie=8,D|=24;break;case b:return f=zo(12,w,m,D|2),f.elementType=b,f.lanes=U,f;case M:return f=zo(13,w,m,D),f.elementType=M,f.lanes=U,f;case R:return f=zo(19,w,m,D),f.elementType=R,f.lanes=U,f;default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case x:case E:ie=10;break e;case C:ie=9;break e;case _:ie=11;break e;case L:ie=14;break e;case $:ie=16,A=null;break e}ie=29,w=Error(r(130,f===null?"null":typeof f,"")),A=null}return m=zo(ie,w,m,D),m.elementType=f,m.type=A,m.lanes=U,m}function _f(f,m,w,A){return f=zo(7,f,A,m),f.lanes=w,f}function S0(f,m,w){return f=zo(6,f,null,m),f.lanes=w,f}function Qv(f,m,w){return m=zo(4,f.children!==null?f.children:[],f.key,m),m.lanes=w,m.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},m}var fm=[],Ho=0,w0=null,hm=0,Ia=[],dl=0,Ef=null,lu=1,cu="";function vd(f,m){fm[Ho++]=hm,fm[Ho++]=w0,w0=f,hm=m}function eb(f,m,w){Ia[dl++]=lu,Ia[dl++]=cu,Ia[dl++]=Ef,Ef=f;var A=lu;f=cu;var D=32-Ft(A)-1;A&=~(1<<D),w+=1;var U=32-Ft(m)+D;if(30<U){var ie=D-D%5;U=(A&(1<<ie)-1).toString(32),A>>=ie,D-=ie,lu=1<<32-Ft(m)+D|w<<D|A,cu=U+f}else lu=1<<U|w<<D|A,cu=f}function xS(f){f.return!==null&&(vd(f,1),eb(f,1,0))}function SS(f){for(;f===w0;)w0=fm[--Ho],fm[Ho]=null,hm=fm[--Ho],fm[Ho]=null;for(;f===Ef;)Ef=Ia[--dl],Ia[dl]=null,cu=Ia[--dl],Ia[dl]=null,lu=Ia[--dl],Ia[dl]=null}var yo=null,ls=null,ni=!1,Xl=null,fl=!1,tb=Error(r(519));function Af(f){var m=Error(r(418,""));throw zh(Na(m,f)),tb}function M2(f){var m=f.stateNode,w=f.type,A=f.memoizedProps;switch(m[pi]=f,m[Si]=A,w){case"dialog":Ur("cancel",m),Ur("close",m);break;case"iframe":case"object":case"embed":Ur("load",m);break;case"video":case"audio":for(w=0;w<ZS.length;w++)Ur(ZS[w],m);break;case"source":Ur("error",m);break;case"img":case"image":case"link":Ur("error",m),Ur("load",m);break;case"details":Ur("toggle",m);break;case"input":Ur("invalid",m),Wr(m,A.value,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name,!0),Jn(m);break;case"select":Ur("invalid",m);break;case"textarea":Ur("invalid",m),id(m,A.value,A.defaultValue,A.children),Jn(m)}w=A.children,typeof w!="string"&&typeof w!="number"&&typeof w!="bigint"||m.textContent===""+w||A.suppressHydrationWarning===!0||k6(m.textContent,w)?(A.popover!=null&&(Ur("beforetoggle",m),Ur("toggle",m)),A.onScroll!=null&&Ur("scroll",m),A.onScrollEnd!=null&&Ur("scrollend",m),A.onClick!=null&&(m.onclick=SA),m=!0):m=!1,m||Af(f)}function wS(f){for(yo=f.return;yo;)switch(yo.tag){case 5:case 13:fl=!1;return;case 27:case 3:fl=!0;return;default:yo=yo.return}}function Bc(f){if(f!==yo)return!1;if(!ni)return wS(f),ni=!0,!1;var m=f.tag,w;if((w=m!==3&&m!==27)&&((w=m===5)&&(w=f.type,w=!(w!=="form"&&w!=="button")||wk(f.type,f.memoizedProps)),w=!w),w&&ls&&Af(f),wS(f),m===13){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));e:{for(f=f.nextSibling,m=0;f;){if(f.nodeType===8)if(w=f.data,w==="/$"){if(m===0){ls=Dd(f.nextSibling);break e}m--}else w!=="$"&&w!=="$!"&&w!=="$?"||m++;f=f.nextSibling}ls=null}}else m===27?(m=ls,Fm(f.type)?(f=Ak,Ak=null,ls=f):ls=m):ls=yo?Dd(f.stateNode.nextSibling):null;return!0}function pm(){ls=yo=null,ni=!1}function ui(){var f=Xl;return f!==null&&(Gn===null?Gn=f:Gn.push.apply(Gn,f),Xl=null),f}function zh(f){Xl===null?Xl=[f]:Xl.push(f)}var CS=te(null),Tf=null,bd=null;function Mf(f,m,w){le(CS,m._currentValue),m._currentValue=w}function xd(f){f._currentValue=CS.current,ne(CS)}function _S(f,m,w){for(;f!==null;){var A=f.alternate;if((f.childLanes&m)!==m?(f.childLanes|=m,A!==null&&(A.childLanes|=m)):A!==null&&(A.childLanes&m)!==m&&(A.childLanes|=m),f===w)break;f=f.return}}function C0(f,m,w,A){var D=f.child;for(D!==null&&(D.return=f);D!==null;){var U=D.dependencies;if(U!==null){var ie=D.child;U=U.firstContext;e:for(;U!==null;){var fe=U;U=D;for(var Re=0;Re<m.length;Re++)if(fe.context===m[Re]){U.lanes|=w,fe=U.alternate,fe!==null&&(fe.lanes|=w),_S(U.return,w,f),A||(ie=null);break e}U=fe.next}}else if(D.tag===18){if(ie=D.return,ie===null)throw Error(r(341));ie.lanes|=w,U=ie.alternate,U!==null&&(U.lanes|=w),_S(ie,w,f),ie=null}else ie=D.child;if(ie!==null)ie.return=D;else for(ie=D;ie!==null;){if(ie===f){ie=null;break}if(D=ie.sibling,D!==null){D.return=ie.return,ie=D;break}ie=ie.return}D=ie}}function Kl(f,m,w,A){f=null;for(var D=m,U=!1;D!==null;){if(!U){if((D.flags&524288)!==0)U=!0;else if((D.flags&262144)!==0)break}if(D.tag===10){var ie=D.alternate;if(ie===null)throw Error(r(387));if(ie=ie.memoizedProps,ie!==null){var fe=D.type;Fo(D.pendingProps.value,ie.value)||(f!==null?f.push(fe):f=[fe])}}else if(D===xe.current){if(ie=D.alternate,ie===null)throw Error(r(387));ie.memoizedState.memoizedState!==D.memoizedState.memoizedState&&(f!==null?f.push(iw):f=[iw])}D=D.return}f!==null&&C0(m,f,w,A),m.flags|=262144}function _0(f){for(f=f.firstContext;f!==null;){if(!Fo(f.context._currentValue,f.memoizedValue))return!0;f=f.next}return!1}function uu(f){Tf=f,bd=null,f=f.dependencies,f!==null&&(f.firstContext=null)}function ps(f){return nb(Tf,f)}function E0(f,m){return Tf===null&&uu(f),nb(f,m)}function nb(f,m){var w=m._currentValue;if(m={context:m,memoizedValue:w,next:null},bd===null){if(f===null)throw Error(r(308));bd=m,f.dependencies={lanes:0,firstContext:m},f.flags|=524288}else bd=bd.next=m;return w}var ES=typeof AbortController<"u"?AbortController:function(){var f=[],m=this.signal={aborted:!1,addEventListener:function(w,A){f.push(A)}};this.abort=function(){m.aborted=!0,f.forEach(function(w){return w()})}},rk=n.unstable_scheduleCallback,R2=n.unstable_NormalPriority,Fs={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function rb(){return{controller:new ES,data:new Map,refCount:0}}function mm(f){f.refCount--,f.refCount===0&&rk(R2,function(){f.controller.abort()})}var gm=null,A0=0,pr=0,ym=null;function hl(f,m){if(gm===null){var w=gm=[];A0=0,pr=hk(),ym={status:"pending",value:void 0,then:function(A){w.push(A)}}}return A0++,m.then(ib,ib),m}function ib(){if(--A0===0&&gm!==null){ym!==null&&(ym.status="fulfilled");var f=gm;gm=null,pr=0,ym=null;for(var m=0;m<f.length;m++)(0,f[m])()}}function ik(f,m){var w=[],A={status:"pending",value:null,reason:null,then:function(D){w.push(D)}};return f.then(function(){A.status="fulfilled",A.value=m;for(var D=0;D<w.length;D++)(0,w[D])(m)},function(D){for(A.status="rejected",A.reason=D,D=0;D<w.length;D++)(0,w[D])(void 0)}),A}var T0=z.S;z.S=function(f,m){typeof m=="object"&&m!==null&&typeof m.then=="function"&&hl(f,m),T0!==null&&T0(f,m)};var Yl=te(null);function Rf(){var f=Yl.current;return f!==null?f:ur.pooledCache}function M0(f,m){m===null?le(Yl,Yl.current):le(Yl,m.pool)}function sb(){var f=Rf();return f===null?null:{parent:Fs._currentValue,pool:f}}var R0=Error(r(460)),AS=Error(r(474)),$c=Error(r(542)),N0={then:function(){}};function ab(f){return f=f.status,f==="fulfilled"||f==="rejected"}function vm(){}function ob(f,m,w){switch(w=f[w],w===void 0?f.push(m):w!==m&&(m.then(vm,vm),m=w),m.status){case"fulfilled":return m.value;case"rejected":throw f=m.reason,N2(f),f;default:if(typeof m.status=="string")m.then(vm,vm);else{if(f=ur,f!==null&&100<f.shellSuspendCounter)throw Error(r(482));f=m,f.status="pending",f.then(function(A){if(m.status==="pending"){var D=m;D.status="fulfilled",D.value=A}},function(A){if(m.status==="pending"){var D=m;D.status="rejected",D.reason=A}})}switch(m.status){case"fulfilled":return m.value;case"rejected":throw f=m.reason,N2(f),f}throw Jl=m,R0}}var Jl=null;function TS(){if(Jl===null)throw Error(r(459));var f=Jl;return Jl=null,f}function N2(f){if(f===R0||f===$c)throw Error(r(483))}var Sd=!1;function MS(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qn(f,m){f=f.updateQueue,m.updateQueue===f&&(m.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,callbacks:null})}function du(f){return{lane:f,tag:0,payload:null,callback:null,next:null}}function wd(f,m,w){var A=f.updateQueue;if(A===null)return null;if(A=A.shared,(di&2)!==0){var D=A.pending;return D===null?m.next=m:(m.next=D.next,D.next=m),A.pending=m,m=dm(f),yS(f,null,w),m}return wf(f,A,m,w),dm(f)}function Hh(f,m,w){if(m=m.updateQueue,m!==null&&(m=m.shared,(w&4194048)!==0)){var A=m.lanes;A&=f.pendingLanes,w|=A,m.lanes=w,un(f,w)}}function bm(f,m){var w=f.updateQueue,A=f.alternate;if(A!==null&&(A=A.updateQueue,w===A)){var D=null,U=null;if(w=w.firstBaseUpdate,w!==null){do{var ie={lane:w.lane,tag:w.tag,payload:w.payload,callback:null,next:null};U===null?D=U=ie:U=U.next=ie,w=w.next}while(w!==null);U===null?D=U=m:U=U.next=m}else D=U=m;w={baseState:A.baseState,firstBaseUpdate:D,lastBaseUpdate:U,shared:A.shared,callbacks:A.callbacks},f.updateQueue=w;return}f=w.lastBaseUpdate,f===null?w.firstBaseUpdate=m:f.next=m,w.lastBaseUpdate=m}var RS=!1;function I0(){if(RS){var f=ym;if(f!==null)throw f}}function xm(f,m,w,A){RS=!1;var D=f.updateQueue;Sd=!1;var U=D.firstBaseUpdate,ie=D.lastBaseUpdate,fe=D.shared.pending;if(fe!==null){D.shared.pending=null;var Re=fe,rt=Re.next;Re.next=null,ie===null?U=rt:ie.next=rt,ie=Re;var Dt=f.alternate;Dt!==null&&(Dt=Dt.updateQueue,fe=Dt.lastBaseUpdate,fe!==ie&&(fe===null?Dt.firstBaseUpdate=rt:fe.next=rt,Dt.lastBaseUpdate=Re))}if(U!==null){var Pt=D.baseState;ie=0,Dt=rt=Re=null,fe=U;do{var ft=fe.lane&-536870913,gt=ft!==fe.lane;if(gt?(Fn&ft)===ft:(A&ft)===ft){ft!==0&&ft===pr&&(RS=!0),Dt!==null&&(Dt=Dt.next={lane:0,tag:fe.tag,payload:fe.payload,callback:null,next:null});e:{var sr=f,qn=fe;ft=m;var Vi=w;switch(qn.tag){case 1:if(sr=qn.payload,typeof sr=="function"){Pt=sr.call(Vi,Pt,ft);break e}Pt=sr;break e;case 3:sr.flags=sr.flags&-65537|128;case 0:if(sr=qn.payload,ft=typeof sr=="function"?sr.call(Vi,Pt,ft):sr,ft==null)break e;Pt=u({},Pt,ft);break e;case 2:Sd=!0}}ft=fe.callback,ft!==null&&(f.flags|=64,gt&&(f.flags|=8192),gt=D.callbacks,gt===null?D.callbacks=[ft]:gt.push(ft))}else gt={lane:ft,tag:fe.tag,payload:fe.payload,callback:fe.callback,next:null},Dt===null?(rt=Dt=gt,Re=Pt):Dt=Dt.next=gt,ie|=ft;if(fe=fe.next,fe===null){if(fe=D.shared.pending,fe===null)break;gt=fe,fe=gt.next,gt.next=null,D.lastBaseUpdate=gt,D.shared.pending=null}}while(!0);Dt===null&&(Re=Pt),D.baseState=Re,D.firstBaseUpdate=rt,D.lastBaseUpdate=Dt,U===null&&(D.shared.lanes=0),Gc|=ie,f.lanes=ie,f.memoizedState=Pt}}function Sm(f,m){if(typeof f!="function")throw Error(r(191,f));f.call(m)}function I2(f,m){var w=f.callbacks;if(w!==null)for(f.callbacks=null,f=0;f<w.length;f++)Sm(w[f],m)}var wm=te(null),lb=te(0);function D2(f,m){f=rc,le(lb,f),le(wm,m),rc=f|m.baseLanes}function NS(){le(lb,rc),le(wm,wm.current)}function D0(){rc=lb.current,ne(wm),ne(lb)}var Cd=0,mr=null,gi=null,Ps=null,cb=!1,Nf=!1,vo=!1,na=0,Zl=0,Da=null,k2=0;function _s(){throw Error(r(321))}function ja(f,m){if(m===null)return!1;for(var w=0;w<m.length&&w<f.length;w++)if(!Fo(f[w],m[w]))return!1;return!0}function _d(f,m,w,A,D,U){return Cd=U,mr=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,z.H=f===null||f.memoizedState===null?vb:jS,vo=!1,U=w(A,D),vo=!1,Nf&&(U=B2(m,w,A,D)),O2(f),U}function O2(f){z.H=B0;var m=gi!==null&&gi.next!==null;if(Cd=0,Ps=gi=mr=null,cb=!1,Zl=0,Da=null,m)throw Error(r(300));f===null||pa||(f=f.dependencies,f!==null&&_0(f)&&(pa=!0))}function B2(f,m,w,A){mr=f;var D=0;do{if(Nf&&(Da=null),Zl=0,Nf=!1,25<=D)throw Error(r(301));if(D+=1,Ps=gi=null,f.updateQueue!=null){var U=f.updateQueue;U.lastEffect=null,U.events=null,U.stores=null,U.memoCache!=null&&(U.memoCache.index=0)}z.H=oA,U=m(w,A)}while(Nf);return U}function sk(){var f=z.H,m=f.useState()[0];return m=typeof m.then=="function"?Lc(m):m,f=f.useState()[0],(gi!==null?gi.memoizedState:null)!==f&&(mr.flags|=1024),m}function IS(){var f=na!==0;return na=0,f}function ub(f,m,w){m.updateQueue=f.updateQueue,m.flags&=-2053,f.lanes&=~w}function DS(f){if(cb){for(f=f.memoizedState;f!==null;){var m=f.queue;m!==null&&(m.pending=null),f=f.next}cb=!1}Cd=0,Ps=gi=mr=null,Nf=!1,Zl=na=0,Da=null}function bo(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ps===null?mr.memoizedState=Ps=f:Ps=Ps.next=f,Ps}function Us(){if(gi===null){var f=mr.alternate;f=f!==null?f.memoizedState:null}else f=gi.next;var m=Ps===null?mr.memoizedState:Ps.next;if(m!==null)Ps=m,gi=f;else{if(f===null)throw mr.alternate===null?Error(r(467)):Error(r(310));gi=f,f={memoizedState:gi.memoizedState,baseState:gi.baseState,baseQueue:gi.baseQueue,queue:gi.queue,next:null},Ps===null?mr.memoizedState=Ps=f:Ps=Ps.next=f}return Ps}function If(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Lc(f){var m=Zl;return Zl+=1,Da===null&&(Da=[]),f=ob(Da,f,m),m=mr,(Ps===null?m.memoizedState:Ps.next)===null&&(m=m.alternate,z.H=m===null||m.memoizedState===null?vb:jS),f}function db(f){if(f!==null&&typeof f=="object"){if(typeof f.then=="function")return Lc(f);if(f.$$typeof===E)return ps(f)}throw Error(r(438,String(f)))}function kS(f){var m=null,w=mr.updateQueue;if(w!==null&&(m=w.memoCache),m==null){var A=mr.alternate;A!==null&&(A=A.updateQueue,A!==null&&(A=A.memoCache,A!=null&&(m={data:A.data.map(function(D){return D.slice()}),index:0})))}if(m==null&&(m={data:[],index:0}),w===null&&(w=If(),mr.updateQueue=w),w.memoCache=m,w=m.data[m.index],w===void 0)for(w=m.data[m.index]=Array(f),A=0;A<f;A++)w[A]=I;return m.index++,w}function Ed(f,m){return typeof m=="function"?m(f):m}function Df(f){var m=Us();return OS(m,gi,f)}function OS(f,m,w){var A=f.queue;if(A===null)throw Error(r(311));A.lastRenderedReducer=w;var D=f.baseQueue,U=A.pending;if(U!==null){if(D!==null){var ie=D.next;D.next=U.next,U.next=ie}m.baseQueue=D=U,A.pending=null}if(U=f.baseState,D===null)f.memoizedState=U;else{m=D.next;var fe=ie=null,Re=null,rt=m,Dt=!1;do{var Pt=rt.lane&-536870913;if(Pt!==rt.lane?(Fn&Pt)===Pt:(Cd&Pt)===Pt){var ft=rt.revertLane;if(ft===0)Re!==null&&(Re=Re.next={lane:0,revertLane:0,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null}),Pt===pr&&(Dt=!0);else if((Cd&ft)===ft){rt=rt.next,ft===pr&&(Dt=!0);continue}else Pt={lane:0,revertLane:rt.revertLane,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null},Re===null?(fe=Re=Pt,ie=U):Re=Re.next=Pt,mr.lanes|=ft,Gc|=ft;Pt=rt.action,vo&&w(U,Pt),U=rt.hasEagerState?rt.eagerState:w(U,Pt)}else ft={lane:Pt,revertLane:rt.revertLane,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null},Re===null?(fe=Re=ft,ie=U):Re=Re.next=ft,mr.lanes|=Pt,Gc|=Pt;rt=rt.next}while(rt!==null&&rt!==m);if(Re===null?ie=U:Re.next=fe,!Fo(U,f.memoizedState)&&(pa=!0,Dt&&(w=ym,w!==null)))throw w;f.memoizedState=U,f.baseState=ie,f.baseQueue=Re,A.lastRenderedState=U}return D===null&&(A.lanes=0),[f.memoizedState,A.dispatch]}function BS(f){var m=Us(),w=m.queue;if(w===null)throw Error(r(311));w.lastRenderedReducer=f;var A=w.dispatch,D=w.pending,U=m.memoizedState;if(D!==null){w.pending=null;var ie=D=D.next;do U=f(U,ie.action),ie=ie.next;while(ie!==D);Fo(U,m.memoizedState)||(pa=!0),m.memoizedState=U,m.baseQueue===null&&(m.baseState=U),w.lastRenderedState=U}return[U,A]}function $2(f,m,w){var A=mr,D=Us(),U=ni;if(U){if(w===void 0)throw Error(r(407));w=w()}else w=m();var ie=!Fo((gi||D).memoizedState,w);ie&&(D.memoizedState=w,pa=!0),D=D.queue;var fe=F2.bind(null,A,D,f);if(Em(2048,8,fe,[f]),D.getSnapshot!==m||ie||Ps!==null&&Ps.memoizedState.tag&1){if(A.flags|=2048,_m(9,k0(),L2.bind(null,A,D,w,m),null),ur===null)throw Error(r(349));U||(Cd&124)!==0||Cm(A,m,w)}return w}function Cm(f,m,w){f.flags|=16384,f={getSnapshot:m,value:w},m=mr.updateQueue,m===null?(m=If(),mr.updateQueue=m,m.stores=[f]):(w=m.stores,w===null?m.stores=[f]:w.push(f))}function L2(f,m,w,A){m.value=w,m.getSnapshot=A,P2(m)&&U2(f)}function F2(f,m,w){return w(function(){P2(m)&&U2(f)})}function P2(f){var m=f.getSnapshot;f=f.value;try{var w=m();return!Fo(f,w)}catch{return!0}}function U2(f){var m=yd(f,2);m!==null&&wo(m,f,2)}function $S(f){var m=bo();if(typeof f=="function"){var w=f;if(f=w(),vo){et(!0);try{w()}finally{et(!1)}}}return m.memoizedState=m.baseState=f,m.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ed,lastRenderedState:f},m}function z2(f,m,w,A){return f.baseState=w,OS(f,gi,typeof A=="function"?A:Ed)}function ak(f,m,w,A,D){if(yb(f))throw Error(r(485));if(f=m.action,f!==null){var U={payload:D,action:f,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ie){U.listeners.push(ie)}};z.T!==null?w(!0):U.isTransition=!1,A(U),w=m.pending,w===null?(U.next=m.pending=U,H2(m,U)):(U.next=w.next,m.pending=w.next=U)}}function H2(f,m){var w=m.action,A=m.payload,D=f.state;if(m.isTransition){var U=z.T,ie={};z.T=ie;try{var fe=w(D,A),Re=z.S;Re!==null&&Re(ie,fe),V2(f,m,fe)}catch(rt){LS(f,m,rt)}finally{z.T=U}}else try{U=w(D,A),V2(f,m,U)}catch(rt){LS(f,m,rt)}}function V2(f,m,w){w!==null&&typeof w=="object"&&typeof w.then=="function"?w.then(function(A){G2(f,m,A)},function(A){return LS(f,m,A)}):G2(f,m,w)}function G2(f,m,w){m.status="fulfilled",m.value=w,W2(m),f.state=w,m=f.pending,m!==null&&(w=m.next,w===m?f.pending=null:(w=w.next,m.next=w,H2(f,w)))}function LS(f,m,w){var A=f.pending;if(f.pending=null,A!==null){A=A.next;do m.status="rejected",m.reason=w,W2(m),m=m.next;while(m!==A)}f.action=null}function W2(f){f=f.listeners;for(var m=0;m<f.length;m++)(0,f[m])()}function FS(f,m){return m}function j2(f,m){if(ni){var w=ur.formState;if(w!==null){e:{var A=mr;if(ni){if(ls){t:{for(var D=ls,U=fl;D.nodeType!==8;){if(!U){D=null;break t}if(D=Dd(D.nextSibling),D===null){D=null;break t}}U=D.data,D=U==="F!"||U==="F"?D:null}if(D){ls=Dd(D.nextSibling),A=D.data==="F!";break e}}Af(A)}A=!1}A&&(m=w[0])}}return w=bo(),w.memoizedState=w.baseState=m,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:FS,lastRenderedState:m},w.queue=A,w=sA.bind(null,mr,A),A.dispatch=w,A=$S(!1),U=gb.bind(null,mr,!1,A.queue),A=bo(),D={state:m,dispatch:null,action:f,pending:null},A.queue=D,w=ak.bind(null,mr,D,U,w),D.dispatch=w,A.memoizedState=f,[m,w,!1]}function q2(f){var m=Us();return X2(m,gi,f)}function X2(f,m,w){if(m=OS(f,m,FS)[0],f=Df(Ed)[0],typeof m=="object"&&m!==null&&typeof m.then=="function")try{var A=Lc(m)}catch(ie){throw ie===R0?$c:ie}else A=m;m=Us();var D=m.queue,U=D.dispatch;return w!==m.memoizedState&&(mr.flags|=2048,_m(9,k0(),ok.bind(null,D,w),null)),[A,U,f]}function ok(f,m){f.action=m}function K2(f){var m=Us(),w=gi;if(w!==null)return X2(m,w,f);Us(),m=m.memoizedState,w=Us();var A=w.queue.dispatch;return w.memoizedState=f,[m,A,!1]}function _m(f,m,w,A){return f={tag:f,create:w,deps:A,inst:m,next:null},m=mr.updateQueue,m===null&&(m=If(),mr.updateQueue=m),w=m.lastEffect,w===null?m.lastEffect=f.next=f:(A=w.next,w.next=f,f.next=A,m.lastEffect=f),f}function k0(){return{destroy:void 0,resource:void 0}}function PS(){return Us().memoizedState}function fb(f,m,w,A){var D=bo();A=A===void 0?null:A,mr.flags|=f,D.memoizedState=_m(1|m,k0(),w,A)}function Em(f,m,w,A){var D=Us();A=A===void 0?null:A;var U=D.memoizedState.inst;gi!==null&&A!==null&&ja(A,gi.memoizedState.deps)?D.memoizedState=_m(m,U,w,A):(mr.flags|=f,D.memoizedState=_m(1|m,U,w,A))}function US(f,m){fb(8390656,8,f,m)}function zS(f,m){Em(2048,8,f,m)}function hb(f,m){return Em(4,2,f,m)}function pb(f,m){return Em(4,4,f,m)}function Y2(f,m){if(typeof m=="function"){f=f();var w=m(f);return function(){typeof w=="function"?w():m(null)}}if(m!=null)return f=f(),m.current=f,function(){m.current=null}}function J2(f,m,w){w=w!=null?w.concat([f]):null,Em(4,4,Y2.bind(null,m,f),w)}function HS(){}function Z2(f,m){var w=Us();m=m===void 0?null:m;var A=w.memoizedState;return m!==null&&ja(m,A[1])?A[0]:(w.memoizedState=[f,m],f)}function VS(f,m){var w=Us();m=m===void 0?null:m;var A=w.memoizedState;if(m!==null&&ja(m,A[1]))return A[0];if(A=f(),vo){et(!0);try{f()}finally{et(!1)}}return w.memoizedState=[A,m],A}function mb(f,m,w){return w===void 0||(Cd&1073741824)!==0?f.memoizedState=m:(f.memoizedState=w,f=Rb(),mr.lanes|=f,Gc|=f,w)}function Q2(f,m,w,A){return Fo(w,m)?w:wm.current!==null?(f=mb(f,w,A),Fo(f,m)||(pa=!0),f):(Cd&42)===0?(pa=!0,f.memoizedState=w):(f=Rb(),mr.lanes|=f,Gc|=f,m)}function eA(f,m,w,A,D){var U=J.p;J.p=U!==0&&8>U?U:8;var ie=z.T,fe={};z.T=fe,gb(f,!1,m,w);try{var Re=D(),rt=z.S;if(rt!==null&&rt(fe,Re),Re!==null&&typeof Re=="object"&&typeof Re.then=="function"){var Dt=ik(Re,A);O0(f,m,Dt,ys(f))}else O0(f,m,A,ys(f))}catch(Pt){O0(f,m,{then:function(){},status:"rejected",reason:Pt},ys())}finally{J.p=U,z.T=ie}}function lk(){}function GS(f,m,w,A){if(f.tag!==5)throw Error(r(476));var D=tA(f).queue;eA(f,D,m,Q,w===null?lk:function(){return nA(f),w(A)})}function tA(f){var m=f.memoizedState;if(m!==null)return m;m={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ed,lastRenderedState:Q},next:null};var w={};return m.next={memoizedState:w,baseState:w,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ed,lastRenderedState:w},next:null},f.memoizedState=m,f=f.alternate,f!==null&&(f.memoizedState=m),m}function nA(f){var m=tA(f).next.queue;O0(f,m,{},ys())}function WS(){return ps(iw)}function rA(){return Us().memoizedState}function iA(){return Us().memoizedState}function ck(f){for(var m=f.return;m!==null;){switch(m.tag){case 24:case 3:var w=ys();f=du(w);var A=wd(m,f,w);A!==null&&(wo(A,m,w),Hh(A,m,w)),m={cache:rb()},f.payload=m;return}m=m.return}}function uk(f,m,w){var A=ys();w={lane:A,revertLane:0,action:w,hasEagerState:!1,eagerState:null,next:null},yb(f)?aA(m,w):(w=Zv(f,m,w,A),w!==null&&(wo(w,f,A),pl(w,m,A)))}function sA(f,m,w){var A=ys();O0(f,m,w,A)}function O0(f,m,w,A){var D={lane:A,revertLane:0,action:w,hasEagerState:!1,eagerState:null,next:null};if(yb(f))aA(m,D);else{var U=f.alternate;if(f.lanes===0&&(U===null||U.lanes===0)&&(U=m.lastRenderedReducer,U!==null))try{var ie=m.lastRenderedState,fe=U(ie,w);if(D.hasEagerState=!0,D.eagerState=fe,Fo(fe,ie))return wf(f,m,D,0),ur===null&&b0(),!1}catch{}finally{}if(w=Zv(f,m,D,A),w!==null)return wo(w,f,A),pl(w,m,A),!0}return!1}function gb(f,m,w,A){if(A={lane:2,revertLane:hk(),action:A,hasEagerState:!1,eagerState:null,next:null},yb(f)){if(m)throw Error(r(479))}else m=Zv(f,w,A,2),m!==null&&wo(m,f,2)}function yb(f){var m=f.alternate;return f===mr||m!==null&&m===mr}function aA(f,m){Nf=cb=!0;var w=f.pending;w===null?m.next=m:(m.next=w.next,w.next=m),f.pending=m}function pl(f,m,w){if((w&4194048)!==0){var A=m.lanes;A&=f.pendingLanes,w|=A,m.lanes=w,un(f,w)}}var B0={readContext:ps,use:db,useCallback:_s,useContext:_s,useEffect:_s,useImperativeHandle:_s,useLayoutEffect:_s,useInsertionEffect:_s,useMemo:_s,useReducer:_s,useRef:_s,useState:_s,useDebugValue:_s,useDeferredValue:_s,useTransition:_s,useSyncExternalStore:_s,useId:_s,useHostTransitionStatus:_s,useFormState:_s,useActionState:_s,useOptimistic:_s,useMemoCache:_s,useCacheRefresh:_s},vb={readContext:ps,use:db,useCallback:function(f,m){return bo().memoizedState=[f,m===void 0?null:m],f},useContext:ps,useEffect:US,useImperativeHandle:function(f,m,w){w=w!=null?w.concat([f]):null,fb(4194308,4,Y2.bind(null,m,f),w)},useLayoutEffect:function(f,m){return fb(4194308,4,f,m)},useInsertionEffect:function(f,m){fb(4,2,f,m)},useMemo:function(f,m){var w=bo();m=m===void 0?null:m;var A=f();if(vo){et(!0);try{f()}finally{et(!1)}}return w.memoizedState=[A,m],A},useReducer:function(f,m,w){var A=bo();if(w!==void 0){var D=w(m);if(vo){et(!0);try{w(m)}finally{et(!1)}}}else D=m;return A.memoizedState=A.baseState=D,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:D},A.queue=f,f=f.dispatch=uk.bind(null,mr,f),[A.memoizedState,f]},useRef:function(f){var m=bo();return f={current:f},m.memoizedState=f},useState:function(f){f=$S(f);var m=f.queue,w=sA.bind(null,mr,m);return m.dispatch=w,[f.memoizedState,w]},useDebugValue:HS,useDeferredValue:function(f,m){var w=bo();return mb(w,f,m)},useTransition:function(){var f=$S(!1);return f=eA.bind(null,mr,f.queue,!0,!1),bo().memoizedState=f,[!1,f]},useSyncExternalStore:function(f,m,w){var A=mr,D=bo();if(ni){if(w===void 0)throw Error(r(407));w=w()}else{if(w=m(),ur===null)throw Error(r(349));(Fn&124)!==0||Cm(A,m,w)}D.memoizedState=w;var U={value:w,getSnapshot:m};return D.queue=U,US(F2.bind(null,A,U,f),[f]),A.flags|=2048,_m(9,k0(),L2.bind(null,A,U,w,m),null),w},useId:function(){var f=bo(),m=ur.identifierPrefix;if(ni){var w=cu,A=lu;w=(A&~(1<<32-Ft(A)-1)).toString(32)+w,m=""+m+"R"+w,w=na++,0<w&&(m+="H"+w.toString(32)),m+=""}else w=k2++,m=""+m+"r"+w.toString(32)+"";return f.memoizedState=m},useHostTransitionStatus:WS,useFormState:j2,useActionState:j2,useOptimistic:function(f){var m=bo();m.memoizedState=m.baseState=f;var w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return m.queue=w,m=gb.bind(null,mr,!0,w),w.dispatch=m,[f,m]},useMemoCache:kS,useCacheRefresh:function(){return bo().memoizedState=ck.bind(null,mr)}},jS={readContext:ps,use:db,useCallback:Z2,useContext:ps,useEffect:zS,useImperativeHandle:J2,useInsertionEffect:hb,useLayoutEffect:pb,useMemo:VS,useReducer:Df,useRef:PS,useState:function(){return Df(Ed)},useDebugValue:HS,useDeferredValue:function(f,m){var w=Us();return Q2(w,gi.memoizedState,f,m)},useTransition:function(){var f=Df(Ed)[0],m=Us().memoizedState;return[typeof f=="boolean"?f:Lc(f),m]},useSyncExternalStore:$2,useId:rA,useHostTransitionStatus:WS,useFormState:q2,useActionState:q2,useOptimistic:function(f,m){var w=Us();return z2(w,gi,f,m)},useMemoCache:kS,useCacheRefresh:iA},oA={readContext:ps,use:db,useCallback:Z2,useContext:ps,useEffect:zS,useImperativeHandle:J2,useInsertionEffect:hb,useLayoutEffect:pb,useMemo:VS,useReducer:BS,useRef:PS,useState:function(){return BS(Ed)},useDebugValue:HS,useDeferredValue:function(f,m){var w=Us();return gi===null?mb(w,f,m):Q2(w,gi.memoizedState,f,m)},useTransition:function(){var f=BS(Ed)[0],m=Us().memoizedState;return[typeof f=="boolean"?f:Lc(f),m]},useSyncExternalStore:$2,useId:rA,useHostTransitionStatus:WS,useFormState:K2,useActionState:K2,useOptimistic:function(f,m){var w=Us();return gi!==null?z2(w,gi,f,m):(w.baseState=f,[f,w.queue.dispatch])},useMemoCache:kS,useCacheRefresh:iA},Vh=null,$0=0;function L0(f){var m=$0;return $0+=1,Vh===null&&(Vh=[]),ob(Vh,f,m)}function Am(f,m){m=m.props.ref,f.ref=m!==void 0?m:null}function bb(f,m){throw m.$$typeof===d?Error(r(525)):(f=Object.prototype.toString.call(m),Error(r(31,f==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":f)))}function lA(f){var m=f._init;return m(f._payload)}function cA(f){function m(Je,We){if(f){var tt=Je.deletions;tt===null?(Je.deletions=[We],Je.flags|=16):tt.push(We)}}function w(Je,We){if(!f)return null;for(;We!==null;)m(Je,We),We=We.sibling;return null}function A(Je){for(var We=new Map;Je!==null;)Je.key!==null?We.set(Je.key,Je):We.set(Je.index,Je),Je=Je.sibling;return We}function D(Je,We){return Je=Cs(Je,We),Je.index=0,Je.sibling=null,Je}function U(Je,We,tt){return Je.index=tt,f?(tt=Je.alternate,tt!==null?(tt=tt.index,tt<We?(Je.flags|=67108866,We):tt):(Je.flags|=67108866,We)):(Je.flags|=1048576,We)}function ie(Je){return f&&Je.alternate===null&&(Je.flags|=67108866),Je}function fe(Je,We,tt,Ot){return We===null||We.tag!==6?(We=S0(tt,Je.mode,Ot),We.return=Je,We):(We=D(We,tt),We.return=Je,We)}function Re(Je,We,tt,Ot){var En=tt.type;return En===g?Dt(Je,We,tt.props.children,Ot,tt.key):We!==null&&(We.elementType===En||typeof En=="object"&&En!==null&&En.$$typeof===$&&lA(En)===We.type)?(We=D(We,tt.props),Am(We,tt),We.return=Je,We):(We=ha(tt.type,tt.key,tt.props,null,Je.mode,Ot),Am(We,tt),We.return=Je,We)}function rt(Je,We,tt,Ot){return We===null||We.tag!==4||We.stateNode.containerInfo!==tt.containerInfo||We.stateNode.implementation!==tt.implementation?(We=Qv(tt,Je.mode,Ot),We.return=Je,We):(We=D(We,tt.children||[]),We.return=Je,We)}function Dt(Je,We,tt,Ot,En){return We===null||We.tag!==7?(We=_f(tt,Je.mode,Ot,En),We.return=Je,We):(We=D(We,tt),We.return=Je,We)}function Pt(Je,We,tt){if(typeof We=="string"&&We!==""||typeof We=="number"||typeof We=="bigint")return We=S0(""+We,Je.mode,tt),We.return=Je,We;if(typeof We=="object"&&We!==null){switch(We.$$typeof){case h:return tt=ha(We.type,We.key,We.props,null,Je.mode,tt),Am(tt,We),tt.return=Je,tt;case p:return We=Qv(We,Je.mode,tt),We.return=Je,We;case $:var Ot=We._init;return We=Ot(We._payload),Pt(Je,We,tt)}if(X(We)||P(We))return We=_f(We,Je.mode,tt,null),We.return=Je,We;if(typeof We.then=="function")return Pt(Je,L0(We),tt);if(We.$$typeof===E)return Pt(Je,E0(Je,We),tt);bb(Je,We)}return null}function ft(Je,We,tt,Ot){var En=We!==null?We.key:null;if(typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint")return En!==null?null:fe(Je,We,""+tt,Ot);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case h:return tt.key===En?Re(Je,We,tt,Ot):null;case p:return tt.key===En?rt(Je,We,tt,Ot):null;case $:return En=tt._init,tt=En(tt._payload),ft(Je,We,tt,Ot)}if(X(tt)||P(tt))return En!==null?null:Dt(Je,We,tt,Ot,null);if(typeof tt.then=="function")return ft(Je,We,L0(tt),Ot);if(tt.$$typeof===E)return ft(Je,We,E0(Je,tt),Ot);bb(Je,tt)}return null}function gt(Je,We,tt,Ot,En){if(typeof Ot=="string"&&Ot!==""||typeof Ot=="number"||typeof Ot=="bigint")return Je=Je.get(tt)||null,fe(We,Je,""+Ot,En);if(typeof Ot=="object"&&Ot!==null){switch(Ot.$$typeof){case h:return Je=Je.get(Ot.key===null?tt:Ot.key)||null,Re(We,Je,Ot,En);case p:return Je=Je.get(Ot.key===null?tt:Ot.key)||null,rt(We,Je,Ot,En);case $:var Lr=Ot._init;return Ot=Lr(Ot._payload),gt(Je,We,tt,Ot,En)}if(X(Ot)||P(Ot))return Je=Je.get(tt)||null,Dt(We,Je,Ot,En,null);if(typeof Ot.then=="function")return gt(Je,We,tt,L0(Ot),En);if(Ot.$$typeof===E)return gt(Je,We,tt,E0(We,Ot),En);bb(We,Ot)}return null}function sr(Je,We,tt,Ot){for(var En=null,Lr=null,Bn=We,Xn=We=0,Ka=null;Bn!==null&&Xn<tt.length;Xn++){Bn.index>Xn?(Ka=Bn,Bn=null):Ka=Bn.sibling;var hi=ft(Je,Bn,tt[Xn],Ot);if(hi===null){Bn===null&&(Bn=Ka);break}f&&Bn&&hi.alternate===null&&m(Je,Bn),We=U(hi,We,Xn),Lr===null?En=hi:Lr.sibling=hi,Lr=hi,Bn=Ka}if(Xn===tt.length)return w(Je,Bn),ni&&vd(Je,Xn),En;if(Bn===null){for(;Xn<tt.length;Xn++)Bn=Pt(Je,tt[Xn],Ot),Bn!==null&&(We=U(Bn,We,Xn),Lr===null?En=Bn:Lr.sibling=Bn,Lr=Bn);return ni&&vd(Je,Xn),En}for(Bn=A(Bn);Xn<tt.length;Xn++)Ka=gt(Bn,Je,Xn,tt[Xn],Ot),Ka!==null&&(f&&Ka.alternate!==null&&Bn.delete(Ka.key===null?Xn:Ka.key),We=U(Ka,We,Xn),Lr===null?En=Ka:Lr.sibling=Ka,Lr=Ka);return f&&Bn.forEach(function(Vm){return m(Je,Vm)}),ni&&vd(Je,Xn),En}function qn(Je,We,tt,Ot){if(tt==null)throw Error(r(151));for(var En=null,Lr=null,Bn=We,Xn=We=0,Ka=null,hi=tt.next();Bn!==null&&!hi.done;Xn++,hi=tt.next()){Bn.index>Xn?(Ka=Bn,Bn=null):Ka=Bn.sibling;var Vm=ft(Je,Bn,hi.value,Ot);if(Vm===null){Bn===null&&(Bn=Ka);break}f&&Bn&&Vm.alternate===null&&m(Je,Bn),We=U(Vm,We,Xn),Lr===null?En=Vm:Lr.sibling=Vm,Lr=Vm,Bn=Ka}if(hi.done)return w(Je,Bn),ni&&vd(Je,Xn),En;if(Bn===null){for(;!hi.done;Xn++,hi=tt.next())hi=Pt(Je,hi.value,Ot),hi!==null&&(We=U(hi,We,Xn),Lr===null?En=hi:Lr.sibling=hi,Lr=hi);return ni&&vd(Je,Xn),En}for(Bn=A(Bn);!hi.done;Xn++,hi=tt.next())hi=gt(Bn,Je,Xn,hi.value,Ot),hi!==null&&(f&&hi.alternate!==null&&Bn.delete(hi.key===null?Xn:hi.key),We=U(hi,We,Xn),Lr===null?En=hi:Lr.sibling=hi,Lr=hi);return f&&Bn.forEach(function(Qoe){return m(Je,Qoe)}),ni&&vd(Je,Xn),En}function Vi(Je,We,tt,Ot){if(typeof tt=="object"&&tt!==null&&tt.type===g&&tt.key===null&&(tt=tt.props.children),typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case h:e:{for(var En=tt.key;We!==null;){if(We.key===En){if(En=tt.type,En===g){if(We.tag===7){w(Je,We.sibling),Ot=D(We,tt.props.children),Ot.return=Je,Je=Ot;break e}}else if(We.elementType===En||typeof En=="object"&&En!==null&&En.$$typeof===$&&lA(En)===We.type){w(Je,We.sibling),Ot=D(We,tt.props),Am(Ot,tt),Ot.return=Je,Je=Ot;break e}w(Je,We);break}else m(Je,We);We=We.sibling}tt.type===g?(Ot=_f(tt.props.children,Je.mode,Ot,tt.key),Ot.return=Je,Je=Ot):(Ot=ha(tt.type,tt.key,tt.props,null,Je.mode,Ot),Am(Ot,tt),Ot.return=Je,Je=Ot)}return ie(Je);case p:e:{for(En=tt.key;We!==null;){if(We.key===En)if(We.tag===4&&We.stateNode.containerInfo===tt.containerInfo&&We.stateNode.implementation===tt.implementation){w(Je,We.sibling),Ot=D(We,tt.children||[]),Ot.return=Je,Je=Ot;break e}else{w(Je,We);break}else m(Je,We);We=We.sibling}Ot=Qv(tt,Je.mode,Ot),Ot.return=Je,Je=Ot}return ie(Je);case $:return En=tt._init,tt=En(tt._payload),Vi(Je,We,tt,Ot)}if(X(tt))return sr(Je,We,tt,Ot);if(P(tt)){if(En=P(tt),typeof En!="function")throw Error(r(150));return tt=En.call(tt),qn(Je,We,tt,Ot)}if(typeof tt.then=="function")return Vi(Je,We,L0(tt),Ot);if(tt.$$typeof===E)return Vi(Je,We,E0(Je,tt),Ot);bb(Je,tt)}return typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint"?(tt=""+tt,We!==null&&We.tag===6?(w(Je,We.sibling),Ot=D(We,tt),Ot.return=Je,Je=Ot):(w(Je,We),Ot=S0(tt,Je.mode,Ot),Ot.return=Je,Je=Ot),ie(Je)):w(Je,We)}return function(Je,We,tt,Ot){try{$0=0;var En=Vi(Je,We,tt,Ot);return Vh=null,En}catch(Bn){if(Bn===R0||Bn===$c)throw Bn;var Lr=zo(29,Bn,null,Je.mode);return Lr.lanes=Ot,Lr.return=Je,Lr}finally{}}}var Gh=cA(!0),uA=cA(!1),Ni=te(null),Fc=null;function kf(f){var m=f.alternate;le(Es,Es.current&1),le(Ni,f),Fc===null&&(m===null||wm.current!==null||m.memoizedState!==null)&&(Fc=f)}function dA(f){if(f.tag===22){if(le(Es,Es.current),le(Ni,f),Fc===null){var m=f.alternate;m!==null&&m.memoizedState!==null&&(Fc=f)}}else Of()}function Of(){le(Es,Es.current),le(Ni,Ni.current)}function fu(f){ne(Ni),Fc===f&&(Fc=null),ne(Es)}var Es=te(0);function Ad(f){for(var m=f;m!==null;){if(m.tag===13){var w=m.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||w.data==="$?"||Ek(w)))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===f)break;for(;m.sibling===null;){if(m.return===null||m.return===f)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}function Bf(f,m,w,A){m=f.memoizedState,w=w(A,m),w=w==null?m:u({},m,w),f.memoizedState=w,f.lanes===0&&(f.updateQueue.baseState=w)}var xo={enqueueSetState:function(f,m,w){f=f._reactInternals;var A=ys(),D=du(A);D.payload=m,w!=null&&(D.callback=w),m=wd(f,D,A),m!==null&&(wo(m,f,A),Hh(m,f,A))},enqueueReplaceState:function(f,m,w){f=f._reactInternals;var A=ys(),D=du(A);D.tag=1,D.payload=m,w!=null&&(D.callback=w),m=wd(f,D,A),m!==null&&(wo(m,f,A),Hh(m,f,A))},enqueueForceUpdate:function(f,m){f=f._reactInternals;var w=ys(),A=du(w);A.tag=2,m!=null&&(A.callback=m),m=wd(f,A,w),m!==null&&(wo(m,f,w),Hh(m,f,w))}};function fA(f,m,w,A,D,U,ie){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(A,U,ie):m.prototype&&m.prototype.isPureReactComponent?!Oc(w,A)||!Oc(D,U):!0}function hA(f,m,w,A){f=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(w,A),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(w,A),m.state!==f&&xo.enqueueReplaceState(m,m.state,null)}function hu(f,m){var w=m;if("ref"in m){w={};for(var A in m)A!=="ref"&&(w[A]=m[A])}if(f=f.defaultProps){w===m&&(w=u({},w));for(var D in f)w[D]===void 0&&(w[D]=f[D])}return w}var Wh=typeof reportError=="function"?reportError:function(f){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var m=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof f=="object"&&f!==null&&typeof f.message=="string"?String(f.message):String(f),error:f});if(!window.dispatchEvent(m))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",f);return}console.error(f)};function F0(f){Wh(f)}function xb(f){console.error(f)}function pA(f){Wh(f)}function Sb(f,m){try{var w=f.onUncaughtError;w(m.value,{componentStack:m.stack})}catch(A){setTimeout(function(){throw A})}}function Ql(f,m,w){try{var A=f.onCaughtError;A(w.value,{componentStack:w.stack,errorBoundary:m.tag===1?m.stateNode:null})}catch(D){setTimeout(function(){throw D})}}function wb(f,m,w){return w=du(w),w.tag=3,w.payload={element:null},w.callback=function(){Sb(f,m)},w}function mA(f){return f=du(f),f.tag=3,f}function Cb(f,m,w,A){var D=w.type.getDerivedStateFromError;if(typeof D=="function"){var U=A.value;f.payload=function(){return D(U)},f.callback=function(){Ql(m,w,A)}}var ie=w.stateNode;ie!==null&&typeof ie.componentDidCatch=="function"&&(f.callback=function(){Ql(m,w,A),typeof D!="function"&&(wl===null?wl=new Set([this]):wl.add(this));var fe=A.stack;this.componentDidCatch(A.value,{componentStack:fe!==null?fe:""})})}function dk(f,m,w,A,D){if(w.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){if(m=w.alternate,m!==null&&Kl(m,w,D,!0),w=Ni.current,w!==null){switch(w.tag){case 13:return Fc===null?y():w.alternate===null&&Yi===0&&(Yi=3),w.flags&=-257,w.flags|=65536,w.lanes=D,A===N0?w.flags|=16384:(m=w.updateQueue,m===null?w.updateQueue=new Set([A]):m.add(A),bt(f,A,D)),!1;case 22:return w.flags|=65536,A===N0?w.flags|=16384:(m=w.updateQueue,m===null?(m={transitions:null,markerInstances:null,retryQueue:new Set([A])},w.updateQueue=m):(w=m.retryQueue,w===null?m.retryQueue=new Set([A]):w.add(A)),bt(f,A,D)),!1}throw Error(r(435,w.tag))}return bt(f,A,D),y(),!1}if(ni)return m=Ni.current,m!==null?((m.flags&65536)===0&&(m.flags|=256),m.flags|=65536,m.lanes=D,A!==tb&&(f=Error(r(422),{cause:A}),zh(Na(f,w)))):(A!==tb&&(m=Error(r(423),{cause:A}),zh(Na(m,w))),f=f.current.alternate,f.flags|=65536,D&=-D,f.lanes|=D,A=Na(A,w),D=wb(f.stateNode,A,D),bm(f,D),Yi!==4&&(Yi=2)),!1;var U=Error(r(520),{cause:A});if(U=Na(U,w),fi===null?fi=[U]:fi.push(U),Yi!==4&&(Yi=2),m===null)return!0;A=Na(A,w),w=m;do{switch(w.tag){case 3:return w.flags|=65536,f=D&-D,w.lanes|=f,f=wb(w.stateNode,A,f),bm(w,f),!1;case 1:if(m=w.type,U=w.stateNode,(w.flags&128)===0&&(typeof m.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(wl===null||!wl.has(U))))return w.flags|=65536,D&=-D,w.lanes|=D,D=mA(D),Cb(D,f,w,A),bm(w,D),!1}w=w.return}while(w!==null);return!1}var gA=Error(r(461)),pa=!1;function As(f,m,w,A){m.child=f===null?uA(m,null,w,A):Gh(m,f.child,w,A)}function Vo(f,m,w,A,D){w=w.render;var U=m.ref;if("ref"in A){var ie={};for(var fe in A)fe!=="ref"&&(ie[fe]=A[fe])}else ie=A;return uu(m),A=_d(f,m,w,ie,U,D),fe=IS(),f!==null&&!pa?(ub(f,m,D),ma(f,m,D)):(ni&&fe&&xS(m),m.flags|=1,As(f,m,A,D),m.child)}function Go(f,m,w,A,D){if(f===null){var U=w.type;return typeof U=="function"&&!x0(U)&&U.defaultProps===void 0&&w.compare===null?(m.tag=15,m.type=U,qS(f,m,U,A,D)):(f=ha(w.type,null,A,m,m.mode,D),f.ref=m.ref,f.return=m,m.child=f)}if(U=f.child,!P0(f,D)){var ie=U.memoizedProps;if(w=w.compare,w=w!==null?w:Oc,w(ie,A)&&f.ref===m.ref)return ma(f,m,D)}return m.flags|=1,f=Cs(U,A),f.ref=m.ref,f.return=m,m.child=f}function qS(f,m,w,A,D){if(f!==null){var U=f.memoizedProps;if(Oc(U,A)&&f.ref===m.ref)if(pa=!1,m.pendingProps=A=U,P0(f,D))(f.flags&131072)!==0&&(pa=!0);else return m.lanes=f.lanes,ma(f,m,D)}return Tm(f,m,w,A,D)}function jh(f,m,w){var A=m.pendingProps,D=A.children,U=f!==null?f.memoizedState:null;if(A.mode==="hidden"){if((m.flags&128)!==0){if(A=U!==null?U.baseLanes|w:w,f!==null){for(D=m.child=f.child,U=0;D!==null;)U=U|D.lanes|D.childLanes,D=D.sibling;m.childLanes=U&~A}else m.childLanes=0,m.child=null;return qh(f,m,A,w)}if((w&536870912)!==0)m.memoizedState={baseLanes:0,cachePool:null},f!==null&&M0(m,U!==null?U.cachePool:null),U!==null?D2(m,U):NS(),dA(m);else return m.lanes=m.childLanes=536870912,qh(f,m,U!==null?U.baseLanes|w:w,w)}else U!==null?(M0(m,U.cachePool),D2(m,U),Of(),m.memoizedState=null):(f!==null&&M0(m,null),NS(),Of());return As(f,m,D,w),m.child}function qh(f,m,w,A){var D=Rf();return D=D===null?null:{parent:Fs._currentValue,pool:D},m.memoizedState={baseLanes:w,cachePool:D},f!==null&&M0(m,null),NS(),dA(m),f!==null&&Kl(f,m,A,!0),null}function Xh(f,m){var w=m.ref;if(w===null)f!==null&&f.ref!==null&&(m.flags|=4194816);else{if(typeof w!="function"&&typeof w!="object")throw Error(r(284));(f===null||f.ref!==w)&&(m.flags|=4194816)}}function Tm(f,m,w,A,D){return uu(m),w=_d(f,m,w,A,void 0,D),A=IS(),f!==null&&!pa?(ub(f,m,D),ma(f,m,D)):(ni&&A&&xS(m),m.flags|=1,As(f,m,w,D),m.child)}function ml(f,m,w,A,D,U){return uu(m),m.updateQueue=null,w=B2(m,A,w,D),O2(f),A=IS(),f!==null&&!pa?(ub(f,m,U),ma(f,m,U)):(ni&&A&&xS(m),m.flags|=1,As(f,m,w,U),m.child)}function gl(f,m,w,A,D){if(uu(m),m.stateNode===null){var U=Cf,ie=w.contextType;typeof ie=="object"&&ie!==null&&(U=ps(ie)),U=new w(A,U),m.memoizedState=U.state!==null&&U.state!==void 0?U.state:null,U.updater=xo,m.stateNode=U,U._reactInternals=m,U=m.stateNode,U.props=A,U.state=m.memoizedState,U.refs={},MS(m),ie=w.contextType,U.context=typeof ie=="object"&&ie!==null?ps(ie):Cf,U.state=m.memoizedState,ie=w.getDerivedStateFromProps,typeof ie=="function"&&(Bf(m,w,ie,A),U.state=m.memoizedState),typeof w.getDerivedStateFromProps=="function"||typeof U.getSnapshotBeforeUpdate=="function"||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(ie=U.state,typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount(),ie!==U.state&&xo.enqueueReplaceState(U,U.state,null),xm(m,A,U,D),I0(),U.state=m.memoizedState),typeof U.componentDidMount=="function"&&(m.flags|=4194308),A=!0}else if(f===null){U=m.stateNode;var fe=m.memoizedProps,Re=hu(w,fe);U.props=Re;var rt=U.context,Dt=w.contextType;ie=Cf,typeof Dt=="object"&&Dt!==null&&(ie=ps(Dt));var Pt=w.getDerivedStateFromProps;Dt=typeof Pt=="function"||typeof U.getSnapshotBeforeUpdate=="function",fe=m.pendingProps!==fe,Dt||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(fe||rt!==ie)&&hA(m,U,A,ie),Sd=!1;var ft=m.memoizedState;U.state=ft,xm(m,A,U,D),I0(),rt=m.memoizedState,fe||ft!==rt||Sd?(typeof Pt=="function"&&(Bf(m,w,Pt,A),rt=m.memoizedState),(Re=Sd||fA(m,w,Re,A,ft,rt,ie))?(Dt||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount()),typeof U.componentDidMount=="function"&&(m.flags|=4194308)):(typeof U.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=A,m.memoizedState=rt),U.props=A,U.state=rt,U.context=ie,A=Re):(typeof U.componentDidMount=="function"&&(m.flags|=4194308),A=!1)}else{U=m.stateNode,Qn(f,m),ie=m.memoizedProps,Dt=hu(w,ie),U.props=Dt,Pt=m.pendingProps,ft=U.context,rt=w.contextType,Re=Cf,typeof rt=="object"&&rt!==null&&(Re=ps(rt)),fe=w.getDerivedStateFromProps,(rt=typeof fe=="function"||typeof U.getSnapshotBeforeUpdate=="function")||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(ie!==Pt||ft!==Re)&&hA(m,U,A,Re),Sd=!1,ft=m.memoizedState,U.state=ft,xm(m,A,U,D),I0();var gt=m.memoizedState;ie!==Pt||ft!==gt||Sd||f!==null&&f.dependencies!==null&&_0(f.dependencies)?(typeof fe=="function"&&(Bf(m,w,fe,A),gt=m.memoizedState),(Dt=Sd||fA(m,w,Dt,A,ft,gt,Re)||f!==null&&f.dependencies!==null&&_0(f.dependencies))?(rt||typeof U.UNSAFE_componentWillUpdate!="function"&&typeof U.componentWillUpdate!="function"||(typeof U.componentWillUpdate=="function"&&U.componentWillUpdate(A,gt,Re),typeof U.UNSAFE_componentWillUpdate=="function"&&U.UNSAFE_componentWillUpdate(A,gt,Re)),typeof U.componentDidUpdate=="function"&&(m.flags|=4),typeof U.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof U.componentDidUpdate!="function"||ie===f.memoizedProps&&ft===f.memoizedState||(m.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||ie===f.memoizedProps&&ft===f.memoizedState||(m.flags|=1024),m.memoizedProps=A,m.memoizedState=gt),U.props=A,U.state=gt,U.context=Re,A=Dt):(typeof U.componentDidUpdate!="function"||ie===f.memoizedProps&&ft===f.memoizedState||(m.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||ie===f.memoizedProps&&ft===f.memoizedState||(m.flags|=1024),A=!1)}return U=A,Xh(f,m),A=(m.flags&128)!==0,U||A?(U=m.stateNode,w=A&&typeof w.getDerivedStateFromError!="function"?null:U.render(),m.flags|=1,f!==null&&A?(m.child=Gh(m,f.child,null,D),m.child=Gh(m,null,w,D)):As(f,m,w,D),m.memoizedState=U.state,f=m.child):f=ma(f,m,D),f}function $f(f,m,w,A){return pm(),m.flags|=256,As(f,m,w,A),m.child}var Pc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Uc(f){return{baseLanes:f,cachePool:sb()}}function ra(f,m,w){return f=f!==null?f.childLanes&~w:0,m&&(f|=ic),f}function Mm(f,m,w){var A=m.pendingProps,D=!1,U=(m.flags&128)!==0,ie;if((ie=U)||(ie=f!==null&&f.memoizedState===null?!1:(Es.current&2)!==0),ie&&(D=!0,m.flags&=-129),ie=(m.flags&32)!==0,m.flags&=-33,f===null){if(ni){if(D?kf(m):Of(),ni){var fe=ls,Re;if(Re=fe){e:{for(Re=fe,fe=fl;Re.nodeType!==8;){if(!fe){fe=null;break e}if(Re=Dd(Re.nextSibling),Re===null){fe=null;break e}}fe=Re}fe!==null?(m.memoizedState={dehydrated:fe,treeContext:Ef!==null?{id:lu,overflow:cu}:null,retryLane:536870912,hydrationErrors:null},Re=zo(18,null,null,0),Re.stateNode=fe,Re.return=m,m.child=Re,yo=m,ls=null,Re=!0):Re=!1}Re||Af(m)}if(fe=m.memoizedState,fe!==null&&(fe=fe.dehydrated,fe!==null))return Ek(fe)?m.lanes=32:m.lanes=536870912,null;fu(m)}return fe=A.children,A=A.fallback,D?(Of(),D=m.mode,fe=Kh({mode:"hidden",children:fe},D),A=_f(A,D,w,null),fe.return=m,A.return=m,fe.sibling=A,m.child=fe,D=m.child,D.memoizedState=Uc(w),D.childLanes=ra(f,ie,w),m.memoizedState=Pc,A):(kf(m),pu(m,fe))}if(Re=f.memoizedState,Re!==null&&(fe=Re.dehydrated,fe!==null)){if(U)m.flags&256?(kf(m),m.flags&=-257,m=ka(f,m,w)):m.memoizedState!==null?(Of(),m.child=f.child,m.flags|=128,m=null):(Of(),D=A.fallback,fe=m.mode,A=Kh({mode:"visible",children:A.children},fe),D=_f(D,fe,w,null),D.flags|=2,A.return=m,D.return=m,A.sibling=D,m.child=A,Gh(m,f.child,null,w),A=m.child,A.memoizedState=Uc(w),A.childLanes=ra(f,ie,w),m.memoizedState=Pc,m=D);else if(kf(m),Ek(fe)){if(ie=fe.nextSibling&&fe.nextSibling.dataset,ie)var rt=ie.dgst;ie=rt,A=Error(r(419)),A.stack="",A.digest=ie,zh({value:A,source:null,stack:null}),m=ka(f,m,w)}else if(pa||Kl(f,m,w,!1),ie=(w&f.childLanes)!==0,pa||ie){if(ie=ur,ie!==null&&(A=w&-w,A=(A&42)!==0?1:In(A),A=(A&(ie.suspendedLanes|w))!==0?0:A,A!==0&&A!==Re.retryLane))throw Re.retryLane=A,yd(f,A),wo(ie,f,A),gA;fe.data==="$?"||y(),m=ka(f,m,w)}else fe.data==="$?"?(m.flags|=192,m.child=f.child,m=null):(f=Re.treeContext,ls=Dd(fe.nextSibling),yo=m,ni=!0,Xl=null,fl=!1,f!==null&&(Ia[dl++]=lu,Ia[dl++]=cu,Ia[dl++]=Ef,lu=f.id,cu=f.overflow,Ef=m),m=pu(m,A.children),m.flags|=4096);return m}return D?(Of(),D=A.fallback,fe=m.mode,Re=f.child,rt=Re.sibling,A=Cs(Re,{mode:"hidden",children:A.children}),A.subtreeFlags=Re.subtreeFlags&65011712,rt!==null?D=Cs(rt,D):(D=_f(D,fe,w,null),D.flags|=2),D.return=m,A.return=m,A.sibling=D,m.child=A,A=D,D=m.child,fe=f.child.memoizedState,fe===null?fe=Uc(w):(Re=fe.cachePool,Re!==null?(rt=Fs._currentValue,Re=Re.parent!==rt?{parent:rt,pool:rt}:Re):Re=sb(),fe={baseLanes:fe.baseLanes|w,cachePool:Re}),D.memoizedState=fe,D.childLanes=ra(f,ie,w),m.memoizedState=Pc,A):(kf(m),w=f.child,f=w.sibling,w=Cs(w,{mode:"visible",children:A.children}),w.return=m,w.sibling=null,f!==null&&(ie=m.deletions,ie===null?(m.deletions=[f],m.flags|=16):ie.push(f)),m.child=w,m.memoizedState=null,w)}function pu(f,m){return m=Kh({mode:"visible",children:m},f.mode),m.return=f,f.child=m}function Kh(f,m){return f=zo(22,f,null,m),f.lanes=0,f.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},f}function ka(f,m,w){return Gh(m,f.child,null,w),f=pu(m,m.pendingProps.children),f.flags|=2,m.memoizedState=null,f}function Oa(f,m,w){f.lanes|=m;var A=f.alternate;A!==null&&(A.lanes|=m),_S(f.return,m,w)}function jr(f,m,w,A,D){var U=f.memoizedState;U===null?f.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:A,tail:w,tailMode:D}:(U.isBackwards=m,U.rendering=null,U.renderingStartTime=0,U.last=A,U.tail=w,U.tailMode=D)}function ec(f,m,w){var A=m.pendingProps,D=A.revealOrder,U=A.tail;if(As(f,m,A.children,w),A=Es.current,(A&2)!==0)A=A&1|2,m.flags|=128;else{if(f!==null&&(f.flags&128)!==0)e:for(f=m.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&Oa(f,w,m);else if(f.tag===19)Oa(f,w,m);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===m)break e;for(;f.sibling===null;){if(f.return===null||f.return===m)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}A&=1}switch(le(Es,A),D){case"forwards":for(w=m.child,D=null;w!==null;)f=w.alternate,f!==null&&Ad(f)===null&&(D=w),w=w.sibling;w=D,w===null?(D=m.child,m.child=null):(D=w.sibling,w.sibling=null),jr(m,!1,D,w,U);break;case"backwards":for(w=null,D=m.child,m.child=null;D!==null;){if(f=D.alternate,f!==null&&Ad(f)===null){m.child=D;break}f=D.sibling,D.sibling=w,w=D,D=f}jr(m,!0,w,null,U);break;case"together":jr(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function ma(f,m,w){if(f!==null&&(m.dependencies=f.dependencies),Gc|=m.lanes,(w&m.childLanes)===0)if(f!==null){if(Kl(f,m,w,!1),(w&m.childLanes)===0)return null}else return null;if(f!==null&&m.child!==f.child)throw Error(r(153));if(m.child!==null){for(f=m.child,w=Cs(f,f.pendingProps),m.child=w,w.return=m;f.sibling!==null;)f=f.sibling,w=w.sibling=Cs(f,f.pendingProps),w.return=m;w.sibling=null}return m.child}function P0(f,m){return(f.lanes&m)!==0?!0:(f=f.dependencies,!!(f!==null&&_0(f)))}function tc(f,m,w){switch(m.tag){case 3:Pe(m,m.stateNode.containerInfo),Mf(m,Fs,f.memoizedState.cache),pm();break;case 27:case 5:Ke(m);break;case 4:Pe(m,m.stateNode.containerInfo);break;case 10:Mf(m,m.type,m.memoizedProps.value);break;case 13:var A=m.memoizedState;if(A!==null)return A.dehydrated!==null?(kf(m),m.flags|=128,null):(w&m.child.childLanes)!==0?Mm(f,m,w):(kf(m),f=ma(f,m,w),f!==null?f.sibling:null);kf(m);break;case 19:var D=(f.flags&128)!==0;if(A=(w&m.childLanes)!==0,A||(Kl(f,m,w,!1),A=(w&m.childLanes)!==0),D){if(A)return ec(f,m,w);m.flags|=128}if(D=m.memoizedState,D!==null&&(D.rendering=null,D.tail=null,D.lastEffect=null),le(Es,Es.current),A)break;return null;case 22:case 23:return m.lanes=0,jh(f,m,w);case 24:Mf(m,Fs,f.memoizedState.cache)}return ma(f,m,w)}function Yh(f,m,w){if(f!==null)if(f.memoizedProps!==m.pendingProps)pa=!0;else{if(!P0(f,w)&&(m.flags&128)===0)return pa=!1,tc(f,m,w);pa=(f.flags&131072)!==0}else pa=!1,ni&&(m.flags&1048576)!==0&&eb(m,hm,m.index);switch(m.lanes=0,m.tag){case 16:e:{f=m.pendingProps;var A=m.elementType,D=A._init;if(A=D(A._payload),m.type=A,typeof A=="function")x0(A)?(f=hu(A,f),m.tag=1,m=gl(null,m,A,f,w)):(m.tag=0,m=Tm(null,m,A,f,w));else{if(A!=null){if(D=A.$$typeof,D===_){m.tag=11,m=Vo(null,m,A,f,w);break e}else if(D===L){m.tag=14,m=Go(null,m,A,f,w);break e}}throw m=W(A)||A,Error(r(306,m,""))}}return m;case 0:return Tm(f,m,m.type,m.pendingProps,w);case 1:return A=m.type,D=hu(A,m.pendingProps),gl(f,m,A,D,w);case 3:e:{if(Pe(m,m.stateNode.containerInfo),f===null)throw Error(r(387));A=m.pendingProps;var U=m.memoizedState;D=U.element,Qn(f,m),xm(m,A,null,w);var ie=m.memoizedState;if(A=ie.cache,Mf(m,Fs,A),A!==U.cache&&C0(m,[Fs],w,!0),I0(),A=ie.element,U.isDehydrated)if(U={element:A,isDehydrated:!1,cache:ie.cache},m.updateQueue.baseState=U,m.memoizedState=U,m.flags&256){m=$f(f,m,A,w);break e}else if(A!==D){D=Na(Error(r(424)),m),zh(D),m=$f(f,m,A,w);break e}else{switch(f=m.stateNode.containerInfo,f.nodeType){case 9:f=f.body;break;default:f=f.nodeName==="HTML"?f.ownerDocument.body:f}for(ls=Dd(f.firstChild),yo=m,ni=!0,Xl=null,fl=!0,w=uA(m,null,A,w),m.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling}else{if(pm(),A===D){m=ma(f,m,w);break e}As(f,m,A,w)}m=m.child}return m;case 26:return Xh(f,m),f===null?(w=V6(m.type,null,m.pendingProps,null))?m.memoizedState=w:ni||(w=m.type,f=m.pendingProps,A=wA(ve.current).createElement(w),A[pi]=m,A[Si]=f,Co(A,w,f),ct(A),m.stateNode=A):m.memoizedState=V6(m.type,f.memoizedProps,m.pendingProps,f.memoizedState),null;case 27:return Ke(m),f===null&&ni&&(A=m.stateNode=U6(m.type,m.pendingProps,ve.current),yo=m,fl=!0,D=ls,Fm(m.type)?(Ak=D,ls=Dd(A.firstChild)):ls=D),As(f,m,m.pendingProps.children,w),Xh(f,m),f===null&&(m.flags|=4194304),m.child;case 5:return f===null&&ni&&((D=A=ls)&&(A=Moe(A,m.type,m.pendingProps,fl),A!==null?(m.stateNode=A,yo=m,ls=Dd(A.firstChild),fl=!1,D=!0):D=!1),D||Af(m)),Ke(m),D=m.type,U=m.pendingProps,ie=f!==null?f.memoizedProps:null,A=U.children,wk(D,U)?A=null:ie!==null&&wk(D,ie)&&(m.flags|=32),m.memoizedState!==null&&(D=_d(f,m,sk,null,null,w),iw._currentValue=D),Xh(f,m),As(f,m,A,w),m.child;case 6:return f===null&&ni&&((f=w=ls)&&(w=Roe(w,m.pendingProps,fl),w!==null?(m.stateNode=w,yo=m,ls=null,f=!0):f=!1),f||Af(m)),null;case 13:return Mm(f,m,w);case 4:return Pe(m,m.stateNode.containerInfo),A=m.pendingProps,f===null?m.child=Gh(m,null,A,w):As(f,m,A,w),m.child;case 11:return Vo(f,m,m.type,m.pendingProps,w);case 7:return As(f,m,m.pendingProps,w),m.child;case 8:return As(f,m,m.pendingProps.children,w),m.child;case 12:return As(f,m,m.pendingProps.children,w),m.child;case 10:return A=m.pendingProps,Mf(m,m.type,A.value),As(f,m,A.children,w),m.child;case 9:return D=m.type._context,A=m.pendingProps.children,uu(m),D=ps(D),A=A(D),m.flags|=1,As(f,m,A,w),m.child;case 14:return Go(f,m,m.type,m.pendingProps,w);case 15:return qS(f,m,m.type,m.pendingProps,w);case 19:return ec(f,m,w);case 31:return A=m.pendingProps,w=m.mode,A={mode:A.mode,children:A.children},f===null?(w=Kh(A,w),w.ref=m.ref,m.child=w,w.return=m,m=w):(w=Cs(f.child,A),w.ref=m.ref,m.child=w,w.return=m,m=w),m;case 22:return jh(f,m,w);case 24:return uu(m),A=ps(Fs),f===null?(D=Rf(),D===null&&(D=ur,U=rb(),D.pooledCache=U,U.refCount++,U!==null&&(D.pooledCacheLanes|=w),D=U),m.memoizedState={parent:A,cache:D},MS(m),Mf(m,Fs,D)):((f.lanes&w)!==0&&(Qn(f,m),xm(m,null,null,w),I0()),D=f.memoizedState,U=m.memoizedState,D.parent!==A?(D={parent:A,cache:A},m.memoizedState=D,m.lanes===0&&(m.memoizedState=m.updateQueue.baseState=D),Mf(m,Fs,A)):(A=U.cache,Mf(m,Fs,A),A!==D.cache&&C0(m,[Fs],w,!0))),As(f,m,m.pendingProps.children,w),m.child;case 29:throw m.pendingProps}throw Error(r(156,m.tag))}function zc(f){f.flags|=4}function U0(f,m){if(m.type!=="stylesheet"||(m.state.loading&4)!==0)f.flags&=-16777217;else if(f.flags|=16777216,!X6(m)){if(m=Ni.current,m!==null&&((Fn&4194048)===Fn?Fc!==null:(Fn&62914560)!==Fn&&(Fn&536870912)===0||m!==Fc))throw Jl=N0,AS;f.flags|=8192}}function Td(f,m){m!==null&&(f.flags|=4),f.flags&16384&&(m=f.tag!==22?qe():536870912,f.lanes|=m,Zr|=m)}function Jh(f,m){if(!ni)switch(f.tailMode){case"hidden":m=f.tail;for(var w=null;m!==null;)m.alternate!==null&&(w=m),m=m.sibling;w===null?f.tail=null:w.sibling=null;break;case"collapsed":w=f.tail;for(var A=null;w!==null;)w.alternate!==null&&(A=w),w=w.sibling;A===null?m||f.tail===null?f.tail=null:f.tail.sibling=null:A.sibling=null}}function Pi(f){var m=f.alternate!==null&&f.alternate.child===f.child,w=0,A=0;if(m)for(var D=f.child;D!==null;)w|=D.lanes|D.childLanes,A|=D.subtreeFlags&65011712,A|=D.flags&65011712,D.return=f,D=D.sibling;else for(D=f.child;D!==null;)w|=D.lanes|D.childLanes,A|=D.subtreeFlags,A|=D.flags,D.return=f,D=D.sibling;return f.subtreeFlags|=A,f.childLanes=w,m}function XS(f,m,w){var A=m.pendingProps;switch(SS(m),m.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pi(m),null;case 1:return Pi(m),null;case 3:return w=m.stateNode,A=null,f!==null&&(A=f.memoizedState.cache),m.memoizedState.cache!==A&&(m.flags|=2048),xd(Fs),ze(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(f===null||f.child===null)&&(Bc(m)?zc(m):f===null||f.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,ui())),Pi(m),null;case 26:return w=m.memoizedState,f===null?(zc(m),w!==null?(Pi(m),U0(m,w)):(Pi(m),m.flags&=-16777217)):w?w!==f.memoizedState?(zc(m),Pi(m),U0(m,w)):(Pi(m),m.flags&=-16777217):(f.memoizedProps!==A&&zc(m),Pi(m),m.flags&=-16777217),null;case 27:pt(m),w=ve.current;var D=m.type;if(f!==null&&m.stateNode!=null)f.memoizedProps!==A&&zc(m);else{if(!A){if(m.stateNode===null)throw Error(r(166));return Pi(m),null}f=ye.current,Bc(m)?M2(m):(f=U6(D,A,w),m.stateNode=f,zc(m))}return Pi(m),null;case 5:if(pt(m),w=m.type,f!==null&&m.stateNode!=null)f.memoizedProps!==A&&zc(m);else{if(!A){if(m.stateNode===null)throw Error(r(166));return Pi(m),null}if(f=ye.current,Bc(m))M2(m);else{switch(D=wA(ve.current),f){case 1:f=D.createElementNS("http://www.w3.org/2000/svg",w);break;case 2:f=D.createElementNS("http://www.w3.org/1998/Math/MathML",w);break;default:switch(w){case"svg":f=D.createElementNS("http://www.w3.org/2000/svg",w);break;case"math":f=D.createElementNS("http://www.w3.org/1998/Math/MathML",w);break;case"script":f=D.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof A.is=="string"?D.createElement("select",{is:A.is}):D.createElement("select"),A.multiple?f.multiple=!0:A.size&&(f.size=A.size);break;default:f=typeof A.is=="string"?D.createElement(w,{is:A.is}):D.createElement(w)}}f[pi]=m,f[Si]=A;e:for(D=m.child;D!==null;){if(D.tag===5||D.tag===6)f.appendChild(D.stateNode);else if(D.tag!==4&&D.tag!==27&&D.child!==null){D.child.return=D,D=D.child;continue}if(D===m)break e;for(;D.sibling===null;){if(D.return===null||D.return===m)break e;D=D.return}D.sibling.return=D.return,D=D.sibling}m.stateNode=f;e:switch(Co(f,w,A),w){case"button":case"input":case"select":case"textarea":f=!!A.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&zc(m)}}return Pi(m),m.flags&=-16777217,null;case 6:if(f&&m.stateNode!=null)f.memoizedProps!==A&&zc(m);else{if(typeof A!="string"&&m.stateNode===null)throw Error(r(166));if(f=ve.current,Bc(m)){if(f=m.stateNode,w=m.memoizedProps,A=null,D=yo,D!==null)switch(D.tag){case 27:case 5:A=D.memoizedProps}f[pi]=m,f=!!(f.nodeValue===w||A!==null&&A.suppressHydrationWarning===!0||k6(f.nodeValue,w)),f||Af(m)}else f=wA(f).createTextNode(A),f[pi]=m,m.stateNode=f}return Pi(m),null;case 13:if(A=m.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(D=Bc(m),A!==null&&A.dehydrated!==null){if(f===null){if(!D)throw Error(r(318));if(D=m.memoizedState,D=D!==null?D.dehydrated:null,!D)throw Error(r(317));D[pi]=m}else pm(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;Pi(m),D=!1}else D=ui(),f!==null&&f.memoizedState!==null&&(f.memoizedState.hydrationErrors=D),D=!0;if(!D)return m.flags&256?(fu(m),m):(fu(m),null)}if(fu(m),(m.flags&128)!==0)return m.lanes=w,m;if(w=A!==null,f=f!==null&&f.memoizedState!==null,w){A=m.child,D=null,A.alternate!==null&&A.alternate.memoizedState!==null&&A.alternate.memoizedState.cachePool!==null&&(D=A.alternate.memoizedState.cachePool.pool);var U=null;A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(U=A.memoizedState.cachePool.pool),U!==D&&(A.flags|=2048)}return w!==f&&w&&(m.child.flags|=8192),Td(m,m.updateQueue),Pi(m),null;case 4:return ze(),f===null&&yk(m.stateNode.containerInfo),Pi(m),null;case 10:return xd(m.type),Pi(m),null;case 19:if(ne(Es),D=m.memoizedState,D===null)return Pi(m),null;if(A=(m.flags&128)!==0,U=D.rendering,U===null)if(A)Jh(D,!1);else{if(Yi!==0||f!==null&&(f.flags&128)!==0)for(f=m.child;f!==null;){if(U=Ad(f),U!==null){for(m.flags|=128,Jh(D,!1),f=U.updateQueue,m.updateQueue=f,Td(m,f),m.subtreeFlags=0,f=w,w=m.child;w!==null;)bS(w,f),w=w.sibling;return le(Es,Es.current&1|2),m.child}f=f.sibling}D.tail!==null&&je()>qa&&(m.flags|=128,A=!0,Jh(D,!1),m.lanes=4194304)}else{if(!A)if(f=Ad(U),f!==null){if(m.flags|=128,A=!0,f=f.updateQueue,m.updateQueue=f,Td(m,f),Jh(D,!0),D.tail===null&&D.tailMode==="hidden"&&!U.alternate&&!ni)return Pi(m),null}else 2*je()-D.renderingStartTime>qa&&w!==536870912&&(m.flags|=128,A=!0,Jh(D,!1),m.lanes=4194304);D.isBackwards?(U.sibling=m.child,m.child=U):(f=D.last,f!==null?f.sibling=U:m.child=U,D.last=U)}return D.tail!==null?(m=D.tail,D.rendering=m,D.tail=m.sibling,D.renderingStartTime=je(),m.sibling=null,f=Es.current,le(Es,A?f&1|2:f&1),m):(Pi(m),null);case 22:case 23:return fu(m),D0(),A=m.memoizedState!==null,f!==null?f.memoizedState!==null!==A&&(m.flags|=8192):A&&(m.flags|=8192),A?(w&536870912)!==0&&(m.flags&128)===0&&(Pi(m),m.subtreeFlags&6&&(m.flags|=8192)):Pi(m),w=m.updateQueue,w!==null&&Td(m,w.retryQueue),w=null,f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(w=f.memoizedState.cachePool.pool),A=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(A=m.memoizedState.cachePool.pool),A!==w&&(m.flags|=2048),f!==null&&ne(Yl),null;case 24:return w=null,f!==null&&(w=f.memoizedState.cache),m.memoizedState.cache!==w&&(m.flags|=2048),xd(Fs),Pi(m),null;case 25:return null;case 30:return null}throw Error(r(156,m.tag))}function Rm(f,m){switch(SS(m),m.tag){case 1:return f=m.flags,f&65536?(m.flags=f&-65537|128,m):null;case 3:return xd(Fs),ze(),f=m.flags,(f&65536)!==0&&(f&128)===0?(m.flags=f&-65537|128,m):null;case 26:case 27:case 5:return pt(m),null;case 13:if(fu(m),f=m.memoizedState,f!==null&&f.dehydrated!==null){if(m.alternate===null)throw Error(r(340));pm()}return f=m.flags,f&65536?(m.flags=f&-65537|128,m):null;case 19:return ne(Es),null;case 4:return ze(),null;case 10:return xd(m.type),null;case 22:case 23:return fu(m),D0(),f!==null&&ne(Yl),f=m.flags,f&65536?(m.flags=f&-65537|128,m):null;case 24:return xd(Fs),null;case 25:return null;default:return null}}function Nm(f,m){switch(SS(m),m.tag){case 3:xd(Fs),ze();break;case 26:case 27:case 5:pt(m);break;case 4:ze();break;case 13:fu(m);break;case 19:ne(Es);break;case 10:xd(m.type);break;case 22:case 23:fu(m),D0(),f!==null&&ne(Yl);break;case 24:xd(Fs)}}function Zh(f,m){try{var w=m.updateQueue,A=w!==null?w.lastEffect:null;if(A!==null){var D=A.next;w=D;do{if((w.tag&f)===f){A=void 0;var U=w.create,ie=w.inst;A=U(),ie.destroy=A}w=w.next}while(w!==D)}}catch(fe){Ge(m,m.return,fe)}}function yl(f,m,w){try{var A=m.updateQueue,D=A!==null?A.lastEffect:null;if(D!==null){var U=D.next;A=U;do{if((A.tag&f)===f){var ie=A.inst,fe=ie.destroy;if(fe!==void 0){ie.destroy=void 0,D=m;var Re=w,rt=fe;try{rt()}catch(Dt){Ge(D,Re,Dt)}}}A=A.next}while(A!==U)}}catch(Dt){Ge(m,m.return,Dt)}}function Qh(f){var m=f.updateQueue;if(m!==null){var w=f.stateNode;try{I2(m,w)}catch(A){Ge(f,f.return,A)}}}function Md(f,m,w){w.props=hu(f.type,f.memoizedProps),w.state=f.memoizedState;try{w.componentWillUnmount()}catch(A){Ge(f,m,A)}}function ep(f,m){try{var w=f.ref;if(w!==null){switch(f.tag){case 26:case 27:case 5:var A=f.stateNode;break;case 30:A=f.stateNode;break;default:A=f.stateNode}typeof w=="function"?f.refCleanup=w(A):w.current=A}}catch(D){Ge(f,m,D)}}function mu(f,m){var w=f.ref,A=f.refCleanup;if(w!==null)if(typeof A=="function")try{A()}catch(D){Ge(f,m,D)}finally{f.refCleanup=null,f=f.alternate,f!=null&&(f.refCleanup=null)}else if(typeof w=="function")try{w(null)}catch(D){Ge(f,m,D)}else w.current=null}function Im(f){var m=f.type,w=f.memoizedProps,A=f.stateNode;try{e:switch(m){case"button":case"input":case"select":case"textarea":w.autoFocus&&A.focus();break e;case"img":w.src?A.src=w.src:w.srcSet&&(A.srcset=w.srcSet)}}catch(D){Ge(f,f.return,D)}}function z0(f,m,w){try{var A=f.stateNode;Coe(A,f.type,w,m),A[Si]=m}catch(D){Ge(f,f.return,D)}}function H0(f){return f.tag===5||f.tag===3||f.tag===26||f.tag===27&&Fm(f.type)||f.tag===4}function Lf(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||H0(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.tag===27&&Fm(f.type)||f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function Ff(f,m,w){var A=f.tag;if(A===5||A===6)f=f.stateNode,m?(w.nodeType===9?w.body:w.nodeName==="HTML"?w.ownerDocument.body:w).insertBefore(f,m):(m=w.nodeType===9?w.body:w.nodeName==="HTML"?w.ownerDocument.body:w,m.appendChild(f),w=w._reactRootContainer,w!=null||m.onclick!==null||(m.onclick=SA));else if(A!==4&&(A===27&&Fm(f.type)&&(w=f.stateNode,m=null),f=f.child,f!==null))for(Ff(f,m,w),f=f.sibling;f!==null;)Ff(f,m,w),f=f.sibling}function Pf(f,m,w){var A=f.tag;if(A===5||A===6)f=f.stateNode,m?w.insertBefore(f,m):w.appendChild(f);else if(A!==4&&(A===27&&Fm(f.type)&&(w=f.stateNode),f=f.child,f!==null))for(Pf(f,m,w),f=f.sibling;f!==null;)Pf(f,m,w),f=f.sibling}function Uf(f){var m=f.stateNode,w=f.memoizedProps;try{for(var A=f.type,D=m.attributes;D.length;)m.removeAttributeNode(D[0]);Co(m,A,w),m[pi]=f,m[Si]=w}catch(U){Ge(f,f.return,U)}}var gu=!1,Ui=!1,Dm=!1,vl=typeof WeakSet=="function"?WeakSet:Set,Ii=null;function ia(f,m){if(f=f.containerInfo,xk=MA,f=fS(f),g0(f)){if("selectionStart"in f)var w={start:f.selectionStart,end:f.selectionEnd};else e:{w=(w=f.ownerDocument)&&w.defaultView||window;var A=w.getSelection&&w.getSelection();if(A&&A.rangeCount!==0){w=A.anchorNode;var D=A.anchorOffset,U=A.focusNode;A=A.focusOffset;try{w.nodeType,U.nodeType}catch{w=null;break e}var ie=0,fe=-1,Re=-1,rt=0,Dt=0,Pt=f,ft=null;t:for(;;){for(var gt;Pt!==w||D!==0&&Pt.nodeType!==3||(fe=ie+D),Pt!==U||A!==0&&Pt.nodeType!==3||(Re=ie+A),Pt.nodeType===3&&(ie+=Pt.nodeValue.length),(gt=Pt.firstChild)!==null;)ft=Pt,Pt=gt;for(;;){if(Pt===f)break t;if(ft===w&&++rt===D&&(fe=ie),ft===U&&++Dt===A&&(Re=ie),(gt=Pt.nextSibling)!==null)break;Pt=ft,ft=Pt.parentNode}Pt=gt}w=fe===-1||Re===-1?null:{start:fe,end:Re}}else w=null}w=w||{start:0,end:0}}else w=null;for(Sk={focusedElem:f,selectionRange:w},MA=!1,Ii=m;Ii!==null;)if(m=Ii,f=m.child,(m.subtreeFlags&1024)!==0&&f!==null)f.return=m,Ii=f;else for(;Ii!==null;){switch(m=Ii,U=m.alternate,f=m.flags,m.tag){case 0:break;case 11:case 15:break;case 1:if((f&1024)!==0&&U!==null){f=void 0,w=m,D=U.memoizedProps,U=U.memoizedState,A=w.stateNode;try{var sr=hu(w.type,D,w.elementType===w.type);f=A.getSnapshotBeforeUpdate(sr,U),A.__reactInternalSnapshotBeforeUpdate=f}catch(qn){Ge(w,w.return,qn)}}break;case 3:if((f&1024)!==0){if(f=m.stateNode.containerInfo,w=f.nodeType,w===9)_k(f);else if(w===1)switch(f.nodeName){case"HEAD":case"HTML":case"BODY":_k(f);break;default:f.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((f&1024)!==0)throw Error(r(163))}if(f=m.sibling,f!==null){f.return=m.return,Ii=f;break}Ii=m.return}}function Rd(f,m,w){var A=w.flags;switch(w.tag){case 0:case 11:case 15:So(f,w),A&4&&Zh(5,w);break;case 1:if(So(f,w),A&4)if(f=w.stateNode,m===null)try{f.componentDidMount()}catch(ie){Ge(w,w.return,ie)}else{var D=hu(w.type,m.memoizedProps);m=m.memoizedState;try{f.componentDidUpdate(D,m,f.__reactInternalSnapshotBeforeUpdate)}catch(ie){Ge(w,w.return,ie)}}A&64&&Qh(w),A&512&&ep(w,w.return);break;case 3:if(So(f,w),A&64&&(f=w.updateQueue,f!==null)){if(m=null,w.child!==null)switch(w.child.tag){case 27:case 5:m=w.child.stateNode;break;case 1:m=w.child.stateNode}try{I2(f,m)}catch(ie){Ge(w,w.return,ie)}}break;case 27:m===null&&A&4&&Uf(w);case 26:case 5:So(f,w),m===null&&A&4&&Im(w),A&512&&ep(w,w.return);break;case 12:So(f,w);break;case 13:So(f,w),A&4&&zf(f,w),A&64&&(f=w.memoizedState,f!==null&&(f=f.dehydrated,f!==null&&(w=Ji.bind(null,w),Noe(f,w))));break;case 22:if(A=w.memoizedState!==null||gu,!A){m=m!==null&&m.memoizedState!==null||Ui,D=gu;var U=Ui;gu=A,(Ui=m)&&!U?yu(f,w,(w.subtreeFlags&8772)!==0):So(f,w),gu=D,Ui=U}break;case 30:break;default:So(f,w)}}function wr(f){var m=f.alternate;m!==null&&(f.alternate=null,wr(m)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(m=f.stateNode,m!==null&&ci(m)),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}var Vn=null,Jr=!1;function nc(f,m,w){for(w=w.child;w!==null;)tp(f,m,w),w=w.sibling}function tp(f,m,w){if(at&&typeof at.onCommitFiberUnmount=="function")try{at.onCommitFiberUnmount(Xe,w)}catch{}switch(w.tag){case 26:Ui||mu(w,m),nc(f,m,w),w.memoizedState?w.memoizedState.count--:w.stateNode&&(w=w.stateNode,w.parentNode.removeChild(w));break;case 27:Ui||mu(w,m);var A=Vn,D=Jr;Fm(w.type)&&(Vn=w.stateNode,Jr=!1),nc(f,m,w),ew(w.stateNode),Vn=A,Jr=D;break;case 5:Ui||mu(w,m);case 6:if(A=Vn,D=Jr,Vn=null,nc(f,m,w),Vn=A,Jr=D,Vn!==null)if(Jr)try{(Vn.nodeType===9?Vn.body:Vn.nodeName==="HTML"?Vn.ownerDocument.body:Vn).removeChild(w.stateNode)}catch(U){Ge(w,m,U)}else try{Vn.removeChild(w.stateNode)}catch(U){Ge(w,m,U)}break;case 18:Vn!==null&&(Jr?(f=Vn,F6(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,w.stateNode),lw(f)):F6(Vn,w.stateNode));break;case 4:A=Vn,D=Jr,Vn=w.stateNode.containerInfo,Jr=!0,nc(f,m,w),Vn=A,Jr=D;break;case 0:case 11:case 14:case 15:Ui||yl(2,w,m),Ui||yl(4,w,m),nc(f,m,w);break;case 1:Ui||(mu(w,m),A=w.stateNode,typeof A.componentWillUnmount=="function"&&Md(w,m,A)),nc(f,m,w);break;case 21:nc(f,m,w);break;case 22:Ui=(A=Ui)||w.memoizedState!==null,nc(f,m,w),Ui=A;break;default:nc(f,m,w)}}function zf(f,m){if(m.memoizedState===null&&(f=m.alternate,f!==null&&(f=f.memoizedState,f!==null&&(f=f.dehydrated,f!==null))))try{lw(f)}catch(w){Ge(m,m.return,w)}}function _b(f){switch(f.tag){case 13:case 19:var m=f.stateNode;return m===null&&(m=f.stateNode=new vl),m;case 22:return f=f.stateNode,m=f._retryCache,m===null&&(m=f._retryCache=new vl),m;default:throw Error(r(435,f.tag))}}function np(f,m){var w=_b(f);m.forEach(function(A){var D=er.bind(null,f,A);w.has(A)||(w.add(A),A.then(D,D))})}function ga(f,m){var w=m.deletions;if(w!==null)for(var A=0;A<w.length;A++){var D=w[A],U=f,ie=m,fe=ie;e:for(;fe!==null;){switch(fe.tag){case 27:if(Fm(fe.type)){Vn=fe.stateNode,Jr=!1;break e}break;case 5:Vn=fe.stateNode,Jr=!1;break e;case 3:case 4:Vn=fe.stateNode.containerInfo,Jr=!0;break e}fe=fe.return}if(Vn===null)throw Error(r(160));tp(U,ie,D),Vn=null,Jr=!1,U=D.alternate,U!==null&&(U.return=null),D.return=null}if(m.subtreeFlags&13878)for(m=m.child;m!==null;)Eb(m,f),m=m.sibling}var Hc=null;function Eb(f,m){var w=f.alternate,A=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:ga(m,f),ms(f),A&4&&(yl(3,f,f.return),Zh(3,f),yl(5,f,f.return));break;case 1:ga(m,f),ms(f),A&512&&(Ui||w===null||mu(w,w.return)),A&64&&gu&&(f=f.updateQueue,f!==null&&(A=f.callbacks,A!==null&&(w=f.shared.hiddenCallbacks,f.shared.hiddenCallbacks=w===null?A:w.concat(A))));break;case 26:var D=Hc;if(ga(m,f),ms(f),A&512&&(Ui||w===null||mu(w,w.return)),A&4){var U=w!==null?w.memoizedState:null;if(A=f.memoizedState,w===null)if(A===null)if(f.stateNode===null){e:{A=f.type,w=f.memoizedProps,D=D.ownerDocument||D;t:switch(A){case"title":U=D.getElementsByTagName("title")[0],(!U||U[$s]||U[pi]||U.namespaceURI==="http://www.w3.org/2000/svg"||U.hasAttribute("itemprop"))&&(U=D.createElement(A),D.head.insertBefore(U,D.querySelector("head > title"))),Co(U,A,w),U[pi]=f,ct(U),A=U;break e;case"link":var ie=j6("link","href",D).get(A+(w.href||""));if(ie){for(var fe=0;fe<ie.length;fe++)if(U=ie[fe],U.getAttribute("href")===(w.href==null||w.href===""?null:w.href)&&U.getAttribute("rel")===(w.rel==null?null:w.rel)&&U.getAttribute("title")===(w.title==null?null:w.title)&&U.getAttribute("crossorigin")===(w.crossOrigin==null?null:w.crossOrigin)){ie.splice(fe,1);break t}}U=D.createElement(A),Co(U,A,w),D.head.appendChild(U);break;case"meta":if(ie=j6("meta","content",D).get(A+(w.content||""))){for(fe=0;fe<ie.length;fe++)if(U=ie[fe],U.getAttribute("content")===(w.content==null?null:""+w.content)&&U.getAttribute("name")===(w.name==null?null:w.name)&&U.getAttribute("property")===(w.property==null?null:w.property)&&U.getAttribute("http-equiv")===(w.httpEquiv==null?null:w.httpEquiv)&&U.getAttribute("charset")===(w.charSet==null?null:w.charSet)){ie.splice(fe,1);break t}}U=D.createElement(A),Co(U,A,w),D.head.appendChild(U);break;default:throw Error(r(468,A))}U[pi]=f,ct(U),A=U}f.stateNode=A}else q6(D,f.type,f.stateNode);else f.stateNode=W6(D,A,f.memoizedProps);else U!==A?(U===null?w.stateNode!==null&&(w=w.stateNode,w.parentNode.removeChild(w)):U.count--,A===null?q6(D,f.type,f.stateNode):W6(D,A,f.memoizedProps)):A===null&&f.stateNode!==null&&z0(f,f.memoizedProps,w.memoizedProps)}break;case 27:ga(m,f),ms(f),A&512&&(Ui||w===null||mu(w,w.return)),w!==null&&A&4&&z0(f,f.memoizedProps,w.memoizedProps);break;case 5:if(ga(m,f),ms(f),A&512&&(Ui||w===null||mu(w,w.return)),f.flags&32){D=f.stateNode;try{hs(D,"")}catch(gt){Ge(f,f.return,gt)}}A&4&&f.stateNode!=null&&(D=f.memoizedProps,z0(f,D,w!==null?w.memoizedProps:D)),A&1024&&(Dm=!0);break;case 6:if(ga(m,f),ms(f),A&4){if(f.stateNode===null)throw Error(r(162));A=f.memoizedProps,w=f.stateNode;try{w.nodeValue=A}catch(gt){Ge(f,f.return,gt)}}break;case 3:if(EA=null,D=Hc,Hc=CA(m.containerInfo),ga(m,f),Hc=D,ms(f),A&4&&w!==null&&w.memoizedState.isDehydrated)try{lw(m.containerInfo)}catch(gt){Ge(f,f.return,gt)}Dm&&(Dm=!1,Hf(f));break;case 4:A=Hc,Hc=CA(f.stateNode.containerInfo),ga(m,f),ms(f),Hc=A;break;case 12:ga(m,f),ms(f);break;case 13:ga(m,f),ms(f),f.child.flags&8192&&f.memoizedState!==null!=(w!==null&&w.memoizedState!==null)&&(_i=je()),A&4&&(A=f.updateQueue,A!==null&&(f.updateQueue=null,np(f,A)));break;case 22:D=f.memoizedState!==null;var Re=w!==null&&w.memoizedState!==null,rt=gu,Dt=Ui;if(gu=rt||D,Ui=Dt||Re,ga(m,f),Ui=Dt,gu=rt,ms(f),A&8192)e:for(m=f.stateNode,m._visibility=D?m._visibility&-2:m._visibility|1,D&&(w===null||Re||gu||Ui||bl(f)),w=null,m=f;;){if(m.tag===5||m.tag===26){if(w===null){Re=w=m;try{if(U=Re.stateNode,D)ie=U.style,typeof ie.setProperty=="function"?ie.setProperty("display","none","important"):ie.display="none";else{fe=Re.stateNode;var Pt=Re.memoizedProps.style,ft=Pt!=null&&Pt.hasOwnProperty("display")?Pt.display:null;fe.style.display=ft==null||typeof ft=="boolean"?"":(""+ft).trim()}}catch(gt){Ge(Re,Re.return,gt)}}}else if(m.tag===6){if(w===null){Re=m;try{Re.stateNode.nodeValue=D?"":Re.memoizedProps}catch(gt){Ge(Re,Re.return,gt)}}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===f)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===f)break e;for(;m.sibling===null;){if(m.return===null||m.return===f)break e;w===m&&(w=null),m=m.return}w===m&&(w=null),m.sibling.return=m.return,m=m.sibling}A&4&&(A=f.updateQueue,A!==null&&(w=A.retryQueue,w!==null&&(A.retryQueue=null,np(f,w))));break;case 19:ga(m,f),ms(f),A&4&&(A=f.updateQueue,A!==null&&(f.updateQueue=null,np(f,A)));break;case 30:break;case 21:break;default:ga(m,f),ms(f)}}function ms(f){var m=f.flags;if(m&2){try{for(var w,A=f.return;A!==null;){if(H0(A)){w=A;break}A=A.return}if(w==null)throw Error(r(160));switch(w.tag){case 27:var D=w.stateNode,U=Lf(f);Pf(f,U,D);break;case 5:var ie=w.stateNode;w.flags&32&&(hs(ie,""),w.flags&=-33);var fe=Lf(f);Pf(f,fe,ie);break;case 3:case 4:var Re=w.stateNode.containerInfo,rt=Lf(f);Ff(f,rt,Re);break;default:throw Error(r(161))}}catch(Dt){Ge(f,f.return,Dt)}f.flags&=-3}m&4096&&(f.flags&=-4097)}function Hf(f){if(f.subtreeFlags&1024)for(f=f.child;f!==null;){var m=f;Hf(m),m.tag===5&&m.flags&1024&&m.stateNode.reset(),f=f.sibling}}function So(f,m){if(m.subtreeFlags&8772)for(m=m.child;m!==null;)Rd(f,m.alternate,m),m=m.sibling}function bl(f){for(f=f.child;f!==null;){var m=f;switch(m.tag){case 0:case 11:case 14:case 15:yl(4,m,m.return),bl(m);break;case 1:mu(m,m.return);var w=m.stateNode;typeof w.componentWillUnmount=="function"&&Md(m,m.return,w),bl(m);break;case 27:ew(m.stateNode);case 26:case 5:mu(m,m.return),bl(m);break;case 22:m.memoizedState===null&&bl(m);break;case 30:bl(m);break;default:bl(m)}f=f.sibling}}function yu(f,m,w){for(w=w&&(m.subtreeFlags&8772)!==0,m=m.child;m!==null;){var A=m.alternate,D=f,U=m,ie=U.flags;switch(U.tag){case 0:case 11:case 15:yu(D,U,w),Zh(4,U);break;case 1:if(yu(D,U,w),A=U,D=A.stateNode,typeof D.componentDidMount=="function")try{D.componentDidMount()}catch(rt){Ge(A,A.return,rt)}if(A=U,D=A.updateQueue,D!==null){var fe=A.stateNode;try{var Re=D.shared.hiddenCallbacks;if(Re!==null)for(D.shared.hiddenCallbacks=null,D=0;D<Re.length;D++)Sm(Re[D],fe)}catch(rt){Ge(A,A.return,rt)}}w&&ie&64&&Qh(U),ep(U,U.return);break;case 27:Uf(U);case 26:case 5:yu(D,U,w),w&&A===null&&ie&4&&Im(U),ep(U,U.return);break;case 12:yu(D,U,w);break;case 13:yu(D,U,w),w&&ie&4&&zf(D,U);break;case 22:U.memoizedState===null&&yu(D,U,w),ep(U,U.return);break;case 30:break;default:yu(D,U,w)}m=m.sibling}}function Ab(f,m){var w=null;f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(w=f.memoizedState.cachePool.pool),f=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(f=m.memoizedState.cachePool.pool),f!==w&&(f!=null&&f.refCount++,w!=null&&mm(w))}function Tb(f,m){f=null,m.alternate!==null&&(f=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==f&&(m.refCount++,f!=null&&mm(f))}function Di(f,m,w,A){if(m.subtreeFlags&10256)for(m=m.child;m!==null;)Mb(f,m,w,A),m=m.sibling}function Mb(f,m,w,A){var D=m.flags;switch(m.tag){case 0:case 11:case 15:Di(f,m,w,A),D&2048&&Zh(9,m);break;case 1:Di(f,m,w,A);break;case 3:Di(f,m,w,A),D&2048&&(f=null,m.alternate!==null&&(f=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==f&&(m.refCount++,f!=null&&mm(f)));break;case 12:if(D&2048){Di(f,m,w,A),f=m.stateNode;try{var U=m.memoizedProps,ie=U.id,fe=U.onPostCommit;typeof fe=="function"&&fe(ie,m.alternate===null?"mount":"update",f.passiveEffectDuration,-0)}catch(Re){Ge(m,m.return,Re)}}else Di(f,m,w,A);break;case 13:Di(f,m,w,A);break;case 23:break;case 22:U=m.stateNode,ie=m.alternate,m.memoizedState!==null?U._visibility&2?Di(f,m,w,A):Vc(f,m):U._visibility&2?Di(f,m,w,A):(U._visibility|=2,Nd(f,m,w,A,(m.subtreeFlags&10256)!==0)),D&2048&&Ab(ie,m);break;case 24:Di(f,m,w,A),D&2048&&Tb(m.alternate,m);break;default:Di(f,m,w,A)}}function Nd(f,m,w,A,D){for(D=D&&(m.subtreeFlags&10256)!==0,m=m.child;m!==null;){var U=f,ie=m,fe=w,Re=A,rt=ie.flags;switch(ie.tag){case 0:case 11:case 15:Nd(U,ie,fe,Re,D),Zh(8,ie);break;case 23:break;case 22:var Dt=ie.stateNode;ie.memoizedState!==null?Dt._visibility&2?Nd(U,ie,fe,Re,D):Vc(U,ie):(Dt._visibility|=2,Nd(U,ie,fe,Re,D)),D&&rt&2048&&Ab(ie.alternate,ie);break;case 24:Nd(U,ie,fe,Re,D),D&&rt&2048&&Tb(ie.alternate,ie);break;default:Nd(U,ie,fe,Re,D)}m=m.sibling}}function Vc(f,m){if(m.subtreeFlags&10256)for(m=m.child;m!==null;){var w=f,A=m,D=A.flags;switch(A.tag){case 22:Vc(w,A),D&2048&&Ab(A.alternate,A);break;case 24:Vc(w,A),D&2048&&Tb(A.alternate,A);break;default:Vc(w,A)}m=m.sibling}}var xl=8192;function km(f){if(f.subtreeFlags&xl)for(f=f.child;f!==null;)yA(f),f=f.sibling}function yA(f){switch(f.tag){case 26:km(f),f.flags&xl&&f.memoizedState!==null&&Voe(Hc,f.memoizedState,f.memoizedProps);break;case 5:km(f);break;case 3:case 4:var m=Hc;Hc=CA(f.stateNode.containerInfo),km(f),Hc=m;break;case 22:f.memoizedState===null&&(m=f.alternate,m!==null&&m.memoizedState!==null?(m=xl,xl=16777216,km(f),xl=m):km(f));break;default:km(f)}}function vA(f){var m=f.alternate;if(m!==null&&(f=m.child,f!==null)){m.child=null;do m=f.sibling,f.sibling=null,f=m;while(f!==null)}}function zi(f){var m=f.deletions;if((f.flags&16)!==0){if(m!==null)for(var w=0;w<m.length;w++){var A=m[w];Ii=A,bu(A,f)}vA(f)}if(f.subtreeFlags&10256)for(f=f.child;f!==null;)KS(f),f=f.sibling}function KS(f){switch(f.tag){case 0:case 11:case 15:zi(f),f.flags&2048&&yl(9,f,f.return);break;case 3:zi(f);break;case 12:zi(f);break;case 22:var m=f.stateNode;f.memoizedState!==null&&m._visibility&2&&(f.return===null||f.return.tag!==13)?(m._visibility&=-3,vu(f)):zi(f);break;default:zi(f)}}function vu(f){var m=f.deletions;if((f.flags&16)!==0){if(m!==null)for(var w=0;w<m.length;w++){var A=m[w];Ii=A,bu(A,f)}vA(f)}for(f=f.child;f!==null;){switch(m=f,m.tag){case 0:case 11:case 15:yl(8,m,m.return),vu(m);break;case 22:w=m.stateNode,w._visibility&2&&(w._visibility&=-3,vu(m));break;default:vu(m)}f=f.sibling}}function bu(f,m){for(;Ii!==null;){var w=Ii;switch(w.tag){case 0:case 11:case 15:yl(8,w,m);break;case 23:case 22:if(w.memoizedState!==null&&w.memoizedState.cachePool!==null){var A=w.memoizedState.cachePool.pool;A!=null&&A.refCount++}break;case 24:mm(w.memoizedState.cache)}if(A=w.child,A!==null)A.return=w,Ii=A;else e:for(w=f;Ii!==null;){A=Ii;var D=A.sibling,U=A.return;if(wr(A),A===w){Ii=null;break e}if(D!==null){D.return=U,Ii=D;break e}Ii=U}}}var gs={getCacheForType:function(f){var m=ps(Fs),w=m.data.get(f);return w===void 0&&(w=f(),m.data.set(f,w)),w}},YS=typeof WeakMap=="function"?WeakMap:Map,di=0,ur=null,Nr=null,Fn=0,br=0,cs=null,Sl=!1,Om=!1,Bm=!1,rc=0,Yi=0,Gc=0,xu=0,rp=0,ic=0,Zr=0,fi=null,Gn=null,$r=!1,_i=0,qa=1/0,sc=null,wl=null,sa=0,Xa=null,ki=null,Cl=0,Id=0,V0=null,_l=null,Su=0,ip=null;function ys(){if((di&2)!==0&&Fn!==0)return Fn&-Fn;if(z.T!==null){var f=pr;return f!==0?f:hk()}return lr()}function Rb(){ic===0&&(ic=(Fn&536870912)===0||ni?Te():536870912);var f=Ni.current;return f!==null&&(f.flags|=32),ic}function wo(f,m,w){(f===ur&&(br===2||br===9)||f.cancelPendingCommit!==null)&&(Gf(f,0),Wc(f,Fn,ic,!1)),en(f,w),((di&2)===0||f!==ur)&&(f===ur&&((di&2)===0&&(xu|=w),Yi===4&&Wc(f,Fn,ic,!1)),qf(f))}function $m(f,m,w){if((di&6)!==0)throw Error(r(327));var A=!w&&(m&124)===0&&(m&f.expiredLanes)===0||zt(f,m),D=A?B(f,m):S(f,m,!0),U=A;do{if(D===0){Om&&!A&&Wc(f,m,0,!1);break}else{if(w=f.current.alternate,U&&!Vf(w)){D=S(f,m,!1),U=!1;continue}if(D===2){if(U=m,f.errorRecoveryDisabledLanes&U)var ie=0;else ie=f.pendingLanes&-536870913,ie=ie!==0?ie:ie&536870912?536870912:0;if(ie!==0){m=ie;e:{var fe=f;D=fi;var Re=fe.current.memoizedState.isDehydrated;if(Re&&(Gf(fe,ie).flags|=256),ie=S(fe,ie,!1),ie!==2){if(Bm&&!Re){fe.errorRecoveryDisabledLanes|=U,xu|=U,D=4;break e}U=Gn,Gn=D,U!==null&&(Gn===null?Gn=U:Gn.push.apply(Gn,U))}D=ie}if(U=!1,D!==2)continue}}if(D===1){Gf(f,0),Wc(f,m,0,!0);break}e:{switch(A=f,U=D,U){case 0:case 1:throw Error(r(345));case 4:if((m&4194048)!==m)break;case 6:Wc(A,m,ic,!Sl);break e;case 2:Gn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((m&62914560)===m&&(D=_i+300-je(),10<D)){if(Wc(A,m,ic,!Sl),tn(A,0,!0)!==0)break e;A.timeoutHandle=$6(G0.bind(null,A,w,Gn,sc,$r,m,ic,xu,Zr,Sl,U,2,-0,0),D);break e}G0(A,w,Gn,sc,$r,m,ic,xu,Zr,Sl,U,0,-0,0)}}break}while(!0);qf(f)}function G0(f,m,w,A,D,U,ie,fe,Re,rt,Dt,Pt,ft,gt){if(f.timeoutHandle=-1,Pt=m.subtreeFlags,(Pt&8192||(Pt&16785408)===16785408)&&(rw={stylesheets:null,count:0,unsuspend:Hoe},yA(m),Pt=Goe(),Pt!==null)){f.cancelPendingCommit=Pt(Jt.bind(null,f,m,U,w,A,D,ie,fe,Re,Dt,1,ft,gt)),Wc(f,U,ie,!rt);return}Jt(f,m,U,w,A,D,ie,fe,Re)}function Vf(f){for(var m=f;;){var w=m.tag;if((w===0||w===11||w===15)&&m.flags&16384&&(w=m.updateQueue,w!==null&&(w=w.stores,w!==null)))for(var A=0;A<w.length;A++){var D=w[A],U=D.getSnapshot;D=D.value;try{if(!Fo(U(),D))return!1}catch{return!1}}if(w=m.child,m.subtreeFlags&16384&&w!==null)w.return=m,m=w;else{if(m===f)break;for(;m.sibling===null;){if(m.return===null||m.return===f)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function Wc(f,m,w,A){m&=~rp,m&=~xu,f.suspendedLanes|=m,f.pingedLanes&=~m,A&&(f.warmLanes|=m),A=f.expirationTimes;for(var D=m;0<D;){var U=31-Ft(D),ie=1<<U;A[U]=-1,D&=~ie}w!==0&&kt(f,w,m)}function wu(){return(di&6)===0?(JS(0),!1):!0}function sp(){if(Nr!==null){if(br===0)var f=Nr.return;else f=Nr,bd=Tf=null,DS(f),Vh=null,$0=0,f=Nr;for(;f!==null;)Nm(f.alternate,f),f=f.return;Nr=null}}function Gf(f,m){var w=f.timeoutHandle;w!==-1&&(f.timeoutHandle=-1,Eoe(w)),w=f.cancelPendingCommit,w!==null&&(f.cancelPendingCommit=null,w()),sp(),ur=f,Nr=w=Cs(f.current,null),Fn=m,br=0,cs=null,Sl=!1,Om=zt(f,m),Bm=!1,Zr=ic=rp=xu=Gc=Yi=0,Gn=fi=null,$r=!1,(m&8)!==0&&(m|=m&32);var A=f.entangledLanes;if(A!==0)for(f=f.entanglements,A&=m;0<A;){var D=31-Ft(A),U=1<<D;m|=f[D],A&=~U}return rc=m,b0(),w}function Nb(f,m){mr=null,z.H=B0,m===R0||m===$c?(m=TS(),br=3):m===AS?(m=TS(),br=4):br=m===gA?8:m!==null&&typeof m=="object"&&typeof m.then=="function"?6:1,cs=m,Nr===null&&(Yi=1,Sb(f,Na(m,f.current)))}function Lm(){var f=z.H;return z.H=B0,f===null?B0:f}function Ib(){var f=z.A;return z.A=gs,f}function y(){Yi=4,Sl||(Fn&4194048)!==Fn&&Ni.current!==null||(Om=!0),(Gc&134217727)===0&&(xu&134217727)===0||ur===null||Wc(ur,Fn,ic,!1)}function S(f,m,w){var A=di;di|=2;var D=Lm(),U=Ib();(ur!==f||Fn!==m)&&(sc=null,Gf(f,m)),m=!1;var ie=Yi;e:do try{if(br!==0&&Nr!==null){var fe=Nr,Re=cs;switch(br){case 8:sp(),ie=6;break e;case 3:case 2:case 9:case 6:Ni.current===null&&(m=!0);var rt=br;if(br=0,cs=null,De(f,fe,Re,rt),w&&Om){ie=0;break e}break;default:rt=br,br=0,cs=null,De(f,fe,Re,rt)}}T(),ie=Yi;break}catch(Dt){Nb(f,Dt)}while(!0);return m&&f.shellSuspendCounter++,bd=Tf=null,di=A,z.H=D,z.A=U,Nr===null&&(ur=null,Fn=0,b0()),ie}function T(){for(;Nr!==null;)K(Nr)}function B(f,m){var w=di;di|=2;var A=Lm(),D=Ib();ur!==f||Fn!==m?(sc=null,qa=je()+500,Gf(f,m)):Om=zt(f,m);e:do try{if(br!==0&&Nr!==null){m=Nr;var U=cs;t:switch(br){case 1:br=0,cs=null,De(f,m,U,1);break;case 2:case 9:if(ab(U)){br=0,cs=null,ge(m);break}m=function(){br!==2&&br!==9||ur!==f||(br=7),qf(f)},U.then(m,m);break e;case 3:br=7;break e;case 4:br=5;break e;case 7:ab(U)?(br=0,cs=null,ge(m)):(br=0,cs=null,De(f,m,U,7));break;case 5:var ie=null;switch(Nr.tag){case 26:ie=Nr.memoizedState;case 5:case 27:var fe=Nr;if(!ie||X6(ie)){br=0,cs=null;var Re=fe.sibling;if(Re!==null)Nr=Re;else{var rt=fe.return;rt!==null?(Nr=rt,Qe(rt)):Nr=null}break t}}br=0,cs=null,De(f,m,U,5);break;case 6:br=0,cs=null,De(f,m,U,6);break;case 8:sp(),Yi=6;break e;default:throw Error(r(462))}}H();break}catch(Dt){Nb(f,Dt)}while(!0);return bd=Tf=null,z.H=A,z.A=D,di=w,Nr!==null?0:(ur=null,Fn=0,b0(),Yi)}function H(){for(;Nr!==null&&!Ue();)K(Nr)}function K(f){var m=Yh(f.alternate,f,rc);f.memoizedProps=f.pendingProps,m===null?Qe(f):Nr=m}function ge(f){var m=f,w=m.alternate;switch(m.tag){case 15:case 0:m=ml(w,m,m.pendingProps,m.type,void 0,Fn);break;case 11:m=ml(w,m,m.pendingProps,m.type.render,m.ref,Fn);break;case 5:DS(m);default:Nm(w,m),m=Nr=bS(m,rc),m=Yh(w,m,rc)}f.memoizedProps=f.pendingProps,m===null?Qe(f):Nr=m}function De(f,m,w,A){bd=Tf=null,DS(m),Vh=null,$0=0;var D=m.return;try{if(dk(f,D,m,w,Fn)){Yi=1,Sb(f,Na(w,f.current)),Nr=null;return}}catch(U){if(D!==null)throw Nr=D,U;Yi=1,Sb(f,Na(w,f.current)),Nr=null;return}m.flags&32768?(ni||A===1?f=!0:Om||(Fn&536870912)!==0?f=!1:(Sl=f=!0,(A===2||A===9||A===3||A===6)&&(A=Ni.current,A!==null&&A.tag===13&&(A.flags|=16384))),It(m,f)):Qe(m)}function Qe(f){var m=f;do{if((m.flags&32768)!==0){It(m,Sl);return}f=m.return;var w=XS(m.alternate,m,rc);if(w!==null){Nr=w;return}if(m=m.sibling,m!==null){Nr=m;return}Nr=m=f}while(m!==null);Yi===0&&(Yi=5)}function It(f,m){do{var w=Rm(f.alternate,f);if(w!==null){w.flags&=32767,Nr=w;return}if(w=f.return,w!==null&&(w.flags|=32768,w.subtreeFlags=0,w.deletions=null),!m&&(f=f.sibling,f!==null)){Nr=f;return}Nr=f=w}while(f!==null);Yi=6,Nr=null}function Jt(f,m,w,A,D,U,ie,fe,Re){f.cancelPendingCommit=null;do Wf();while(sa!==0);if((di&6)!==0)throw Error(r(327));if(m!==null){if(m===f.current)throw Error(r(177));if(U=m.lanes|m.childLanes,U|=Jv,Vt(f,w,U,ie,fe,Re),f===ur&&(Nr=ur=null,Fn=0),ki=m,Xa=f,Cl=w,Id=U,V0=D,_l=A,(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?(f.callbackNode=null,f.callbackPriority=0,ri(Ut,function(){return jf(),null})):(f.callbackNode=null,f.callbackPriority=0),A=(m.flags&13878)!==0,(m.subtreeFlags&13878)!==0||A){A=z.T,z.T=null,D=J.p,J.p=2,ie=di,di|=4;try{ia(f,m,w)}finally{di=ie,J.p=D,z.T=A}}sa=1,dn(),gn(),dr()}}function dn(){if(sa===1){sa=0;var f=Xa,m=ki,w=(m.flags&13878)!==0;if((m.subtreeFlags&13878)!==0||w){w=z.T,z.T=null;var A=J.p;J.p=2;var D=di;di|=4;try{Eb(m,f);var U=Sk,ie=fS(f.containerInfo),fe=U.focusedElem,Re=U.selectionRange;if(ie!==fe&&fe&&fe.ownerDocument&&dS(fe.ownerDocument.documentElement,fe)){if(Re!==null&&g0(fe)){var rt=Re.start,Dt=Re.end;if(Dt===void 0&&(Dt=rt),"selectionStart"in fe)fe.selectionStart=rt,fe.selectionEnd=Math.min(Dt,fe.value.length);else{var Pt=fe.ownerDocument||document,ft=Pt&&Pt.defaultView||window;if(ft.getSelection){var gt=ft.getSelection(),sr=fe.textContent.length,qn=Math.min(Re.start,sr),Vi=Re.end===void 0?qn:Math.min(Re.end,sr);!gt.extend&&qn>Vi&&(ie=Vi,Vi=qn,qn=ie);var Je=uS(fe,qn),We=uS(fe,Vi);if(Je&&We&&(gt.rangeCount!==1||gt.anchorNode!==Je.node||gt.anchorOffset!==Je.offset||gt.focusNode!==We.node||gt.focusOffset!==We.offset)){var tt=Pt.createRange();tt.setStart(Je.node,Je.offset),gt.removeAllRanges(),qn>Vi?(gt.addRange(tt),gt.extend(We.node,We.offset)):(tt.setEnd(We.node,We.offset),gt.addRange(tt))}}}}for(Pt=[],gt=fe;gt=gt.parentNode;)gt.nodeType===1&&Pt.push({element:gt,left:gt.scrollLeft,top:gt.scrollTop});for(typeof fe.focus=="function"&&fe.focus(),fe=0;fe<Pt.length;fe++){var Ot=Pt[fe];Ot.element.scrollLeft=Ot.left,Ot.element.scrollTop=Ot.top}}MA=!!xk,Sk=xk=null}finally{di=D,J.p=A,z.T=w}}f.current=m,sa=2}}function gn(){if(sa===2){sa=0;var f=Xa,m=ki,w=(m.flags&8772)!==0;if((m.subtreeFlags&8772)!==0||w){w=z.T,z.T=null;var A=J.p;J.p=2;var D=di;di|=4;try{Rd(f,m.alternate,m)}finally{di=D,J.p=A,z.T=w}}sa=3}}function dr(){if(sa===4||sa===3){sa=0,Ze();var f=Xa,m=ki,w=Cl,A=_l;(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?sa=5:(sa=0,ki=Xa=null,El(f,f.pendingLanes));var D=f.pendingLanes;if(D===0&&(wl=null),Tr(w),m=m.stateNode,at&&typeof at.onCommitFiberRoot=="function")try{at.onCommitFiberRoot(Xe,m,void 0,(m.current.flags&128)===128)}catch{}if(A!==null){m=z.T,D=J.p,J.p=2,z.T=null;try{for(var U=f.onRecoverableError,ie=0;ie<A.length;ie++){var fe=A[ie];U(fe.value,{componentStack:fe.stack})}}finally{z.T=m,J.p=D}}(Cl&3)!==0&&Wf(),qf(f),D=f.pendingLanes,(w&4194090)!==0&&(D&42)!==0?f===ip?Su++:(Su=0,ip=f):Su=0,JS(0)}}function El(f,m){(f.pooledCacheLanes&=m)===0&&(m=f.pooledCache,m!=null&&(f.pooledCache=null,mm(m)))}function Wf(f){return dn(),gn(),dr(),jf()}function jf(){if(sa!==5)return!1;var f=Xa,m=Id;Id=0;var w=Tr(Cl),A=z.T,D=J.p;try{J.p=32>w?32:w,z.T=null,w=V0,V0=null;var U=Xa,ie=Cl;if(sa=0,ki=Xa=null,Cl=0,(di&6)!==0)throw Error(r(331));var fe=di;if(di|=4,KS(U.current),Mb(U,U.current,ie,w),di=fe,JS(0,!1),at&&typeof at.onPostCommitFiberRoot=="function")try{at.onPostCommitFiberRoot(Xe,U)}catch{}return!0}finally{J.p=D,z.T=A,El(f,m)}}function ut(f,m,w){m=Na(w,m),m=wb(f.stateNode,m,2),f=wd(f,m,2),f!==null&&(en(f,2),qf(f))}function Ge(f,m,w){if(f.tag===3)ut(f,f,w);else for(;m!==null;){if(m.tag===3){ut(m,f,w);break}else if(m.tag===1){var A=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof A.componentDidCatch=="function"&&(wl===null||!wl.has(A))){f=Na(w,f),w=mA(2),A=wd(m,w,2),A!==null&&(Cb(w,A,m,f),en(A,2),qf(A));break}}m=m.return}}function bt(f,m,w){var A=f.pingCache;if(A===null){A=f.pingCache=new YS;var D=new Set;A.set(m,D)}else D=A.get(m),D===void 0&&(D=new Set,A.set(m,D));D.has(w)||(Bm=!0,D.add(w),f=Kt.bind(null,f,m,w),m.then(f,f))}function Kt(f,m,w){var A=f.pingCache;A!==null&&A.delete(m),f.pingedLanes|=f.suspendedLanes&w,f.warmLanes&=~w,ur===f&&(Fn&w)===w&&(Yi===4||Yi===3&&(Fn&62914560)===Fn&&300>je()-_i?(di&2)===0&&Gf(f,0):rp|=w,Zr===Fn&&(Zr=0)),qf(f)}function Dn(f,m){m===0&&(m=qe()),f=yd(f,m),f!==null&&(en(f,m),qf(f))}function Ji(f){var m=f.memoizedState,w=0;m!==null&&(w=m.retryLane),Dn(f,w)}function er(f,m){var w=0;switch(f.tag){case 13:var A=f.stateNode,D=f.memoizedState;D!==null&&(w=D.retryLane);break;case 19:A=f.stateNode;break;case 22:A=f.stateNode._retryCache;break;default:throw Error(r(314))}A!==null&&A.delete(m),Dn(f,w)}function ri(f,m){return pe(f,m)}var Ts=null,Or=null,Cu=!1,Db=!1,fk=!1,W0=0;function qf(f){f!==Or&&f.next===null&&(Or===null?Ts=Or=f:Or=Or.next=f),Db=!0,Cu||(Cu=!0,goe())}function JS(f,m){if(!fk&&Db){fk=!0;do for(var w=!1,A=Ts;A!==null;){if(f!==0){var D=A.pendingLanes;if(D===0)var U=0;else{var ie=A.suspendedLanes,fe=A.pingedLanes;U=(1<<31-Ft(42|f)+1)-1,U&=D&~(ie&~fe),U=U&201326741?U&201326741|1:U?U|2:0}U!==0&&(w=!0,A6(A,U))}else U=Fn,U=tn(A,A===ur?U:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),(U&3)===0||zt(A,U)||(w=!0,A6(A,U));A=A.next}while(w);fk=!1}}function moe(){C6()}function C6(){Db=Cu=!1;var f=0;W0!==0&&(_oe()&&(f=W0),W0=0);for(var m=je(),w=null,A=Ts;A!==null;){var D=A.next,U=_6(A,m);U===0?(A.next=null,w===null?Ts=D:w.next=D,D===null&&(Or=w)):(w=A,(f!==0||(U&3)!==0)&&(Db=!0)),A=D}JS(f)}function _6(f,m){for(var w=f.suspendedLanes,A=f.pingedLanes,D=f.expirationTimes,U=f.pendingLanes&-62914561;0<U;){var ie=31-Ft(U),fe=1<<ie,Re=D[ie];Re===-1?((fe&w)===0||(fe&A)!==0)&&(D[ie]=hn(fe,m)):Re<=m&&(f.expiredLanes|=fe),U&=~fe}if(m=ur,w=Fn,w=tn(f,f===m?w:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),A=f.callbackNode,w===0||f===m&&(br===2||br===9)||f.cancelPendingCommit!==null)return A!==null&&A!==null&&Le(A),f.callbackNode=null,f.callbackPriority=0;if((w&3)===0||zt(f,w)){if(m=w&-w,m===f.callbackPriority)return m;switch(A!==null&&Le(A),Tr(w)){case 2:case 8:w=ot;break;case 32:w=Ut;break;case 268435456:w=ce;break;default:w=Ut}return A=E6.bind(null,f),w=pe(w,A),f.callbackPriority=m,f.callbackNode=w,m}return A!==null&&A!==null&&Le(A),f.callbackPriority=2,f.callbackNode=null,2}function E6(f,m){if(sa!==0&&sa!==5)return f.callbackNode=null,f.callbackPriority=0,null;var w=f.callbackNode;if(Wf()&&f.callbackNode!==w)return null;var A=Fn;return A=tn(f,f===ur?A:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),A===0?null:($m(f,A,m),_6(f,je()),f.callbackNode!=null&&f.callbackNode===w?E6.bind(null,f):null)}function A6(f,m){if(Wf())return null;$m(f,m,!0)}function goe(){Aoe(function(){(di&6)!==0?pe(st,moe):C6()})}function hk(){return W0===0&&(W0=Te()),W0}function T6(f){return f==null||typeof f=="symbol"||typeof f=="boolean"?null:typeof f=="function"?f:Bh(""+f)}function M6(f,m){var w=m.ownerDocument.createElement("input");return w.name=m.name,w.value=m.value,f.id&&w.setAttribute("form",f.id),m.parentNode.insertBefore(w,m),f=new FormData(f),w.parentNode.removeChild(w),f}function yoe(f,m,w,A,D){if(m==="submit"&&w&&w.stateNode===D){var U=T6((D[Si]||null).action),ie=A.submitter;ie&&(m=(m=ie[Si]||null)?T6(m.formAction):ie.getAttribute("formAction"),m!==null&&(U=m,ie=null));var fe=new cd("action","action",null,A,D);f.push({event:fe,listeners:[{instance:null,listener:function(){if(A.defaultPrevented){if(W0!==0){var Re=ie?M6(D,ie):new FormData(D);GS(w,{pending:!0,data:Re,method:D.method,action:U},null,Re)}}else typeof U=="function"&&(fe.preventDefault(),Re=ie?M6(D,ie):new FormData(D),GS(w,{pending:!0,data:Re,method:D.method,action:U},U,Re))},currentTarget:D}]})}}for(var pk=0;pk<v0.length;pk++){var mk=v0[pk],voe=mk.toLowerCase(),boe=mk[0].toUpperCase()+mk.slice(1);fa(voe,"on"+boe)}fa(go,"onAnimationEnd"),fa(mS,"onAnimationIteration"),fa(Uo,"onAnimationStart"),fa("dblclick","onDoubleClick"),fa("focusin","onFocus"),fa("focusout","onBlur"),fa(T2,"onTransitionRun"),fa(md,"onTransitionStart"),fa(um,"onTransitionCancel"),fa(gd,"onTransitionEnd"),Se("onMouseEnter",["mouseout","mouseover"]),Se("onMouseLeave",["mouseout","mouseover"]),Se("onPointerEnter",["pointerout","pointerover"]),Se("onPointerLeave",["pointerout","pointerover"]),se("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),se("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),se("onBeforeInput",["compositionend","keypress","textInput","paste"]),se("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),se("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),se("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ZS="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xoe=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ZS));function R6(f,m){m=(m&4)!==0;for(var w=0;w<f.length;w++){var A=f[w],D=A.event;A=A.listeners;e:{var U=void 0;if(m)for(var ie=A.length-1;0<=ie;ie--){var fe=A[ie],Re=fe.instance,rt=fe.currentTarget;if(fe=fe.listener,Re!==U&&D.isPropagationStopped())break e;U=fe,D.currentTarget=rt;try{U(D)}catch(Dt){Wh(Dt)}D.currentTarget=null,U=Re}else for(ie=0;ie<A.length;ie++){if(fe=A[ie],Re=fe.instance,rt=fe.currentTarget,fe=fe.listener,Re!==U&&D.isPropagationStopped())break e;U=fe,D.currentTarget=rt;try{U(D)}catch(Dt){Wh(Dt)}D.currentTarget=null,U=Re}}}}function Ur(f,m){var w=m[as];w===void 0&&(w=m[as]=new Set);var A=f+"__bubble";w.has(A)||(N6(m,f,2,!1),w.add(A))}function gk(f,m,w){var A=0;m&&(A|=4),N6(w,f,A,m)}var bA="_reactListening"+Math.random().toString(36).slice(2);function yk(f){if(!f[bA]){f[bA]=!0,St.forEach(function(w){w!=="selectionchange"&&(xoe.has(w)||gk(w,!1,f),gk(w,!0,f))});var m=f.nodeType===9?f:f.ownerDocument;m===null||m[bA]||(m[bA]=!0,gk("selectionchange",!1,m))}}function N6(f,m,w,A){switch(eH(m)){case 2:var D=qoe;break;case 8:D=Xoe;break;default:D=Ik}w=D.bind(null,m,w,f),D=void 0,!bf||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(D=!0),A?D!==void 0?f.addEventListener(m,w,{capture:!0,passive:D}):f.addEventListener(m,w,!0):D!==void 0?f.addEventListener(m,w,{passive:D}):f.addEventListener(m,w,!1)}function vk(f,m,w,A,D){var U=A;if((m&1)===0&&(m&2)===0&&A!==null)e:for(;;){if(A===null)return;var ie=A.tag;if(ie===3||ie===4){var fe=A.stateNode.containerInfo;if(fe===D)break;if(ie===4)for(ie=A.return;ie!==null;){var Re=ie.tag;if((Re===3||Re===4)&&ie.stateNode.containerInfo===D)return;ie=ie.return}for(;fe!==null;){if(ie=ae(fe),ie===null)return;if(Re=ie.tag,Re===5||Re===6||Re===26||Re===27){A=U=ie;continue e}fe=fe.parentNode}}A=A.return}r0(function(){var rt=U,Dt=sm(w),Pt=[];e:{var ft=Yv.get(f);if(ft!==void 0){var gt=cd,sr=f;switch(f){case"keypress":if(Ic(w)===0)break e;case"keydown":case"keyup":gt=f0;break;case"focusin":sr="focus",gt=lm;break;case"focusout":sr="blur",gt=lm;break;case"beforeblur":case"afterblur":gt=lm;break;case"click":if(w.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":gt=s0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":gt=om;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":gt=h0;break;case go:case mS:case Uo:gt=l0;break;case gd:gt=Dc;break;case"scroll":case"scrollend":gt=Pv;break;case"wheel":gt=lS;break;case"copy":case"cut":case"paste":gt=u0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":gt=cm;break;case"toggle":case"beforetoggle":gt=kc}var qn=(m&4)!==0,Vi=!qn&&(f==="scroll"||f==="scrollend"),Je=qn?ft!==null?ft+"Capture":null:ft;qn=[];for(var We=rt,tt;We!==null;){var Ot=We;if(tt=Ot.stateNode,Ot=Ot.tag,Ot!==5&&Ot!==26&&Ot!==27||tt===null||Je===null||(Ot=vf(We,Je),Ot!=null&&qn.push(QS(We,Ot,tt))),Vi)break;We=We.return}0<qn.length&&(ft=new gt(ft,sr,null,w,Dt),Pt.push({event:ft,listeners:qn}))}}if((m&7)===0){e:{if(ft=f==="mouseover"||f==="pointerover",gt=f==="mouseout"||f==="pointerout",ft&&w!==im&&(sr=w.relatedTarget||w.fromElement)&&(ae(sr)||sr[Ri]))break e;if((gt||ft)&&(ft=Dt.window===Dt?Dt:(ft=Dt.ownerDocument)?ft.defaultView||ft.parentWindow:window,gt?(sr=w.relatedTarget||w.toElement,gt=rt,sr=sr?ae(sr):null,sr!==null&&(Vi=s(sr),qn=sr.tag,sr!==Vi||qn!==5&&qn!==27&&qn!==6)&&(sr=null)):(gt=null,sr=rt),gt!==sr)){if(qn=s0,Ot="onMouseLeave",Je="onMouseEnter",We="mouse",(f==="pointerout"||f==="pointerover")&&(qn=cm,Ot="onPointerLeave",Je="onPointerEnter",We="pointer"),Vi=gt==null?ft:Oe(gt),tt=sr==null?ft:Oe(sr),ft=new qn(Ot,We+"leave",gt,w,Dt),ft.target=Vi,ft.relatedTarget=tt,Ot=null,ae(Dt)===rt&&(qn=new qn(Je,We+"enter",sr,w,Dt),qn.target=tt,qn.relatedTarget=Vi,Ot=qn),Vi=Ot,gt&&sr)t:{for(qn=gt,Je=sr,We=0,tt=qn;tt;tt=kb(tt))We++;for(tt=0,Ot=Je;Ot;Ot=kb(Ot))tt++;for(;0<We-tt;)qn=kb(qn),We--;for(;0<tt-We;)Je=kb(Je),tt--;for(;We--;){if(qn===Je||Je!==null&&qn===Je.alternate)break t;qn=kb(qn),Je=kb(Je)}qn=null}else qn=null;gt!==null&&I6(Pt,ft,gt,qn,!1),sr!==null&&Vi!==null&&I6(Pt,Vi,sr,qn,!0)}}e:{if(ft=rt?Oe(rt):window,gt=ft.nodeName&&ft.nodeName.toLowerCase(),gt==="select"||gt==="input"&&ft.type==="file")var En=Ma;else if(cn(ft))if(ta)En=ul;else{En=jv;var Lr=cS}else gt=ft.nodeName,!gt||gt.toLowerCase()!=="input"||ft.type!=="checkbox"&&ft.type!=="radio"?rt&&Oh(rt.elementType)&&(En=Ma):En=Uh;if(En&&(En=En(f,rt))){xn(Pt,En,w,Dt);break e}Lr&&Lr(f,ft,rt),f==="focusout"&&rt&&ft.type==="number"&&rt.memoizedProps.value!=null&&wi(ft,"number",ft.value)}switch(Lr=rt?Oe(rt):window,f){case"focusin":(cn(Lr)||Lr.contentEditable==="true")&&(hd=Lr,qv=rt,y0=null);break;case"focusout":y0=qv=hd=null;break;case"mousedown":Xv=!0;break;case"contextmenu":case"mouseup":case"dragend":Xv=!1,pS(Pt,w,Dt);break;case"selectionchange":if(hS)break;case"keydown":case"keyup":pS(Pt,w,Dt)}var Bn;if(j)e:{switch(f){case"compositionstart":var Xn="onCompositionStart";break e;case"compositionend":Xn="onCompositionEnd";break e;case"compositionupdate":Xn="onCompositionUpdate";break e}Xn=void 0}else Ht?He(f,w)&&(Xn="onCompositionEnd"):f==="keydown"&&w.keyCode===229&&(Xn="onCompositionStart");Xn&&(we&&w.locale!=="ko"&&(Ht||Xn!=="onCompositionStart"?Xn==="onCompositionEnd"&&Ht&&(Bn=i0()):(fo=Dt,ho="value"in fo?fo.value:fo.textContent,Ht=!0)),Lr=xA(rt,Xn),0<Lr.length&&(Xn=new Lh(Xn,f,null,w,Dt),Pt.push({event:Xn,listeners:Lr}),Bn?Xn.data=Bn:(Bn=ht(w),Bn!==null&&(Xn.data=Bn)))),(Bn=oe?Zt(f,w):Un(f,w))&&(Xn=xA(rt,"onBeforeInput"),0<Xn.length&&(Lr=new Lh("onBeforeInput","beforeinput",null,w,Dt),Pt.push({event:Lr,listeners:Xn}),Lr.data=Bn)),yoe(Pt,f,rt,w,Dt)}R6(Pt,m)})}function QS(f,m,w){return{instance:f,listener:m,currentTarget:w}}function xA(f,m){for(var w=m+"Capture",A=[];f!==null;){var D=f,U=D.stateNode;if(D=D.tag,D!==5&&D!==26&&D!==27||U===null||(D=vf(f,w),D!=null&&A.unshift(QS(f,D,U)),D=vf(f,m),D!=null&&A.push(QS(f,D,U))),f.tag===3)return A;f=f.return}return[]}function kb(f){if(f===null)return null;do f=f.return;while(f&&f.tag!==5&&f.tag!==27);return f||null}function I6(f,m,w,A,D){for(var U=m._reactName,ie=[];w!==null&&w!==A;){var fe=w,Re=fe.alternate,rt=fe.stateNode;if(fe=fe.tag,Re!==null&&Re===A)break;fe!==5&&fe!==26&&fe!==27||rt===null||(Re=rt,D?(rt=vf(w,U),rt!=null&&ie.unshift(QS(w,rt,Re))):D||(rt=vf(w,U),rt!=null&&ie.push(QS(w,rt,Re)))),w=w.return}ie.length!==0&&f.push({event:m,listeners:ie})}var Soe=/\r\n?/g,woe=/\u0000|\uFFFD/g;function D6(f){return(typeof f=="string"?f:""+f).replace(Soe,`
`).replace(woe,"")}function k6(f,m){return m=D6(m),D6(f)===m}function SA(){}function Hi(f,m,w,A,D,U){switch(w){case"children":typeof A=="string"?m==="body"||m==="textarea"&&A===""||hs(f,A):(typeof A=="number"||typeof A=="bigint")&&m!=="body"&&hs(f,""+A);break;case"className":Tt(f,"class",A);break;case"tabIndex":Tt(f,"tabindex",A);break;case"dir":case"role":case"viewBox":case"width":case"height":Tt(f,w,A);break;case"style":yf(f,A,U);break;case"data":if(m!=="object"){Tt(f,"data",A);break}case"src":case"href":if(A===""&&(m!=="a"||w!=="href")){f.removeAttribute(w);break}if(A==null||typeof A=="function"||typeof A=="symbol"||typeof A=="boolean"){f.removeAttribute(w);break}A=Bh(""+A),f.setAttribute(w,A);break;case"action":case"formAction":if(typeof A=="function"){f.setAttribute(w,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof U=="function"&&(w==="formAction"?(m!=="input"&&Hi(f,m,"name",D.name,D,null),Hi(f,m,"formEncType",D.formEncType,D,null),Hi(f,m,"formMethod",D.formMethod,D,null),Hi(f,m,"formTarget",D.formTarget,D,null)):(Hi(f,m,"encType",D.encType,D,null),Hi(f,m,"method",D.method,D,null),Hi(f,m,"target",D.target,D,null)));if(A==null||typeof A=="symbol"||typeof A=="boolean"){f.removeAttribute(w);break}A=Bh(""+A),f.setAttribute(w,A);break;case"onClick":A!=null&&(f.onclick=SA);break;case"onScroll":A!=null&&Ur("scroll",f);break;case"onScrollEnd":A!=null&&Ur("scrollend",f);break;case"dangerouslySetInnerHTML":if(A!=null){if(typeof A!="object"||!("__html"in A))throw Error(r(61));if(w=A.__html,w!=null){if(D.children!=null)throw Error(r(60));f.innerHTML=w}}break;case"multiple":f.multiple=A&&typeof A!="function"&&typeof A!="symbol";break;case"muted":f.muted=A&&typeof A!="function"&&typeof A!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(A==null||typeof A=="function"||typeof A=="boolean"||typeof A=="symbol"){f.removeAttribute("xlink:href");break}w=Bh(""+A),f.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",w);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":A!=null&&typeof A!="function"&&typeof A!="symbol"?f.setAttribute(w,""+A):f.removeAttribute(w);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":A&&typeof A!="function"&&typeof A!="symbol"?f.setAttribute(w,""):f.removeAttribute(w);break;case"capture":case"download":A===!0?f.setAttribute(w,""):A!==!1&&A!=null&&typeof A!="function"&&typeof A!="symbol"?f.setAttribute(w,A):f.removeAttribute(w);break;case"cols":case"rows":case"size":case"span":A!=null&&typeof A!="function"&&typeof A!="symbol"&&!isNaN(A)&&1<=A?f.setAttribute(w,A):f.removeAttribute(w);break;case"rowSpan":case"start":A==null||typeof A=="function"||typeof A=="symbol"||isNaN(A)?f.removeAttribute(w):f.setAttribute(w,A);break;case"popover":Ur("beforetoggle",f),Ur("toggle",f),vt(f,"popover",A);break;case"xlinkActuate":Et(f,"http://www.w3.org/1999/xlink","xlink:actuate",A);break;case"xlinkArcrole":Et(f,"http://www.w3.org/1999/xlink","xlink:arcrole",A);break;case"xlinkRole":Et(f,"http://www.w3.org/1999/xlink","xlink:role",A);break;case"xlinkShow":Et(f,"http://www.w3.org/1999/xlink","xlink:show",A);break;case"xlinkTitle":Et(f,"http://www.w3.org/1999/xlink","xlink:title",A);break;case"xlinkType":Et(f,"http://www.w3.org/1999/xlink","xlink:type",A);break;case"xmlBase":Et(f,"http://www.w3.org/XML/1998/namespace","xml:base",A);break;case"xmlLang":Et(f,"http://www.w3.org/XML/1998/namespace","xml:lang",A);break;case"xmlSpace":Et(f,"http://www.w3.org/XML/1998/namespace","xml:space",A);break;case"is":vt(f,"is",A);break;case"innerText":case"textContent":break;default:(!(2<w.length)||w[0]!=="o"&&w[0]!=="O"||w[1]!=="n"&&w[1]!=="N")&&(w=sd.get(w)||w,vt(f,w,A))}}function bk(f,m,w,A,D,U){switch(w){case"style":yf(f,A,U);break;case"dangerouslySetInnerHTML":if(A!=null){if(typeof A!="object"||!("__html"in A))throw Error(r(61));if(w=A.__html,w!=null){if(D.children!=null)throw Error(r(60));f.innerHTML=w}}break;case"children":typeof A=="string"?hs(f,A):(typeof A=="number"||typeof A=="bigint")&&hs(f,""+A);break;case"onScroll":A!=null&&Ur("scroll",f);break;case"onScrollEnd":A!=null&&Ur("scrollend",f);break;case"onClick":A!=null&&(f.onclick=SA);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!jt.hasOwnProperty(w))e:{if(w[0]==="o"&&w[1]==="n"&&(D=w.endsWith("Capture"),m=w.slice(2,D?w.length-7:void 0),U=f[Si]||null,U=U!=null?U[w]:null,typeof U=="function"&&f.removeEventListener(m,U,D),typeof A=="function")){typeof U!="function"&&U!==null&&(w in f?f[w]=null:f.hasAttribute(w)&&f.removeAttribute(w)),f.addEventListener(m,A,D);break e}w in f?f[w]=A:A===!0?f.setAttribute(w,""):vt(f,w,A)}}}function Co(f,m,w){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ur("error",f),Ur("load",f);var A=!1,D=!1,U;for(U in w)if(w.hasOwnProperty(U)){var ie=w[U];if(ie!=null)switch(U){case"src":A=!0;break;case"srcSet":D=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,m));default:Hi(f,m,U,ie,w,null)}}D&&Hi(f,m,"srcSet",w.srcSet,w,null),A&&Hi(f,m,"src",w.src,w,null);return;case"input":Ur("invalid",f);var fe=U=ie=D=null,Re=null,rt=null;for(A in w)if(w.hasOwnProperty(A)){var Dt=w[A];if(Dt!=null)switch(A){case"name":D=Dt;break;case"type":ie=Dt;break;case"checked":Re=Dt;break;case"defaultChecked":rt=Dt;break;case"value":U=Dt;break;case"defaultValue":fe=Dt;break;case"children":case"dangerouslySetInnerHTML":if(Dt!=null)throw Error(r(137,m));break;default:Hi(f,m,A,Dt,w,null)}}Wr(f,U,fe,Re,rt,ie,D,!1),Jn(f);return;case"select":Ur("invalid",f),A=ie=U=null;for(D in w)if(w.hasOwnProperty(D)&&(fe=w[D],fe!=null))switch(D){case"value":U=fe;break;case"defaultValue":ie=fe;break;case"multiple":A=fe;default:Hi(f,m,D,fe,w,null)}m=U,w=ie,f.multiple=!!A,m!=null?Sr(f,!!A,m,!1):w!=null&&Sr(f,!!A,w,!0);return;case"textarea":Ur("invalid",f),U=D=A=null;for(ie in w)if(w.hasOwnProperty(ie)&&(fe=w[ie],fe!=null))switch(ie){case"value":A=fe;break;case"defaultValue":D=fe;break;case"children":U=fe;break;case"dangerouslySetInnerHTML":if(fe!=null)throw Error(r(91));break;default:Hi(f,m,ie,fe,w,null)}id(f,A,D,U),Jn(f);return;case"option":for(Re in w)if(w.hasOwnProperty(Re)&&(A=w[Re],A!=null))switch(Re){case"selected":f.selected=A&&typeof A!="function"&&typeof A!="symbol";break;default:Hi(f,m,Re,A,w,null)}return;case"dialog":Ur("beforetoggle",f),Ur("toggle",f),Ur("cancel",f),Ur("close",f);break;case"iframe":case"object":Ur("load",f);break;case"video":case"audio":for(A=0;A<ZS.length;A++)Ur(ZS[A],f);break;case"image":Ur("error",f),Ur("load",f);break;case"details":Ur("toggle",f);break;case"embed":case"source":case"link":Ur("error",f),Ur("load",f);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(rt in w)if(w.hasOwnProperty(rt)&&(A=w[rt],A!=null))switch(rt){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,m));default:Hi(f,m,rt,A,w,null)}return;default:if(Oh(m)){for(Dt in w)w.hasOwnProperty(Dt)&&(A=w[Dt],A!==void 0&&bk(f,m,Dt,A,w,void 0));return}}for(fe in w)w.hasOwnProperty(fe)&&(A=w[fe],A!=null&&Hi(f,m,fe,A,w,null))}function Coe(f,m,w,A){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var D=null,U=null,ie=null,fe=null,Re=null,rt=null,Dt=null;for(gt in w){var Pt=w[gt];if(w.hasOwnProperty(gt)&&Pt!=null)switch(gt){case"checked":break;case"value":break;case"defaultValue":Re=Pt;default:A.hasOwnProperty(gt)||Hi(f,m,gt,null,A,Pt)}}for(var ft in A){var gt=A[ft];if(Pt=w[ft],A.hasOwnProperty(ft)&&(gt!=null||Pt!=null))switch(ft){case"type":U=gt;break;case"name":D=gt;break;case"checked":rt=gt;break;case"defaultChecked":Dt=gt;break;case"value":ie=gt;break;case"defaultValue":fe=gt;break;case"children":case"dangerouslySetInnerHTML":if(gt!=null)throw Error(r(137,m));break;default:gt!==Pt&&Hi(f,m,ft,gt,A,Pt)}}Mn(f,ie,fe,Re,rt,Dt,U,D);return;case"select":gt=ie=fe=ft=null;for(U in w)if(Re=w[U],w.hasOwnProperty(U)&&Re!=null)switch(U){case"value":break;case"multiple":gt=Re;default:A.hasOwnProperty(U)||Hi(f,m,U,null,A,Re)}for(D in A)if(U=A[D],Re=w[D],A.hasOwnProperty(D)&&(U!=null||Re!=null))switch(D){case"value":ft=U;break;case"defaultValue":fe=U;break;case"multiple":ie=U;default:U!==Re&&Hi(f,m,D,U,A,Re)}m=fe,w=ie,A=gt,ft!=null?Sr(f,!!w,ft,!1):!!A!=!!w&&(m!=null?Sr(f,!!w,m,!0):Sr(f,!!w,w?[]:"",!1));return;case"textarea":gt=ft=null;for(fe in w)if(D=w[fe],w.hasOwnProperty(fe)&&D!=null&&!A.hasOwnProperty(fe))switch(fe){case"value":break;case"children":break;default:Hi(f,m,fe,null,A,D)}for(ie in A)if(D=A[ie],U=w[ie],A.hasOwnProperty(ie)&&(D!=null||U!=null))switch(ie){case"value":ft=D;break;case"defaultValue":gt=D;break;case"children":break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(r(91));break;default:D!==U&&Hi(f,m,ie,D,A,U)}Ci(f,ft,gt);return;case"option":for(var sr in w)if(ft=w[sr],w.hasOwnProperty(sr)&&ft!=null&&!A.hasOwnProperty(sr))switch(sr){case"selected":f.selected=!1;break;default:Hi(f,m,sr,null,A,ft)}for(Re in A)if(ft=A[Re],gt=w[Re],A.hasOwnProperty(Re)&&ft!==gt&&(ft!=null||gt!=null))switch(Re){case"selected":f.selected=ft&&typeof ft!="function"&&typeof ft!="symbol";break;default:Hi(f,m,Re,ft,A,gt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var qn in w)ft=w[qn],w.hasOwnProperty(qn)&&ft!=null&&!A.hasOwnProperty(qn)&&Hi(f,m,qn,null,A,ft);for(rt in A)if(ft=A[rt],gt=w[rt],A.hasOwnProperty(rt)&&ft!==gt&&(ft!=null||gt!=null))switch(rt){case"children":case"dangerouslySetInnerHTML":if(ft!=null)throw Error(r(137,m));break;default:Hi(f,m,rt,ft,A,gt)}return;default:if(Oh(m)){for(var Vi in w)ft=w[Vi],w.hasOwnProperty(Vi)&&ft!==void 0&&!A.hasOwnProperty(Vi)&&bk(f,m,Vi,void 0,A,ft);for(Dt in A)ft=A[Dt],gt=w[Dt],!A.hasOwnProperty(Dt)||ft===gt||ft===void 0&&gt===void 0||bk(f,m,Dt,ft,A,gt);return}}for(var Je in w)ft=w[Je],w.hasOwnProperty(Je)&&ft!=null&&!A.hasOwnProperty(Je)&&Hi(f,m,Je,null,A,ft);for(Pt in A)ft=A[Pt],gt=w[Pt],!A.hasOwnProperty(Pt)||ft===gt||ft==null&&gt==null||Hi(f,m,Pt,ft,A,gt)}var xk=null,Sk=null;function wA(f){return f.nodeType===9?f:f.ownerDocument}function O6(f){switch(f){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function B6(f,m){if(f===0)switch(m){case"svg":return 1;case"math":return 2;default:return 0}return f===1&&m==="foreignObject"?0:f}function wk(f,m){return f==="textarea"||f==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.children=="bigint"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var Ck=null;function _oe(){var f=window.event;return f&&f.type==="popstate"?f===Ck?!1:(Ck=f,!0):(Ck=null,!1)}var $6=typeof setTimeout=="function"?setTimeout:void 0,Eoe=typeof clearTimeout=="function"?clearTimeout:void 0,L6=typeof Promise=="function"?Promise:void 0,Aoe=typeof queueMicrotask=="function"?queueMicrotask:typeof L6<"u"?function(f){return L6.resolve(null).then(f).catch(Toe)}:$6;function Toe(f){setTimeout(function(){throw f})}function Fm(f){return f==="head"}function F6(f,m){var w=m,A=0,D=0;do{var U=w.nextSibling;if(f.removeChild(w),U&&U.nodeType===8)if(w=U.data,w==="/$"){if(0<A&&8>A){w=A;var ie=f.ownerDocument;if(w&1&&ew(ie.documentElement),w&2&&ew(ie.body),w&4)for(w=ie.head,ew(w),ie=w.firstChild;ie;){var fe=ie.nextSibling,Re=ie.nodeName;ie[$s]||Re==="SCRIPT"||Re==="STYLE"||Re==="LINK"&&ie.rel.toLowerCase()==="stylesheet"||w.removeChild(ie),ie=fe}}if(D===0){f.removeChild(U),lw(m);return}D--}else w==="$"||w==="$?"||w==="$!"?D++:A=w.charCodeAt(0)-48;else A=0;w=U}while(w);lw(m)}function _k(f){var m=f.firstChild;for(m&&m.nodeType===10&&(m=m.nextSibling);m;){var w=m;switch(m=m.nextSibling,w.nodeName){case"HTML":case"HEAD":case"BODY":_k(w),ci(w);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(w.rel.toLowerCase()==="stylesheet")continue}f.removeChild(w)}}function Moe(f,m,w,A){for(;f.nodeType===1;){var D=w;if(f.nodeName.toLowerCase()!==m.toLowerCase()){if(!A&&(f.nodeName!=="INPUT"||f.type!=="hidden"))break}else if(A){if(!f[$s])switch(m){case"meta":if(!f.hasAttribute("itemprop"))break;return f;case"link":if(U=f.getAttribute("rel"),U==="stylesheet"&&f.hasAttribute("data-precedence"))break;if(U!==D.rel||f.getAttribute("href")!==(D.href==null||D.href===""?null:D.href)||f.getAttribute("crossorigin")!==(D.crossOrigin==null?null:D.crossOrigin)||f.getAttribute("title")!==(D.title==null?null:D.title))break;return f;case"style":if(f.hasAttribute("data-precedence"))break;return f;case"script":if(U=f.getAttribute("src"),(U!==(D.src==null?null:D.src)||f.getAttribute("type")!==(D.type==null?null:D.type)||f.getAttribute("crossorigin")!==(D.crossOrigin==null?null:D.crossOrigin))&&U&&f.hasAttribute("async")&&!f.hasAttribute("itemprop"))break;return f;default:return f}}else if(m==="input"&&f.type==="hidden"){var U=D.name==null?null:""+D.name;if(D.type==="hidden"&&f.getAttribute("name")===U)return f}else return f;if(f=Dd(f.nextSibling),f===null)break}return null}function Roe(f,m,w){if(m==="")return null;for(;f.nodeType!==3;)if((f.nodeType!==1||f.nodeName!=="INPUT"||f.type!=="hidden")&&!w||(f=Dd(f.nextSibling),f===null))return null;return f}function Ek(f){return f.data==="$!"||f.data==="$?"&&f.ownerDocument.readyState==="complete"}function Noe(f,m){var w=f.ownerDocument;if(f.data!=="$?"||w.readyState==="complete")m();else{var A=function(){m(),w.removeEventListener("DOMContentLoaded",A)};w.addEventListener("DOMContentLoaded",A),f._reactRetry=A}}function Dd(f){for(;f!=null;f=f.nextSibling){var m=f.nodeType;if(m===1||m===3)break;if(m===8){if(m=f.data,m==="$"||m==="$!"||m==="$?"||m==="F!"||m==="F")break;if(m==="/$")return null}}return f}var Ak=null;function P6(f){f=f.previousSibling;for(var m=0;f;){if(f.nodeType===8){var w=f.data;if(w==="$"||w==="$!"||w==="$?"){if(m===0)return f;m--}else w==="/$"&&m++}f=f.previousSibling}return null}function U6(f,m,w){switch(m=wA(w),f){case"html":if(f=m.documentElement,!f)throw Error(r(452));return f;case"head":if(f=m.head,!f)throw Error(r(453));return f;case"body":if(f=m.body,!f)throw Error(r(454));return f;default:throw Error(r(451))}}function ew(f){for(var m=f.attributes;m.length;)f.removeAttributeNode(m[0]);ci(f)}var _u=new Map,z6=new Set;function CA(f){return typeof f.getRootNode=="function"?f.getRootNode():f.nodeType===9?f:f.ownerDocument}var ap=J.d;J.d={f:Ioe,r:Doe,D:koe,C:Ooe,L:Boe,m:$oe,X:Foe,S:Loe,M:Poe};function Ioe(){var f=ap.f(),m=wu();return f||m}function Doe(f){var m=me(f);m!==null&&m.tag===5&&m.type==="form"?nA(m):ap.r(f)}var Ob=typeof document>"u"?null:document;function H6(f,m,w){var A=Ob;if(A&&typeof m=="string"&&m){var D=Zn(m);D='link[rel="'+f+'"][href="'+D+'"]',typeof w=="string"&&(D+='[crossorigin="'+w+'"]'),z6.has(D)||(z6.add(D),f={rel:f,crossOrigin:w,href:m},A.querySelector(D)===null&&(m=A.createElement("link"),Co(m,"link",f),ct(m),A.head.appendChild(m)))}}function koe(f){ap.D(f),H6("dns-prefetch",f,null)}function Ooe(f,m){ap.C(f,m),H6("preconnect",f,m)}function Boe(f,m,w){ap.L(f,m,w);var A=Ob;if(A&&f&&m){var D='link[rel="preload"][as="'+Zn(m)+'"]';m==="image"&&w&&w.imageSrcSet?(D+='[imagesrcset="'+Zn(w.imageSrcSet)+'"]',typeof w.imageSizes=="string"&&(D+='[imagesizes="'+Zn(w.imageSizes)+'"]')):D+='[href="'+Zn(f)+'"]';var U=D;switch(m){case"style":U=Bb(f);break;case"script":U=$b(f)}_u.has(U)||(f=u({rel:"preload",href:m==="image"&&w&&w.imageSrcSet?void 0:f,as:m},w),_u.set(U,f),A.querySelector(D)!==null||m==="style"&&A.querySelector(tw(U))||m==="script"&&A.querySelector(nw(U))||(m=A.createElement("link"),Co(m,"link",f),ct(m),A.head.appendChild(m)))}}function $oe(f,m){ap.m(f,m);var w=Ob;if(w&&f){var A=m&&typeof m.as=="string"?m.as:"script",D='link[rel="modulepreload"][as="'+Zn(A)+'"][href="'+Zn(f)+'"]',U=D;switch(A){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":U=$b(f)}if(!_u.has(U)&&(f=u({rel:"modulepreload",href:f},m),_u.set(U,f),w.querySelector(D)===null)){switch(A){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(w.querySelector(nw(U)))return}A=w.createElement("link"),Co(A,"link",f),ct(A),w.head.appendChild(A)}}}function Loe(f,m,w){ap.S(f,m,w);var A=Ob;if(A&&f){var D=nt(A).hoistableStyles,U=Bb(f);m=m||"default";var ie=D.get(U);if(!ie){var fe={loading:0,preload:null};if(ie=A.querySelector(tw(U)))fe.loading=5;else{f=u({rel:"stylesheet",href:f,"data-precedence":m},w),(w=_u.get(U))&&Tk(f,w);var Re=ie=A.createElement("link");ct(Re),Co(Re,"link",f),Re._p=new Promise(function(rt,Dt){Re.onload=rt,Re.onerror=Dt}),Re.addEventListener("load",function(){fe.loading|=1}),Re.addEventListener("error",function(){fe.loading|=2}),fe.loading|=4,_A(ie,m,A)}ie={type:"stylesheet",instance:ie,count:1,state:fe},D.set(U,ie)}}}function Foe(f,m){ap.X(f,m);var w=Ob;if(w&&f){var A=nt(w).hoistableScripts,D=$b(f),U=A.get(D);U||(U=w.querySelector(nw(D)),U||(f=u({src:f,async:!0},m),(m=_u.get(D))&&Mk(f,m),U=w.createElement("script"),ct(U),Co(U,"link",f),w.head.appendChild(U)),U={type:"script",instance:U,count:1,state:null},A.set(D,U))}}function Poe(f,m){ap.M(f,m);var w=Ob;if(w&&f){var A=nt(w).hoistableScripts,D=$b(f),U=A.get(D);U||(U=w.querySelector(nw(D)),U||(f=u({src:f,async:!0,type:"module"},m),(m=_u.get(D))&&Mk(f,m),U=w.createElement("script"),ct(U),Co(U,"link",f),w.head.appendChild(U)),U={type:"script",instance:U,count:1,state:null},A.set(D,U))}}function V6(f,m,w,A){var D=(D=ve.current)?CA(D):null;if(!D)throw Error(r(446));switch(f){case"meta":case"title":return null;case"style":return typeof w.precedence=="string"&&typeof w.href=="string"?(m=Bb(w.href),w=nt(D).hoistableStyles,A=w.get(m),A||(A={type:"style",instance:null,count:0,state:null},w.set(m,A)),A):{type:"void",instance:null,count:0,state:null};case"link":if(w.rel==="stylesheet"&&typeof w.href=="string"&&typeof w.precedence=="string"){f=Bb(w.href);var U=nt(D).hoistableStyles,ie=U.get(f);if(ie||(D=D.ownerDocument||D,ie={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},U.set(f,ie),(U=D.querySelector(tw(f)))&&!U._p&&(ie.instance=U,ie.state.loading=5),_u.has(f)||(w={rel:"preload",as:"style",href:w.href,crossOrigin:w.crossOrigin,integrity:w.integrity,media:w.media,hrefLang:w.hrefLang,referrerPolicy:w.referrerPolicy},_u.set(f,w),U||Uoe(D,f,w,ie.state))),m&&A===null)throw Error(r(528,""));return ie}if(m&&A!==null)throw Error(r(529,""));return null;case"script":return m=w.async,w=w.src,typeof w=="string"&&m&&typeof m!="function"&&typeof m!="symbol"?(m=$b(w),w=nt(D).hoistableScripts,A=w.get(m),A||(A={type:"script",instance:null,count:0,state:null},w.set(m,A)),A):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,f))}}function Bb(f){return'href="'+Zn(f)+'"'}function tw(f){return'link[rel="stylesheet"]['+f+"]"}function G6(f){return u({},f,{"data-precedence":f.precedence,precedence:null})}function Uoe(f,m,w,A){f.querySelector('link[rel="preload"][as="style"]['+m+"]")?A.loading=1:(m=f.createElement("link"),A.preload=m,m.addEventListener("load",function(){return A.loading|=1}),m.addEventListener("error",function(){return A.loading|=2}),Co(m,"link",w),ct(m),f.head.appendChild(m))}function $b(f){return'[src="'+Zn(f)+'"]'}function nw(f){return"script[async]"+f}function W6(f,m,w){if(m.count++,m.instance===null)switch(m.type){case"style":var A=f.querySelector('style[data-href~="'+Zn(w.href)+'"]');if(A)return m.instance=A,ct(A),A;var D=u({},w,{"data-href":w.href,"data-precedence":w.precedence,href:null,precedence:null});return A=(f.ownerDocument||f).createElement("style"),ct(A),Co(A,"style",D),_A(A,w.precedence,f),m.instance=A;case"stylesheet":D=Bb(w.href);var U=f.querySelector(tw(D));if(U)return m.state.loading|=4,m.instance=U,ct(U),U;A=G6(w),(D=_u.get(D))&&Tk(A,D),U=(f.ownerDocument||f).createElement("link"),ct(U);var ie=U;return ie._p=new Promise(function(fe,Re){ie.onload=fe,ie.onerror=Re}),Co(U,"link",A),m.state.loading|=4,_A(U,w.precedence,f),m.instance=U;case"script":return U=$b(w.src),(D=f.querySelector(nw(U)))?(m.instance=D,ct(D),D):(A=w,(D=_u.get(U))&&(A=u({},w),Mk(A,D)),f=f.ownerDocument||f,D=f.createElement("script"),ct(D),Co(D,"link",A),f.head.appendChild(D),m.instance=D);case"void":return null;default:throw Error(r(443,m.type))}else m.type==="stylesheet"&&(m.state.loading&4)===0&&(A=m.instance,m.state.loading|=4,_A(A,w.precedence,f));return m.instance}function _A(f,m,w){for(var A=w.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),D=A.length?A[A.length-1]:null,U=D,ie=0;ie<A.length;ie++){var fe=A[ie];if(fe.dataset.precedence===m)U=fe;else if(U!==D)break}U?U.parentNode.insertBefore(f,U.nextSibling):(m=w.nodeType===9?w.head:w,m.insertBefore(f,m.firstChild))}function Tk(f,m){f.crossOrigin==null&&(f.crossOrigin=m.crossOrigin),f.referrerPolicy==null&&(f.referrerPolicy=m.referrerPolicy),f.title==null&&(f.title=m.title)}function Mk(f,m){f.crossOrigin==null&&(f.crossOrigin=m.crossOrigin),f.referrerPolicy==null&&(f.referrerPolicy=m.referrerPolicy),f.integrity==null&&(f.integrity=m.integrity)}var EA=null;function j6(f,m,w){if(EA===null){var A=new Map,D=EA=new Map;D.set(w,A)}else D=EA,A=D.get(w),A||(A=new Map,D.set(w,A));if(A.has(f))return A;for(A.set(f,null),w=w.getElementsByTagName(f),D=0;D<w.length;D++){var U=w[D];if(!(U[$s]||U[pi]||f==="link"&&U.getAttribute("rel")==="stylesheet")&&U.namespaceURI!=="http://www.w3.org/2000/svg"){var ie=U.getAttribute(m)||"";ie=f+ie;var fe=A.get(ie);fe?fe.push(U):A.set(ie,[U])}}return A}function q6(f,m,w){f=f.ownerDocument||f,f.head.insertBefore(w,m==="title"?f.querySelector("head > title"):null)}function zoe(f,m,w){if(w===1||m.itemProp!=null)return!1;switch(f){case"meta":case"title":return!0;case"style":if(typeof m.precedence!="string"||typeof m.href!="string"||m.href==="")break;return!0;case"link":if(typeof m.rel!="string"||typeof m.href!="string"||m.href===""||m.onLoad||m.onError)break;switch(m.rel){case"stylesheet":return f=m.disabled,typeof m.precedence=="string"&&f==null;default:return!0}case"script":if(m.async&&typeof m.async!="function"&&typeof m.async!="symbol"&&!m.onLoad&&!m.onError&&m.src&&typeof m.src=="string")return!0}return!1}function X6(f){return!(f.type==="stylesheet"&&(f.state.loading&3)===0)}var rw=null;function Hoe(){}function Voe(f,m,w){if(rw===null)throw Error(r(475));var A=rw;if(m.type==="stylesheet"&&(typeof w.media!="string"||matchMedia(w.media).matches!==!1)&&(m.state.loading&4)===0){if(m.instance===null){var D=Bb(w.href),U=f.querySelector(tw(D));if(U){f=U._p,f!==null&&typeof f=="object"&&typeof f.then=="function"&&(A.count++,A=AA.bind(A),f.then(A,A)),m.state.loading|=4,m.instance=U,ct(U);return}U=f.ownerDocument||f,w=G6(w),(D=_u.get(D))&&Tk(w,D),U=U.createElement("link"),ct(U);var ie=U;ie._p=new Promise(function(fe,Re){ie.onload=fe,ie.onerror=Re}),Co(U,"link",w),m.instance=U}A.stylesheets===null&&(A.stylesheets=new Map),A.stylesheets.set(m,f),(f=m.state.preload)&&(m.state.loading&3)===0&&(A.count++,m=AA.bind(A),f.addEventListener("load",m),f.addEventListener("error",m))}}function Goe(){if(rw===null)throw Error(r(475));var f=rw;return f.stylesheets&&f.count===0&&Rk(f,f.stylesheets),0<f.count?function(m){var w=setTimeout(function(){if(f.stylesheets&&Rk(f,f.stylesheets),f.unsuspend){var A=f.unsuspend;f.unsuspend=null,A()}},6e4);return f.unsuspend=m,function(){f.unsuspend=null,clearTimeout(w)}}:null}function AA(){if(this.count--,this.count===0){if(this.stylesheets)Rk(this,this.stylesheets);else if(this.unsuspend){var f=this.unsuspend;this.unsuspend=null,f()}}}var TA=null;function Rk(f,m){f.stylesheets=null,f.unsuspend!==null&&(f.count++,TA=new Map,m.forEach(Woe,f),TA=null,AA.call(f))}function Woe(f,m){if(!(m.state.loading&4)){var w=TA.get(f);if(w)var A=w.get(null);else{w=new Map,TA.set(f,w);for(var D=f.querySelectorAll("link[data-precedence],style[data-precedence]"),U=0;U<D.length;U++){var ie=D[U];(ie.nodeName==="LINK"||ie.getAttribute("media")!=="not all")&&(w.set(ie.dataset.precedence,ie),A=ie)}A&&w.set(null,A)}D=m.instance,ie=D.getAttribute("data-precedence"),U=w.get(ie)||A,U===A&&w.set(null,D),w.set(ie,D),this.count++,A=AA.bind(this),D.addEventListener("load",A),D.addEventListener("error",A),U?U.parentNode.insertBefore(D,U.nextSibling):(f=f.nodeType===9?f.head:f,f.insertBefore(D,f.firstChild)),m.state.loading|=4}}var iw={$$typeof:E,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function joe(f,m,w,A,D,U,ie,fe){this.tag=1,this.containerInfo=f,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$t(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$t(0),this.hiddenUpdates=$t(null),this.identifierPrefix=A,this.onUncaughtError=D,this.onCaughtError=U,this.onRecoverableError=ie,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=fe,this.incompleteTransitions=new Map}function K6(f,m,w,A,D,U,ie,fe,Re,rt,Dt,Pt){return f=new joe(f,m,w,ie,fe,Re,rt,Pt),m=1,U===!0&&(m|=24),U=zo(3,null,null,m),f.current=U,U.stateNode=f,m=rb(),m.refCount++,f.pooledCache=m,m.refCount++,U.memoizedState={element:A,isDehydrated:w,cache:m},MS(U),f}function Y6(f){return f?(f=Cf,f):Cf}function J6(f,m,w,A,D,U){D=Y6(D),A.context===null?A.context=D:A.pendingContext=D,A=du(m),A.payload={element:w},U=U===void 0?null:U,U!==null&&(A.callback=U),w=wd(f,A,m),w!==null&&(wo(w,f,m),Hh(w,f,m))}function Z6(f,m){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var w=f.retryLane;f.retryLane=w!==0&&w<m?w:m}}function Nk(f,m){Z6(f,m),(f=f.alternate)&&Z6(f,m)}function Q6(f){if(f.tag===13){var m=yd(f,67108864);m!==null&&wo(m,f,67108864),Nk(f,67108864)}}var MA=!0;function qoe(f,m,w,A){var D=z.T;z.T=null;var U=J.p;try{J.p=2,Ik(f,m,w,A)}finally{J.p=U,z.T=D}}function Xoe(f,m,w,A){var D=z.T;z.T=null;var U=J.p;try{J.p=8,Ik(f,m,w,A)}finally{J.p=U,z.T=D}}function Ik(f,m,w,A){if(MA){var D=Dk(A);if(D===null)vk(f,m,A,RA,w),tH(f,A);else if(Yoe(D,f,m,w,A))A.stopPropagation();else if(tH(f,A),m&4&&-1<Koe.indexOf(f)){for(;D!==null;){var U=me(D);if(U!==null)switch(U.tag){case 3:if(U=U.stateNode,U.current.memoizedState.isDehydrated){var ie=an(U.pendingLanes);if(ie!==0){var fe=U;for(fe.pendingLanes|=2,fe.entangledLanes|=2;ie;){var Re=1<<31-Ft(ie);fe.entanglements[1]|=Re,ie&=~Re}qf(U),(di&6)===0&&(qa=je()+500,JS(0))}}break;case 13:fe=yd(U,2),fe!==null&&wo(fe,U,2),wu(),Nk(U,2)}if(U=Dk(A),U===null&&vk(f,m,A,RA,w),U===D)break;D=U}D!==null&&A.stopPropagation()}else vk(f,m,A,null,w)}}function Dk(f){return f=sm(f),kk(f)}var RA=null;function kk(f){if(RA=null,f=ae(f),f!==null){var m=s(f);if(m===null)f=null;else{var w=m.tag;if(w===13){if(f=a(m),f!==null)return f;f=null}else if(w===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;f=null}else m!==f&&(f=null)}}return RA=f,null}function eH(f){switch(f){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(lt()){case st:return 2;case ot:return 8;case Ut:case mt:return 32;case ce:return 268435456;default:return 32}default:return 32}}var Ok=!1,Pm=null,Um=null,zm=null,sw=new Map,aw=new Map,Hm=[],Koe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function tH(f,m){switch(f){case"focusin":case"focusout":Pm=null;break;case"dragenter":case"dragleave":Um=null;break;case"mouseover":case"mouseout":zm=null;break;case"pointerover":case"pointerout":sw.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":aw.delete(m.pointerId)}}function ow(f,m,w,A,D,U){return f===null||f.nativeEvent!==U?(f={blockedOn:m,domEventName:w,eventSystemFlags:A,nativeEvent:U,targetContainers:[D]},m!==null&&(m=me(m),m!==null&&Q6(m)),f):(f.eventSystemFlags|=A,m=f.targetContainers,D!==null&&m.indexOf(D)===-1&&m.push(D),f)}function Yoe(f,m,w,A,D){switch(m){case"focusin":return Pm=ow(Pm,f,m,w,A,D),!0;case"dragenter":return Um=ow(Um,f,m,w,A,D),!0;case"mouseover":return zm=ow(zm,f,m,w,A,D),!0;case"pointerover":var U=D.pointerId;return sw.set(U,ow(sw.get(U)||null,f,m,w,A,D)),!0;case"gotpointercapture":return U=D.pointerId,aw.set(U,ow(aw.get(U)||null,f,m,w,A,D)),!0}return!1}function nH(f){var m=ae(f.target);if(m!==null){var w=s(m);if(w!==null){if(m=w.tag,m===13){if(m=a(w),m!==null){f.blockedOn=m,Qs(f.priority,function(){if(w.tag===13){var A=ys();A=In(A);var D=yd(w,A);D!==null&&wo(D,w,A),Nk(w,A)}});return}}else if(m===3&&w.stateNode.current.memoizedState.isDehydrated){f.blockedOn=w.tag===3?w.stateNode.containerInfo:null;return}}}f.blockedOn=null}function NA(f){if(f.blockedOn!==null)return!1;for(var m=f.targetContainers;0<m.length;){var w=Dk(f.nativeEvent);if(w===null){w=f.nativeEvent;var A=new w.constructor(w.type,w);im=A,w.target.dispatchEvent(A),im=null}else return m=me(w),m!==null&&Q6(m),f.blockedOn=w,!1;m.shift()}return!0}function rH(f,m,w){NA(f)&&w.delete(m)}function Joe(){Ok=!1,Pm!==null&&NA(Pm)&&(Pm=null),Um!==null&&NA(Um)&&(Um=null),zm!==null&&NA(zm)&&(zm=null),sw.forEach(rH),aw.forEach(rH)}function IA(f,m){f.blockedOn===m&&(f.blockedOn=null,Ok||(Ok=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Joe)))}var DA=null;function iH(f){DA!==f&&(DA=f,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){DA===f&&(DA=null);for(var m=0;m<f.length;m+=3){var w=f[m],A=f[m+1],D=f[m+2];if(typeof A!="function"){if(kk(A||w)===null)continue;break}var U=me(w);U!==null&&(f.splice(m,3),m-=3,GS(U,{pending:!0,data:D,method:w.method,action:A},A,D))}}))}function lw(f){function m(Re){return IA(Re,f)}Pm!==null&&IA(Pm,f),Um!==null&&IA(Um,f),zm!==null&&IA(zm,f),sw.forEach(m),aw.forEach(m);for(var w=0;w<Hm.length;w++){var A=Hm[w];A.blockedOn===f&&(A.blockedOn=null)}for(;0<Hm.length&&(w=Hm[0],w.blockedOn===null);)nH(w),w.blockedOn===null&&Hm.shift();if(w=(f.ownerDocument||f).$$reactFormReplay,w!=null)for(A=0;A<w.length;A+=3){var D=w[A],U=w[A+1],ie=D[Si]||null;if(typeof U=="function")ie||iH(w);else if(ie){var fe=null;if(U&&U.hasAttribute("formAction")){if(D=U,ie=U[Si]||null)fe=ie.formAction;else if(kk(D)!==null)continue}else fe=ie.action;typeof fe=="function"?w[A+1]=fe:(w.splice(A,3),A-=3),iH(w)}}}function Bk(f){this._internalRoot=f}kA.prototype.render=Bk.prototype.render=function(f){var m=this._internalRoot;if(m===null)throw Error(r(409));var w=m.current,A=ys();J6(w,A,f,m,null,null)},kA.prototype.unmount=Bk.prototype.unmount=function(){var f=this._internalRoot;if(f!==null){this._internalRoot=null;var m=f.containerInfo;J6(f.current,2,null,f,null,null),wu(),m[Ri]=null}};function kA(f){this._internalRoot=f}kA.prototype.unstable_scheduleHydration=function(f){if(f){var m=lr();f={blockedOn:null,target:f,priority:m};for(var w=0;w<Hm.length&&m!==0&&m<Hm[w].priority;w++);Hm.splice(w,0,f),w===0&&nH(f)}};var sH=e.version;if(sH!=="19.1.0")throw Error(r(527,sH,"19.1.0"));J.findDOMNode=function(f){var m=f._reactInternals;if(m===void 0)throw typeof f.render=="function"?Error(r(188)):(f=Object.keys(f).join(","),Error(r(268,f)));return f=l(m),f=f!==null?c(f):null,f=f===null?null:f.stateNode,f};var Zoe={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var OA=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!OA.isDisabled&&OA.supportsFiber)try{Xe=OA.inject(Zoe),at=OA}catch{}}return dw.createRoot=function(f,m){if(!i(f))throw Error(r(299));var w=!1,A="",D=F0,U=xb,ie=pA,fe=null;return m!=null&&(m.unstable_strictMode===!0&&(w=!0),m.identifierPrefix!==void 0&&(A=m.identifierPrefix),m.onUncaughtError!==void 0&&(D=m.onUncaughtError),m.onCaughtError!==void 0&&(U=m.onCaughtError),m.onRecoverableError!==void 0&&(ie=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(fe=m.unstable_transitionCallbacks)),m=K6(f,1,!1,null,null,w,A,D,U,ie,fe,null),f[Ri]=m.current,yk(f),new Bk(m)},dw.hydrateRoot=function(f,m,w){if(!i(f))throw Error(r(299));var A=!1,D="",U=F0,ie=xb,fe=pA,Re=null,rt=null;return w!=null&&(w.unstable_strictMode===!0&&(A=!0),w.identifierPrefix!==void 0&&(D=w.identifierPrefix),w.onUncaughtError!==void 0&&(U=w.onUncaughtError),w.onCaughtError!==void 0&&(ie=w.onCaughtError),w.onRecoverableError!==void 0&&(fe=w.onRecoverableError),w.unstable_transitionCallbacks!==void 0&&(Re=w.unstable_transitionCallbacks),w.formState!==void 0&&(rt=w.formState)),m=K6(f,1,!0,m,w??null,A,D,U,ie,fe,Re,rt),m.context=Y6(null),w=m.current,A=ys(),A=In(A),D=du(A),D.callback=null,wd(w,D,A),w=A,m.current.lanes=w,en(m,w),qf(m),f[Ri]=m.current,yk(f),new kA(m)},dw.version="19.1.0",dw}var gH;function ule(){if(gH)return Fk.exports;gH=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Fk.exports=cle(),Fk.exports}var Mq=ule();const dle=({onComplete:n})=>{const[e,t]=F.useState(""),r="<Loading.../>";return F.useEffect(()=>{let i=0;const s=setInterval(()=>{t(r.substring(0,i)),i++,i>r.length&&(clearInterval(s),setTimeout(()=>{n()},1e3))},100);return()=>clearInterval(s)},[n]),V.jsxs("div",{className:"fixed inset-0 z-50 bg-black text-gray-100 flex flex-col items-center justify-center",children:[V.jsxs("div",{className:"mb-4 text-4xl font-mono font-bold",children:[e," ",V.jsx("span",{className:"animate-blink ml-1",children:" | "})]}),V.jsx("div",{className:"w-[200px] h-[2px] bg-gray-800 rounded relative overflow-hidden",children:V.jsx("div",{className:"w-[40%] h-full bg-blue-500 shadow-[0_0_15px_#3b82f6] animate-loading-bar",children:" "})})]})},fle=({menuOpen:n,setMenuOpen:e})=>(F.useEffect(()=>{document.body.style.overflowY=n?"hidden":""},[n]),V.jsx("nav",{className:"fixed top-0 w-full z-40 bg-[rgba(10, 10, 10, 0.8)] backdrop-blur-lg border-b border-white/10 shadow-lg",children:V.jsx("div",{className:"max-w-5xl mx-auto px-4",children:V.jsxs("div",{className:"flex justify-between items-center h-16",children:[V.jsxs("a",{href:"#home",className:"font-mono text-xl font-bold text-white",children:["dennis",V.jsx("span",{className:"text-blue-500",children:".tech"})]}),V.jsx("div",{className:"w-7 h-5 relative cursor-pointer z-40 md:hidden",onClick:()=>e(t=>!t),children:""}),V.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[V.jsxs("a",{href:"#home",className:"text-gray-300 hove:text-white transition-colors",children:[" ","Home"]}),V.jsx("a",{href:"#about",className:"text-gray-300 hove:text-white transition-colors",children:"About"}),V.jsx("a",{href:"#work",className:"text-gray-300 hove:text-white transition-colors",children:"Work Experience"}),V.jsx("a",{href:"#projects",className:"text-gray-300 hove:text-white transition-colors",children:"Projects"}),V.jsx("a",{href:"#contact",className:"text-gray-300 hove:text-white transition-colors",children:"Contact"})]})]})})})),hle=({menuOpen:n,setMenuOpen:e})=>V.jsxs("div",{className:`fixed top-0 left-0 w-full bg-[rgba(10, 10, 10, 0.95)] backdrop-blur-lg z-40 flex flex-col items-center justify-center transition-all duration-300 ease-in-out
                       ${n?"h-screen opacity-100 pointer-events-auto":"h-0 opacity-0 pointer-events-none"}`,children:[V.jsx("button",{onClick:()=>e(!1),className:"absolute top-6 right-6 text-white text-3xl focus:outline-none cursor-pointer","aria-label":"Close Menu",children:""}),V.jsxs("div",{className:"flex flex-col items-center space-y-8 text-center",children:[V.jsx("a",{href:"#home",className:`text-2xl font-semibold text-white my-4 hover:text-blue-400 transition-transform duration-300
                                ${n?"opacity-100 translate-y-0":"opacity-0 translate-y-5"}`,onClick:()=>e(!1),children:"Home"}),V.jsx("a",{href:"#about",className:`text-2xl font-semibold text-white my-4 hover:text-blue-400 transition-transform duration-300
                                ${n?"opacity-100 translate-y-0":"opacity-0 translate-y-5"}`,onClick:()=>e(!1),children:"About"}),V.jsx("a",{href:"#projects",className:`text-2xl font-semibold text-white my-4 hover:text-blue-400 transition-transform duration-300
                                ${n?"opacity-100 translate-y-0":"opacity-0 translate-y-5"}`,onClick:()=>e(!1),children:"Projects"}),V.jsx("a",{href:"#contact",className:`text-2xl font-semibold text-white my-4 hover:text-blue-400 transition-transform duration-300
                                ${n?"opacity-100 translate-y-0":"opacity-0 translate-y-5"}`,onClick:()=>e(!1),children:"Contact"})]})]}),E1=({children:n})=>{const e=F.useRef(null);return F.useEffect(()=>{const t=new IntersectionObserver(([r])=>{r.isIntersecting&&e.current.classList.add("visible")},{threshold:.2,rootMargin:"0px 0px -50px 0px"});return e.current&&t.observe(e.current),()=>t.disconnect()}),V.jsx("div",{ref:e,className:"reveal",children:n})},ple=()=>V.jsx("section",{id:"home",className:"min-h-screen flex items-center justify-center relative",children:V.jsx(E1,{children:V.jsxs("div",{className:"text-center z-10 px-4 max-w-4xl mx-auto",children:[V.jsx("h1",{className:"text-5xl md:text-7xl font-bold mb-6 bg-gradient-to-r from-green-500 to-blue-500 bg-clip-text text-transparent leading-tight",children:"Hello, I am Dennis Wong"}),V.jsx("p",{className:"text-xl md:text-2xl md:font-bold text-white mb-8 max-w-2xl mx-auto",children:"Full Stack Developer & Software Engineer"}),V.jsxs("div",{className:"flex justify-center space-x-4",children:[V.jsx("a",{href:"#projects",className:`bg-blue-600 text-white py-3 px-6 rounded font-semibold transition relative
                                overflow-hidden hover:-translate-y-0.5 hover:shadow-[0_0_15px_rgba(59, 130, 246, 0.4)]`,children:"View Projects"}),V.jsx("a",{href:"#contacts",className:`bg-black-500 border-blue-500/50 text-blue-500 py-3 px-6 rounded font-semibold transition-all 
                                duration-200 hover:-translate-y-0.5 hover:shadow-[0_0_15px_rgba(59, 130, 246, 0.2)] hover:bg-blue-500/10`,children:"Contact Me"})]})]})})}),mle=()=>{const n=["React","ReactDOM","Vite","TailwindCSS","Javascript","Typescript"],e=["NodeJS","Azure","Google Cloud Platform","PostgresSQL","MongoDB","Spring Boot"];return V.jsx("section",{id:"about",className:"min-h-screen flex items-center justify-center py-20",children:V.jsx(E1,{children:V.jsxs("div",{className:"max-w-3xl mx-auto px-4",children:[V.jsx("h2",{className:"text-3xl font-bold mb-8 bg-gradient-to-r from-blue-500 to-green-500 bg-clip-text text-transparent text-center",children:"About Me"}),V.jsxs("div",{className:"rounded-xl p-8 border-white/10 bg-gray-500/20 bg-opacity-90 backdrop-filter backdrop-blur-xs border hover:-translate-y-1 transition-all",children:[V.jsx("p",{className:"text-gray-300 mb-6",children:"I'm Dennis Wong, a Computer Science graduate from UMass Boston, specializing in software development and data analysis. I bring hands-on experience from roles like Prospect Research Data Assistant, where I supported scholarships by managing large data sets for organizations like Vertex and State Street. I also interned at Johnson & Johnson, where I streamlined data for a medical tool database using Excel macros. A notable project I developed is a local Weather Station, a smart, connected weather station powered by an ESP32 board and various sensors. It collects real-time environmental data, sends it to a dashboard, and uses AI to predict future weather trends based on historical data. With skills in Java, C, C++, JavaScript, and MySQL, Im eager to apply my technical expertise to a software development or data analysis role."}),V.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[V.jsxs("div",{className:"rounded-xl p-6 hover:-translate-y-1 transition-all",children:[V.jsx("h3",{className:"text-xl font-bold mb-4",children:"Frontend"}),V.jsx("div",{className:"flex flex-wrap gap-2",children:n.map((t,r)=>V.jsx("span",{className:`bg-blue-500/10 text-blue-500 py-1 px-3 rounded-full text-sm hover:bg-blue-500/20
                                                          hover:shadow-[0_2px_8px_rgba(59, 130, 246, 0.2)] transition`,children:t},r))})]}),V.jsxs("div",{className:"rounded-xl p-6 hover:-translate-y-1 transition-all",children:[V.jsx("h3",{className:"text-xl font-bold mb-4",children:"Backend"}),V.jsx("div",{className:"flex flex-wrap gap-2",children:e.map((t,r)=>V.jsx("span",{className:`bg-blue-500/10 text-blue-500 py-1 px-3 rounded-full text-sm hover:bg-blue-500/20
                                                          hover:shadow-[0_2px_8px_rgba(59, 130, 246, 0.2)] transition`,children:t},r))})]})]})]}),V.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-8",children:[V.jsxs("div",{className:"p-6 rounded-xl border-white/10 border hover:-translate-y-1 transition-all bg-gray-500/20 bg-opacity-90 backdrop-filter backdrop-blur-xs",children:[V.jsx("h3",{className:"text-xl font-bold mb-4",children:"Education"}),V.jsxs("ul",{className:"list-disc list-inside text-gray-300 space-y-2",children:[V.jsxs("li",{children:[V.jsx("strong",{children:" B.S. in Computer Science - "})," University of Massachusetts Boston (2022-2025)"]}),V.jsxs("li",{children:[V.jsx("strong",{children:" Relevant Coursework - "}),"Data Structures & Algorithms | Internetworking | An Introduction to Software Engineering | Operating Systems | Computer Architecture & Organization"]}),V.jsxs("li",{children:[V.jsx("strong",{children:" Organizations & Awards - "}),"MathWorks Scholars, Dean's Academic Recognition List in the Honors College, Chancellor's Scholarship"]})]})]}),V.jsxs("div",{className:"p-6 rounded-xl border-white/10 border hover:-translate-y-1 transition-all bg-gray-500/20 bg-opacity-90 backdrop-filter backdrop-blur-xs",children:[V.jsx("h3",{className:"text-xl font-bold mb-4",children:"Professional Experience"}),V.jsxs("div",{className:"space-y-4 text-gray-300",children:[V.jsxs("div",{children:[V.jsx("h4",{children:V.jsx("strong",{children:" Prospect Research Data Assistant at UMass Boston (Feb 2023 - Present) "})}),V.jsx("p",{children:" Conducted data analysis on individuals and corporations to identify donors and prospects. "})]}),V.jsxs("div",{children:[V.jsx("h4",{children:V.jsx("strong",{children:" Biocompatibility & Toxicology Researcher (Feb 2021 - May 2021) "})}),V.jsx("p",{children:" Developed and refined a database to record safety on medical devices. "})]})]})]})]})]})})})},gle=()=>V.jsx("section",{id:"projects",className:"min-h-screen flex items-center justify-center py-20",children:V.jsx(E1,{children:V.jsxs("div",{className:"max-w-5xl mx-auto px-4",children:[V.jsx("h2",{className:"text-3xl font-bold mb-8 bg-gradient-to-r from-blue-500 to-green-500 bg-clip-text text-transparent text-center",children:" Featured Projects "}),V.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[V.jsxs("div",{className:"p-6 rounded-xl border border-white/10 hover:-translate-y-1 hover:border-blue-500/30 hover:shadow-[0_2px_8px_rgba(59, 130, 246, 0.2)] transition bg-gray-500/20 bg-opacity-90 backdrop-filter backdrop-blur-xs",children:[V.jsx("h3",{className:"text-xl font-bold mb-2",children:" Weather Station "}),V.jsx("p",{className:"text-white-400 mb-4",children:"A smart, connected weather station powered by an ESP32 board and various sensors. It collects real-time environmental data, sends it to a dashboard, and uses AI to predict future weather trends based on historical data."}),V.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:["C++","Python","Microsoft Azure","Machine Learning"].map((n,e)=>V.jsx("span",{className:`bg-blue-500/10 text-blue-500 py-1 px-3 rounded-full text-sm hover:bg-blue-500/20
                                                          hover:shadow-[0_2px_8px_rgba(59, 130, 246, 0.1)] transition-all`,children:n},e))}),V.jsx("div",{className:"flex justify-between items-center",children:V.jsx("a",{href:"https://github.com/Gro0mp/Weather-Station",className:"text-blue-400 hover:text-blue-300 transition-colors my-4",children:"View Repository"})})]}),V.jsxs("div",{className:"p-6 rounded-xl border border-white/10 hover:-translate-y-1 hover:border-blue-500/30 hover:shadow-[0_2px_8px_rgba(59, 130, 246, 0.2)] transition bg-gray-500/20 bg-opacity-90 backdrop-filter backdrop-blur-xs",children:[V.jsx("h3",{className:"text-xl font-bold mb-2",children:" Game Search Engine "}),V.jsx("p",{className:"text-white-400 mb-4",children:"A Java-based recommendation engine that helps users discover new games based on their Steam library and preferences. The engine uses fuzzy search algorithms and tag-based analysis to provide personalized game recommendations."}),V.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:["Java","Data Analysis","JavaFX","Docker"].map((n,e)=>V.jsx("span",{className:`bg-blue-500/10 text-blue-500 py-1 px-3 rounded-full text-sm hover:bg-blue-500/20
                                                          hover:shadow-[0_2px_8px_rgba(59, 130, 246, 0.1)] transition-all`,children:n},e))}),V.jsx("div",{className:"flex justify-between items-center",children:V.jsx("a",{href:"https://github.com/Gro0mp/GameSearchEngine",className:"text-blue-400 hover:text-blue-300 transition-colors my-4",children:"View Repository"})})]}),V.jsxs("div",{className:"p-6 rounded-xl border border-white/10 hover:-translate-y-1 hover:border-blue-500/30 hover:shadow-[0_2px_8px_rgba(59, 130, 246, 0.2)] transition bg-gray-500/20 bg-opacity-90 backdrop-filter backdrop-blur-xs",children:[V.jsx("h3",{className:"text-xl font-bold mb-2",children:" Hearts of Iron IV Utilities "}),V.jsx("p",{className:"text-white-400 mb-4",children:"A Java-based recommendation engine that helps users discover new games based on their Steam library and preferences. The engine uses fuzzy search algorithms and tag-based analysis to provide personalized game recommendations."}),V.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:["Java","Data Analysis","JavaFX","Docker"].map((n,e)=>V.jsx("span",{className:`bg-blue-500/10 text-blue-500 py-1 px-3 rounded-full text-sm hover:bg-blue-500/20
                                                          hover:shadow-[0_2px_8px_rgba(59, 130, 246, 0.1)] transition-all`,children:n},e))}),V.jsx("div",{className:"flex justify-between items-center",children:V.jsx("a",{href:"https://github.com/Gro0mp/HOIIVUtils",className:"text-blue-400 hover:text-blue-300 transition-colors my-4",children:"View Repository"})})]}),V.jsxs("div",{className:"p-6 rounded-xl border border-white/10 hover:-translate-y-1 hover:border-blue-500/30 hover:shadow-[0_2px_8px_rgba(59, 130, 246, 0.2)] transition bg-gray-500/20 bg-opacity-90 backdrop-filter backdrop-blur-xs",children:[V.jsx("h3",{className:"text-xl font-bold mb-2",children:" Interactive Virtual Assistant "}),V.jsx("p",{className:"text-white-400 mb-4",children:"A Java-based recommendation engine that helps users discover new games based on their Steam library and preferences. The engine uses fuzzy search algorithms and tag-based analysis to provide personalized game recommendations."}),V.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:["Java","Spring Boot","React","Vite","Javascript","Docker"].map((n,e)=>V.jsx("span",{className:`bg-blue-500/10 text-blue-500 py-1 px-3 rounded-full text-sm hover:bg-blue-500/20
                                                          hover:shadow-[0_2px_8px_rgba(59, 130, 246, 0.1)] transition-all`,children:n},e))}),V.jsx("div",{className:"flex justify-between items-center",children:V.jsx("a",{href:"https://github.com/Gro0mp/DennisWebsite/tree/main/src/InteractiveVirtualAssistant",className:"text-blue-400 hover:text-blue-300 transition-colors my-4",children:"View Repository"})})]})]})]})})}),NC={_origin:"https://api.emailjs.com"},yle=(n,e="https://api.emailjs.com")=>{NC._userID=n,NC._origin=e},Rq=(n,e,t)=>{if(!n)throw"The user ID is required. Visit https://dashboard.emailjs.com/admin/integration";if(!e)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class yH{constructor(e){this.status=e.status,this.text=e.responseText}}const Nq=(n,e,t={})=>new Promise((r,i)=>{const s=new XMLHttpRequest;s.addEventListener("load",({target:a})=>{const o=new yH(a);o.status===200||o.text==="OK"?r(o):i(o)}),s.addEventListener("error",({target:a})=>{i(new yH(a))}),s.open("POST",NC._origin+n,!0),Object.keys(t).forEach(a=>{s.setRequestHeader(a,t[a])}),s.send(e)}),vle=(n,e,t,r)=>{const i=r||NC._userID;return Rq(i,n,e),Nq("/api/v1.0/email/send",JSON.stringify({lib_version:"3.2.0",user_id:i,service_id:n,template_id:e,template_params:t}),{"Content-type":"application/json"})},ble=n=>{let e;if(typeof n=="string"?e=document.querySelector(n):e=n,!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return e},xle=(n,e,t,r)=>{const i=r||NC._userID,s=ble(t);Rq(i,n,e);const a=new FormData(s);return a.append("lib_version","3.2.0"),a.append("service_id",n),a.append("template_id",e),a.append("user_id",i),Nq("/api/v1.0/email/send-form",a)},Sle={init:yle,send:vle,sendForm:xle},wle=()=>{const[n,e]=F.useState({name:"",email:"",message:""}),t=r=>{r.preventDefault(),Sle.sendForm("service_nbmyx6d","template_10zndbn",r.target,"wESNT5IROq61fZ-In").then(i=>{alert("Message Sent Successfully"),e({name:"",email:"",message:""})}).catch(()=>{alert("Message Error")})};return V.jsx("section",{id:"contact",className:"min-h-screen flex items-center justify-center py-20",children:V.jsx(E1,{children:V.jsxs("div",{className:"px-4 w-150",children:[V.jsx("h2",{className:"text-3xl font-bold mb-8 bg-gradient-to-r from-blue-500 to-green-500 bg-clip-text text-transparent text-center",children:"Get In Touch!"}),V.jsxs("form",{className:"space-y-6",onSubmit:t,children:[V.jsx("div",{className:"relative",children:V.jsx("input",{type:"text",id:"name",name:"name",required:!0,value:n.name,className:"w-full bg-white/5 border border-white/10 rounded px-4 py-3 text-white transition focus:outline-none focus:border-blue-500 focus:bg-blue-500/5",placeholder:"Name...",onChange:r=>e({...n,name:r.target.value})})}),V.jsx("div",{className:"relative",children:V.jsx("input",{type:"email",id:"email",name:"email",required:!0,value:n.email,className:"w-full bg-white/5 border border-white/10 rounded px-4 py-3 text-white transition focus:outline-none focus:border-blue-500 focus:bg-blue-500/5",placeholder:"example@gmail.com",onChange:r=>e({...n,email:r.target.value})})}),V.jsx("div",{className:"relative",children:V.jsx("textarea",{id:"message",name:"message",rows:5,value:n.message,className:"w-full bg-white/5 border border-white/10 rounded px-4 py-3 text-white transition focus:outline-none focus:border-blue-500 focus:bg-blue-500/5",placeholder:"Message...",onChange:r=>e({...n,message:r.target.value})})}),V.jsx("button",{type:"submit",className:"w-full bg-blue-500 text-white py-3 px-6 rounded font-medium transition relative overflow-hidden hover:-translate-y-0.5 hover:shadow-[0_0_15px_rgba(59, 130, 246, 0.4)] hover:bg-blue-500/10] cursor-pointer",children:"Send Message"})]})]})})})},Cle=()=>V.jsx("section",{id:"work",className:"min-h-screen flex items-center justify-center py-20",children:V.jsx(E1,{children:V.jsxs("div",{className:"max-w-5xl mx-auto px-4",children:[V.jsx("h2",{className:"text-3xl font-bold mb-8 bg-gradient-to-r from-blue-500 to-green-500 bg-clip-text text-transparent text-center",children:" Work Experience "}),V.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[V.jsxs("div",{className:"p-6 rounded-xl border border-white/10 hover:-translate-y-1 hover:border-blue-500/30 hover:shadow-[0_2px_8px_rgba(59, 130, 246, 0.2)] transition bg-gray-500/20 bg-opacity-90 backdrop-filter backdrop-blur-xs",children:[V.jsx("h3",{className:"text-xl font-bold mb-2",children:" Prospect Research Data Assistant "}),V.jsx("p",{className:"text-white-400 mb-4",children:V.jsxs("ul",{className:"list-disc list-inside",children:[V.jsx("li",{children:"Conducted in-depth research on individuals, foundations, and corporations to identify potential donors and prospects"}),V.jsx("li",{children:"Analyzed and interpreted data to prepare reports on donor giving patterns and interests"}),V.jsx("li",{children:"Maintained accurate and up-to-date donor and prospect information in our advance database."})]})}),V.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:["Data Analysis","Data Management","MySQL","Excel"].map((n,e)=>V.jsx("span",{className:`bg-blue-500/10 text-blue-500 py-1 px-3 rounded-full text-sm hover:bg-blue-500/20
                                                          hover:shadow-[0_2px_8px_rgba(59, 130, 246, 0.1)] transition-all`,children:n},e))})]}),V.jsxs("div",{className:"p-6 rounded-xl border border-white/10 hover:-translate-y-1 hover:border-blue-500/30 hover:shadow-[0_2px_8px_rgba(59, 130, 246, 0.2)] transition bg-gray-500/20 bg-opacity-90 backdrop-filter backdrop-blur-xs",children:[V.jsx("h3",{className:"text-xl font-bold mb-2",children:" Biocompatibility & Toxicology Research Intern "}),V.jsx("p",{className:"text-white-400 mb-4",children:V.jsxs("ul",{className:"list-disc list-inside",children:[V.jsx("li",{children:"Discussed with managers at Johnson & Johnson on how to refine the database to be increasingly efficient and improve user experience."}),V.jsx("li",{children:"Scanned experimental documentation containing information under which medical tools are tested in."}),V.jsx("li",{children:"Efficiently and properly recorded the data stored in the medical device documents. And ensure that it is understandable to future employees at Johnson & Johnson."})]})}),V.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:["Data Analysis","Data Management","MySQL","Excel"].map((n,e)=>V.jsx("span",{className:`bg-blue-500/10 text-blue-500 py-1 px-3 rounded-full text-sm hover:bg-blue-500/20
                                                          hover:shadow-[0_2px_8px_rgba(59, 130, 246, 0.1)] transition-all`,children:n},e))})]})]})]})})});var Hk={exports:{}},op={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vH;function _le(){return vH||(vH=1,op.ConcurrentRoot=1,op.ContinuousEventPriority=8,op.DefaultEventPriority=32,op.DiscreteEventPriority=2,op.IdleEventPriority=268435456,op.LegacyRoot=0,op.NoEventPriority=0),op}var bH;function Ele(){return bH||(bH=1,Hk.exports=_le()),Hk.exports}var uM=Ele();/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const p_="179",Ale={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Tle={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Iq=0,T$=1,Dq=2,Mle=3,kq=0,zN=1,cC=2,Vd=3,vh=0,Ao=1,$u=2,uh=0,Uy=1,M$=2,R$=3,N$=4,Oq=5,ng=100,Bq=101,$q=102,Lq=103,Fq=104,Pq=200,Uq=201,zq=202,Hq=203,zM=204,HM=205,Vq=206,Gq=207,Wq=208,jq=209,qq=210,Xq=211,Kq=212,Yq=213,Jq=214,VM=0,GM=1,WM=2,Yy=3,jM=4,qM=5,XM=6,KM=7,m_=0,Zq=1,Qq=2,dh=0,eX=1,tX=2,nX=3,QF=4,rX=5,iX=6,sX=7,I$="attached",aX="detached",bg=300,bh=301,xg=302,Xx=303,IC=304,A1=306,Sg=1e3,oa=1001,Kx=1002,no=1003,HN=1004,Rle=1004,Ty=1005,Nle=1005,ai=1006,Rx=1007,Ile=1007,Pu=1008,D$=1008,Pl=1009,VN=1010,GN=1011,Yx=1012,g_=1013,xh=1014,ns=1015,Ws=1016,WN=1017,jN=1018,Jx=1020,eP=35902,tP=1021,nP=1022,la=1023,Zx=1026,Qx=1027,y_=1028,v_=1029,rP=1030,qN=1031,Dle=1032,XN=1033,uC=33776,dC=33777,fC=33778,hC=33779,YM=35840,JM=35841,ZM=35842,QM=35843,eR=36196,tR=37492,nR=37496,rR=37808,iR=37809,sR=37810,aR=37811,oR=37812,lR=37813,cR=37814,uR=37815,dR=37816,fR=37817,hR=37818,pR=37819,mR=37820,gR=37821,pC=36492,yR=36494,vR=36495,iP=36283,bR=36284,xR=36285,SR=36286,sP=2200,aP=2201,oX=2202,e1=2300,t1=2301,dM=2302,My=2400,Ry=2401,DC=2402,KN=2500,oP=2501,lX=0,lP=1,wR=2,cX=3200,uX=3201,kle=3202,Ole=3203,Lg=0,dX=1,_p="",_o="srgb",qu="srgb-linear",kC="linear",$i="srgb",Ble=0,py=7680,$le=7681,Lle=7682,Fle=7683,Ple=34055,Ule=34056,zle=5386,Hle=512,Vle=513,Gle=514,Wle=515,jle=516,qle=517,Xle=518,k$=519,fX=512,hX=513,pX=514,cP=515,mX=516,gX=517,yX=518,vX=519,OC=35044,Kle=35048,Yle=35040,Jle=35045,Zle=35049,Qle=35041,ece=35046,tce=35050,nce=35042,rce="100",O$="300 es",Jc=2e3,n1=2001,ice={COMPUTE:"compute",RENDER:"render"},sce={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},ace={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};class Rh{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){const r=this._listeners;return r===void 0?!1:r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){const r=this._listeners;if(r===void 0)return;const i=r[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const r=t[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,a=i.length;s<a;s++)i[s].call(this,e);e.target=null}}}const jo=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let xH=1234567;const zy=Math.PI/180,r1=180/Math.PI;function eu(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(jo[n&255]+jo[n>>8&255]+jo[n>>16&255]+jo[n>>24&255]+"-"+jo[e&255]+jo[e>>8&255]+"-"+jo[e>>16&15|64]+jo[e>>24&255]+"-"+jo[t&63|128]+jo[t>>8&255]+"-"+jo[t>>16&255]+jo[t>>24&255]+jo[r&255]+jo[r>>8&255]+jo[r>>16&255]+jo[r>>24&255]).toLowerCase()}function nr(n,e,t){return Math.max(e,Math.min(t,n))}function uP(n,e){return(n%e+e)%e}function oce(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function lce(n,e,t){return n!==e?(t-n)/(e-n):0}function mC(n,e,t){return(1-t)*n+t*e}function cce(n,e,t,r){return mC(n,e,1-Math.exp(-t*r))}function uce(n,e=1){return e-Math.abs(uP(n,e*2)-e)}function dce(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function fce(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function hce(n,e){return n+Math.floor(Math.random()*(e-n+1))}function pce(n,e){return n+Math.random()*(e-n)}function mce(n){return n*(.5-Math.random())}function gce(n){n!==void 0&&(xH=n);let e=xH+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function yce(n){return n*zy}function vce(n){return n*r1}function bce(n){return(n&n-1)===0&&n!==0}function xce(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Sce(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function wce(n,e,t,r,i){const s=Math.cos,a=Math.sin,o=s(t/2),l=a(t/2),c=s((e+r)/2),u=a((e+r)/2),d=s((e-r)/2),h=a((e-r)/2),p=s((r-e)/2),g=a((r-e)/2);switch(i){case"XYX":n.set(o*u,l*d,l*h,o*c);break;case"YZY":n.set(l*h,o*u,l*d,o*c);break;case"ZXZ":n.set(l*d,l*h,o*u,o*c);break;case"XZX":n.set(o*u,l*g,l*p,o*c);break;case"YXY":n.set(l*p,o*u,l*g,o*c);break;case"ZYZ":n.set(l*g,l*p,o*u,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Bl(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Cr(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const dP={DEG2RAD:zy,RAD2DEG:r1,generateUUID:eu,clamp:nr,euclideanModulo:uP,mapLinear:oce,inverseLerp:lce,lerp:mC,damp:cce,pingpong:uce,smoothstep:dce,smootherstep:fce,randInt:hce,randFloat:pce,randFloatSpread:mce,seededRandom:gce,degToRad:yce,radToDeg:vce,isPowerOfTwo:bce,ceilPowerOfTwo:xce,floorPowerOfTwo:Sce,setQuaternionFromProperEuler:wce,normalize:Cr,denormalize:Bl};class Lt{constructor(e=0,t=0){Lt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=nr(this.x,e.x,t.x),this.y=nr(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=nr(this.x,e,t),this.y=nr(this.y,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(nr(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(nr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*r-a*i+e.x,this.y=s*i+a*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class ua{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,a,o){let l=r[i+0],c=r[i+1],u=r[i+2],d=r[i+3];const h=s[a+0],p=s[a+1],g=s[a+2],v=s[a+3];if(o===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d;return}if(o===1){e[t+0]=h,e[t+1]=p,e[t+2]=g,e[t+3]=v;return}if(d!==v||l!==h||c!==p||u!==g){let b=1-o;const x=l*h+c*p+u*g+d*v,C=x>=0?1:-1,E=1-x*x;if(E>Number.EPSILON){const M=Math.sqrt(E),R=Math.atan2(M,x*C);b=Math.sin(b*R)/M,o=Math.sin(o*R)/M}const _=o*C;if(l=l*b+h*_,c=c*b+p*_,u=u*b+g*_,d=d*b+v*_,b===1-o){const M=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=M,c*=M,u*=M,d*=M}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,r,i,s,a){const o=r[i],l=r[i+1],c=r[i+2],u=r[i+3],d=s[a],h=s[a+1],p=s[a+2],g=s[a+3];return e[t]=o*g+u*d+l*p-c*h,e[t+1]=l*g+u*h+c*d-o*p,e[t+2]=c*g+u*p+o*h-l*d,e[t+3]=u*g-o*d-l*h-c*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const r=e._x,i=e._y,s=e._z,a=e._order,o=Math.cos,l=Math.sin,c=o(r/2),u=o(i/2),d=o(s/2),h=l(r/2),p=l(i/2),g=l(s/2);switch(a){case"XYZ":this._x=h*u*d+c*p*g,this._y=c*p*d-h*u*g,this._z=c*u*g+h*p*d,this._w=c*u*d-h*p*g;break;case"YXZ":this._x=h*u*d+c*p*g,this._y=c*p*d-h*u*g,this._z=c*u*g-h*p*d,this._w=c*u*d+h*p*g;break;case"ZXY":this._x=h*u*d-c*p*g,this._y=c*p*d+h*u*g,this._z=c*u*g+h*p*d,this._w=c*u*d-h*p*g;break;case"ZYX":this._x=h*u*d-c*p*g,this._y=c*p*d+h*u*g,this._z=c*u*g-h*p*d,this._w=c*u*d+h*p*g;break;case"YZX":this._x=h*u*d+c*p*g,this._y=c*p*d+h*u*g,this._z=c*u*g-h*p*d,this._w=c*u*d-h*p*g;break;case"XZY":this._x=h*u*d-c*p*g,this._y=c*p*d-h*u*g,this._z=c*u*g+h*p*d,this._w=c*u*d+h*p*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],a=t[1],o=t[5],l=t[9],c=t[2],u=t[6],d=t[10],h=r+o+d;if(h>0){const p=.5/Math.sqrt(h+1);this._w=.25/p,this._x=(u-l)*p,this._y=(s-c)*p,this._z=(a-i)*p}else if(r>o&&r>d){const p=2*Math.sqrt(1+r-o-d);this._w=(u-l)/p,this._x=.25*p,this._y=(i+a)/p,this._z=(s+c)/p}else if(o>d){const p=2*Math.sqrt(1+o-r-d);this._w=(s-c)/p,this._x=(i+a)/p,this._y=.25*p,this._z=(l+u)/p}else{const p=2*Math.sqrt(1+d-r-o);this._w=(a-i)/p,this._x=(s+c)/p,this._y=(l+u)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<1e-8?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(nr(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,a=e._w,o=t._x,l=t._y,c=t._z,u=t._w;return this._x=r*u+a*o+i*c-s*l,this._y=i*u+a*l+s*o-r*c,this._z=s*u+a*c+r*l-i*o,this._w=a*u-r*o-i*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,a=this._w;let o=a*e._w+r*e._x+i*e._y+s*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=r,this._y=i,this._z=s,this;const l=1-o*o;if(l<=Number.EPSILON){const p=1-t;return this._w=p*a+t*this._w,this._x=p*r+t*this._x,this._y=p*i+t*this._y,this._z=p*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,o),d=Math.sin((1-t)*u)/c,h=Math.sin(t*u)/c;return this._w=a*d+this._w*h,this._x=r*d+this._x*h,this._y=i*d+this._y*h,this._z=s*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),s=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class be{constructor(e=0,t=0,r=0){be.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(SH.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(SH.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,a=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*a,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*a,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*a,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,a=e.y,o=e.z,l=e.w,c=2*(a*i-o*r),u=2*(o*t-s*i),d=2*(s*r-a*t);return this.x=t+l*c+a*d-o*u,this.y=r+l*u+o*c-s*d,this.z=i+l*d+s*u-a*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=nr(this.x,e.x,t.x),this.y=nr(this.y,e.y,t.y),this.z=nr(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=nr(this.x,e,t),this.y=nr(this.y,e,t),this.z=nr(this.z,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(nr(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,a=t.x,o=t.y,l=t.z;return this.x=i*l-s*o,this.y=s*a-r*l,this.z=r*o-i*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return Vk.copy(this).projectOnVector(e),this.sub(Vk)}reflect(e){return this.sub(Vk.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(nr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,r=Math.sqrt(1-t*t);return this.x=r*Math.cos(e),this.y=t,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Vk=new be,SH=new ua;class xr{constructor(e,t,r,i,s,a,o,l,c){xr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,a,o,l,c)}set(e,t,r,i,s,a,o,l,c){const u=this.elements;return u[0]=e,u[1]=i,u[2]=o,u[3]=t,u[4]=s,u[5]=l,u[6]=r,u[7]=a,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,a=r[0],o=r[3],l=r[6],c=r[1],u=r[4],d=r[7],h=r[2],p=r[5],g=r[8],v=i[0],b=i[3],x=i[6],C=i[1],E=i[4],_=i[7],M=i[2],R=i[5],L=i[8];return s[0]=a*v+o*C+l*M,s[3]=a*b+o*E+l*R,s[6]=a*x+o*_+l*L,s[1]=c*v+u*C+d*M,s[4]=c*b+u*E+d*R,s[7]=c*x+u*_+d*L,s[2]=h*v+p*C+g*M,s[5]=h*b+p*E+g*R,s[8]=h*x+p*_+g*L,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8];return t*a*u-t*o*c-r*s*u+r*o*l+i*s*c-i*a*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],d=u*a-o*c,h=o*l-u*s,p=c*s-a*l,g=t*d+r*h+i*p;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/g;return e[0]=d*v,e[1]=(i*c-u*r)*v,e[2]=(o*r-i*a)*v,e[3]=h*v,e[4]=(u*t-i*l)*v,e[5]=(i*s-o*t)*v,e[6]=p*v,e[7]=(r*l-c*t)*v,e[8]=(a*t-r*s)*v,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,a,o){const l=Math.cos(s),c=Math.sin(s);return this.set(r*l,r*c,-r*(l*a+c*o)+a+e,-i*c,i*l,-i*(-c*a+l*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(Gk.makeScale(e,t)),this}rotate(e){return this.premultiply(Gk.makeRotation(-e)),this}translate(e,t){return this.premultiply(Gk.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Gk=new xr;function bX(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const Cce={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Ax(n,e){return new Cce[n](e)}function BC(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function xX(){const n=BC("canvas");return n.style.display="block",n}const wH={};function Nx(n){n in wH||(wH[n]=!0,console.warn(n))}function _ce(n,e,t){return new Promise(function(r,i){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:i();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:r()}}setTimeout(s,t)})}const CH=new xr().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),_H=new xr().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Ece(){const n={enabled:!0,workingColorSpace:qu,spaces:{},convert:function(i,s,a){return this.enabled===!1||s===a||!s||!a||(this.spaces[s].transfer===$i&&(i.r=Rp(i.r),i.g=Rp(i.g),i.b=Rp(i.b)),this.spaces[s].primaries!==this.spaces[a].primaries&&(i.applyMatrix3(this.spaces[s].toXYZ),i.applyMatrix3(this.spaces[a].fromXYZ)),this.spaces[a].transfer===$i&&(i.r=Ix(i.r),i.g=Ix(i.g),i.b=Ix(i.b))),i},workingToColorSpace:function(i,s){return this.convert(i,this.workingColorSpace,s)},colorSpaceToWorking:function(i,s){return this.convert(i,s,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===_p?kC:this.spaces[i].transfer},getLuminanceCoefficients:function(i,s=this.workingColorSpace){return i.fromArray(this.spaces[s].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,s,a){return i.copy(this.spaces[s].toXYZ).multiply(this.spaces[a].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(i,s){return Nx("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),n.workingToColorSpace(i,s)},toWorkingColorSpace:function(i,s){return Nx("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),n.colorSpaceToWorking(i,s)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],r=[.3127,.329];return n.define({[qu]:{primaries:e,whitePoint:r,transfer:kC,toXYZ:CH,fromXYZ:_H,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:_o},outputColorSpaceConfig:{drawingBufferColorSpace:_o}},[_o]:{primaries:e,whitePoint:r,transfer:$i,toXYZ:CH,fromXYZ:_H,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:_o}}}),n}const Qr=Ece();function Rp(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Ix(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Lb;class SX{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let r;if(e instanceof HTMLCanvasElement)r=e;else{Lb===void 0&&(Lb=BC("canvas")),Lb.width=e.width,Lb.height=e.height;const i=Lb.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),r=Lb}return r.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=BC("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let a=0;a<s.length;a++)s[a]=Rp(s[a]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(Rp(t[r]/255)*255):t[r]=Rp(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Ace=0;class ag{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Ace++}),this.uuid=eu(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let a=0,o=i.length;a<o;a++)i[a].isDataTexture?s.push(Wk(i[a].image)):s.push(Wk(i[a]))}else s=Wk(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function Wk(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?SX.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Tce=0;const jk=new be;class Ti extends Rh{constructor(e=Ti.DEFAULT_IMAGE,t=Ti.DEFAULT_MAPPING,r=oa,i=oa,s=ai,a=Pu,o=la,l=Pl,c=Ti.DEFAULT_ANISOTROPY,u=_p){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Tce++}),this.uuid=eu(),this.name="",this.source=new ag(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=a,this.anisotropy=c,this.format=o,this.internalFormat=null,this.type=l,this.offset=new Lt(0,0),this.repeat=new Lt(1,1),this.center=new Lt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new xr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(jk).x}get height(){return this.source.getSize(jk).y}get depth(){return this.source.getSize(jk).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Texture.setValues(): property '${t}' does not exist.`);continue}i&&r&&i.isVector2&&r.isVector2||i&&r&&i.isVector3&&r.isVector3||i&&r&&i.isMatrix3&&r.isMatrix3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==bg)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Sg:e.x=e.x-Math.floor(e.x);break;case oa:e.x=e.x<0?0:1;break;case Kx:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Sg:e.y=e.y-Math.floor(e.y);break;case oa:e.y=e.y<0?0:1;break;case Kx:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Ti.DEFAULT_IMAGE=null;Ti.DEFAULT_MAPPING=bg;Ti.DEFAULT_ANISOTROPY=1;class Hr{constructor(e=0,t=0,r=0,i=1){Hr.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*r+a[8]*i+a[12]*s,this.y=a[1]*t+a[5]*r+a[9]*i+a[13]*s,this.z=a[2]*t+a[6]*r+a[10]*i+a[14]*s,this.w=a[3]*t+a[7]*r+a[11]*i+a[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const l=e.elements,c=l[0],u=l[4],d=l[8],h=l[1],p=l[5],g=l[9],v=l[2],b=l[6],x=l[10];if(Math.abs(u-h)<.01&&Math.abs(d-v)<.01&&Math.abs(g-b)<.01){if(Math.abs(u+h)<.1&&Math.abs(d+v)<.1&&Math.abs(g+b)<.1&&Math.abs(c+p+x-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const E=(c+1)/2,_=(p+1)/2,M=(x+1)/2,R=(u+h)/4,L=(d+v)/4,$=(g+b)/4;return E>_&&E>M?E<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(E),i=R/r,s=L/r):_>M?_<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(_),r=R/i,s=$/i):M<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(M),r=L/s,i=$/s),this.set(r,i,s,t),this}let C=Math.sqrt((b-g)*(b-g)+(d-v)*(d-v)+(h-u)*(h-u));return Math.abs(C)<.001&&(C=1),this.x=(b-g)/C,this.y=(d-v)/C,this.z=(h-u)/C,this.w=Math.acos((c+p+x-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=nr(this.x,e.x,t.x),this.y=nr(this.y,e.y,t.y),this.z=nr(this.z,e.z,t.z),this.w=nr(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=nr(this.x,e,t),this.y=nr(this.y,e,t),this.z=nr(this.z,e,t),this.w=nr(this.w,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(nr(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class fP extends Rh{constructor(e=1,t=1,r={}){super(),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:ai,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},r),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=r.depth,this.scissor=new Hr(0,0,e,t),this.scissorTest=!1,this.viewport=new Hr(0,0,e,t);const i={width:e,height:t,depth:r.depth},s=new Ti(i);this.textures=[];const a=r.count;for(let o=0;o<a;o++)this.textures[o]=s.clone(),this.textures[o].isRenderTargetTexture=!0,this.textures[o].renderTarget=this;this._setTextureOptions(r),this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=r.depthTexture,this.samples=r.samples,this.multiview=r.multiview}_setTextureOptions(e={}){const t={minFilter:ai,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let r=0;r<this.textures.length;r++)this.textures[r].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.textures.length;i<s;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=r,this.textures[i].isArrayTexture=this.textures[i].image.depth>1;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,r=e.textures.length;t<r;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const i=Object.assign({},e.textures[t].image);this.textures[t].source=new ag(i)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class wc extends fP{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}}class YN extends Ti{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=no,this.minFilter=no,this.wrapR=oa,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Mce extends wc{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new YN(null,e,t,r),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class JN extends Ti{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=no,this.minFilter=no,this.wrapR=oa,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Rce extends wc{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new JN(null,e,t,r),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class To{constructor(e=new be(1/0,1/0,1/0),t=new be(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(kd.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(kd.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=kd.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let a=0,o=s.count;a<o;a++)e.isMesh===!0?e.getVertexPosition(a,kd):kd.fromBufferAttribute(s,a),kd.applyMatrix4(e.matrixWorld),this.expandByPoint(kd);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),BA.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),BA.copy(r.boundingBox)),BA.applyMatrix4(e.matrixWorld),this.union(BA)}const i=e.children;for(let s=0,a=i.length;s<a;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,kd),kd.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(fw),$A.subVectors(this.max,fw),Fb.subVectors(e.a,fw),Pb.subVectors(e.b,fw),Ub.subVectors(e.c,fw),Gm.subVectors(Pb,Fb),Wm.subVectors(Ub,Pb),j0.subVectors(Fb,Ub);let t=[0,-Gm.z,Gm.y,0,-Wm.z,Wm.y,0,-j0.z,j0.y,Gm.z,0,-Gm.x,Wm.z,0,-Wm.x,j0.z,0,-j0.x,-Gm.y,Gm.x,0,-Wm.y,Wm.x,0,-j0.y,j0.x,0];return!qk(t,Fb,Pb,Ub,$A)||(t=[1,0,0,0,1,0,0,0,1],!qk(t,Fb,Pb,Ub,$A))?!1:(LA.crossVectors(Gm,Wm),t=[LA.x,LA.y,LA.z],qk(t,Fb,Pb,Ub,$A))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,kd).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(kd).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(lp[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),lp[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),lp[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),lp[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),lp[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),lp[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),lp[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),lp[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(lp),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const lp=[new be,new be,new be,new be,new be,new be,new be,new be],kd=new be,BA=new To,Fb=new be,Pb=new be,Ub=new be,Gm=new be,Wm=new be,j0=new be,fw=new be,$A=new be,LA=new be,q0=new be;function qk(n,e,t,r,i){for(let s=0,a=n.length-3;s<=a;s+=3){q0.fromArray(n,s);const o=i.x*Math.abs(q0.x)+i.y*Math.abs(q0.y)+i.z*Math.abs(q0.z),l=e.dot(q0),c=t.dot(q0),u=r.dot(q0);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>o)return!1}return!0}const Nce=new To,hw=new be,Xk=new be;let ro=class{constructor(e=new be,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):Nce.setFromPoints(e).getCenter(r);let i=0;for(let s=0,a=e.length;s<a;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;hw.subVectors(e,this.center);const t=hw.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(hw,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Xk.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(hw.copy(e.center).add(Xk)),this.expandByPoint(hw.copy(e.center).sub(Xk))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}};const cp=new be,Kk=new be,FA=new be,jm=new be,Yk=new be,PA=new be,Jk=new be;class T1{constructor(e=new be,t=new be(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,cp)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=cp.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(cp.copy(this.origin).addScaledVector(this.direction,t),cp.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){Kk.copy(e).add(t).multiplyScalar(.5),FA.copy(t).sub(e).normalize(),jm.copy(this.origin).sub(Kk);const s=e.distanceTo(t)*.5,a=-this.direction.dot(FA),o=jm.dot(this.direction),l=-jm.dot(FA),c=jm.lengthSq(),u=Math.abs(1-a*a);let d,h,p,g;if(u>0)if(d=a*l-o,h=a*o-l,g=s*u,d>=0)if(h>=-g)if(h<=g){const v=1/u;d*=v,h*=v,p=d*(d+a*h+2*o)+h*(a*d+h+2*l)+c}else h=s,d=Math.max(0,-(a*h+o)),p=-d*d+h*(h+2*l)+c;else h=-s,d=Math.max(0,-(a*h+o)),p=-d*d+h*(h+2*l)+c;else h<=-g?(d=Math.max(0,-(-a*s+o)),h=d>0?-s:Math.min(Math.max(-s,-l),s),p=-d*d+h*(h+2*l)+c):h<=g?(d=0,h=Math.min(Math.max(-s,-l),s),p=h*(h+2*l)+c):(d=Math.max(0,-(a*s+o)),h=d>0?s:Math.min(Math.max(-s,-l),s),p=-d*d+h*(h+2*l)+c);else h=a>0?-s:s,d=Math.max(0,-(a*h+o)),p=-d*d+h*(h+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,d),i&&i.copy(Kk).addScaledVector(FA,h),p}intersectSphere(e,t){cp.subVectors(e.center,this.origin);const r=cp.dot(this.direction),i=cp.dot(cp)-r*r,s=e.radius*e.radius;if(i>s)return null;const a=Math.sqrt(s-i),o=r-a,l=r+a;return l<0?null:o<0?this.at(l,t):this.at(o,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,a,o,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,h=this.origin;return c>=0?(r=(e.min.x-h.x)*c,i=(e.max.x-h.x)*c):(r=(e.max.x-h.x)*c,i=(e.min.x-h.x)*c),u>=0?(s=(e.min.y-h.y)*u,a=(e.max.y-h.y)*u):(s=(e.max.y-h.y)*u,a=(e.min.y-h.y)*u),r>a||s>i||((s>r||isNaN(r))&&(r=s),(a<i||isNaN(i))&&(i=a),d>=0?(o=(e.min.z-h.z)*d,l=(e.max.z-h.z)*d):(o=(e.max.z-h.z)*d,l=(e.min.z-h.z)*d),r>l||o>i)||((o>r||r!==r)&&(r=o),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,cp)!==null}intersectTriangle(e,t,r,i,s){Yk.subVectors(t,e),PA.subVectors(r,e),Jk.crossVectors(Yk,PA);let a=this.direction.dot(Jk),o;if(a>0){if(i)return null;o=1}else if(a<0)o=-1,a=-a;else return null;jm.subVectors(this.origin,e);const l=o*this.direction.dot(PA.crossVectors(jm,PA));if(l<0)return null;const c=o*this.direction.dot(Yk.cross(jm));if(c<0||l+c>a)return null;const u=-o*jm.dot(Jk);return u<0?null:this.at(u/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class zn{constructor(e,t,r,i,s,a,o,l,c,u,d,h,p,g,v,b){zn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,a,o,l,c,u,d,h,p,g,v,b)}set(e,t,r,i,s,a,o,l,c,u,d,h,p,g,v,b){const x=this.elements;return x[0]=e,x[4]=t,x[8]=r,x[12]=i,x[1]=s,x[5]=a,x[9]=o,x[13]=l,x[2]=c,x[6]=u,x[10]=d,x[14]=h,x[3]=p,x[7]=g,x[11]=v,x[15]=b,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new zn().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/zb.setFromMatrixColumn(e,0).length(),s=1/zb.setFromMatrixColumn(e,1).length(),a=1/zb.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*a,t[9]=r[9]*a,t[10]=r[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,a=Math.cos(r),o=Math.sin(r),l=Math.cos(i),c=Math.sin(i),u=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const h=a*u,p=a*d,g=o*u,v=o*d;t[0]=l*u,t[4]=-l*d,t[8]=c,t[1]=p+g*c,t[5]=h-v*c,t[9]=-o*l,t[2]=v-h*c,t[6]=g+p*c,t[10]=a*l}else if(e.order==="YXZ"){const h=l*u,p=l*d,g=c*u,v=c*d;t[0]=h+v*o,t[4]=g*o-p,t[8]=a*c,t[1]=a*d,t[5]=a*u,t[9]=-o,t[2]=p*o-g,t[6]=v+h*o,t[10]=a*l}else if(e.order==="ZXY"){const h=l*u,p=l*d,g=c*u,v=c*d;t[0]=h-v*o,t[4]=-a*d,t[8]=g+p*o,t[1]=p+g*o,t[5]=a*u,t[9]=v-h*o,t[2]=-a*c,t[6]=o,t[10]=a*l}else if(e.order==="ZYX"){const h=a*u,p=a*d,g=o*u,v=o*d;t[0]=l*u,t[4]=g*c-p,t[8]=h*c+v,t[1]=l*d,t[5]=v*c+h,t[9]=p*c-g,t[2]=-c,t[6]=o*l,t[10]=a*l}else if(e.order==="YZX"){const h=a*l,p=a*c,g=o*l,v=o*c;t[0]=l*u,t[4]=v-h*d,t[8]=g*d+p,t[1]=d,t[5]=a*u,t[9]=-o*u,t[2]=-c*u,t[6]=p*d+g,t[10]=h-v*d}else if(e.order==="XZY"){const h=a*l,p=a*c,g=o*l,v=o*c;t[0]=l*u,t[4]=-d,t[8]=c*u,t[1]=h*d+v,t[5]=a*u,t[9]=p*d-g,t[2]=g*d-p,t[6]=o*u,t[10]=v*d+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Ice,e,Dce)}lookAt(e,t,r){const i=this.elements;return jc.subVectors(e,t),jc.lengthSq()===0&&(jc.z=1),jc.normalize(),qm.crossVectors(r,jc),qm.lengthSq()===0&&(Math.abs(r.z)===1?jc.x+=1e-4:jc.z+=1e-4,jc.normalize(),qm.crossVectors(r,jc)),qm.normalize(),UA.crossVectors(jc,qm),i[0]=qm.x,i[4]=UA.x,i[8]=jc.x,i[1]=qm.y,i[5]=UA.y,i[9]=jc.y,i[2]=qm.z,i[6]=UA.z,i[10]=jc.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,a=r[0],o=r[4],l=r[8],c=r[12],u=r[1],d=r[5],h=r[9],p=r[13],g=r[2],v=r[6],b=r[10],x=r[14],C=r[3],E=r[7],_=r[11],M=r[15],R=i[0],L=i[4],$=i[8],N=i[12],I=i[1],k=i[5],P=i[9],G=i[13],W=i[2],X=i[6],z=i[10],J=i[14],Q=i[3],Y=i[7],q=i[11],te=i[15];return s[0]=a*R+o*I+l*W+c*Q,s[4]=a*L+o*k+l*X+c*Y,s[8]=a*$+o*P+l*z+c*q,s[12]=a*N+o*G+l*J+c*te,s[1]=u*R+d*I+h*W+p*Q,s[5]=u*L+d*k+h*X+p*Y,s[9]=u*$+d*P+h*z+p*q,s[13]=u*N+d*G+h*J+p*te,s[2]=g*R+v*I+b*W+x*Q,s[6]=g*L+v*k+b*X+x*Y,s[10]=g*$+v*P+b*z+x*q,s[14]=g*N+v*G+b*J+x*te,s[3]=C*R+E*I+_*W+M*Q,s[7]=C*L+E*k+_*X+M*Y,s[11]=C*$+E*P+_*z+M*q,s[15]=C*N+E*G+_*J+M*te,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],a=e[1],o=e[5],l=e[9],c=e[13],u=e[2],d=e[6],h=e[10],p=e[14],g=e[3],v=e[7],b=e[11],x=e[15];return g*(+s*l*d-i*c*d-s*o*h+r*c*h+i*o*p-r*l*p)+v*(+t*l*p-t*c*h+s*a*h-i*a*p+i*c*u-s*l*u)+b*(+t*c*d-t*o*p-s*a*d+r*a*p+s*o*u-r*c*u)+x*(-i*o*u-t*l*d+t*o*h+i*a*d-r*a*h+r*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],p=e[11],g=e[12],v=e[13],b=e[14],x=e[15],C=d*b*c-v*h*c+v*l*p-o*b*p-d*l*x+o*h*x,E=g*h*c-u*b*c-g*l*p+a*b*p+u*l*x-a*h*x,_=u*v*c-g*d*c+g*o*p-a*v*p-u*o*x+a*d*x,M=g*d*l-u*v*l-g*o*h+a*v*h+u*o*b-a*d*b,R=t*C+r*E+i*_+s*M;if(R===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const L=1/R;return e[0]=C*L,e[1]=(v*h*s-d*b*s-v*i*p+r*b*p+d*i*x-r*h*x)*L,e[2]=(o*b*s-v*l*s+v*i*c-r*b*c-o*i*x+r*l*x)*L,e[3]=(d*l*s-o*h*s-d*i*c+r*h*c+o*i*p-r*l*p)*L,e[4]=E*L,e[5]=(u*b*s-g*h*s+g*i*p-t*b*p-u*i*x+t*h*x)*L,e[6]=(g*l*s-a*b*s-g*i*c+t*b*c+a*i*x-t*l*x)*L,e[7]=(a*h*s-u*l*s+u*i*c-t*h*c-a*i*p+t*l*p)*L,e[8]=_*L,e[9]=(g*d*s-u*v*s-g*r*p+t*v*p+u*r*x-t*d*x)*L,e[10]=(a*v*s-g*o*s+g*r*c-t*v*c-a*r*x+t*o*x)*L,e[11]=(u*o*s-a*d*s-u*r*c+t*d*c+a*r*p-t*o*p)*L,e[12]=M*L,e[13]=(u*v*i-g*d*i+g*r*h-t*v*h-u*r*b+t*d*b)*L,e[14]=(g*o*i-a*v*i-g*r*l+t*v*l+a*r*b-t*o*b)*L,e[15]=(a*d*i-u*o*i+u*r*l-t*d*l-a*r*h+t*o*h)*L,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,a=e.x,o=e.y,l=e.z,c=s*a,u=s*o;return this.set(c*a+r,c*o-i*l,c*l+i*o,0,c*o+i*l,u*o+r,u*l-i*a,0,c*l-i*o,u*l+i*a,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,a){return this.set(1,r,s,0,e,1,a,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,a=t._y,o=t._z,l=t._w,c=s+s,u=a+a,d=o+o,h=s*c,p=s*u,g=s*d,v=a*u,b=a*d,x=o*d,C=l*c,E=l*u,_=l*d,M=r.x,R=r.y,L=r.z;return i[0]=(1-(v+x))*M,i[1]=(p+_)*M,i[2]=(g-E)*M,i[3]=0,i[4]=(p-_)*R,i[5]=(1-(h+x))*R,i[6]=(b+C)*R,i[7]=0,i[8]=(g+E)*L,i[9]=(b-C)*L,i[10]=(1-(h+v))*L,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=zb.set(i[0],i[1],i[2]).length();const a=zb.set(i[4],i[5],i[6]).length(),o=zb.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],Od.copy(this);const c=1/s,u=1/a,d=1/o;return Od.elements[0]*=c,Od.elements[1]*=c,Od.elements[2]*=c,Od.elements[4]*=u,Od.elements[5]*=u,Od.elements[6]*=u,Od.elements[8]*=d,Od.elements[9]*=d,Od.elements[10]*=d,t.setFromRotationMatrix(Od),r.x=s,r.y=a,r.z=o,this}makePerspective(e,t,r,i,s,a,o=Jc,l=!1){const c=this.elements,u=2*s/(t-e),d=2*s/(r-i),h=(t+e)/(t-e),p=(r+i)/(r-i);let g,v;if(l)g=s/(a-s),v=a*s/(a-s);else if(o===Jc)g=-(a+s)/(a-s),v=-2*a*s/(a-s);else if(o===n1)g=-a/(a-s),v=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return c[0]=u,c[4]=0,c[8]=h,c[12]=0,c[1]=0,c[5]=d,c[9]=p,c[13]=0,c[2]=0,c[6]=0,c[10]=g,c[14]=v,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,t,r,i,s,a,o=Jc,l=!1){const c=this.elements,u=2/(t-e),d=2/(r-i),h=-(t+e)/(t-e),p=-(r+i)/(r-i);let g,v;if(l)g=1/(a-s),v=a/(a-s);else if(o===Jc)g=-2/(a-s),v=-(a+s)/(a-s);else if(o===n1)g=-1/(a-s),v=-s/(a-s);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return c[0]=u,c[4]=0,c[8]=0,c[12]=h,c[1]=0,c[5]=d,c[9]=0,c[13]=p,c[2]=0,c[6]=0,c[10]=g,c[14]=v,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const zb=new be,Od=new zn,Ice=new be(0,0,0),Dce=new be(1,1,1),qm=new be,UA=new be,jc=new be,EH=new zn,AH=new ua;class Cc{constructor(e=0,t=0,r=0,i=Cc.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],a=i[4],o=i[8],l=i[1],c=i[5],u=i[9],d=i[2],h=i[6],p=i[10];switch(t){case"XYZ":this._y=Math.asin(nr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-nr(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(o,p),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(nr(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-d,p),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-nr(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(h,p),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-a,c));break;case"YZX":this._z=Math.asin(nr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(o,p));break;case"XZY":this._z=Math.asin(-nr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-u,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return EH.makeRotationFromQuaternion(e),this.setFromRotationMatrix(EH,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return AH.setFromEuler(this),this.setFromQuaternion(AH,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Cc.DEFAULT_ORDER="XYZ";class i1{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let kce=0;const TH=new be,Hb=new ua,up=new zn,zA=new be,pw=new be,Oce=new be,Bce=new ua,MH=new be(1,0,0),RH=new be(0,1,0),NH=new be(0,0,1),IH={type:"added"},$ce={type:"removed"},Vb={type:"childadded",child:null},Zk={type:"childremoved",child:null};class ei extends Rh{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:kce++}),this.uuid=eu(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ei.DEFAULT_UP.clone();const e=new be,t=new Cc,r=new ua,i=new be(1,1,1);function s(){r.setFromEuler(t,!1)}function a(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new zn},normalMatrix:{value:new xr}}),this.matrix=new zn,this.matrixWorld=new zn,this.matrixAutoUpdate=ei.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=ei.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new i1,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Hb.setFromAxisAngle(e,t),this.quaternion.multiply(Hb),this}rotateOnWorldAxis(e,t){return Hb.setFromAxisAngle(e,t),this.quaternion.premultiply(Hb),this}rotateX(e){return this.rotateOnAxis(MH,e)}rotateY(e){return this.rotateOnAxis(RH,e)}rotateZ(e){return this.rotateOnAxis(NH,e)}translateOnAxis(e,t){return TH.copy(e).applyQuaternion(this.quaternion),this.position.add(TH.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(MH,e)}translateY(e){return this.translateOnAxis(RH,e)}translateZ(e){return this.translateOnAxis(NH,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(up.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?zA.copy(e):zA.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),pw.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?up.lookAt(pw,zA,this.up):up.lookAt(zA,pw,this.up),this.quaternion.setFromRotationMatrix(up),i&&(up.extractRotation(i.matrixWorld),Hb.setFromRotationMatrix(up),this.quaternion.premultiply(Hb.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(IH),Vb.child=e,this.dispatchEvent(Vb),Vb.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent($ce),Zk.child=e,this.dispatchEvent(Zk),Zk.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),up.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),up.multiply(e.parent.matrixWorld)),e.applyMatrix4(up),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(IH),Vb.child=e,this.dispatchEvent(Vb),Vb.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const a=this.children[r].getObjectByProperty(e,t);if(a!==void 0)return a}}getObjectsByProperty(e,t,r=[]){this[e]===t&&r.push(this);const i=this.children;for(let s=0,a=i.length;s<a;s++)i[s].getObjectsByProperty(e,t,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(pw,e,Oce),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(pw,Bce,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const i=this.children;for(let s=0,a=i.length;s<a;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.geometryInfo=this._geometryInfo.map(o=>({...o,boundingBox:o.boundingBox?o.boundingBox.toJSON():void 0,boundingSphere:o.boundingSphere?o.boundingSphere.toJSON():void 0})),i.instanceInfo=this._instanceInfo.map(o=>({...o})),i.availableInstanceIds=this._availableInstanceIds.slice(),i.availableGeometryIds=this._availableGeometryIds.slice(),i.nextIndexStart=this._nextIndexStart,i.nextVertexStart=this._nextVertexStart,i.geometryCount=this._geometryCount,i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.matricesTexture=this._matricesTexture.toJSON(e),i.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(i.boundingBox=this.boundingBox.toJSON()));function s(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const d=l[c];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,c=this.material.length;l<c;l++)o.push(s(e.materials,this.material[l]));i.material=o}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];i.animations.push(s(e.animations,l))}}if(t){const o=a(e.geometries),l=a(e.materials),c=a(e.textures),u=a(e.images),d=a(e.shapes),h=a(e.skeletons),p=a(e.animations),g=a(e.nodes);o.length>0&&(r.geometries=o),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),d.length>0&&(r.shapes=d),h.length>0&&(r.skeletons=h),p.length>0&&(r.animations=p),g.length>0&&(r.nodes=g)}return r.object=i,r;function a(o){const l=[];for(const c in o){const u=o[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}ei.DEFAULT_UP=new be(0,1,0);ei.DEFAULT_MATRIX_AUTO_UPDATE=!0;ei.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Bd=new be,dp=new be,Qk=new be,fp=new be,Gb=new be,Wb=new be,DH=new be,eO=new be,tO=new be,nO=new be,rO=new Hr,iO=new Hr,sO=new Hr;class pc{constructor(e=new be,t=new be,r=new be){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),Bd.subVectors(e,t),i.cross(Bd);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){Bd.subVectors(i,t),dp.subVectors(r,t),Qk.subVectors(e,t);const a=Bd.dot(Bd),o=Bd.dot(dp),l=Bd.dot(Qk),c=dp.dot(dp),u=dp.dot(Qk),d=a*c-o*o;if(d===0)return s.set(0,0,0),null;const h=1/d,p=(c*l-o*u)*h,g=(a*u-o*l)*h;return s.set(1-p-g,g,p)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,fp)===null?!1:fp.x>=0&&fp.y>=0&&fp.x+fp.y<=1}static getInterpolation(e,t,r,i,s,a,o,l){return this.getBarycoord(e,t,r,i,fp)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,fp.x),l.addScaledVector(a,fp.y),l.addScaledVector(o,fp.z),l)}static getInterpolatedAttribute(e,t,r,i,s,a){return rO.setScalar(0),iO.setScalar(0),sO.setScalar(0),rO.fromBufferAttribute(e,t),iO.fromBufferAttribute(e,r),sO.fromBufferAttribute(e,i),a.setScalar(0),a.addScaledVector(rO,s.x),a.addScaledVector(iO,s.y),a.addScaledVector(sO,s.z),a}static isFrontFacing(e,t,r,i){return Bd.subVectors(r,t),dp.subVectors(e,t),Bd.cross(dp).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Bd.subVectors(this.c,this.b),dp.subVectors(this.a,this.b),Bd.cross(dp).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return pc.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return pc.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,r,i,s){return pc.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return pc.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return pc.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let a,o;Gb.subVectors(i,r),Wb.subVectors(s,r),eO.subVectors(e,r);const l=Gb.dot(eO),c=Wb.dot(eO);if(l<=0&&c<=0)return t.copy(r);tO.subVectors(e,i);const u=Gb.dot(tO),d=Wb.dot(tO);if(u>=0&&d<=u)return t.copy(i);const h=l*d-u*c;if(h<=0&&l>=0&&u<=0)return a=l/(l-u),t.copy(r).addScaledVector(Gb,a);nO.subVectors(e,s);const p=Gb.dot(nO),g=Wb.dot(nO);if(g>=0&&p<=g)return t.copy(s);const v=p*c-l*g;if(v<=0&&c>=0&&g<=0)return o=c/(c-g),t.copy(r).addScaledVector(Wb,o);const b=u*g-p*d;if(b<=0&&d-u>=0&&p-g>=0)return DH.subVectors(s,i),o=(d-u)/(d-u+(p-g)),t.copy(i).addScaledVector(DH,o);const x=1/(b+v+h);return a=v*x,o=h*x,t.copy(r).addScaledVector(Gb,a).addScaledVector(Wb,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const wX={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Xm={h:0,s:0,l:0},HA={h:0,s:0,l:0};function aO(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}let sn=class{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=_o){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Qr.colorSpaceToWorking(this,t),this}setRGB(e,t,r,i=Qr.workingColorSpace){return this.r=e,this.g=t,this.b=r,Qr.colorSpaceToWorking(this,i),this}setHSL(e,t,r,i=Qr.workingColorSpace){if(e=uP(e,1),t=nr(t,0,1),r=nr(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,a=2*r-s;this.r=aO(a,s,e+1/3),this.g=aO(a,s,e),this.b=aO(a,s,e-1/3)}return Qr.colorSpaceToWorking(this,i),this}setStyle(e,t=_o){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=i[1],o=i[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],a=s.length;if(a===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(a===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=_o){const r=wX[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Rp(e.r),this.g=Rp(e.g),this.b=Rp(e.b),this}copyLinearToSRGB(e){return this.r=Ix(e.r),this.g=Ix(e.g),this.b=Ix(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=_o){return Qr.workingToColorSpace(qo.copy(this),e),Math.round(nr(qo.r*255,0,255))*65536+Math.round(nr(qo.g*255,0,255))*256+Math.round(nr(qo.b*255,0,255))}getHexString(e=_o){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Qr.workingColorSpace){Qr.workingToColorSpace(qo.copy(this),t);const r=qo.r,i=qo.g,s=qo.b,a=Math.max(r,i,s),o=Math.min(r,i,s);let l,c;const u=(o+a)/2;if(o===a)l=0,c=0;else{const d=a-o;switch(c=u<=.5?d/(a+o):d/(2-a-o),a){case r:l=(i-s)/d+(i<s?6:0);break;case i:l=(s-r)/d+2;break;case s:l=(r-i)/d+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=Qr.workingColorSpace){return Qr.workingToColorSpace(qo.copy(this),t),e.r=qo.r,e.g=qo.g,e.b=qo.b,e}getStyle(e=_o){Qr.workingToColorSpace(qo.copy(this),e);const t=qo.r,r=qo.g,i=qo.b;return e!==_o?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(Xm),this.setHSL(Xm.h+e,Xm.s+t,Xm.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(Xm),e.getHSL(HA);const r=mC(Xm.h,HA.h,t),i=mC(Xm.s,HA.s,t),s=mC(Xm.l,HA.l,t);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*r+s[6]*i,this.g=s[1]*t+s[4]*r+s[7]*i,this.b=s[2]*t+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const qo=new sn;sn.NAMES=wX;let Lce=0;class Ua extends Rh{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Lce++}),this.uuid=eu(),this.name="",this.type="Material",this.blending=Uy,this.side=vh,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=zM,this.blendDst=HM,this.blendEquation=ng,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new sn(0,0,0),this.blendAlpha=0,this.depthFunc=Yy,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=k$,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=py,this.stencilZFail=py,this.stencilZPass=py,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Uy&&(r.blending=this.blending),this.side!==vh&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==zM&&(r.blendSrc=this.blendSrc),this.blendDst!==HM&&(r.blendDst=this.blendDst),this.blendEquation!==ng&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==Yy&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==k$&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==py&&(r.stencilFail=this.stencilFail),this.stencilZFail!==py&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==py&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const a=[];for(const o in s){const l=s[o];delete l.metadata,a.push(l)}return a}if(t){const s=i(e.textures),a=i(e.images);s.length>0&&(r.textures=s),a.length>0&&(r.images=a)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class gc extends Ua{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new sn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Cc,this.combine=m_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Ep=Fce();function Fce(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):c<-14?(r[l]=1024>>-c-14,r[l|256]=1024>>-c-14|32768,i[l]=-c-1,i[l|256]=-c-1):c<=15?(r[l]=c+15<<10,r[l|256]=c+15<<10|32768,i[l]=13,i[l|256]=13):c<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;(c&8388608)===0;)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(o[l]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:a,offsetTable:o}}function lc(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=nr(n,-65504,65504),Ep.floatView[0]=n;const e=Ep.uint32View[0],t=e>>23&511;return Ep.baseTable[t]+((e&8388607)>>Ep.shiftTable[t])}function jw(n){const e=n>>10;return Ep.uint32View[0]=Ep.mantissaTable[Ep.offsetTable[e]+(n&1023)]+Ep.exponentTable[e],Ep.floatView[0]}class qd{static toHalfFloat(e){return lc(e)}static fromHalfFloat(e){return jw(e)}}const ya=new be,VA=new Lt;let Pce=0;class oi{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:Pce++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=OC,this.updateRanges=[],this.gpuType=ns,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)VA.fromBufferAttribute(this,t),VA.applyMatrix3(e),this.setXY(t,VA.x,VA.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)ya.fromBufferAttribute(this,t),ya.applyMatrix3(e),this.setXYZ(t,ya.x,ya.y,ya.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)ya.fromBufferAttribute(this,t),ya.applyMatrix4(e),this.setXYZ(t,ya.x,ya.y,ya.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)ya.fromBufferAttribute(this,t),ya.applyNormalMatrix(e),this.setXYZ(t,ya.x,ya.y,ya.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)ya.fromBufferAttribute(this,t),ya.transformDirection(e),this.setXYZ(t,ya.x,ya.y,ya.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=Bl(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=Cr(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Bl(t,this.array)),t}setX(e,t){return this.normalized&&(t=Cr(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Bl(t,this.array)),t}setY(e,t){return this.normalized&&(t=Cr(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Bl(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Cr(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Bl(t,this.array)),t}setW(e,t){return this.normalized&&(t=Cr(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Cr(t,this.array),r=Cr(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=Cr(t,this.array),r=Cr(r,this.array),i=Cr(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=Cr(t,this.array),r=Cr(r,this.array),i=Cr(i,this.array),s=Cr(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==OC&&(e.usage=this.usage),e}}class Uce extends oi{constructor(e,t,r){super(new Int8Array(e),t,r)}}class zce extends oi{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class Hce extends oi{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class Vce extends oi{constructor(e,t,r){super(new Int16Array(e),t,r)}}class hP extends oi{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class Gce extends oi{constructor(e,t,r){super(new Int32Array(e),t,r)}}class pP extends oi{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class Wce extends oi{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}getX(e){let t=jw(this.array[e*this.itemSize]);return this.normalized&&(t=Bl(t,this.array)),t}setX(e,t){return this.normalized&&(t=Cr(t,this.array)),this.array[e*this.itemSize]=lc(t),this}getY(e){let t=jw(this.array[e*this.itemSize+1]);return this.normalized&&(t=Bl(t,this.array)),t}setY(e,t){return this.normalized&&(t=Cr(t,this.array)),this.array[e*this.itemSize+1]=lc(t),this}getZ(e){let t=jw(this.array[e*this.itemSize+2]);return this.normalized&&(t=Bl(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Cr(t,this.array)),this.array[e*this.itemSize+2]=lc(t),this}getW(e){let t=jw(this.array[e*this.itemSize+3]);return this.normalized&&(t=Bl(t,this.array)),t}setW(e,t){return this.normalized&&(t=Cr(t,this.array)),this.array[e*this.itemSize+3]=lc(t),this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Cr(t,this.array),r=Cr(r,this.array)),this.array[e+0]=lc(t),this.array[e+1]=lc(r),this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=Cr(t,this.array),r=Cr(r,this.array),i=Cr(i,this.array)),this.array[e+0]=lc(t),this.array[e+1]=lc(r),this.array[e+2]=lc(i),this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=Cr(t,this.array),r=Cr(r,this.array),i=Cr(i,this.array),s=Cr(s,this.array)),this.array[e+0]=lc(t),this.array[e+1]=lc(r),this.array[e+2]=lc(i),this.array[e+3]=lc(s),this}}class An extends oi{constructor(e,t,r){super(new Float32Array(e),t,r)}}let jce=0;const Eu=new zn,oO=new ei,jb=new be,qc=new To,mw=new To,Ya=new be;class gr extends Rh{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:jce++}),this.uuid=eu(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(bX(e)?pP:hP)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new xr().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Eu.makeRotationFromQuaternion(e),this.applyMatrix4(Eu),this}rotateX(e){return Eu.makeRotationX(e),this.applyMatrix4(Eu),this}rotateY(e){return Eu.makeRotationY(e),this.applyMatrix4(Eu),this}rotateZ(e){return Eu.makeRotationZ(e),this.applyMatrix4(Eu),this}translate(e,t,r){return Eu.makeTranslation(e,t,r),this.applyMatrix4(Eu),this}scale(e,t,r){return Eu.makeScale(e,t,r),this.applyMatrix4(Eu),this}lookAt(e){return oO.lookAt(e),oO.updateMatrix(),this.applyMatrix4(oO.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(jb).negate(),this.translate(jb.x,jb.y,jb.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const r=[];for(let i=0,s=e.length;i<s;i++){const a=e[i];r.push(a.x,a.y,a.z||0)}this.setAttribute("position",new An(r,3))}else{const r=Math.min(e.length,t.count);for(let i=0;i<r;i++){const s=e[i];t.setXYZ(i,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new To);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new be(-1/0,-1/0,-1/0),new be(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];qc.setFromBufferAttribute(s),this.morphTargetsRelative?(Ya.addVectors(this.boundingBox.min,qc.min),this.boundingBox.expandByPoint(Ya),Ya.addVectors(this.boundingBox.max,qc.max),this.boundingBox.expandByPoint(Ya)):(this.boundingBox.expandByPoint(qc.min),this.boundingBox.expandByPoint(qc.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ro);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new be,1/0);return}if(e){const r=this.boundingSphere.center;if(qc.setFromBufferAttribute(e),t)for(let s=0,a=t.length;s<a;s++){const o=t[s];mw.setFromBufferAttribute(o),this.morphTargetsRelative?(Ya.addVectors(qc.min,mw.min),qc.expandByPoint(Ya),Ya.addVectors(qc.max,mw.max),qc.expandByPoint(Ya)):(qc.expandByPoint(mw.min),qc.expandByPoint(mw.max))}qc.getCenter(r);let i=0;for(let s=0,a=e.count;s<a;s++)Ya.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(Ya));if(t)for(let s=0,a=t.length;s<a;s++){const o=t[s],l=this.morphTargetsRelative;for(let c=0,u=o.count;c<u;c++)Ya.fromBufferAttribute(o,c),l&&(jb.fromBufferAttribute(e,c),Ya.add(jb)),i=Math.max(i,r.distanceToSquared(Ya))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=t.position,i=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new oi(new Float32Array(4*r.count),4));const a=this.getAttribute("tangent"),o=[],l=[];for(let $=0;$<r.count;$++)o[$]=new be,l[$]=new be;const c=new be,u=new be,d=new be,h=new Lt,p=new Lt,g=new Lt,v=new be,b=new be;function x($,N,I){c.fromBufferAttribute(r,$),u.fromBufferAttribute(r,N),d.fromBufferAttribute(r,I),h.fromBufferAttribute(s,$),p.fromBufferAttribute(s,N),g.fromBufferAttribute(s,I),u.sub(c),d.sub(c),p.sub(h),g.sub(h);const k=1/(p.x*g.y-g.x*p.y);isFinite(k)&&(v.copy(u).multiplyScalar(g.y).addScaledVector(d,-p.y).multiplyScalar(k),b.copy(d).multiplyScalar(p.x).addScaledVector(u,-g.x).multiplyScalar(k),o[$].add(v),o[N].add(v),o[I].add(v),l[$].add(b),l[N].add(b),l[I].add(b))}let C=this.groups;C.length===0&&(C=[{start:0,count:e.count}]);for(let $=0,N=C.length;$<N;++$){const I=C[$],k=I.start,P=I.count;for(let G=k,W=k+P;G<W;G+=3)x(e.getX(G+0),e.getX(G+1),e.getX(G+2))}const E=new be,_=new be,M=new be,R=new be;function L($){M.fromBufferAttribute(i,$),R.copy(M);const N=o[$];E.copy(N),E.sub(M.multiplyScalar(M.dot(N))).normalize(),_.crossVectors(R,N);const k=_.dot(l[$])<0?-1:1;a.setXYZW($,E.x,E.y,E.z,k)}for(let $=0,N=C.length;$<N;++$){const I=C[$],k=I.start,P=I.count;for(let G=k,W=k+P;G<W;G+=3)L(e.getX(G+0)),L(e.getX(G+1)),L(e.getX(G+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new oi(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let h=0,p=r.count;h<p;h++)r.setXYZ(h,0,0,0);const i=new be,s=new be,a=new be,o=new be,l=new be,c=new be,u=new be,d=new be;if(e)for(let h=0,p=e.count;h<p;h+=3){const g=e.getX(h+0),v=e.getX(h+1),b=e.getX(h+2);i.fromBufferAttribute(t,g),s.fromBufferAttribute(t,v),a.fromBufferAttribute(t,b),u.subVectors(a,s),d.subVectors(i,s),u.cross(d),o.fromBufferAttribute(r,g),l.fromBufferAttribute(r,v),c.fromBufferAttribute(r,b),o.add(u),l.add(u),c.add(u),r.setXYZ(g,o.x,o.y,o.z),r.setXYZ(v,l.x,l.y,l.z),r.setXYZ(b,c.x,c.y,c.z)}else for(let h=0,p=t.count;h<p;h+=3)i.fromBufferAttribute(t,h+0),s.fromBufferAttribute(t,h+1),a.fromBufferAttribute(t,h+2),u.subVectors(a,s),d.subVectors(i,s),u.cross(d),r.setXYZ(h+0,u.x,u.y,u.z),r.setXYZ(h+1,u.x,u.y,u.z),r.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)Ya.fromBufferAttribute(e,t),Ya.normalize(),e.setXYZ(t,Ya.x,Ya.y,Ya.z)}toNonIndexed(){function e(o,l){const c=o.array,u=o.itemSize,d=o.normalized,h=new c.constructor(l.length*u);let p=0,g=0;for(let v=0,b=l.length;v<b;v++){o.isInterleavedBufferAttribute?p=l[v]*o.data.stride+o.offset:p=l[v]*u;for(let x=0;x<u;x++)h[g++]=c[p++]}return new oi(h,u,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new gr,r=this.index.array,i=this.attributes;for(const o in i){const l=i[o],c=e(l,r);t.setAttribute(o,c)}const s=this.morphAttributes;for(const o in s){const l=[],c=s[o];for(let u=0,d=c.length;u<d;u++){const h=c[u],p=e(h,r);l.push(p)}t.morphAttributes[o]=l}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,l=a.length;o<l;o++){const c=a[o];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,h=c.length;d<h;d++){const p=c[d];u.push(p.toJSON(e.data))}u.length>0&&(i[l]=u,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere=o.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone());const i=e.attributes;for(const c in i){const u=i[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],d=s[c];for(let h=0,p=d.length;h<p;h++)u.push(d[h].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let c=0,u=a.length;c<u;c++){const d=a[c];this.addGroup(d.start,d.count,d.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const kH=new zn,X0=new T1,GA=new ro,OH=new be,WA=new be,jA=new be,qA=new be,lO=new be,XA=new be,BH=new be,KA=new be;class rs extends ei{constructor(e=new gr,t=new gc){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=i.length;s<a;s++){const o=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,a=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const o=this.morphTargetInfluences;if(s&&o){XA.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=o[l],d=s[l];u!==0&&(lO.fromBufferAttribute(d,e),a?XA.addScaledVector(lO,u):XA.addScaledVector(lO.sub(t),u))}t.add(XA)}return t}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),GA.copy(r.boundingSphere),GA.applyMatrix4(s),X0.copy(e.ray).recast(e.near),!(GA.containsPoint(X0.origin)===!1&&(X0.intersectSphere(GA,OH)===null||X0.origin.distanceToSquared(OH)>(e.far-e.near)**2))&&(kH.copy(s).invert(),X0.copy(e.ray).applyMatrix4(kH),!(r.boundingBox!==null&&X0.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,X0)))}_computeIntersections(e,t,r){let i;const s=this.geometry,a=this.material,o=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,d=s.attributes.normal,h=s.groups,p=s.drawRange;if(o!==null)if(Array.isArray(a))for(let g=0,v=h.length;g<v;g++){const b=h[g],x=a[b.materialIndex],C=Math.max(b.start,p.start),E=Math.min(o.count,Math.min(b.start+b.count,p.start+p.count));for(let _=C,M=E;_<M;_+=3){const R=o.getX(_),L=o.getX(_+1),$=o.getX(_+2);i=YA(this,x,e,r,c,u,d,R,L,$),i&&(i.faceIndex=Math.floor(_/3),i.face.materialIndex=b.materialIndex,t.push(i))}}else{const g=Math.max(0,p.start),v=Math.min(o.count,p.start+p.count);for(let b=g,x=v;b<x;b+=3){const C=o.getX(b),E=o.getX(b+1),_=o.getX(b+2);i=YA(this,a,e,r,c,u,d,C,E,_),i&&(i.faceIndex=Math.floor(b/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(a))for(let g=0,v=h.length;g<v;g++){const b=h[g],x=a[b.materialIndex],C=Math.max(b.start,p.start),E=Math.min(l.count,Math.min(b.start+b.count,p.start+p.count));for(let _=C,M=E;_<M;_+=3){const R=_,L=_+1,$=_+2;i=YA(this,x,e,r,c,u,d,R,L,$),i&&(i.faceIndex=Math.floor(_/3),i.face.materialIndex=b.materialIndex,t.push(i))}}else{const g=Math.max(0,p.start),v=Math.min(l.count,p.start+p.count);for(let b=g,x=v;b<x;b+=3){const C=b,E=b+1,_=b+2;i=YA(this,a,e,r,c,u,d,C,E,_),i&&(i.faceIndex=Math.floor(b/3),t.push(i))}}}}function qce(n,e,t,r,i,s,a,o){let l;if(e.side===Ao?l=r.intersectTriangle(a,s,i,!0,o):l=r.intersectTriangle(i,s,a,e.side===vh,o),l===null)return null;KA.copy(o),KA.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(KA);return c<t.near||c>t.far?null:{distance:c,point:KA.clone(),object:n}}function YA(n,e,t,r,i,s,a,o,l,c){n.getVertexPosition(o,WA),n.getVertexPosition(l,jA),n.getVertexPosition(c,qA);const u=qce(n,e,t,r,WA,jA,qA,BH);if(u){const d=new be;pc.getBarycoord(BH,WA,jA,qA,d),i&&(u.uv=pc.getInterpolatedAttribute(i,o,l,c,d,new Lt)),s&&(u.uv1=pc.getInterpolatedAttribute(s,o,l,c,d,new Lt)),a&&(u.normal=pc.getInterpolatedAttribute(a,o,l,c,d,new be),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const h={a:o,b:l,c,normal:new be,materialIndex:0};pc.getNormal(WA,jA,qA,h.normal),u.face=h,u.barycoord=d}return u}class Fg extends gr{constructor(e=1,t=1,r=1,i=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:a};const o=this;i=Math.floor(i),s=Math.floor(s),a=Math.floor(a);const l=[],c=[],u=[],d=[];let h=0,p=0;g("z","y","x",-1,-1,r,t,e,a,s,0),g("z","y","x",1,-1,r,t,-e,a,s,1),g("x","z","y",1,1,e,r,t,i,a,2),g("x","z","y",1,-1,e,r,-t,i,a,3),g("x","y","z",1,-1,e,t,r,i,s,4),g("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new An(c,3)),this.setAttribute("normal",new An(u,3)),this.setAttribute("uv",new An(d,2));function g(v,b,x,C,E,_,M,R,L,$,N){const I=_/L,k=M/$,P=_/2,G=M/2,W=R/2,X=L+1,z=$+1;let J=0,Q=0;const Y=new be;for(let q=0;q<z;q++){const te=q*k-G;for(let ne=0;ne<X;ne++){const le=ne*I-P;Y[v]=le*C,Y[b]=te*E,Y[x]=W,c.push(Y.x,Y.y,Y.z),Y[v]=0,Y[b]=0,Y[x]=R>0?1:-1,u.push(Y.x,Y.y,Y.z),d.push(ne/L),d.push(1-q/$),J+=1}}for(let q=0;q<$;q++)for(let te=0;te<L;te++){const ne=h+te+X*q,le=h+te+X*(q+1),ye=h+(te+1)+X*(q+1),ue=h+(te+1)+X*q;l.push(ne,le,ue),l.push(le,ye,ue),Q+=6}o.addGroup(p,Q,N),p+=Q,h+=J}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fg(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function s1(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function Rl(n){const e={};for(let t=0;t<n.length;t++){const r=s1(n[t]);for(const i in r)e[i]=r[i]}return e}function Xce(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function CX(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Qr.workingColorSpace}const mP={clone:s1,merge:Rl};var Kce=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Yce=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class No extends Ua{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Kce,this.fragmentShader=Yce,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=s1(e.uniforms),this.uniformsGroups=Xce(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const a=this.uniforms[i].value;a&&a.isTexture?t.uniforms[i]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[i]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[i]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[i]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[i]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[i]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[i]={type:"m4",value:a.toArray()}:t.uniforms[i]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class ZN extends ei{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new zn,this.projectionMatrix=new zn,this.projectionMatrixInverse=new zn,this.coordinateSystem=Jc,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Km=new be,$H=new Lt,LH=new Lt;class Ba extends ZN{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=r1*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(zy*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return r1*2*Math.atan(Math.tan(zy*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,r){Km.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Km.x,Km.y).multiplyScalar(-e/Km.z),Km.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(Km.x,Km.y).multiplyScalar(-e/Km.z)}getViewSize(e,t){return this.getViewBounds(e,$H,LH),t.subVectors(LH,$H)}setViewOffset(e,t,r,i,s,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(zy*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,c=a.fullHeight;s+=a.offsetX*i/l,t-=a.offsetY*r/c,i*=a.width/l,r*=a.height/c}const o=this.filmOffset;o!==0&&(s+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const qb=-90,Xb=1;class _X extends ei{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Ba(qb,Xb,e,t);i.layers=this.layers,this.add(i);const s=new Ba(qb,Xb,e,t);s.layers=this.layers,this.add(s);const a=new Ba(qb,Xb,e,t);a.layers=this.layers,this.add(a);const o=new Ba(qb,Xb,e,t);o.layers=this.layers,this.add(o);const l=new Ba(qb,Xb,e,t);l.layers=this.layers,this.add(l);const c=new Ba(qb,Xb,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,s,a,o,l]=t;for(const c of t)this.remove(c);if(e===Jc)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===n1)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,a,o,l,c,u]=this.children,d=e.getRenderTarget(),h=e.getActiveCubeFace(),p=e.getActiveMipmapLevel(),g=e.xr.enabled;e.xr.enabled=!1;const v=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(t,s),e.setRenderTarget(r,1,i),e.render(t,a),e.setRenderTarget(r,2,i),e.render(t,o),e.setRenderTarget(r,3,i),e.render(t,l),e.setRenderTarget(r,4,i),e.render(t,c),r.texture.generateMipmaps=v,e.setRenderTarget(r,5,i),e.render(t,u),e.setRenderTarget(d,h,p),e.xr.enabled=g,r.texture.needsPMREMUpdate=!0}}class b_ extends Ti{constructor(e=[],t=bh,r,i,s,a,o,l,c,u){super(e,t,r,i,s,a,o,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class gP extends wc{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new b_(i),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Fg(5,5,5),s=new No({name:"CubemapFromEquirect",uniforms:s1(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Ao,blending:uh});s.uniforms.tEquirect.value=t;const a=new rs(i,s),o=t.minFilter;return t.minFilter===Pu&&(t.minFilter=ai),new _X(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t=!0,r=!0,i=!0){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,r,i);e.setRenderTarget(s)}}class Mp extends ei{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Jce={type:"move"};class fM{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Mp,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Mp,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new be,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new be),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Mp,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new be,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new be),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,a=null;const o=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){a=!0;for(const v of e.hand.values()){const b=t.getJointPose(v,r),x=this._getHandJoint(c,v);b!==null&&(x.matrix.fromArray(b.transform.matrix),x.matrix.decompose(x.position,x.rotation,x.scale),x.matrixWorldNeedsUpdate=!0,x.jointRadius=b.radius),x.visible=b!==null}const u=c.joints["index-finger-tip"],d=c.joints["thumb-tip"],h=u.position.distanceTo(d.position),p=.02,g=.005;c.inputState.pinching&&h>p+g?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=p-g&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(Jce)))}return o!==null&&(o.visible=i!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new Mp;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}class QN{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new sn(e),this.density=t}clone(){return new QN(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class eI{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new sn(e),this.near=t,this.far=r}clone(){return new eI(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}let x_=class extends ei{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Cc,this.environmentIntensity=1,this.environmentRotation=new Cc,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}};class S_{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=OC,this.updateRanges=[],this.version=0,this.uuid=eu()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=eu()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=eu()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Al=new be;class wg{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)Al.fromBufferAttribute(this,t),Al.applyMatrix4(e),this.setXYZ(t,Al.x,Al.y,Al.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Al.fromBufferAttribute(this,t),Al.applyNormalMatrix(e),this.setXYZ(t,Al.x,Al.y,Al.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Al.fromBufferAttribute(this,t),Al.transformDirection(e),this.setXYZ(t,Al.x,Al.y,Al.z);return this}getComponent(e,t){let r=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(r=Bl(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=Cr(r,this.array)),this.data.array[e*this.data.stride+this.offset+t]=r,this}setX(e,t){return this.normalized&&(t=Cr(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Cr(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Cr(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Cr(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Bl(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Bl(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Bl(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Bl(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Cr(t,this.array),r=Cr(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Cr(t,this.array),r=Cr(r,this.array),i=Cr(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Cr(t,this.array),r=Cr(r,this.array),i=Cr(i,this.array),s=Cr(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new oi(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new wg(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class yP extends Ua{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new sn(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Kb;const gw=new be,Yb=new be,Jb=new be,Zb=new Lt,yw=new Lt,EX=new zn,JA=new be,vw=new be,ZA=new be,FH=new Lt,cO=new Lt,PH=new Lt;class AX extends ei{constructor(e=new yP){if(super(),this.isSprite=!0,this.type="Sprite",Kb===void 0){Kb=new gr;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new S_(t,5);Kb.setIndex([0,1,2,0,2,3]),Kb.setAttribute("position",new wg(r,3,0,!1)),Kb.setAttribute("uv",new wg(r,2,3,!1))}this.geometry=Kb,this.material=e,this.center=new Lt(.5,.5),this.count=1}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Yb.setFromMatrixScale(this.matrixWorld),EX.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Jb.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Yb.multiplyScalar(-Jb.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const a=this.center;QA(JA.set(-.5,-.5,0),Jb,a,Yb,i,s),QA(vw.set(.5,-.5,0),Jb,a,Yb,i,s),QA(ZA.set(.5,.5,0),Jb,a,Yb,i,s),FH.set(0,0),cO.set(1,0),PH.set(1,1);let o=e.ray.intersectTriangle(JA,vw,ZA,!1,gw);if(o===null&&(QA(vw.set(-.5,.5,0),Jb,a,Yb,i,s),cO.set(0,1),o=e.ray.intersectTriangle(JA,ZA,vw,!1,gw),o===null))return;const l=e.ray.origin.distanceTo(gw);l<e.near||l>e.far||t.push({distance:l,point:gw.clone(),uv:pc.getInterpolation(gw,JA,vw,ZA,FH,cO,PH,new Lt),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function QA(n,e,t,r,i,s){Zb.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(yw.x=s*Zb.x-i*Zb.y,yw.y=i*Zb.x+s*Zb.y):yw.copy(Zb),n.copy(e),n.x+=yw.x,n.y+=yw.y,n.applyMatrix4(EX)}const eT=new be,UH=new be;class TX extends ei{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const s=t[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,r=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:r,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let r=0;r<t.length;r++)if(t[r].distance===e){const i=t.splice(r,1);return this.remove(i[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i;r++){let s=t[r].distance;if(t[r].object.visible&&(s-=s*t[r].hysteresis),e<s)break}return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){eT.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(eT);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){eT.setFromMatrixPosition(e.matrixWorld),UH.setFromMatrixPosition(this.matrixWorld);const r=eT.distanceTo(UH)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let a=t[i].distance;if(t[i].object.visible&&(a-=a*t[i].hysteresis),r>=a)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const a=r[i];t.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return t}}const zH=new be,HH=new Hr,VH=new Hr,Zce=new be,GH=new zn,tT=new be,uO=new ro,WH=new zn,dO=new T1;class vP extends rs{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=I$,this.bindMatrix=new zn,this.bindMatrixInverse=new zn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new To),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,tT),this.boundingBox.expandByPoint(tT)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new ro),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,tT),this.boundingSphere.expandByPoint(tT)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),uO.copy(this.boundingSphere),uO.applyMatrix4(i),e.ray.intersectsSphere(uO)!==!1&&(WH.copy(i).invert(),dO.copy(e.ray).applyMatrix4(WH),!(this.boundingBox!==null&&dO.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,dO)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Hr,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===I$?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===aX?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const r=this.skeleton,i=this.geometry;HH.fromBufferAttribute(i.attributes.skinIndex,e),VH.fromBufferAttribute(i.attributes.skinWeight,e),zH.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const a=VH.getComponent(s);if(a!==0){const o=HH.getComponent(s);GH.multiplyMatrices(r.bones[o].matrixWorld,r.boneInverses[o]),t.addScaledVector(Zce.copy(zH).applyMatrix4(GH),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}class tI extends ei{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Kd extends Ti{constructor(e=null,t=1,r=1,i,s,a,o,l,c=no,u=no,d,h){super(null,a,o,l,c,u,i,s,d,h),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const jH=new zn,Qce=new zn;class w_{constructor(e=[],t=[]){this.uuid=eu(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new zn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new zn;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,a=e.length;s<a;s++){const o=e[s]?e[s].matrixWorld:Qce;jH.multiplyMatrices(o,t[s]),jH.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new w_(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new Kd(t,e,e,la,ns);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let a=t[s];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),a=new tI),this.bones.push(a),this.boneInverses.push(new zn().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const a=t[i];e.bones.push(a.uuid);const o=r[i];e.boneInverses.push(o.toArray())}return e}}class Jy extends oi{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Qb=new zn,qH=new zn,nT=[],XH=new To,eue=new zn,bw=new rs,xw=new ro;class bP extends rs{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Jy(new Float32Array(r*16),16),this.instanceColor=null,this.morphTexture=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,eue)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new To),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Qb),XH.copy(e.boundingBox).applyMatrix4(Qb),this.boundingBox.union(XH)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new ro),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Qb),xw.copy(e.boundingSphere).applyMatrix4(Qb),this.boundingSphere.union(xw)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const r=t.morphTargetInfluences,i=this.morphTexture.source.data.data,s=r.length+1,a=e*s+1;for(let o=0;o<r.length;o++)r[o]=i[a+o]}raycast(e,t){const r=this.matrixWorld,i=this.count;if(bw.geometry=this.geometry,bw.material=this.material,bw.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),xw.copy(this.boundingSphere),xw.applyMatrix4(r),e.ray.intersectsSphere(xw)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,Qb),qH.multiplyMatrices(r,Qb),bw.matrixWorld=qH,bw.raycast(e,nT);for(let a=0,o=nT.length;a<o;a++){const l=nT[a];l.instanceId=s,l.object=this,t.push(l)}nT.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Jy(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const r=t.morphTargetInfluences,i=r.length+1;this.morphTexture===null&&(this.morphTexture=new Kd(new Float32Array(i*this.count),i,this.count,y_,ns));const s=this.morphTexture.source.data.data;let a=0;for(let c=0;c<r.length;c++)a+=r[c];const o=this.geometry.morphTargetsRelative?1:1-a,l=i*e;s[l]=o,s.set(r,l+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const fO=new be,tue=new be,nue=new xr;class eg{constructor(e=new be(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=fO.subVectors(r,t).cross(tue.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(fO),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||nue.getNormalMatrix(e),i=this.coplanarPoint(fO).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const K0=new ro,rue=new Lt(.5,.5),rT=new be;class M1{constructor(e=new eg,t=new eg,r=new eg,i=new eg,s=new eg,a=new eg){this.planes=[e,t,r,i,s,a]}set(e,t,r,i,s,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(r),o[3].copy(i),o[4].copy(s),o[5].copy(a),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=Jc,r=!1){const i=this.planes,s=e.elements,a=s[0],o=s[1],l=s[2],c=s[3],u=s[4],d=s[5],h=s[6],p=s[7],g=s[8],v=s[9],b=s[10],x=s[11],C=s[12],E=s[13],_=s[14],M=s[15];if(i[0].setComponents(c-a,p-u,x-g,M-C).normalize(),i[1].setComponents(c+a,p+u,x+g,M+C).normalize(),i[2].setComponents(c+o,p+d,x+v,M+E).normalize(),i[3].setComponents(c-o,p-d,x-v,M-E).normalize(),r)i[4].setComponents(l,h,b,_).normalize(),i[5].setComponents(c-l,p-h,x-b,M-_).normalize();else if(i[4].setComponents(c-l,p-h,x-b,M-_).normalize(),t===Jc)i[5].setComponents(c+l,p+h,x+b,M+_).normalize();else if(t===n1)i[5].setComponents(l,h,b,_).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),K0.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),K0.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(K0)}intersectsSprite(e){K0.center.set(0,0,0);const t=rue.distanceTo(e.center);return K0.radius=.7071067811865476+t,K0.applyMatrix4(e.matrixWorld),this.intersectsSphere(K0)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(rT.x=i.normal.x>0?e.max.x:e.min.x,rT.y=i.normal.y>0?e.max.y:e.min.y,rT.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(rT)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const Xf=new zn,Kf=new M1;class nI{constructor(){this.coordinateSystem=Jc}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let r=0;r<t.cameras.length;r++){const i=t.cameras[r];if(Xf.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),Kf.setFromProjectionMatrix(Xf,i.coordinateSystem,i.reversedDepth),Kf.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let r=0;r<t.cameras.length;r++){const i=t.cameras[r];if(Xf.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),Kf.setFromProjectionMatrix(Xf,i.coordinateSystem,i.reversedDepth),Kf.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let r=0;r<t.cameras.length;r++){const i=t.cameras[r];if(Xf.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),Kf.setFromProjectionMatrix(Xf,i.coordinateSystem,i.reversedDepth),Kf.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let r=0;r<t.cameras.length;r++){const i=t.cameras[r];if(Xf.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),Kf.setFromProjectionMatrix(Xf,i.coordinateSystem,i.reversedDepth),Kf.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let r=0;r<t.cameras.length;r++){const i=t.cameras[r];if(Xf.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),Kf.setFromProjectionMatrix(Xf,i.coordinateSystem,i.reversedDepth),Kf.containsPoint(e))return!0}return!1}clone(){return new nI}}function hO(n,e){return n-e}function iue(n,e){return n.z-e.z}function sue(n,e){return e.z-n.z}class aue{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,r,i){const s=this.pool,a=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const o=s[this.index];a.push(o),this.index++,o.start=e,o.count=t,o.z=r,o.index=i}reset(){this.list.length=0,this.index=0}}const ac=new zn,oue=new sn(1,1,1),KH=new M1,lue=new nI,iT=new To,Y0=new ro,Sw=new be,YH=new be,cue=new be,pO=new aue,Xo=new rs,sT=[];function uue(n,e,t=0){const r=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const i=n.count;for(let s=0;s<i;s++)for(let a=0;a<r;a++)e.setComponent(s+t,a,n.getComponent(s,a))}else e.array.set(n.array,t*r);e.needsUpdate=!0}function J0(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++)e[r]=n[r]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class MX extends rs{constructor(e,t,r=t*2,i){super(new gr,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=r,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),r=new Kd(t,e,e,la,ns);this._matricesTexture=r}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),r=new Kd(t,e,e,v_,xh);this._indirectTexture=r}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),r=new Kd(t,e,e,la,ns);r.colorSpace=Qr.workingColorSpace,this._colorsTexture=r}_initializeGeometry(e){const t=this.geometry,r=this._maxVertexCount,i=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const a=e.getAttribute(s),{array:o,itemSize:l,normalized:c}=a,u=new o.constructor(r*l),d=new oi(u,l,c);t.setAttribute(s,d)}if(e.getIndex()!==null){const s=r>65535?new Uint32Array(i):new Uint16Array(i);t.setIndex(new oi(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const r in t.attributes){if(!e.hasAttribute(r))throw new Error(`THREE.BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),s=t.getAttribute(r);if(i.itemSize!==s.itemSize||i.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new To);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let r=0,i=t.length;r<i;r++){if(t[r].active===!1)continue;const s=t[r].geometryIndex;this.getMatrixAt(r,ac),this.getBoundingBoxAt(s,iT).applyMatrix4(ac),e.union(iT)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ro);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let r=0,i=t.length;r<i;r++){if(t[r].active===!1)continue;const s=t[r].geometryIndex;this.getMatrixAt(r,ac),this.getBoundingSphereAt(s,Y0).applyMatrix4(ac),e.union(Y0)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const r={visible:!0,active:!0,geometryIndex:e};let i=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(hO),i=this._availableInstanceIds.shift(),this._instanceInfo[i]=r):(i=this._instanceInfo.length,this._instanceInfo.push(r));const s=this._matricesTexture;ac.identity().toArray(s.image.data,i*16),s.needsUpdate=!0;const a=this._colorsTexture;return a&&(oue.toArray(a.image.data,i*4),a.needsUpdate=!0),this._visibilityChanged=!0,i}addGeometry(e,t=-1,r=-1){this._initializeGeometry(e),this._validateGeometry(e);const i={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;i.vertexStart=this._nextVertexStart,i.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const a=e.getIndex();if(a!==null&&(i.indexStart=this._nextIndexStart,i.reservedIndexCount=r===-1?a.count:r),i.indexStart!==-1&&i.indexStart+i.reservedIndexCount>this._maxIndexCount||i.vertexStart+i.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let l;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(hO),l=this._availableGeometryIds.shift(),s[l]=i):(l=this._geometryCount,this._geometryCount++,s.push(i)),this.setGeometryAt(l,e),this._nextIndexStart=i.indexStart+i.reservedIndexCount,this._nextVertexStart=i.vertexStart+i.reservedVertexCount,l}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const r=this.geometry,i=r.getIndex()!==null,s=r.getIndex(),a=t.getIndex(),o=this._geometryInfo[e];if(i&&a.count>o.reservedIndexCount||t.attributes.position.count>o.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const l=o.vertexStart,c=o.reservedVertexCount;o.vertexCount=t.getAttribute("position").count;for(const u in r.attributes){const d=t.getAttribute(u),h=r.getAttribute(u);uue(d,h,l);const p=d.itemSize;for(let g=d.count,v=c;g<v;g++){const b=l+g;for(let x=0;x<p;x++)h.setComponent(b,x,0)}h.needsUpdate=!0,h.addUpdateRange(l*p,c*p)}if(i){const u=o.indexStart,d=o.reservedIndexCount;o.indexCount=t.getIndex().count;for(let h=0;h<a.count;h++)s.setX(u+h,l+a.getX(h));for(let h=a.count,p=d;h<p;h++)s.setX(u+h,l);s.needsUpdate=!0,s.addUpdateRange(u,o.reservedIndexCount)}return o.start=i?o.indexStart:o.vertexStart,o.count=i?o.indexCount:o.vertexCount,o.boundingBox=null,t.boundingBox!==null&&(o.boundingBox=t.boundingBox.clone()),o.boundingSphere=null,t.boundingSphere!==null&&(o.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const r=this._instanceInfo;for(let i=0,s=r.length;i<s;i++)r[i].active&&r[i].geometryIndex===e&&this.deleteInstance(i);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const r=this._geometryInfo,i=r.map((a,o)=>o).sort((a,o)=>r[a].vertexStart-r[o].vertexStart),s=this.geometry;for(let a=0,o=r.length;a<o;a++){const l=i[a],c=r[l];if(c.active!==!1){if(s.index!==null){if(c.indexStart!==t){const{indexStart:u,vertexStart:d,reservedIndexCount:h}=c,p=s.index,g=p.array,v=e-d;for(let b=u;b<u+h;b++)g[b]=g[b]+v;p.array.copyWithin(t,u,u+h),p.addUpdateRange(t,h),c.indexStart=t}t+=c.reservedIndexCount}if(c.vertexStart!==e){const{vertexStart:u,reservedVertexCount:d}=c,h=s.attributes;for(const p in h){const g=h[p],{array:v,itemSize:b}=g;v.copyWithin(e*b,u*b,(u+d)*b),g.addUpdateRange(e*b,d*b)}c.vertexStart=e}e+=c.reservedVertexCount,c.start=s.index?c.indexStart:c.vertexStart,this._nextIndexStart=s.index?c.indexStart+c.reservedIndexCount:0,this._nextVertexStart=c.vertexStart+c.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const r=this.geometry,i=this._geometryInfo[e];if(i.boundingBox===null){const s=new To,a=r.index,o=r.attributes.position;for(let l=i.start,c=i.start+i.count;l<c;l++){let u=l;a&&(u=a.getX(u)),s.expandByPoint(Sw.fromBufferAttribute(o,u))}i.boundingBox=s}return t.copy(i.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const r=this.geometry,i=this._geometryInfo[e];if(i.boundingSphere===null){const s=new ro;this.getBoundingBoxAt(e,iT),iT.getCenter(s.center);const a=r.index,o=r.attributes.position;let l=0;for(let c=i.start,u=i.start+i.count;c<u;c++){let d=c;a&&(d=a.getX(d)),Sw.fromBufferAttribute(o,d),l=Math.max(l,s.center.distanceToSquared(Sw))}s.radius=Math.sqrt(l),i.boundingSphere=s}return t.copy(i.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const r=this._matricesTexture,i=this._matricesTexture.image.data;return t.toArray(i,e*16),r.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const r=this._geometryInfo[e];return t.vertexStart=r.vertexStart,t.vertexCount=r.vertexCount,t.reservedVertexCount=r.reservedVertexCount,t.indexStart=r.indexStart,t.indexCount=r.indexCount,t.reservedIndexCount=r.reservedIndexCount,t.start=r.start,t.count=r.count,t}setInstanceCount(e){const t=this._availableInstanceIds,r=this._instanceInfo;for(t.sort(hO);t[t.length-1]===r.length-1;)r.pop(),t.pop();if(e<r.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const i=new Int32Array(e),s=new Int32Array(e);J0(this._multiDrawCounts,i),J0(this._multiDrawStarts,s),this._multiDrawCounts=i,this._multiDrawStarts=s,this._maxInstanceCount=e;const a=this._indirectTexture,o=this._matricesTexture,l=this._colorsTexture;a.dispose(),this._initIndirectTexture(),J0(a.image.data,this._indirectTexture.image.data),o.dispose(),this._initMatricesTexture(),J0(o.image.data,this._matricesTexture.image.data),l&&(l.dispose(),this._initColorsTexture(),J0(l.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const r=[...this._geometryInfo].filter(o=>o.active);if(Math.max(...r.map(o=>o.vertexStart+o.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...r.map(l=>l.indexStart+l.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new gr,this._initializeGeometry(s));const a=this.geometry;s.index&&J0(s.index.array,a.index.array);for(const o in s.attributes)J0(s.attributes[o].array,a.attributes[o].array)}raycast(e,t){const r=this._instanceInfo,i=this._geometryInfo,s=this.matrixWorld,a=this.geometry;Xo.material=this.material,Xo.geometry.index=a.index,Xo.geometry.attributes=a.attributes,Xo.geometry.boundingBox===null&&(Xo.geometry.boundingBox=new To),Xo.geometry.boundingSphere===null&&(Xo.geometry.boundingSphere=new ro);for(let o=0,l=r.length;o<l;o++){if(!r[o].visible||!r[o].active)continue;const c=r[o].geometryIndex,u=i[c];Xo.geometry.setDrawRange(u.start,u.count),this.getMatrixAt(o,Xo.matrixWorld).premultiply(s),this.getBoundingBoxAt(c,Xo.geometry.boundingBox),this.getBoundingSphereAt(c,Xo.geometry.boundingSphere),Xo.raycast(e,sT);for(let d=0,h=sT.length;d<h;d++){const p=sT[d];p.object=this,p.batchId=o,t.push(p)}sT.length=0}Xo.material=null,Xo.geometry.index=null,Xo.geometry.attributes={},Xo.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,r,i,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const a=i.getIndex(),o=a===null?1:a.array.BYTES_PER_ELEMENT,l=this._instanceInfo,c=this._multiDrawStarts,u=this._multiDrawCounts,d=this._geometryInfo,h=this.perObjectFrustumCulled,p=this._indirectTexture,g=p.image.data,v=r.isArrayCamera?lue:KH;h&&!r.isArrayCamera&&(ac.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),KH.setFromProjectionMatrix(ac,r.coordinateSystem,r.reversedDepth));let b=0;if(this.sortObjects){ac.copy(this.matrixWorld).invert(),Sw.setFromMatrixPosition(r.matrixWorld).applyMatrix4(ac),YH.set(0,0,-1).transformDirection(r.matrixWorld).transformDirection(ac);for(let E=0,_=l.length;E<_;E++)if(l[E].visible&&l[E].active){const M=l[E].geometryIndex;this.getMatrixAt(E,ac),this.getBoundingSphereAt(M,Y0).applyMatrix4(ac);let R=!1;if(h&&(R=!v.intersectsSphere(Y0,r)),!R){const L=d[M],$=cue.subVectors(Y0.center,Sw).dot(YH);pO.push(L.start,L.count,$,E)}}const x=pO.list,C=this.customSort;C===null?x.sort(s.transparent?sue:iue):C.call(this,x,r);for(let E=0,_=x.length;E<_;E++){const M=x[E];c[b]=M.start*o,u[b]=M.count,g[b]=M.index,b++}pO.reset()}else for(let x=0,C=l.length;x<C;x++)if(l[x].visible&&l[x].active){const E=l[x].geometryIndex;let _=!1;if(h&&(this.getMatrixAt(x,ac),this.getBoundingSphereAt(E,Y0).applyMatrix4(ac),_=!v.intersectsSphere(Y0,r)),!_){const M=d[E];c[b]=M.start*o,u[b]=M.count,g[b]=x,b++}}p.needsUpdate=!0,this._multiDrawCount=b,this._visibilityChanged=!1}onBeforeShadow(e,t,r,i,s,a){this.onBeforeRender(e,null,i,s,a)}}class il extends Ua{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new sn(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const CR=new be,_R=new be,JH=new zn,ww=new T1,aT=new ro,mO=new be,ZH=new be;class Lp extends ei{constructor(e=new gr,t=new il){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)CR.fromBufferAttribute(t,i-1),_R.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=CR.distanceTo(_R);e.setAttribute("lineDistance",new An(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,a=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),aT.copy(r.boundingSphere),aT.applyMatrix4(i),aT.radius+=s,e.ray.intersectsSphere(aT)===!1)return;JH.copy(i).invert(),ww.copy(e.ray).applyMatrix4(JH);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,c=this.isLineSegments?2:1,u=r.index,h=r.attributes.position;if(u!==null){const p=Math.max(0,a.start),g=Math.min(u.count,a.start+a.count);for(let v=p,b=g-1;v<b;v+=c){const x=u.getX(v),C=u.getX(v+1),E=oT(this,e,ww,l,x,C,v);E&&t.push(E)}if(this.isLineLoop){const v=u.getX(g-1),b=u.getX(p),x=oT(this,e,ww,l,v,b,g-1);x&&t.push(x)}}else{const p=Math.max(0,a.start),g=Math.min(h.count,a.start+a.count);for(let v=p,b=g-1;v<b;v+=c){const x=oT(this,e,ww,l,v,v+1,v);x&&t.push(x)}if(this.isLineLoop){const v=oT(this,e,ww,l,g-1,p,g-1);v&&t.push(v)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=i.length;s<a;s++){const o=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}function oT(n,e,t,r,i,s,a){const o=n.geometry.attributes.position;if(CR.fromBufferAttribute(o,i),_R.fromBufferAttribute(o,s),t.distanceSqToSegment(CR,_R,mO,ZH)>r)return;mO.applyMatrix4(n.matrixWorld);const c=e.ray.origin.distanceTo(mO);if(!(c<e.near||c>e.far))return{distance:c,point:ZH.clone().applyMatrix4(n.matrixWorld),index:a,face:null,faceIndex:null,barycoord:null,object:n}}const QH=new be,e8=new be;class df extends Lp{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,s=t.count;i<s;i+=2)QH.fromBufferAttribute(t,i),e8.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+QH.distanceTo(e8);e.setAttribute("lineDistance",new An(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class xP extends Lp{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class rI extends Ua{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new sn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const t8=new zn,B$=new T1,lT=new ro,cT=new be;class SP extends ei{constructor(e=new gr,t=new rI){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,a=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),lT.copy(r.boundingSphere),lT.applyMatrix4(i),lT.radius+=s,e.ray.intersectsSphere(lT)===!1)return;t8.copy(i).invert(),B$.copy(e.ray).applyMatrix4(t8);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,c=r.index,d=r.attributes.position;if(c!==null){const h=Math.max(0,a.start),p=Math.min(c.count,a.start+a.count);for(let g=h,v=p;g<v;g++){const b=c.getX(g);cT.fromBufferAttribute(d,b),n8(cT,b,l,i,e,t,this)}}else{const h=Math.max(0,a.start),p=Math.min(d.count,a.start+a.count);for(let g=h,v=p;g<v;g++)cT.fromBufferAttribute(d,g),n8(cT,g,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=i.length;s<a;s++){const o=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}function n8(n,e,t,r,i,s,a){const o=B$.distanceSqToPoint(n);if(o<t){const l=new be;B$.closestPointToPoint(n,l),l.applyMatrix4(r);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;s.push({distance:c,distanceToRay:Math.sqrt(o),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:a})}}class RX extends Ti{constructor(e,t,r,i,s=ai,a=ai,o,l,c){super(e,t,r,i,s,a,o,l,c),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const u=this;function d(){u.needsUpdate=!0,u._requestVideoFrameCallbackId=e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(d))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),super.dispose()}}class due extends RX{constructor(e,t,r,i,s,a,o,l){super({},e,t,r,i,s,a,o,l),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class fue extends Ti{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=no,this.minFilter=no,this.generateMipmaps=!1,this.needsUpdate=!0}}class iI extends Ti{constructor(e,t,r,i,s,a,o,l,c,u,d,h){super(null,a,o,l,c,u,i,s,d,h),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class hue extends iI{constructor(e,t,r,i,s,a){super(e,t,r,s,a),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=oa,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class pue extends iI{constructor(e,t,r){super(void 0,e[0].width,e[0].height,t,r,bh),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class mue extends Ti{constructor(e,t,r,i,s,a,o,l,c){super(e,t,r,i,s,a,o,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class wP extends Ti{constructor(e,t,r=xh,i,s,a,o=no,l=no,c,u=Zx,d=1){if(u!==Zx&&u!==Qx)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const h={width:e,height:t,depth:d};super(h,i,s,a,o,l,u,r,c),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new ag(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class sI extends gr{constructor(e=1,t=1,r=4,i=8,s=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:r,radialSegments:i,heightSegments:s},t=Math.max(0,t),r=Math.max(1,Math.floor(r)),i=Math.max(3,Math.floor(i)),s=Math.max(1,Math.floor(s));const a=[],o=[],l=[],c=[],u=t/2,d=Math.PI/2*e,h=t,p=2*d+h,g=r*2+s,v=i+1,b=new be,x=new be;for(let C=0;C<=g;C++){let E=0,_=0,M=0,R=0;if(C<=r){const N=C/r,I=N*Math.PI/2;_=-u-e*Math.cos(I),M=e*Math.sin(I),R=-e*Math.cos(I),E=N*d}else if(C<=r+s){const N=(C-r)/s;_=-u+N*t,M=e,R=0,E=d+N*h}else{const N=(C-r-s)/r,I=N*Math.PI/2;_=u+e*Math.sin(I),M=e*Math.cos(I),R=e*Math.sin(I),E=d+h+N*d}const L=Math.max(0,Math.min(1,E/p));let $=0;C===0?$=.5/i:C===g&&($=-.5/i);for(let N=0;N<=i;N++){const I=N/i,k=I*Math.PI*2,P=Math.sin(k),G=Math.cos(k);x.x=-M*G,x.y=_,x.z=M*P,o.push(x.x,x.y,x.z),b.set(-M*G,R,M*P),b.normalize(),l.push(b.x,b.y,b.z),c.push(I+$,L)}if(C>0){const N=(C-1)*v;for(let I=0;I<i;I++){const k=N+I,P=N+I+1,G=C*v+I,W=C*v+I+1;a.push(k,P,G),a.push(P,W,G)}}}this.setIndex(a),this.setAttribute("position",new An(o,3)),this.setAttribute("normal",new An(l,3)),this.setAttribute("uv",new An(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sI(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class aI extends gr{constructor(e=1,t=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const s=[],a=[],o=[],l=[],c=new be,u=new Lt;a.push(0,0,0),o.push(0,0,1),l.push(.5,.5);for(let d=0,h=3;d<=t;d++,h+=3){const p=r+d/t*i;c.x=e*Math.cos(p),c.y=e*Math.sin(p),a.push(c.x,c.y,c.z),o.push(0,0,1),u.x=(a[h]/e+1)/2,u.y=(a[h+1]/e+1)/2,l.push(u.x,u.y)}for(let d=1;d<=t;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new An(a,3)),this.setAttribute("normal",new An(o,3)),this.setAttribute("uv",new An(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new aI(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class C_ extends gr{constructor(e=1,t=1,r=1,i=32,s=1,a=!1,o=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:l};const c=this;i=Math.floor(i),s=Math.floor(s);const u=[],d=[],h=[],p=[];let g=0;const v=[],b=r/2;let x=0;C(),a===!1&&(e>0&&E(!0),t>0&&E(!1)),this.setIndex(u),this.setAttribute("position",new An(d,3)),this.setAttribute("normal",new An(h,3)),this.setAttribute("uv",new An(p,2));function C(){const _=new be,M=new be;let R=0;const L=(t-e)/r;for(let $=0;$<=s;$++){const N=[],I=$/s,k=I*(t-e)+e;for(let P=0;P<=i;P++){const G=P/i,W=G*l+o,X=Math.sin(W),z=Math.cos(W);M.x=k*X,M.y=-I*r+b,M.z=k*z,d.push(M.x,M.y,M.z),_.set(X,L,z).normalize(),h.push(_.x,_.y,_.z),p.push(G,1-I),N.push(g++)}v.push(N)}for(let $=0;$<i;$++)for(let N=0;N<s;N++){const I=v[N][$],k=v[N+1][$],P=v[N+1][$+1],G=v[N][$+1];(e>0||N!==0)&&(u.push(I,k,G),R+=3),(t>0||N!==s-1)&&(u.push(k,P,G),R+=3)}c.addGroup(x,R,0),x+=R}function E(_){const M=g,R=new Lt,L=new be;let $=0;const N=_===!0?e:t,I=_===!0?1:-1;for(let P=1;P<=i;P++)d.push(0,b*I,0),h.push(0,I,0),p.push(.5,.5),g++;const k=g;for(let P=0;P<=i;P++){const W=P/i*l+o,X=Math.cos(W),z=Math.sin(W);L.x=N*z,L.y=b*I,L.z=N*X,d.push(L.x,L.y,L.z),h.push(0,I,0),R.x=X*.5+.5,R.y=z*.5*I+.5,p.push(R.x,R.y),g++}for(let P=0;P<i;P++){const G=M+P,W=k+P;_===!0?u.push(W,W+1,G):u.push(W+1,W,G),$+=3}c.addGroup(x,$,_===!0?1:2),x+=$}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new C_(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class __ extends C_{constructor(e=1,t=1,r=32,i=1,s=!1,a=0,o=Math.PI*2){super(0,e,t,r,i,s,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:a,thetaLength:o}}static fromJSON(e){return new __(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Pg extends gr{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const s=[],a=[];o(i),c(r),u(),this.setAttribute("position",new An(s,3)),this.setAttribute("normal",new An(s.slice(),3)),this.setAttribute("uv",new An(a,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function o(C){const E=new be,_=new be,M=new be;for(let R=0;R<t.length;R+=3)p(t[R+0],E),p(t[R+1],_),p(t[R+2],M),l(E,_,M,C)}function l(C,E,_,M){const R=M+1,L=[];for(let $=0;$<=R;$++){L[$]=[];const N=C.clone().lerp(_,$/R),I=E.clone().lerp(_,$/R),k=R-$;for(let P=0;P<=k;P++)P===0&&$===R?L[$][P]=N:L[$][P]=N.clone().lerp(I,P/k)}for(let $=0;$<R;$++)for(let N=0;N<2*(R-$)-1;N++){const I=Math.floor(N/2);N%2===0?(h(L[$][I+1]),h(L[$+1][I]),h(L[$][I])):(h(L[$][I+1]),h(L[$+1][I+1]),h(L[$+1][I]))}}function c(C){const E=new be;for(let _=0;_<s.length;_+=3)E.x=s[_+0],E.y=s[_+1],E.z=s[_+2],E.normalize().multiplyScalar(C),s[_+0]=E.x,s[_+1]=E.y,s[_+2]=E.z}function u(){const C=new be;for(let E=0;E<s.length;E+=3){C.x=s[E+0],C.y=s[E+1],C.z=s[E+2];const _=b(C)/2/Math.PI+.5,M=x(C)/Math.PI+.5;a.push(_,1-M)}g(),d()}function d(){for(let C=0;C<a.length;C+=6){const E=a[C+0],_=a[C+2],M=a[C+4],R=Math.max(E,_,M),L=Math.min(E,_,M);R>.9&&L<.1&&(E<.2&&(a[C+0]+=1),_<.2&&(a[C+2]+=1),M<.2&&(a[C+4]+=1))}}function h(C){s.push(C.x,C.y,C.z)}function p(C,E){const _=C*3;E.x=e[_+0],E.y=e[_+1],E.z=e[_+2]}function g(){const C=new be,E=new be,_=new be,M=new be,R=new Lt,L=new Lt,$=new Lt;for(let N=0,I=0;N<s.length;N+=9,I+=6){C.set(s[N+0],s[N+1],s[N+2]),E.set(s[N+3],s[N+4],s[N+5]),_.set(s[N+6],s[N+7],s[N+8]),R.set(a[I+0],a[I+1]),L.set(a[I+2],a[I+3]),$.set(a[I+4],a[I+5]),M.copy(C).add(E).add(_).divideScalar(3);const k=b(M);v(R,I+0,C,k),v(L,I+2,E,k),v($,I+4,_,k)}}function v(C,E,_,M){M<0&&C.x===1&&(a[E]=C.x-1),_.x===0&&_.z===0&&(a[E]=M/2/Math.PI+.5)}function b(C){return Math.atan2(C.z,-C.x)}function x(C){return Math.atan2(-C.y,Math.sqrt(C.x*C.x+C.z*C.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Pg(e.vertices,e.indices,e.radius,e.details)}}class oI extends Pg{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,a,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new oI(e.radius,e.detail)}}const uT=new be,dT=new be,gO=new be,fT=new pc;class NX extends gr{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(zy*t),a=e.getIndex(),o=e.getAttribute("position"),l=a?a.count:o.count,c=[0,0,0],u=["a","b","c"],d=new Array(3),h={},p=[];for(let g=0;g<l;g+=3){a?(c[0]=a.getX(g),c[1]=a.getX(g+1),c[2]=a.getX(g+2)):(c[0]=g,c[1]=g+1,c[2]=g+2);const{a:v,b,c:x}=fT;if(v.fromBufferAttribute(o,c[0]),b.fromBufferAttribute(o,c[1]),x.fromBufferAttribute(o,c[2]),fT.getNormal(gO),d[0]=`${Math.round(v.x*i)},${Math.round(v.y*i)},${Math.round(v.z*i)}`,d[1]=`${Math.round(b.x*i)},${Math.round(b.y*i)},${Math.round(b.z*i)}`,d[2]=`${Math.round(x.x*i)},${Math.round(x.y*i)},${Math.round(x.z*i)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let C=0;C<3;C++){const E=(C+1)%3,_=d[C],M=d[E],R=fT[u[C]],L=fT[u[E]],$=`${_}_${M}`,N=`${M}_${_}`;N in h&&h[N]?(gO.dot(h[N].normal)<=s&&(p.push(R.x,R.y,R.z),p.push(L.x,L.y,L.z)),h[N]=null):$ in h||(h[$]={index0:c[C],index1:c[E],normal:gO.clone()})}}for(const g in h)if(h[g]){const{index0:v,index1:b}=h[g];uT.fromBufferAttribute(o,v),dT.fromBufferAttribute(o,b),p.push(uT.x,uT.y,uT.z),p.push(dT.x,dT.y,dT.z)}this.setAttribute("position",new An(p,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class ff{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),s=0;t.push(0);for(let a=1;a<=e;a++)r=this.getPoint(a/e),s+=r.distanceTo(i),t.push(s),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const r=this.getLengths();let i=0;const s=r.length;let a;t?a=t:a=e*r[s-1];let o=0,l=s-1,c;for(;o<=l;)if(i=Math.floor(o+(l-o)/2),c=r[i]-a,c<0)o=i+1;else if(c>0)l=i-1;else{l=i;break}if(i=l,r[i]===a)return i/(s-1);const u=r[i],h=r[i+1]-u,p=(a-u)/h;return(i+p)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const a=this.getPoint(i),o=this.getPoint(s),l=t||(a.isVector2?new Lt:new be);return l.copy(o).sub(a).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t=!1){const r=new be,i=[],s=[],a=[],o=new be,l=new zn;for(let p=0;p<=e;p++){const g=p/e;i[p]=this.getTangentAt(g,new be)}s[0]=new be,a[0]=new be;let c=Number.MAX_VALUE;const u=Math.abs(i[0].x),d=Math.abs(i[0].y),h=Math.abs(i[0].z);u<=c&&(c=u,r.set(1,0,0)),d<=c&&(c=d,r.set(0,1,0)),h<=c&&r.set(0,0,1),o.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],o),a[0].crossVectors(i[0],s[0]);for(let p=1;p<=e;p++){if(s[p]=s[p-1].clone(),a[p]=a[p-1].clone(),o.crossVectors(i[p-1],i[p]),o.length()>Number.EPSILON){o.normalize();const g=Math.acos(nr(i[p-1].dot(i[p]),-1,1));s[p].applyMatrix4(l.makeRotationAxis(o,g))}a[p].crossVectors(i[p],s[p])}if(t===!0){let p=Math.acos(nr(s[0].dot(s[e]),-1,1));p/=e,i[0].dot(o.crossVectors(s[0],s[e]))>0&&(p=-p);for(let g=1;g<=e;g++)s[g].applyMatrix4(l.makeRotationAxis(i[g],p*g)),a[g].crossVectors(i[g],s[g])}return{tangents:i,normals:s,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class lI extends ff{constructor(e=0,t=0,r=1,i=1,s=0,a=Math.PI*2,o=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=a,this.aClockwise=o,this.aRotation=l}getPoint(e,t=new Lt){const r=t,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const a=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(a?s=0:s=i),this.aClockwise===!0&&!a&&(s===i?s=-i:s=s-i);const o=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(o),c=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const u=Math.cos(this.aRotation),d=Math.sin(this.aRotation),h=l-this.aX,p=c-this.aY;l=h*u-p*d+this.aX,c=h*d+p*u+this.aY}return r.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class IX extends lI{constructor(e,t,r,i,s,a){super(e,t,r,r,i,s,a),this.isArcCurve=!0,this.type="ArcCurve"}}function CP(){let n=0,e=0,t=0,r=0;function i(s,a,o,l){n=s,e=o,t=-3*s+3*a-2*o-l,r=2*s-2*a+o+l}return{initCatmullRom:function(s,a,o,l,c){i(a,o,c*(o-s),c*(l-a))},initNonuniformCatmullRom:function(s,a,o,l,c,u,d){let h=(a-s)/c-(o-s)/(c+u)+(o-a)/u,p=(o-a)/u-(l-a)/(u+d)+(l-o)/d;h*=u,p*=u,i(a,o,h,p)},calc:function(s){const a=s*s,o=a*s;return n+e*s+t*a+r*o}}}const hT=new be,yO=new CP,vO=new CP,bO=new CP;class DX extends ff{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new be){const r=t,i=this.points,s=i.length,a=(s-(this.closed?0:1))*e;let o=Math.floor(a),l=a-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/s)+1)*s:l===0&&o===s-1&&(o=s-2,l=1);let c,u;this.closed||o>0?c=i[(o-1)%s]:(hT.subVectors(i[0],i[1]).add(i[0]),c=hT);const d=i[o%s],h=i[(o+1)%s];if(this.closed||o+2<s?u=i[(o+2)%s]:(hT.subVectors(i[s-1],i[s-2]).add(i[s-1]),u=hT),this.curveType==="centripetal"||this.curveType==="chordal"){const p=this.curveType==="chordal"?.5:.25;let g=Math.pow(c.distanceToSquared(d),p),v=Math.pow(d.distanceToSquared(h),p),b=Math.pow(h.distanceToSquared(u),p);v<1e-4&&(v=1),g<1e-4&&(g=v),b<1e-4&&(b=v),yO.initNonuniformCatmullRom(c.x,d.x,h.x,u.x,g,v,b),vO.initNonuniformCatmullRom(c.y,d.y,h.y,u.y,g,v,b),bO.initNonuniformCatmullRom(c.z,d.z,h.z,u.z,g,v,b)}else this.curveType==="catmullrom"&&(yO.initCatmullRom(c.x,d.x,h.x,u.x,this.tension),vO.initCatmullRom(c.y,d.y,h.y,u.y,this.tension),bO.initCatmullRom(c.z,d.z,h.z,u.z,this.tension));return r.set(yO.calc(l),vO.calc(l),bO.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new be().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function r8(n,e,t,r,i){const s=(r-e)*.5,a=(i-t)*.5,o=n*n,l=n*o;return(2*t-2*r+s+a)*l+(-3*t+3*r-2*s-a)*o+s*n+t}function gue(n,e){const t=1-n;return t*t*e}function yue(n,e){return 2*(1-n)*n*e}function vue(n,e){return n*n*e}function gC(n,e,t,r){return gue(n,e)+yue(n,t)+vue(n,r)}function bue(n,e){const t=1-n;return t*t*t*e}function xue(n,e){const t=1-n;return 3*t*t*n*e}function Sue(n,e){return 3*(1-n)*n*n*e}function wue(n,e){return n*n*n*e}function yC(n,e,t,r,i){return bue(n,e)+xue(n,t)+Sue(n,r)+wue(n,i)}class _P extends ff{constructor(e=new Lt,t=new Lt,r=new Lt,i=new Lt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new Lt){const r=t,i=this.v0,s=this.v1,a=this.v2,o=this.v3;return r.set(yC(e,i.x,s.x,a.x,o.x),yC(e,i.y,s.y,a.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class kX extends ff{constructor(e=new be,t=new be,r=new be,i=new be){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new be){const r=t,i=this.v0,s=this.v1,a=this.v2,o=this.v3;return r.set(yC(e,i.x,s.x,a.x,o.x),yC(e,i.y,s.y,a.y,o.y),yC(e,i.z,s.z,a.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class EP extends ff{constructor(e=new Lt,t=new Lt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Lt){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Lt){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class OX extends ff{constructor(e=new be,t=new be){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new be){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new be){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class AP extends ff{constructor(e=new Lt,t=new Lt,r=new Lt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new Lt){const r=t,i=this.v0,s=this.v1,a=this.v2;return r.set(gC(e,i.x,s.x,a.x),gC(e,i.y,s.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class TP extends ff{constructor(e=new be,t=new be,r=new be){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new be){const r=t,i=this.v0,s=this.v1,a=this.v2;return r.set(gC(e,i.x,s.x,a.x),gC(e,i.y,s.y,a.y),gC(e,i.z,s.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class MP extends ff{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Lt){const r=t,i=this.points,s=(i.length-1)*e,a=Math.floor(s),o=s-a,l=i[a===0?a:a-1],c=i[a],u=i[a>i.length-2?i.length-1:a+1],d=i[a>i.length-3?i.length-1:a+2];return r.set(r8(o,l.x,c.x,u.x,d.x),r8(o,l.y,c.y,u.y,d.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new Lt().fromArray(i))}return this}}var ER=Object.freeze({__proto__:null,ArcCurve:IX,CatmullRomCurve3:DX,CubicBezierCurve:_P,CubicBezierCurve3:kX,EllipseCurve:lI,LineCurve:EP,LineCurve3:OX,QuadraticBezierCurve:AP,QuadraticBezierCurve3:TP,SplineCurve:MP});class BX extends ff{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new ER[r](t,e))}return this}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const a=i[s]-r,o=this.curves[s],l=o.getLength(),c=l===0?0:1-a/l;return o.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const a=s[i],o=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,l=a.getPoints(o);for(let c=0;c<l.length;c++){const u=l[c];r&&r.equals(u)||(t.push(u),r=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new ER[i.type]().fromJSON(i))}return this}}class AR extends BX{constructor(e){super(),this.type="Path",this.currentPoint=new Lt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new EP(this.currentPoint.clone(),new Lt(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const s=new AP(this.currentPoint.clone(),new Lt(e,t),new Lt(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,s,a){const o=new _P(this.currentPoint.clone(),new Lt(e,t),new Lt(r,i),new Lt(s,a));return this.curves.push(o),this.currentPoint.set(s,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new MP(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,s,a){const o=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+o,t+l,r,i,s,a),this}absarc(e,t,r,i,s,a){return this.absellipse(e,t,r,r,i,s,a),this}ellipse(e,t,r,i,s,a,o,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,t+u,r,i,s,a,o,l),this}absellipse(e,t,r,i,s,a,o,l){const c=new lI(e,t,r,i,s,a,o,l);if(this.curves.length>0){const d=c.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Hy extends AR{constructor(e){super(e),this.uuid=eu(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new AR().fromJSON(i))}return this}}function Cue(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let s=$X(n,0,i,t,!0);const a=[];if(!s||s.next===s.prev)return a;let o,l,c;if(r&&(s=Mue(n,e,s,t)),n.length>80*t){o=1/0,l=1/0;let u=-1/0,d=-1/0;for(let h=t;h<i;h+=t){const p=n[h],g=n[h+1];p<o&&(o=p),g<l&&(l=g),p>u&&(u=p),g>d&&(d=g)}c=Math.max(u-o,d-l),c=c!==0?32767/c:0}return $C(s,a,t,o,l,c,0),a}function $X(n,e,t,r,i){let s;if(i===Pue(n,e,t,r)>0)for(let a=e;a<t;a+=r)s=i8(a/r|0,n[a],n[a+1],s);else for(let a=t-r;a>=e;a-=r)s=i8(a/r|0,n[a],n[a+1],s);return s&&a1(s,s.next)&&(FC(s),s=s.next),s}function Zy(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(a1(t,t.next)||Ns(t.prev,t,t.next)===0)){if(FC(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function $C(n,e,t,r,i,s,a){if(!n)return;!a&&s&&kue(n,r,i,s);let o=n;for(;n.prev!==n.next;){const l=n.prev,c=n.next;if(s?Eue(n,r,i,s):_ue(n)){e.push(l.i,n.i,c.i),FC(n),n=c.next,o=c.next;continue}if(n=c,n===o){a?a===1?(n=Aue(Zy(n),e),$C(n,e,t,r,i,s,2)):a===2&&Tue(n,e,t,r,i,s):$C(Zy(n),e,t,r,i,s,1);break}}}function _ue(n){const e=n.prev,t=n,r=n.next;if(Ns(e,t,r)>=0)return!1;const i=e.x,s=t.x,a=r.x,o=e.y,l=t.y,c=r.y,u=Math.min(i,s,a),d=Math.min(o,l,c),h=Math.max(i,s,a),p=Math.max(o,l,c);let g=r.next;for(;g!==e;){if(g.x>=u&&g.x<=h&&g.y>=d&&g.y<=p&&qw(i,o,s,l,a,c,g.x,g.y)&&Ns(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function Eue(n,e,t,r){const i=n.prev,s=n,a=n.next;if(Ns(i,s,a)>=0)return!1;const o=i.x,l=s.x,c=a.x,u=i.y,d=s.y,h=a.y,p=Math.min(o,l,c),g=Math.min(u,d,h),v=Math.max(o,l,c),b=Math.max(u,d,h),x=$$(p,g,e,t,r),C=$$(v,b,e,t,r);let E=n.prevZ,_=n.nextZ;for(;E&&E.z>=x&&_&&_.z<=C;){if(E.x>=p&&E.x<=v&&E.y>=g&&E.y<=b&&E!==i&&E!==a&&qw(o,u,l,d,c,h,E.x,E.y)&&Ns(E.prev,E,E.next)>=0||(E=E.prevZ,_.x>=p&&_.x<=v&&_.y>=g&&_.y<=b&&_!==i&&_!==a&&qw(o,u,l,d,c,h,_.x,_.y)&&Ns(_.prev,_,_.next)>=0))return!1;_=_.nextZ}for(;E&&E.z>=x;){if(E.x>=p&&E.x<=v&&E.y>=g&&E.y<=b&&E!==i&&E!==a&&qw(o,u,l,d,c,h,E.x,E.y)&&Ns(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;_&&_.z<=C;){if(_.x>=p&&_.x<=v&&_.y>=g&&_.y<=b&&_!==i&&_!==a&&qw(o,u,l,d,c,h,_.x,_.y)&&Ns(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function Aue(n,e){let t=n;do{const r=t.prev,i=t.next.next;!a1(r,i)&&FX(r,t,t.next,i)&&LC(r,i)&&LC(i,r)&&(e.push(r.i,t.i,i.i),FC(t),FC(t.next),t=n=i),t=t.next}while(t!==n);return Zy(t)}function Tue(n,e,t,r,i,s){let a=n;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&$ue(a,o)){let l=PX(a,o);a=Zy(a,a.next),l=Zy(l,l.next),$C(a,e,t,r,i,s,0),$C(l,e,t,r,i,s,0);return}o=o.next}a=a.next}while(a!==n)}function Mue(n,e,t,r){const i=[];for(let s=0,a=e.length;s<a;s++){const o=e[s]*r,l=s<a-1?e[s+1]*r:n.length,c=$X(n,o,l,r,!1);c===c.next&&(c.steiner=!0),i.push(Bue(c))}i.sort(Rue);for(let s=0;s<i.length;s++)t=Nue(i[s],t);return t}function Rue(n,e){let t=n.x-e.x;if(t===0&&(t=n.y-e.y,t===0)){const r=(n.next.y-n.y)/(n.next.x-n.x),i=(e.next.y-e.y)/(e.next.x-e.x);t=r-i}return t}function Nue(n,e){const t=Iue(n,e);if(!t)return e;const r=PX(t,n);return Zy(r,r.next),Zy(t,t.next)}function Iue(n,e){let t=e;const r=n.x,i=n.y;let s=-1/0,a;if(a1(n,t))return t;do{if(a1(n,t.next))return t.next;if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){const d=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=r&&d>s&&(s=d,a=t.x<t.next.x?t:t.next,d===r))return a}t=t.next}while(t!==e);if(!a)return null;const o=a,l=a.x,c=a.y;let u=1/0;t=a;do{if(r>=t.x&&t.x>=l&&r!==t.x&&LX(i<c?r:s,i,l,c,i<c?s:r,i,t.x,t.y)){const d=Math.abs(i-t.y)/(r-t.x);LC(t,n)&&(d<u||d===u&&(t.x>a.x||t.x===a.x&&Due(a,t)))&&(a=t,u=d)}t=t.next}while(t!==o);return a}function Due(n,e){return Ns(n.prev,n,e.prev)<0&&Ns(e.next,n,n.next)<0}function kue(n,e,t,r){let i=n;do i.z===0&&(i.z=$$(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,Oue(i)}function Oue(n){let e,t=1;do{let r=n,i;n=null;let s=null;for(e=0;r;){e++;let a=r,o=0;for(let c=0;c<t&&(o++,a=a.nextZ,!!a);c++);let l=t;for(;o>0||l>0&&a;)o!==0&&(l===0||!a||r.z<=a.z)?(i=r,r=r.nextZ,o--):(i=a,a=a.nextZ,l--),s?s.nextZ=i:n=i,i.prevZ=s,s=i;r=a}s.nextZ=null,t*=2}while(e>1);return n}function $$(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function Bue(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function LX(n,e,t,r,i,s,a,o){return(i-a)*(e-o)>=(n-a)*(s-o)&&(n-a)*(r-o)>=(t-a)*(e-o)&&(t-a)*(s-o)>=(i-a)*(r-o)}function qw(n,e,t,r,i,s,a,o){return!(n===a&&e===o)&&LX(n,e,t,r,i,s,a,o)}function $ue(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!Lue(n,e)&&(LC(n,e)&&LC(e,n)&&Fue(n,e)&&(Ns(n.prev,n,e.prev)||Ns(n,e.prev,e))||a1(n,e)&&Ns(n.prev,n,n.next)>0&&Ns(e.prev,e,e.next)>0)}function Ns(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function a1(n,e){return n.x===e.x&&n.y===e.y}function FX(n,e,t,r){const i=mT(Ns(n,e,t)),s=mT(Ns(n,e,r)),a=mT(Ns(t,r,n)),o=mT(Ns(t,r,e));return!!(i!==s&&a!==o||i===0&&pT(n,t,e)||s===0&&pT(n,r,e)||a===0&&pT(t,n,r)||o===0&&pT(t,e,r))}function pT(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function mT(n){return n>0?1:n<0?-1:0}function Lue(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&FX(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function LC(n,e){return Ns(n.prev,n,n.next)<0?Ns(n,e,n.next)>=0&&Ns(n,n.prev,e)>=0:Ns(n,e,n.prev)<0||Ns(n,n.next,e)<0}function Fue(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function PX(n,e){const t=L$(n.i,n.x,n.y),r=L$(e.i,e.x,e.y),i=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function i8(n,e,t,r){const i=L$(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function FC(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function L$(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function Pue(n,e,t,r){let i=0;for(let s=e,a=t-r;s<t;s+=r)i+=(n[a]-n[s])*(n[s+1]+n[a+1]),a=s;return i}class Uue{static triangulate(e,t,r=2){return Cue(e,t,r)}}class Xd{static area(e){const t=e.length;let r=0;for(let i=t-1,s=0;s<t;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return Xd.area(e)<0}static triangulateShape(e,t){const r=[],i=[],s=[];s8(e),a8(r,e);let a=e.length;t.forEach(s8);for(let l=0;l<t.length;l++)i.push(a),a+=t[l].length,a8(r,t[l]);const o=Uue.triangulate(r,i);for(let l=0;l<o.length;l+=3)s.push(o.slice(l,l+3));return s}}function s8(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function a8(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class cI extends gr{constructor(e=new Hy([new Lt(.5,.5),new Lt(-.5,.5),new Lt(-.5,-.5),new Lt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let o=0,l=e.length;o<l;o++){const c=e[o];a(c)}this.setAttribute("position",new An(i,3)),this.setAttribute("uv",new An(s,2)),this.computeVertexNormals();function a(o){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:1;let h=t.bevelEnabled!==void 0?t.bevelEnabled:!0,p=t.bevelThickness!==void 0?t.bevelThickness:.2,g=t.bevelSize!==void 0?t.bevelSize:p-.1,v=t.bevelOffset!==void 0?t.bevelOffset:0,b=t.bevelSegments!==void 0?t.bevelSegments:3;const x=t.extrudePath,C=t.UVGenerator!==void 0?t.UVGenerator:zue;let E,_=!1,M,R,L,$;x&&(E=x.getSpacedPoints(u),_=!0,h=!1,M=x.computeFrenetFrames(u,!1),R=new be,L=new be,$=new be),h||(b=0,p=0,g=0,v=0);const N=o.extractPoints(c);let I=N.shape;const k=N.holes;if(!Xd.isClockWise(I)){I=I.reverse();for(let Le=0,Ue=k.length;Le<Ue;Le++){const Ze=k[Le];Xd.isClockWise(Ze)&&(k[Le]=Ze.reverse())}}function G(Le){const Ze=10000000000000001e-36;let je=Le[0];for(let lt=1;lt<=Le.length;lt++){const st=lt%Le.length,ot=Le[st],Ut=ot.x-je.x,mt=ot.y-je.y,ce=Ut*Ut+mt*mt,re=Math.max(Math.abs(ot.x),Math.abs(ot.y),Math.abs(je.x),Math.abs(je.y)),$e=Ze*re*re;if(ce<=$e){Le.splice(st,1),lt--;continue}je=ot}}G(I),k.forEach(G);const W=k.length,X=I;for(let Le=0;Le<W;Le++){const Ue=k[Le];I=I.concat(Ue)}function z(Le,Ue,Ze){return Ue||console.error("THREE.ExtrudeGeometry: vec does not exist"),Le.clone().addScaledVector(Ue,Ze)}const J=I.length;function Q(Le,Ue,Ze){let je,lt,st;const ot=Le.x-Ue.x,Ut=Le.y-Ue.y,mt=Ze.x-Le.x,ce=Ze.y-Le.y,re=ot*ot+Ut*Ut,$e=ot*ce-Ut*mt;if(Math.abs($e)>Number.EPSILON){const Xe=Math.sqrt(re),at=Math.sqrt(mt*mt+ce*ce),et=Ue.x-Ut/Xe,Ft=Ue.y+ot/Xe,At=Ze.x-ce/at,_t=Ze.y+mt/at,Xt=((At-et)*ce-(_t-Ft)*mt)/(ot*ce-Ut*mt);je=et+ot*Xt-Le.x,lt=Ft+Ut*Xt-Le.y;const yt=je*je+lt*lt;if(yt<=2)return new Lt(je,lt);st=Math.sqrt(yt/2)}else{let Xe=!1;ot>Number.EPSILON?mt>Number.EPSILON&&(Xe=!0):ot<-Number.EPSILON?mt<-Number.EPSILON&&(Xe=!0):Math.sign(Ut)===Math.sign(ce)&&(Xe=!0),Xe?(je=-Ut,lt=ot,st=Math.sqrt(re)):(je=ot,lt=Ut,st=Math.sqrt(re/2))}return new Lt(je/st,lt/st)}const Y=[];for(let Le=0,Ue=X.length,Ze=Ue-1,je=Le+1;Le<Ue;Le++,Ze++,je++)Ze===Ue&&(Ze=0),je===Ue&&(je=0),Y[Le]=Q(X[Le],X[Ze],X[je]);const q=[];let te,ne=Y.concat();for(let Le=0,Ue=W;Le<Ue;Le++){const Ze=k[Le];te=[];for(let je=0,lt=Ze.length,st=lt-1,ot=je+1;je<lt;je++,st++,ot++)st===lt&&(st=0),ot===lt&&(ot=0),te[je]=Q(Ze[je],Ze[st],Ze[ot]);q.push(te),ne=ne.concat(te)}let le;if(b===0)le=Xd.triangulateShape(X,k);else{const Le=[],Ue=[];for(let Ze=0;Ze<b;Ze++){const je=Ze/b,lt=p*Math.cos(je*Math.PI/2),st=g*Math.sin(je*Math.PI/2)+v;for(let ot=0,Ut=X.length;ot<Ut;ot++){const mt=z(X[ot],Y[ot],st);ze(mt.x,mt.y,-lt),je===0&&Le.push(mt)}for(let ot=0,Ut=W;ot<Ut;ot++){const mt=k[ot];te=q[ot];const ce=[];for(let re=0,$e=mt.length;re<$e;re++){const Xe=z(mt[re],te[re],st);ze(Xe.x,Xe.y,-lt),je===0&&ce.push(Xe)}je===0&&Ue.push(ce)}}le=Xd.triangulateShape(Le,Ue)}const ye=le.length,ue=g+v;for(let Le=0;Le<J;Le++){const Ue=h?z(I[Le],ne[Le],ue):I[Le];_?(L.copy(M.normals[0]).multiplyScalar(Ue.x),R.copy(M.binormals[0]).multiplyScalar(Ue.y),$.copy(E[0]).add(L).add(R),ze($.x,$.y,$.z)):ze(Ue.x,Ue.y,0)}for(let Le=1;Le<=u;Le++)for(let Ue=0;Ue<J;Ue++){const Ze=h?z(I[Ue],ne[Ue],ue):I[Ue];_?(L.copy(M.normals[Le]).multiplyScalar(Ze.x),R.copy(M.binormals[Le]).multiplyScalar(Ze.y),$.copy(E[Le]).add(L).add(R),ze($.x,$.y,$.z)):ze(Ze.x,Ze.y,d/u*Le)}for(let Le=b-1;Le>=0;Le--){const Ue=Le/b,Ze=p*Math.cos(Ue*Math.PI/2),je=g*Math.sin(Ue*Math.PI/2)+v;for(let lt=0,st=X.length;lt<st;lt++){const ot=z(X[lt],Y[lt],je);ze(ot.x,ot.y,d+Ze)}for(let lt=0,st=k.length;lt<st;lt++){const ot=k[lt];te=q[lt];for(let Ut=0,mt=ot.length;Ut<mt;Ut++){const ce=z(ot[Ut],te[Ut],je);_?ze(ce.x,ce.y+E[u-1].y,E[u-1].x+Ze):ze(ce.x,ce.y,d+Ze)}}}ve(),xe();function ve(){const Le=i.length/3;if(h){let Ue=0,Ze=J*Ue;for(let je=0;je<ye;je++){const lt=le[je];Ke(lt[2]+Ze,lt[1]+Ze,lt[0]+Ze)}Ue=u+b*2,Ze=J*Ue;for(let je=0;je<ye;je++){const lt=le[je];Ke(lt[0]+Ze,lt[1]+Ze,lt[2]+Ze)}}else{for(let Ue=0;Ue<ye;Ue++){const Ze=le[Ue];Ke(Ze[2],Ze[1],Ze[0])}for(let Ue=0;Ue<ye;Ue++){const Ze=le[Ue];Ke(Ze[0]+J*u,Ze[1]+J*u,Ze[2]+J*u)}}r.addGroup(Le,i.length/3-Le,0)}function xe(){const Le=i.length/3;let Ue=0;Pe(X,Ue),Ue+=X.length;for(let Ze=0,je=k.length;Ze<je;Ze++){const lt=k[Ze];Pe(lt,Ue),Ue+=lt.length}r.addGroup(Le,i.length/3-Le,1)}function Pe(Le,Ue){let Ze=Le.length;for(;--Ze>=0;){const je=Ze;let lt=Ze-1;lt<0&&(lt=Le.length-1);for(let st=0,ot=u+b*2;st<ot;st++){const Ut=J*st,mt=J*(st+1),ce=Ue+je+Ut,re=Ue+lt+Ut,$e=Ue+lt+mt,Xe=Ue+je+mt;pt(ce,re,$e,Xe)}}}function ze(Le,Ue,Ze){l.push(Le),l.push(Ue),l.push(Ze)}function Ke(Le,Ue,Ze){dt(Le),dt(Ue),dt(Ze);const je=i.length/3,lt=C.generateTopUV(r,i,je-3,je-2,je-1);pe(lt[0]),pe(lt[1]),pe(lt[2])}function pt(Le,Ue,Ze,je){dt(Le),dt(Ue),dt(je),dt(Ue),dt(Ze),dt(je);const lt=i.length/3,st=C.generateSideWallUV(r,i,lt-6,lt-3,lt-2,lt-1);pe(st[0]),pe(st[1]),pe(st[3]),pe(st[1]),pe(st[2]),pe(st[3])}function dt(Le){i.push(l[Le*3+0]),i.push(l[Le*3+1]),i.push(l[Le*3+2])}function pe(Le){s.push(Le.x),s.push(Le.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return Hue(t,r,e)}static fromJSON(e,t){const r=[];for(let s=0,a=e.shapes.length;s<a;s++){const o=t[e.shapes[s]];r.push(o)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new ER[i.type]().fromJSON(i)),new cI(r,e.options)}}const zue={generateTopUV:function(n,e,t,r,i){const s=e[t*3],a=e[t*3+1],o=e[r*3],l=e[r*3+1],c=e[i*3],u=e[i*3+1];return[new Lt(s,a),new Lt(o,l),new Lt(c,u)]},generateSideWallUV:function(n,e,t,r,i,s){const a=e[t*3],o=e[t*3+1],l=e[t*3+2],c=e[r*3],u=e[r*3+1],d=e[r*3+2],h=e[i*3],p=e[i*3+1],g=e[i*3+2],v=e[s*3],b=e[s*3+1],x=e[s*3+2];return Math.abs(o-u)<Math.abs(a-c)?[new Lt(a,1-l),new Lt(c,1-d),new Lt(h,1-g),new Lt(v,1-x)]:[new Lt(o,1-l),new Lt(u,1-d),new Lt(p,1-g),new Lt(b,1-x)]}};function Hue(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const s=n[r];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class E_ extends Pg{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new E_(e.radius,e.detail)}}class uI extends gr{constructor(e=[new Lt(0,-.5),new Lt(.5,0),new Lt(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=nr(i,0,Math.PI*2);const s=[],a=[],o=[],l=[],c=[],u=1/t,d=new be,h=new Lt,p=new be,g=new be,v=new be;let b=0,x=0;for(let C=0;C<=e.length-1;C++)switch(C){case 0:b=e[C+1].x-e[C].x,x=e[C+1].y-e[C].y,p.x=x*1,p.y=-b,p.z=x*0,v.copy(p),p.normalize(),l.push(p.x,p.y,p.z);break;case e.length-1:l.push(v.x,v.y,v.z);break;default:b=e[C+1].x-e[C].x,x=e[C+1].y-e[C].y,p.x=x*1,p.y=-b,p.z=x*0,g.copy(p),p.x+=v.x,p.y+=v.y,p.z+=v.z,p.normalize(),l.push(p.x,p.y,p.z),v.copy(g)}for(let C=0;C<=t;C++){const E=r+C*u*i,_=Math.sin(E),M=Math.cos(E);for(let R=0;R<=e.length-1;R++){d.x=e[R].x*_,d.y=e[R].y,d.z=e[R].x*M,a.push(d.x,d.y,d.z),h.x=C/t,h.y=R/(e.length-1),o.push(h.x,h.y);const L=l[3*R+0]*_,$=l[3*R+1],N=l[3*R+0]*M;c.push(L,$,N)}}for(let C=0;C<t;C++)for(let E=0;E<e.length-1;E++){const _=E+C*e.length,M=_,R=_+e.length,L=_+e.length+1,$=_+1;s.push(M,R,$),s.push(L,$,R)}this.setIndex(s),this.setAttribute("position",new An(a,3)),this.setAttribute("uv",new An(o,2)),this.setAttribute("normal",new An(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new uI(e.points,e.segments,e.phiStart,e.phiLength)}}class A_ extends Pg{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new A_(e.radius,e.detail)}}class Xp extends gr{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,a=t/2,o=Math.floor(r),l=Math.floor(i),c=o+1,u=l+1,d=e/o,h=t/l,p=[],g=[],v=[],b=[];for(let x=0;x<u;x++){const C=x*h-a;for(let E=0;E<c;E++){const _=E*d-s;g.push(_,-C,0),v.push(0,0,1),b.push(E/o),b.push(1-x/l)}}for(let x=0;x<l;x++)for(let C=0;C<o;C++){const E=C+c*x,_=C+c*(x+1),M=C+1+c*(x+1),R=C+1+c*x;p.push(E,_,R),p.push(_,M,R)}this.setIndex(p),this.setAttribute("position",new An(g,3)),this.setAttribute("normal",new An(v,3)),this.setAttribute("uv",new An(b,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Xp(e.width,e.height,e.widthSegments,e.heightSegments)}}class dI extends gr{constructor(e=.5,t=1,r=32,i=1,s=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:a},r=Math.max(3,r),i=Math.max(1,i);const o=[],l=[],c=[],u=[];let d=e;const h=(t-e)/i,p=new be,g=new Lt;for(let v=0;v<=i;v++){for(let b=0;b<=r;b++){const x=s+b/r*a;p.x=d*Math.cos(x),p.y=d*Math.sin(x),l.push(p.x,p.y,p.z),c.push(0,0,1),g.x=(p.x/t+1)/2,g.y=(p.y/t+1)/2,u.push(g.x,g.y)}d+=h}for(let v=0;v<i;v++){const b=v*(r+1);for(let x=0;x<r;x++){const C=x+b,E=C,_=C+r+1,M=C+r+2,R=C+1;o.push(E,_,R),o.push(_,M,R)}}this.setIndex(o),this.setAttribute("position",new An(l,3)),this.setAttribute("normal",new An(c,3)),this.setAttribute("uv",new An(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new dI(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class fI extends gr{constructor(e=new Hy([new Lt(0,.5),new Lt(-.5,-.5),new Lt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],s=[],a=[];let o=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(o,l,u),o+=l,l=0;this.setIndex(r),this.setAttribute("position",new An(i,3)),this.setAttribute("normal",new An(s,3)),this.setAttribute("uv",new An(a,2));function c(u){const d=i.length/3,h=u.extractPoints(t);let p=h.shape;const g=h.holes;Xd.isClockWise(p)===!1&&(p=p.reverse());for(let b=0,x=g.length;b<x;b++){const C=g[b];Xd.isClockWise(C)===!0&&(g[b]=C.reverse())}const v=Xd.triangulateShape(p,g);for(let b=0,x=g.length;b<x;b++){const C=g[b];p=p.concat(C)}for(let b=0,x=p.length;b<x;b++){const C=p[b];i.push(C.x,C.y,0),s.push(0,0,1),a.push(C.x,C.y)}for(let b=0,x=v.length;b<x;b++){const C=v[b],E=C[0]+d,_=C[1]+d,M=C[2]+d;r.push(E,_,M),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return Vue(t,e)}static fromJSON(e,t){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const a=t[e.shapes[i]];r.push(a)}return new fI(r,e.curveSegments)}}function Vue(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class T_ extends gr{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(a+o,Math.PI);let c=0;const u=[],d=new be,h=new be,p=[],g=[],v=[],b=[];for(let x=0;x<=r;x++){const C=[],E=x/r;let _=0;x===0&&a===0?_=.5/t:x===r&&l===Math.PI&&(_=-.5/t);for(let M=0;M<=t;M++){const R=M/t;d.x=-e*Math.cos(i+R*s)*Math.sin(a+E*o),d.y=e*Math.cos(a+E*o),d.z=e*Math.sin(i+R*s)*Math.sin(a+E*o),g.push(d.x,d.y,d.z),h.copy(d).normalize(),v.push(h.x,h.y,h.z),b.push(R+_,1-E),C.push(c++)}u.push(C)}for(let x=0;x<r;x++)for(let C=0;C<t;C++){const E=u[x][C+1],_=u[x][C],M=u[x+1][C],R=u[x+1][C+1];(x!==0||a>0)&&p.push(E,_,R),(x!==r-1||l<Math.PI)&&p.push(_,M,R)}this.setIndex(p),this.setAttribute("position",new An(g,3)),this.setAttribute("normal",new An(v,3)),this.setAttribute("uv",new An(b,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new T_(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class hI extends Pg{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new hI(e.radius,e.detail)}}class pI extends gr{constructor(e=1,t=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const a=[],o=[],l=[],c=[],u=new be,d=new be,h=new be;for(let p=0;p<=r;p++)for(let g=0;g<=i;g++){const v=g/i*s,b=p/r*Math.PI*2;d.x=(e+t*Math.cos(b))*Math.cos(v),d.y=(e+t*Math.cos(b))*Math.sin(v),d.z=t*Math.sin(b),o.push(d.x,d.y,d.z),u.x=e*Math.cos(v),u.y=e*Math.sin(v),h.subVectors(d,u).normalize(),l.push(h.x,h.y,h.z),c.push(g/i),c.push(p/r)}for(let p=1;p<=r;p++)for(let g=1;g<=i;g++){const v=(i+1)*p+g-1,b=(i+1)*(p-1)+g-1,x=(i+1)*(p-1)+g,C=(i+1)*p+g;a.push(v,b,C),a.push(b,x,C)}this.setIndex(a),this.setAttribute("position",new An(o,3)),this.setAttribute("normal",new An(l,3)),this.setAttribute("uv",new An(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new pI(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class mI extends gr{constructor(e=1,t=.4,r=64,i=8,s=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:s,q:a},r=Math.floor(r),i=Math.floor(i);const o=[],l=[],c=[],u=[],d=new be,h=new be,p=new be,g=new be,v=new be,b=new be,x=new be;for(let E=0;E<=r;++E){const _=E/r*s*Math.PI*2;C(_,s,a,e,p),C(_+.01,s,a,e,g),b.subVectors(g,p),x.addVectors(g,p),v.crossVectors(b,x),x.crossVectors(v,b),v.normalize(),x.normalize();for(let M=0;M<=i;++M){const R=M/i*Math.PI*2,L=-t*Math.cos(R),$=t*Math.sin(R);d.x=p.x+(L*x.x+$*v.x),d.y=p.y+(L*x.y+$*v.y),d.z=p.z+(L*x.z+$*v.z),l.push(d.x,d.y,d.z),h.subVectors(d,p).normalize(),c.push(h.x,h.y,h.z),u.push(E/r),u.push(M/i)}}for(let E=1;E<=r;E++)for(let _=1;_<=i;_++){const M=(i+1)*(E-1)+(_-1),R=(i+1)*E+(_-1),L=(i+1)*E+_,$=(i+1)*(E-1)+_;o.push(M,R,$),o.push(R,L,$)}this.setIndex(o),this.setAttribute("position",new An(l,3)),this.setAttribute("normal",new An(c,3)),this.setAttribute("uv",new An(u,2));function C(E,_,M,R,L){const $=Math.cos(E),N=Math.sin(E),I=M/_*E,k=Math.cos(I);L.x=R*(2+k)*.5*$,L.y=R*(2+k)*N*.5,L.z=R*Math.sin(I)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new mI(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class gI extends gr{constructor(e=new TP(new be(-1,-1,0),new be(-1,1,0),new be(1,1,0)),t=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:s};const a=e.computeFrenetFrames(t,s);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const o=new be,l=new be,c=new Lt;let u=new be;const d=[],h=[],p=[],g=[];v(),this.setIndex(g),this.setAttribute("position",new An(d,3)),this.setAttribute("normal",new An(h,3)),this.setAttribute("uv",new An(p,2));function v(){for(let E=0;E<t;E++)b(E);b(s===!1?t:0),C(),x()}function b(E){u=e.getPointAt(E/t,u);const _=a.normals[E],M=a.binormals[E];for(let R=0;R<=i;R++){const L=R/i*Math.PI*2,$=Math.sin(L),N=-Math.cos(L);l.x=N*_.x+$*M.x,l.y=N*_.y+$*M.y,l.z=N*_.z+$*M.z,l.normalize(),h.push(l.x,l.y,l.z),o.x=u.x+r*l.x,o.y=u.y+r*l.y,o.z=u.z+r*l.z,d.push(o.x,o.y,o.z)}}function x(){for(let E=1;E<=t;E++)for(let _=1;_<=i;_++){const M=(i+1)*(E-1)+(_-1),R=(i+1)*E+(_-1),L=(i+1)*E+_,$=(i+1)*(E-1)+_;g.push(M,R,$),g.push(R,L,$)}}function C(){for(let E=0;E<=t;E++)for(let _=0;_<=i;_++)c.x=E/t,c.y=_/i,p.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new gI(new ER[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class UX extends gr{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new be,s=new be;if(e.index!==null){const a=e.attributes.position,o=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:o.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const d=l[c],h=d.start,p=d.count;for(let g=h,v=h+p;g<v;g+=3)for(let b=0;b<3;b++){const x=o.getX(g+b),C=o.getX(g+(b+1)%3);i.fromBufferAttribute(a,x),s.fromBufferAttribute(a,C),o8(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const a=e.attributes.position;for(let o=0,l=a.count/3;o<l;o++)for(let c=0;c<3;c++){const u=3*o+c,d=3*o+(c+1)%3;i.fromBufferAttribute(a,u),s.fromBufferAttribute(a,d),o8(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new An(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function o8(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var l8=Object.freeze({__proto__:null,BoxGeometry:Fg,CapsuleGeometry:sI,CircleGeometry:aI,ConeGeometry:__,CylinderGeometry:C_,DodecahedronGeometry:oI,EdgesGeometry:NX,ExtrudeGeometry:cI,IcosahedronGeometry:E_,LatheGeometry:uI,OctahedronGeometry:A_,PlaneGeometry:Xp,PolyhedronGeometry:Pg,RingGeometry:dI,ShapeGeometry:fI,SphereGeometry:T_,TetrahedronGeometry:hI,TorusGeometry:pI,TorusKnotGeometry:mI,TubeGeometry:gI,WireframeGeometry:UX});class zX extends Ua{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new sn(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class HX extends No{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class M_ extends Ua{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new sn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new sn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lg,this.normalScale=new Lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Cc,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Ju extends M_{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Lt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return nr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new sn(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new sn(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new sn(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class VX extends Ua{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new sn(16777215),this.specular=new sn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new sn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lg,this.normalScale=new Lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Cc,this.combine=m_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class GX extends Ua{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new sn(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new sn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lg,this.normalScale=new Lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class WX extends Ua{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lg,this.normalScale=new Lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class jX extends Ua{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new sn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new sn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lg,this.normalScale=new Lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Cc,this.combine=m_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class yI extends Ua{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=cX,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class RP extends Ua{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class qX extends Ua{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new sn(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lg,this.normalScale=new Lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class XX extends il{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Ny(n,e){return!n||n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function KX(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function YX(n){function e(i,s){return n[i]-n[s]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function F$(n,e,t){const r=n.length,i=new n.constructor(r);for(let s=0,a=0;a!==r;++s){const o=t[s]*e;for(let l=0;l!==e;++l)i[a++]=n[o+l]}return i}function NP(n,e,t,r){let i=1,s=n[0];for(;s!==void 0&&s[r]===void 0;)s=n[i++];if(s===void 0)return;let a=s[r];if(a!==void 0)if(Array.isArray(a))do a=s[r],a!==void 0&&(e.push(s.time),t.push(...a)),s=n[i++];while(s!==void 0);else if(a.toArray!==void 0)do a=s[r],a!==void 0&&(e.push(s.time),a.toArray(t,t.length)),s=n[i++];while(s!==void 0);else do a=s[r],a!==void 0&&(e.push(s.time),t.push(a)),s=n[i++];while(s!==void 0)}function Gue(n,e,t,r,i=30){const s=n.clone();s.name=e;const a=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),d=[],h=[];for(let p=0;p<c.times.length;++p){const g=c.times[p]*i;if(!(g<t||g>=r)){d.push(c.times[p]);for(let v=0;v<u;++v)h.push(c.values[p*u+v])}}d.length!==0&&(c.times=Ny(d,c.times.constructor),c.values=Ny(h,c.values.constructor),a.push(c))}s.tracks=a;let o=1/0;for(let l=0;l<s.tracks.length;++l)o>s.tracks[l].times[0]&&(o=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*o);return s.resetDuration(),s}function Wue(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,s=e/r;for(let a=0;a<i;++a){const o=t.tracks[a],l=o.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(x){return x.name===o.name&&x.ValueTypeName===l});if(c===void 0)continue;let u=0;const d=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=d/3);let h=0;const p=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=p/3);const g=o.times.length-1;let v;if(s<=o.times[0]){const x=u,C=d-u;v=o.values.slice(x,C)}else if(s>=o.times[g]){const x=g*d+u,C=x+d-u;v=o.values.slice(x,C)}else{const x=o.createInterpolant(),C=u,E=d-u;x.evaluate(s),v=x.resultBuffer.slice(C,E)}l==="quaternion"&&new ua().fromArray(v).normalize().conjugate().toArray(v);const b=c.times.length;for(let x=0;x<b;++x){const C=x*p+h;if(l==="quaternion")ua.multiplyQuaternionsFlat(c.values,C,v,0,c.values,C);else{const E=p-h*2;for(let _=0;_<E;++_)c.values[C+_]-=v[_]}}}return n.blendMode=oP,n}class jue{static convertArray(e,t){return Ny(e,t)}static isTypedArray(e){return KX(e)}static getKeyframeOrder(e){return YX(e)}static sortedArray(e,t,r){return F$(e,t,r)}static flattenJSON(e,t,r,i){NP(e,t,r,i)}static subclip(e,t,r,i,s=30){return Gue(e,t,r,i,s)}static makeClipAdditive(e,t=0,r=e,i=30){return Wue(e,t,r,i)}}class R1{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],s=t[r-1];e:{t:{let a;n:{r:if(!(e<i)){for(let o=r+2;;){if(i===void 0){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===o)break;if(s=i,i=t[++r],e<i)break t}a=t.length;break n}if(!(e>=s)){const o=t[1];e<o&&(r=2,s=o);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=t[--r-1],e>=s)break t}a=r,r=0;break n}break e}for(;r<a;){const o=r+a>>>1;e<t[o]?a=o:r=o+1}if(i=t[r],s=t[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let a=0;a!==i;++a)t[a]=r[s+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class JX extends R1{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:My,endingEnd:My}}intervalChanged_(e,t,r){const i=this.parameterPositions;let s=e-2,a=e+1,o=i[s],l=i[a];if(o===void 0)switch(this.getSettings_().endingStart){case Ry:s=e,o=2*t-r;break;case DC:s=i.length-2,o=t+i[s]-i[s+1];break;default:s=e,o=r}if(l===void 0)switch(this.getSettings_().endingEnd){case Ry:a=e,l=2*r-t;break;case DC:a=1,l=r+i[1]-i[0];break;default:a=e-1,l=t}const c=(r-t)*.5,u=this.valueSize;this._weightPrev=c/(t-o),this._weightNext=c/(l-r),this._offsetPrev=s*u,this._offsetNext=a*u}interpolate_(e,t,r,i){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,c=l-o,u=this._offsetPrev,d=this._offsetNext,h=this._weightPrev,p=this._weightNext,g=(r-t)/(i-t),v=g*g,b=v*g,x=-h*b+2*h*v-h*g,C=(1+h)*b+(-1.5-2*h)*v+(-.5+h)*g+1,E=(-1-p)*b+(1.5+p)*v+.5*g,_=p*b-p*v;for(let M=0;M!==o;++M)s[M]=x*a[u+M]+C*a[c+M]+E*a[l+M]+_*a[d+M];return s}}class IP extends R1{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,c=l-o,u=(r-t)/(i-t),d=1-u;for(let h=0;h!==o;++h)s[h]=a[c+h]*d+a[l+h]*u;return s}}class ZX extends R1{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Zu{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Ny(t,this.TimeBufferType),this.values=Ny(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:Ny(e.times,Array),values:Ny(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new ZX(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new IP(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new JX(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case e1:t=this.InterpolantFactoryMethodDiscrete;break;case t1:t=this.InterpolantFactoryMethodLinear;break;case dM:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return e1;case this.InterpolantFactoryMethodLinear:return t1;case this.InterpolantFactoryMethodSmooth:return dM}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let s=0,a=i-1;for(;s!==i&&r[s]<e;)++s;for(;a!==-1&&r[a]>t;)--a;if(++a,s!==0||a!==i){s>=a&&(a=Math.max(a,1),s=a-1);const o=this.getValueSize();this.times=r.slice(s,a),this.values=this.values.slice(s*o,a*o)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let o=0;o!==s;o++){const l=r[o];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,l),e=!1;break}if(a!==null&&a>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,l,a),e=!1;break}a=l}if(i!==void 0&&KX(i))for(let o=0,l=i.length;o!==l;++o){const c=i[o];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===dM,s=e.length-1;let a=1;for(let o=1;o<s;++o){let l=!1;const c=e[o],u=e[o+1];if(c!==u&&(o!==1||c!==e[0]))if(i)l=!0;else{const d=o*r,h=d-r,p=d+r;for(let g=0;g!==r;++g){const v=t[d+g];if(v!==t[h+g]||v!==t[p+g]){l=!0;break}}}if(l){if(o!==a){e[a]=e[o];const d=o*r,h=a*r;for(let p=0;p!==r;++p)t[h+p]=t[d+p]}++a}}if(s>0){e[a]=e[s];for(let o=s*r,l=a*r,c=0;c!==r;++c)t[l+c]=t[o+c];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*r)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Zu.prototype.ValueTypeName="";Zu.prototype.TimeBufferType=Float32Array;Zu.prototype.ValueBufferType=Float32Array;Zu.prototype.DefaultInterpolation=t1;class Cv extends Zu{constructor(e,t,r){super(e,t,r)}}Cv.prototype.ValueTypeName="bool";Cv.prototype.ValueBufferType=Array;Cv.prototype.DefaultInterpolation=e1;Cv.prototype.InterpolantFactoryMethodLinear=void 0;Cv.prototype.InterpolantFactoryMethodSmooth=void 0;class DP extends Zu{constructor(e,t,r,i){super(e,t,r,i)}}DP.prototype.ValueTypeName="color";class Qy extends Zu{constructor(e,t,r,i){super(e,t,r,i)}}Qy.prototype.ValueTypeName="number";class QX extends R1{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=(r-t)/(i-t);let c=e*o;for(let u=c+o;c!==u;c+=4)ua.slerpFlat(s,0,a,c-o,a,c,l);return s}}class ev extends Zu{constructor(e,t,r,i){super(e,t,r,i)}InterpolantFactoryMethodLinear(e){return new QX(this.times,this.values,this.getValueSize(),e)}}ev.prototype.ValueTypeName="quaternion";ev.prototype.InterpolantFactoryMethodSmooth=void 0;class _v extends Zu{constructor(e,t,r){super(e,t,r)}}_v.prototype.ValueTypeName="string";_v.prototype.ValueBufferType=Array;_v.prototype.DefaultInterpolation=e1;_v.prototype.InterpolantFactoryMethodLinear=void 0;_v.prototype.InterpolantFactoryMethodSmooth=void 0;class tv extends Zu{constructor(e,t,r,i){super(e,t,r,i)}}tv.prototype.ValueTypeName="vector";class o1{constructor(e="",t=-1,r=[],i=KN){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=eu(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let a=0,o=r.length;a!==o;++a)t.push(Xue(r[a]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,a=r.length;s!==a;++s)t.push(Zu.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const s=t.length,a=[];for(let o=0;o<s;o++){let l=[],c=[];l.push((o+s-1)%s,o,(o+1)%s),c.push(0,1,0);const u=YX(l);l=F$(l,1,u),c=F$(c,1,u),!i&&l[0]===0&&(l.push(s),c.push(c[0])),a.push(new Qy(".morphTargetInfluences["+t[o].name+"]",l,c).scale(1/r))}return new this(e,-1,a)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let o=0,l=e.length;o<l;o++){const c=e[o],u=c.name.match(s);if(u&&u.length>1){const d=u[1];let h=i[d];h||(i[d]=h=[]),h.push(c)}}const a=[];for(const o in i)a.push(this.CreateFromMorphTargetSequence(o,i[o],t,r));return a}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(d,h,p,g,v){if(p.length!==0){const b=[],x=[];NP(p,b,x,g),b.length!==0&&v.push(new d(h,b,x))}},i=[],s=e.name||"default",a=e.fps||30,o=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let d=0;d<c.length;d++){const h=c[d].keys;if(!(!h||h.length===0))if(h[0].morphTargets){const p={};let g;for(g=0;g<h.length;g++)if(h[g].morphTargets)for(let v=0;v<h[g].morphTargets.length;v++)p[h[g].morphTargets[v]]=-1;for(const v in p){const b=[],x=[];for(let C=0;C!==h[g].morphTargets.length;++C){const E=h[g];b.push(E.time),x.push(E.morphTarget===v?1:0)}i.push(new Qy(".morphTargetInfluence["+v+"]",b,x))}l=p.length*a}else{const p=".bones["+t[d].name+"]";r(tv,p+".position",h,"pos",i),r(ev,p+".quaternion",h,"rot",i),r(tv,p+".scale",h,"scl",i)}}return i.length===0?null:new this(s,l,i,o)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function que(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Qy;case"vector":case"vector2":case"vector3":case"vector4":return tv;case"color":return DP;case"quaternion":return ev;case"bool":case"boolean":return Cv;case"string":return _v}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function Xue(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=que(n.type);if(n.times===void 0){const t=[],r=[];NP(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const lh={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class vI{constructor(e,t,r){const i=this;let s=!1,a=0,o=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.abortController=new AbortController,this.itemStart=function(u){o++,s===!1&&i.onStart!==void 0&&i.onStart(u,a,o),s=!0},this.itemEnd=function(u){a++,i.onProgress!==void 0&&i.onProgress(u,a,o),a===o&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(u){i.onError!==void 0&&i.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){const d=c.indexOf(u);return d!==-1&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,h=c.length;d<h;d+=2){const p=c[d],g=c[d+1];if(p.global&&(p.lastIndex=0),p.test(u))return g}return null},this.abort=function(){return this.abortController.abort(),this.abortController=new AbortController,this}}}const eK=new vI;class Do{constructor(e){this.manager=e!==void 0?e:eK,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,s){r.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}Do.DEFAULT_MATERIAL_NAME="__DEFAULT";const hp={};class Kue extends Error{constructor(e,t){super(e),this.response=t}}class Mo extends Do{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=lh.get(`file:${e}`);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(hp[e]!==void 0){hp[e].push({onLoad:t,onProgress:r,onError:i});return}hp[e]=[],hp[e].push({onLoad:t,onProgress:r,onError:i});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),o=this.mimeType,l=this.responseType;fetch(a).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=hp[e],d=c.body.getReader(),h=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),p=h?parseInt(h):0,g=p!==0;let v=0;const b=new ReadableStream({start(x){C();function C(){d.read().then(({done:E,value:_})=>{if(E)x.close();else{v+=_.byteLength;const M=new ProgressEvent("progress",{lengthComputable:g,loaded:v,total:p});for(let R=0,L=u.length;R<L;R++){const $=u[R];$.onProgress&&$.onProgress(M)}x.enqueue(_),C()}},E=>{x.error(E)})}}});return new Response(b)}else throw new Kue(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,o));case"json":return c.json();default:if(o==="")return c.text();{const d=/charset="?([^;"\s]*)"?/i.exec(o),h=d&&d[1]?d[1].toLowerCase():void 0,p=new TextDecoder(h);return c.arrayBuffer().then(g=>p.decode(g))}}}).then(c=>{lh.add(`file:${e}`,c);const u=hp[e];delete hp[e];for(let d=0,h=u.length;d<h;d++){const p=u[d];p.onLoad&&p.onLoad(c)}}).catch(c=>{const u=hp[e];if(u===void 0)throw this.manager.itemError(e),c;delete hp[e];for(let d=0,h=u.length;d<h;d++){const p=u[d];p.onError&&p.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class Yue extends Do{constructor(e){super(e)}load(e,t,r,i){const s=this,a=new Mo(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=o1.parse(e[r]);t.push(i)}return t}}class Jue extends Do{constructor(e){super(e)}load(e,t,r,i){const s=this,a=[],o=new iI,l=new Mo(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(d){l.load(e[d],function(h){const p=s.parse(h,!0);a[d]={width:p.width,height:p.height,format:p.format,mipmaps:p.mipmaps},c+=1,c===6&&(p.mipmapCount===1&&(o.minFilter=ai),o.image=a,o.format=p.format,o.needsUpdate=!0,t&&t(o))},r,i)}if(Array.isArray(e))for(let d=0,h=e.length;d<h;++d)u(d);else l.load(e,function(d){const h=s.parse(d,!0);if(h.isCubemap){const p=h.mipmaps.length/h.mipmapCount;for(let g=0;g<p;g++){a[g]={mipmaps:[]};for(let v=0;v<h.mipmapCount;v++)a[g].mipmaps.push(h.mipmaps[g*h.mipmapCount+v]),a[g].format=h.format,a[g].width=h.width,a[g].height=h.height}o.image=a}else o.image.width=h.width,o.image.height=h.height,o.mipmaps=h.mipmaps;h.mipmapCount===1&&(o.minFilter=ai),o.format=h.format,o.needsUpdate=!0,t&&t(o)},r,i);return o}}const ex=new WeakMap;class PC extends Do{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=lh.get(`image:${e}`);if(a!==void 0){if(a.complete===!0)s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0);else{let d=ex.get(a);d===void 0&&(d=[],ex.set(a,d)),d.push({onLoad:t,onError:i})}return a}const o=BC("img");function l(){u(),t&&t(this);const d=ex.get(this)||[];for(let h=0;h<d.length;h++){const p=d[h];p.onLoad&&p.onLoad(this)}ex.delete(this),s.manager.itemEnd(e)}function c(d){u(),i&&i(d),lh.remove(`image:${e}`);const h=ex.get(this)||[];for(let p=0;p<h.length;p++){const g=h[p];g.onError&&g.onError(d)}ex.delete(this),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){o.removeEventListener("load",l,!1),o.removeEventListener("error",c,!1)}return o.addEventListener("load",l,!1),o.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),lh.add(`image:${e}`,o),s.manager.itemStart(e),o.src=e,o}}class tK extends Do{constructor(e){super(e)}load(e,t,r,i){const s=new b_;s.colorSpace=_o;const a=new PC(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let o=0;function l(c){a.load(e[c],function(u){s.images[c]=u,o++,o===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let c=0;c<e.length;++c)l(c);return s}}class bI extends Do{constructor(e){super(e)}load(e,t,r,i){const s=this,a=new Kd,o=new Mo(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(s.withCredentials),o.load(e,function(l){let c;try{c=s.parse(l)}catch(u){if(i!==void 0)i(u);else{console.error(u);return}}c.image!==void 0?a.image=c.image:c.data!==void 0&&(a.image.width=c.width,a.image.height=c.height,a.image.data=c.data),a.wrapS=c.wrapS!==void 0?c.wrapS:oa,a.wrapT=c.wrapT!==void 0?c.wrapT:oa,a.magFilter=c.magFilter!==void 0?c.magFilter:ai,a.minFilter=c.minFilter!==void 0?c.minFilter:ai,a.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0&&(a.colorSpace=c.colorSpace),c.flipY!==void 0&&(a.flipY=c.flipY),c.format!==void 0&&(a.format=c.format),c.type!==void 0&&(a.type=c.type),c.mipmaps!==void 0&&(a.mipmaps=c.mipmaps,a.minFilter=Pu),c.mipmapCount===1&&(a.minFilter=ai),c.generateMipmaps!==void 0&&(a.generateMipmaps=c.generateMipmaps),a.needsUpdate=!0,t&&t(a,c)},r,i),a}}class nK extends Do{constructor(e){super(e)}load(e,t,r,i){const s=new Ti,a=new PC(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(o){s.image=o,s.needsUpdate=!0,t!==void 0&&t(s)},r,i),s}}let Ug=class extends ei{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new sn(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}};class rK extends Ug{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(ei.DEFAULT_UP),this.updateMatrix(),this.groundColor=new sn(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const xO=new zn,c8=new be,u8=new be;class kP{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Lt(512,512),this.mapType=Pl,this.map=null,this.mapPass=null,this.matrix=new zn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new M1,this._frameExtents=new Lt(1,1),this._viewportCount=1,this._viewports=[new Hr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;c8.setFromMatrixPosition(e.matrixWorld),t.position.copy(c8),u8.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(u8),t.updateMatrixWorld(),xO.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(xO,t.coordinateSystem,t.reversedDepth),t.reversedDepth?r.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(xO)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Zue extends kP{constructor(){super(new Ba(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,r=r1*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height*this.aspect,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class OP extends Ug{constructor(e,t,r=0,i=Math.PI/3,s=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ei.DEFAULT_UP),this.updateMatrix(),this.target=new ei,this.distance=r,this.angle=i,this.penumbra=s,this.decay=a,this.map=null,this.shadow=new Zue}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const d8=new zn,Cw=new be,SO=new be;class Que extends kP{constructor(){super(new Ba(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Lt(4,2),this._viewportCount=6,this._viewports=[new Hr(2,1,1,1),new Hr(0,1,1,1),new Hr(3,1,1,1),new Hr(1,1,1,1),new Hr(3,0,1,1),new Hr(1,0,1,1)],this._cubeDirections=[new be(1,0,0),new be(-1,0,0),new be(0,0,1),new be(0,0,-1),new be(0,1,0),new be(0,-1,0)],this._cubeUps=[new be(0,1,0),new be(0,1,0),new be(0,1,0),new be(0,1,0),new be(0,0,1),new be(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),Cw.setFromMatrixPosition(e.matrixWorld),r.position.copy(Cw),SO.copy(r.position),SO.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(SO),r.updateMatrixWorld(),i.makeTranslation(-Cw.x,-Cw.y,-Cw.z),d8.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(d8,r.coordinateSystem,r.reversedDepth)}}class BP extends Ug{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new Que}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Ev extends ZN{constructor(e=-1,t=1,r=1,i=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,a=r+e,o=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,a=s+c*this.view.width,o-=u*this.view.offsetY,l=o-u*this.view.height}this.projectionMatrix.makeOrthographic(s,a,o,l,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class ede extends kP{constructor(){super(new Ev(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class $P extends Ug{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ei.DEFAULT_UP),this.updateMatrix(),this.target=new ei,this.shadow=new ede}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class iK extends Ug{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class sK extends Ug{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class aK{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new be)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*i),t.addScaledVector(a[2],.488603*s),t.addScaledVector(a[3],.488603*r),t.addScaledVector(a[4],1.092548*(r*i)),t.addScaledVector(a[5],1.092548*(i*s)),t.addScaledVector(a[6],.315392*(3*s*s-1)),t.addScaledVector(a[7],1.092548*(r*s)),t.addScaledVector(a[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],2*.511664*i),t.addScaledVector(a[2],2*.511664*s),t.addScaledVector(a[3],2*.511664*r),t.addScaledVector(a[4],2*.429043*r*i),t.addScaledVector(a[5],2*.429043*i*s),t.addScaledVector(a[6],.743125*s*s-.247708),t.addScaledVector(a[7],2*.429043*r*s),t.addScaledVector(a[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*r*s,t[8]=.546274*(r*r-i*i)}}class oK extends Ug{constructor(e=new aK,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class xI extends Do{constructor(e){super(e),this.textures={}}load(e,t,r,i){const s=this,a=new Mo(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new sn().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(i.dispersion=e.dispersion),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const a=e.uniforms[s];switch(i.uniforms[s]={},a.type){case"t":i.uniforms[s].value=r(a.value);break;case"c":i.uniforms[s].value=new sn().setHex(a.value);break;case"v2":i.uniforms[s].value=new Lt().fromArray(a.value);break;case"v3":i.uniforms[s].value=new be().fromArray(a.value);break;case"v4":i.uniforms[s].value=new Hr().fromArray(a.value);break;case"m3":i.uniforms[s].value=new xr().fromArray(a.value);break;case"m4":i.uniforms[s].value=new zn().fromArray(a.value);break;default:i.uniforms[s].value=a.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new Lt().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapRotation!==void 0&&i.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Lt().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return xI.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:zX,SpriteMaterial:yP,RawShaderMaterial:HX,ShaderMaterial:No,PointsMaterial:rI,MeshPhysicalMaterial:Ju,MeshStandardMaterial:M_,MeshPhongMaterial:VX,MeshToonMaterial:GX,MeshNormalMaterial:WX,MeshLambertMaterial:jX,MeshDepthMaterial:yI,MeshDistanceMaterial:RP,MeshBasicMaterial:gc,MeshMatcapMaterial:qX,LineDashedMaterial:XX,LineBasicMaterial:il,Material:Ua};return new t[e]}}class dg{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class lK extends gr{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class cK extends Do{constructor(e){super(e)}load(e,t,r,i){const s=this,a=new Mo(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(p,g){if(t[g]!==void 0)return t[g];const b=p.interleavedBuffers[g],x=s(p,b.buffer),C=Ax(b.type,x),E=new S_(C,b.stride);return E.uuid=b.uuid,t[g]=E,E}function s(p,g){if(r[g]!==void 0)return r[g];const b=p.arrayBuffers[g],x=new Uint32Array(b).buffer;return r[g]=x,x}const a=e.isInstancedBufferGeometry?new lK:new gr,o=e.data.index;if(o!==void 0){const p=Ax(o.type,o.array);a.setIndex(new oi(p,1))}const l=e.data.attributes;for(const p in l){const g=l[p];let v;if(g.isInterleavedBufferAttribute){const b=i(e.data,g.data);v=new wg(b,g.itemSize,g.offset,g.normalized)}else{const b=Ax(g.type,g.array),x=g.isInstancedBufferAttribute?Jy:oi;v=new x(b,g.itemSize,g.normalized)}g.name!==void 0&&(v.name=g.name),g.usage!==void 0&&v.setUsage(g.usage),a.setAttribute(p,v)}const c=e.data.morphAttributes;if(c)for(const p in c){const g=c[p],v=[];for(let b=0,x=g.length;b<x;b++){const C=g[b];let E;if(C.isInterleavedBufferAttribute){const _=i(e.data,C.data);E=new wg(_,C.itemSize,C.offset,C.normalized)}else{const _=Ax(C.type,C.array);E=new oi(_,C.itemSize,C.normalized)}C.name!==void 0&&(E.name=C.name),v.push(E)}a.morphAttributes[p]=v}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let p=0,g=d.length;p!==g;++p){const v=d[p];a.addGroup(v.start,v.count,v.materialIndex)}const h=e.data.boundingSphere;return h!==void 0&&(a.boundingSphere=new ro().fromJSON(h)),e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}class tde extends Do{constructor(e){super(e)}load(e,t,r,i){const s=this,a=this.path===""?dg.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const o=new Mo(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(d){i!==void 0&&i(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?dg.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new Mo(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const a=await s.loadAsync(e,t),o=JSON.parse(a),l=o.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(o)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),a=this.parseImages(e.images,function(){t!==void 0&&t(c)}),o=this.parseTextures(e.textures,a),l=this.parseMaterials(e.materials,o),c=this.parseObject(e.object,s,l,o,r),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),this.bindLightTargets(c),t!==void 0){let d=!1;for(const h in a)if(a[h].data instanceof HTMLImageElement){d=!0;break}d===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,s),o=this.parseMaterials(e.materials,a),l=this.parseObject(e.object,i,o,a,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),this.bindLightTargets(l),l}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new Hy().fromJSON(e[r]);t[s.uuid]=s}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,a=e.length;s<a;s++){const o=new w_().fromJSON(e[s],i);r[o.uuid]=o}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new cK;for(let s=0,a=e.length;s<a;s++){let o;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":o=i.parse(l);break;default:l.type in l8?o=l8[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}o.uuid=l.uuid,l.name!==void 0&&(o.name=l.name),l.userData!==void 0&&(o.userData=l.userData),r[l.uuid]=o}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const s=new xI;s.setTextures(t);for(let a=0,o=e.length;a<o;a++){const l=e[a];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=o1.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const r=this,i={};let s;function a(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function o(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:r.resourcePath+c;return a(u)}else return l.data?{data:Ax(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new vI(t);s=new PC(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const d=e[c],h=d.url;if(Array.isArray(h)){const p=[];for(let g=0,v=h.length;g<v;g++){const b=h[g],x=o(b);x!==null&&(x instanceof HTMLImageElement?p.push(x):p.push(new Kd(x.data,x.width,x.height)))}i[d.uuid]=new ag(p)}else{const p=o(d.url);i[d.uuid]=new ag(p)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function s(a){if(typeof a=="string"){const o=a,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:t.resourcePath+o;return await i.loadAsync(l)}else return a.data?{data:Ax(a.type,a.data),width:a.width,height:a.height}:null}if(e!==void 0&&e.length>0){i=new PC(this.manager),i.setCrossOrigin(this.crossOrigin);for(let a=0,o=e.length;a<o;a++){const l=e[a],c=l.url;if(Array.isArray(c)){const u=[];for(let d=0,h=c.length;d<h;d++){const p=c[d],g=await s(p);g!==null&&(g instanceof HTMLImageElement?u.push(g):u.push(new Kd(g.data,g.width,g.height)))}r[l.uuid]=new ag(u)}else{const u=await s(l.url);r[l.uuid]=new ag(u)}}}return r}parseTextures(e,t){function r(s,a){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),a[s])}const i={};if(e!==void 0)for(let s=0,a=e.length;s<a;s++){const o=e[s];o.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),t[o.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const l=t[o.image],c=l.data;let u;Array.isArray(c)?(u=new b_,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new Kd:u=new Ti,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=o.uuid,o.name!==void 0&&(u.name=o.name),o.mapping!==void 0&&(u.mapping=r(o.mapping,nde)),o.channel!==void 0&&(u.channel=o.channel),o.offset!==void 0&&u.offset.fromArray(o.offset),o.repeat!==void 0&&u.repeat.fromArray(o.repeat),o.center!==void 0&&u.center.fromArray(o.center),o.rotation!==void 0&&(u.rotation=o.rotation),o.wrap!==void 0&&(u.wrapS=r(o.wrap[0],f8),u.wrapT=r(o.wrap[1],f8)),o.format!==void 0&&(u.format=o.format),o.internalFormat!==void 0&&(u.internalFormat=o.internalFormat),o.type!==void 0&&(u.type=o.type),o.colorSpace!==void 0&&(u.colorSpace=o.colorSpace),o.minFilter!==void 0&&(u.minFilter=r(o.minFilter,h8)),o.magFilter!==void 0&&(u.magFilter=r(o.magFilter,h8)),o.anisotropy!==void 0&&(u.anisotropy=o.anisotropy),o.flipY!==void 0&&(u.flipY=o.flipY),o.generateMipmaps!==void 0&&(u.generateMipmaps=o.generateMipmaps),o.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(u.unpackAlignment=o.unpackAlignment),o.compareFunction!==void 0&&(u.compareFunction=o.compareFunction),o.userData!==void 0&&(u.userData=o.userData),i[o.uuid]=u}return i}parseObject(e,t,r,i,s){let a;function o(h){return t[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",h),t[h]}function l(h){if(h!==void 0){if(Array.isArray(h)){const p=[];for(let g=0,v=h.length;g<v;g++){const b=h[g];r[b]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",b),p.push(r[b])}return p}return r[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",h),r[h]}}function c(h){return i[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",h),i[h]}let u,d;switch(e.type){case"Scene":a=new x_,e.background!==void 0&&(Number.isInteger(e.background)?a.background=new sn(e.background):a.background=c(e.background)),e.environment!==void 0&&(a.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?a.fog=new eI(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(a.fog=new QN(e.fog.color,e.fog.density)),e.fog.name!==""&&(a.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(a.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&a.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(a.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&a.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":a=new Ba(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(a.focus=e.focus),e.zoom!==void 0&&(a.zoom=e.zoom),e.filmGauge!==void 0&&(a.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(a.filmOffset=e.filmOffset),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new Ev(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(a.zoom=e.zoom),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new iK(e.color,e.intensity);break;case"DirectionalLight":a=new $P(e.color,e.intensity),a.target=e.target||"";break;case"PointLight":a=new BP(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new sK(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new OP(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),a.target=e.target||"";break;case"HemisphereLight":a=new rK(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new oK().fromJSON(e);break;case"SkinnedMesh":u=o(e.geometry),d=l(e.material),a=new vP(u,d),e.bindMode!==void 0&&(a.bindMode=e.bindMode),e.bindMatrix!==void 0&&a.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(a.skeleton=e.skeleton);break;case"Mesh":u=o(e.geometry),d=l(e.material),a=new rs(u,d);break;case"InstancedMesh":u=o(e.geometry),d=l(e.material);const h=e.count,p=e.instanceMatrix,g=e.instanceColor;a=new bP(u,d,h),a.instanceMatrix=new Jy(new Float32Array(p.array),16),g!==void 0&&(a.instanceColor=new Jy(new Float32Array(g.array),g.itemSize));break;case"BatchedMesh":u=o(e.geometry),d=l(e.material),a=new MX(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,d),a.geometry=u,a.perObjectFrustumCulled=e.perObjectFrustumCulled,a.sortObjects=e.sortObjects,a._drawRanges=e.drawRanges,a._reservedRanges=e.reservedRanges,a._geometryInfo=e.geometryInfo.map(v=>{let b=null,x=null;return v.boundingBox!==void 0&&(b=new To().fromJSON(v.boundingBox)),v.boundingSphere!==void 0&&(x=new ro().fromJSON(v.boundingSphere)),{...v,boundingBox:b,boundingSphere:x}}),a._instanceInfo=e.instanceInfo,a._availableInstanceIds=e._availableInstanceIds,a._availableGeometryIds=e._availableGeometryIds,a._nextIndexStart=e.nextIndexStart,a._nextVertexStart=e.nextVertexStart,a._geometryCount=e.geometryCount,a._maxInstanceCount=e.maxInstanceCount,a._maxVertexCount=e.maxVertexCount,a._maxIndexCount=e.maxIndexCount,a._geometryInitialized=e.geometryInitialized,a._matricesTexture=c(e.matricesTexture.uuid),a._indirectTexture=c(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(a._colorsTexture=c(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(a.boundingSphere=new ro().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(a.boundingBox=new To().fromJSON(e.boundingBox));break;case"LOD":a=new TX;break;case"Line":a=new Lp(o(e.geometry),l(e.material));break;case"LineLoop":a=new xP(o(e.geometry),l(e.material));break;case"LineSegments":a=new df(o(e.geometry),l(e.material));break;case"PointCloud":case"Points":a=new SP(o(e.geometry),l(e.material));break;case"Sprite":a=new AX(l(e.material));break;case"Group":a=new Mp;break;case"Bone":a=new tI;break;default:a=new ei}if(a.uuid=e.uuid,e.name!==void 0&&(a.name=e.name),e.matrix!==void 0?(a.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(e.position!==void 0&&a.position.fromArray(e.position),e.rotation!==void 0&&a.rotation.fromArray(e.rotation),e.quaternion!==void 0&&a.quaternion.fromArray(e.quaternion),e.scale!==void 0&&a.scale.fromArray(e.scale)),e.up!==void 0&&a.up.fromArray(e.up),e.castShadow!==void 0&&(a.castShadow=e.castShadow),e.receiveShadow!==void 0&&(a.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(a.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(a.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(a.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(a.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(a.visible=e.visible),e.frustumCulled!==void 0&&(a.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(a.renderOrder=e.renderOrder),e.userData!==void 0&&(a.userData=e.userData),e.layers!==void 0&&(a.layers.mask=e.layers),e.children!==void 0){const h=e.children;for(let p=0;p<h.length;p++)a.add(this.parseObject(h[p],t,r,i,s))}if(e.animations!==void 0){const h=e.animations;for(let p=0;p<h.length;p++){const g=h[p];a.animations.push(s[g])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(a.autoUpdate=e.autoUpdate);const h=e.levels;for(let p=0;p<h.length;p++){const g=h[p],v=a.getObjectByProperty("uuid",g.object);v!==void 0&&a.addLevel(v,g.distance,g.hysteresis)}}return a}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const r=t.target,i=e.getObjectByProperty("uuid",r);i!==void 0?t.target=i:t.target=new ei}})}}const nde={UVMapping:bg,CubeReflectionMapping:bh,CubeRefractionMapping:xg,EquirectangularReflectionMapping:Xx,EquirectangularRefractionMapping:IC,CubeUVReflectionMapping:A1},f8={RepeatWrapping:Sg,ClampToEdgeWrapping:oa,MirroredRepeatWrapping:Kx},h8={NearestFilter:no,NearestMipmapNearestFilter:HN,NearestMipmapLinearFilter:Ty,LinearFilter:ai,LinearMipmapNearestFilter:Rx,LinearMipmapLinearFilter:Pu},wO=new WeakMap;class uK extends Do{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=lh.get(`image-bitmap:${e}`);if(a!==void 0){if(s.manager.itemStart(e),a.then){a.then(c=>{if(wO.has(a)===!0)i&&i(wO.get(a)),s.manager.itemError(e),s.manager.itemEnd(e);else return t&&t(c),s.manager.itemEnd(e),c});return}return setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a}const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader,o.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const l=fetch(e,o).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return lh.add(`image-bitmap:${e}`,c),t&&t(c),s.manager.itemEnd(e),c}).catch(function(c){i&&i(c),wO.set(l,c),lh.remove(`image-bitmap:${e}`),s.manager.itemError(e),s.manager.itemEnd(e)});lh.add(`image-bitmap:${e}`,l),s.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let gT;class LP{static getContext(){return gT===void 0&&(gT=new(window.AudioContext||window.webkitAudioContext)),gT}static setContext(e){gT=e}}class rde extends Do{constructor(e){super(e)}load(e,t,r,i){const s=this,a=new Mo(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){try{const c=l.slice(0);LP.getContext().decodeAudioData(c,function(d){t(d)}).catch(o)}catch(c){o(c)}},r,i);function o(l){i?i(l):console.error(l),s.manager.itemError(e)}}}const p8=new zn,m8=new zn,Z0=new zn;class ide{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ba,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ba,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Z0.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,a=t.near*Math.tan(zy*t.fov*.5)/t.zoom;let o,l;m8.elements[12]=-i,p8.elements[12]=i,o=-a*t.aspect+s,l=a*t.aspect+s,Z0.elements[0]=2*t.near/(l-o),Z0.elements[8]=(l+o)/(l-o),this.cameraL.projectionMatrix.copy(Z0),o=-a*t.aspect-s,l=a*t.aspect-s,Z0.elements[0]=2*t.near/(l-o),Z0.elements[8]=(l+o)/(l-o),this.cameraR.projectionMatrix.copy(Z0)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(m8),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(p8)}}class dK extends Ba{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class FP{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}const Q0=new be,CO=new ua,sde=new be,ey=new be,ty=new be;class ade extends ei{constructor(){super(),this.type="AudioListener",this.context=LP.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new FP}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Q0,CO,sde),ey.set(0,0,-1).applyQuaternion(CO),ty.set(0,1,0).applyQuaternion(CO),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Q0.x,r),t.positionY.linearRampToValueAtTime(Q0.y,r),t.positionZ.linearRampToValueAtTime(Q0.z,r),t.forwardX.linearRampToValueAtTime(ey.x,r),t.forwardY.linearRampToValueAtTime(ey.y,r),t.forwardZ.linearRampToValueAtTime(ey.z,r),t.upX.linearRampToValueAtTime(ty.x,r),t.upY.linearRampToValueAtTime(ty.y,r),t.upZ.linearRampToValueAtTime(ty.z,r)}else t.setPosition(Q0.x,Q0.y,Q0.z),t.setOrientation(ey.x,ey.y,ey.z,ty.x,ty.y,ty.z)}}let fK=class extends ei{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}};const ny=new be,g8=new ua,ode=new be,ry=new be;class lde extends fK{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(ny,g8,ode),ry.set(0,0,1).applyQuaternion(g8);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(ny.x,r),t.positionY.linearRampToValueAtTime(ny.y,r),t.positionZ.linearRampToValueAtTime(ny.z,r),t.orientationX.linearRampToValueAtTime(ry.x,r),t.orientationY.linearRampToValueAtTime(ry.y,r),t.orientationZ.linearRampToValueAtTime(ry.z,r)}else t.setPosition(ny.x,ny.y,ny.z),t.setOrientation(ry.x,ry.y,ry.z)}}class cde{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class hK{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,s,a;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,s=e*i+i;let a=this.cumulativeWeight;if(a===0){for(let o=0;o!==i;++o)r[s+o]=r[o];a=t}else{a+=t;const o=t/a;this._mixBufferRegion(r,s,0,o,i)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,s=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-s,t)}a>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(r[l]!==r[l+t]){o.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let s=r,a=i;s!==a;++s)t[s]=t[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,s){if(i>=.5)for(let a=0;a!==s;++a)e[t+a]=e[r+a]}_slerp(e,t,r,i){ua.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,s){const a=this._workIndex*s;ua.multiplyQuaternionsFlat(e,a,e,t,e,r),ua.slerpFlat(e,t,e,t,e,a,i)}_lerp(e,t,r,i,s){const a=1-i;for(let o=0;o!==s;++o){const l=t+o;e[l]=e[l]*a+e[r+o]*i}}_lerpAdditive(e,t,r,i,s){for(let a=0;a!==s;++a){const o=t+a;e[o]=e[o]+e[r+a]*i}}}const PP="\\[\\]\\.:\\/",ude=new RegExp("["+PP+"]","g"),UP="[^"+PP+"]",dde="[^"+PP.replace("\\.","")+"]",fde=/((?:WC+[\/:])*)/.source.replace("WC",UP),hde=/(WCOD+)?/.source.replace("WCOD",dde),pde=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",UP),mde=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",UP),gde=new RegExp("^"+fde+hde+pde+mde+"$"),yde=["material","materials","bones","map"];class vde{constructor(e,t,r){const i=r||ii.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class ii{constructor(e,t,r){this.path=t,this.parsedPath=r||ii.parseTrackName(t),this.node=ii.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new ii.Composite(e,t,r):new ii(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(ude,"")}static parseTrackName(e){const t=gde.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);yde.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(s){for(let a=0;a<s.length;a++){const o=s[a];if(o.name===t||o.uuid===t)return o;const l=r(o.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=ii.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let c=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const a=e[i];if(a===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?o=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}ii.Composite=vde;ii.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};ii.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};ii.prototype.GetterByBindingType=[ii.prototype._getValue_direct,ii.prototype._getValue_array,ii.prototype._getValue_arrayElement,ii.prototype._getValue_toArray];ii.prototype.SetterByBindingTypeAndVersioning=[[ii.prototype._setValue_direct,ii.prototype._setValue_direct_setNeedsUpdate,ii.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ii.prototype._setValue_array,ii.prototype._setValue_array_setNeedsUpdate,ii.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ii.prototype._setValue_arrayElement,ii.prototype._setValue_arrayElement_setNeedsUpdate,ii.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ii.prototype._setValue_fromArray,ii.prototype._setValue_fromArray_setNeedsUpdate,ii.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class bde{constructor(){this.isAnimationObjectGroup=!0,this.uuid=eu(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,a=s.length;let o,l=e.length,c=this.nCachedObjects_;for(let u=0,d=arguments.length;u!==d;++u){const h=arguments[u],p=h.uuid;let g=t[p];if(g===void 0){g=l++,t[p]=g,e.push(h);for(let v=0,b=a;v!==b;++v)s[v].push(new ii(h,r[v],i[v]))}else if(g<c){o=e[g];const v=--c,b=e[v];t[b.uuid]=g,e[g]=b,t[p]=v,e[v]=h;for(let x=0,C=a;x!==C;++x){const E=s[x],_=E[v];let M=E[g];E[g]=_,M===void 0&&(M=new ii(h,r[x],i[x])),E[v]=M}}else e[g]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let a=0,o=arguments.length;a!==o;++a){const l=arguments[a],c=l.uuid,u=t[c];if(u!==void 0&&u>=s){const d=s++,h=e[d];t[h.uuid]=u,e[u]=h,t[c]=d,e[d]=l;for(let p=0,g=i;p!==g;++p){const v=r[p],b=v[d],x=v[u];v[u]=b,v[d]=x}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,a=e.length;for(let o=0,l=arguments.length;o!==l;++o){const c=arguments[o],u=c.uuid,d=t[u];if(d!==void 0)if(delete t[u],d<s){const h=--s,p=e[h],g=--a,v=e[g];t[p.uuid]=d,e[d]=p,t[v.uuid]=h,e[h]=v,e.pop();for(let b=0,x=i;b!==x;++b){const C=r[b],E=C[h],_=C[g];C[d]=E,C[h]=_,C.pop()}}else{const h=--a,p=e[h];h>0&&(t[p.uuid]=d),e[d]=p,e.pop();for(let g=0,v=i;g!==v;++g){const b=r[g];b[d]=b[h],b.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const a=this._paths,o=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,d=new Array(c);i=s.length,r[e]=i,a.push(e),o.push(t),s.push(d);for(let h=u,p=l.length;h!==p;++h){const g=l[h];d[h]=new ii(g,e,t)}return d}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,a=this._bindings,o=a.length-1,l=a[o],c=e[o];t[c]=r,a[r]=l,a.pop(),s[r]=s[o],s.pop(),i[r]=i[o],i.pop()}}}class pK{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const s=t.tracks,a=s.length,o=new Array(a),l={endingStart:My,endingEnd:My};for(let c=0;c!==a;++c){const u=s[c].createInterpolant(null);o[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=aP,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r=!1){if(e.fadeOut(t),this.fadeIn(t),r===!0){const i=this._clip.duration,s=e._clip.duration,a=s/i,o=i/s;e.warp(1,a,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,r=!1){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,s=i.time,a=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);const l=o.parameterPositions,c=o.sampleValues;return l[0]=s,l[1]=s+r,c[0]=e/a,c[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?t=0:(this._startTime=null,t=r*l)}t*=this._updateTimeScale(e);const a=this._updateTime(t),o=this._updateWeight(e);if(o>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case oP:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(a),c[u].accumulateAdditive(o);break;case KN:default:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(a),c[u].accumulate(i,o)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const a=r===oX;if(e===0)return s===-1?i:a&&(s&1)===1?t-i:i;if(r===sP){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),i>=t||i<0){const o=Math.floor(i/t);i-=t*o,s+=Math.abs(o);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,a)}else this._setEndings(!1,!1,a);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=i;if(a&&(s&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=Ry,i.endingEnd=Ry):(e?i.endingStart=this.zeroSlopeAtStart?Ry:My:i.endingStart=DC,t?i.endingEnd=this.zeroSlopeAtEnd?Ry:My:i.endingEnd=DC)}_scheduleFading(e,t,r){const i=this._mixer,s=i.time;let a=this._weightInterpolant;a===null&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);const o=a.parameterPositions,l=a.sampleValues;return o[0]=s,l[0]=t,o[1]=s+e,l[1]=r,this}}const xde=new Float32Array(1);class mK extends Rh{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,a=e._propertyBindings,o=e._interpolants,l=r.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let d=0;d!==s;++d){const h=i[d],p=h.name;let g=u[p];if(g!==void 0)++g.referenceCount,a[d]=g;else{if(g=a[d],g!==void 0){g._cacheIndex===null&&(++g.referenceCount,this._addInactiveBinding(g,l,p));continue}const v=t&&t._propertyBindings[d].binding.parsedPath;g=new hK(ii.create(r,p,v),h.ValueTypeName,h.getValueSize()),++g.referenceCount,this._addInactiveBinding(g,l,p),a[d]=g}o[d].resultBuffer=g.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,s=this._actionsByClip;let a=s[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=a;else{const o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=i.length,i.push(e),a.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,a=this._actionsByClip,o=a[s],l=o.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const d=o.actionByRoot,h=(e._localRoot||this._root).uuid;delete d[h],l.length===0&&delete a[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,s=this._bindings;let a=i[t];a===void 0&&(a={},i[t]=a),a[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,a=this._bindingsByRootAndName,o=a[i],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete o[s],Object.keys(o).length===0&&delete a[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new IP(new Float32Array(2),new Float32Array(2),1,xde),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=r,t[r]=s}clipAction(e,t,r){const i=t||this._root,s=i.uuid;let a=typeof e=="string"?o1.findByName(i,e):e;const o=a!==null?a.uuid:e,l=this._actionsByClip[o];let c=null;if(r===void 0&&(a!==null?r=a.blendMode:r=KN),l!==void 0){const d=l.actionByRoot[s];if(d!==void 0&&d.blendMode===r)return d;c=l.knownActions[0],a===null&&(a=c._clip)}if(a===null)return null;const u=new pK(this,a,t,r);return this._bindAction(u,c),this._addInactiveAction(u,o,s),u}existingAction(e,t){const r=t||this._root,i=r.uuid,s=typeof e=="string"?o1.findByName(r,e):e,a=s?s.uuid:e,o=this._actionsByClip[a];return o!==void 0&&o.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),a=this._accuIndex^=1;for(let c=0;c!==r;++c)t[c]._update(i,e,s,a);const o=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)o[c].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const a=s.knownActions;for(let o=0,l=a.length;o!==l;++o){const c=a[o];this._deactivateAction(c);const u=c._cacheIndex,d=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,d._cacheIndex=u,t[u]=d,t.pop(),this._removeInactiveBindingsForAction(c)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const a in r){const o=r[a].actionByRoot,l=o[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const a in s){const o=s[a];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class Sde extends fP{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isRenderTarget3D=!0,this.depth=r,this.texture=new JN(null,e,t,r),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class zP{constructor(e){this.value=e}clone(){return new zP(this.value.clone===void 0?this.value:this.value.clone())}}let wde=0;class Cde extends Rh{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:wde++}),this.name="",this.usage=OC,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,i=t.length;r<i;r++){const s=Array.isArray(t[r])?t[r]:[t[r]];for(let a=0;a<s.length;a++)this.uniforms.push(s[a].clone())}return this}clone(){return new this.constructor().copy(this)}}class _de extends S_{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class Ede{constructor(e,t,r,i,s,a=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=s,this.normalized=a,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const y8=new zn;class HP{constructor(e,t,r=0,i=1/0){this.ray=new T1(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new i1,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return y8.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(y8),this}intersectObject(e,t=!0,r=[]){return P$(e,this,r,t),r.sort(v8),r}intersectObjects(e,t=!0,r=[]){for(let i=0,s=e.length;i<s;i++)P$(e[i],this,r,t);return r.sort(v8),r}}function v8(n,e){return n.distance-e.distance}function P$(n,e,t,r){let i=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(i=!1),i===!0&&r===!0){const s=n.children;for(let a=0,o=s.length;a<o;a++)P$(s[a],e,t,!0)}}class Ade{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=Tde.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function Tde(){this._document.hidden===!1&&this.reset()}class gK{constructor(e=1,t=0,r=0){this.radius=e,this.phi=t,this.theta=r}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=nr(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(nr(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Mde{constructor(e=1,t=0,r=0){this.radius=e,this.theta=t,this.y=r}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}class VP{constructor(e,t,r,i){VP.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,r,i)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let r=0;r<4;r++)this.elements[r]=e[r+t];return this}set(e,t,r,i){const s=this.elements;return s[0]=e,s[2]=t,s[1]=r,s[3]=i,this}}const b8=new Lt;class Rde{constructor(e=new Lt(1/0,1/0),t=new Lt(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=b8.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,b8).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const x8=new be,yT=new be,tx=new be,nx=new be,_O=new be,Nde=new be,Ide=new be;class Dde{constructor(e=new be,t=new be){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){x8.subVectors(e,this.start),yT.subVectors(this.end,this.start);const r=yT.dot(yT);let s=yT.dot(x8)/r;return t&&(s=nr(s,0,1)),s}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}distanceSqToLine3(e,t=Nde,r=Ide){const i=10000000000000001e-32;let s,a;const o=this.start,l=e.start,c=this.end,u=e.end;tx.subVectors(c,o),nx.subVectors(u,l),_O.subVectors(o,l);const d=tx.dot(tx),h=nx.dot(nx),p=nx.dot(_O);if(d<=i&&h<=i)return t.copy(o),r.copy(l),t.sub(r),t.dot(t);if(d<=i)s=0,a=p/h,a=nr(a,0,1);else{const g=tx.dot(_O);if(h<=i)a=0,s=nr(-g/d,0,1);else{const v=tx.dot(nx),b=d*h-v*v;b!==0?s=nr((v*p-g*h)/b,0,1):s=0,a=(v*s+p)/h,a<0?(a=0,s=nr(-g/d,0,1)):a>1&&(a=1,s=nr((v-g)/d,0,1))}}return t.copy(o).add(tx.multiplyScalar(s)),r.copy(l).add(nx.multiplyScalar(a)),t.sub(r),t.dot(t)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const S8=new be;class kde extends ei{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const r=new gr,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,o=1,l=32;a<l;a++,o++){const c=a/l*Math.PI*2,u=o/l*Math.PI*2;i.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}r.setAttribute("position",new An(i,3));const s=new il({fog:!1,toneMapped:!1});this.cone=new df(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),S8.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(S8),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Ym=new be,vT=new zn,EO=new zn;class Ode extends df{constructor(e){const t=yK(e),r=new gr,i=[],s=[];for(let c=0;c<t.length;c++){const u=t[c];u.parent&&u.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(0,0,0),s.push(0,0,0))}r.setAttribute("position",new An(i,3)),r.setAttribute("color",new An(s,3));const a=new il({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,a),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const o=new sn(255),l=new sn(65280);this.setColors(o,l)}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");EO.copy(this.root.matrixWorld).invert();for(let s=0,a=0;s<t.length;s++){const o=t[s];o.parent&&o.parent.isBone&&(vT.multiplyMatrices(EO,o.matrixWorld),Ym.setFromMatrixPosition(vT),i.setXYZ(a,Ym.x,Ym.y,Ym.z),vT.multiplyMatrices(EO,o.parent.matrixWorld),Ym.setFromMatrixPosition(vT),i.setXYZ(a+1,Ym.x,Ym.y,Ym.z),a+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){const i=this.geometry.getAttribute("color");for(let s=0;s<i.count;s+=2)i.setXYZ(s,e.r,e.g,e.b),i.setXYZ(s+1,t.r,t.g,t.b);return i.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function yK(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push(...yK(n.children[t]));return e}class Bde extends rs{constructor(e,t,r){const i=new T_(t,4,2),s=new gc({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const $de=new be,w8=new sn,C8=new sn;class Lde extends ei{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new A_(t);i.rotateY(Math.PI*.5),this.material=new gc({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),a=new Float32Array(s.count*3);i.setAttribute("color",new oi(a,3)),this.add(new rs(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");w8.copy(this.light.color),C8.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const s=r<i/2?w8:C8;t.setXYZ(r,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt($de.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Fde extends df{constructor(e=10,t=10,r=4473924,i=8947848){r=new sn(r),i=new sn(i);const s=t/2,a=e/t,o=e/2,l=[],c=[];for(let h=0,p=0,g=-o;h<=t;h++,g+=a){l.push(-o,0,g,o,0,g),l.push(g,0,-o,g,0,o);const v=h===s?r:i;v.toArray(c,p),p+=3,v.toArray(c,p),p+=3,v.toArray(c,p),p+=3,v.toArray(c,p),p+=3}const u=new gr;u.setAttribute("position",new An(l,3)),u.setAttribute("color",new An(c,3));const d=new il({vertexColors:!0,toneMapped:!1});super(u,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Pde extends df{constructor(e=10,t=16,r=8,i=64,s=4473924,a=8947848){s=new sn(s),a=new sn(a);const o=[],l=[];if(t>1)for(let d=0;d<t;d++){const h=d/t*(Math.PI*2),p=Math.sin(h)*e,g=Math.cos(h)*e;o.push(0,0,0),o.push(p,0,g);const v=d&1?s:a;l.push(v.r,v.g,v.b),l.push(v.r,v.g,v.b)}for(let d=0;d<r;d++){const h=d&1?s:a,p=e-e/r*d;for(let g=0;g<i;g++){let v=g/i*(Math.PI*2),b=Math.sin(v)*p,x=Math.cos(v)*p;o.push(b,0,x),l.push(h.r,h.g,h.b),v=(g+1)/i*(Math.PI*2),b=Math.sin(v)*p,x=Math.cos(v)*p,o.push(b,0,x),l.push(h.r,h.g,h.b)}}const c=new gr;c.setAttribute("position",new An(o,3)),c.setAttribute("color",new An(l,3));const u=new il({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const _8=new be,bT=new be,E8=new be;class Ude extends ei{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new gr;i.setAttribute("position",new An([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new il({fog:!1,toneMapped:!1});this.lightPlane=new Lp(i,s),this.add(this.lightPlane),i=new gr,i.setAttribute("position",new An([0,0,0,0,0,1],3)),this.targetLine=new Lp(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),_8.setFromMatrixPosition(this.light.matrixWorld),bT.setFromMatrixPosition(this.light.target.matrixWorld),E8.subVectors(bT,_8),this.lightPlane.lookAt(bT),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(bT),this.targetLine.scale.z=E8.length()}}const xT=new be,zs=new ZN;class zde extends df{constructor(e){const t=new gr,r=new il({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],a={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(g,v){l(g),l(v)}function l(g){i.push(0,0,0),s.push(0,0,0),a[g]===void 0&&(a[g]=[]),a[g].push(i.length/3-1)}t.setAttribute("position",new An(i,3)),t.setAttribute("color",new An(s,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const c=new sn(16755200),u=new sn(16711680),d=new sn(43775),h=new sn(16777215),p=new sn(3355443);this.setColors(c,u,d,h,p)}setColors(e,t,r,i,s){const o=this.geometry.getAttribute("color");return o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,r.r,r.g,r.b),o.setXYZ(33,r.r,r.g,r.b),o.setXYZ(34,r.r,r.g,r.b),o.setXYZ(35,r.r,r.g,r.b),o.setXYZ(36,r.r,r.g,r.b),o.setXYZ(37,r.r,r.g,r.b),o.setXYZ(38,i.r,i.g,i.b),o.setXYZ(39,i.r,i.g,i.b),o.setXYZ(40,s.r,s.g,s.b),o.setXYZ(41,s.r,s.g,s.b),o.setXYZ(42,s.r,s.g,s.b),o.setXYZ(43,s.r,s.g,s.b),o.setXYZ(44,s.r,s.g,s.b),o.setXYZ(45,s.r,s.g,s.b),o.setXYZ(46,s.r,s.g,s.b),o.setXYZ(47,s.r,s.g,s.b),o.setXYZ(48,s.r,s.g,s.b),o.setXYZ(49,s.r,s.g,s.b),o.needsUpdate=!0,this}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;let s,a;if(zs.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)s=1,a=0;else if(this.camera.coordinateSystem===Jc)s=-1,a=1;else if(this.camera.coordinateSystem===n1)s=0,a=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);aa("c",t,e,zs,0,0,s),aa("t",t,e,zs,0,0,a),aa("n1",t,e,zs,-r,-i,s),aa("n2",t,e,zs,r,-i,s),aa("n3",t,e,zs,-r,i,s),aa("n4",t,e,zs,r,i,s),aa("f1",t,e,zs,-r,-i,a),aa("f2",t,e,zs,r,-i,a),aa("f3",t,e,zs,-r,i,a),aa("f4",t,e,zs,r,i,a),aa("u1",t,e,zs,r*.7,i*1.1,s),aa("u2",t,e,zs,-r*.7,i*1.1,s),aa("u3",t,e,zs,0,i*2,s),aa("cf1",t,e,zs,-r,0,a),aa("cf2",t,e,zs,r,0,a),aa("cf3",t,e,zs,0,-i,a),aa("cf4",t,e,zs,0,i,a),aa("cn1",t,e,zs,-r,0,s),aa("cn2",t,e,zs,r,0,s),aa("cn3",t,e,zs,0,-i,s),aa("cn4",t,e,zs,0,i,s),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function aa(n,e,t,r,i,s,a){xT.set(i,s,a).unproject(r);const o=e[n];if(o!==void 0){const l=t.getAttribute("position");for(let c=0,u=o.length;c<u;c++)l.setXYZ(o[c],xT.x,xT.y,xT.z)}}const ST=new To;class Hde extends df{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),s=new gr;s.setIndex(new oi(r,1)),s.setAttribute("position",new oi(i,3)),super(s,new il({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&ST.setFromObject(this.object),ST.isEmpty())return;const e=ST.min,t=ST.max,r=this.geometry.attributes.position,i=r.array;i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=e.x,i[4]=t.y,i[5]=t.z,i[6]=e.x,i[7]=e.y,i[8]=t.z,i[9]=t.x,i[10]=e.y,i[11]=t.z,i[12]=t.x,i[13]=t.y,i[14]=e.z,i[15]=e.x,i[16]=t.y,i[17]=e.z,i[18]=e.x,i[19]=e.y,i[20]=e.z,i[21]=t.x,i[22]=e.y,i[23]=e.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Vde extends df{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new gr;s.setIndex(new oi(r,1)),s.setAttribute("position",new An(i,3)),super(s,new il({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Gde extends Lp{constructor(e,t=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new gr;a.setAttribute("position",new An(s,3)),a.computeBoundingSphere(),super(a,new il({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new gr;l.setAttribute("position",new An(o,3)),l.computeBoundingSphere(),this.add(new rs(l,new gc({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const A8=new be;let wT,AO;class Wde extends ei{constructor(e=new be(0,0,1),t=new be(0,0,0),r=1,i=16776960,s=r*.2,a=s*.2){super(),this.type="ArrowHelper",wT===void 0&&(wT=new gr,wT.setAttribute("position",new An([0,0,0,0,1,0],3)),AO=new __(.5,1,5,1),AO.translate(0,-.5,0)),this.position.copy(t),this.line=new Lp(wT,new il({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new rs(AO,new gc({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{A8.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(A8,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class jde extends df{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new gr;i.setAttribute("position",new An(t,3)),i.setAttribute("color",new An(r,3));const s=new il({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,r){const i=new sn,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class qde{constructor(){this.type="ShapePath",this.color=new sn,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new AR,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,s,a){return this.currentPath.bezierCurveTo(e,t,r,i,s,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(x){const C=[];for(let E=0,_=x.length;E<_;E++){const M=x[E],R=new Hy;R.curves=M.curves,C.push(R)}return C}function r(x,C){const E=C.length;let _=!1;for(let M=E-1,R=0;R<E;M=R++){let L=C[M],$=C[R],N=$.x-L.x,I=$.y-L.y;if(Math.abs(I)>Number.EPSILON){if(I<0&&(L=C[R],N=-N,$=C[M],I=-I),x.y<L.y||x.y>$.y)continue;if(x.y===L.y){if(x.x===L.x)return!0}else{const k=I*(x.x-L.x)-N*(x.y-L.y);if(k===0)return!0;if(k<0)continue;_=!_}}else{if(x.y!==L.y)continue;if($.x<=x.x&&x.x<=L.x||L.x<=x.x&&x.x<=$.x)return!0}}return _}const i=Xd.isClockWise,s=this.subPaths;if(s.length===0)return[];let a,o,l;const c=[];if(s.length===1)return o=s[0],l=new Hy,l.curves=o.curves,c.push(l),c;let u=!i(s[0].getPoints());u=e?!u:u;const d=[],h=[];let p=[],g=0,v;h[g]=void 0,p[g]=[];for(let x=0,C=s.length;x<C;x++)o=s[x],v=o.getPoints(),a=i(v),a=e?!a:a,a?(!u&&h[g]&&g++,h[g]={s:new Hy,p:v},h[g].s.curves=o.curves,u&&g++,p[g]=[]):p[g].push({h:o,p:v[0]});if(!h[0])return t(s);if(h.length>1){let x=!1,C=0;for(let E=0,_=h.length;E<_;E++)d[E]=[];for(let E=0,_=h.length;E<_;E++){const M=p[E];for(let R=0;R<M.length;R++){const L=M[R];let $=!0;for(let N=0;N<h.length;N++)r(L.p,h[N].p)&&(E!==N&&C++,$?($=!1,d[N].push(L)):x=!0);$&&d[E].push(L)}}C>0&&x===!1&&(p=d)}let b;for(let x=0,C=h.length;x<C;x++){l=h[x].s,c.push(l),b=p[x];for(let E=0,_=b.length;E<_;E++)l.holes.push(b[E].h)}return c}}class Xde extends Rh{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function Kde(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function Yde(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function Jde(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function U$(n,e,t,r){const i=Zde(r);switch(t){case tP:return n*e;case y_:return n*e/i.components*i.byteLength;case v_:return n*e/i.components*i.byteLength;case rP:return n*e*2/i.components*i.byteLength;case qN:return n*e*2/i.components*i.byteLength;case nP:return n*e*3/i.components*i.byteLength;case la:return n*e*4/i.components*i.byteLength;case XN:return n*e*4/i.components*i.byteLength;case uC:case dC:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case fC:case hC:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case JM:case QM:return Math.max(n,16)*Math.max(e,8)/4;case YM:case ZM:return Math.max(n,8)*Math.max(e,8)/2;case eR:case tR:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case nR:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case rR:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case iR:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case sR:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case aR:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case oR:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case lR:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case cR:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case uR:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case dR:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case fR:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case hR:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case pR:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case mR:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case gR:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case pC:case yR:case vR:return Math.ceil(n/4)*Math.ceil(e/4)*16;case iP:case bR:return Math.ceil(n/4)*Math.ceil(e/4)*8;case xR:case SR:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function Zde(n){switch(n){case Pl:case VN:return{byteLength:1,components:1};case Yx:case GN:case Ws:return{byteLength:2,components:1};case WN:case jN:return{byteLength:2,components:4};case xh:case g_:case ns:return{byteLength:4,components:1};case eP:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}class Qde{static contain(e,t){return Kde(e,t)}static cover(e,t){return Yde(e,t)}static fill(e){return Jde(e)}static getByteLength(e,t,r,i){return U$(e,t,r,i)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:p_}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=p_);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function vK(){let n=null,e=!1,t=null,r=null;function i(s,a){t(s,a),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function efe(n){const e=new WeakMap;function t(o,l){const c=o.array,u=o.usage,d=c.byteLength,h=n.createBuffer();n.bindBuffer(l,h),n.bufferData(l,c,u),o.onUploadCallback();let p;if(c instanceof Float32Array)p=n.FLOAT;else if(typeof Float16Array<"u"&&c instanceof Float16Array)p=n.HALF_FLOAT;else if(c instanceof Uint16Array)o.isFloat16BufferAttribute?p=n.HALF_FLOAT:p=n.UNSIGNED_SHORT;else if(c instanceof Int16Array)p=n.SHORT;else if(c instanceof Uint32Array)p=n.UNSIGNED_INT;else if(c instanceof Int32Array)p=n.INT;else if(c instanceof Int8Array)p=n.BYTE;else if(c instanceof Uint8Array)p=n.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)p=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:h,type:p,bytesPerElement:c.BYTES_PER_ELEMENT,version:o.version,size:d}}function r(o,l,c){const u=l.array,d=l.updateRanges;if(n.bindBuffer(c,o),d.length===0)n.bufferSubData(c,0,u);else{d.sort((p,g)=>p.start-g.start);let h=0;for(let p=1;p<d.length;p++){const g=d[h],v=d[p];v.start<=g.start+g.count+1?g.count=Math.max(g.count,v.start+v.count-g.start):(++h,d[h]=v)}d.length=h+1;for(let p=0,g=d.length;p<g;p++){const v=d[p];n.bufferSubData(c,v.start*u.BYTES_PER_ELEMENT,u,v.start,v.count)}l.clearUpdateRanges()}l.onUploadCallback()}function i(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function s(o){o.isInterleavedBufferAttribute&&(o=o.data);const l=e.get(o);l&&(n.deleteBuffer(l.buffer),e.delete(o))}function a(o,l){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){const u=e.get(o);(!u||u.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}const c=e.get(o);if(c===void 0)e.set(o,t(o,l));else if(c.version<o.version){if(c.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(c.buffer,o,l),c.version=o.version}}return{get:i,remove:s,update:a}}var tfe=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,nfe=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,rfe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,ife=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,sfe=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,afe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,ofe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,lfe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,cfe=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,ufe=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,dfe=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,ffe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,hfe=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,pfe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,mfe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,gfe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,yfe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,vfe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,bfe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,xfe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Sfe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,wfe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,Cfe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,_fe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Efe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Afe=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Tfe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Mfe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Rfe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Nfe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Ife="gl_FragColor = linearToOutputTexel( gl_FragColor );",Dfe=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,kfe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Ofe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Bfe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,$fe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Lfe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Ffe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Pfe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Ufe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,zfe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Hfe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Vfe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Gfe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Wfe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,jfe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,qfe=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Xfe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Kfe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Yfe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Jfe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Zfe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Qfe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,ehe=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,the=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,nhe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,rhe=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,ihe=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,she=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,ahe=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,ohe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,lhe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,che=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,uhe=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,dhe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,fhe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,hhe=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,phe=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,mhe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,ghe=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,yhe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,vhe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,bhe=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,xhe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,She=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,whe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Che=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,_he=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Ehe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Ahe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,The=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Mhe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Rhe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Nhe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Ihe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Dhe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,khe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Ohe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Bhe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,$he=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		float depth = unpackRGBAToDepth( texture2D( depths, uv ) );
		#ifdef USE_REVERSEDEPTHBUF
			return step( depth, compare );
		#else
			return step( compare, depth );
		#endif
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		#ifdef USE_REVERSEDEPTHBUF
			float hard_shadow = step( distribution.x, compare );
		#else
			float hard_shadow = step( compare , distribution.x );
		#endif
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,Lhe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Fhe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Phe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Uhe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,zhe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Hhe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Vhe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Ghe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Whe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,jhe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,qhe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Xhe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Khe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Yhe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Jhe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Zhe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Qhe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const epe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,tpe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,npe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,rpe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,ipe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,spe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,ape=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,ope=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSEDEPTHBUF
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,lpe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,cpe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,upe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,dpe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,fpe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,hpe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,ppe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,mpe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,gpe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ype=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vpe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,bpe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,xpe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Spe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,wpe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Cpe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,_pe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Epe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Ape=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Tpe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Mpe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Rpe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Npe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Ipe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Dpe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,kpe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,fr={alphahash_fragment:tfe,alphahash_pars_fragment:nfe,alphamap_fragment:rfe,alphamap_pars_fragment:ife,alphatest_fragment:sfe,alphatest_pars_fragment:afe,aomap_fragment:ofe,aomap_pars_fragment:lfe,batching_pars_vertex:cfe,batching_vertex:ufe,begin_vertex:dfe,beginnormal_vertex:ffe,bsdfs:hfe,iridescence_fragment:pfe,bumpmap_pars_fragment:mfe,clipping_planes_fragment:gfe,clipping_planes_pars_fragment:yfe,clipping_planes_pars_vertex:vfe,clipping_planes_vertex:bfe,color_fragment:xfe,color_pars_fragment:Sfe,color_pars_vertex:wfe,color_vertex:Cfe,common:_fe,cube_uv_reflection_fragment:Efe,defaultnormal_vertex:Afe,displacementmap_pars_vertex:Tfe,displacementmap_vertex:Mfe,emissivemap_fragment:Rfe,emissivemap_pars_fragment:Nfe,colorspace_fragment:Ife,colorspace_pars_fragment:Dfe,envmap_fragment:kfe,envmap_common_pars_fragment:Ofe,envmap_pars_fragment:Bfe,envmap_pars_vertex:$fe,envmap_physical_pars_fragment:qfe,envmap_vertex:Lfe,fog_vertex:Ffe,fog_pars_vertex:Pfe,fog_fragment:Ufe,fog_pars_fragment:zfe,gradientmap_pars_fragment:Hfe,lightmap_pars_fragment:Vfe,lights_lambert_fragment:Gfe,lights_lambert_pars_fragment:Wfe,lights_pars_begin:jfe,lights_toon_fragment:Xfe,lights_toon_pars_fragment:Kfe,lights_phong_fragment:Yfe,lights_phong_pars_fragment:Jfe,lights_physical_fragment:Zfe,lights_physical_pars_fragment:Qfe,lights_fragment_begin:ehe,lights_fragment_maps:the,lights_fragment_end:nhe,logdepthbuf_fragment:rhe,logdepthbuf_pars_fragment:ihe,logdepthbuf_pars_vertex:she,logdepthbuf_vertex:ahe,map_fragment:ohe,map_pars_fragment:lhe,map_particle_fragment:che,map_particle_pars_fragment:uhe,metalnessmap_fragment:dhe,metalnessmap_pars_fragment:fhe,morphinstance_vertex:hhe,morphcolor_vertex:phe,morphnormal_vertex:mhe,morphtarget_pars_vertex:ghe,morphtarget_vertex:yhe,normal_fragment_begin:vhe,normal_fragment_maps:bhe,normal_pars_fragment:xhe,normal_pars_vertex:She,normal_vertex:whe,normalmap_pars_fragment:Che,clearcoat_normal_fragment_begin:_he,clearcoat_normal_fragment_maps:Ehe,clearcoat_pars_fragment:Ahe,iridescence_pars_fragment:The,opaque_fragment:Mhe,packing:Rhe,premultiplied_alpha_fragment:Nhe,project_vertex:Ihe,dithering_fragment:Dhe,dithering_pars_fragment:khe,roughnessmap_fragment:Ohe,roughnessmap_pars_fragment:Bhe,shadowmap_pars_fragment:$he,shadowmap_pars_vertex:Lhe,shadowmap_vertex:Fhe,shadowmask_pars_fragment:Phe,skinbase_vertex:Uhe,skinning_pars_vertex:zhe,skinning_vertex:Hhe,skinnormal_vertex:Vhe,specularmap_fragment:Ghe,specularmap_pars_fragment:Whe,tonemapping_fragment:jhe,tonemapping_pars_fragment:qhe,transmission_fragment:Xhe,transmission_pars_fragment:Khe,uv_pars_fragment:Yhe,uv_pars_vertex:Jhe,uv_vertex:Zhe,worldpos_vertex:Qhe,background_vert:epe,background_frag:tpe,backgroundCube_vert:npe,backgroundCube_frag:rpe,cube_vert:ipe,cube_frag:spe,depth_vert:ape,depth_frag:ope,distanceRGBA_vert:lpe,distanceRGBA_frag:cpe,equirect_vert:upe,equirect_frag:dpe,linedashed_vert:fpe,linedashed_frag:hpe,meshbasic_vert:ppe,meshbasic_frag:mpe,meshlambert_vert:gpe,meshlambert_frag:ype,meshmatcap_vert:vpe,meshmatcap_frag:bpe,meshnormal_vert:xpe,meshnormal_frag:Spe,meshphong_vert:wpe,meshphong_frag:Cpe,meshphysical_vert:_pe,meshphysical_frag:Epe,meshtoon_vert:Ape,meshtoon_frag:Tpe,points_vert:Mpe,points_frag:Rpe,shadow_vert:Npe,shadow_frag:Ipe,sprite_vert:Dpe,sprite_frag:kpe},fn={common:{diffuse:{value:new sn(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new xr},alphaMap:{value:null},alphaMapTransform:{value:new xr},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new xr}},envmap:{envMap:{value:null},envMapRotation:{value:new xr},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new xr}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new xr}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new xr},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new xr},normalScale:{value:new Lt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new xr},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new xr}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new xr}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new xr}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new sn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new sn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new xr},alphaTest:{value:0},uvTransform:{value:new xr}},sprite:{diffuse:{value:new sn(16777215)},opacity:{value:1},center:{value:new Lt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new xr},alphaMap:{value:null},alphaMapTransform:{value:new xr},alphaTest:{value:0}}},Gd={basic:{uniforms:Rl([fn.common,fn.specularmap,fn.envmap,fn.aomap,fn.lightmap,fn.fog]),vertexShader:fr.meshbasic_vert,fragmentShader:fr.meshbasic_frag},lambert:{uniforms:Rl([fn.common,fn.specularmap,fn.envmap,fn.aomap,fn.lightmap,fn.emissivemap,fn.bumpmap,fn.normalmap,fn.displacementmap,fn.fog,fn.lights,{emissive:{value:new sn(0)}}]),vertexShader:fr.meshlambert_vert,fragmentShader:fr.meshlambert_frag},phong:{uniforms:Rl([fn.common,fn.specularmap,fn.envmap,fn.aomap,fn.lightmap,fn.emissivemap,fn.bumpmap,fn.normalmap,fn.displacementmap,fn.fog,fn.lights,{emissive:{value:new sn(0)},specular:{value:new sn(1118481)},shininess:{value:30}}]),vertexShader:fr.meshphong_vert,fragmentShader:fr.meshphong_frag},standard:{uniforms:Rl([fn.common,fn.envmap,fn.aomap,fn.lightmap,fn.emissivemap,fn.bumpmap,fn.normalmap,fn.displacementmap,fn.roughnessmap,fn.metalnessmap,fn.fog,fn.lights,{emissive:{value:new sn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:fr.meshphysical_vert,fragmentShader:fr.meshphysical_frag},toon:{uniforms:Rl([fn.common,fn.aomap,fn.lightmap,fn.emissivemap,fn.bumpmap,fn.normalmap,fn.displacementmap,fn.gradientmap,fn.fog,fn.lights,{emissive:{value:new sn(0)}}]),vertexShader:fr.meshtoon_vert,fragmentShader:fr.meshtoon_frag},matcap:{uniforms:Rl([fn.common,fn.bumpmap,fn.normalmap,fn.displacementmap,fn.fog,{matcap:{value:null}}]),vertexShader:fr.meshmatcap_vert,fragmentShader:fr.meshmatcap_frag},points:{uniforms:Rl([fn.points,fn.fog]),vertexShader:fr.points_vert,fragmentShader:fr.points_frag},dashed:{uniforms:Rl([fn.common,fn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:fr.linedashed_vert,fragmentShader:fr.linedashed_frag},depth:{uniforms:Rl([fn.common,fn.displacementmap]),vertexShader:fr.depth_vert,fragmentShader:fr.depth_frag},normal:{uniforms:Rl([fn.common,fn.bumpmap,fn.normalmap,fn.displacementmap,{opacity:{value:1}}]),vertexShader:fr.meshnormal_vert,fragmentShader:fr.meshnormal_frag},sprite:{uniforms:Rl([fn.sprite,fn.fog]),vertexShader:fr.sprite_vert,fragmentShader:fr.sprite_frag},background:{uniforms:{uvTransform:{value:new xr},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:fr.background_vert,fragmentShader:fr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new xr}},vertexShader:fr.backgroundCube_vert,fragmentShader:fr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:fr.cube_vert,fragmentShader:fr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:fr.equirect_vert,fragmentShader:fr.equirect_frag},distanceRGBA:{uniforms:Rl([fn.common,fn.displacementmap,{referencePosition:{value:new be},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:fr.distanceRGBA_vert,fragmentShader:fr.distanceRGBA_frag},shadow:{uniforms:Rl([fn.lights,fn.fog,{color:{value:new sn(0)},opacity:{value:1}}]),vertexShader:fr.shadow_vert,fragmentShader:fr.shadow_frag}};Gd.physical={uniforms:Rl([Gd.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new xr},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new xr},clearcoatNormalScale:{value:new Lt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new xr},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new xr},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new xr},sheen:{value:0},sheenColor:{value:new sn(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new xr},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new xr},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new xr},transmissionSamplerSize:{value:new Lt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new xr},attenuationDistance:{value:0},attenuationColor:{value:new sn(0)},specularColor:{value:new sn(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new xr},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new xr},anisotropyVector:{value:new Lt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new xr}}]),vertexShader:fr.meshphysical_vert,fragmentShader:fr.meshphysical_frag};const CT={r:0,b:0,g:0},iy=new Cc,Ope=new zn;function Bpe(n,e,t,r,i,s,a){const o=new sn(0);let l=s===!0?0:1,c,u,d=null,h=0,p=null;function g(E){let _=E.isScene===!0?E.background:null;return _&&_.isTexture&&(_=(E.backgroundBlurriness>0?t:e).get(_)),_}function v(E){let _=!1;const M=g(E);M===null?x(o,l):M&&M.isColor&&(x(M,1),_=!0);const R=n.xr.getEnvironmentBlendMode();R==="additive"?r.buffers.color.setClear(0,0,0,1,a):R==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,a),(n.autoClear||_)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function b(E,_){const M=g(_);M&&(M.isCubeTexture||M.mapping===A1)?(u===void 0&&(u=new rs(new Fg(1,1,1),new No({name:"BackgroundCubeMaterial",uniforms:s1(Gd.backgroundCube.uniforms),vertexShader:Gd.backgroundCube.vertexShader,fragmentShader:Gd.backgroundCube.fragmentShader,side:Ao,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(R,L,$){this.matrixWorld.copyPosition($.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),iy.copy(_.backgroundRotation),iy.x*=-1,iy.y*=-1,iy.z*=-1,M.isCubeTexture&&M.isRenderTargetTexture===!1&&(iy.y*=-1,iy.z*=-1),u.material.uniforms.envMap.value=M,u.material.uniforms.flipEnvMap.value=M.isCubeTexture&&M.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=_.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(Ope.makeRotationFromEuler(iy)),u.material.toneMapped=Qr.getTransfer(M.colorSpace)!==$i,(d!==M||h!==M.version||p!==n.toneMapping)&&(u.material.needsUpdate=!0,d=M,h=M.version,p=n.toneMapping),u.layers.enableAll(),E.unshift(u,u.geometry,u.material,0,0,null)):M&&M.isTexture&&(c===void 0&&(c=new rs(new Xp(2,2),new No({name:"BackgroundMaterial",uniforms:s1(Gd.background.uniforms),vertexShader:Gd.background.vertexShader,fragmentShader:Gd.background.fragmentShader,side:vh,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=M,c.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,c.material.toneMapped=Qr.getTransfer(M.colorSpace)!==$i,M.matrixAutoUpdate===!0&&M.updateMatrix(),c.material.uniforms.uvTransform.value.copy(M.matrix),(d!==M||h!==M.version||p!==n.toneMapping)&&(c.material.needsUpdate=!0,d=M,h=M.version,p=n.toneMapping),c.layers.enableAll(),E.unshift(c,c.geometry,c.material,0,0,null))}function x(E,_){E.getRGB(CT,CX(n)),r.buffers.color.setClear(CT.r,CT.g,CT.b,_,a)}function C(){u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0),c!==void 0&&(c.geometry.dispose(),c.material.dispose(),c=void 0)}return{getClearColor:function(){return o},setClearColor:function(E,_=1){o.set(E),l=_,x(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(E){l=E,x(o,l)},render:v,addToRenderList:b,dispose:C}}function $pe(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),r={},i=h(null);let s=i,a=!1;function o(I,k,P,G,W){let X=!1;const z=d(G,P,k);s!==z&&(s=z,c(s.object)),X=p(I,G,P,W),X&&g(I,G,P,W),W!==null&&e.update(W,n.ELEMENT_ARRAY_BUFFER),(X||a)&&(a=!1,_(I,k,P,G),W!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(W).buffer))}function l(){return n.createVertexArray()}function c(I){return n.bindVertexArray(I)}function u(I){return n.deleteVertexArray(I)}function d(I,k,P){const G=P.wireframe===!0;let W=r[I.id];W===void 0&&(W={},r[I.id]=W);let X=W[k.id];X===void 0&&(X={},W[k.id]=X);let z=X[G];return z===void 0&&(z=h(l()),X[G]=z),z}function h(I){const k=[],P=[],G=[];for(let W=0;W<t;W++)k[W]=0,P[W]=0,G[W]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:k,enabledAttributes:P,attributeDivisors:G,object:I,attributes:{},index:null}}function p(I,k,P,G){const W=s.attributes,X=k.attributes;let z=0;const J=P.getAttributes();for(const Q in J)if(J[Q].location>=0){const q=W[Q];let te=X[Q];if(te===void 0&&(Q==="instanceMatrix"&&I.instanceMatrix&&(te=I.instanceMatrix),Q==="instanceColor"&&I.instanceColor&&(te=I.instanceColor)),q===void 0||q.attribute!==te||te&&q.data!==te.data)return!0;z++}return s.attributesNum!==z||s.index!==G}function g(I,k,P,G){const W={},X=k.attributes;let z=0;const J=P.getAttributes();for(const Q in J)if(J[Q].location>=0){let q=X[Q];q===void 0&&(Q==="instanceMatrix"&&I.instanceMatrix&&(q=I.instanceMatrix),Q==="instanceColor"&&I.instanceColor&&(q=I.instanceColor));const te={};te.attribute=q,q&&q.data&&(te.data=q.data),W[Q]=te,z++}s.attributes=W,s.attributesNum=z,s.index=G}function v(){const I=s.newAttributes;for(let k=0,P=I.length;k<P;k++)I[k]=0}function b(I){x(I,0)}function x(I,k){const P=s.newAttributes,G=s.enabledAttributes,W=s.attributeDivisors;P[I]=1,G[I]===0&&(n.enableVertexAttribArray(I),G[I]=1),W[I]!==k&&(n.vertexAttribDivisor(I,k),W[I]=k)}function C(){const I=s.newAttributes,k=s.enabledAttributes;for(let P=0,G=k.length;P<G;P++)k[P]!==I[P]&&(n.disableVertexAttribArray(P),k[P]=0)}function E(I,k,P,G,W,X,z){z===!0?n.vertexAttribIPointer(I,k,P,W,X):n.vertexAttribPointer(I,k,P,G,W,X)}function _(I,k,P,G){v();const W=G.attributes,X=P.getAttributes(),z=k.defaultAttributeValues;for(const J in X){const Q=X[J];if(Q.location>=0){let Y=W[J];if(Y===void 0&&(J==="instanceMatrix"&&I.instanceMatrix&&(Y=I.instanceMatrix),J==="instanceColor"&&I.instanceColor&&(Y=I.instanceColor)),Y!==void 0){const q=Y.normalized,te=Y.itemSize,ne=e.get(Y);if(ne===void 0)continue;const le=ne.buffer,ye=ne.type,ue=ne.bytesPerElement,ve=ye===n.INT||ye===n.UNSIGNED_INT||Y.gpuType===g_;if(Y.isInterleavedBufferAttribute){const xe=Y.data,Pe=xe.stride,ze=Y.offset;if(xe.isInstancedInterleavedBuffer){for(let Ke=0;Ke<Q.locationSize;Ke++)x(Q.location+Ke,xe.meshPerAttribute);I.isInstancedMesh!==!0&&G._maxInstanceCount===void 0&&(G._maxInstanceCount=xe.meshPerAttribute*xe.count)}else for(let Ke=0;Ke<Q.locationSize;Ke++)b(Q.location+Ke);n.bindBuffer(n.ARRAY_BUFFER,le);for(let Ke=0;Ke<Q.locationSize;Ke++)E(Q.location+Ke,te/Q.locationSize,ye,q,Pe*ue,(ze+te/Q.locationSize*Ke)*ue,ve)}else{if(Y.isInstancedBufferAttribute){for(let xe=0;xe<Q.locationSize;xe++)x(Q.location+xe,Y.meshPerAttribute);I.isInstancedMesh!==!0&&G._maxInstanceCount===void 0&&(G._maxInstanceCount=Y.meshPerAttribute*Y.count)}else for(let xe=0;xe<Q.locationSize;xe++)b(Q.location+xe);n.bindBuffer(n.ARRAY_BUFFER,le);for(let xe=0;xe<Q.locationSize;xe++)E(Q.location+xe,te/Q.locationSize,ye,q,te*ue,te/Q.locationSize*xe*ue,ve)}}else if(z!==void 0){const q=z[J];if(q!==void 0)switch(q.length){case 2:n.vertexAttrib2fv(Q.location,q);break;case 3:n.vertexAttrib3fv(Q.location,q);break;case 4:n.vertexAttrib4fv(Q.location,q);break;default:n.vertexAttrib1fv(Q.location,q)}}}}C()}function M(){$();for(const I in r){const k=r[I];for(const P in k){const G=k[P];for(const W in G)u(G[W].object),delete G[W];delete k[P]}delete r[I]}}function R(I){if(r[I.id]===void 0)return;const k=r[I.id];for(const P in k){const G=k[P];for(const W in G)u(G[W].object),delete G[W];delete k[P]}delete r[I.id]}function L(I){for(const k in r){const P=r[k];if(P[I.id]===void 0)continue;const G=P[I.id];for(const W in G)u(G[W].object),delete G[W];delete P[I.id]}}function $(){N(),a=!0,s!==i&&(s=i,c(s.object))}function N(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:o,reset:$,resetDefaultState:N,dispose:M,releaseStatesOfGeometry:R,releaseStatesOfProgram:L,initAttributes:v,enableAttribute:b,disableUnusedAttributes:C}}function Lpe(n,e,t){let r;function i(c){r=c}function s(c,u){n.drawArrays(r,c,u),t.update(u,r,1)}function a(c,u,d){d!==0&&(n.drawArraysInstanced(r,c,u,d),t.update(u,r,d))}function o(c,u,d){if(d===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,c,0,u,0,d);let p=0;for(let g=0;g<d;g++)p+=u[g];t.update(p,r,1)}function l(c,u,d,h){if(d===0)return;const p=e.get("WEBGL_multi_draw");if(p===null)for(let g=0;g<c.length;g++)a(c[g],u[g],h[g]);else{p.multiDrawArraysInstancedWEBGL(r,c,0,u,0,h,0,d);let g=0;for(let v=0;v<d;v++)g+=u[v]*h[v];t.update(g,r,1)}}this.setMode=i,this.render=s,this.renderInstances=a,this.renderMultiDraw=o,this.renderMultiDrawInstances=l}function Fpe(n,e,t,r){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const L=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(L.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function a(L){return!(L!==la&&r.convert(L)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(L){const $=L===Ws&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(L!==Pl&&r.convert(L)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&L!==ns&&!$)}function l(L){if(L==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";L="mediump"}return L==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp";const u=l(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const d=t.logarithmicDepthBuffer===!0,h=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),p=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),g=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),v=n.getParameter(n.MAX_TEXTURE_SIZE),b=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),x=n.getParameter(n.MAX_VERTEX_ATTRIBS),C=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),E=n.getParameter(n.MAX_VARYING_VECTORS),_=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),M=g>0,R=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:a,textureTypeReadable:o,precision:c,logarithmicDepthBuffer:d,reversedDepthBuffer:h,maxTextures:p,maxVertexTextures:g,maxTextureSize:v,maxCubemapSize:b,maxAttributes:x,maxVertexUniforms:C,maxVaryings:E,maxFragmentUniforms:_,vertexTextures:M,maxSamples:R}}function Ppe(n){const e=this;let t=null,r=0,i=!1,s=!1;const a=new eg,o=new xr,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h){const p=d.length!==0||h||r!==0||i;return i=h,r=d.length,p},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,h){t=u(d,h,0)},this.setState=function(d,h,p){const g=d.clippingPlanes,v=d.clipIntersection,b=d.clipShadows,x=n.get(d);if(!i||g===null||g.length===0||s&&!b)s?u(null):c();else{const C=s?0:r,E=C*4;let _=x.clippingState||null;l.value=_,_=u(g,h,E,p);for(let M=0;M!==E;++M)_[M]=t[M];x.clippingState=_,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=C}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(d,h,p,g){const v=d!==null?d.length:0;let b=null;if(v!==0){if(b=l.value,g!==!0||b===null){const x=p+v*4,C=h.matrixWorldInverse;o.getNormalMatrix(C),(b===null||b.length<x)&&(b=new Float32Array(x));for(let E=0,_=p;E!==v;++E,_+=4)a.copy(d[E]).applyMatrix4(C,o),a.normal.toArray(b,_),b[_+3]=a.constant}l.value=b,l.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,b}}function Upe(n){let e=new WeakMap;function t(a,o){return o===Xx?a.mapping=bh:o===IC&&(a.mapping=xg),a}function r(a){if(a&&a.isTexture){const o=a.mapping;if(o===Xx||o===IC)if(e.has(a)){const l=e.get(a).texture;return t(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const c=new gP(l.height);return c.fromEquirectangularTexture(n,a),e.set(a,c),a.addEventListener("dispose",i),t(c.texture,a.mapping)}else return null}}return a}function i(a){const o=a.target;o.removeEventListener("dispose",i);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}const Tx=4,T8=[.125,.215,.35,.446,.526,.582],xy=20,TO=new Ev,M8=new sn;let MO=null,RO=0,NO=0,IO=!1;const my=(1+Math.sqrt(5))/2,rx=1/my,R8=[new be(-my,rx,0),new be(my,rx,0),new be(-rx,0,my),new be(rx,0,my),new be(0,my,-rx),new be(0,my,rx),new be(-1,1,-1),new be(1,1,-1),new be(-1,1,1),new be(1,1,1)],zpe=new be;class z${constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100,s={}){const{size:a=256,position:o=zpe}=s;MO=this._renderer.getRenderTarget(),RO=this._renderer.getActiveCubeFace(),NO=this._renderer.getActiveMipmapLevel(),IO=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(a);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,r,i,l,o),t>0&&this._blur(l,0,0,t),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=D8(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=I8(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(MO,RO,NO),this._renderer.xr.enabled=IO,e.scissorTest=!1,_T(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===bh||e.mapping===xg?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),MO=this._renderer.getRenderTarget(),RO=this._renderer.getActiveCubeFace(),NO=this._renderer.getActiveMipmapLevel(),IO=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:ai,minFilter:ai,generateMipmaps:!1,type:Ws,format:la,colorSpace:qu,depthBuffer:!1},i=N8(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=N8(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Hpe(s)),this._blurMaterial=Vpe(s,e,t)}return i}_compileMaterial(e){const t=new rs(this._lodPlanes[0],e);this._renderer.compile(t,TO)}_sceneToCubeUV(e,t,r,i,s){const l=new Ba(90,1,t,r),c=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],d=this._renderer,h=d.autoClear,p=d.toneMapping;d.getClearColor(M8),d.toneMapping=dh,d.autoClear=!1,d.state.buffers.depth.getReversed()&&(d.setRenderTarget(i),d.clearDepth(),d.setRenderTarget(null));const v=new gc({name:"PMREM.Background",side:Ao,depthWrite:!1,depthTest:!1}),b=new rs(new Fg,v);let x=!1;const C=e.background;C?C.isColor&&(v.color.copy(C),e.background=null,x=!0):(v.color.copy(M8),x=!0);for(let E=0;E<6;E++){const _=E%3;_===0?(l.up.set(0,c[E],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x+u[E],s.y,s.z)):_===1?(l.up.set(0,0,c[E]),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y+u[E],s.z)):(l.up.set(0,c[E],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y,s.z+u[E]));const M=this._cubeSize;_T(i,_*M,E>2?M:0,M,M),d.setRenderTarget(i),x&&d.render(b,l),d.render(e,l)}b.geometry.dispose(),b.material.dispose(),d.toneMapping=p,d.autoClear=h,e.background=C}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===bh||e.mapping===xg;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=D8()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=I8());const s=i?this._cubemapMaterial:this._equirectMaterial,a=new rs(this._lodPlanes[0],s),o=s.uniforms;o.envMap.value=e;const l=this._cubeSize;_T(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(a,TO)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;const i=this._lodPlanes.length;for(let s=1;s<i;s++){const a=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),o=R8[(i-s-1)%R8.length];this._blur(e,s-1,s,a,o)}t.autoClear=r}_blur(e,t,r,i,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,r,i,"latitudinal",s),this._halfBlur(a,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,a,o){const l=this._renderer,c=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,d=new rs(this._lodPlanes[i],c),h=c.uniforms,p=this._sizeLods[r]-1,g=isFinite(s)?Math.PI/(2*p):2*Math.PI/(2*xy-1),v=s/g,b=isFinite(s)?1+Math.floor(u*v):xy;b>xy&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${b} samples when the maximum is set to ${xy}`);const x=[];let C=0;for(let L=0;L<xy;++L){const $=L/v,N=Math.exp(-$*$/2);x.push(N),L===0?C+=N:L<b&&(C+=2*N)}for(let L=0;L<x.length;L++)x[L]=x[L]/C;h.envMap.value=e.texture,h.samples.value=b,h.weights.value=x,h.latitudinal.value=a==="latitudinal",o&&(h.poleAxis.value=o);const{_lodMax:E}=this;h.dTheta.value=g,h.mipInt.value=E-r;const _=this._sizeLods[i],M=3*_*(i>E-Tx?i-E+Tx:0),R=4*(this._cubeSize-_);_T(t,M,R,3*_,2*_),l.setRenderTarget(t),l.render(d,TO)}}function Hpe(n){const e=[],t=[],r=[];let i=n;const s=n-Tx+1+T8.length;for(let a=0;a<s;a++){const o=Math.pow(2,i);t.push(o);let l=1/o;a>n-Tx?l=T8[a-n+Tx-1]:a===0&&(l=0),r.push(l);const c=1/(o-2),u=-c,d=1+c,h=[u,u,d,u,d,d,u,u,d,d,u,d],p=6,g=6,v=3,b=2,x=1,C=new Float32Array(v*g*p),E=new Float32Array(b*g*p),_=new Float32Array(x*g*p);for(let R=0;R<p;R++){const L=R%3*2/3-1,$=R>2?0:-1,N=[L,$,0,L+2/3,$,0,L+2/3,$+1,0,L,$,0,L+2/3,$+1,0,L,$+1,0];C.set(N,v*g*R),E.set(h,b*g*R);const I=[R,R,R,R,R,R];_.set(I,x*g*R)}const M=new gr;M.setAttribute("position",new oi(C,v)),M.setAttribute("uv",new oi(E,b)),M.setAttribute("faceIndex",new oi(_,x)),e.push(M),i>Tx&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function N8(n,e,t){const r=new wc(n,e,t);return r.texture.mapping=A1,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function _T(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function Vpe(n,e,t){const r=new Float32Array(xy),i=new be(0,1,0);return new No({name:"SphericalGaussianBlur",defines:{n:xy,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:GP(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:uh,depthTest:!1,depthWrite:!1})}function I8(){return new No({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:GP(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:uh,depthTest:!1,depthWrite:!1})}function D8(){return new No({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:GP(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:uh,depthTest:!1,depthWrite:!1})}function GP(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Gpe(n){let e=new WeakMap,t=null;function r(o){if(o&&o.isTexture){const l=o.mapping,c=l===Xx||l===IC,u=l===bh||l===xg;if(c||u){let d=e.get(o);const h=d!==void 0?d.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==h)return t===null&&(t=new z$(n)),d=c?t.fromEquirectangular(o,d):t.fromCubemap(o,d),d.texture.pmremVersion=o.pmremVersion,e.set(o,d),d.texture;if(d!==void 0)return d.texture;{const p=o.image;return c&&p&&p.height>0||u&&p&&i(p)?(t===null&&(t=new z$(n)),d=c?t.fromEquirectangular(o):t.fromCubemap(o),d.texture.pmremVersion=o.pmremVersion,e.set(o,d),o.addEventListener("dispose",s),d.texture):null}}}return o}function i(o){let l=0;const c=6;for(let u=0;u<c;u++)o[u]!==void 0&&l++;return l===c}function s(o){const l=o.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:a}}function Wpe(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(r){const i=t(r);return i===null&&Nx("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function jpe(n,e,t,r){const i={},s=new WeakMap;function a(d){const h=d.target;h.index!==null&&e.remove(h.index);for(const g in h.attributes)e.remove(h.attributes[g]);h.removeEventListener("dispose",a),delete i[h.id];const p=s.get(h);p&&(e.remove(p),s.delete(h)),r.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,t.memory.geometries--}function o(d,h){return i[h.id]===!0||(h.addEventListener("dispose",a),i[h.id]=!0,t.memory.geometries++),h}function l(d){const h=d.attributes;for(const p in h)e.update(h[p],n.ARRAY_BUFFER)}function c(d){const h=[],p=d.index,g=d.attributes.position;let v=0;if(p!==null){const C=p.array;v=p.version;for(let E=0,_=C.length;E<_;E+=3){const M=C[E+0],R=C[E+1],L=C[E+2];h.push(M,R,R,L,L,M)}}else if(g!==void 0){const C=g.array;v=g.version;for(let E=0,_=C.length/3-1;E<_;E+=3){const M=E+0,R=E+1,L=E+2;h.push(M,R,R,L,L,M)}}else return;const b=new(bX(h)?pP:hP)(h,1);b.version=v;const x=s.get(d);x&&e.remove(x),s.set(d,b)}function u(d){const h=s.get(d);if(h){const p=d.index;p!==null&&h.version<p.version&&c(d)}else c(d);return s.get(d)}return{get:o,update:l,getWireframeAttribute:u}}function qpe(n,e,t){let r;function i(h){r=h}let s,a;function o(h){s=h.type,a=h.bytesPerElement}function l(h,p){n.drawElements(r,p,s,h*a),t.update(p,r,1)}function c(h,p,g){g!==0&&(n.drawElementsInstanced(r,p,s,h*a,g),t.update(p,r,g))}function u(h,p,g){if(g===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,p,0,s,h,0,g);let b=0;for(let x=0;x<g;x++)b+=p[x];t.update(b,r,1)}function d(h,p,g,v){if(g===0)return;const b=e.get("WEBGL_multi_draw");if(b===null)for(let x=0;x<h.length;x++)c(h[x]/a,p[x],v[x]);else{b.multiDrawElementsInstancedWEBGL(r,p,0,s,h,0,v,0,g);let x=0;for(let C=0;C<g;C++)x+=p[C]*v[C];t.update(x,r,1)}}this.setMode=i,this.setIndex=o,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=d}function Xpe(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,a,o){switch(t.calls++,a){case n.TRIANGLES:t.triangles+=o*(s/3);break;case n.LINES:t.lines+=o*(s/2);break;case n.LINE_STRIP:t.lines+=o*(s-1);break;case n.LINE_LOOP:t.lines+=o*s;break;case n.POINTS:t.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function Kpe(n,e,t){const r=new WeakMap,i=new Hr;function s(a,o,l){const c=a.morphTargetInfluences,u=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,d=u!==void 0?u.length:0;let h=r.get(o);if(h===void 0||h.count!==d){let I=function(){$.dispose(),r.delete(o),o.removeEventListener("dispose",I)};var p=I;h!==void 0&&h.texture.dispose();const g=o.morphAttributes.position!==void 0,v=o.morphAttributes.normal!==void 0,b=o.morphAttributes.color!==void 0,x=o.morphAttributes.position||[],C=o.morphAttributes.normal||[],E=o.morphAttributes.color||[];let _=0;g===!0&&(_=1),v===!0&&(_=2),b===!0&&(_=3);let M=o.attributes.position.count*_,R=1;M>e.maxTextureSize&&(R=Math.ceil(M/e.maxTextureSize),M=e.maxTextureSize);const L=new Float32Array(M*R*4*d),$=new YN(L,M,R,d);$.type=ns,$.needsUpdate=!0;const N=_*4;for(let k=0;k<d;k++){const P=x[k],G=C[k],W=E[k],X=M*R*4*k;for(let z=0;z<P.count;z++){const J=z*N;g===!0&&(i.fromBufferAttribute(P,z),L[X+J+0]=i.x,L[X+J+1]=i.y,L[X+J+2]=i.z,L[X+J+3]=0),v===!0&&(i.fromBufferAttribute(G,z),L[X+J+4]=i.x,L[X+J+5]=i.y,L[X+J+6]=i.z,L[X+J+7]=0),b===!0&&(i.fromBufferAttribute(W,z),L[X+J+8]=i.x,L[X+J+9]=i.y,L[X+J+10]=i.z,L[X+J+11]=W.itemSize===4?i.w:1)}}h={count:d,texture:$,size:new Lt(M,R)},r.set(o,h),o.addEventListener("dispose",I)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",a.morphTexture,t);else{let g=0;for(let b=0;b<c.length;b++)g+=c[b];const v=o.morphTargetsRelative?1:1-g;l.getUniforms().setValue(n,"morphTargetBaseInfluence",v),l.getUniforms().setValue(n,"morphTargetInfluences",c)}l.getUniforms().setValue(n,"morphTargetsTexture",h.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",h.size)}return{update:s}}function Ype(n,e,t,r){let i=new WeakMap;function s(l){const c=r.render.frame,u=l.geometry,d=e.get(l,u);if(i.get(d)!==c&&(e.update(d),i.set(d,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),i.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),i.set(l,c))),l.isSkinnedMesh){const h=l.skeleton;i.get(h)!==c&&(h.update(),i.set(h,c))}return d}function a(){i=new WeakMap}function o(l){const c=l.target;c.removeEventListener("dispose",o),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:a}}const bK=new Ti,k8=new wP(1,1),xK=new YN,SK=new JN,wK=new b_,O8=[],B8=[],$8=new Float32Array(16),L8=new Float32Array(9),F8=new Float32Array(4);function N1(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=O8[i];if(s===void 0&&(s=new Float32Array(i),O8[i]=s),e!==0){r.toArray(s,0);for(let a=1,o=0;a!==e;++a)o+=t,n[a].toArray(s,o)}return s}function za(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function Ha(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function SI(n,e){let t=B8[e];t===void 0&&(t=new Int32Array(e),B8[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function Jpe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Zpe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(za(t,e))return;n.uniform2fv(this.addr,e),Ha(t,e)}}function Qpe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(za(t,e))return;n.uniform3fv(this.addr,e),Ha(t,e)}}function eme(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(za(t,e))return;n.uniform4fv(this.addr,e),Ha(t,e)}}function tme(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(za(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Ha(t,e)}else{if(za(t,r))return;F8.set(r),n.uniformMatrix2fv(this.addr,!1,F8),Ha(t,r)}}function nme(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(za(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Ha(t,e)}else{if(za(t,r))return;L8.set(r),n.uniformMatrix3fv(this.addr,!1,L8),Ha(t,r)}}function rme(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(za(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Ha(t,e)}else{if(za(t,r))return;$8.set(r),n.uniformMatrix4fv(this.addr,!1,$8),Ha(t,r)}}function ime(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function sme(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(za(t,e))return;n.uniform2iv(this.addr,e),Ha(t,e)}}function ame(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(za(t,e))return;n.uniform3iv(this.addr,e),Ha(t,e)}}function ome(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(za(t,e))return;n.uniform4iv(this.addr,e),Ha(t,e)}}function lme(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function cme(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(za(t,e))return;n.uniform2uiv(this.addr,e),Ha(t,e)}}function ume(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(za(t,e))return;n.uniform3uiv(this.addr,e),Ha(t,e)}}function dme(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(za(t,e))return;n.uniform4uiv(this.addr,e),Ha(t,e)}}function fme(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i);let s;this.type===n.SAMPLER_2D_SHADOW?(k8.compareFunction=cP,s=k8):s=bK,t.setTexture2D(e||s,i)}function hme(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||SK,i)}function pme(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||wK,i)}function mme(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||xK,i)}function gme(n){switch(n){case 5126:return Jpe;case 35664:return Zpe;case 35665:return Qpe;case 35666:return eme;case 35674:return tme;case 35675:return nme;case 35676:return rme;case 5124:case 35670:return ime;case 35667:case 35671:return sme;case 35668:case 35672:return ame;case 35669:case 35673:return ome;case 5125:return lme;case 36294:return cme;case 36295:return ume;case 36296:return dme;case 35678:case 36198:case 36298:case 36306:case 35682:return fme;case 35679:case 36299:case 36307:return hme;case 35680:case 36300:case 36308:case 36293:return pme;case 36289:case 36303:case 36311:case 36292:return mme}}function yme(n,e){n.uniform1fv(this.addr,e)}function vme(n,e){const t=N1(e,this.size,2);n.uniform2fv(this.addr,t)}function bme(n,e){const t=N1(e,this.size,3);n.uniform3fv(this.addr,t)}function xme(n,e){const t=N1(e,this.size,4);n.uniform4fv(this.addr,t)}function Sme(n,e){const t=N1(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function wme(n,e){const t=N1(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function Cme(n,e){const t=N1(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function _me(n,e){n.uniform1iv(this.addr,e)}function Eme(n,e){n.uniform2iv(this.addr,e)}function Ame(n,e){n.uniform3iv(this.addr,e)}function Tme(n,e){n.uniform4iv(this.addr,e)}function Mme(n,e){n.uniform1uiv(this.addr,e)}function Rme(n,e){n.uniform2uiv(this.addr,e)}function Nme(n,e){n.uniform3uiv(this.addr,e)}function Ime(n,e){n.uniform4uiv(this.addr,e)}function Dme(n,e,t){const r=this.cache,i=e.length,s=SI(t,i);za(r,s)||(n.uniform1iv(this.addr,s),Ha(r,s));for(let a=0;a!==i;++a)t.setTexture2D(e[a]||bK,s[a])}function kme(n,e,t){const r=this.cache,i=e.length,s=SI(t,i);za(r,s)||(n.uniform1iv(this.addr,s),Ha(r,s));for(let a=0;a!==i;++a)t.setTexture3D(e[a]||SK,s[a])}function Ome(n,e,t){const r=this.cache,i=e.length,s=SI(t,i);za(r,s)||(n.uniform1iv(this.addr,s),Ha(r,s));for(let a=0;a!==i;++a)t.setTextureCube(e[a]||wK,s[a])}function Bme(n,e,t){const r=this.cache,i=e.length,s=SI(t,i);za(r,s)||(n.uniform1iv(this.addr,s),Ha(r,s));for(let a=0;a!==i;++a)t.setTexture2DArray(e[a]||xK,s[a])}function $me(n){switch(n){case 5126:return yme;case 35664:return vme;case 35665:return bme;case 35666:return xme;case 35674:return Sme;case 35675:return wme;case 35676:return Cme;case 5124:case 35670:return _me;case 35667:case 35671:return Eme;case 35668:case 35672:return Ame;case 35669:case 35673:return Tme;case 5125:return Mme;case 36294:return Rme;case 36295:return Nme;case 36296:return Ime;case 35678:case 36198:case 36298:case 36306:case 35682:return Dme;case 35679:case 36299:case 36307:return kme;case 35680:case 36300:case 36308:case 36293:return Ome;case 36289:case 36303:case 36311:case 36292:return Bme}}class Lme{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.setValue=gme(t.type)}}class Fme{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=$me(t.type)}}class Pme{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,a=i.length;s!==a;++s){const o=i[s];o.setValue(e,t[o.id],r)}}}const DO=/(\w+)(\])?(\[|\.)?/g;function P8(n,e){n.seq.push(e),n.map[e.id]=e}function Ume(n,e,t){const r=n.name,i=r.length;for(DO.lastIndex=0;;){const s=DO.exec(r),a=DO.lastIndex;let o=s[1];const l=s[2]==="]",c=s[3];if(l&&(o=o|0),c===void 0||c==="["&&a+2===i){P8(t,c===void 0?new Lme(o,n,e):new Fme(o,n,e));break}else{let d=t.map[o];d===void 0&&(d=new Pme(o),P8(t,d)),t=d}}}class hM{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(t,i),a=e.getUniformLocation(t,s.name);Ume(s,a,this)}}setValue(e,t,r,i){const s=this.map[t];s!==void 0&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,a=t.length;s!==a;++s){const o=t[s],l=r[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const a=e[i];a.id in t&&r.push(a)}return r}}function U8(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}const zme=37297;let Hme=0;function Vme(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let a=i;a<s;a++){const o=a+1;r.push(`${o===e?">":" "} ${o}: ${t[a]}`)}return r.join(`
`)}const z8=new xr;function Gme(n){Qr._getMatrix(z8,Qr.workingColorSpace,n);const e=`mat3( ${z8.elements.map(t=>t.toFixed(4))} )`;switch(Qr.getTransfer(n)){case kC:return[e,"LinearTransferOETF"];case $i:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function H8(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),s=(n.getShaderInfoLog(e)||"").trim();if(r&&s==="")return"";const a=/ERROR: 0:(\d+)/.exec(s);if(a){const o=parseInt(a[1]);return t.toUpperCase()+`

`+s+`

`+Vme(n.getShaderSource(e),o)}else return s}function Wme(n,e){const t=Gme(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function jme(n,e){let t;switch(e){case eX:t="Linear";break;case tX:t="Reinhard";break;case nX:t="Cineon";break;case QF:t="ACESFilmic";break;case iX:t="AgX";break;case sX:t="Neutral";break;case rX:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const ET=new be;function qme(){Qr.getLuminanceCoefficients(ET);const n=ET.x.toFixed(4),e=ET.y.toFixed(4),t=ET.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function Xme(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Xw).join(`
`)}function Kme(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function Yme(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),a=s.name;let o=1;s.type===n.FLOAT_MAT2&&(o=2),s.type===n.FLOAT_MAT3&&(o=3),s.type===n.FLOAT_MAT4&&(o=4),t[a]={type:s.type,location:n.getAttribLocation(e,a),locationSize:o}}return t}function Xw(n){return n!==""}function V8(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function G8(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Jme=/^[ \t]*#include +<([\w\d./]+)>/gm;function H$(n){return n.replace(Jme,Qme)}const Zme=new Map;function Qme(n,e){let t=fr[e];if(t===void 0){const r=Zme.get(e);if(r!==void 0)t=fr[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return H$(t)}const ege=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function W8(n){return n.replace(ege,tge)}function tge(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function j8(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function nge(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===zN?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===cC?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Vd&&(e="SHADOWMAP_TYPE_VSM"),e}function rge(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case bh:case xg:e="ENVMAP_TYPE_CUBE";break;case A1:e="ENVMAP_TYPE_CUBE_UV";break}return e}function ige(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case xg:e="ENVMAP_MODE_REFRACTION";break}return e}function sge(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case m_:e="ENVMAP_BLENDING_MULTIPLY";break;case Zq:e="ENVMAP_BLENDING_MIX";break;case Qq:e="ENVMAP_BLENDING_ADD";break}return e}function age(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:r,maxMip:t}}function oge(n,e,t,r){const i=n.getContext(),s=t.defines;let a=t.vertexShader,o=t.fragmentShader;const l=nge(t),c=rge(t),u=ige(t),d=sge(t),h=age(t),p=Xme(t),g=Kme(s),v=i.createProgram();let b,x,C=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(b=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter(Xw).join(`
`),b.length>0&&(b+=`
`),x=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter(Xw).join(`
`),x.length>0&&(x+=`
`)):(b=[j8(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reversedDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Xw).join(`
`),x=[j8(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reversedDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==dh?"#define TONE_MAPPING":"",t.toneMapping!==dh?fr.tonemapping_pars_fragment:"",t.toneMapping!==dh?jme("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",fr.colorspace_pars_fragment,Wme("linearToOutputTexel",t.outputColorSpace),qme(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Xw).join(`
`)),a=H$(a),a=V8(a,t),a=G8(a,t),o=H$(o),o=V8(o,t),o=G8(o,t),a=W8(a),o=W8(o),t.isRawShaderMaterial!==!0&&(C=`#version 300 es
`,b=[p,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+b,x=["#define varying in",t.glslVersion===O$?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===O$?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+x);const E=C+b+a,_=C+x+o,M=U8(i,i.VERTEX_SHADER,E),R=U8(i,i.FRAGMENT_SHADER,_);i.attachShader(v,M),i.attachShader(v,R),t.index0AttributeName!==void 0?i.bindAttribLocation(v,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(v,0,"position"),i.linkProgram(v);function L(k){if(n.debug.checkShaderErrors){const P=i.getProgramInfoLog(v)||"",G=i.getShaderInfoLog(M)||"",W=i.getShaderInfoLog(R)||"",X=P.trim(),z=G.trim(),J=W.trim();let Q=!0,Y=!0;if(i.getProgramParameter(v,i.LINK_STATUS)===!1)if(Q=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,v,M,R);else{const q=H8(i,M,"vertex"),te=H8(i,R,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(v,i.VALIDATE_STATUS)+`

Material Name: `+k.name+`
Material Type: `+k.type+`

Program Info Log: `+X+`
`+q+`
`+te)}else X!==""?console.warn("THREE.WebGLProgram: Program Info Log:",X):(z===""||J==="")&&(Y=!1);Y&&(k.diagnostics={runnable:Q,programLog:X,vertexShader:{log:z,prefix:b},fragmentShader:{log:J,prefix:x}})}i.deleteShader(M),i.deleteShader(R),$=new hM(i,v),N=Yme(i,v)}let $;this.getUniforms=function(){return $===void 0&&L(this),$};let N;this.getAttributes=function(){return N===void 0&&L(this),N};let I=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return I===!1&&(I=i.getProgramParameter(v,zme)),I},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(v),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=Hme++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=M,this.fragmentShader=R,this}let lge=0;class cge{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),a=this._getShaderCacheForMaterial(e);return a.has(i)===!1&&(a.add(i),i.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new uge(e),t.set(e,r)),r}}class uge{constructor(e){this.id=lge++,this.code=e,this.usedTimes=0}}function dge(n,e,t,r,i,s,a){const o=new i1,l=new cge,c=new Set,u=[],d=i.logarithmicDepthBuffer,h=i.vertexTextures;let p=i.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(N){return c.add(N),N===0?"uv":`uv${N}`}function b(N,I,k,P,G){const W=P.fog,X=G.geometry,z=N.isMeshStandardMaterial?P.environment:null,J=(N.isMeshStandardMaterial?t:e).get(N.envMap||z),Q=J&&J.mapping===A1?J.image.height:null,Y=g[N.type];N.precision!==null&&(p=i.getMaxPrecision(N.precision),p!==N.precision&&console.warn("THREE.WebGLProgram.getParameters:",N.precision,"not supported, using",p,"instead."));const q=X.morphAttributes.position||X.morphAttributes.normal||X.morphAttributes.color,te=q!==void 0?q.length:0;let ne=0;X.morphAttributes.position!==void 0&&(ne=1),X.morphAttributes.normal!==void 0&&(ne=2),X.morphAttributes.color!==void 0&&(ne=3);let le,ye,ue,ve;if(Y){const lr=Gd[Y];le=lr.vertexShader,ye=lr.fragmentShader}else le=N.vertexShader,ye=N.fragmentShader,l.update(N),ue=l.getVertexShaderID(N),ve=l.getFragmentShaderID(N);const xe=n.getRenderTarget(),Pe=n.state.buffers.depth.getReversed(),ze=G.isInstancedMesh===!0,Ke=G.isBatchedMesh===!0,pt=!!N.map,dt=!!N.matcap,pe=!!J,Le=!!N.aoMap,Ue=!!N.lightMap,Ze=!!N.bumpMap,je=!!N.normalMap,lt=!!N.displacementMap,st=!!N.emissiveMap,ot=!!N.metalnessMap,Ut=!!N.roughnessMap,mt=N.anisotropy>0,ce=N.clearcoat>0,re=N.dispersion>0,$e=N.iridescence>0,Xe=N.sheen>0,at=N.transmission>0,et=mt&&!!N.anisotropyMap,Ft=ce&&!!N.clearcoatMap,At=ce&&!!N.clearcoatNormalMap,_t=ce&&!!N.clearcoatRoughnessMap,Xt=$e&&!!N.iridescenceMap,yt=$e&&!!N.iridescenceThicknessMap,Mt=Xe&&!!N.sheenColorMap,an=Xe&&!!N.sheenRoughnessMap,tn=!!N.specularMap,zt=!!N.specularColorMap,hn=!!N.specularIntensityMap,Te=at&&!!N.transmissionMap,qe=at&&!!N.thicknessMap,$t=!!N.gradientMap,en=!!N.alphaMap,Vt=N.alphaTest>0,kt=!!N.alphaHash,un=!!N.extensions;let In=dh;N.toneMapped&&(xe===null||xe.isXRRenderTarget===!0)&&(In=n.toneMapping);const Tr={shaderID:Y,shaderType:N.type,shaderName:N.name,vertexShader:le,fragmentShader:ye,defines:N.defines,customVertexShaderID:ue,customFragmentShaderID:ve,isRawShaderMaterial:N.isRawShaderMaterial===!0,glslVersion:N.glslVersion,precision:p,batching:Ke,batchingColor:Ke&&G._colorsTexture!==null,instancing:ze,instancingColor:ze&&G.instanceColor!==null,instancingMorph:ze&&G.morphTexture!==null,supportsVertexTextures:h,outputColorSpace:xe===null?n.outputColorSpace:xe.isXRRenderTarget===!0?xe.texture.colorSpace:qu,alphaToCoverage:!!N.alphaToCoverage,map:pt,matcap:dt,envMap:pe,envMapMode:pe&&J.mapping,envMapCubeUVHeight:Q,aoMap:Le,lightMap:Ue,bumpMap:Ze,normalMap:je,displacementMap:h&&lt,emissiveMap:st,normalMapObjectSpace:je&&N.normalMapType===dX,normalMapTangentSpace:je&&N.normalMapType===Lg,metalnessMap:ot,roughnessMap:Ut,anisotropy:mt,anisotropyMap:et,clearcoat:ce,clearcoatMap:Ft,clearcoatNormalMap:At,clearcoatRoughnessMap:_t,dispersion:re,iridescence:$e,iridescenceMap:Xt,iridescenceThicknessMap:yt,sheen:Xe,sheenColorMap:Mt,sheenRoughnessMap:an,specularMap:tn,specularColorMap:zt,specularIntensityMap:hn,transmission:at,transmissionMap:Te,thicknessMap:qe,gradientMap:$t,opaque:N.transparent===!1&&N.blending===Uy&&N.alphaToCoverage===!1,alphaMap:en,alphaTest:Vt,alphaHash:kt,combine:N.combine,mapUv:pt&&v(N.map.channel),aoMapUv:Le&&v(N.aoMap.channel),lightMapUv:Ue&&v(N.lightMap.channel),bumpMapUv:Ze&&v(N.bumpMap.channel),normalMapUv:je&&v(N.normalMap.channel),displacementMapUv:lt&&v(N.displacementMap.channel),emissiveMapUv:st&&v(N.emissiveMap.channel),metalnessMapUv:ot&&v(N.metalnessMap.channel),roughnessMapUv:Ut&&v(N.roughnessMap.channel),anisotropyMapUv:et&&v(N.anisotropyMap.channel),clearcoatMapUv:Ft&&v(N.clearcoatMap.channel),clearcoatNormalMapUv:At&&v(N.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:_t&&v(N.clearcoatRoughnessMap.channel),iridescenceMapUv:Xt&&v(N.iridescenceMap.channel),iridescenceThicknessMapUv:yt&&v(N.iridescenceThicknessMap.channel),sheenColorMapUv:Mt&&v(N.sheenColorMap.channel),sheenRoughnessMapUv:an&&v(N.sheenRoughnessMap.channel),specularMapUv:tn&&v(N.specularMap.channel),specularColorMapUv:zt&&v(N.specularColorMap.channel),specularIntensityMapUv:hn&&v(N.specularIntensityMap.channel),transmissionMapUv:Te&&v(N.transmissionMap.channel),thicknessMapUv:qe&&v(N.thicknessMap.channel),alphaMapUv:en&&v(N.alphaMap.channel),vertexTangents:!!X.attributes.tangent&&(je||mt),vertexColors:N.vertexColors,vertexAlphas:N.vertexColors===!0&&!!X.attributes.color&&X.attributes.color.itemSize===4,pointsUvs:G.isPoints===!0&&!!X.attributes.uv&&(pt||en),fog:!!W,useFog:N.fog===!0,fogExp2:!!W&&W.isFogExp2,flatShading:N.flatShading===!0&&N.wireframe===!1,sizeAttenuation:N.sizeAttenuation===!0,logarithmicDepthBuffer:d,reversedDepthBuffer:Pe,skinning:G.isSkinnedMesh===!0,morphTargets:X.morphAttributes.position!==void 0,morphNormals:X.morphAttributes.normal!==void 0,morphColors:X.morphAttributes.color!==void 0,morphTargetsCount:te,morphTextureStride:ne,numDirLights:I.directional.length,numPointLights:I.point.length,numSpotLights:I.spot.length,numSpotLightMaps:I.spotLightMap.length,numRectAreaLights:I.rectArea.length,numHemiLights:I.hemi.length,numDirLightShadows:I.directionalShadowMap.length,numPointLightShadows:I.pointShadowMap.length,numSpotLightShadows:I.spotShadowMap.length,numSpotLightShadowsWithMaps:I.numSpotLightShadowsWithMaps,numLightProbes:I.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:N.dithering,shadowMapEnabled:n.shadowMap.enabled&&k.length>0,shadowMapType:n.shadowMap.type,toneMapping:In,decodeVideoTexture:pt&&N.map.isVideoTexture===!0&&Qr.getTransfer(N.map.colorSpace)===$i,decodeVideoTextureEmissive:st&&N.emissiveMap.isVideoTexture===!0&&Qr.getTransfer(N.emissiveMap.colorSpace)===$i,premultipliedAlpha:N.premultipliedAlpha,doubleSided:N.side===$u,flipSided:N.side===Ao,useDepthPacking:N.depthPacking>=0,depthPacking:N.depthPacking||0,index0AttributeName:N.index0AttributeName,extensionClipCullDistance:un&&N.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(un&&N.extensions.multiDraw===!0||Ke)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:N.customProgramCacheKey()};return Tr.vertexUv1s=c.has(1),Tr.vertexUv2s=c.has(2),Tr.vertexUv3s=c.has(3),c.clear(),Tr}function x(N){const I=[];if(N.shaderID?I.push(N.shaderID):(I.push(N.customVertexShaderID),I.push(N.customFragmentShaderID)),N.defines!==void 0)for(const k in N.defines)I.push(k),I.push(N.defines[k]);return N.isRawShaderMaterial===!1&&(C(I,N),E(I,N),I.push(n.outputColorSpace)),I.push(N.customProgramCacheKey),I.join()}function C(N,I){N.push(I.precision),N.push(I.outputColorSpace),N.push(I.envMapMode),N.push(I.envMapCubeUVHeight),N.push(I.mapUv),N.push(I.alphaMapUv),N.push(I.lightMapUv),N.push(I.aoMapUv),N.push(I.bumpMapUv),N.push(I.normalMapUv),N.push(I.displacementMapUv),N.push(I.emissiveMapUv),N.push(I.metalnessMapUv),N.push(I.roughnessMapUv),N.push(I.anisotropyMapUv),N.push(I.clearcoatMapUv),N.push(I.clearcoatNormalMapUv),N.push(I.clearcoatRoughnessMapUv),N.push(I.iridescenceMapUv),N.push(I.iridescenceThicknessMapUv),N.push(I.sheenColorMapUv),N.push(I.sheenRoughnessMapUv),N.push(I.specularMapUv),N.push(I.specularColorMapUv),N.push(I.specularIntensityMapUv),N.push(I.transmissionMapUv),N.push(I.thicknessMapUv),N.push(I.combine),N.push(I.fogExp2),N.push(I.sizeAttenuation),N.push(I.morphTargetsCount),N.push(I.morphAttributeCount),N.push(I.numDirLights),N.push(I.numPointLights),N.push(I.numSpotLights),N.push(I.numSpotLightMaps),N.push(I.numHemiLights),N.push(I.numRectAreaLights),N.push(I.numDirLightShadows),N.push(I.numPointLightShadows),N.push(I.numSpotLightShadows),N.push(I.numSpotLightShadowsWithMaps),N.push(I.numLightProbes),N.push(I.shadowMapType),N.push(I.toneMapping),N.push(I.numClippingPlanes),N.push(I.numClipIntersection),N.push(I.depthPacking)}function E(N,I){o.disableAll(),I.supportsVertexTextures&&o.enable(0),I.instancing&&o.enable(1),I.instancingColor&&o.enable(2),I.instancingMorph&&o.enable(3),I.matcap&&o.enable(4),I.envMap&&o.enable(5),I.normalMapObjectSpace&&o.enable(6),I.normalMapTangentSpace&&o.enable(7),I.clearcoat&&o.enable(8),I.iridescence&&o.enable(9),I.alphaTest&&o.enable(10),I.vertexColors&&o.enable(11),I.vertexAlphas&&o.enable(12),I.vertexUv1s&&o.enable(13),I.vertexUv2s&&o.enable(14),I.vertexUv3s&&o.enable(15),I.vertexTangents&&o.enable(16),I.anisotropy&&o.enable(17),I.alphaHash&&o.enable(18),I.batching&&o.enable(19),I.dispersion&&o.enable(20),I.batchingColor&&o.enable(21),I.gradientMap&&o.enable(22),N.push(o.mask),o.disableAll(),I.fog&&o.enable(0),I.useFog&&o.enable(1),I.flatShading&&o.enable(2),I.logarithmicDepthBuffer&&o.enable(3),I.reversedDepthBuffer&&o.enable(4),I.skinning&&o.enable(5),I.morphTargets&&o.enable(6),I.morphNormals&&o.enable(7),I.morphColors&&o.enable(8),I.premultipliedAlpha&&o.enable(9),I.shadowMapEnabled&&o.enable(10),I.doubleSided&&o.enable(11),I.flipSided&&o.enable(12),I.useDepthPacking&&o.enable(13),I.dithering&&o.enable(14),I.transmission&&o.enable(15),I.sheen&&o.enable(16),I.opaque&&o.enable(17),I.pointsUvs&&o.enable(18),I.decodeVideoTexture&&o.enable(19),I.decodeVideoTextureEmissive&&o.enable(20),I.alphaToCoverage&&o.enable(21),N.push(o.mask)}function _(N){const I=g[N.type];let k;if(I){const P=Gd[I];k=mP.clone(P.uniforms)}else k=N.uniforms;return k}function M(N,I){let k;for(let P=0,G=u.length;P<G;P++){const W=u[P];if(W.cacheKey===I){k=W,++k.usedTimes;break}}return k===void 0&&(k=new oge(n,I,N,s),u.push(k)),k}function R(N){if(--N.usedTimes===0){const I=u.indexOf(N);u[I]=u[u.length-1],u.pop(),N.destroy()}}function L(N){l.remove(N)}function $(){l.dispose()}return{getParameters:b,getProgramCacheKey:x,getUniforms:_,acquireProgram:M,releaseProgram:R,releaseShaderCache:L,programs:u,dispose:$}}function fge(){let n=new WeakMap;function e(a){return n.has(a)}function t(a){let o=n.get(a);return o===void 0&&(o={},n.set(a,o)),o}function r(a){n.delete(a)}function i(a,o,l){n.get(a)[o]=l}function s(){n=new WeakMap}return{has:e,get:t,remove:r,update:i,dispose:s}}function hge(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function q8(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function X8(){const n=[];let e=0;const t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function a(d,h,p,g,v,b){let x=n[e];return x===void 0?(x={id:d.id,object:d,geometry:h,material:p,groupOrder:g,renderOrder:d.renderOrder,z:v,group:b},n[e]=x):(x.id=d.id,x.object=d,x.geometry=h,x.material=p,x.groupOrder=g,x.renderOrder=d.renderOrder,x.z=v,x.group=b),e++,x}function o(d,h,p,g,v,b){const x=a(d,h,p,g,v,b);p.transmission>0?r.push(x):p.transparent===!0?i.push(x):t.push(x)}function l(d,h,p,g,v,b){const x=a(d,h,p,g,v,b);p.transmission>0?r.unshift(x):p.transparent===!0?i.unshift(x):t.unshift(x)}function c(d,h){t.length>1&&t.sort(d||hge),r.length>1&&r.sort(h||q8),i.length>1&&i.sort(h||q8)}function u(){for(let d=e,h=n.length;d<h;d++){const p=n[d];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:o,unshift:l,finish:u,sort:c}}function pge(){let n=new WeakMap;function e(r,i){const s=n.get(r);let a;return s===void 0?(a=new X8,n.set(r,[a])):i>=s.length?(a=new X8,s.push(a)):a=s[i],a}function t(){n=new WeakMap}return{get:e,dispose:t}}function mge(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new be,color:new sn};break;case"SpotLight":t={position:new be,direction:new be,color:new sn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new be,color:new sn,distance:0,decay:0};break;case"HemisphereLight":t={direction:new be,skyColor:new sn,groundColor:new sn};break;case"RectAreaLight":t={color:new sn,position:new be,halfWidth:new be,halfHeight:new be};break}return n[e.id]=t,t}}}function gge(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Lt};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Lt};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Lt,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let yge=0;function vge(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function bge(n){const e=new mge,t=gge(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)r.probe.push(new be);const i=new be,s=new zn,a=new zn;function o(c){let u=0,d=0,h=0;for(let N=0;N<9;N++)r.probe[N].set(0,0,0);let p=0,g=0,v=0,b=0,x=0,C=0,E=0,_=0,M=0,R=0,L=0;c.sort(vge);for(let N=0,I=c.length;N<I;N++){const k=c[N],P=k.color,G=k.intensity,W=k.distance,X=k.shadow&&k.shadow.map?k.shadow.map.texture:null;if(k.isAmbientLight)u+=P.r*G,d+=P.g*G,h+=P.b*G;else if(k.isLightProbe){for(let z=0;z<9;z++)r.probe[z].addScaledVector(k.sh.coefficients[z],G);L++}else if(k.isDirectionalLight){const z=e.get(k);if(z.color.copy(k.color).multiplyScalar(k.intensity),k.castShadow){const J=k.shadow,Q=t.get(k);Q.shadowIntensity=J.intensity,Q.shadowBias=J.bias,Q.shadowNormalBias=J.normalBias,Q.shadowRadius=J.radius,Q.shadowMapSize=J.mapSize,r.directionalShadow[p]=Q,r.directionalShadowMap[p]=X,r.directionalShadowMatrix[p]=k.shadow.matrix,C++}r.directional[p]=z,p++}else if(k.isSpotLight){const z=e.get(k);z.position.setFromMatrixPosition(k.matrixWorld),z.color.copy(P).multiplyScalar(G),z.distance=W,z.coneCos=Math.cos(k.angle),z.penumbraCos=Math.cos(k.angle*(1-k.penumbra)),z.decay=k.decay,r.spot[v]=z;const J=k.shadow;if(k.map&&(r.spotLightMap[M]=k.map,M++,J.updateMatrices(k),k.castShadow&&R++),r.spotLightMatrix[v]=J.matrix,k.castShadow){const Q=t.get(k);Q.shadowIntensity=J.intensity,Q.shadowBias=J.bias,Q.shadowNormalBias=J.normalBias,Q.shadowRadius=J.radius,Q.shadowMapSize=J.mapSize,r.spotShadow[v]=Q,r.spotShadowMap[v]=X,_++}v++}else if(k.isRectAreaLight){const z=e.get(k);z.color.copy(P).multiplyScalar(G),z.halfWidth.set(k.width*.5,0,0),z.halfHeight.set(0,k.height*.5,0),r.rectArea[b]=z,b++}else if(k.isPointLight){const z=e.get(k);if(z.color.copy(k.color).multiplyScalar(k.intensity),z.distance=k.distance,z.decay=k.decay,k.castShadow){const J=k.shadow,Q=t.get(k);Q.shadowIntensity=J.intensity,Q.shadowBias=J.bias,Q.shadowNormalBias=J.normalBias,Q.shadowRadius=J.radius,Q.shadowMapSize=J.mapSize,Q.shadowCameraNear=J.camera.near,Q.shadowCameraFar=J.camera.far,r.pointShadow[g]=Q,r.pointShadowMap[g]=X,r.pointShadowMatrix[g]=k.shadow.matrix,E++}r.point[g]=z,g++}else if(k.isHemisphereLight){const z=e.get(k);z.skyColor.copy(k.color).multiplyScalar(G),z.groundColor.copy(k.groundColor).multiplyScalar(G),r.hemi[x]=z,x++}}b>0&&(n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=fn.LTC_FLOAT_1,r.rectAreaLTC2=fn.LTC_FLOAT_2):(r.rectAreaLTC1=fn.LTC_HALF_1,r.rectAreaLTC2=fn.LTC_HALF_2)),r.ambient[0]=u,r.ambient[1]=d,r.ambient[2]=h;const $=r.hash;($.directionalLength!==p||$.pointLength!==g||$.spotLength!==v||$.rectAreaLength!==b||$.hemiLength!==x||$.numDirectionalShadows!==C||$.numPointShadows!==E||$.numSpotShadows!==_||$.numSpotMaps!==M||$.numLightProbes!==L)&&(r.directional.length=p,r.spot.length=v,r.rectArea.length=b,r.point.length=g,r.hemi.length=x,r.directionalShadow.length=C,r.directionalShadowMap.length=C,r.pointShadow.length=E,r.pointShadowMap.length=E,r.spotShadow.length=_,r.spotShadowMap.length=_,r.directionalShadowMatrix.length=C,r.pointShadowMatrix.length=E,r.spotLightMatrix.length=_+M-R,r.spotLightMap.length=M,r.numSpotLightShadowsWithMaps=R,r.numLightProbes=L,$.directionalLength=p,$.pointLength=g,$.spotLength=v,$.rectAreaLength=b,$.hemiLength=x,$.numDirectionalShadows=C,$.numPointShadows=E,$.numSpotShadows=_,$.numSpotMaps=M,$.numLightProbes=L,r.version=yge++)}function l(c,u){let d=0,h=0,p=0,g=0,v=0;const b=u.matrixWorldInverse;for(let x=0,C=c.length;x<C;x++){const E=c[x];if(E.isDirectionalLight){const _=r.directional[d];_.direction.setFromMatrixPosition(E.matrixWorld),i.setFromMatrixPosition(E.target.matrixWorld),_.direction.sub(i),_.direction.transformDirection(b),d++}else if(E.isSpotLight){const _=r.spot[p];_.position.setFromMatrixPosition(E.matrixWorld),_.position.applyMatrix4(b),_.direction.setFromMatrixPosition(E.matrixWorld),i.setFromMatrixPosition(E.target.matrixWorld),_.direction.sub(i),_.direction.transformDirection(b),p++}else if(E.isRectAreaLight){const _=r.rectArea[g];_.position.setFromMatrixPosition(E.matrixWorld),_.position.applyMatrix4(b),a.identity(),s.copy(E.matrixWorld),s.premultiply(b),a.extractRotation(s),_.halfWidth.set(E.width*.5,0,0),_.halfHeight.set(0,E.height*.5,0),_.halfWidth.applyMatrix4(a),_.halfHeight.applyMatrix4(a),g++}else if(E.isPointLight){const _=r.point[h];_.position.setFromMatrixPosition(E.matrixWorld),_.position.applyMatrix4(b),h++}else if(E.isHemisphereLight){const _=r.hemi[v];_.direction.setFromMatrixPosition(E.matrixWorld),_.direction.transformDirection(b),v++}}}return{setup:o,setupView:l,state:r}}function K8(n){const e=new bge(n),t=[],r=[];function i(u){c.camera=u,t.length=0,r.length=0}function s(u){t.push(u)}function a(u){r.push(u)}function o(){e.setup(t)}function l(u){e.setupView(t,u)}const c={lightsArray:t,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:c,setupLights:o,setupLightsView:l,pushLight:s,pushShadow:a}}function xge(n){let e=new WeakMap;function t(i,s=0){const a=e.get(i);let o;return a===void 0?(o=new K8(n),e.set(i,[o])):s>=a.length?(o=new K8(n),a.push(o)):o=a[s],o}function r(){e=new WeakMap}return{get:t,dispose:r}}const Sge=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,wge=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Cge(n,e,t){let r=new M1;const i=new Lt,s=new Lt,a=new Hr,o=new yI({depthPacking:uX}),l=new RP,c={},u=t.maxTextureSize,d={[vh]:Ao,[Ao]:vh,[$u]:$u},h=new No({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Lt},radius:{value:4}},vertexShader:Sge,fragmentShader:wge}),p=h.clone();p.defines.HORIZONTAL_PASS=1;const g=new gr;g.setAttribute("position",new oi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new rs(g,h),b=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=zN;let x=this.type;this.render=function(R,L,$){if(b.enabled===!1||b.autoUpdate===!1&&b.needsUpdate===!1||R.length===0)return;const N=n.getRenderTarget(),I=n.getActiveCubeFace(),k=n.getActiveMipmapLevel(),P=n.state;P.setBlending(uh),P.buffers.depth.getReversed()?P.buffers.color.setClear(0,0,0,0):P.buffers.color.setClear(1,1,1,1),P.buffers.depth.setTest(!0),P.setScissorTest(!1);const G=x!==Vd&&this.type===Vd,W=x===Vd&&this.type!==Vd;for(let X=0,z=R.length;X<z;X++){const J=R[X],Q=J.shadow;if(Q===void 0){console.warn("THREE.WebGLShadowMap:",J,"has no shadow.");continue}if(Q.autoUpdate===!1&&Q.needsUpdate===!1)continue;i.copy(Q.mapSize);const Y=Q.getFrameExtents();if(i.multiply(Y),s.copy(Q.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(s.x=Math.floor(u/Y.x),i.x=s.x*Y.x,Q.mapSize.x=s.x),i.y>u&&(s.y=Math.floor(u/Y.y),i.y=s.y*Y.y,Q.mapSize.y=s.y)),Q.map===null||G===!0||W===!0){const te=this.type!==Vd?{minFilter:no,magFilter:no}:{};Q.map!==null&&Q.map.dispose(),Q.map=new wc(i.x,i.y,te),Q.map.texture.name=J.name+".shadowMap",Q.camera.updateProjectionMatrix()}n.setRenderTarget(Q.map),n.clear();const q=Q.getViewportCount();for(let te=0;te<q;te++){const ne=Q.getViewport(te);a.set(s.x*ne.x,s.y*ne.y,s.x*ne.z,s.y*ne.w),P.viewport(a),Q.updateMatrices(J,te),r=Q.getFrustum(),_(L,$,Q.camera,J,this.type)}Q.isPointLightShadow!==!0&&this.type===Vd&&C(Q,$),Q.needsUpdate=!1}x=this.type,b.needsUpdate=!1,n.setRenderTarget(N,I,k)};function C(R,L){const $=e.update(v);h.defines.VSM_SAMPLES!==R.blurSamples&&(h.defines.VSM_SAMPLES=R.blurSamples,p.defines.VSM_SAMPLES=R.blurSamples,h.needsUpdate=!0,p.needsUpdate=!0),R.mapPass===null&&(R.mapPass=new wc(i.x,i.y)),h.uniforms.shadow_pass.value=R.map.texture,h.uniforms.resolution.value=R.mapSize,h.uniforms.radius.value=R.radius,n.setRenderTarget(R.mapPass),n.clear(),n.renderBufferDirect(L,null,$,h,v,null),p.uniforms.shadow_pass.value=R.mapPass.texture,p.uniforms.resolution.value=R.mapSize,p.uniforms.radius.value=R.radius,n.setRenderTarget(R.map),n.clear(),n.renderBufferDirect(L,null,$,p,v,null)}function E(R,L,$,N){let I=null;const k=$.isPointLight===!0?R.customDistanceMaterial:R.customDepthMaterial;if(k!==void 0)I=k;else if(I=$.isPointLight===!0?l:o,n.localClippingEnabled&&L.clipShadows===!0&&Array.isArray(L.clippingPlanes)&&L.clippingPlanes.length!==0||L.displacementMap&&L.displacementScale!==0||L.alphaMap&&L.alphaTest>0||L.map&&L.alphaTest>0||L.alphaToCoverage===!0){const P=I.uuid,G=L.uuid;let W=c[P];W===void 0&&(W={},c[P]=W);let X=W[G];X===void 0&&(X=I.clone(),W[G]=X,L.addEventListener("dispose",M)),I=X}if(I.visible=L.visible,I.wireframe=L.wireframe,N===Vd?I.side=L.shadowSide!==null?L.shadowSide:L.side:I.side=L.shadowSide!==null?L.shadowSide:d[L.side],I.alphaMap=L.alphaMap,I.alphaTest=L.alphaToCoverage===!0?.5:L.alphaTest,I.map=L.map,I.clipShadows=L.clipShadows,I.clippingPlanes=L.clippingPlanes,I.clipIntersection=L.clipIntersection,I.displacementMap=L.displacementMap,I.displacementScale=L.displacementScale,I.displacementBias=L.displacementBias,I.wireframeLinewidth=L.wireframeLinewidth,I.linewidth=L.linewidth,$.isPointLight===!0&&I.isMeshDistanceMaterial===!0){const P=n.properties.get(I);P.light=$}return I}function _(R,L,$,N,I){if(R.visible===!1)return;if(R.layers.test(L.layers)&&(R.isMesh||R.isLine||R.isPoints)&&(R.castShadow||R.receiveShadow&&I===Vd)&&(!R.frustumCulled||r.intersectsObject(R))){R.modelViewMatrix.multiplyMatrices($.matrixWorldInverse,R.matrixWorld);const G=e.update(R),W=R.material;if(Array.isArray(W)){const X=G.groups;for(let z=0,J=X.length;z<J;z++){const Q=X[z],Y=W[Q.materialIndex];if(Y&&Y.visible){const q=E(R,Y,N,I);R.onBeforeShadow(n,R,L,$,G,q,Q),n.renderBufferDirect($,null,G,q,R,Q),R.onAfterShadow(n,R,L,$,G,q,Q)}}}else if(W.visible){const X=E(R,W,N,I);R.onBeforeShadow(n,R,L,$,G,X,null),n.renderBufferDirect($,null,G,X,R,null),R.onAfterShadow(n,R,L,$,G,X,null)}}const P=R.children;for(let G=0,W=P.length;G<W;G++)_(P[G],L,$,N,I)}function M(R){R.target.removeEventListener("dispose",M);for(const $ in c){const N=c[$],I=R.target.uuid;I in N&&(N[I].dispose(),delete N[I])}}}const _ge={[VM]:GM,[WM]:XM,[jM]:KM,[Yy]:qM,[GM]:VM,[XM]:WM,[KM]:jM,[qM]:Yy};function Ege(n,e){function t(){let Te=!1;const qe=new Hr;let $t=null;const en=new Hr(0,0,0,0);return{setMask:function(Vt){$t!==Vt&&!Te&&(n.colorMask(Vt,Vt,Vt,Vt),$t=Vt)},setLocked:function(Vt){Te=Vt},setClear:function(Vt,kt,un,In,Tr){Tr===!0&&(Vt*=In,kt*=In,un*=In),qe.set(Vt,kt,un,In),en.equals(qe)===!1&&(n.clearColor(Vt,kt,un,In),en.copy(qe))},reset:function(){Te=!1,$t=null,en.set(-1,0,0,0)}}}function r(){let Te=!1,qe=!1,$t=null,en=null,Vt=null;return{setReversed:function(kt){if(qe!==kt){const un=e.get("EXT_clip_control");kt?un.clipControlEXT(un.LOWER_LEFT_EXT,un.ZERO_TO_ONE_EXT):un.clipControlEXT(un.LOWER_LEFT_EXT,un.NEGATIVE_ONE_TO_ONE_EXT),qe=kt;const In=Vt;Vt=null,this.setClear(In)}},getReversed:function(){return qe},setTest:function(kt){kt?xe(n.DEPTH_TEST):Pe(n.DEPTH_TEST)},setMask:function(kt){$t!==kt&&!Te&&(n.depthMask(kt),$t=kt)},setFunc:function(kt){if(qe&&(kt=_ge[kt]),en!==kt){switch(kt){case VM:n.depthFunc(n.NEVER);break;case GM:n.depthFunc(n.ALWAYS);break;case WM:n.depthFunc(n.LESS);break;case Yy:n.depthFunc(n.LEQUAL);break;case jM:n.depthFunc(n.EQUAL);break;case qM:n.depthFunc(n.GEQUAL);break;case XM:n.depthFunc(n.GREATER);break;case KM:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}en=kt}},setLocked:function(kt){Te=kt},setClear:function(kt){Vt!==kt&&(qe&&(kt=1-kt),n.clearDepth(kt),Vt=kt)},reset:function(){Te=!1,$t=null,en=null,Vt=null,qe=!1}}}function i(){let Te=!1,qe=null,$t=null,en=null,Vt=null,kt=null,un=null,In=null,Tr=null;return{setTest:function(lr){Te||(lr?xe(n.STENCIL_TEST):Pe(n.STENCIL_TEST))},setMask:function(lr){qe!==lr&&!Te&&(n.stencilMask(lr),qe=lr)},setFunc:function(lr,Qs,es){($t!==lr||en!==Qs||Vt!==es)&&(n.stencilFunc(lr,Qs,es),$t=lr,en=Qs,Vt=es)},setOp:function(lr,Qs,es){(kt!==lr||un!==Qs||In!==es)&&(n.stencilOp(lr,Qs,es),kt=lr,un=Qs,In=es)},setLocked:function(lr){Te=lr},setClear:function(lr){Tr!==lr&&(n.clearStencil(lr),Tr=lr)},reset:function(){Te=!1,qe=null,$t=null,en=null,Vt=null,kt=null,un=null,In=null,Tr=null}}}const s=new t,a=new r,o=new i,l=new WeakMap,c=new WeakMap;let u={},d={},h=new WeakMap,p=[],g=null,v=!1,b=null,x=null,C=null,E=null,_=null,M=null,R=null,L=new sn(0,0,0),$=0,N=!1,I=null,k=null,P=null,G=null,W=null;const X=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let z=!1,J=0;const Q=n.getParameter(n.VERSION);Q.indexOf("WebGL")!==-1?(J=parseFloat(/^WebGL (\d)/.exec(Q)[1]),z=J>=1):Q.indexOf("OpenGL ES")!==-1&&(J=parseFloat(/^OpenGL ES (\d)/.exec(Q)[1]),z=J>=2);let Y=null,q={};const te=n.getParameter(n.SCISSOR_BOX),ne=n.getParameter(n.VIEWPORT),le=new Hr().fromArray(te),ye=new Hr().fromArray(ne);function ue(Te,qe,$t,en){const Vt=new Uint8Array(4),kt=n.createTexture();n.bindTexture(Te,kt),n.texParameteri(Te,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(Te,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let un=0;un<$t;un++)Te===n.TEXTURE_3D||Te===n.TEXTURE_2D_ARRAY?n.texImage3D(qe,0,n.RGBA,1,1,en,0,n.RGBA,n.UNSIGNED_BYTE,Vt):n.texImage2D(qe+un,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Vt);return kt}const ve={};ve[n.TEXTURE_2D]=ue(n.TEXTURE_2D,n.TEXTURE_2D,1),ve[n.TEXTURE_CUBE_MAP]=ue(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),ve[n.TEXTURE_2D_ARRAY]=ue(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),ve[n.TEXTURE_3D]=ue(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),a.setClear(1),o.setClear(0),xe(n.DEPTH_TEST),a.setFunc(Yy),Ze(!1),je(T$),xe(n.CULL_FACE),Le(uh);function xe(Te){u[Te]!==!0&&(n.enable(Te),u[Te]=!0)}function Pe(Te){u[Te]!==!1&&(n.disable(Te),u[Te]=!1)}function ze(Te,qe){return d[Te]!==qe?(n.bindFramebuffer(Te,qe),d[Te]=qe,Te===n.DRAW_FRAMEBUFFER&&(d[n.FRAMEBUFFER]=qe),Te===n.FRAMEBUFFER&&(d[n.DRAW_FRAMEBUFFER]=qe),!0):!1}function Ke(Te,qe){let $t=p,en=!1;if(Te){$t=h.get(qe),$t===void 0&&($t=[],h.set(qe,$t));const Vt=Te.textures;if($t.length!==Vt.length||$t[0]!==n.COLOR_ATTACHMENT0){for(let kt=0,un=Vt.length;kt<un;kt++)$t[kt]=n.COLOR_ATTACHMENT0+kt;$t.length=Vt.length,en=!0}}else $t[0]!==n.BACK&&($t[0]=n.BACK,en=!0);en&&n.drawBuffers($t)}function pt(Te){return g!==Te?(n.useProgram(Te),g=Te,!0):!1}const dt={[ng]:n.FUNC_ADD,[Bq]:n.FUNC_SUBTRACT,[$q]:n.FUNC_REVERSE_SUBTRACT};dt[Lq]=n.MIN,dt[Fq]=n.MAX;const pe={[Pq]:n.ZERO,[Uq]:n.ONE,[zq]:n.SRC_COLOR,[zM]:n.SRC_ALPHA,[qq]:n.SRC_ALPHA_SATURATE,[Wq]:n.DST_COLOR,[Vq]:n.DST_ALPHA,[Hq]:n.ONE_MINUS_SRC_COLOR,[HM]:n.ONE_MINUS_SRC_ALPHA,[jq]:n.ONE_MINUS_DST_COLOR,[Gq]:n.ONE_MINUS_DST_ALPHA,[Xq]:n.CONSTANT_COLOR,[Kq]:n.ONE_MINUS_CONSTANT_COLOR,[Yq]:n.CONSTANT_ALPHA,[Jq]:n.ONE_MINUS_CONSTANT_ALPHA};function Le(Te,qe,$t,en,Vt,kt,un,In,Tr,lr){if(Te===uh){v===!0&&(Pe(n.BLEND),v=!1);return}if(v===!1&&(xe(n.BLEND),v=!0),Te!==Oq){if(Te!==b||lr!==N){if((x!==ng||_!==ng)&&(n.blendEquation(n.FUNC_ADD),x=ng,_=ng),lr)switch(Te){case Uy:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case M$:n.blendFunc(n.ONE,n.ONE);break;case R$:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case N$:n.blendFuncSeparate(n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ZERO,n.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",Te);break}else switch(Te){case Uy:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case M$:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE,n.ONE,n.ONE);break;case R$:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case N$:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",Te);break}C=null,E=null,M=null,R=null,L.set(0,0,0),$=0,b=Te,N=lr}return}Vt=Vt||qe,kt=kt||$t,un=un||en,(qe!==x||Vt!==_)&&(n.blendEquationSeparate(dt[qe],dt[Vt]),x=qe,_=Vt),($t!==C||en!==E||kt!==M||un!==R)&&(n.blendFuncSeparate(pe[$t],pe[en],pe[kt],pe[un]),C=$t,E=en,M=kt,R=un),(In.equals(L)===!1||Tr!==$)&&(n.blendColor(In.r,In.g,In.b,Tr),L.copy(In),$=Tr),b=Te,N=!1}function Ue(Te,qe){Te.side===$u?Pe(n.CULL_FACE):xe(n.CULL_FACE);let $t=Te.side===Ao;qe&&($t=!$t),Ze($t),Te.blending===Uy&&Te.transparent===!1?Le(uh):Le(Te.blending,Te.blendEquation,Te.blendSrc,Te.blendDst,Te.blendEquationAlpha,Te.blendSrcAlpha,Te.blendDstAlpha,Te.blendColor,Te.blendAlpha,Te.premultipliedAlpha),a.setFunc(Te.depthFunc),a.setTest(Te.depthTest),a.setMask(Te.depthWrite),s.setMask(Te.colorWrite);const en=Te.stencilWrite;o.setTest(en),en&&(o.setMask(Te.stencilWriteMask),o.setFunc(Te.stencilFunc,Te.stencilRef,Te.stencilFuncMask),o.setOp(Te.stencilFail,Te.stencilZFail,Te.stencilZPass)),st(Te.polygonOffset,Te.polygonOffsetFactor,Te.polygonOffsetUnits),Te.alphaToCoverage===!0?xe(n.SAMPLE_ALPHA_TO_COVERAGE):Pe(n.SAMPLE_ALPHA_TO_COVERAGE)}function Ze(Te){I!==Te&&(Te?n.frontFace(n.CW):n.frontFace(n.CCW),I=Te)}function je(Te){Te!==Iq?(xe(n.CULL_FACE),Te!==k&&(Te===T$?n.cullFace(n.BACK):Te===Dq?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Pe(n.CULL_FACE),k=Te}function lt(Te){Te!==P&&(z&&n.lineWidth(Te),P=Te)}function st(Te,qe,$t){Te?(xe(n.POLYGON_OFFSET_FILL),(G!==qe||W!==$t)&&(n.polygonOffset(qe,$t),G=qe,W=$t)):Pe(n.POLYGON_OFFSET_FILL)}function ot(Te){Te?xe(n.SCISSOR_TEST):Pe(n.SCISSOR_TEST)}function Ut(Te){Te===void 0&&(Te=n.TEXTURE0+X-1),Y!==Te&&(n.activeTexture(Te),Y=Te)}function mt(Te,qe,$t){$t===void 0&&(Y===null?$t=n.TEXTURE0+X-1:$t=Y);let en=q[$t];en===void 0&&(en={type:void 0,texture:void 0},q[$t]=en),(en.type!==Te||en.texture!==qe)&&(Y!==$t&&(n.activeTexture($t),Y=$t),n.bindTexture(Te,qe||ve[Te]),en.type=Te,en.texture=qe)}function ce(){const Te=q[Y];Te!==void 0&&Te.type!==void 0&&(n.bindTexture(Te.type,null),Te.type=void 0,Te.texture=void 0)}function re(){try{n.compressedTexImage2D(...arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function $e(){try{n.compressedTexImage3D(...arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function Xe(){try{n.texSubImage2D(...arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function at(){try{n.texSubImage3D(...arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function et(){try{n.compressedTexSubImage2D(...arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function Ft(){try{n.compressedTexSubImage3D(...arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function At(){try{n.texStorage2D(...arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function _t(){try{n.texStorage3D(...arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function Xt(){try{n.texImage2D(...arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function yt(){try{n.texImage3D(...arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function Mt(Te){le.equals(Te)===!1&&(n.scissor(Te.x,Te.y,Te.z,Te.w),le.copy(Te))}function an(Te){ye.equals(Te)===!1&&(n.viewport(Te.x,Te.y,Te.z,Te.w),ye.copy(Te))}function tn(Te,qe){let $t=c.get(qe);$t===void 0&&($t=new WeakMap,c.set(qe,$t));let en=$t.get(Te);en===void 0&&(en=n.getUniformBlockIndex(qe,Te.name),$t.set(Te,en))}function zt(Te,qe){const en=c.get(qe).get(Te);l.get(qe)!==en&&(n.uniformBlockBinding(qe,en,Te.__bindingPointIndex),l.set(qe,en))}function hn(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),a.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},Y=null,q={},d={},h=new WeakMap,p=[],g=null,v=!1,b=null,x=null,C=null,E=null,_=null,M=null,R=null,L=new sn(0,0,0),$=0,N=!1,I=null,k=null,P=null,G=null,W=null,le.set(0,0,n.canvas.width,n.canvas.height),ye.set(0,0,n.canvas.width,n.canvas.height),s.reset(),a.reset(),o.reset()}return{buffers:{color:s,depth:a,stencil:o},enable:xe,disable:Pe,bindFramebuffer:ze,drawBuffers:Ke,useProgram:pt,setBlending:Le,setMaterial:Ue,setFlipSided:Ze,setCullFace:je,setLineWidth:lt,setPolygonOffset:st,setScissorTest:ot,activeTexture:Ut,bindTexture:mt,unbindTexture:ce,compressedTexImage2D:re,compressedTexImage3D:$e,texImage2D:Xt,texImage3D:yt,updateUBOMapping:tn,uniformBlockBinding:zt,texStorage2D:At,texStorage3D:_t,texSubImage2D:Xe,texSubImage3D:at,compressedTexSubImage2D:et,compressedTexSubImage3D:Ft,scissor:Mt,viewport:an,reset:hn}}function Age(n,e,t,r,i,s,a){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new Lt,u=new WeakMap;let d;const h=new WeakMap;let p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function g(ce,re){return p?new OffscreenCanvas(ce,re):BC("canvas")}function v(ce,re,$e){let Xe=1;const at=mt(ce);if((at.width>$e||at.height>$e)&&(Xe=$e/Math.max(at.width,at.height)),Xe<1)if(typeof HTMLImageElement<"u"&&ce instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ce instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ce instanceof ImageBitmap||typeof VideoFrame<"u"&&ce instanceof VideoFrame){const et=Math.floor(Xe*at.width),Ft=Math.floor(Xe*at.height);d===void 0&&(d=g(et,Ft));const At=re?g(et,Ft):d;return At.width=et,At.height=Ft,At.getContext("2d").drawImage(ce,0,0,et,Ft),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+at.width+"x"+at.height+") to ("+et+"x"+Ft+")."),At}else return"data"in ce&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+at.width+"x"+at.height+")."),ce;return ce}function b(ce){return ce.generateMipmaps}function x(ce){n.generateMipmap(ce)}function C(ce){return ce.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:ce.isWebGL3DRenderTarget?n.TEXTURE_3D:ce.isWebGLArrayRenderTarget||ce.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function E(ce,re,$e,Xe,at=!1){if(ce!==null){if(n[ce]!==void 0)return n[ce];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ce+"'")}let et=re;if(re===n.RED&&($e===n.FLOAT&&(et=n.R32F),$e===n.HALF_FLOAT&&(et=n.R16F),$e===n.UNSIGNED_BYTE&&(et=n.R8)),re===n.RED_INTEGER&&($e===n.UNSIGNED_BYTE&&(et=n.R8UI),$e===n.UNSIGNED_SHORT&&(et=n.R16UI),$e===n.UNSIGNED_INT&&(et=n.R32UI),$e===n.BYTE&&(et=n.R8I),$e===n.SHORT&&(et=n.R16I),$e===n.INT&&(et=n.R32I)),re===n.RG&&($e===n.FLOAT&&(et=n.RG32F),$e===n.HALF_FLOAT&&(et=n.RG16F),$e===n.UNSIGNED_BYTE&&(et=n.RG8)),re===n.RG_INTEGER&&($e===n.UNSIGNED_BYTE&&(et=n.RG8UI),$e===n.UNSIGNED_SHORT&&(et=n.RG16UI),$e===n.UNSIGNED_INT&&(et=n.RG32UI),$e===n.BYTE&&(et=n.RG8I),$e===n.SHORT&&(et=n.RG16I),$e===n.INT&&(et=n.RG32I)),re===n.RGB_INTEGER&&($e===n.UNSIGNED_BYTE&&(et=n.RGB8UI),$e===n.UNSIGNED_SHORT&&(et=n.RGB16UI),$e===n.UNSIGNED_INT&&(et=n.RGB32UI),$e===n.BYTE&&(et=n.RGB8I),$e===n.SHORT&&(et=n.RGB16I),$e===n.INT&&(et=n.RGB32I)),re===n.RGBA_INTEGER&&($e===n.UNSIGNED_BYTE&&(et=n.RGBA8UI),$e===n.UNSIGNED_SHORT&&(et=n.RGBA16UI),$e===n.UNSIGNED_INT&&(et=n.RGBA32UI),$e===n.BYTE&&(et=n.RGBA8I),$e===n.SHORT&&(et=n.RGBA16I),$e===n.INT&&(et=n.RGBA32I)),re===n.RGB&&$e===n.UNSIGNED_INT_5_9_9_9_REV&&(et=n.RGB9_E5),re===n.RGBA){const Ft=at?kC:Qr.getTransfer(Xe);$e===n.FLOAT&&(et=n.RGBA32F),$e===n.HALF_FLOAT&&(et=n.RGBA16F),$e===n.UNSIGNED_BYTE&&(et=Ft===$i?n.SRGB8_ALPHA8:n.RGBA8),$e===n.UNSIGNED_SHORT_4_4_4_4&&(et=n.RGBA4),$e===n.UNSIGNED_SHORT_5_5_5_1&&(et=n.RGB5_A1)}return(et===n.R16F||et===n.R32F||et===n.RG16F||et===n.RG32F||et===n.RGBA16F||et===n.RGBA32F)&&e.get("EXT_color_buffer_float"),et}function _(ce,re){let $e;return ce?re===null||re===xh||re===Jx?$e=n.DEPTH24_STENCIL8:re===ns?$e=n.DEPTH32F_STENCIL8:re===Yx&&($e=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):re===null||re===xh||re===Jx?$e=n.DEPTH_COMPONENT24:re===ns?$e=n.DEPTH_COMPONENT32F:re===Yx&&($e=n.DEPTH_COMPONENT16),$e}function M(ce,re){return b(ce)===!0||ce.isFramebufferTexture&&ce.minFilter!==no&&ce.minFilter!==ai?Math.log2(Math.max(re.width,re.height))+1:ce.mipmaps!==void 0&&ce.mipmaps.length>0?ce.mipmaps.length:ce.isCompressedTexture&&Array.isArray(ce.image)?re.mipmaps.length:1}function R(ce){const re=ce.target;re.removeEventListener("dispose",R),$(re),re.isVideoTexture&&u.delete(re)}function L(ce){const re=ce.target;re.removeEventListener("dispose",L),I(re)}function $(ce){const re=r.get(ce);if(re.__webglInit===void 0)return;const $e=ce.source,Xe=h.get($e);if(Xe){const at=Xe[re.__cacheKey];at.usedTimes--,at.usedTimes===0&&N(ce),Object.keys(Xe).length===0&&h.delete($e)}r.remove(ce)}function N(ce){const re=r.get(ce);n.deleteTexture(re.__webglTexture);const $e=ce.source,Xe=h.get($e);delete Xe[re.__cacheKey],a.memory.textures--}function I(ce){const re=r.get(ce);if(ce.depthTexture&&(ce.depthTexture.dispose(),r.remove(ce.depthTexture)),ce.isWebGLCubeRenderTarget)for(let Xe=0;Xe<6;Xe++){if(Array.isArray(re.__webglFramebuffer[Xe]))for(let at=0;at<re.__webglFramebuffer[Xe].length;at++)n.deleteFramebuffer(re.__webglFramebuffer[Xe][at]);else n.deleteFramebuffer(re.__webglFramebuffer[Xe]);re.__webglDepthbuffer&&n.deleteRenderbuffer(re.__webglDepthbuffer[Xe])}else{if(Array.isArray(re.__webglFramebuffer))for(let Xe=0;Xe<re.__webglFramebuffer.length;Xe++)n.deleteFramebuffer(re.__webglFramebuffer[Xe]);else n.deleteFramebuffer(re.__webglFramebuffer);if(re.__webglDepthbuffer&&n.deleteRenderbuffer(re.__webglDepthbuffer),re.__webglMultisampledFramebuffer&&n.deleteFramebuffer(re.__webglMultisampledFramebuffer),re.__webglColorRenderbuffer)for(let Xe=0;Xe<re.__webglColorRenderbuffer.length;Xe++)re.__webglColorRenderbuffer[Xe]&&n.deleteRenderbuffer(re.__webglColorRenderbuffer[Xe]);re.__webglDepthRenderbuffer&&n.deleteRenderbuffer(re.__webglDepthRenderbuffer)}const $e=ce.textures;for(let Xe=0,at=$e.length;Xe<at;Xe++){const et=r.get($e[Xe]);et.__webglTexture&&(n.deleteTexture(et.__webglTexture),a.memory.textures--),r.remove($e[Xe])}r.remove(ce)}let k=0;function P(){k=0}function G(){const ce=k;return ce>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+ce+" texture units while this GPU supports only "+i.maxTextures),k+=1,ce}function W(ce){const re=[];return re.push(ce.wrapS),re.push(ce.wrapT),re.push(ce.wrapR||0),re.push(ce.magFilter),re.push(ce.minFilter),re.push(ce.anisotropy),re.push(ce.internalFormat),re.push(ce.format),re.push(ce.type),re.push(ce.generateMipmaps),re.push(ce.premultiplyAlpha),re.push(ce.flipY),re.push(ce.unpackAlignment),re.push(ce.colorSpace),re.join()}function X(ce,re){const $e=r.get(ce);if(ce.isVideoTexture&&ot(ce),ce.isRenderTargetTexture===!1&&ce.isExternalTexture!==!0&&ce.version>0&&$e.__version!==ce.version){const Xe=ce.image;if(Xe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Xe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ve($e,ce,re);return}}else ce.isExternalTexture&&($e.__webglTexture=ce.sourceTexture?ce.sourceTexture:null);t.bindTexture(n.TEXTURE_2D,$e.__webglTexture,n.TEXTURE0+re)}function z(ce,re){const $e=r.get(ce);if(ce.isRenderTargetTexture===!1&&ce.version>0&&$e.__version!==ce.version){ve($e,ce,re);return}t.bindTexture(n.TEXTURE_2D_ARRAY,$e.__webglTexture,n.TEXTURE0+re)}function J(ce,re){const $e=r.get(ce);if(ce.isRenderTargetTexture===!1&&ce.version>0&&$e.__version!==ce.version){ve($e,ce,re);return}t.bindTexture(n.TEXTURE_3D,$e.__webglTexture,n.TEXTURE0+re)}function Q(ce,re){const $e=r.get(ce);if(ce.version>0&&$e.__version!==ce.version){xe($e,ce,re);return}t.bindTexture(n.TEXTURE_CUBE_MAP,$e.__webglTexture,n.TEXTURE0+re)}const Y={[Sg]:n.REPEAT,[oa]:n.CLAMP_TO_EDGE,[Kx]:n.MIRRORED_REPEAT},q={[no]:n.NEAREST,[HN]:n.NEAREST_MIPMAP_NEAREST,[Ty]:n.NEAREST_MIPMAP_LINEAR,[ai]:n.LINEAR,[Rx]:n.LINEAR_MIPMAP_NEAREST,[Pu]:n.LINEAR_MIPMAP_LINEAR},te={[fX]:n.NEVER,[vX]:n.ALWAYS,[hX]:n.LESS,[cP]:n.LEQUAL,[pX]:n.EQUAL,[yX]:n.GEQUAL,[mX]:n.GREATER,[gX]:n.NOTEQUAL};function ne(ce,re){if(re.type===ns&&e.has("OES_texture_float_linear")===!1&&(re.magFilter===ai||re.magFilter===Rx||re.magFilter===Ty||re.magFilter===Pu||re.minFilter===ai||re.minFilter===Rx||re.minFilter===Ty||re.minFilter===Pu)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(ce,n.TEXTURE_WRAP_S,Y[re.wrapS]),n.texParameteri(ce,n.TEXTURE_WRAP_T,Y[re.wrapT]),(ce===n.TEXTURE_3D||ce===n.TEXTURE_2D_ARRAY)&&n.texParameteri(ce,n.TEXTURE_WRAP_R,Y[re.wrapR]),n.texParameteri(ce,n.TEXTURE_MAG_FILTER,q[re.magFilter]),n.texParameteri(ce,n.TEXTURE_MIN_FILTER,q[re.minFilter]),re.compareFunction&&(n.texParameteri(ce,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(ce,n.TEXTURE_COMPARE_FUNC,te[re.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(re.magFilter===no||re.minFilter!==Ty&&re.minFilter!==Pu||re.type===ns&&e.has("OES_texture_float_linear")===!1)return;if(re.anisotropy>1||r.get(re).__currentAnisotropy){const $e=e.get("EXT_texture_filter_anisotropic");n.texParameterf(ce,$e.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(re.anisotropy,i.getMaxAnisotropy())),r.get(re).__currentAnisotropy=re.anisotropy}}}function le(ce,re){let $e=!1;ce.__webglInit===void 0&&(ce.__webglInit=!0,re.addEventListener("dispose",R));const Xe=re.source;let at=h.get(Xe);at===void 0&&(at={},h.set(Xe,at));const et=W(re);if(et!==ce.__cacheKey){at[et]===void 0&&(at[et]={texture:n.createTexture(),usedTimes:0},a.memory.textures++,$e=!0),at[et].usedTimes++;const Ft=at[ce.__cacheKey];Ft!==void 0&&(at[ce.__cacheKey].usedTimes--,Ft.usedTimes===0&&N(re)),ce.__cacheKey=et,ce.__webglTexture=at[et].texture}return $e}function ye(ce,re,$e){return Math.floor(Math.floor(ce/$e)/re)}function ue(ce,re,$e,Xe){const et=ce.updateRanges;if(et.length===0)t.texSubImage2D(n.TEXTURE_2D,0,0,0,re.width,re.height,$e,Xe,re.data);else{et.sort((yt,Mt)=>yt.start-Mt.start);let Ft=0;for(let yt=1;yt<et.length;yt++){const Mt=et[Ft],an=et[yt],tn=Mt.start+Mt.count,zt=ye(an.start,re.width,4),hn=ye(Mt.start,re.width,4);an.start<=tn+1&&zt===hn&&ye(an.start+an.count-1,re.width,4)===zt?Mt.count=Math.max(Mt.count,an.start+an.count-Mt.start):(++Ft,et[Ft]=an)}et.length=Ft+1;const At=n.getParameter(n.UNPACK_ROW_LENGTH),_t=n.getParameter(n.UNPACK_SKIP_PIXELS),Xt=n.getParameter(n.UNPACK_SKIP_ROWS);n.pixelStorei(n.UNPACK_ROW_LENGTH,re.width);for(let yt=0,Mt=et.length;yt<Mt;yt++){const an=et[yt],tn=Math.floor(an.start/4),zt=Math.ceil(an.count/4),hn=tn%re.width,Te=Math.floor(tn/re.width),qe=zt,$t=1;n.pixelStorei(n.UNPACK_SKIP_PIXELS,hn),n.pixelStorei(n.UNPACK_SKIP_ROWS,Te),t.texSubImage2D(n.TEXTURE_2D,0,hn,Te,qe,$t,$e,Xe,re.data)}ce.clearUpdateRanges(),n.pixelStorei(n.UNPACK_ROW_LENGTH,At),n.pixelStorei(n.UNPACK_SKIP_PIXELS,_t),n.pixelStorei(n.UNPACK_SKIP_ROWS,Xt)}}function ve(ce,re,$e){let Xe=n.TEXTURE_2D;(re.isDataArrayTexture||re.isCompressedArrayTexture)&&(Xe=n.TEXTURE_2D_ARRAY),re.isData3DTexture&&(Xe=n.TEXTURE_3D);const at=le(ce,re),et=re.source;t.bindTexture(Xe,ce.__webglTexture,n.TEXTURE0+$e);const Ft=r.get(et);if(et.version!==Ft.__version||at===!0){t.activeTexture(n.TEXTURE0+$e);const At=Qr.getPrimaries(Qr.workingColorSpace),_t=re.colorSpace===_p?null:Qr.getPrimaries(re.colorSpace),Xt=re.colorSpace===_p||At===_t?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,re.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,re.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,re.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Xt);let yt=v(re.image,!1,i.maxTextureSize);yt=Ut(re,yt);const Mt=s.convert(re.format,re.colorSpace),an=s.convert(re.type);let tn=E(re.internalFormat,Mt,an,re.colorSpace,re.isVideoTexture);ne(Xe,re);let zt;const hn=re.mipmaps,Te=re.isVideoTexture!==!0,qe=Ft.__version===void 0||at===!0,$t=et.dataReady,en=M(re,yt);if(re.isDepthTexture)tn=_(re.format===Qx,re.type),qe&&(Te?t.texStorage2D(n.TEXTURE_2D,1,tn,yt.width,yt.height):t.texImage2D(n.TEXTURE_2D,0,tn,yt.width,yt.height,0,Mt,an,null));else if(re.isDataTexture)if(hn.length>0){Te&&qe&&t.texStorage2D(n.TEXTURE_2D,en,tn,hn[0].width,hn[0].height);for(let Vt=0,kt=hn.length;Vt<kt;Vt++)zt=hn[Vt],Te?$t&&t.texSubImage2D(n.TEXTURE_2D,Vt,0,0,zt.width,zt.height,Mt,an,zt.data):t.texImage2D(n.TEXTURE_2D,Vt,tn,zt.width,zt.height,0,Mt,an,zt.data);re.generateMipmaps=!1}else Te?(qe&&t.texStorage2D(n.TEXTURE_2D,en,tn,yt.width,yt.height),$t&&ue(re,yt,Mt,an)):t.texImage2D(n.TEXTURE_2D,0,tn,yt.width,yt.height,0,Mt,an,yt.data);else if(re.isCompressedTexture)if(re.isCompressedArrayTexture){Te&&qe&&t.texStorage3D(n.TEXTURE_2D_ARRAY,en,tn,hn[0].width,hn[0].height,yt.depth);for(let Vt=0,kt=hn.length;Vt<kt;Vt++)if(zt=hn[Vt],re.format!==la)if(Mt!==null)if(Te){if($t)if(re.layerUpdates.size>0){const un=U$(zt.width,zt.height,re.format,re.type);for(const In of re.layerUpdates){const Tr=zt.data.subarray(In*un/zt.data.BYTES_PER_ELEMENT,(In+1)*un/zt.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Vt,0,0,In,zt.width,zt.height,1,Mt,Tr)}re.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Vt,0,0,0,zt.width,zt.height,yt.depth,Mt,zt.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Vt,tn,zt.width,zt.height,yt.depth,0,zt.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Te?$t&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,Vt,0,0,0,zt.width,zt.height,yt.depth,Mt,an,zt.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Vt,tn,zt.width,zt.height,yt.depth,0,Mt,an,zt.data)}else{Te&&qe&&t.texStorage2D(n.TEXTURE_2D,en,tn,hn[0].width,hn[0].height);for(let Vt=0,kt=hn.length;Vt<kt;Vt++)zt=hn[Vt],re.format!==la?Mt!==null?Te?$t&&t.compressedTexSubImage2D(n.TEXTURE_2D,Vt,0,0,zt.width,zt.height,Mt,zt.data):t.compressedTexImage2D(n.TEXTURE_2D,Vt,tn,zt.width,zt.height,0,zt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Te?$t&&t.texSubImage2D(n.TEXTURE_2D,Vt,0,0,zt.width,zt.height,Mt,an,zt.data):t.texImage2D(n.TEXTURE_2D,Vt,tn,zt.width,zt.height,0,Mt,an,zt.data)}else if(re.isDataArrayTexture)if(Te){if(qe&&t.texStorage3D(n.TEXTURE_2D_ARRAY,en,tn,yt.width,yt.height,yt.depth),$t)if(re.layerUpdates.size>0){const Vt=U$(yt.width,yt.height,re.format,re.type);for(const kt of re.layerUpdates){const un=yt.data.subarray(kt*Vt/yt.data.BYTES_PER_ELEMENT,(kt+1)*Vt/yt.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,kt,yt.width,yt.height,1,Mt,an,un)}re.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,yt.width,yt.height,yt.depth,Mt,an,yt.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,tn,yt.width,yt.height,yt.depth,0,Mt,an,yt.data);else if(re.isData3DTexture)Te?(qe&&t.texStorage3D(n.TEXTURE_3D,en,tn,yt.width,yt.height,yt.depth),$t&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,yt.width,yt.height,yt.depth,Mt,an,yt.data)):t.texImage3D(n.TEXTURE_3D,0,tn,yt.width,yt.height,yt.depth,0,Mt,an,yt.data);else if(re.isFramebufferTexture){if(qe)if(Te)t.texStorage2D(n.TEXTURE_2D,en,tn,yt.width,yt.height);else{let Vt=yt.width,kt=yt.height;for(let un=0;un<en;un++)t.texImage2D(n.TEXTURE_2D,un,tn,Vt,kt,0,Mt,an,null),Vt>>=1,kt>>=1}}else if(hn.length>0){if(Te&&qe){const Vt=mt(hn[0]);t.texStorage2D(n.TEXTURE_2D,en,tn,Vt.width,Vt.height)}for(let Vt=0,kt=hn.length;Vt<kt;Vt++)zt=hn[Vt],Te?$t&&t.texSubImage2D(n.TEXTURE_2D,Vt,0,0,Mt,an,zt):t.texImage2D(n.TEXTURE_2D,Vt,tn,Mt,an,zt);re.generateMipmaps=!1}else if(Te){if(qe){const Vt=mt(yt);t.texStorage2D(n.TEXTURE_2D,en,tn,Vt.width,Vt.height)}$t&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Mt,an,yt)}else t.texImage2D(n.TEXTURE_2D,0,tn,Mt,an,yt);b(re)&&x(Xe),Ft.__version=et.version,re.onUpdate&&re.onUpdate(re)}ce.__version=re.version}function xe(ce,re,$e){if(re.image.length!==6)return;const Xe=le(ce,re),at=re.source;t.bindTexture(n.TEXTURE_CUBE_MAP,ce.__webglTexture,n.TEXTURE0+$e);const et=r.get(at);if(at.version!==et.__version||Xe===!0){t.activeTexture(n.TEXTURE0+$e);const Ft=Qr.getPrimaries(Qr.workingColorSpace),At=re.colorSpace===_p?null:Qr.getPrimaries(re.colorSpace),_t=re.colorSpace===_p||Ft===At?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,re.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,re.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,re.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,_t);const Xt=re.isCompressedTexture||re.image[0].isCompressedTexture,yt=re.image[0]&&re.image[0].isDataTexture,Mt=[];for(let kt=0;kt<6;kt++)!Xt&&!yt?Mt[kt]=v(re.image[kt],!0,i.maxCubemapSize):Mt[kt]=yt?re.image[kt].image:re.image[kt],Mt[kt]=Ut(re,Mt[kt]);const an=Mt[0],tn=s.convert(re.format,re.colorSpace),zt=s.convert(re.type),hn=E(re.internalFormat,tn,zt,re.colorSpace),Te=re.isVideoTexture!==!0,qe=et.__version===void 0||Xe===!0,$t=at.dataReady;let en=M(re,an);ne(n.TEXTURE_CUBE_MAP,re);let Vt;if(Xt){Te&&qe&&t.texStorage2D(n.TEXTURE_CUBE_MAP,en,hn,an.width,an.height);for(let kt=0;kt<6;kt++){Vt=Mt[kt].mipmaps;for(let un=0;un<Vt.length;un++){const In=Vt[un];re.format!==la?tn!==null?Te?$t&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+kt,un,0,0,In.width,In.height,tn,In.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+kt,un,hn,In.width,In.height,0,In.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Te?$t&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+kt,un,0,0,In.width,In.height,tn,zt,In.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+kt,un,hn,In.width,In.height,0,tn,zt,In.data)}}}else{if(Vt=re.mipmaps,Te&&qe){Vt.length>0&&en++;const kt=mt(Mt[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,en,hn,kt.width,kt.height)}for(let kt=0;kt<6;kt++)if(yt){Te?$t&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+kt,0,0,0,Mt[kt].width,Mt[kt].height,tn,zt,Mt[kt].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+kt,0,hn,Mt[kt].width,Mt[kt].height,0,tn,zt,Mt[kt].data);for(let un=0;un<Vt.length;un++){const Tr=Vt[un].image[kt].image;Te?$t&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+kt,un+1,0,0,Tr.width,Tr.height,tn,zt,Tr.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+kt,un+1,hn,Tr.width,Tr.height,0,tn,zt,Tr.data)}}else{Te?$t&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+kt,0,0,0,tn,zt,Mt[kt]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+kt,0,hn,tn,zt,Mt[kt]);for(let un=0;un<Vt.length;un++){const In=Vt[un];Te?$t&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+kt,un+1,0,0,tn,zt,In.image[kt]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+kt,un+1,hn,tn,zt,In.image[kt])}}}b(re)&&x(n.TEXTURE_CUBE_MAP),et.__version=at.version,re.onUpdate&&re.onUpdate(re)}ce.__version=re.version}function Pe(ce,re,$e,Xe,at,et){const Ft=s.convert($e.format,$e.colorSpace),At=s.convert($e.type),_t=E($e.internalFormat,Ft,At,$e.colorSpace),Xt=r.get(re),yt=r.get($e);if(yt.__renderTarget=re,!Xt.__hasExternalTextures){const Mt=Math.max(1,re.width>>et),an=Math.max(1,re.height>>et);at===n.TEXTURE_3D||at===n.TEXTURE_2D_ARRAY?t.texImage3D(at,et,_t,Mt,an,re.depth,0,Ft,At,null):t.texImage2D(at,et,_t,Mt,an,0,Ft,At,null)}t.bindFramebuffer(n.FRAMEBUFFER,ce),st(re)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Xe,at,yt.__webglTexture,0,lt(re)):(at===n.TEXTURE_2D||at>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&at<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Xe,at,yt.__webglTexture,et),t.bindFramebuffer(n.FRAMEBUFFER,null)}function ze(ce,re,$e){if(n.bindRenderbuffer(n.RENDERBUFFER,ce),re.depthBuffer){const Xe=re.depthTexture,at=Xe&&Xe.isDepthTexture?Xe.type:null,et=_(re.stencilBuffer,at),Ft=re.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,At=lt(re);st(re)?o.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,At,et,re.width,re.height):$e?n.renderbufferStorageMultisample(n.RENDERBUFFER,At,et,re.width,re.height):n.renderbufferStorage(n.RENDERBUFFER,et,re.width,re.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ft,n.RENDERBUFFER,ce)}else{const Xe=re.textures;for(let at=0;at<Xe.length;at++){const et=Xe[at],Ft=s.convert(et.format,et.colorSpace),At=s.convert(et.type),_t=E(et.internalFormat,Ft,At,et.colorSpace),Xt=lt(re);$e&&st(re)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Xt,_t,re.width,re.height):st(re)?o.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Xt,_t,re.width,re.height):n.renderbufferStorage(n.RENDERBUFFER,_t,re.width,re.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Ke(ce,re){if(re&&re.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,ce),!(re.depthTexture&&re.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Xe=r.get(re.depthTexture);Xe.__renderTarget=re,(!Xe.__webglTexture||re.depthTexture.image.width!==re.width||re.depthTexture.image.height!==re.height)&&(re.depthTexture.image.width=re.width,re.depthTexture.image.height=re.height,re.depthTexture.needsUpdate=!0),X(re.depthTexture,0);const at=Xe.__webglTexture,et=lt(re);if(re.depthTexture.format===Zx)st(re)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,at,0,et):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,at,0);else if(re.depthTexture.format===Qx)st(re)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,at,0,et):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,at,0);else throw new Error("Unknown depthTexture format")}function pt(ce){const re=r.get(ce),$e=ce.isWebGLCubeRenderTarget===!0;if(re.__boundDepthTexture!==ce.depthTexture){const Xe=ce.depthTexture;if(re.__depthDisposeCallback&&re.__depthDisposeCallback(),Xe){const at=()=>{delete re.__boundDepthTexture,delete re.__depthDisposeCallback,Xe.removeEventListener("dispose",at)};Xe.addEventListener("dispose",at),re.__depthDisposeCallback=at}re.__boundDepthTexture=Xe}if(ce.depthTexture&&!re.__autoAllocateDepthBuffer){if($e)throw new Error("target.depthTexture not supported in Cube render targets");const Xe=ce.texture.mipmaps;Xe&&Xe.length>0?Ke(re.__webglFramebuffer[0],ce):Ke(re.__webglFramebuffer,ce)}else if($e){re.__webglDepthbuffer=[];for(let Xe=0;Xe<6;Xe++)if(t.bindFramebuffer(n.FRAMEBUFFER,re.__webglFramebuffer[Xe]),re.__webglDepthbuffer[Xe]===void 0)re.__webglDepthbuffer[Xe]=n.createRenderbuffer(),ze(re.__webglDepthbuffer[Xe],ce,!1);else{const at=ce.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,et=re.__webglDepthbuffer[Xe];n.bindRenderbuffer(n.RENDERBUFFER,et),n.framebufferRenderbuffer(n.FRAMEBUFFER,at,n.RENDERBUFFER,et)}}else{const Xe=ce.texture.mipmaps;if(Xe&&Xe.length>0?t.bindFramebuffer(n.FRAMEBUFFER,re.__webglFramebuffer[0]):t.bindFramebuffer(n.FRAMEBUFFER,re.__webglFramebuffer),re.__webglDepthbuffer===void 0)re.__webglDepthbuffer=n.createRenderbuffer(),ze(re.__webglDepthbuffer,ce,!1);else{const at=ce.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,et=re.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,et),n.framebufferRenderbuffer(n.FRAMEBUFFER,at,n.RENDERBUFFER,et)}}t.bindFramebuffer(n.FRAMEBUFFER,null)}function dt(ce,re,$e){const Xe=r.get(ce);re!==void 0&&Pe(Xe.__webglFramebuffer,ce,ce.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),$e!==void 0&&pt(ce)}function pe(ce){const re=ce.texture,$e=r.get(ce),Xe=r.get(re);ce.addEventListener("dispose",L);const at=ce.textures,et=ce.isWebGLCubeRenderTarget===!0,Ft=at.length>1;if(Ft||(Xe.__webglTexture===void 0&&(Xe.__webglTexture=n.createTexture()),Xe.__version=re.version,a.memory.textures++),et){$e.__webglFramebuffer=[];for(let At=0;At<6;At++)if(re.mipmaps&&re.mipmaps.length>0){$e.__webglFramebuffer[At]=[];for(let _t=0;_t<re.mipmaps.length;_t++)$e.__webglFramebuffer[At][_t]=n.createFramebuffer()}else $e.__webglFramebuffer[At]=n.createFramebuffer()}else{if(re.mipmaps&&re.mipmaps.length>0){$e.__webglFramebuffer=[];for(let At=0;At<re.mipmaps.length;At++)$e.__webglFramebuffer[At]=n.createFramebuffer()}else $e.__webglFramebuffer=n.createFramebuffer();if(Ft)for(let At=0,_t=at.length;At<_t;At++){const Xt=r.get(at[At]);Xt.__webglTexture===void 0&&(Xt.__webglTexture=n.createTexture(),a.memory.textures++)}if(ce.samples>0&&st(ce)===!1){$e.__webglMultisampledFramebuffer=n.createFramebuffer(),$e.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,$e.__webglMultisampledFramebuffer);for(let At=0;At<at.length;At++){const _t=at[At];$e.__webglColorRenderbuffer[At]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,$e.__webglColorRenderbuffer[At]);const Xt=s.convert(_t.format,_t.colorSpace),yt=s.convert(_t.type),Mt=E(_t.internalFormat,Xt,yt,_t.colorSpace,ce.isXRRenderTarget===!0),an=lt(ce);n.renderbufferStorageMultisample(n.RENDERBUFFER,an,Mt,ce.width,ce.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+At,n.RENDERBUFFER,$e.__webglColorRenderbuffer[At])}n.bindRenderbuffer(n.RENDERBUFFER,null),ce.depthBuffer&&($e.__webglDepthRenderbuffer=n.createRenderbuffer(),ze($e.__webglDepthRenderbuffer,ce,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(et){t.bindTexture(n.TEXTURE_CUBE_MAP,Xe.__webglTexture),ne(n.TEXTURE_CUBE_MAP,re);for(let At=0;At<6;At++)if(re.mipmaps&&re.mipmaps.length>0)for(let _t=0;_t<re.mipmaps.length;_t++)Pe($e.__webglFramebuffer[At][_t],ce,re,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+At,_t);else Pe($e.__webglFramebuffer[At],ce,re,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+At,0);b(re)&&x(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Ft){for(let At=0,_t=at.length;At<_t;At++){const Xt=at[At],yt=r.get(Xt);let Mt=n.TEXTURE_2D;(ce.isWebGL3DRenderTarget||ce.isWebGLArrayRenderTarget)&&(Mt=ce.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Mt,yt.__webglTexture),ne(Mt,Xt),Pe($e.__webglFramebuffer,ce,Xt,n.COLOR_ATTACHMENT0+At,Mt,0),b(Xt)&&x(Mt)}t.unbindTexture()}else{let At=n.TEXTURE_2D;if((ce.isWebGL3DRenderTarget||ce.isWebGLArrayRenderTarget)&&(At=ce.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(At,Xe.__webglTexture),ne(At,re),re.mipmaps&&re.mipmaps.length>0)for(let _t=0;_t<re.mipmaps.length;_t++)Pe($e.__webglFramebuffer[_t],ce,re,n.COLOR_ATTACHMENT0,At,_t);else Pe($e.__webglFramebuffer,ce,re,n.COLOR_ATTACHMENT0,At,0);b(re)&&x(At),t.unbindTexture()}ce.depthBuffer&&pt(ce)}function Le(ce){const re=ce.textures;for(let $e=0,Xe=re.length;$e<Xe;$e++){const at=re[$e];if(b(at)){const et=C(ce),Ft=r.get(at).__webglTexture;t.bindTexture(et,Ft),x(et),t.unbindTexture()}}}const Ue=[],Ze=[];function je(ce){if(ce.samples>0){if(st(ce)===!1){const re=ce.textures,$e=ce.width,Xe=ce.height;let at=n.COLOR_BUFFER_BIT;const et=ce.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ft=r.get(ce),At=re.length>1;if(At)for(let Xt=0;Xt<re.length;Xt++)t.bindFramebuffer(n.FRAMEBUFFER,Ft.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Xt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Ft.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Xt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Ft.__webglMultisampledFramebuffer);const _t=ce.texture.mipmaps;_t&&_t.length>0?t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ft.__webglFramebuffer[0]):t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ft.__webglFramebuffer);for(let Xt=0;Xt<re.length;Xt++){if(ce.resolveDepthBuffer&&(ce.depthBuffer&&(at|=n.DEPTH_BUFFER_BIT),ce.stencilBuffer&&ce.resolveStencilBuffer&&(at|=n.STENCIL_BUFFER_BIT)),At){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Ft.__webglColorRenderbuffer[Xt]);const yt=r.get(re[Xt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,yt,0)}n.blitFramebuffer(0,0,$e,Xe,0,0,$e,Xe,at,n.NEAREST),l===!0&&(Ue.length=0,Ze.length=0,Ue.push(n.COLOR_ATTACHMENT0+Xt),ce.depthBuffer&&ce.resolveDepthBuffer===!1&&(Ue.push(et),Ze.push(et),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,Ze)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Ue))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),At)for(let Xt=0;Xt<re.length;Xt++){t.bindFramebuffer(n.FRAMEBUFFER,Ft.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Xt,n.RENDERBUFFER,Ft.__webglColorRenderbuffer[Xt]);const yt=r.get(re[Xt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Ft.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Xt,n.TEXTURE_2D,yt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ft.__webglMultisampledFramebuffer)}else if(ce.depthBuffer&&ce.resolveDepthBuffer===!1&&l){const re=ce.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[re])}}}function lt(ce){return Math.min(i.maxSamples,ce.samples)}function st(ce){const re=r.get(ce);return ce.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&re.__useRenderToTexture!==!1}function ot(ce){const re=a.render.frame;u.get(ce)!==re&&(u.set(ce,re),ce.update())}function Ut(ce,re){const $e=ce.colorSpace,Xe=ce.format,at=ce.type;return ce.isCompressedTexture===!0||ce.isVideoTexture===!0||$e!==qu&&$e!==_p&&(Qr.getTransfer($e)===$i?(Xe!==la||at!==Pl)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",$e)),re}function mt(ce){return typeof HTMLImageElement<"u"&&ce instanceof HTMLImageElement?(c.width=ce.naturalWidth||ce.width,c.height=ce.naturalHeight||ce.height):typeof VideoFrame<"u"&&ce instanceof VideoFrame?(c.width=ce.displayWidth,c.height=ce.displayHeight):(c.width=ce.width,c.height=ce.height),c}this.allocateTextureUnit=G,this.resetTextureUnits=P,this.setTexture2D=X,this.setTexture2DArray=z,this.setTexture3D=J,this.setTextureCube=Q,this.rebindTextures=dt,this.setupRenderTarget=pe,this.updateRenderTargetMipmap=Le,this.updateMultisampleRenderTarget=je,this.setupDepthRenderbuffer=pt,this.setupFrameBufferTexture=Pe,this.useMultisampledRTT=st}function CK(n,e){function t(r,i=_p){let s;const a=Qr.getTransfer(i);if(r===Pl)return n.UNSIGNED_BYTE;if(r===WN)return n.UNSIGNED_SHORT_4_4_4_4;if(r===jN)return n.UNSIGNED_SHORT_5_5_5_1;if(r===eP)return n.UNSIGNED_INT_5_9_9_9_REV;if(r===VN)return n.BYTE;if(r===GN)return n.SHORT;if(r===Yx)return n.UNSIGNED_SHORT;if(r===g_)return n.INT;if(r===xh)return n.UNSIGNED_INT;if(r===ns)return n.FLOAT;if(r===Ws)return n.HALF_FLOAT;if(r===tP)return n.ALPHA;if(r===nP)return n.RGB;if(r===la)return n.RGBA;if(r===Zx)return n.DEPTH_COMPONENT;if(r===Qx)return n.DEPTH_STENCIL;if(r===y_)return n.RED;if(r===v_)return n.RED_INTEGER;if(r===rP)return n.RG;if(r===qN)return n.RG_INTEGER;if(r===XN)return n.RGBA_INTEGER;if(r===uC||r===dC||r===fC||r===hC)if(a===$i)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(r===uC)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===dC)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===fC)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===hC)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(r===uC)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===dC)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===fC)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===hC)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===YM||r===JM||r===ZM||r===QM)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(r===YM)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===JM)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===ZM)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===QM)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===eR||r===tR||r===nR)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(r===eR||r===tR)return a===$i?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(r===nR)return a===$i?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===rR||r===iR||r===sR||r===aR||r===oR||r===lR||r===cR||r===uR||r===dR||r===fR||r===hR||r===pR||r===mR||r===gR)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(r===rR)return a===$i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===iR)return a===$i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===sR)return a===$i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===aR)return a===$i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===oR)return a===$i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===lR)return a===$i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===cR)return a===$i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===uR)return a===$i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===dR)return a===$i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===fR)return a===$i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===hR)return a===$i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===pR)return a===$i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===mR)return a===$i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===gR)return a===$i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===pC||r===yR||r===vR)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(r===pC)return a===$i?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===yR)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===vR)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===iP||r===bR||r===xR||r===SR)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(r===pC)return s.COMPRESSED_RED_RGTC1_EXT;if(r===bR)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===xR)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===SR)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===Jx?n.UNSIGNED_INT_24_8:n[r]!==void 0?n[r]:null}return{convert:t}}class _K extends Ti{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}}const Tge=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Mge=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Rge{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){const r=new _K(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,r=new No({vertexShader:Tge,fragmentShader:Mge,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new rs(new Xp(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Nge extends Rh{constructor(e,t){super();const r=this;let i=null,s=1,a=null,o="local-floor",l=1,c=null,u=null,d=null,h=null,p=null,g=null;const v=new Rge,b={},x=t.getContextAttributes();let C=null,E=null;const _=[],M=[],R=new Lt;let L=null;const $=new Ba;$.viewport=new Hr;const N=new Ba;N.viewport=new Hr;const I=[$,N],k=new dK;let P=null,G=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ue){let ve=_[ue];return ve===void 0&&(ve=new fM,_[ue]=ve),ve.getTargetRaySpace()},this.getControllerGrip=function(ue){let ve=_[ue];return ve===void 0&&(ve=new fM,_[ue]=ve),ve.getGripSpace()},this.getHand=function(ue){let ve=_[ue];return ve===void 0&&(ve=new fM,_[ue]=ve),ve.getHandSpace()};function W(ue){const ve=M.indexOf(ue.inputSource);if(ve===-1)return;const xe=_[ve];xe!==void 0&&(xe.update(ue.inputSource,ue.frame,c||a),xe.dispatchEvent({type:ue.type,data:ue.inputSource}))}function X(){i.removeEventListener("select",W),i.removeEventListener("selectstart",W),i.removeEventListener("selectend",W),i.removeEventListener("squeeze",W),i.removeEventListener("squeezestart",W),i.removeEventListener("squeezeend",W),i.removeEventListener("end",X),i.removeEventListener("inputsourceschange",z);for(let ue=0;ue<_.length;ue++){const ve=M[ue];ve!==null&&(M[ue]=null,_[ue].disconnect(ve))}P=null,G=null,v.reset();for(const ue in b)delete b[ue];e.setRenderTarget(C),p=null,h=null,d=null,i=null,E=null,ye.stop(),r.isPresenting=!1,e.setPixelRatio(L),e.setSize(R.width,R.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ue){s=ue,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ue){o=ue,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||a},this.setReferenceSpace=function(ue){c=ue},this.getBaseLayer=function(){return h!==null?h:p},this.getBinding=function(){return d},this.getFrame=function(){return g},this.getSession=function(){return i},this.setSession=async function(ue){if(i=ue,i!==null){if(C=e.getRenderTarget(),i.addEventListener("select",W),i.addEventListener("selectstart",W),i.addEventListener("selectend",W),i.addEventListener("squeeze",W),i.addEventListener("squeezestart",W),i.addEventListener("squeezeend",W),i.addEventListener("end",X),i.addEventListener("inputsourceschange",z),x.xrCompatible!==!0&&await t.makeXRCompatible(),L=e.getPixelRatio(),e.getSize(R),typeof XRWebGLBinding<"u"&&(d=new XRWebGLBinding(i,t)),d!==null&&"createProjectionLayer"in XRWebGLBinding.prototype){let xe=null,Pe=null,ze=null;x.depth&&(ze=x.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,xe=x.stencil?Qx:Zx,Pe=x.stencil?Jx:xh);const Ke={colorFormat:t.RGBA8,depthFormat:ze,scaleFactor:s};h=d.createProjectionLayer(Ke),i.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),E=new wc(h.textureWidth,h.textureHeight,{format:la,type:Pl,depthTexture:new wP(h.textureWidth,h.textureHeight,Pe,void 0,void 0,void 0,void 0,void 0,void 0,xe),stencilBuffer:x.stencil,colorSpace:e.outputColorSpace,samples:x.antialias?4:0,resolveDepthBuffer:h.ignoreDepthValues===!1,resolveStencilBuffer:h.ignoreDepthValues===!1})}else{const xe={antialias:x.antialias,alpha:!0,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:s};p=new XRWebGLLayer(i,t,xe),i.updateRenderState({baseLayer:p}),e.setPixelRatio(1),e.setSize(p.framebufferWidth,p.framebufferHeight,!1),E=new wc(p.framebufferWidth,p.framebufferHeight,{format:la,type:Pl,colorSpace:e.outputColorSpace,stencilBuffer:x.stencil,resolveDepthBuffer:p.ignoreDepthValues===!1,resolveStencilBuffer:p.ignoreDepthValues===!1})}E.isXRRenderTarget=!0,this.setFoveation(l),c=null,a=await i.requestReferenceSpace(o),ye.setContext(i),ye.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return v.getDepthTexture()};function z(ue){for(let ve=0;ve<ue.removed.length;ve++){const xe=ue.removed[ve],Pe=M.indexOf(xe);Pe>=0&&(M[Pe]=null,_[Pe].disconnect(xe))}for(let ve=0;ve<ue.added.length;ve++){const xe=ue.added[ve];let Pe=M.indexOf(xe);if(Pe===-1){for(let Ke=0;Ke<_.length;Ke++)if(Ke>=M.length){M.push(xe),Pe=Ke;break}else if(M[Ke]===null){M[Ke]=xe,Pe=Ke;break}if(Pe===-1)break}const ze=_[Pe];ze&&ze.connect(xe)}}const J=new be,Q=new be;function Y(ue,ve,xe){J.setFromMatrixPosition(ve.matrixWorld),Q.setFromMatrixPosition(xe.matrixWorld);const Pe=J.distanceTo(Q),ze=ve.projectionMatrix.elements,Ke=xe.projectionMatrix.elements,pt=ze[14]/(ze[10]-1),dt=ze[14]/(ze[10]+1),pe=(ze[9]+1)/ze[5],Le=(ze[9]-1)/ze[5],Ue=(ze[8]-1)/ze[0],Ze=(Ke[8]+1)/Ke[0],je=pt*Ue,lt=pt*Ze,st=Pe/(-Ue+Ze),ot=st*-Ue;if(ve.matrixWorld.decompose(ue.position,ue.quaternion,ue.scale),ue.translateX(ot),ue.translateZ(st),ue.matrixWorld.compose(ue.position,ue.quaternion,ue.scale),ue.matrixWorldInverse.copy(ue.matrixWorld).invert(),ze[10]===-1)ue.projectionMatrix.copy(ve.projectionMatrix),ue.projectionMatrixInverse.copy(ve.projectionMatrixInverse);else{const Ut=pt+st,mt=dt+st,ce=je-ot,re=lt+(Pe-ot),$e=pe*dt/mt*Ut,Xe=Le*dt/mt*Ut;ue.projectionMatrix.makePerspective(ce,re,$e,Xe,Ut,mt),ue.projectionMatrixInverse.copy(ue.projectionMatrix).invert()}}function q(ue,ve){ve===null?ue.matrixWorld.copy(ue.matrix):ue.matrixWorld.multiplyMatrices(ve.matrixWorld,ue.matrix),ue.matrixWorldInverse.copy(ue.matrixWorld).invert()}this.updateCamera=function(ue){if(i===null)return;let ve=ue.near,xe=ue.far;v.texture!==null&&(v.depthNear>0&&(ve=v.depthNear),v.depthFar>0&&(xe=v.depthFar)),k.near=N.near=$.near=ve,k.far=N.far=$.far=xe,(P!==k.near||G!==k.far)&&(i.updateRenderState({depthNear:k.near,depthFar:k.far}),P=k.near,G=k.far),k.layers.mask=ue.layers.mask|6,$.layers.mask=k.layers.mask&3,N.layers.mask=k.layers.mask&5;const Pe=ue.parent,ze=k.cameras;q(k,Pe);for(let Ke=0;Ke<ze.length;Ke++)q(ze[Ke],Pe);ze.length===2?Y(k,$,N):k.projectionMatrix.copy($.projectionMatrix),te(ue,k,Pe)};function te(ue,ve,xe){xe===null?ue.matrix.copy(ve.matrixWorld):(ue.matrix.copy(xe.matrixWorld),ue.matrix.invert(),ue.matrix.multiply(ve.matrixWorld)),ue.matrix.decompose(ue.position,ue.quaternion,ue.scale),ue.updateMatrixWorld(!0),ue.projectionMatrix.copy(ve.projectionMatrix),ue.projectionMatrixInverse.copy(ve.projectionMatrixInverse),ue.isPerspectiveCamera&&(ue.fov=r1*2*Math.atan(1/ue.projectionMatrix.elements[5]),ue.zoom=1)}this.getCamera=function(){return k},this.getFoveation=function(){if(!(h===null&&p===null))return l},this.setFoveation=function(ue){l=ue,h!==null&&(h.fixedFoveation=ue),p!==null&&p.fixedFoveation!==void 0&&(p.fixedFoveation=ue)},this.hasDepthSensing=function(){return v.texture!==null},this.getDepthSensingMesh=function(){return v.getMesh(k)},this.getCameraTexture=function(ue){return b[ue]};let ne=null;function le(ue,ve){if(u=ve.getViewerPose(c||a),g=ve,u!==null){const xe=u.views;p!==null&&(e.setRenderTargetFramebuffer(E,p.framebuffer),e.setRenderTarget(E));let Pe=!1;xe.length!==k.cameras.length&&(k.cameras.length=0,Pe=!0);for(let dt=0;dt<xe.length;dt++){const pe=xe[dt];let Le=null;if(p!==null)Le=p.getViewport(pe);else{const Ze=d.getViewSubImage(h,pe);Le=Ze.viewport,dt===0&&(e.setRenderTargetTextures(E,Ze.colorTexture,Ze.depthStencilTexture),e.setRenderTarget(E))}let Ue=I[dt];Ue===void 0&&(Ue=new Ba,Ue.layers.enable(dt),Ue.viewport=new Hr,I[dt]=Ue),Ue.matrix.fromArray(pe.transform.matrix),Ue.matrix.decompose(Ue.position,Ue.quaternion,Ue.scale),Ue.projectionMatrix.fromArray(pe.projectionMatrix),Ue.projectionMatrixInverse.copy(Ue.projectionMatrix).invert(),Ue.viewport.set(Le.x,Le.y,Le.width,Le.height),dt===0&&(k.matrix.copy(Ue.matrix),k.matrix.decompose(k.position,k.quaternion,k.scale)),Pe===!0&&k.cameras.push(Ue)}const ze=i.enabledFeatures;if(ze&&ze.includes("depth-sensing")&&i.depthUsage=="gpu-optimized"&&d){const dt=d.getDepthInformation(xe[0]);dt&&dt.isValid&&dt.texture&&v.init(dt,i.renderState)}if(ze&&ze.includes("camera-access")&&(e.state.unbindTexture(),d))for(let dt=0;dt<xe.length;dt++){const pe=xe[dt].camera;if(pe){let Le=b[pe];Le||(Le=new _K,b[pe]=Le);const Ue=d.getCameraImage(pe);Le.sourceTexture=Ue}}}for(let xe=0;xe<_.length;xe++){const Pe=M[xe],ze=_[xe];Pe!==null&&ze!==void 0&&ze.update(Pe,ve,c||a)}ne&&ne(ue,ve),ve.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:ve}),g=null}const ye=new vK;ye.setAnimationLoop(le),this.setAnimationLoop=function(ue){ne=ue},this.dispose=function(){}}}const sy=new Cc,Ige=new zn;function Dge(n,e){function t(b,x){b.matrixAutoUpdate===!0&&b.updateMatrix(),x.value.copy(b.matrix)}function r(b,x){x.color.getRGB(b.fogColor.value,CX(n)),x.isFog?(b.fogNear.value=x.near,b.fogFar.value=x.far):x.isFogExp2&&(b.fogDensity.value=x.density)}function i(b,x,C,E,_){x.isMeshBasicMaterial||x.isMeshLambertMaterial?s(b,x):x.isMeshToonMaterial?(s(b,x),d(b,x)):x.isMeshPhongMaterial?(s(b,x),u(b,x)):x.isMeshStandardMaterial?(s(b,x),h(b,x),x.isMeshPhysicalMaterial&&p(b,x,_)):x.isMeshMatcapMaterial?(s(b,x),g(b,x)):x.isMeshDepthMaterial?s(b,x):x.isMeshDistanceMaterial?(s(b,x),v(b,x)):x.isMeshNormalMaterial?s(b,x):x.isLineBasicMaterial?(a(b,x),x.isLineDashedMaterial&&o(b,x)):x.isPointsMaterial?l(b,x,C,E):x.isSpriteMaterial?c(b,x):x.isShadowMaterial?(b.color.value.copy(x.color),b.opacity.value=x.opacity):x.isShaderMaterial&&(x.uniformsNeedUpdate=!1)}function s(b,x){b.opacity.value=x.opacity,x.color&&b.diffuse.value.copy(x.color),x.emissive&&b.emissive.value.copy(x.emissive).multiplyScalar(x.emissiveIntensity),x.map&&(b.map.value=x.map,t(x.map,b.mapTransform)),x.alphaMap&&(b.alphaMap.value=x.alphaMap,t(x.alphaMap,b.alphaMapTransform)),x.bumpMap&&(b.bumpMap.value=x.bumpMap,t(x.bumpMap,b.bumpMapTransform),b.bumpScale.value=x.bumpScale,x.side===Ao&&(b.bumpScale.value*=-1)),x.normalMap&&(b.normalMap.value=x.normalMap,t(x.normalMap,b.normalMapTransform),b.normalScale.value.copy(x.normalScale),x.side===Ao&&b.normalScale.value.negate()),x.displacementMap&&(b.displacementMap.value=x.displacementMap,t(x.displacementMap,b.displacementMapTransform),b.displacementScale.value=x.displacementScale,b.displacementBias.value=x.displacementBias),x.emissiveMap&&(b.emissiveMap.value=x.emissiveMap,t(x.emissiveMap,b.emissiveMapTransform)),x.specularMap&&(b.specularMap.value=x.specularMap,t(x.specularMap,b.specularMapTransform)),x.alphaTest>0&&(b.alphaTest.value=x.alphaTest);const C=e.get(x),E=C.envMap,_=C.envMapRotation;E&&(b.envMap.value=E,sy.copy(_),sy.x*=-1,sy.y*=-1,sy.z*=-1,E.isCubeTexture&&E.isRenderTargetTexture===!1&&(sy.y*=-1,sy.z*=-1),b.envMapRotation.value.setFromMatrix4(Ige.makeRotationFromEuler(sy)),b.flipEnvMap.value=E.isCubeTexture&&E.isRenderTargetTexture===!1?-1:1,b.reflectivity.value=x.reflectivity,b.ior.value=x.ior,b.refractionRatio.value=x.refractionRatio),x.lightMap&&(b.lightMap.value=x.lightMap,b.lightMapIntensity.value=x.lightMapIntensity,t(x.lightMap,b.lightMapTransform)),x.aoMap&&(b.aoMap.value=x.aoMap,b.aoMapIntensity.value=x.aoMapIntensity,t(x.aoMap,b.aoMapTransform))}function a(b,x){b.diffuse.value.copy(x.color),b.opacity.value=x.opacity,x.map&&(b.map.value=x.map,t(x.map,b.mapTransform))}function o(b,x){b.dashSize.value=x.dashSize,b.totalSize.value=x.dashSize+x.gapSize,b.scale.value=x.scale}function l(b,x,C,E){b.diffuse.value.copy(x.color),b.opacity.value=x.opacity,b.size.value=x.size*C,b.scale.value=E*.5,x.map&&(b.map.value=x.map,t(x.map,b.uvTransform)),x.alphaMap&&(b.alphaMap.value=x.alphaMap,t(x.alphaMap,b.alphaMapTransform)),x.alphaTest>0&&(b.alphaTest.value=x.alphaTest)}function c(b,x){b.diffuse.value.copy(x.color),b.opacity.value=x.opacity,b.rotation.value=x.rotation,x.map&&(b.map.value=x.map,t(x.map,b.mapTransform)),x.alphaMap&&(b.alphaMap.value=x.alphaMap,t(x.alphaMap,b.alphaMapTransform)),x.alphaTest>0&&(b.alphaTest.value=x.alphaTest)}function u(b,x){b.specular.value.copy(x.specular),b.shininess.value=Math.max(x.shininess,1e-4)}function d(b,x){x.gradientMap&&(b.gradientMap.value=x.gradientMap)}function h(b,x){b.metalness.value=x.metalness,x.metalnessMap&&(b.metalnessMap.value=x.metalnessMap,t(x.metalnessMap,b.metalnessMapTransform)),b.roughness.value=x.roughness,x.roughnessMap&&(b.roughnessMap.value=x.roughnessMap,t(x.roughnessMap,b.roughnessMapTransform)),x.envMap&&(b.envMapIntensity.value=x.envMapIntensity)}function p(b,x,C){b.ior.value=x.ior,x.sheen>0&&(b.sheenColor.value.copy(x.sheenColor).multiplyScalar(x.sheen),b.sheenRoughness.value=x.sheenRoughness,x.sheenColorMap&&(b.sheenColorMap.value=x.sheenColorMap,t(x.sheenColorMap,b.sheenColorMapTransform)),x.sheenRoughnessMap&&(b.sheenRoughnessMap.value=x.sheenRoughnessMap,t(x.sheenRoughnessMap,b.sheenRoughnessMapTransform))),x.clearcoat>0&&(b.clearcoat.value=x.clearcoat,b.clearcoatRoughness.value=x.clearcoatRoughness,x.clearcoatMap&&(b.clearcoatMap.value=x.clearcoatMap,t(x.clearcoatMap,b.clearcoatMapTransform)),x.clearcoatRoughnessMap&&(b.clearcoatRoughnessMap.value=x.clearcoatRoughnessMap,t(x.clearcoatRoughnessMap,b.clearcoatRoughnessMapTransform)),x.clearcoatNormalMap&&(b.clearcoatNormalMap.value=x.clearcoatNormalMap,t(x.clearcoatNormalMap,b.clearcoatNormalMapTransform),b.clearcoatNormalScale.value.copy(x.clearcoatNormalScale),x.side===Ao&&b.clearcoatNormalScale.value.negate())),x.dispersion>0&&(b.dispersion.value=x.dispersion),x.iridescence>0&&(b.iridescence.value=x.iridescence,b.iridescenceIOR.value=x.iridescenceIOR,b.iridescenceThicknessMinimum.value=x.iridescenceThicknessRange[0],b.iridescenceThicknessMaximum.value=x.iridescenceThicknessRange[1],x.iridescenceMap&&(b.iridescenceMap.value=x.iridescenceMap,t(x.iridescenceMap,b.iridescenceMapTransform)),x.iridescenceThicknessMap&&(b.iridescenceThicknessMap.value=x.iridescenceThicknessMap,t(x.iridescenceThicknessMap,b.iridescenceThicknessMapTransform))),x.transmission>0&&(b.transmission.value=x.transmission,b.transmissionSamplerMap.value=C.texture,b.transmissionSamplerSize.value.set(C.width,C.height),x.transmissionMap&&(b.transmissionMap.value=x.transmissionMap,t(x.transmissionMap,b.transmissionMapTransform)),b.thickness.value=x.thickness,x.thicknessMap&&(b.thicknessMap.value=x.thicknessMap,t(x.thicknessMap,b.thicknessMapTransform)),b.attenuationDistance.value=x.attenuationDistance,b.attenuationColor.value.copy(x.attenuationColor)),x.anisotropy>0&&(b.anisotropyVector.value.set(x.anisotropy*Math.cos(x.anisotropyRotation),x.anisotropy*Math.sin(x.anisotropyRotation)),x.anisotropyMap&&(b.anisotropyMap.value=x.anisotropyMap,t(x.anisotropyMap,b.anisotropyMapTransform))),b.specularIntensity.value=x.specularIntensity,b.specularColor.value.copy(x.specularColor),x.specularColorMap&&(b.specularColorMap.value=x.specularColorMap,t(x.specularColorMap,b.specularColorMapTransform)),x.specularIntensityMap&&(b.specularIntensityMap.value=x.specularIntensityMap,t(x.specularIntensityMap,b.specularIntensityMapTransform))}function g(b,x){x.matcap&&(b.matcap.value=x.matcap)}function v(b,x){const C=e.get(x).light;b.referencePosition.value.setFromMatrixPosition(C.matrixWorld),b.nearDistance.value=C.shadow.camera.near,b.farDistance.value=C.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function kge(n,e,t,r){let i={},s={},a=[];const o=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(C,E){const _=E.program;r.uniformBlockBinding(C,_)}function c(C,E){let _=i[C.id];_===void 0&&(g(C),_=u(C),i[C.id]=_,C.addEventListener("dispose",b));const M=E.program;r.updateUBOMapping(C,M);const R=e.render.frame;s[C.id]!==R&&(h(C),s[C.id]=R)}function u(C){const E=d();C.__bindingPointIndex=E;const _=n.createBuffer(),M=C.__size,R=C.usage;return n.bindBuffer(n.UNIFORM_BUFFER,_),n.bufferData(n.UNIFORM_BUFFER,M,R),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,E,_),_}function d(){for(let C=0;C<o;C++)if(a.indexOf(C)===-1)return a.push(C),C;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(C){const E=i[C.id],_=C.uniforms,M=C.__cache;n.bindBuffer(n.UNIFORM_BUFFER,E);for(let R=0,L=_.length;R<L;R++){const $=Array.isArray(_[R])?_[R]:[_[R]];for(let N=0,I=$.length;N<I;N++){const k=$[N];if(p(k,R,N,M)===!0){const P=k.__offset,G=Array.isArray(k.value)?k.value:[k.value];let W=0;for(let X=0;X<G.length;X++){const z=G[X],J=v(z);typeof z=="number"||typeof z=="boolean"?(k.__data[0]=z,n.bufferSubData(n.UNIFORM_BUFFER,P+W,k.__data)):z.isMatrix3?(k.__data[0]=z.elements[0],k.__data[1]=z.elements[1],k.__data[2]=z.elements[2],k.__data[3]=0,k.__data[4]=z.elements[3],k.__data[5]=z.elements[4],k.__data[6]=z.elements[5],k.__data[7]=0,k.__data[8]=z.elements[6],k.__data[9]=z.elements[7],k.__data[10]=z.elements[8],k.__data[11]=0):(z.toArray(k.__data,W),W+=J.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,P,k.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function p(C,E,_,M){const R=C.value,L=E+"_"+_;if(M[L]===void 0)return typeof R=="number"||typeof R=="boolean"?M[L]=R:M[L]=R.clone(),!0;{const $=M[L];if(typeof R=="number"||typeof R=="boolean"){if($!==R)return M[L]=R,!0}else if($.equals(R)===!1)return $.copy(R),!0}return!1}function g(C){const E=C.uniforms;let _=0;const M=16;for(let L=0,$=E.length;L<$;L++){const N=Array.isArray(E[L])?E[L]:[E[L]];for(let I=0,k=N.length;I<k;I++){const P=N[I],G=Array.isArray(P.value)?P.value:[P.value];for(let W=0,X=G.length;W<X;W++){const z=G[W],J=v(z),Q=_%M,Y=Q%J.boundary,q=Q+Y;_+=Y,q!==0&&M-q<J.storage&&(_+=M-q),P.__data=new Float32Array(J.storage/Float32Array.BYTES_PER_ELEMENT),P.__offset=_,_+=J.storage}}}const R=_%M;return R>0&&(_+=M-R),C.__size=_,C.__cache={},this}function v(C){const E={boundary:0,storage:0};return typeof C=="number"||typeof C=="boolean"?(E.boundary=4,E.storage=4):C.isVector2?(E.boundary=8,E.storage=8):C.isVector3||C.isColor?(E.boundary=16,E.storage=12):C.isVector4?(E.boundary=16,E.storage=16):C.isMatrix3?(E.boundary=48,E.storage=48):C.isMatrix4?(E.boundary=64,E.storage=64):C.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",C),E}function b(C){const E=C.target;E.removeEventListener("dispose",b);const _=a.indexOf(E.__bindingPointIndex);a.splice(_,1),n.deleteBuffer(i[E.id]),delete i[E.id],delete s[E.id]}function x(){for(const C in i)n.deleteBuffer(i[C]);a=[],i={},s={}}return{bind:l,update:c,dispose:x}}class WP{constructor(e={}){const{canvas:t=xX(),context:r=null,depth:i=!0,stencil:s=!1,alpha:a=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1,reversedDepthBuffer:h=!1}=e;this.isWebGLRenderer=!0;let p;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=r.getContextAttributes().alpha}else p=a;const g=new Uint32Array(4),v=new Int32Array(4);let b=null,x=null;const C=[],E=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=dh,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const _=this;let M=!1;this._outputColorSpace=_o;let R=0,L=0,$=null,N=-1,I=null;const k=new Hr,P=new Hr;let G=null;const W=new sn(0);let X=0,z=t.width,J=t.height,Q=1,Y=null,q=null;const te=new Hr(0,0,z,J),ne=new Hr(0,0,z,J);let le=!1;const ye=new M1;let ue=!1,ve=!1;const xe=new zn,Pe=new be,ze=new Hr,Ke={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let pt=!1;function dt(){return $===null?Q:1}let pe=r;function Le(se,Se){return t.getContext(se,Se)}try{const se={alpha:!0,depth:i,stencil:s,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${p_}`),t.addEventListener("webglcontextlost",$t,!1),t.addEventListener("webglcontextrestored",en,!1),t.addEventListener("webglcontextcreationerror",Vt,!1),pe===null){const Se="webgl2";if(pe=Le(Se,se),pe===null)throw Le(Se)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(se){throw console.error("THREE.WebGLRenderer: "+se.message),se}let Ue,Ze,je,lt,st,ot,Ut,mt,ce,re,$e,Xe,at,et,Ft,At,_t,Xt,yt,Mt,an,tn,zt,hn;function Te(){Ue=new Wpe(pe),Ue.init(),tn=new CK(pe,Ue),Ze=new Fpe(pe,Ue,e,tn),je=new Ege(pe,Ue),Ze.reversedDepthBuffer&&h&&je.buffers.depth.setReversed(!0),lt=new Xpe(pe),st=new fge,ot=new Age(pe,Ue,je,st,Ze,tn,lt),Ut=new Upe(_),mt=new Gpe(_),ce=new efe(pe),zt=new $pe(pe,ce),re=new jpe(pe,ce,lt,zt),$e=new Ype(pe,re,ce,lt),yt=new Kpe(pe,Ze,ot),At=new Ppe(st),Xe=new dge(_,Ut,mt,Ue,Ze,zt,At),at=new Dge(_,st),et=new pge,Ft=new xge(Ue),Xt=new Bpe(_,Ut,mt,je,$e,p,l),_t=new Cge(_,$e,Ze),hn=new kge(pe,lt,Ze,je),Mt=new Lpe(pe,Ue,lt),an=new qpe(pe,Ue,lt),lt.programs=Xe.programs,_.capabilities=Ze,_.extensions=Ue,_.properties=st,_.renderLists=et,_.shadowMap=_t,_.state=je,_.info=lt}Te();const qe=new Nge(_,pe);this.xr=qe,this.getContext=function(){return pe},this.getContextAttributes=function(){return pe.getContextAttributes()},this.forceContextLoss=function(){const se=Ue.get("WEBGL_lose_context");se&&se.loseContext()},this.forceContextRestore=function(){const se=Ue.get("WEBGL_lose_context");se&&se.restoreContext()},this.getPixelRatio=function(){return Q},this.setPixelRatio=function(se){se!==void 0&&(Q=se,this.setSize(z,J,!1))},this.getSize=function(se){return se.set(z,J)},this.setSize=function(se,Se,Ae=!0){if(qe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}z=se,J=Se,t.width=Math.floor(se*Q),t.height=Math.floor(Se*Q),Ae===!0&&(t.style.width=se+"px",t.style.height=Se+"px"),this.setViewport(0,0,se,Se)},this.getDrawingBufferSize=function(se){return se.set(z*Q,J*Q).floor()},this.setDrawingBufferSize=function(se,Se,Ae){z=se,J=Se,Q=Ae,t.width=Math.floor(se*Ae),t.height=Math.floor(Se*Ae),this.setViewport(0,0,se,Se)},this.getCurrentViewport=function(se){return se.copy(k)},this.getViewport=function(se){return se.copy(te)},this.setViewport=function(se,Se,Ae,Me){se.isVector4?te.set(se.x,se.y,se.z,se.w):te.set(se,Se,Ae,Me),je.viewport(k.copy(te).multiplyScalar(Q).round())},this.getScissor=function(se){return se.copy(ne)},this.setScissor=function(se,Se,Ae,Me){se.isVector4?ne.set(se.x,se.y,se.z,se.w):ne.set(se,Se,Ae,Me),je.scissor(P.copy(ne).multiplyScalar(Q).round())},this.getScissorTest=function(){return le},this.setScissorTest=function(se){je.setScissorTest(le=se)},this.setOpaqueSort=function(se){Y=se},this.setTransparentSort=function(se){q=se},this.getClearColor=function(se){return se.copy(Xt.getClearColor())},this.setClearColor=function(){Xt.setClearColor(...arguments)},this.getClearAlpha=function(){return Xt.getClearAlpha()},this.setClearAlpha=function(){Xt.setClearAlpha(...arguments)},this.clear=function(se=!0,Se=!0,Ae=!0){let Me=0;if(se){let _e=!1;if($!==null){const Nt=$.texture.format;_e=Nt===XN||Nt===qN||Nt===v_}if(_e){const Nt=$.texture.type,vt=Nt===Pl||Nt===xh||Nt===Yx||Nt===Jx||Nt===WN||Nt===jN,Tt=Xt.getClearColor(),Et=Xt.getClearAlpha(),qt=Tt.r,Qt=Tt.g,Wt=Tt.b;vt?(g[0]=qt,g[1]=Qt,g[2]=Wt,g[3]=Et,pe.clearBufferuiv(pe.COLOR,0,g)):(v[0]=qt,v[1]=Qt,v[2]=Wt,v[3]=Et,pe.clearBufferiv(pe.COLOR,0,v))}else Me|=pe.COLOR_BUFFER_BIT}Se&&(Me|=pe.DEPTH_BUFFER_BIT),Ae&&(Me|=pe.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),pe.clear(Me)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",$t,!1),t.removeEventListener("webglcontextrestored",en,!1),t.removeEventListener("webglcontextcreationerror",Vt,!1),Xt.dispose(),et.dispose(),Ft.dispose(),st.dispose(),Ut.dispose(),mt.dispose(),$e.dispose(),zt.dispose(),hn.dispose(),Xe.dispose(),qe.dispose(),qe.removeEventListener("sessionstart",es),qe.removeEventListener("sessionend",pi),Si.stop()};function $t(se){se.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),M=!0}function en(){console.log("THREE.WebGLRenderer: Context Restored."),M=!1;const se=lt.autoReset,Se=_t.enabled,Ae=_t.autoUpdate,Me=_t.needsUpdate,_e=_t.type;Te(),lt.autoReset=se,_t.enabled=Se,_t.autoUpdate=Ae,_t.needsUpdate=Me,_t.type=_e}function Vt(se){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",se.statusMessage)}function kt(se){const Se=se.target;Se.removeEventListener("dispose",kt),un(Se)}function un(se){In(se),st.remove(se)}function In(se){const Se=st.get(se).programs;Se!==void 0&&(Se.forEach(function(Ae){Xe.releaseProgram(Ae)}),se.isShaderMaterial&&Xe.releaseShaderCache(se))}this.renderBufferDirect=function(se,Se,Ae,Me,_e,Nt){Se===null&&(Se=Ke);const vt=_e.isMesh&&_e.matrixWorld.determinant()<0,Tt=me(se,Se,Ae,Me,_e);je.setMaterial(Me,vt);let Et=Ae.index,qt=1;if(Me.wireframe===!0){if(Et=re.getWireframeAttribute(Ae),Et===void 0)return;qt=2}const Qt=Ae.drawRange,Wt=Ae.attributes.position;let bn=Qt.start*qt,Hn=(Qt.start+Qt.count)*qt;Nt!==null&&(bn=Math.max(bn,Nt.start*qt),Hn=Math.min(Hn,(Nt.start+Nt.count)*qt)),Et!==null?(bn=Math.max(bn,0),Hn=Math.min(Hn,Et.count)):Wt!=null&&(bn=Math.max(bn,0),Hn=Math.min(Hn,Wt.count));const On=Hn-bn;if(On<0||On===1/0)return;zt.setup(_e,Me,Tt,Ae,Et);let or,yn=Mt;if(Et!==null&&(or=ce.get(Et),yn=an,yn.setIndex(or)),_e.isMesh)Me.wireframe===!0?(je.setLineWidth(Me.wireframeLinewidth*dt()),yn.setMode(pe.LINES)):yn.setMode(pe.TRIANGLES);else if(_e.isLine){let ln=Me.linewidth;ln===void 0&&(ln=1),je.setLineWidth(ln*dt()),_e.isLineSegments?yn.setMode(pe.LINES):_e.isLineLoop?yn.setMode(pe.LINE_LOOP):yn.setMode(pe.LINE_STRIP)}else _e.isPoints?yn.setMode(pe.POINTS):_e.isSprite&&yn.setMode(pe.TRIANGLES);if(_e.isBatchedMesh)if(_e._multiDrawInstances!==null)Nx("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),yn.renderMultiDrawInstances(_e._multiDrawStarts,_e._multiDrawCounts,_e._multiDrawCount,_e._multiDrawInstances);else if(Ue.get("WEBGL_multi_draw"))yn.renderMultiDraw(_e._multiDrawStarts,_e._multiDrawCounts,_e._multiDrawCount);else{const ln=_e._multiDrawStarts,Rr=_e._multiDrawCounts,Jn=_e._multiDrawCount,Kr=Et?ce.get(Et).bytesPerElement:1,cr=st.get(Me).currentProgram.getUniforms();for(let jn=0;jn<Jn;jn++)cr.setValue(pe,"_gl_DrawID",jn),yn.render(ln[jn]/Kr,Rr[jn])}else if(_e.isInstancedMesh)yn.renderInstances(bn,On,_e.count);else if(Ae.isInstancedBufferGeometry){const ln=Ae._maxInstanceCount!==void 0?Ae._maxInstanceCount:1/0,Rr=Math.min(Ae.instanceCount,ln);yn.renderInstances(bn,On,Rr)}else yn.render(bn,On)};function Tr(se,Se,Ae){se.transparent===!0&&se.side===$u&&se.forceSinglePass===!1?(se.side=Ao,se.needsUpdate=!0,$s(se,Se,Ae),se.side=vh,se.needsUpdate=!0,$s(se,Se,Ae),se.side=$u):$s(se,Se,Ae)}this.compile=function(se,Se,Ae=null){Ae===null&&(Ae=se),x=Ft.get(Ae),x.init(Se),E.push(x),Ae.traverseVisible(function(_e){_e.isLight&&_e.layers.test(Se.layers)&&(x.pushLight(_e),_e.castShadow&&x.pushShadow(_e))}),se!==Ae&&se.traverseVisible(function(_e){_e.isLight&&_e.layers.test(Se.layers)&&(x.pushLight(_e),_e.castShadow&&x.pushShadow(_e))}),x.setupLights();const Me=new Set;return se.traverse(function(_e){if(!(_e.isMesh||_e.isPoints||_e.isLine||_e.isSprite))return;const Nt=_e.material;if(Nt)if(Array.isArray(Nt))for(let vt=0;vt<Nt.length;vt++){const Tt=Nt[vt];Tr(Tt,Ae,_e),Me.add(Tt)}else Tr(Nt,Ae,_e),Me.add(Nt)}),x=E.pop(),Me},this.compileAsync=function(se,Se,Ae=null){const Me=this.compile(se,Se,Ae);return new Promise(_e=>{function Nt(){if(Me.forEach(function(vt){st.get(vt).currentProgram.isReady()&&Me.delete(vt)}),Me.size===0){_e(se);return}setTimeout(Nt,10)}Ue.get("KHR_parallel_shader_compile")!==null?Nt():setTimeout(Nt,10)})};let lr=null;function Qs(se){lr&&lr(se)}function es(){Si.stop()}function pi(){Si.start()}const Si=new vK;Si.setAnimationLoop(Qs),typeof self<"u"&&Si.setContext(self),this.setAnimationLoop=function(se){lr=se,qe.setAnimationLoop(se),se===null?Si.stop():Si.start()},qe.addEventListener("sessionstart",es),qe.addEventListener("sessionend",pi),this.render=function(se,Se){if(Se!==void 0&&Se.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(M===!0)return;if(se.matrixWorldAutoUpdate===!0&&se.updateMatrixWorld(),Se.parent===null&&Se.matrixWorldAutoUpdate===!0&&Se.updateMatrixWorld(),qe.enabled===!0&&qe.isPresenting===!0&&(qe.cameraAutoUpdate===!0&&qe.updateCamera(Se),Se=qe.getCamera()),se.isScene===!0&&se.onBeforeRender(_,se,Se,$),x=Ft.get(se,E.length),x.init(Se),E.push(x),xe.multiplyMatrices(Se.projectionMatrix,Se.matrixWorldInverse),ye.setFromProjectionMatrix(xe,Jc,Se.reversedDepth),ve=this.localClippingEnabled,ue=At.init(this.clippingPlanes,ve),b=et.get(se,C.length),b.init(),C.push(b),qe.enabled===!0&&qe.isPresenting===!0){const Nt=_.xr.getDepthSensingMesh();Nt!==null&&Ri(Nt,Se,-1/0,_.sortObjects)}Ri(se,Se,0,_.sortObjects),b.finish(),_.sortObjects===!0&&b.sort(Y,q),pt=qe.enabled===!1||qe.isPresenting===!1||qe.hasDepthSensing()===!1,pt&&Xt.addToRenderList(b,se),this.info.render.frame++,ue===!0&&At.beginShadows();const Ae=x.state.shadowsArray;_t.render(Ae,se,Se),ue===!0&&At.endShadows(),this.info.autoReset===!0&&this.info.reset();const Me=b.opaque,_e=b.transmissive;if(x.setupLights(),Se.isArrayCamera){const Nt=Se.cameras;if(_e.length>0)for(let vt=0,Tt=Nt.length;vt<Tt;vt++){const Et=Nt[vt];$o(Me,_e,se,Et)}pt&&Xt.render(se);for(let vt=0,Tt=Nt.length;vt<Tt;vt++){const Et=Nt[vt];as(b,se,Et,Et.viewport)}}else _e.length>0&&$o(Me,_e,se,Se),pt&&Xt.render(se),as(b,se,Se);$!==null&&L===0&&(ot.updateMultisampleRenderTarget($),ot.updateRenderTargetMipmap($)),se.isScene===!0&&se.onAfterRender(_,se,Se),zt.resetDefaultState(),N=-1,I=null,E.pop(),E.length>0?(x=E[E.length-1],ue===!0&&At.setGlobalState(_.clippingPlanes,x.state.camera)):x=null,C.pop(),C.length>0?b=C[C.length-1]:b=null};function Ri(se,Se,Ae,Me){if(se.visible===!1)return;if(se.layers.test(Se.layers)){if(se.isGroup)Ae=se.renderOrder;else if(se.isLOD)se.autoUpdate===!0&&se.update(Se);else if(se.isLight)x.pushLight(se),se.castShadow&&x.pushShadow(se);else if(se.isSprite){if(!se.frustumCulled||ye.intersectsSprite(se)){Me&&ze.setFromMatrixPosition(se.matrixWorld).applyMatrix4(xe);const vt=$e.update(se),Tt=se.material;Tt.visible&&b.push(se,vt,Tt,Ae,ze.z,null)}}else if((se.isMesh||se.isLine||se.isPoints)&&(!se.frustumCulled||ye.intersectsObject(se))){const vt=$e.update(se),Tt=se.material;if(Me&&(se.boundingSphere!==void 0?(se.boundingSphere===null&&se.computeBoundingSphere(),ze.copy(se.boundingSphere.center)):(vt.boundingSphere===null&&vt.computeBoundingSphere(),ze.copy(vt.boundingSphere.center)),ze.applyMatrix4(se.matrixWorld).applyMatrix4(xe)),Array.isArray(Tt)){const Et=vt.groups;for(let qt=0,Qt=Et.length;qt<Qt;qt++){const Wt=Et[qt],bn=Tt[Wt.materialIndex];bn&&bn.visible&&b.push(se,vt,bn,Ae,ze.z,Wt)}}else Tt.visible&&b.push(se,vt,Tt,Ae,ze.z,null)}}const Nt=se.children;for(let vt=0,Tt=Nt.length;vt<Tt;vt++)Ri(Nt[vt],Se,Ae,Me)}function as(se,Se,Ae,Me){const _e=se.opaque,Nt=se.transmissive,vt=se.transparent;x.setupLightsView(Ae),ue===!0&&At.setGlobalState(_.clippingPlanes,Ae),Me&&je.viewport(k.copy(Me)),_e.length>0&&vr(_e,Se,Ae),Nt.length>0&&vr(Nt,Se,Ae),vt.length>0&&vr(vt,Se,Ae),je.buffers.depth.setTest(!0),je.buffers.depth.setMask(!0),je.buffers.color.setMask(!0),je.setPolygonOffset(!1)}function $o(se,Se,Ae,Me){if((Ae.isScene===!0?Ae.overrideMaterial:null)!==null)return;x.state.transmissionRenderTarget[Me.id]===void 0&&(x.state.transmissionRenderTarget[Me.id]=new wc(1,1,{generateMipmaps:!0,type:Ue.has("EXT_color_buffer_half_float")||Ue.has("EXT_color_buffer_float")?Ws:Pl,minFilter:Pu,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Qr.workingColorSpace}));const Nt=x.state.transmissionRenderTarget[Me.id],vt=Me.viewport||k;Nt.setSize(vt.z*_.transmissionResolutionScale,vt.w*_.transmissionResolutionScale);const Tt=_.getRenderTarget(),Et=_.getActiveCubeFace(),qt=_.getActiveMipmapLevel();_.setRenderTarget(Nt),_.getClearColor(W),X=_.getClearAlpha(),X<1&&_.setClearColor(16777215,.5),_.clear(),pt&&Xt.render(Ae);const Qt=_.toneMapping;_.toneMapping=dh;const Wt=Me.viewport;if(Me.viewport!==void 0&&(Me.viewport=void 0),x.setupLightsView(Me),ue===!0&&At.setGlobalState(_.clippingPlanes,Me),vr(se,Ae,Me),ot.updateMultisampleRenderTarget(Nt),ot.updateRenderTargetMipmap(Nt),Ue.has("WEBGL_multisampled_render_to_texture")===!1){let bn=!1;for(let Hn=0,On=Se.length;Hn<On;Hn++){const or=Se[Hn],yn=or.object,ln=or.geometry,Rr=or.material,Jn=or.group;if(Rr.side===$u&&yn.layers.test(Me.layers)){const Kr=Rr.side;Rr.side=Ao,Rr.needsUpdate=!0,Nn(yn,Ae,Me,ln,Rr,Jn),Rr.side=Kr,Rr.needsUpdate=!0,bn=!0}}bn===!0&&(ot.updateMultisampleRenderTarget(Nt),ot.updateRenderTargetMipmap(Nt))}_.setRenderTarget(Tt,Et,qt),_.setClearColor(W,X),Wt!==void 0&&(Me.viewport=Wt),_.toneMapping=Qt}function vr(se,Se,Ae){const Me=Se.isScene===!0?Se.overrideMaterial:null;for(let _e=0,Nt=se.length;_e<Nt;_e++){const vt=se[_e],Tt=vt.object,Et=vt.geometry,qt=vt.group;let Qt=vt.material;Qt.allowOverride===!0&&Me!==null&&(Qt=Me),Tt.layers.test(Ae.layers)&&Nn(Tt,Se,Ae,Et,Qt,qt)}}function Nn(se,Se,Ae,Me,_e,Nt){se.onBeforeRender(_,Se,Ae,Me,_e,Nt),se.modelViewMatrix.multiplyMatrices(Ae.matrixWorldInverse,se.matrixWorld),se.normalMatrix.getNormalMatrix(se.modelViewMatrix),_e.onBeforeRender(_,Se,Ae,Me,se,Nt),_e.transparent===!0&&_e.side===$u&&_e.forceSinglePass===!1?(_e.side=Ao,_e.needsUpdate=!0,_.renderBufferDirect(Ae,Se,Me,_e,se,Nt),_e.side=vh,_e.needsUpdate=!0,_.renderBufferDirect(Ae,Se,Me,_e,se,Nt),_e.side=$u):_.renderBufferDirect(Ae,Se,Me,_e,se,Nt),se.onAfterRender(_,Se,Ae,Me,_e,Nt)}function $s(se,Se,Ae){Se.isScene!==!0&&(Se=Ke);const Me=st.get(se),_e=x.state.lights,Nt=x.state.shadowsArray,vt=_e.state.version,Tt=Xe.getParameters(se,_e.state,Nt,Se,Ae),Et=Xe.getProgramCacheKey(Tt);let qt=Me.programs;Me.environment=se.isMeshStandardMaterial?Se.environment:null,Me.fog=Se.fog,Me.envMap=(se.isMeshStandardMaterial?mt:Ut).get(se.envMap||Me.environment),Me.envMapRotation=Me.environment!==null&&se.envMap===null?Se.environmentRotation:se.envMapRotation,qt===void 0&&(se.addEventListener("dispose",kt),qt=new Map,Me.programs=qt);let Qt=qt.get(Et);if(Qt!==void 0){if(Me.currentProgram===Qt&&Me.lightsStateVersion===vt)return ae(se,Tt),Qt}else Tt.uniforms=Xe.getUniforms(se),se.onBeforeCompile(Tt,_),Qt=Xe.acquireProgram(Tt,Et),qt.set(Et,Qt),Me.uniforms=Tt.uniforms;const Wt=Me.uniforms;return(!se.isShaderMaterial&&!se.isRawShaderMaterial||se.clipping===!0)&&(Wt.clippingPlanes=At.uniform),ae(se,Tt),Me.needsLights=nt(se),Me.lightsStateVersion=vt,Me.needsLights&&(Wt.ambientLightColor.value=_e.state.ambient,Wt.lightProbe.value=_e.state.probe,Wt.directionalLights.value=_e.state.directional,Wt.directionalLightShadows.value=_e.state.directionalShadow,Wt.spotLights.value=_e.state.spot,Wt.spotLightShadows.value=_e.state.spotShadow,Wt.rectAreaLights.value=_e.state.rectArea,Wt.ltc_1.value=_e.state.rectAreaLTC1,Wt.ltc_2.value=_e.state.rectAreaLTC2,Wt.pointLights.value=_e.state.point,Wt.pointLightShadows.value=_e.state.pointShadow,Wt.hemisphereLights.value=_e.state.hemi,Wt.directionalShadowMap.value=_e.state.directionalShadowMap,Wt.directionalShadowMatrix.value=_e.state.directionalShadowMatrix,Wt.spotShadowMap.value=_e.state.spotShadowMap,Wt.spotLightMatrix.value=_e.state.spotLightMatrix,Wt.spotLightMap.value=_e.state.spotLightMap,Wt.pointShadowMap.value=_e.state.pointShadowMap,Wt.pointShadowMatrix.value=_e.state.pointShadowMatrix),Me.currentProgram=Qt,Me.uniformsList=null,Qt}function ci(se){if(se.uniformsList===null){const Se=se.currentProgram.getUniforms();se.uniformsList=hM.seqWithValue(Se.seq,se.uniforms)}return se.uniformsList}function ae(se,Se){const Ae=st.get(se);Ae.outputColorSpace=Se.outputColorSpace,Ae.batching=Se.batching,Ae.batchingColor=Se.batchingColor,Ae.instancing=Se.instancing,Ae.instancingColor=Se.instancingColor,Ae.instancingMorph=Se.instancingMorph,Ae.skinning=Se.skinning,Ae.morphTargets=Se.morphTargets,Ae.morphNormals=Se.morphNormals,Ae.morphColors=Se.morphColors,Ae.morphTargetsCount=Se.morphTargetsCount,Ae.numClippingPlanes=Se.numClippingPlanes,Ae.numIntersection=Se.numClipIntersection,Ae.vertexAlphas=Se.vertexAlphas,Ae.vertexTangents=Se.vertexTangents,Ae.toneMapping=Se.toneMapping}function me(se,Se,Ae,Me,_e){Se.isScene!==!0&&(Se=Ke),ot.resetTextureUnits();const Nt=Se.fog,vt=Me.isMeshStandardMaterial?Se.environment:null,Tt=$===null?_.outputColorSpace:$.isXRRenderTarget===!0?$.texture.colorSpace:qu,Et=(Me.isMeshStandardMaterial?mt:Ut).get(Me.envMap||vt),qt=Me.vertexColors===!0&&!!Ae.attributes.color&&Ae.attributes.color.itemSize===4,Qt=!!Ae.attributes.tangent&&(!!Me.normalMap||Me.anisotropy>0),Wt=!!Ae.morphAttributes.position,bn=!!Ae.morphAttributes.normal,Hn=!!Ae.morphAttributes.color;let On=dh;Me.toneMapped&&($===null||$.isXRRenderTarget===!0)&&(On=_.toneMapping);const or=Ae.morphAttributes.position||Ae.morphAttributes.normal||Ae.morphAttributes.color,yn=or!==void 0?or.length:0,ln=st.get(Me),Rr=x.state.lights;if(ue===!0&&(ve===!0||se!==I)){const Sr=se===I&&Me.id===N;At.setState(Me,se,Sr)}let Jn=!1;Me.version===ln.__version?(ln.needsLights&&ln.lightsStateVersion!==Rr.state.version||ln.outputColorSpace!==Tt||_e.isBatchedMesh&&ln.batching===!1||!_e.isBatchedMesh&&ln.batching===!0||_e.isBatchedMesh&&ln.batchingColor===!0&&_e.colorTexture===null||_e.isBatchedMesh&&ln.batchingColor===!1&&_e.colorTexture!==null||_e.isInstancedMesh&&ln.instancing===!1||!_e.isInstancedMesh&&ln.instancing===!0||_e.isSkinnedMesh&&ln.skinning===!1||!_e.isSkinnedMesh&&ln.skinning===!0||_e.isInstancedMesh&&ln.instancingColor===!0&&_e.instanceColor===null||_e.isInstancedMesh&&ln.instancingColor===!1&&_e.instanceColor!==null||_e.isInstancedMesh&&ln.instancingMorph===!0&&_e.morphTexture===null||_e.isInstancedMesh&&ln.instancingMorph===!1&&_e.morphTexture!==null||ln.envMap!==Et||Me.fog===!0&&ln.fog!==Nt||ln.numClippingPlanes!==void 0&&(ln.numClippingPlanes!==At.numPlanes||ln.numIntersection!==At.numIntersection)||ln.vertexAlphas!==qt||ln.vertexTangents!==Qt||ln.morphTargets!==Wt||ln.morphNormals!==bn||ln.morphColors!==Hn||ln.toneMapping!==On||ln.morphTargetsCount!==yn)&&(Jn=!0):(Jn=!0,ln.__version=Me.version);let Kr=ln.currentProgram;Jn===!0&&(Kr=$s(Me,Se,_e));let cr=!1,jn=!1,Zn=!1;const Mn=Kr.getUniforms(),Wr=ln.uniforms;if(je.useProgram(Kr.program)&&(cr=!0,jn=!0,Zn=!0),Me.id!==N&&(N=Me.id,jn=!0),cr||I!==se){je.buffers.depth.getReversed()&&se.reversedDepth!==!0&&(se._reversedDepth=!0,se.updateProjectionMatrix()),Mn.setValue(pe,"projectionMatrix",se.projectionMatrix),Mn.setValue(pe,"viewMatrix",se.matrixWorldInverse);const Ci=Mn.map.cameraPosition;Ci!==void 0&&Ci.setValue(pe,Pe.setFromMatrixPosition(se.matrixWorld)),Ze.logarithmicDepthBuffer&&Mn.setValue(pe,"logDepthBufFC",2/(Math.log(se.far+1)/Math.LN2)),(Me.isMeshPhongMaterial||Me.isMeshToonMaterial||Me.isMeshLambertMaterial||Me.isMeshBasicMaterial||Me.isMeshStandardMaterial||Me.isShaderMaterial)&&Mn.setValue(pe,"isOrthographic",se.isOrthographicCamera===!0),I!==se&&(I=se,jn=!0,Zn=!0)}if(_e.isSkinnedMesh){Mn.setOptional(pe,_e,"bindMatrix"),Mn.setOptional(pe,_e,"bindMatrixInverse");const Sr=_e.skeleton;Sr&&(Sr.boneTexture===null&&Sr.computeBoneTexture(),Mn.setValue(pe,"boneTexture",Sr.boneTexture,ot))}_e.isBatchedMesh&&(Mn.setOptional(pe,_e,"batchingTexture"),Mn.setValue(pe,"batchingTexture",_e._matricesTexture,ot),Mn.setOptional(pe,_e,"batchingIdTexture"),Mn.setValue(pe,"batchingIdTexture",_e._indirectTexture,ot),Mn.setOptional(pe,_e,"batchingColorTexture"),_e._colorsTexture!==null&&Mn.setValue(pe,"batchingColorTexture",_e._colorsTexture,ot));const wi=Ae.morphAttributes;if((wi.position!==void 0||wi.normal!==void 0||wi.color!==void 0)&&yt.update(_e,Ae,Kr),(jn||ln.receiveShadow!==_e.receiveShadow)&&(ln.receiveShadow=_e.receiveShadow,Mn.setValue(pe,"receiveShadow",_e.receiveShadow)),Me.isMeshGouraudMaterial&&Me.envMap!==null&&(Wr.envMap.value=Et,Wr.flipEnvMap.value=Et.isCubeTexture&&Et.isRenderTargetTexture===!1?-1:1),Me.isMeshStandardMaterial&&Me.envMap===null&&Se.environment!==null&&(Wr.envMapIntensity.value=Se.environmentIntensity),jn&&(Mn.setValue(pe,"toneMappingExposure",_.toneMappingExposure),ln.needsLights&&Oe(Wr,Zn),Nt&&Me.fog===!0&&at.refreshFogUniforms(Wr,Nt),at.refreshMaterialUniforms(Wr,Me,Q,J,x.state.transmissionRenderTarget[se.id]),hM.upload(pe,ci(ln),Wr,ot)),Me.isShaderMaterial&&Me.uniformsNeedUpdate===!0&&(hM.upload(pe,ci(ln),Wr,ot),Me.uniformsNeedUpdate=!1),Me.isSpriteMaterial&&Mn.setValue(pe,"center",_e.center),Mn.setValue(pe,"modelViewMatrix",_e.modelViewMatrix),Mn.setValue(pe,"normalMatrix",_e.normalMatrix),Mn.setValue(pe,"modelMatrix",_e.matrixWorld),Me.isShaderMaterial||Me.isRawShaderMaterial){const Sr=Me.uniformsGroups;for(let Ci=0,id=Sr.length;Ci<id;Ci++){const hs=Sr[Ci];hn.update(hs,Kr),hn.bind(hs,Kr)}}return Kr}function Oe(se,Se){se.ambientLightColor.needsUpdate=Se,se.lightProbe.needsUpdate=Se,se.directionalLights.needsUpdate=Se,se.directionalLightShadows.needsUpdate=Se,se.pointLights.needsUpdate=Se,se.pointLightShadows.needsUpdate=Se,se.spotLights.needsUpdate=Se,se.spotLightShadows.needsUpdate=Se,se.rectAreaLights.needsUpdate=Se,se.hemisphereLights.needsUpdate=Se}function nt(se){return se.isMeshLambertMaterial||se.isMeshToonMaterial||se.isMeshPhongMaterial||se.isMeshStandardMaterial||se.isShadowMaterial||se.isShaderMaterial&&se.lights===!0}this.getActiveCubeFace=function(){return R},this.getActiveMipmapLevel=function(){return L},this.getRenderTarget=function(){return $},this.setRenderTargetTextures=function(se,Se,Ae){const Me=st.get(se);Me.__autoAllocateDepthBuffer=se.resolveDepthBuffer===!1,Me.__autoAllocateDepthBuffer===!1&&(Me.__useRenderToTexture=!1),st.get(se.texture).__webglTexture=Se,st.get(se.depthTexture).__webglTexture=Me.__autoAllocateDepthBuffer?void 0:Ae,Me.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(se,Se){const Ae=st.get(se);Ae.__webglFramebuffer=Se,Ae.__useDefaultFramebuffer=Se===void 0};const ct=pe.createFramebuffer();this.setRenderTarget=function(se,Se=0,Ae=0){$=se,R=Se,L=Ae;let Me=!0,_e=null,Nt=!1,vt=!1;if(se){const Et=st.get(se);if(Et.__useDefaultFramebuffer!==void 0)je.bindFramebuffer(pe.FRAMEBUFFER,null),Me=!1;else if(Et.__webglFramebuffer===void 0)ot.setupRenderTarget(se);else if(Et.__hasExternalTextures)ot.rebindTextures(se,st.get(se.texture).__webglTexture,st.get(se.depthTexture).__webglTexture);else if(se.depthBuffer){const Wt=se.depthTexture;if(Et.__boundDepthTexture!==Wt){if(Wt!==null&&st.has(Wt)&&(se.width!==Wt.image.width||se.height!==Wt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ot.setupDepthRenderbuffer(se)}}const qt=se.texture;(qt.isData3DTexture||qt.isDataArrayTexture||qt.isCompressedArrayTexture)&&(vt=!0);const Qt=st.get(se).__webglFramebuffer;se.isWebGLCubeRenderTarget?(Array.isArray(Qt[Se])?_e=Qt[Se][Ae]:_e=Qt[Se],Nt=!0):se.samples>0&&ot.useMultisampledRTT(se)===!1?_e=st.get(se).__webglMultisampledFramebuffer:Array.isArray(Qt)?_e=Qt[Ae]:_e=Qt,k.copy(se.viewport),P.copy(se.scissor),G=se.scissorTest}else k.copy(te).multiplyScalar(Q).floor(),P.copy(ne).multiplyScalar(Q).floor(),G=le;if(Ae!==0&&(_e=ct),je.bindFramebuffer(pe.FRAMEBUFFER,_e)&&Me&&je.drawBuffers(se,_e),je.viewport(k),je.scissor(P),je.setScissorTest(G),Nt){const Et=st.get(se.texture);pe.framebufferTexture2D(pe.FRAMEBUFFER,pe.COLOR_ATTACHMENT0,pe.TEXTURE_CUBE_MAP_POSITIVE_X+Se,Et.__webglTexture,Ae)}else if(vt){const Et=Se;for(let qt=0;qt<se.textures.length;qt++){const Qt=st.get(se.textures[qt]);pe.framebufferTextureLayer(pe.FRAMEBUFFER,pe.COLOR_ATTACHMENT0+qt,Qt.__webglTexture,Ae,Et)}}else if(se!==null&&Ae!==0){const Et=st.get(se.texture);pe.framebufferTexture2D(pe.FRAMEBUFFER,pe.COLOR_ATTACHMENT0,pe.TEXTURE_2D,Et.__webglTexture,Ae)}N=-1},this.readRenderTargetPixels=function(se,Se,Ae,Me,_e,Nt,vt,Tt=0){if(!(se&&se.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Et=st.get(se).__webglFramebuffer;if(se.isWebGLCubeRenderTarget&&vt!==void 0&&(Et=Et[vt]),Et){je.bindFramebuffer(pe.FRAMEBUFFER,Et);try{const qt=se.textures[Tt],Qt=qt.format,Wt=qt.type;if(!Ze.textureFormatReadable(Qt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Ze.textureTypeReadable(Wt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Se>=0&&Se<=se.width-Me&&Ae>=0&&Ae<=se.height-_e&&(se.textures.length>1&&pe.readBuffer(pe.COLOR_ATTACHMENT0+Tt),pe.readPixels(Se,Ae,Me,_e,tn.convert(Qt),tn.convert(Wt),Nt))}finally{const qt=$!==null?st.get($).__webglFramebuffer:null;je.bindFramebuffer(pe.FRAMEBUFFER,qt)}}},this.readRenderTargetPixelsAsync=async function(se,Se,Ae,Me,_e,Nt,vt,Tt=0){if(!(se&&se.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Et=st.get(se).__webglFramebuffer;if(se.isWebGLCubeRenderTarget&&vt!==void 0&&(Et=Et[vt]),Et)if(Se>=0&&Se<=se.width-Me&&Ae>=0&&Ae<=se.height-_e){je.bindFramebuffer(pe.FRAMEBUFFER,Et);const qt=se.textures[Tt],Qt=qt.format,Wt=qt.type;if(!Ze.textureFormatReadable(Qt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ze.textureTypeReadable(Wt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const bn=pe.createBuffer();pe.bindBuffer(pe.PIXEL_PACK_BUFFER,bn),pe.bufferData(pe.PIXEL_PACK_BUFFER,Nt.byteLength,pe.STREAM_READ),se.textures.length>1&&pe.readBuffer(pe.COLOR_ATTACHMENT0+Tt),pe.readPixels(Se,Ae,Me,_e,tn.convert(Qt),tn.convert(Wt),0);const Hn=$!==null?st.get($).__webglFramebuffer:null;je.bindFramebuffer(pe.FRAMEBUFFER,Hn);const On=pe.fenceSync(pe.SYNC_GPU_COMMANDS_COMPLETE,0);return pe.flush(),await _ce(pe,On,4),pe.bindBuffer(pe.PIXEL_PACK_BUFFER,bn),pe.getBufferSubData(pe.PIXEL_PACK_BUFFER,0,Nt),pe.deleteBuffer(bn),pe.deleteSync(On),Nt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(se,Se=null,Ae=0){const Me=Math.pow(2,-Ae),_e=Math.floor(se.image.width*Me),Nt=Math.floor(se.image.height*Me),vt=Se!==null?Se.x:0,Tt=Se!==null?Se.y:0;ot.setTexture2D(se,0),pe.copyTexSubImage2D(pe.TEXTURE_2D,Ae,0,0,vt,Tt,_e,Nt),je.unbindTexture()};const St=pe.createFramebuffer(),jt=pe.createFramebuffer();this.copyTextureToTexture=function(se,Se,Ae=null,Me=null,_e=0,Nt=null){Nt===null&&(_e!==0?(Nx("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Nt=_e,_e=0):Nt=0);let vt,Tt,Et,qt,Qt,Wt,bn,Hn,On;const or=se.isCompressedTexture?se.mipmaps[Nt]:se.image;if(Ae!==null)vt=Ae.max.x-Ae.min.x,Tt=Ae.max.y-Ae.min.y,Et=Ae.isBox3?Ae.max.z-Ae.min.z:1,qt=Ae.min.x,Qt=Ae.min.y,Wt=Ae.isBox3?Ae.min.z:0;else{const wi=Math.pow(2,-_e);vt=Math.floor(or.width*wi),Tt=Math.floor(or.height*wi),se.isDataArrayTexture?Et=or.depth:se.isData3DTexture?Et=Math.floor(or.depth*wi):Et=1,qt=0,Qt=0,Wt=0}Me!==null?(bn=Me.x,Hn=Me.y,On=Me.z):(bn=0,Hn=0,On=0);const yn=tn.convert(Se.format),ln=tn.convert(Se.type);let Rr;Se.isData3DTexture?(ot.setTexture3D(Se,0),Rr=pe.TEXTURE_3D):Se.isDataArrayTexture||Se.isCompressedArrayTexture?(ot.setTexture2DArray(Se,0),Rr=pe.TEXTURE_2D_ARRAY):(ot.setTexture2D(Se,0),Rr=pe.TEXTURE_2D),pe.pixelStorei(pe.UNPACK_FLIP_Y_WEBGL,Se.flipY),pe.pixelStorei(pe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Se.premultiplyAlpha),pe.pixelStorei(pe.UNPACK_ALIGNMENT,Se.unpackAlignment);const Jn=pe.getParameter(pe.UNPACK_ROW_LENGTH),Kr=pe.getParameter(pe.UNPACK_IMAGE_HEIGHT),cr=pe.getParameter(pe.UNPACK_SKIP_PIXELS),jn=pe.getParameter(pe.UNPACK_SKIP_ROWS),Zn=pe.getParameter(pe.UNPACK_SKIP_IMAGES);pe.pixelStorei(pe.UNPACK_ROW_LENGTH,or.width),pe.pixelStorei(pe.UNPACK_IMAGE_HEIGHT,or.height),pe.pixelStorei(pe.UNPACK_SKIP_PIXELS,qt),pe.pixelStorei(pe.UNPACK_SKIP_ROWS,Qt),pe.pixelStorei(pe.UNPACK_SKIP_IMAGES,Wt);const Mn=se.isDataArrayTexture||se.isData3DTexture,Wr=Se.isDataArrayTexture||Se.isData3DTexture;if(se.isDepthTexture){const wi=st.get(se),Sr=st.get(Se),Ci=st.get(wi.__renderTarget),id=st.get(Sr.__renderTarget);je.bindFramebuffer(pe.READ_FRAMEBUFFER,Ci.__webglFramebuffer),je.bindFramebuffer(pe.DRAW_FRAMEBUFFER,id.__webglFramebuffer);for(let hs=0;hs<Et;hs++)Mn&&(pe.framebufferTextureLayer(pe.READ_FRAMEBUFFER,pe.COLOR_ATTACHMENT0,st.get(se).__webglTexture,_e,Wt+hs),pe.framebufferTextureLayer(pe.DRAW_FRAMEBUFFER,pe.COLOR_ATTACHMENT0,st.get(Se).__webglTexture,Nt,On+hs)),pe.blitFramebuffer(qt,Qt,vt,Tt,bn,Hn,vt,Tt,pe.DEPTH_BUFFER_BIT,pe.NEAREST);je.bindFramebuffer(pe.READ_FRAMEBUFFER,null),je.bindFramebuffer(pe.DRAW_FRAMEBUFFER,null)}else if(_e!==0||se.isRenderTargetTexture||st.has(se)){const wi=st.get(se),Sr=st.get(Se);je.bindFramebuffer(pe.READ_FRAMEBUFFER,St),je.bindFramebuffer(pe.DRAW_FRAMEBUFFER,jt);for(let Ci=0;Ci<Et;Ci++)Mn?pe.framebufferTextureLayer(pe.READ_FRAMEBUFFER,pe.COLOR_ATTACHMENT0,wi.__webglTexture,_e,Wt+Ci):pe.framebufferTexture2D(pe.READ_FRAMEBUFFER,pe.COLOR_ATTACHMENT0,pe.TEXTURE_2D,wi.__webglTexture,_e),Wr?pe.framebufferTextureLayer(pe.DRAW_FRAMEBUFFER,pe.COLOR_ATTACHMENT0,Sr.__webglTexture,Nt,On+Ci):pe.framebufferTexture2D(pe.DRAW_FRAMEBUFFER,pe.COLOR_ATTACHMENT0,pe.TEXTURE_2D,Sr.__webglTexture,Nt),_e!==0?pe.blitFramebuffer(qt,Qt,vt,Tt,bn,Hn,vt,Tt,pe.COLOR_BUFFER_BIT,pe.NEAREST):Wr?pe.copyTexSubImage3D(Rr,Nt,bn,Hn,On+Ci,qt,Qt,vt,Tt):pe.copyTexSubImage2D(Rr,Nt,bn,Hn,qt,Qt,vt,Tt);je.bindFramebuffer(pe.READ_FRAMEBUFFER,null),je.bindFramebuffer(pe.DRAW_FRAMEBUFFER,null)}else Wr?se.isDataTexture||se.isData3DTexture?pe.texSubImage3D(Rr,Nt,bn,Hn,On,vt,Tt,Et,yn,ln,or.data):Se.isCompressedArrayTexture?pe.compressedTexSubImage3D(Rr,Nt,bn,Hn,On,vt,Tt,Et,yn,or.data):pe.texSubImage3D(Rr,Nt,bn,Hn,On,vt,Tt,Et,yn,ln,or):se.isDataTexture?pe.texSubImage2D(pe.TEXTURE_2D,Nt,bn,Hn,vt,Tt,yn,ln,or.data):se.isCompressedTexture?pe.compressedTexSubImage2D(pe.TEXTURE_2D,Nt,bn,Hn,or.width,or.height,yn,or.data):pe.texSubImage2D(pe.TEXTURE_2D,Nt,bn,Hn,vt,Tt,yn,ln,or);pe.pixelStorei(pe.UNPACK_ROW_LENGTH,Jn),pe.pixelStorei(pe.UNPACK_IMAGE_HEIGHT,Kr),pe.pixelStorei(pe.UNPACK_SKIP_PIXELS,cr),pe.pixelStorei(pe.UNPACK_SKIP_ROWS,jn),pe.pixelStorei(pe.UNPACK_SKIP_IMAGES,Zn),Nt===0&&Se.generateMipmaps&&pe.generateMipmap(Rr),je.unbindTexture()},this.copyTextureToTexture3D=function(se,Se,Ae=null,Me=null,_e=0){return Nx('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(se,Se,Ae,Me,_e)},this.initRenderTarget=function(se){st.get(se).__webglFramebuffer===void 0&&ot.setupRenderTarget(se)},this.initTexture=function(se){se.isCubeTexture?ot.setTextureCube(se,0):se.isData3DTexture?ot.setTexture3D(se,0):se.isDataArrayTexture||se.isCompressedArrayTexture?ot.setTexture2DArray(se,0):ot.setTexture2D(se,0),je.unbindTexture()},this.resetState=function(){R=0,L=0,$=null,je.reset(),zt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Jc}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=Qr._getDrawingBufferColorSpace(e),t.unpackColorSpace=Qr._getUnpackColorSpace()}}const Oge=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:QF,AddEquation:ng,AddOperation:Qq,AdditiveAnimationBlendMode:oP,AdditiveBlending:M$,AgXToneMapping:iX,AlphaFormat:tP,AlwaysCompare:vX,AlwaysDepth:GM,AlwaysStencilFunc:k$,AmbientLight:iK,AnimationAction:pK,AnimationClip:o1,AnimationLoader:Yue,AnimationMixer:mK,AnimationObjectGroup:bde,AnimationUtils:jue,ArcCurve:IX,ArrayCamera:dK,ArrowHelper:Wde,AttachedBindMode:I$,Audio:fK,AudioAnalyser:cde,AudioContext:LP,AudioListener:ade,AudioLoader:rde,AxesHelper:jde,BackSide:Ao,BasicDepthPacking:cX,BasicShadowMap:kq,BatchedMesh:MX,Bone:tI,BooleanKeyframeTrack:Cv,Box2:Rde,Box3:To,Box3Helper:Vde,BoxGeometry:Fg,BoxHelper:Hde,BufferAttribute:oi,BufferGeometry:gr,BufferGeometryLoader:cK,ByteType:VN,Cache:lh,Camera:ZN,CameraHelper:zde,CanvasTexture:mue,CapsuleGeometry:sI,CatmullRomCurve3:DX,CineonToneMapping:nX,CircleGeometry:aI,ClampToEdgeWrapping:oa,Clock:FP,Color:sn,ColorKeyframeTrack:DP,ColorManagement:Qr,CompressedArrayTexture:hue,CompressedCubeTexture:pue,CompressedTexture:iI,CompressedTextureLoader:Jue,ConeGeometry:__,ConstantAlphaFactor:Yq,ConstantColorFactor:Xq,Controls:Xde,CubeCamera:_X,CubeReflectionMapping:bh,CubeRefractionMapping:xg,CubeTexture:b_,CubeTextureLoader:tK,CubeUVReflectionMapping:A1,CubicBezierCurve:_P,CubicBezierCurve3:kX,CubicInterpolant:JX,CullFaceBack:T$,CullFaceFront:Dq,CullFaceFrontBack:Mle,CullFaceNone:Iq,Curve:ff,CurvePath:BX,CustomBlending:Oq,CustomToneMapping:rX,CylinderGeometry:C_,Cylindrical:Mde,Data3DTexture:JN,DataArrayTexture:YN,DataTexture:Kd,DataTextureLoader:bI,DataUtils:qd,DecrementStencilOp:Fle,DecrementWrapStencilOp:Ule,DefaultLoadingManager:eK,DepthFormat:Zx,DepthStencilFormat:Qx,DepthTexture:wP,DetachedBindMode:aX,DirectionalLight:$P,DirectionalLightHelper:Ude,DiscreteInterpolant:ZX,DodecahedronGeometry:oI,DoubleSide:$u,DstAlphaFactor:Vq,DstColorFactor:Wq,DynamicCopyUsage:tce,DynamicDrawUsage:Kle,DynamicReadUsage:Zle,EdgesGeometry:NX,EllipseCurve:lI,EqualCompare:pX,EqualDepth:jM,EqualStencilFunc:Gle,EquirectangularReflectionMapping:Xx,EquirectangularRefractionMapping:IC,Euler:Cc,EventDispatcher:Rh,ExtrudeGeometry:cI,FileLoader:Mo,Float16BufferAttribute:Wce,Float32BufferAttribute:An,FloatType:ns,Fog:eI,FogExp2:QN,FramebufferTexture:fue,FrontSide:vh,Frustum:M1,FrustumArray:nI,GLBufferAttribute:Ede,GLSL1:rce,GLSL3:O$,GreaterCompare:mX,GreaterDepth:XM,GreaterEqualCompare:yX,GreaterEqualDepth:qM,GreaterEqualStencilFunc:Xle,GreaterStencilFunc:jle,GridHelper:Fde,Group:Mp,HalfFloatType:Ws,HemisphereLight:rK,HemisphereLightHelper:Lde,IcosahedronGeometry:E_,ImageBitmapLoader:uK,ImageLoader:PC,ImageUtils:SX,IncrementStencilOp:Lle,IncrementWrapStencilOp:Ple,InstancedBufferAttribute:Jy,InstancedBufferGeometry:lK,InstancedInterleavedBuffer:_de,InstancedMesh:bP,Int16BufferAttribute:Vce,Int32BufferAttribute:Gce,Int8BufferAttribute:Uce,IntType:g_,InterleavedBuffer:S_,InterleavedBufferAttribute:wg,Interpolant:R1,InterpolateDiscrete:e1,InterpolateLinear:t1,InterpolateSmooth:dM,InterpolationSamplingMode:ace,InterpolationSamplingType:sce,InvertStencilOp:zle,KeepStencilOp:py,KeyframeTrack:Zu,LOD:TX,LatheGeometry:uI,Layers:i1,LessCompare:hX,LessDepth:WM,LessEqualCompare:cP,LessEqualDepth:Yy,LessEqualStencilFunc:Wle,LessStencilFunc:Vle,Light:Ug,LightProbe:oK,Line:Lp,Line3:Dde,LineBasicMaterial:il,LineCurve:EP,LineCurve3:OX,LineDashedMaterial:XX,LineLoop:xP,LineSegments:df,LinearFilter:ai,LinearInterpolant:IP,LinearMipMapLinearFilter:D$,LinearMipMapNearestFilter:Ile,LinearMipmapLinearFilter:Pu,LinearMipmapNearestFilter:Rx,LinearSRGBColorSpace:qu,LinearToneMapping:eX,LinearTransfer:kC,Loader:Do,LoaderUtils:dg,LoadingManager:vI,LoopOnce:sP,LoopPingPong:oX,LoopRepeat:aP,MOUSE:Ale,Material:Ua,MaterialLoader:xI,MathUtils:dP,Matrix2:VP,Matrix3:xr,Matrix4:zn,MaxEquation:Fq,Mesh:rs,MeshBasicMaterial:gc,MeshDepthMaterial:yI,MeshDistanceMaterial:RP,MeshLambertMaterial:jX,MeshMatcapMaterial:qX,MeshNormalMaterial:WX,MeshPhongMaterial:VX,MeshPhysicalMaterial:Ju,MeshStandardMaterial:M_,MeshToonMaterial:GX,MinEquation:Lq,MirroredRepeatWrapping:Kx,MixOperation:Zq,MultiplyBlending:N$,MultiplyOperation:m_,NearestFilter:no,NearestMipMapLinearFilter:Nle,NearestMipMapNearestFilter:Rle,NearestMipmapLinearFilter:Ty,NearestMipmapNearestFilter:HN,NeutralToneMapping:sX,NeverCompare:fX,NeverDepth:VM,NeverStencilFunc:Hle,NoBlending:uh,NoColorSpace:_p,NoToneMapping:dh,NormalAnimationBlendMode:KN,NormalBlending:Uy,NotEqualCompare:gX,NotEqualDepth:KM,NotEqualStencilFunc:qle,NumberKeyframeTrack:Qy,Object3D:ei,ObjectLoader:tde,ObjectSpaceNormalMap:dX,OctahedronGeometry:A_,OneFactor:Uq,OneMinusConstantAlphaFactor:Jq,OneMinusConstantColorFactor:Kq,OneMinusDstAlphaFactor:Gq,OneMinusDstColorFactor:jq,OneMinusSrcAlphaFactor:HM,OneMinusSrcColorFactor:Hq,OrthographicCamera:Ev,PCFShadowMap:zN,PCFSoftShadowMap:cC,PMREMGenerator:z$,Path:AR,PerspectiveCamera:Ba,Plane:eg,PlaneGeometry:Xp,PlaneHelper:Gde,PointLight:BP,PointLightHelper:Bde,Points:SP,PointsMaterial:rI,PolarGridHelper:Pde,PolyhedronGeometry:Pg,PositionalAudio:lde,PropertyBinding:ii,PropertyMixer:hK,QuadraticBezierCurve:AP,QuadraticBezierCurve3:TP,Quaternion:ua,QuaternionKeyframeTrack:ev,QuaternionLinearInterpolant:QX,RED_GREEN_RGTC2_Format:xR,RED_RGTC1_Format:iP,REVISION:p_,RGBADepthPacking:uX,RGBAFormat:la,RGBAIntegerFormat:XN,RGBA_ASTC_10x10_Format:pR,RGBA_ASTC_10x5_Format:dR,RGBA_ASTC_10x6_Format:fR,RGBA_ASTC_10x8_Format:hR,RGBA_ASTC_12x10_Format:mR,RGBA_ASTC_12x12_Format:gR,RGBA_ASTC_4x4_Format:rR,RGBA_ASTC_5x4_Format:iR,RGBA_ASTC_5x5_Format:sR,RGBA_ASTC_6x5_Format:aR,RGBA_ASTC_6x6_Format:oR,RGBA_ASTC_8x5_Format:lR,RGBA_ASTC_8x6_Format:cR,RGBA_ASTC_8x8_Format:uR,RGBA_BPTC_Format:pC,RGBA_ETC2_EAC_Format:nR,RGBA_PVRTC_2BPPV1_Format:QM,RGBA_PVRTC_4BPPV1_Format:ZM,RGBA_S3TC_DXT1_Format:dC,RGBA_S3TC_DXT3_Format:fC,RGBA_S3TC_DXT5_Format:hC,RGBDepthPacking:kle,RGBFormat:nP,RGBIntegerFormat:Dle,RGB_BPTC_SIGNED_Format:yR,RGB_BPTC_UNSIGNED_Format:vR,RGB_ETC1_Format:eR,RGB_ETC2_Format:tR,RGB_PVRTC_2BPPV1_Format:JM,RGB_PVRTC_4BPPV1_Format:YM,RGB_S3TC_DXT1_Format:uC,RGDepthPacking:Ole,RGFormat:rP,RGIntegerFormat:qN,RawShaderMaterial:HX,Ray:T1,Raycaster:HP,RectAreaLight:sK,RedFormat:y_,RedIntegerFormat:v_,ReinhardToneMapping:tX,RenderTarget:fP,RenderTarget3D:Sde,RepeatWrapping:Sg,ReplaceStencilOp:$le,ReverseSubtractEquation:$q,RingGeometry:dI,SIGNED_RED_GREEN_RGTC2_Format:SR,SIGNED_RED_RGTC1_Format:bR,SRGBColorSpace:_o,SRGBTransfer:$i,Scene:x_,ShaderChunk:fr,ShaderLib:Gd,ShaderMaterial:No,ShadowMaterial:zX,Shape:Hy,ShapeGeometry:fI,ShapePath:qde,ShapeUtils:Xd,ShortType:GN,Skeleton:w_,SkeletonHelper:Ode,SkinnedMesh:vP,Source:ag,Sphere:ro,SphereGeometry:T_,Spherical:gK,SphericalHarmonics3:aK,SplineCurve:MP,SpotLight:OP,SpotLightHelper:kde,Sprite:AX,SpriteMaterial:yP,SrcAlphaFactor:zM,SrcAlphaSaturateFactor:qq,SrcColorFactor:zq,StaticCopyUsage:ece,StaticDrawUsage:OC,StaticReadUsage:Jle,StereoCamera:ide,StreamCopyUsage:nce,StreamDrawUsage:Yle,StreamReadUsage:Qle,StringKeyframeTrack:_v,SubtractEquation:Bq,SubtractiveBlending:R$,TOUCH:Tle,TangentSpaceNormalMap:Lg,TetrahedronGeometry:hI,Texture:Ti,TextureLoader:nK,TextureUtils:Qde,Timer:Ade,TimestampQuery:ice,TorusGeometry:pI,TorusKnotGeometry:mI,Triangle:pc,TriangleFanDrawMode:wR,TriangleStripDrawMode:lP,TrianglesDrawMode:lX,TubeGeometry:gI,UVMapping:bg,Uint16BufferAttribute:hP,Uint32BufferAttribute:pP,Uint8BufferAttribute:zce,Uint8ClampedBufferAttribute:Hce,Uniform:zP,UniformsGroup:Cde,UniformsLib:fn,UniformsUtils:mP,UnsignedByteType:Pl,UnsignedInt248Type:Jx,UnsignedInt5999Type:eP,UnsignedIntType:xh,UnsignedShort4444Type:WN,UnsignedShort5551Type:jN,UnsignedShortType:Yx,VSMShadowMap:Vd,Vector2:Lt,Vector3:be,Vector4:Hr,VectorKeyframeTrack:tv,VideoFrameTexture:due,VideoTexture:RX,WebGL3DRenderTarget:Rce,WebGLArrayRenderTarget:Mce,WebGLCoordinateSystem:Jc,WebGLCubeRenderTarget:gP,WebGLRenderTarget:wc,WebGLRenderer:WP,WebGLUtils:CK,WebGPUCoordinateSystem:n1,WebXRController:fM,WireframeGeometry:UX,WrapAroundEnding:DC,ZeroCurvatureEnding:My,ZeroFactor:Pq,ZeroSlopeEnding:Ry,ZeroStencilOp:Ble,createCanvasElement:xX},Symbol.toStringTag,{value:"Module"}));var kO={exports:{}},OO={},BO={exports:{}},$O={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y8;function Bge(){if(Y8)return $O;Y8=1;var n=wv();function e(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,i=n.useEffect,s=n.useLayoutEffect,a=n.useDebugValue;function o(d,h){var p=h(),g=r({inst:{value:p,getSnapshot:h}}),v=g[0].inst,b=g[1];return s(function(){v.value=p,v.getSnapshot=h,l(v)&&b({inst:v})},[d,p,h]),i(function(){return l(v)&&b({inst:v}),d(function(){l(v)&&b({inst:v})})},[d]),a(p),p}function l(d){var h=d.getSnapshot;d=d.value;try{var p=h();return!t(d,p)}catch{return!0}}function c(d,h){return h()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:o;return $O.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:u,$O}var J8;function $ge(){return J8||(J8=1,BO.exports=Bge()),BO.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z8;function Lge(){if(Z8)return OO;Z8=1;var n=wv(),e=$ge();function t(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,s=n.useRef,a=n.useEffect,o=n.useMemo,l=n.useDebugValue;return OO.useSyncExternalStoreWithSelector=function(c,u,d,h,p){var g=s(null);if(g.current===null){var v={hasValue:!1,value:null};g.current=v}else v=g.current;g=o(function(){function x(R){if(!C){if(C=!0,E=R,R=h(R),p!==void 0&&v.hasValue){var L=v.value;if(p(L,R))return _=L}return _=R}if(L=_,r(E,R))return L;var $=h(R);return p!==void 0&&p(L,$)?(E=R,L):(E=R,_=$)}var C=!1,E,_,M=d===void 0?null:d;return[function(){return x(u())},M===null?void 0:function(){return x(M())}]},[u,d,h,p]);var b=i(c,g[0],g[1]);return a(function(){v.hasValue=!0,v.value=b},[b]),l(b),b},OO}var Q8;function Fge(){return Q8||(Q8=1,kO.exports=Lge()),kO.exports}var Pge=Fge();const Uge=qp(Pge),eV=n=>{let e;const t=new Set,r=(c,u)=>{const d=typeof c=="function"?c(e):c;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),t.forEach(p=>p(e,h))}},i=()=>e,o={setState:r,getState:i,getInitialState:()=>l,subscribe:c=>(t.add(c),()=>t.delete(c))},l=e=n(r,i,o);return o},zge=n=>n?eV(n):eV,{useSyncExternalStoreWithSelector:Hge}=Uge,Vge=n=>n;function Gge(n,e=Vge,t){const r=Hge(n.subscribe,n.getState,n.getInitialState,e,t);return Ne.useDebugValue(r),r}const tV=(n,e)=>{const t=zge(n),r=(i,s=e)=>Gge(t,i,s);return Object.assign(r,t),r},EK=(n,e)=>n?tV(n,e):tV,Wge=n=>typeof n=="object"&&typeof n.then=="function",Iy=[];function AK(n,e,t=(r,i)=>r===i){if(n===e)return!0;if(!n||!e)return!1;const r=n.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!t(n[i],e[i]))return!1;return!0}function TK(n,e=null,t=!1,r={}){e===null&&(e=[n]);for(const s of Iy)if(AK(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return r.lifespan&&r.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,r.lifespan)),s.response;if(!t)throw s.promise}const i={keys:e,equal:r.equal,remove:()=>{const s=Iy.indexOf(i);s!==-1&&Iy.splice(s,1)},promise:(Wge(n)?n:n(...e)).then(s=>{i.response=s,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(s=>i.error=s)};if(Iy.push(i),!t)throw i.promise}const jge=(n,e,t)=>TK(n,e,!1,t),qge=(n,e,t)=>void TK(n,e,!0,t),Xge=n=>{if(n===void 0||n.length===0)Iy.splice(0,Iy.length);else{const e=Iy.find(t=>AK(n,t.keys,t.equal));e&&e.remove()}};var LO={exports:{}},FO={exports:{}},PO={exports:{}},UO={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nV;function Kge(){return nV||(nV=1,function(n){function e(z,J){var Q=z.length;z.push(J);e:for(;0<Q;){var Y=Q-1>>>1,q=z[Y];if(0<i(q,J))z[Y]=J,z[Q]=q,Q=Y;else break e}}function t(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var J=z[0],Q=z.pop();if(Q!==J){z[0]=Q;e:for(var Y=0,q=z.length,te=q>>>1;Y<te;){var ne=2*(Y+1)-1,le=z[ne],ye=ne+1,ue=z[ye];if(0>i(le,Q))ye<q&&0>i(ue,le)?(z[Y]=ue,z[ye]=Q,Y=ye):(z[Y]=le,z[ne]=Q,Y=ne);else if(ye<q&&0>i(ue,Q))z[Y]=ue,z[ye]=Q,Y=ye;else break e}}return J}function i(z,J){var Q=z.sortIndex-J.sortIndex;return Q!==0?Q:z.id-J.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,d=null,h=3,p=!1,g=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function E(z){for(var J=t(c);J!==null;){if(J.callback===null)r(c);else if(J.startTime<=z)r(c),J.sortIndex=J.expirationTime,e(l,J);else break;J=t(c)}}function _(z){if(v=!1,E(z),!g)if(t(l)!==null)g=!0,W();else{var J=t(c);J!==null&&X(_,J.startTime-z)}}var M=!1,R=-1,L=5,$=-1;function N(){return!(n.unstable_now()-$<L)}function I(){if(M){var z=n.unstable_now();$=z;var J=!0;try{e:{g=!1,v&&(v=!1,x(R),R=-1),p=!0;var Q=h;try{t:{for(E(z),d=t(l);d!==null&&!(d.expirationTime>z&&N());){var Y=d.callback;if(typeof Y=="function"){d.callback=null,h=d.priorityLevel;var q=Y(d.expirationTime<=z);if(z=n.unstable_now(),typeof q=="function"){d.callback=q,E(z),J=!0;break t}d===t(l)&&r(l),E(z)}else r(l);d=t(l)}if(d!==null)J=!0;else{var te=t(c);te!==null&&X(_,te.startTime-z),J=!1}}break e}finally{d=null,h=Q,p=!1}J=void 0}}finally{J?k():M=!1}}}var k;if(typeof C=="function")k=function(){C(I)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,G=P.port2;P.port1.onmessage=I,k=function(){G.postMessage(null)}}else k=function(){b(I,0)};function W(){M||(M=!0,k())}function X(z,J){R=b(function(){z(n.unstable_now())},J)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(z){z.callback=null},n.unstable_continueExecution=function(){g||p||(g=!0,W())},n.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<z?Math.floor(1e3/z):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(z){switch(h){case 1:case 2:case 3:var J=3;break;default:J=h}var Q=h;h=J;try{return z()}finally{h=Q}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(z,J){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Q=h;h=z;try{return J()}finally{h=Q}},n.unstable_scheduleCallback=function(z,J,Q){var Y=n.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?Y+Q:Y):Q=Y,z){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=Q+q,z={id:u++,callback:J,priorityLevel:z,startTime:Q,expirationTime:q,sortIndex:-1},Q>Y?(z.sortIndex=Q,e(c,z),t(l)===null&&z===t(c)&&(v?(x(R),R=-1):v=!0,X(_,Q-Y))):(z.sortIndex=q,e(l,z),g||p||(g=!0,W())),z},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(z){var J=h;return function(){var Q=h;h=J;try{return z.apply(this,arguments)}finally{h=Q}}}}(UO)),UO}var rV;function Yge(){return rV||(rV=1,PO.exports=Kge()),PO.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iV;function Jge(){return iV||(iV=1,function(n){n.exports=function(e){function t(y,S,T,B){return new _S(y,S,T,B)}function r(){}function i(y){var S="https://react.dev/errors/"+y;if(1<arguments.length){S+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)S+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+y+"; visit "+S+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(y){return y===null||typeof y!="object"?null:(y=Sd&&y[Sd]||y["@@iterator"],typeof y=="function"?y:null)}function a(y){if(y==null)return null;if(typeof y=="function")return y.$$typeof===MS?null:y.displayName||y.name||null;if(typeof y=="string")return y;switch(y){case Rf:return"Fragment";case Yl:return"Portal";case sb:return"Profiler";case M0:return"StrictMode";case ab:return"Suspense";case vm:return"SuspenseList"}if(typeof y=="object")switch(y.$$typeof){case $c:return(y.displayName||"Context")+".Provider";case AS:return(y._context.displayName||"Context")+".Consumer";case N0:var S=y.render;return y=y.displayName,y||(y=S.displayName||S.name||"",y=y!==""?"ForwardRef("+y+")":"ForwardRef"),y;case ob:return S=y.displayName||null,S!==null?S:a(y.type)||"Memo";case Jl:S=y._payload,y=y._init;try{return a(y(S))}catch{}}return null}function o(y){if(du===void 0)try{throw Error()}catch(T){var S=T.stack.trim().match(/\n( *(at )?)/);du=S&&S[1]||"",wd=-1<T.stack.indexOf(`
    at`)?" (<anonymous>)":-1<T.stack.indexOf("@")?"@unknown:0:0":""}return`
`+du+y+wd}function l(y,S){if(!y||Hh)return"";Hh=!0;var T=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var B={DetermineComponentFrameRoot:function(){try{if(S){var dn=function(){throw Error()};if(Object.defineProperty(dn.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(dn,[])}catch(dr){var gn=dr}Reflect.construct(y,[],dn)}else{try{dn.call()}catch(dr){gn=dr}y.call(dn.prototype)}}else{try{throw Error()}catch(dr){gn=dr}(dn=y())&&typeof dn.catch=="function"&&dn.catch(function(){})}}catch(dr){if(dr&&gn&&typeof dr.stack=="string")return[dr.stack,gn.stack]}return[null,null]}};B.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var H=Object.getOwnPropertyDescriptor(B.DetermineComponentFrameRoot,"name");H&&H.configurable&&Object.defineProperty(B.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var K=B.DetermineComponentFrameRoot(),ge=K[0],De=K[1];if(ge&&De){var Qe=ge.split(`
`),It=De.split(`
`);for(H=B=0;B<Qe.length&&!Qe[B].includes("DetermineComponentFrameRoot");)B++;for(;H<It.length&&!It[H].includes("DetermineComponentFrameRoot");)H++;if(B===Qe.length||H===It.length)for(B=Qe.length-1,H=It.length-1;1<=B&&0<=H&&Qe[B]!==It[H];)H--;for(;1<=B&&0<=H;B--,H--)if(Qe[B]!==It[H]){if(B!==1||H!==1)do if(B--,H--,0>H||Qe[B]!==It[H]){var Jt=`
`+Qe[B].replace(" at new "," at ");return y.displayName&&Jt.includes("<anonymous>")&&(Jt=Jt.replace("<anonymous>",y.displayName)),Jt}while(1<=B&&0<=H);break}}}finally{Hh=!1,Error.prepareStackTrace=T}return(T=y?y.displayName||y.name:"")?o(T):""}function c(y){switch(y.tag){case 26:case 27:case 5:return o(y.type);case 16:return o("Lazy");case 13:return o("Suspense");case 19:return o("SuspenseList");case 0:case 15:return y=l(y.type,!1),y;case 11:return y=l(y.type.render,!1),y;case 1:return y=l(y.type,!0),y;default:return""}}function u(y){try{var S="";do S+=c(y),y=y.return;while(y);return S}catch(T){return`
Error generating stack: `+T.message+`
`+T.stack}}function d(y){var S=y,T=y;if(y.alternate)for(;S.return;)S=S.return;else{y=S;do S=y,(S.flags&4098)!==0&&(T=S.return),y=S.return;while(y)}return S.tag===3?T:null}function h(y){if(d(y)!==y)throw Error(i(188))}function p(y){var S=y.alternate;if(!S){if(S=d(y),S===null)throw Error(i(188));return S!==y?null:y}for(var T=y,B=S;;){var H=T.return;if(H===null)break;var K=H.alternate;if(K===null){if(B=H.return,B!==null){T=B;continue}break}if(H.child===K.child){for(K=H.child;K;){if(K===T)return h(H),y;if(K===B)return h(H),S;K=K.sibling}throw Error(i(188))}if(T.return!==B.return)T=H,B=K;else{for(var ge=!1,De=H.child;De;){if(De===T){ge=!0,T=H,B=K;break}if(De===B){ge=!0,B=H,T=K;break}De=De.sibling}if(!ge){for(De=K.child;De;){if(De===T){ge=!0,T=K,B=H;break}if(De===B){ge=!0,B=K,T=H;break}De=De.sibling}if(!ge)throw Error(i(189))}}if(T.alternate!==B)throw Error(i(190))}if(T.tag!==3)throw Error(i(188));return T.stateNode.current===T?y:S}function g(y){var S=y.tag;if(S===5||S===26||S===27||S===6)return y;for(y=y.child;y!==null;){if(S=g(y),S!==null)return S;y=y.sibling}return null}function v(y){var S=y.tag;if(S===5||S===26||S===27||S===6)return y;for(y=y.child;y!==null;){if(y.tag!==4&&(S=v(y),S!==null))return S;y=y.sibling}return null}function b(y){return{current:y}}function x(y){0>Ad||(y.current=Es[Ad],Es[Ad]=null,Ad--)}function C(y,S){Ad++,Es[Ad]=y.current,y.current=S}function E(y){return y>>>=0,y===0?32:31-(fA(y)/hA|0)|0}function _(y){var S=y&42;if(S!==0)return S;switch(y&-y){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return y&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return y}}function M(y,S){var T=y.pendingLanes;if(T===0)return 0;var B=0,H=y.suspendedLanes,K=y.pingedLanes,ge=y.warmLanes;y=y.finishedLanes!==0;var De=T&134217727;return De!==0?(T=De&~H,T!==0?B=_(T):(K&=De,K!==0?B=_(K):y||(ge=De&~ge,ge!==0&&(B=_(ge))))):(De=T&~H,De!==0?B=_(De):K!==0?B=_(K):y||(ge=T&~ge,ge!==0&&(B=_(ge)))),B===0?0:S!==0&&S!==B&&(S&H)===0&&(H=B&-B,ge=S&-S,H>=ge||H===32&&(ge&4194176)!==0)?S:B}function R(y,S){return(y.pendingLanes&~(y.suspendedLanes&~y.pingedLanes)&S)===0}function L(y,S){switch(y){case 1:case 2:case 4:case 8:return S+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return S+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $(){var y=hu;return hu<<=1,(hu&4194176)===0&&(hu=128),y}function N(){var y=Wh;return Wh<<=1,(Wh&62914560)===0&&(Wh=4194304),y}function I(y){for(var S=[],T=0;31>T;T++)S.push(y);return S}function k(y,S){y.pendingLanes|=S,S!==268435456&&(y.suspendedLanes=0,y.pingedLanes=0,y.warmLanes=0)}function P(y,S,T,B,H,K){var ge=y.pendingLanes;y.pendingLanes=T,y.suspendedLanes=0,y.pingedLanes=0,y.warmLanes=0,y.expiredLanes&=T,y.entangledLanes&=T,y.errorRecoveryDisabledLanes&=T,y.shellSuspendCounter=0;var De=y.entanglements,Qe=y.expirationTimes,It=y.hiddenUpdates;for(T=ge&~T;0<T;){var Jt=31-xo(T),dn=1<<Jt;De[Jt]=0,Qe[Jt]=-1;var gn=It[Jt];if(gn!==null)for(It[Jt]=null,Jt=0;Jt<gn.length;Jt++){var dr=gn[Jt];dr!==null&&(dr.lane&=-536870913)}T&=~dn}B!==0&&G(y,B,0),K!==0&&H===0&&y.tag!==0&&(y.suspendedLanes|=K&~(ge&~S))}function G(y,S,T){y.pendingLanes|=S,y.suspendedLanes&=~S;var B=31-xo(S);y.entangledLanes|=S,y.entanglements[B]=y.entanglements[B]|1073741824|T&4194218}function W(y,S){var T=y.entangledLanes|=S;for(y=y.entanglements;T;){var B=31-xo(T),H=1<<B;H&S|y[B]&S&&(y[B]|=S),T&=~H}}function X(y){return y&=-y,2<y?8<y?(y&134217727)!==0?32:268435456:8:2}function z(y){if(Vo&&typeof Vo.onCommitFiberRoot=="function")try{Vo.onCommitFiberRoot(As,y,void 0,(y.current.flags&128)===128)}catch{}}function J(y){if(typeof gA=="function"&&pa(y),Vo&&typeof Vo.setStrictMode=="function")try{Vo.setStrictMode(As,y)}catch{}}function Q(y,S){return y===S&&(y!==0||1/y===1/S)||y!==y&&S!==S}function Y(y,S){if(typeof y=="object"&&y!==null){var T=qS.get(y);return T!==void 0?T:(S={value:y,source:S,stack:u(S)},qS.set(y,S),S)}return{value:y,source:S,stack:u(S)}}function q(y,S){jh[qh++]=Tm,jh[qh++]=Xh,Xh=y,Tm=S}function te(y,S,T){ml[gl++]=Pc,ml[gl++]=Uc,ml[gl++]=$f,$f=y;var B=Pc;y=Uc;var H=32-xo(B)-1;B&=~(1<<H),T+=1;var K=32-xo(S)+H;if(30<K){var ge=H-H%5;K=(B&(1<<ge)-1).toString(32),B>>=ge,H-=ge,Pc=1<<32-xo(S)+H|T<<H|B,Uc=K+y}else Pc=1<<K|T<<H|B,Uc=y}function ne(y){y.return!==null&&(q(y,1),te(y,1,0))}function le(y){for(;y===Xh;)Xh=jh[--qh],jh[qh]=null,Tm=jh[--qh],jh[qh]=null;for(;y===$f;)$f=ml[--gl],ml[gl]=null,Uc=ml[--gl],ml[gl]=null,Pc=ml[--gl],ml[gl]=null}function ye(y,S){C(pu,S),C(Mm,y),C(ra,null),y=I2(S),x(ra),C(ra,y)}function ue(){x(ra),x(Mm),x(pu)}function ve(y){y.memoizedState!==null&&C(Kh,y);var S=ra.current,T=wm(S,y.type);S!==T&&(C(Mm,y),C(ra,T))}function xe(y){Mm.current===y&&(x(ra),x(Mm)),Kh.current===y&&(x(Kh),vo?Lc._currentValue=If:Lc._currentValue2=If)}function Pe(y){var S=Error(i(418,""));throw pe(Y(S,y)),P0}function ze(y,S){if(!Da)throw Error(i(175));nA(y.stateNode,y.type,y.memoizedProps,S,y)||Pe(y)}function Ke(y){for(ka=y.return;ka;)switch(ka.tag){case 3:case 27:ma=!0;return;case 5:case 13:ma=!1;return;default:ka=ka.return}}function pt(y){if(!Da||y!==ka)return!1;if(!jr)return Ke(y),jr=!0,!1;var S=!1;if(Ni?y.tag!==3&&y.tag!==27&&(y.tag!==5||gb(y.type)&&!mr(y.type,y.memoizedProps))&&(S=!0):y.tag!==3&&(y.tag!==5||gb(y.type)&&!mr(y.type,y.memoizedProps))&&(S=!0),S&&Oa&&Pe(y),Ke(y),y.tag===13){if(!Da)throw Error(i(316));if(y=y.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));Oa=iA(y)}else Oa=ka?VS(y.stateNode):null;return!0}function dt(){Da&&(Oa=ka=null,jr=!1)}function pe(y){ec===null?ec=[y]:ec.push(y)}function Le(){for(var y=Yh,S=zc=Yh=0;S<y;){var T=tc[S];tc[S++]=null;var B=tc[S];tc[S++]=null;var H=tc[S];tc[S++]=null;var K=tc[S];if(tc[S++]=null,B!==null&&H!==null){var ge=B.pending;ge===null?H.next=H:(H.next=ge.next,ge.next=H),B.pending=H}K!==0&&lt(T,H,K)}}function Ue(y,S,T,B){tc[Yh++]=y,tc[Yh++]=S,tc[Yh++]=T,tc[Yh++]=B,zc|=B,y.lanes|=B,y=y.alternate,y!==null&&(y.lanes|=B)}function Ze(y,S,T,B){return Ue(y,S,T,B),st(y)}function je(y,S){return Ue(y,null,null,S),st(y)}function lt(y,S,T){y.lanes|=T;var B=y.alternate;B!==null&&(B.lanes|=T);for(var H=!1,K=y.return;K!==null;)K.childLanes|=T,B=K.alternate,B!==null&&(B.childLanes|=T),K.tag===22&&(y=K.stateNode,y===null||y._visibility&1||(H=!0)),y=K,K=K.return;H&&S!==null&&y.tag===3&&(K=y.stateNode,H=31-xo(T),K=K.hiddenUpdates,y=K[H],y===null?K[H]=[S]:y.push(S),S.lane=T|536870912)}function st(y){if(50<Lm)throw Lm=0,Ib=null,Error(i(185));for(var S=y.return;S!==null;)y=S,S=y.return;return y.tag===3?y.stateNode:null}function ot(y){y!==Td&&y.next===null&&(Td===null?U0=Td=y:Td=Td.next=y),Pi=!0,Jh||(Jh=!0,Xe(mt))}function Ut(y,S){if(!XS&&Pi){XS=!0;do for(var T=!1,B=U0;B!==null;){if(y!==0){var H=B.pendingLanes;if(H===0)var K=0;else{var ge=B.suspendedLanes,De=B.pingedLanes;K=(1<<31-xo(42|y)+1)-1,K&=H&~(ge&~De),K=K&201326677?K&201326677|1:K?K|2:0}K!==0&&(T=!0,$e(B,K))}else K=$r,K=M(B,B===fi?K:0),(K&3)===0||R(B,K)||(T=!0,$e(B,K));B=B.next}while(T);XS=!1}}function mt(){Pi=Jh=!1;var y=0;Rm!==0&&(B2()&&(y=Rm),Rm=0);for(var S=Ql(),T=null,B=U0;B!==null;){var H=B.next,K=ce(B,S);K===0?(B.next=null,T===null?U0=H:T.next=H,H===null&&(Td=T)):(T=B,(y!==0||(K&3)!==0)&&(Pi=!0)),B=H}Ut(y)}function ce(y,S){for(var T=y.suspendedLanes,B=y.pingedLanes,H=y.expirationTimes,K=y.pendingLanes&-62914561;0<K;){var ge=31-xo(K),De=1<<ge,Qe=H[ge];Qe===-1?((De&T)===0||(De&B)!==0)&&(H[ge]=L(De,S)):Qe<=S&&(y.expiredLanes|=De),K&=~De}if(S=fi,T=$r,T=M(y,y===S?T:0),B=y.callbackNode,T===0||y===S&&_i===2||y.cancelPendingCommit!==null)return B!==null&&B!==null&&xb(B),y.callbackNode=null,y.callbackPriority=0;if((T&3)===0||R(y,T)){if(S=T&-T,S===y.callbackPriority)return S;switch(B!==null&&xb(B),X(T)){case 2:case 8:T=mA;break;case 32:T=Cb;break;case 268435456:T=dk;break;default:T=Cb}return B=re.bind(null,y),T=F0(T,B),y.callbackPriority=S,y.callbackNode=T,S}return B!==null&&B!==null&&xb(B),y.callbackPriority=2,y.callbackNode=null,2}function re(y,S){var T=y.callbackNode;if(Bc()&&y.callbackNode!==T)return null;var B=$r;return B=M(y,y===fi?B:0),B===0?null:(_f(y,B,S),ce(y,Ql()),y.callbackNode!=null&&y.callbackNode===T?re.bind(null,y):null)}function $e(y,S){if(Bc())return null;_f(y,S,!0)}function Xe(y){kS?Ed(function(){(Zr&6)!==0?F0(wb,y):y()}):F0(wb,y)}function at(){return Rm===0&&(Rm=$()),Rm}function et(y,S){if(Nm===null){var T=Nm=[];Zh=0,yl=at(),Qh={status:"pending",value:void 0,then:function(B){T.push(B)}}}return Zh++,S.then(Ft,Ft),S}function Ft(){if(--Zh===0&&Nm!==null){Qh!==null&&(Qh.status="fulfilled");var y=Nm;Nm=null,yl=0,Qh=null;for(var S=0;S<y.length;S++)(0,y[S])()}}function At(y,S){var T=[],B={status:"pending",value:null,reason:null,then:function(H){T.push(H)}};return y.then(function(){B.status="fulfilled",B.value=S;for(var H=0;H<T.length;H++)(0,T[H])(S)},function(H){for(B.status="rejected",B.reason=H,H=0;H<T.length;H++)(0,T[H])(void 0)}),B}function _t(y){y.updateQueue={baseState:y.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xt(y,S){y=y.updateQueue,S.updateQueue===y&&(S.updateQueue={baseState:y.baseState,firstBaseUpdate:y.firstBaseUpdate,lastBaseUpdate:y.lastBaseUpdate,shared:y.shared,callbacks:null})}function yt(y){return{lane:y,tag:0,payload:null,callback:null,next:null}}function Mt(y,S,T){var B=y.updateQueue;if(B===null)return null;if(B=B.shared,(Zr&2)!==0){var H=B.pending;return H===null?S.next=S:(S.next=H.next,H.next=S),B.pending=S,S=st(y),lt(y,null,T),S}return Ue(y,B,S,T),st(y)}function an(y,S,T){if(S=S.updateQueue,S!==null&&(S=S.shared,(T&4194176)!==0)){var B=S.lanes;B&=y.pendingLanes,T|=B,S.lanes=T,W(y,T)}}function tn(y,S){var T=y.updateQueue,B=y.alternate;if(B!==null&&(B=B.updateQueue,T===B)){var H=null,K=null;if(T=T.firstBaseUpdate,T!==null){do{var ge={lane:T.lane,tag:T.tag,payload:T.payload,callback:null,next:null};K===null?H=K=ge:K=K.next=ge,T=T.next}while(T!==null);K===null?H=K=S:K=K.next=S}else H=K=S;T={baseState:B.baseState,firstBaseUpdate:H,lastBaseUpdate:K,shared:B.shared,callbacks:B.callbacks},y.updateQueue=T;return}y=T.lastBaseUpdate,y===null?T.firstBaseUpdate=S:y.next=S,T.lastBaseUpdate=S}function zt(){if(ep){var y=Qh;if(y!==null)throw y}}function hn(y,S,T,B){ep=!1;var H=y.updateQueue;Md=!1;var K=H.firstBaseUpdate,ge=H.lastBaseUpdate,De=H.shared.pending;if(De!==null){H.shared.pending=null;var Qe=De,It=Qe.next;Qe.next=null,ge===null?K=It:ge.next=It,ge=Qe;var Jt=y.alternate;Jt!==null&&(Jt=Jt.updateQueue,De=Jt.lastBaseUpdate,De!==ge&&(De===null?Jt.firstBaseUpdate=It:De.next=It,Jt.lastBaseUpdate=Qe))}if(K!==null){var dn=H.baseState;ge=0,Jt=It=Qe=null,De=K;do{var gn=De.lane&-536870913,dr=gn!==De.lane;if(dr?($r&gn)===gn:(B&gn)===gn){gn!==0&&gn===yl&&(ep=!0),Jt!==null&&(Jt=Jt.next={lane:0,tag:De.tag,payload:De.payload,callback:null,next:null});e:{var El=y,Wf=De;gn=S;var jf=T;switch(Wf.tag){case 1:if(El=Wf.payload,typeof El=="function"){dn=El.call(jf,dn,gn);break e}dn=El;break e;case 3:El.flags=El.flags&-65537|128;case 0:if(El=Wf.payload,gn=typeof El=="function"?El.call(jf,dn,gn):El,gn==null)break e;dn=ib({},dn,gn);break e;case 2:Md=!0}}gn=De.callback,gn!==null&&(y.flags|=64,dr&&(y.flags|=8192),dr=H.callbacks,dr===null?H.callbacks=[gn]:dr.push(gn))}else dr={lane:gn,tag:De.tag,payload:De.payload,callback:De.callback,next:null},Jt===null?(It=Jt=dr,Qe=dn):Jt=Jt.next=dr,ge|=gn;if(De=De.next,De===null){if(De=H.shared.pending,De===null)break;dr=De,De=dr.next,dr.next=null,H.lastBaseUpdate=dr,H.shared.pending=null}}while(!0);Jt===null&&(Qe=dn),H.baseState=Qe,H.firstBaseUpdate=It,H.lastBaseUpdate=Jt,K===null&&(H.shared.lanes=0),Cl|=ge,y.lanes=ge,y.memoizedState=dn}}function Te(y,S){if(typeof y!="function")throw Error(i(191,y));y.call(S)}function qe(y,S){var T=y.callbacks;if(T!==null)for(y.callbacks=null,y=0;y<T.length;y++)Te(T[y],S)}function $t(y,S){if(Go(y,S))return!0;if(typeof y!="object"||y===null||typeof S!="object"||S===null)return!1;var T=Object.keys(y),B=Object.keys(S);if(T.length!==B.length)return!1;for(B=0;B<T.length;B++){var H=T[B];if(!mu.call(S,H)||!Go(y[H],S[H]))return!1}return!0}function en(y){return y=y.status,y==="fulfilled"||y==="rejected"}function Vt(){}function kt(y,S,T){switch(T=y[T],T===void 0?y.push(S):T!==S&&(S.then(Vt,Vt),S=T),S.status){case"fulfilled":return S.value;case"rejected":throw y=S.reason,y===Im?Error(i(483)):y;default:if(typeof S.status=="string")S.then(Vt,Vt);else{if(y=fi,y!==null&&100<y.shellSuspendCounter)throw Error(i(482));y=S,y.status="pending",y.then(function(B){if(S.status==="pending"){var H=S;H.status="fulfilled",H.value=B}},function(B){if(S.status==="pending"){var H=S;H.status="rejected",H.reason=B}})}switch(S.status){case"fulfilled":return S.value;case"rejected":throw y=S.reason,y===Im?Error(i(483)):y}throw Lf=S,Im}}function un(){if(Lf===null)throw Error(i(459));var y=Lf;return Lf=null,y}function In(y){var S=Pf;return Pf+=1,Ff===null&&(Ff=[]),kt(Ff,y,S)}function Tr(y,S){S=S.props.ref,y.ref=S!==void 0?S:null}function lr(y,S){throw S.$$typeof===ik?Error(i(525)):(y=Object.prototype.toString.call(S),Error(i(31,y==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":y)))}function Qs(y){var S=y._init;return S(y._payload)}function es(y){function S(ut,Ge){if(y){var bt=ut.deletions;bt===null?(ut.deletions=[Ge],ut.flags|=16):bt.push(Ge)}}function T(ut,Ge){if(!y)return null;for(;Ge!==null;)S(ut,Ge),Ge=Ge.sibling;return null}function B(ut){for(var Ge=new Map;ut!==null;)ut.key!==null?Ge.set(ut.key,ut):Ge.set(ut.index,ut),ut=ut.sibling;return Ge}function H(ut,Ge){return ut=Kl(ut,Ge),ut.index=0,ut.sibling=null,ut}function K(ut,Ge,bt){return ut.index=bt,y?(bt=ut.alternate,bt!==null?(bt=bt.index,bt<Ge?(ut.flags|=33554434,Ge):bt):(ut.flags|=33554434,Ge)):(ut.flags|=1048576,Ge)}function ge(ut){return y&&ut.alternate===null&&(ut.flags|=33554434),ut}function De(ut,Ge,bt,Kt){return Ge===null||Ge.tag!==6?(Ge=nb(bt,ut.mode,Kt),Ge.return=ut,Ge):(Ge=H(Ge,bt),Ge.return=ut,Ge)}function Qe(ut,Ge,bt,Kt){var Dn=bt.type;return Dn===Rf?Jt(ut,Ge,bt.props.children,Kt,bt.key):Ge!==null&&(Ge.elementType===Dn||typeof Dn=="object"&&Dn!==null&&Dn.$$typeof===Jl&&Qs(Dn)===Ge.type)?(Ge=H(Ge,bt.props),Tr(Ge,bt),Ge.return=ut,Ge):(Ge=uu(bt.type,bt.key,bt.props,null,ut.mode,Kt),Tr(Ge,bt),Ge.return=ut,Ge)}function It(ut,Ge,bt,Kt){return Ge===null||Ge.tag!==4||Ge.stateNode.containerInfo!==bt.containerInfo||Ge.stateNode.implementation!==bt.implementation?(Ge=ES(bt,ut.mode,Kt),Ge.return=ut,Ge):(Ge=H(Ge,bt.children||[]),Ge.return=ut,Ge)}function Jt(ut,Ge,bt,Kt,Dn){return Ge===null||Ge.tag!==7?(Ge=ps(bt,ut.mode,Kt,Dn),Ge.return=ut,Ge):(Ge=H(Ge,bt),Ge.return=ut,Ge)}function dn(ut,Ge,bt){if(typeof Ge=="string"&&Ge!==""||typeof Ge=="number"||typeof Ge=="bigint")return Ge=nb(""+Ge,ut.mode,bt),Ge.return=ut,Ge;if(typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case T0:return bt=uu(Ge.type,Ge.key,Ge.props,null,ut.mode,bt),Tr(bt,Ge),bt.return=ut,bt;case Yl:return Ge=ES(Ge,ut.mode,bt),Ge.return=ut,Ge;case Jl:var Kt=Ge._init;return Ge=Kt(Ge._payload),dn(ut,Ge,bt)}if(bm(Ge)||s(Ge))return Ge=ps(Ge,ut.mode,bt,null),Ge.return=ut,Ge;if(typeof Ge.then=="function")return dn(ut,In(Ge),bt);if(Ge.$$typeof===$c)return dn(ut,He(ut,Ge),bt);lr(ut,Ge)}return null}function gn(ut,Ge,bt,Kt){var Dn=Ge!==null?Ge.key:null;if(typeof bt=="string"&&bt!==""||typeof bt=="number"||typeof bt=="bigint")return Dn!==null?null:De(ut,Ge,""+bt,Kt);if(typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case T0:return bt.key===Dn?Qe(ut,Ge,bt,Kt):null;case Yl:return bt.key===Dn?It(ut,Ge,bt,Kt):null;case Jl:return Dn=bt._init,bt=Dn(bt._payload),gn(ut,Ge,bt,Kt)}if(bm(bt)||s(bt))return Dn!==null?null:Jt(ut,Ge,bt,Kt,null);if(typeof bt.then=="function")return gn(ut,Ge,In(bt),Kt);if(bt.$$typeof===$c)return gn(ut,Ge,He(ut,bt),Kt);lr(ut,bt)}return null}function dr(ut,Ge,bt,Kt,Dn){if(typeof Kt=="string"&&Kt!==""||typeof Kt=="number"||typeof Kt=="bigint")return ut=ut.get(bt)||null,De(Ge,ut,""+Kt,Dn);if(typeof Kt=="object"&&Kt!==null){switch(Kt.$$typeof){case T0:return ut=ut.get(Kt.key===null?bt:Kt.key)||null,Qe(Ge,ut,Kt,Dn);case Yl:return ut=ut.get(Kt.key===null?bt:Kt.key)||null,It(Ge,ut,Kt,Dn);case Jl:var Ji=Kt._init;return Kt=Ji(Kt._payload),dr(ut,Ge,bt,Kt,Dn)}if(bm(Kt)||s(Kt))return ut=ut.get(bt)||null,Jt(Ge,ut,Kt,Dn,null);if(typeof Kt.then=="function")return dr(ut,Ge,bt,In(Kt),Dn);if(Kt.$$typeof===$c)return dr(ut,Ge,bt,He(Ge,Kt),Dn);lr(Ge,Kt)}return null}function El(ut,Ge,bt,Kt){for(var Dn=null,Ji=null,er=Ge,ri=Ge=0,Ts=null;er!==null&&ri<bt.length;ri++){er.index>ri?(Ts=er,er=null):Ts=er.sibling;var Or=gn(ut,er,bt[ri],Kt);if(Or===null){er===null&&(er=Ts);break}y&&er&&Or.alternate===null&&S(ut,er),Ge=K(Or,Ge,ri),Ji===null?Dn=Or:Ji.sibling=Or,Ji=Or,er=Ts}if(ri===bt.length)return T(ut,er),jr&&q(ut,ri),Dn;if(er===null){for(;ri<bt.length;ri++)er=dn(ut,bt[ri],Kt),er!==null&&(Ge=K(er,Ge,ri),Ji===null?Dn=er:Ji.sibling=er,Ji=er);return jr&&q(ut,ri),Dn}for(er=B(er);ri<bt.length;ri++)Ts=dr(er,ut,ri,bt[ri],Kt),Ts!==null&&(y&&Ts.alternate!==null&&er.delete(Ts.key===null?ri:Ts.key),Ge=K(Ts,Ge,ri),Ji===null?Dn=Ts:Ji.sibling=Ts,Ji=Ts);return y&&er.forEach(function(Cu){return S(ut,Cu)}),jr&&q(ut,ri),Dn}function Wf(ut,Ge,bt,Kt){if(bt==null)throw Error(i(151));for(var Dn=null,Ji=null,er=Ge,ri=Ge=0,Ts=null,Or=bt.next();er!==null&&!Or.done;ri++,Or=bt.next()){er.index>ri?(Ts=er,er=null):Ts=er.sibling;var Cu=gn(ut,er,Or.value,Kt);if(Cu===null){er===null&&(er=Ts);break}y&&er&&Cu.alternate===null&&S(ut,er),Ge=K(Cu,Ge,ri),Ji===null?Dn=Cu:Ji.sibling=Cu,Ji=Cu,er=Ts}if(Or.done)return T(ut,er),jr&&q(ut,ri),Dn;if(er===null){for(;!Or.done;ri++,Or=bt.next())Or=dn(ut,Or.value,Kt),Or!==null&&(Ge=K(Or,Ge,ri),Ji===null?Dn=Or:Ji.sibling=Or,Ji=Or);return jr&&q(ut,ri),Dn}for(er=B(er);!Or.done;ri++,Or=bt.next())Or=dr(er,ut,ri,Or.value,Kt),Or!==null&&(y&&Or.alternate!==null&&er.delete(Or.key===null?ri:Or.key),Ge=K(Or,Ge,ri),Ji===null?Dn=Or:Ji.sibling=Or,Ji=Or);return y&&er.forEach(function(Db){return S(ut,Db)}),jr&&q(ut,ri),Dn}function jf(ut,Ge,bt,Kt){if(typeof bt=="object"&&bt!==null&&bt.type===Rf&&bt.key===null&&(bt=bt.props.children),typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case T0:e:{for(var Dn=bt.key;Ge!==null;){if(Ge.key===Dn){if(Dn=bt.type,Dn===Rf){if(Ge.tag===7){T(ut,Ge.sibling),Kt=H(Ge,bt.props.children),Kt.return=ut,ut=Kt;break e}}else if(Ge.elementType===Dn||typeof Dn=="object"&&Dn!==null&&Dn.$$typeof===Jl&&Qs(Dn)===Ge.type){T(ut,Ge.sibling),Kt=H(Ge,bt.props),Tr(Kt,bt),Kt.return=ut,ut=Kt;break e}T(ut,Ge);break}else S(ut,Ge);Ge=Ge.sibling}bt.type===Rf?(Kt=ps(bt.props.children,ut.mode,Kt,bt.key),Kt.return=ut,ut=Kt):(Kt=uu(bt.type,bt.key,bt.props,null,ut.mode,Kt),Tr(Kt,bt),Kt.return=ut,ut=Kt)}return ge(ut);case Yl:e:{for(Dn=bt.key;Ge!==null;){if(Ge.key===Dn)if(Ge.tag===4&&Ge.stateNode.containerInfo===bt.containerInfo&&Ge.stateNode.implementation===bt.implementation){T(ut,Ge.sibling),Kt=H(Ge,bt.children||[]),Kt.return=ut,ut=Kt;break e}else{T(ut,Ge);break}else S(ut,Ge);Ge=Ge.sibling}Kt=ES(bt,ut.mode,Kt),Kt.return=ut,ut=Kt}return ge(ut);case Jl:return Dn=bt._init,bt=Dn(bt._payload),jf(ut,Ge,bt,Kt)}if(bm(bt))return El(ut,Ge,bt,Kt);if(s(bt)){if(Dn=s(bt),typeof Dn!="function")throw Error(i(150));return bt=Dn.call(bt),Wf(ut,Ge,bt,Kt)}if(typeof bt.then=="function")return jf(ut,Ge,In(bt),Kt);if(bt.$$typeof===$c)return jf(ut,Ge,He(ut,bt),Kt);lr(ut,bt)}return typeof bt=="string"&&bt!==""||typeof bt=="number"||typeof bt=="bigint"?(bt=""+bt,Ge!==null&&Ge.tag===6?(T(ut,Ge.sibling),Kt=H(Ge,bt),Kt.return=ut,ut=Kt):(T(ut,Ge),Kt=nb(bt,ut.mode,Kt),Kt.return=ut,ut=Kt),ge(ut)):T(ut,Ge)}return function(ut,Ge,bt,Kt){try{Pf=0;var Dn=jf(ut,Ge,bt,Kt);return Ff=null,Dn}catch(er){if(er===Im)throw er;var Ji=t(29,er,null,ut.mode);return Ji.lanes=Kt,Ji.return=ut,Ji}finally{}}}function pi(y,S){y=Xa,C(Dm,y),C(Ui,S),Xa=y|S.baseLanes}function Si(){C(Dm,Xa),C(Ui,Ui.current)}function Ri(){Xa=Dm.current,x(Ui),x(Dm)}function as(y){var S=y.alternate;C(ia,ia.current&1),C(vl,y),Ii===null&&(S===null||Ui.current!==null||S.memoizedState!==null)&&(Ii=y)}function $o(y){if(y.tag===22){if(C(ia,ia.current),C(vl,y),Ii===null){var S=y.alternate;S!==null&&S.memoizedState!==null&&(Ii=y)}}else vr()}function vr(){C(ia,ia.current),C(vl,vl.current)}function Nn(y){x(vl),Ii===y&&(Ii=null),x(ia)}function $s(y){for(var S=y;S!==null;){if(S.tag===13){var T=S.memoizedState;if(T!==null&&(T=T.dehydrated,T===null||hb(T)||pb(T)))return S}else if(S.tag===19&&S.memoizedProps.revealOrder!==void 0){if((S.flags&128)!==0)return S}else if(S.child!==null){S.child.return=S,S=S.child;continue}if(S===y)break;for(;S.sibling===null;){if(S.return===null||S.return===y)return null;S=S.return}S.sibling.return=S.return,S=S.sibling}return null}function ci(){throw Error(i(321))}function ae(y,S){if(S===null)return!1;for(var T=0;T<S.length&&T<y.length;T++)if(!Go(y[T],S[T]))return!1;return!0}function me(y,S,T,B,H,K){return Rd=K,wr=S,S.memoizedState=null,S.updateQueue=null,S.lanes=0,Qn.H=y===null||y.memoizedState===null?Hf:So,zf=!1,K=T(B,H),zf=!1,tp&&(K=nt(S,T,B,H)),Oe(y),K}function Oe(y){Qn.H=ms;var S=Vn!==null&&Vn.next!==null;if(Rd=0,Jr=Vn=wr=null,nc=!1,np=0,ga=null,S)throw Error(i(300));y===null||Di||(y=y.dependencies,y!==null&&we(y)&&(Di=!0))}function nt(y,S,T,B){wr=y;var H=0;do{if(tp&&(ga=null),np=0,tp=!1,25<=H)throw Error(i(301));if(H+=1,Jr=Vn=null,y.updateQueue!=null){var K=y.updateQueue;K.lastEffect=null,K.events=null,K.stores=null,K.memoCache!=null&&(K.memoCache.index=0)}Qn.H=bl,K=S(T,B)}while(tp);return K}function ct(){var y=Qn.H,S=y.useState()[0];return S=typeof S.then=="function"?Me(S):S,y=y.useState()[0],(Vn!==null?Vn.memoizedState:null)!==y&&(wr.flags|=1024),S}function St(){var y=_b!==0;return _b=0,y}function jt(y,S,T){S.updateQueue=y.updateQueue,S.flags&=-2053,y.lanes&=~T}function se(y){if(nc){for(y=y.memoizedState;y!==null;){var S=y.queue;S!==null&&(S.pending=null),y=y.next}nc=!1}Rd=0,Jr=Vn=wr=null,tp=!1,np=_b=0,ga=null}function Se(){var y={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jr===null?wr.memoizedState=Jr=y:Jr=Jr.next=y,Jr}function Ae(){if(Vn===null){var y=wr.alternate;y=y!==null?y.memoizedState:null}else y=Vn.next;var S=Jr===null?wr.memoizedState:Jr.next;if(S!==null)Jr=S,Vn=y;else{if(y===null)throw wr.alternate===null?Error(i(467)):Error(i(310));Vn=y,y={memoizedState:Vn.memoizedState,baseState:Vn.baseState,baseQueue:Vn.baseQueue,queue:Vn.queue,next:null},Jr===null?wr.memoizedState=Jr=y:Jr=Jr.next=y}return Jr}function Me(y){var S=np;return np+=1,ga===null&&(ga=[]),y=kt(ga,y,S),S=wr,(Jr===null?S.memoizedState:Jr.next)===null&&(S=S.alternate,Qn.H=S===null||S.memoizedState===null?Hf:So),y}function _e(y){if(y!==null&&typeof y=="object"){if(typeof y.then=="function")return Me(y);if(y.$$typeof===$c)return Ce(y)}throw Error(i(438,String(y)))}function Nt(y){var S=null,T=wr.updateQueue;if(T!==null&&(S=T.memoCache),S==null){var B=wr.alternate;B!==null&&(B=B.updateQueue,B!==null&&(B=B.memoCache,B!=null&&(S={data:B.data.map(function(H){return H.slice()}),index:0})))}if(S==null&&(S={data:[],index:0}),T===null&&(T=Eb(),wr.updateQueue=T),T.memoCache=S,T=S.data[S.index],T===void 0)for(T=S.data[S.index]=Array(y),B=0;B<y;B++)T[B]=N2;return S.index++,T}function vt(y,S){return typeof S=="function"?S(y):S}function Tt(y){var S=Ae();return Et(S,Vn,y)}function Et(y,S,T){var B=y.queue;if(B===null)throw Error(i(311));B.lastRenderedReducer=T;var H=y.baseQueue,K=B.pending;if(K!==null){if(H!==null){var ge=H.next;H.next=K.next,K.next=ge}S.baseQueue=H=K,B.pending=null}if(K=y.baseState,H===null)y.memoizedState=K;else{S=H.next;var De=ge=null,Qe=null,It=S,Jt=!1;do{var dn=It.lane&-536870913;if(dn!==It.lane?($r&dn)===dn:(Rd&dn)===dn){var gn=It.revertLane;if(gn===0)Qe!==null&&(Qe=Qe.next={lane:0,revertLane:0,action:It.action,hasEagerState:It.hasEagerState,eagerState:It.eagerState,next:null}),dn===yl&&(Jt=!0);else if((Rd&gn)===gn){It=It.next,gn===yl&&(Jt=!0);continue}else dn={lane:0,revertLane:It.revertLane,action:It.action,hasEagerState:It.hasEagerState,eagerState:It.eagerState,next:null},Qe===null?(De=Qe=dn,ge=K):Qe=Qe.next=dn,wr.lanes|=gn,Cl|=gn;dn=It.action,zf&&T(K,dn),K=It.hasEagerState?It.eagerState:T(K,dn)}else gn={lane:dn,revertLane:It.revertLane,action:It.action,hasEagerState:It.hasEagerState,eagerState:It.eagerState,next:null},Qe===null?(De=Qe=gn,ge=K):Qe=Qe.next=gn,wr.lanes|=dn,Cl|=dn;It=It.next}while(It!==null&&It!==S);if(Qe===null?ge=K:Qe.next=De,!Go(K,y.memoizedState)&&(Di=!0,Jt&&(T=Qh,T!==null)))throw T;y.memoizedState=K,y.baseState=ge,y.baseQueue=Qe,B.lastRenderedState=K}return H===null&&(B.lanes=0),[y.memoizedState,B.dispatch]}function qt(y){var S=Ae(),T=S.queue;if(T===null)throw Error(i(311));T.lastRenderedReducer=y;var B=T.dispatch,H=T.pending,K=S.memoizedState;if(H!==null){T.pending=null;var ge=H=H.next;do K=y(K,ge.action),ge=ge.next;while(ge!==H);Go(K,S.memoizedState)||(Di=!0),S.memoizedState=K,S.baseQueue===null&&(S.baseState=K),T.lastRenderedState=K}return[K,B]}function Qt(y,S,T){var B=wr,H=Ae(),K=jr;if(K){if(T===void 0)throw Error(i(407));T=T()}else T=S();var ge=!Go((Vn||H).memoizedState,T);if(ge&&(H.memoizedState=T,Di=!0),H=H.queue,sd(Hn.bind(null,B,H,y),[y]),H.getSnapshot!==S||ge||Jr!==null&&Jr.memoizedState.tag&1){if(B.flags|=2048,hs(9,bn.bind(null,B,H,T,S),{destroy:void 0},null),fi===null)throw Error(i(349));K||(Rd&60)!==0||Wt(B,S,T)}return T}function Wt(y,S,T){y.flags|=16384,y={getSnapshot:S,value:T},S=wr.updateQueue,S===null?(S=Eb(),wr.updateQueue=S,S.stores=[y]):(T=S.stores,T===null?S.stores=[y]:T.push(y))}function bn(y,S,T,B){S.value=T,S.getSnapshot=B,On(S)&&or(y)}function Hn(y,S,T){return T(function(){On(S)&&or(y)})}function On(y){var S=y.getSnapshot;y=y.value;try{var T=S();return!Go(y,T)}catch{return!0}}function or(y){var S=je(y,2);S!==null&&ha(S,y,2)}function yn(y){var S=Se();if(typeof y=="function"){var T=y;if(y=T(),zf){J(!0);try{T()}finally{J(!1)}}}return S.memoizedState=S.baseState=y,S.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vt,lastRenderedState:y},S}function ln(y,S,T,B){return y.baseState=T,Et(y,Vn,typeof B=="function"?B:vt)}function Rr(y,S,T,B,H){if(ld(y))throw Error(i(485));if(y=S.action,y!==null){var K={payload:H,action:y,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ge){K.listeners.push(ge)}};Qn.T!==null?T(!0):K.isTransition=!1,B(K),T=S.pending,T===null?(K.next=S.pending=K,Jn(S,K)):(K.next=T.next,S.pending=T.next=K)}}function Jn(y,S){var T=S.action,B=S.payload,H=y.state;if(S.isTransition){var K=Qn.T,ge={};Qn.T=ge;try{var De=T(H,B),Qe=Qn.S;Qe!==null&&Qe(ge,De),Kr(y,S,De)}catch(It){jn(y,S,It)}finally{Qn.T=K}}else try{K=T(H,B),Kr(y,S,K)}catch(It){jn(y,S,It)}}function Kr(y,S,T){T!==null&&typeof T=="object"&&typeof T.then=="function"?T.then(function(B){cr(y,S,B)},function(B){return jn(y,S,B)}):cr(y,S,T)}function cr(y,S,T){S.status="fulfilled",S.value=T,Zn(S),y.state=T,S=y.pending,S!==null&&(T=S.next,T===S?y.pending=null:(T=T.next,S.next=T,Jn(y,T)))}function jn(y,S,T){var B=y.pending;if(y.pending=null,B!==null){B=B.next;do S.status="rejected",S.reason=T,Zn(S),S=S.next;while(S!==B)}y.action=null}function Zn(y){y=y.listeners;for(var S=0;S<y.length;S++)(0,y[S])()}function Mn(y,S){return S}function Wr(y,S){if(jr){var T=fi.formState;if(T!==null){e:{var B=wr;if(jr){if(Oa){var H=HS(Oa,ma);if(H){Oa=VS(H),B=Z2(H);break e}}Pe(B)}B=!1}B&&(S=T[0])}}T=Se(),T.memoizedState=T.baseState=S,B={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mn,lastRenderedState:S},T.queue=B,T=i0.bind(null,wr,B),B.dispatch=T,B=yn(!1);var K=od.bind(null,wr,!1,B.queue);return B=Se(),H={state:S,dispatch:null,action:y,pending:null},B.queue=H,T=Rr.bind(null,wr,H,K,T),H.dispatch=T,B.memoizedState=y,[S,T,!1]}function wi(y){var S=Ae();return Sr(S,Vn,y)}function Sr(y,S,T){S=Et(y,S,Mn)[0],y=Tt(vt)[0],S=typeof S=="object"&&S!==null&&typeof S.then=="function"?Me(S):S;var B=Ae(),H=B.queue,K=H.dispatch;return T!==B.memoizedState&&(wr.flags|=2048,hs(9,Ci.bind(null,H,T),{destroy:void 0},null)),[S,K,y]}function Ci(y,S){y.action=S}function id(y){var S=Ae(),T=Vn;if(T!==null)return Sr(S,T,y);Ae(),S=S.memoizedState,T=Ae();var B=T.queue.dispatch;return T.memoizedState=y,[S,B,!1]}function hs(y,S,T,B){return y={tag:y,create:S,inst:T,deps:B,next:null},S=wr.updateQueue,S===null&&(S=Eb(),wr.updateQueue=S),T=S.lastEffect,T===null?S.lastEffect=y.next=y:(B=T.next,T.next=y,y.next=B,S.lastEffect=y),y}function t0(){return Ae().memoizedState}function au(y,S,T,B){var H=Se();wr.flags|=y,H.memoizedState=hs(1|S,T,{destroy:void 0},B===void 0?null:B)}function yf(y,S,T,B){var H=Ae();B=B===void 0?null:B;var K=H.memoizedState.inst;Vn!==null&&B!==null&&ae(B,Vn.memoizedState.deps)?H.memoizedState=hs(S,T,K,B):(wr.flags|=y,H.memoizedState=hs(1|S,T,K,B))}function Oh(y,S){au(8390656,8,y,S)}function sd(y,S){yf(2048,8,y,S)}function Fv(y,S){return yf(4,2,y,S)}function Bh(y,S){return yf(4,4,y,S)}function im(y,S){if(typeof S=="function"){y=y();var T=S(y);return function(){typeof T=="function"?T():S(null)}}if(S!=null)return y=y(),S.current=y,function(){S.current=null}}function sm(y,S,T){T=T!=null?T.concat([y]):null,yf(4,4,im.bind(null,S,y),T)}function Wl(){}function ll(y,S){var T=Ae();S=S===void 0?null:S;var B=T.memoizedState;return S!==null&&ae(S,B[1])?B[0]:(T.memoizedState=[y,S],y)}function n0(y,S){var T=Ae();S=S===void 0?null:S;var B=T.memoizedState;if(S!==null&&ae(S,B[1]))return B[0];if(B=y(),zf){J(!0);try{y()}finally{J(!1)}}return T.memoizedState=[B,S],B}function $h(y,S,T){return T===void 0||(Rd&1073741824)!==0?y.memoizedState=S:(y.memoizedState=T,y=bS(),wr.lanes|=y,Cl|=y,T)}function r0(y,S,T,B){return Go(T,S)?T:Ui.current!==null?(y=$h(y,T,B),Go(y,S)||(Di=!0),y):(Rd&42)===0?(Di=!0,y.memoizedState=T):(y=bS(),wr.lanes|=y,Cl|=y,S)}function vf(y,S,T,B,H){var K=_d();ja(K!==0&&8>K?K:8);var ge=Qn.T,De={};Qn.T=De,od(y,!1,S,T);try{var Qe=H(),It=Qn.S;if(It!==null&&It(De,Qe),Qe!==null&&typeof Qe=="object"&&typeof Qe.then=="function"){var Jt=At(Qe,B);Ic(y,S,Jt,Cs(y))}else Ic(y,S,B,Cs(y))}catch(dn){Ic(y,S,{then:function(){},status:"rejected",reason:dn},Cs())}finally{ja(K),Qn.T=ge}}function Lo(y){var S=y.memoizedState;if(S!==null)return S;S={memoizedState:If,baseState:If,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vt,lastRenderedState:If},next:null};var T={};return S.next={memoizedState:T,baseState:T,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vt,lastRenderedState:T},next:null},y.memoizedState=S,y=y.alternate,y!==null&&(y.memoizedState=S),S}function bf(){return Ce(Lc)}function ad(){return Ae().memoizedState}function fo(){return Ae().memoizedState}function ho(y){for(var S=y.return;S!==null;){switch(S.tag){case 24:case 3:var T=Cs();y=yt(T);var B=Mt(S,y,T);B!==null&&(ha(B,S,T),an(B,S,T)),S={cache:Ht()},y.payload=S;return}S=S.return}}function am(y,S,T){var B=Cs();T={lane:B,revertLane:0,action:T,hasEagerState:!1,eagerState:null,next:null},ld(y)?ea(S,T):(T=Ze(y,S,T,B),T!==null&&(ha(T,y,B),po(T,S,B)))}function i0(y,S,T){var B=Cs();Ic(y,S,T,B)}function Ic(y,S,T,B){var H={lane:B,revertLane:0,action:T,hasEagerState:!1,eagerState:null,next:null};if(ld(y))ea(S,H);else{var K=y.alternate;if(y.lanes===0&&(K===null||K.lanes===0)&&(K=S.lastRenderedReducer,K!==null))try{var ge=S.lastRenderedState,De=K(ge,T);if(H.hasEagerState=!0,H.eagerState=De,Go(De,ge))return Ue(y,S,H,0),fi===null&&Le(),!1}catch{}finally{}if(T=Ze(y,S,H,B),T!==null)return ha(T,y,B),po(T,S,B),!0}return!1}function od(y,S,T,B){if(B={lane:2,revertLane:at(),action:B,hasEagerState:!1,eagerState:null,next:null},ld(y)){if(S)throw Error(i(479))}else S=Ze(y,T,B,2),S!==null&&ha(S,y,2)}function ld(y){var S=y.alternate;return y===wr||S!==null&&S===wr}function ea(y,S){tp=nc=!0;var T=y.pending;T===null?S.next=S:(S.next=T.next,T.next=S),y.pending=S}function po(y,S,T){if((T&4194176)!==0){var B=S.lanes;B&=y.pendingLanes,T|=B,S.lanes=T,W(y,T)}}function cd(y,S,T,B){S=y.memoizedState,T=T(B,S),T=T==null?S:ib({},S,T),y.memoizedState=T,y.lanes===0&&(y.updateQueue.baseState=T)}function ou(y,S,T,B,H,K,ge){return y=y.stateNode,typeof y.shouldComponentUpdate=="function"?y.shouldComponentUpdate(B,K,ge):S.prototype&&S.prototype.isPureReactComponent?!$t(T,B)||!$t(H,K):!0}function Pv(y,S,T,B){y=S.state,typeof S.componentWillReceiveProps=="function"&&S.componentWillReceiveProps(T,B),typeof S.UNSAFE_componentWillReceiveProps=="function"&&S.UNSAFE_componentWillReceiveProps(T,B),S.state!==y&&yu.enqueueReplaceState(S,S.state,null)}function jl(y,S){var T=S;if("ref"in S){T={};for(var B in S)B!=="ref"&&(T[B]=S[B])}if(y=y.defaultProps){T===S&&(T=ib({},T));for(var H in y)T[H]===void 0&&(T[H]=y[H])}return T}function cl(y,S){try{var T=y.onUncaughtError;T(S.value,{componentStack:S.stack})}catch(B){setTimeout(function(){throw B})}}function ud(y,S,T){try{var B=y.onCaughtError;B(T.value,{componentStack:T.stack,errorBoundary:S.tag===1?S.stateNode:null})}catch(H){setTimeout(function(){throw H})}}function dd(y,S,T){return T=yt(T),T.tag=3,T.payload={element:null},T.callback=function(){cl(y,S)},T}function s0(y){return y=yt(y),y.tag=3,y}function a0(y,S,T,B){var H=T.type.getDerivedStateFromError;if(typeof H=="function"){var K=B.value;y.payload=function(){return H(K)},y.callback=function(){ud(S,T,B)}}var ge=T.stateNode;ge!==null&&typeof ge.componentDidCatch=="function"&&(y.callback=function(){ud(S,T,B),typeof H!="function"&&(Vf===null?Vf=new Set([this]):Vf.add(this));var De=B.stack;this.componentDidCatch(B.value,{componentStack:De!==null?De:""})})}function om(y,S,T,B,H){if(T.flags|=32768,B!==null&&typeof B=="object"&&typeof B.then=="function"){if(S=T.alternate,S!==null&&oe(S,T,H,!0),T=vl.current,T!==null){switch(T.tag){case 13:return Ii===null?vd():T.alternate===null&&ki===0&&(ki=3),T.flags&=-257,T.flags|=65536,T.lanes=H,B===H0?T.flags|=16384:(S=T.updateQueue,S===null?T.updateQueue=new Set([B]):S.add(B),zh(y,B,H)),!1;case 22:return T.flags|=65536,B===H0?T.flags|=16384:(S=T.updateQueue,S===null?(S={transitions:null,markerInstances:null,retryQueue:new Set([B])},T.updateQueue=S):(T=S.retryQueue,T===null?S.retryQueue=new Set([B]):T.add(B)),zh(y,B,H)),!1}throw Error(i(435,T.tag))}return zh(y,B,H),vd(),!1}if(jr)return S=vl.current,S!==null?((S.flags&65536)===0&&(S.flags|=256),S.flags|=65536,S.lanes=H,B!==P0&&(y=Error(i(422),{cause:B}),pe(Y(y,T)))):(B!==P0&&(S=Error(i(423),{cause:B}),pe(Y(S,T))),y=y.current.alternate,y.flags|=65536,H&=-H,y.lanes|=H,B=Y(B,T),H=dd(y.stateNode,B,H),tn(y,H),ki!==4&&(ki=2)),!1;var K=Error(i(520),{cause:B});if(K=Y(K,T),ip===null?ip=[K]:ip.push(K),ki!==4&&(ki=2),S===null)return!0;B=Y(B,T),T=S;do{switch(T.tag){case 3:return T.flags|=65536,y=H&-H,T.lanes|=y,y=dd(T.stateNode,B,y),tn(T,y),!1;case 1:if(S=T.type,K=T.stateNode,(T.flags&128)===0&&(typeof S.getDerivedStateFromError=="function"||K!==null&&typeof K.componentDidCatch=="function"&&(Vf===null||!Vf.has(K))))return T.flags|=65536,H&=-H,T.lanes|=H,H=s0(H),a0(H,y,T,B),tn(T,H),!1}T=T.return}while(T!==null);return!1}function Ls(y,S,T,B){S.child=y===null?gu(S,null,T,B):Uf(S,y.child,T,B)}function lm(y,S,T,B,H){T=T.render;var K=S.ref;if("ref"in B){var ge={};for(var De in B)De!=="ref"&&(ge[De]=B[De])}else ge=B;return Ee(S),B=me(y,S,T,ge,K,H),De=St(),y!==null&&!Di?(jt(y,S,H),Dc(y,S,H)):(jr&&De&&ne(S),S.flags|=1,Ls(y,S,B,H),S.child)}function o0(y,S,T,B,H){if(y===null){var K=T.type;return typeof K=="function"&&!C0(K)&&K.defaultProps===void 0&&T.compare===null?(S.tag=15,S.type=K,l0(y,S,K,B,H)):(y=uu(T.type,null,B,S,S.mode,H),y.ref=S.ref,y.return=S,S.child=y)}if(K=y.child,!p0(y,H)){var ge=K.memoizedProps;if(T=T.compare,T=T!==null?T:$t,T(ge,B)&&y.ref===S.ref)return Dc(y,S,H)}return S.flags|=1,y=Kl(K,B),y.ref=S.ref,y.return=S,S.child=y}function l0(y,S,T,B,H){if(y!==null){var K=y.memoizedProps;if($t(K,B)&&y.ref===S.ref)if(Di=!1,S.pendingProps=B=K,p0(y,H))(y.flags&131072)!==0&&(Di=!0);else return S.lanes=y.lanes,Dc(y,S,H)}return Lh(y,S,T,B,H)}function c0(y,S,T){var B=S.pendingProps,H=B.children,K=(S.stateNode._pendingVisibility&2)!==0,ge=y!==null?y.memoizedState:null;if(fd(y,S),B.mode==="hidden"||K){if((S.flags&128)!==0){if(B=ge!==null?ge.baseLanes|T:T,y!==null){for(H=S.child=y.child,K=0;H!==null;)K=K|H.lanes|H.childLanes,H=H.sibling;S.childLanes=K&~B}else S.childLanes=0,S.child=null;return u0(y,S,B,T)}if((T&536870912)!==0)S.memoizedState={baseLanes:0,cachePool:null},y!==null&&_n(S,ge!==null?ge.cachePool:null),ge!==null?pi(S,ge):Si(),$o(S);else return S.lanes=S.childLanes=536870912,u0(y,S,ge!==null?ge.baseLanes|T:T,T)}else ge!==null?(_n(S,ge.cachePool),pi(S,ge),vr(),S.memoizedState=null):(y!==null&&_n(S,null),Si(),vr());return Ls(y,S,H,T),S.child}function u0(y,S,T,B){var H=Un();return H=H===null?null:{parent:vo?zi._currentValue:zi._currentValue2,pool:H},S.memoizedState={baseLanes:T,cachePool:H},y!==null&&_n(S,null),Si(),$o(S),y!==null&&oe(y,S,B,!0),null}function fd(y,S){var T=S.ref;if(T===null)y!==null&&y.ref!==null&&(S.flags|=2097664);else{if(typeof T!="function"&&typeof T!="object")throw Error(i(284));(y===null||y.ref!==T)&&(S.flags|=2097664)}}function Lh(y,S,T,B,H){return Ee(S),T=me(y,S,T,B,void 0,H),B=St(),y!==null&&!Di?(jt(y,S,H),Dc(y,S,H)):(jr&&B&&ne(S),S.flags|=1,Ls(y,S,T,H),S.child)}function Uv(y,S,T,B,H,K){return Ee(S),S.updateQueue=null,T=nt(S,B,T,H),Oe(y),B=St(),y!==null&&!Di?(jt(y,S,K),Dc(y,S,K)):(jr&&B&&ne(S),S.flags|=1,Ls(y,S,T,K),S.child)}function zv(y,S,T,B,H){if(Ee(S),S.stateNode===null){var K=Bf,ge=T.contextType;typeof ge=="object"&&ge!==null&&(K=Ce(ge)),K=new T(B,K),S.memoizedState=K.state!==null&&K.state!==void 0?K.state:null,K.updater=yu,S.stateNode=K,K._reactInternals=S,K=S.stateNode,K.props=B,K.state=S.memoizedState,K.refs={},_t(S),ge=T.contextType,K.context=typeof ge=="object"&&ge!==null?Ce(ge):Bf,K.state=S.memoizedState,ge=T.getDerivedStateFromProps,typeof ge=="function"&&(cd(S,T,ge,B),K.state=S.memoizedState),typeof T.getDerivedStateFromProps=="function"||typeof K.getSnapshotBeforeUpdate=="function"||typeof K.UNSAFE_componentWillMount!="function"&&typeof K.componentWillMount!="function"||(ge=K.state,typeof K.componentWillMount=="function"&&K.componentWillMount(),typeof K.UNSAFE_componentWillMount=="function"&&K.UNSAFE_componentWillMount(),ge!==K.state&&yu.enqueueReplaceState(K,K.state,null),hn(S,B,K,H),zt(),K.state=S.memoizedState),typeof K.componentDidMount=="function"&&(S.flags|=4194308),B=!0}else if(y===null){K=S.stateNode;var De=S.memoizedProps,Qe=jl(T,De);K.props=Qe;var It=K.context,Jt=T.contextType;ge=Bf,typeof Jt=="object"&&Jt!==null&&(ge=Ce(Jt));var dn=T.getDerivedStateFromProps;Jt=typeof dn=="function"||typeof K.getSnapshotBeforeUpdate=="function",De=S.pendingProps!==De,Jt||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(De||It!==ge)&&Pv(S,K,B,ge),Md=!1;var gn=S.memoizedState;K.state=gn,hn(S,B,K,H),zt(),It=S.memoizedState,De||gn!==It||Md?(typeof dn=="function"&&(cd(S,T,dn,B),It=S.memoizedState),(Qe=Md||ou(S,T,Qe,B,gn,It,ge))?(Jt||typeof K.UNSAFE_componentWillMount!="function"&&typeof K.componentWillMount!="function"||(typeof K.componentWillMount=="function"&&K.componentWillMount(),typeof K.UNSAFE_componentWillMount=="function"&&K.UNSAFE_componentWillMount()),typeof K.componentDidMount=="function"&&(S.flags|=4194308)):(typeof K.componentDidMount=="function"&&(S.flags|=4194308),S.memoizedProps=B,S.memoizedState=It),K.props=B,K.state=It,K.context=ge,B=Qe):(typeof K.componentDidMount=="function"&&(S.flags|=4194308),B=!1)}else{K=S.stateNode,Xt(y,S),ge=S.memoizedProps,Jt=jl(T,ge),K.props=Jt,dn=S.pendingProps,gn=K.context,It=T.contextType,Qe=Bf,typeof It=="object"&&It!==null&&(Qe=Ce(It)),De=T.getDerivedStateFromProps,(It=typeof De=="function"||typeof K.getSnapshotBeforeUpdate=="function")||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(ge!==dn||gn!==Qe)&&Pv(S,K,B,Qe),Md=!1,gn=S.memoizedState,K.state=gn,hn(S,B,K,H),zt();var dr=S.memoizedState;ge!==dn||gn!==dr||Md||y!==null&&y.dependencies!==null&&we(y.dependencies)?(typeof De=="function"&&(cd(S,T,De,B),dr=S.memoizedState),(Jt=Md||ou(S,T,Jt,B,gn,dr,Qe)||y!==null&&y.dependencies!==null&&we(y.dependencies))?(It||typeof K.UNSAFE_componentWillUpdate!="function"&&typeof K.componentWillUpdate!="function"||(typeof K.componentWillUpdate=="function"&&K.componentWillUpdate(B,dr,Qe),typeof K.UNSAFE_componentWillUpdate=="function"&&K.UNSAFE_componentWillUpdate(B,dr,Qe)),typeof K.componentDidUpdate=="function"&&(S.flags|=4),typeof K.getSnapshotBeforeUpdate=="function"&&(S.flags|=1024)):(typeof K.componentDidUpdate!="function"||ge===y.memoizedProps&&gn===y.memoizedState||(S.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||ge===y.memoizedProps&&gn===y.memoizedState||(S.flags|=1024),S.memoizedProps=B,S.memoizedState=dr),K.props=B,K.state=dr,K.context=Qe,B=Jt):(typeof K.componentDidUpdate!="function"||ge===y.memoizedProps&&gn===y.memoizedState||(S.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||ge===y.memoizedProps&&gn===y.memoizedState||(S.flags|=1024),B=!1)}return K=B,fd(y,S),B=(S.flags&128)!==0,K||B?(K=S.stateNode,T=B&&typeof T.getDerivedStateFromError!="function"?null:K.render(),S.flags|=1,y!==null&&B?(S.child=Uf(S,y.child,null,H),S.child=Uf(S,null,T,H)):Ls(y,S,T,H),S.memoizedState=K.state,y=S.child):y=Dc(y,S,H),y}function Hv(y,S,T,B){return dt(),S.flags|=256,Ls(y,S,T,B),S.child}function d0(y){return{baseLanes:y,cachePool:cn()}}function xf(y,S,T){return y=y!==null?y.childLanes&~T:0,S&&(y|=_l),y}function Vv(y,S,T){var B=S.pendingProps,H=!1,K=(S.flags&128)!==0,ge;if((ge=K)||(ge=y!==null&&y.memoizedState===null?!1:(ia.current&2)!==0),ge&&(H=!0,S.flags&=-129),ge=(S.flags&32)!==0,S.flags&=-33,y===null){if(jr){if(H?as(S):vr(),jr){var De=Oa,Qe;(Qe=De)&&(De=tA(De,ma),De!==null?(S.memoizedState={dehydrated:De,treeContext:$f!==null?{id:Pc,overflow:Uc}:null,retryLane:536870912},Qe=t(18,null,null,0),Qe.stateNode=De,Qe.return=S,S.child=Qe,ka=S,Oa=null,Qe=!0):Qe=!1),Qe||Pe(S)}if(De=S.memoizedState,De!==null&&(De=De.dehydrated,De!==null))return pb(De)?S.lanes=16:S.lanes=536870912,null;Nn(S)}return De=B.children,B=B.fallback,H?(vr(),H=S.mode,De=Fh({mode:"hidden",children:De},H),B=ps(B,H,T,null),De.return=S,B.return=S,De.sibling=B,S.child=De,H=S.child,H.memoizedState=d0(T),H.childLanes=xf(y,ge,T),S.memoizedState=Mb,B):(as(S),f0(S,De))}if(Qe=y.memoizedState,Qe!==null&&(De=Qe.dehydrated,De!==null)){if(K)S.flags&256?(as(S),S.flags&=-257,S=cm(y,S,T)):S.memoizedState!==null?(vr(),S.child=y.child,S.flags|=128,S=null):(vr(),H=B.fallback,De=S.mode,B=Fh({mode:"visible",children:B.children},De),H=ps(H,De,T,null),H.flags|=2,B.return=S,H.return=S,B.sibling=H,S.child=B,Uf(S,y.child,null,T),B=S.child,B.memoizedState=d0(T),B.childLanes=xf(y,ge,T),S.memoizedState=Mb,S=H);else if(as(S),pb(De))ge=Y2(De).digest,B=Error(i(419)),B.stack="",B.digest=ge,pe({value:B,source:null,stack:null}),S=cm(y,S,T);else if(Di||oe(y,S,T,!1),ge=(T&y.childLanes)!==0,Di||ge){if(ge=fi,ge!==null){if(B=T&-T,(B&42)!==0)B=1;else switch(B){case 2:B=1;break;case 8:B=4;break;case 32:B=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:B=64;break;case 268435456:B=134217728;break;default:B=0}if(B=(B&(ge.suspendedLanes|T))!==0?0:B,B!==0&&B!==Qe.retryLane)throw Qe.retryLane=B,je(y,B),ha(ge,y,B),Tb}hb(De)||vd(),S=cm(y,S,T)}else hb(De)?(S.flags|=128,S.child=y.child,S=bd.bind(null,y),J2(De,S),S=null):(y=Qe.treeContext,Da&&(Oa=eA(De),ka=S,jr=!0,ec=null,ma=!1,y!==null&&(ml[gl++]=Pc,ml[gl++]=Uc,ml[gl++]=$f,Pc=y.id,Uc=y.overflow,$f=S)),S=f0(S,B.children),S.flags|=4096);return S}return H?(vr(),H=B.fallback,De=S.mode,Qe=y.child,K=Qe.sibling,B=Kl(Qe,{mode:"hidden",children:B.children}),B.subtreeFlags=Qe.subtreeFlags&31457280,K!==null?H=Kl(K,H):(H=ps(H,De,T,null),H.flags|=2),H.return=S,B.return=S,B.sibling=H,S.child=B,B=H,H=S.child,De=y.child.memoizedState,De===null?De=d0(T):(Qe=De.cachePool,Qe!==null?(K=vo?zi._currentValue:zi._currentValue2,Qe=Qe.parent!==K?{parent:K,pool:K}:Qe):Qe=cn(),De={baseLanes:De.baseLanes|T,cachePool:Qe}),H.memoizedState=De,H.childLanes=xf(y,ge,T),S.memoizedState=Mb,B):(as(S),T=y.child,y=T.sibling,T=Kl(T,{mode:"visible",children:B.children}),T.return=S,T.sibling=null,y!==null&&(ge=S.deletions,ge===null?(S.deletions=[y],S.flags|=16):ge.push(y)),S.child=T,S.memoizedState=null,T)}function f0(y,S){return S=Fh({mode:"visible",children:S},y.mode),S.return=y,y.child=S}function Fh(y,S){return E0(y,S,0,null)}function cm(y,S,T){return Uf(S,y.child,null,T),y=f0(S,S.pendingProps.children),y.flags|=2,S.memoizedState=null,y}function Gv(y,S,T){y.lanes|=S;var B=y.alternate;B!==null&&(B.lanes|=S),j(y.return,S,T)}function h0(y,S,T,B,H){var K=y.memoizedState;K===null?y.memoizedState={isBackwards:S,rendering:null,renderingStartTime:0,last:B,tail:T,tailMode:H}:(K.isBackwards=S,K.rendering=null,K.renderingStartTime=0,K.last=B,K.tail=T,K.tailMode=H)}function Ph(y,S,T){var B=S.pendingProps,H=B.revealOrder,K=B.tail;if(Ls(y,S,B.children,T),B=ia.current,(B&2)!==0)B=B&1|2,S.flags|=128;else{if(y!==null&&(y.flags&128)!==0)e:for(y=S.child;y!==null;){if(y.tag===13)y.memoizedState!==null&&Gv(y,T,S);else if(y.tag===19)Gv(y,T,S);else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===S)break e;for(;y.sibling===null;){if(y.return===null||y.return===S)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}B&=1}switch(C(ia,B),H){case"forwards":for(T=S.child,H=null;T!==null;)y=T.alternate,y!==null&&$s(y)===null&&(H=T),T=T.sibling;T=H,T===null?(H=S.child,S.child=null):(H=T.sibling,T.sibling=null),h0(S,!1,H,T,K);break;case"backwards":for(T=null,H=S.child,S.child=null;H!==null;){if(y=H.alternate,y!==null&&$s(y)===null){S.child=H;break}y=H.sibling,H.sibling=T,T=H,H=y}h0(S,!0,T,null,K);break;case"together":h0(S,!1,null,null,void 0);break;default:S.memoizedState=null}return S.child}function Dc(y,S,T){if(y!==null&&(S.dependencies=y.dependencies),Cl|=S.lanes,(T&S.childLanes)===0)if(y!==null){if(oe(y,S,T,!1),(T&S.childLanes)===0)return null}else return null;if(y!==null&&S.child!==y.child)throw Error(i(153));if(S.child!==null){for(y=S.child,T=Kl(y,y.pendingProps),S.child=T,T.return=S;y.sibling!==null;)y=y.sibling,T=T.sibling=Kl(y,y.pendingProps),T.return=S;T.sibling=null}return S.child}function p0(y,S){return(y.lanes&S)!==0?!0:(y=y.dependencies,!!(y!==null&&we(y)))}function lS(y,S,T){switch(S.tag){case 3:ye(S,S.stateNode.containerInfo),kc(S,zi,y.memoizedState.cache),dt();break;case 27:case 5:ve(S);break;case 4:ye(S,S.stateNode.containerInfo);break;case 10:kc(S,S.type,S.memoizedProps.value);break;case 13:var B=S.memoizedState;if(B!==null)return B.dehydrated!==null?(as(S),S.flags|=128,null):(T&S.child.childLanes)!==0?Vv(y,S,T):(as(S),y=Dc(y,S,T),y!==null?y.sibling:null);as(S);break;case 19:var H=(y.flags&128)!==0;if(B=(T&S.childLanes)!==0,B||(oe(y,S,T,!1),B=(T&S.childLanes)!==0),H){if(B)return Ph(y,S,T);S.flags|=128}if(H=S.memoizedState,H!==null&&(H.rendering=null,H.tail=null,H.lastEffect=null),C(ia,ia.current),B)break;return null;case 22:case 23:return S.lanes=0,c0(y,S,T);case 24:kc(S,zi,y.memoizedState.cache)}return Dc(y,S,T)}function m0(y,S,T){if(y!==null)if(y.memoizedProps!==S.pendingProps)Di=!0;else{if(!p0(y,T)&&(S.flags&128)===0)return Di=!1,lS(y,S,T);Di=(y.flags&131072)!==0}else Di=!1,jr&&(S.flags&1048576)!==0&&te(S,Tm,S.index);switch(S.lanes=0,S.tag){case 16:e:{y=S.pendingProps;var B=S.elementType,H=B._init;if(B=H(B._payload),S.type=B,typeof B=="function")C0(B)?(y=jl(B,y),S.tag=1,S=zv(null,S,B,y,T)):(S.tag=0,S=Lh(null,S,B,y,T));else{if(B!=null){if(H=B.$$typeof,H===N0){S.tag=11,S=lm(null,S,B,y,T);break e}else if(H===ob){S.tag=14,S=o0(null,S,B,y,T);break e}}throw S=a(B)||B,Error(i(306,S,""))}}return S;case 0:return Lh(y,S,S.type,S.pendingProps,T);case 1:return B=S.type,H=jl(B,S.pendingProps),zv(y,S,B,H,T);case 3:e:{if(ye(S,S.stateNode.containerInfo),y===null)throw Error(i(387));var K=S.pendingProps;H=S.memoizedState,B=H.element,Xt(y,S),hn(S,K,null,T);var ge=S.memoizedState;if(K=ge.cache,kc(S,zi,K),K!==H.cache&&ee(S,[zi],T,!0),zt(),K=ge.element,Da&&H.isDehydrated)if(H={element:K,isDehydrated:!1,cache:ge.cache},S.updateQueue.baseState=H,S.memoizedState=H,S.flags&256){S=Hv(y,S,K,T);break e}else if(K!==B){B=Y(Error(i(424)),S),pe(B),S=Hv(y,S,K,T);break e}else for(Da&&(Oa=Q2(S.stateNode.containerInfo),ka=S,jr=!0,ec=null,ma=!0),T=gu(S,null,K,T),S.child=T;T;)T.flags=T.flags&-3|4096,T=T.sibling;else{if(dt(),K===B){S=Dc(y,S,T);break e}Ls(y,S,K,T)}S=S.child}return S;case 26:if(pl)return fd(y,S),y===null?(T=jS(S.type,null,S.pendingProps,null))?S.memoizedState=T:jr||(S.stateNode=bb(S.type,S.pendingProps,pu.current,S)):S.memoizedState=jS(S.type,y.memoizedProps,S.pendingProps,y.memoizedState),null;case 27:if(Ni)return ve(S),y===null&&Ni&&jr&&(B=S.stateNode=Fc(S.type,S.pendingProps,pu.current,ra.current,!1),ka=S,ma=!0,Oa=mb(B)),B=S.pendingProps.children,y!==null||jr?Ls(y,S,B,T):S.child=Uf(S,null,B,T),fd(y,S),S.child;case 5:return y===null&&jr&&(yb(S.type,S.pendingProps,ra.current),(H=B=Oa)&&(B=lk(B,S.type,S.pendingProps,ma),B!==null?(S.stateNode=B,ka=S,Oa=mb(B),ma=!1,H=!0):H=!1),H||Pe(S)),ve(S),H=S.type,K=S.pendingProps,ge=y!==null?y.memoizedProps:null,B=K.children,mr(H,K)?B=null:ge!==null&&mr(H,ge)&&(S.flags|=32),S.memoizedState!==null&&(H=me(y,S,ct,null,null,T),vo?Lc._currentValue=H:Lc._currentValue2=H),fd(y,S),Ls(y,S,B,T),S.child;case 6:return y===null&&jr&&(aA(S.pendingProps,ra.current),(y=T=Oa)&&(T=GS(T,S.pendingProps,ma),T!==null?(S.stateNode=T,ka=S,Oa=null,y=!0):y=!1),y||Pe(S)),null;case 13:return Vv(y,S,T);case 4:return ye(S,S.stateNode.containerInfo),B=S.pendingProps,y===null?S.child=Uf(S,null,B,T):Ls(y,S,B,T),S.child;case 11:return lm(y,S,S.type,S.pendingProps,T);case 7:return Ls(y,S,S.pendingProps,T),S.child;case 8:return Ls(y,S,S.pendingProps.children,T),S.child;case 12:return Ls(y,S,S.pendingProps.children,T),S.child;case 10:return B=S.pendingProps,kc(S,S.type,B.value),Ls(y,S,B.children,T),S.child;case 9:return H=S.type._context,B=S.pendingProps.children,Ee(S),H=Ce(H),B=B(H),S.flags|=1,Ls(y,S,B,T),S.child;case 14:return o0(y,S,S.type,S.pendingProps,T);case 15:return l0(y,S,S.type,S.pendingProps,T);case 19:return Ph(y,S,T);case 22:return c0(y,S,T);case 24:return Ee(S),B=Ce(zi),y===null?(H=Un(),H===null&&(H=fi,K=Ht(),H.pooledCache=K,K.refCount++,K!==null&&(H.pooledCacheLanes|=T),H=K),S.memoizedState={parent:B,cache:H},_t(S),kc(S,zi,H)):((y.lanes&T)!==0&&(Xt(y,S),hn(S,null,null,T),zt()),H=y.memoizedState,K=S.memoizedState,H.parent!==B?(H={parent:B,cache:B},S.memoizedState=H,S.lanes===0&&(S.memoizedState=S.updateQueue.baseState=H),kc(S,zi,B)):(B=K.cache,kc(S,zi,B),B!==H.cache&&ee(S,[zi],T,!0))),Ls(y,S,S.pendingProps.children,T),S.child;case 29:throw S.pendingProps}throw Error(i(156,S.tag))}function kc(y,S,T){vo?(C(Nd,S._currentValue),S._currentValue=T):(C(Nd,S._currentValue2),S._currentValue2=T)}function O(y){var S=Nd.current;vo?y._currentValue=S:y._currentValue2=S,x(Nd)}function j(y,S,T){for(;y!==null;){var B=y.alternate;if((y.childLanes&S)!==S?(y.childLanes|=S,B!==null&&(B.childLanes|=S)):B!==null&&(B.childLanes&S)!==S&&(B.childLanes|=S),y===T)break;y=y.return}}function ee(y,S,T,B){var H=y.child;for(H!==null&&(H.return=y);H!==null;){var K=H.dependencies;if(K!==null){var ge=H.child;K=K.firstContext;e:for(;K!==null;){var De=K;K=H;for(var Qe=0;Qe<S.length;Qe++)if(De.context===S[Qe]){K.lanes|=T,De=K.alternate,De!==null&&(De.lanes|=T),j(K.return,T,y),B||(ge=null);break e}K=De.next}}else if(H.tag===18){if(ge=H.return,ge===null)throw Error(i(341));ge.lanes|=T,K=ge.alternate,K!==null&&(K.lanes|=T),j(ge,T,y),ge=null}else ge=H.child;if(ge!==null)ge.return=H;else for(ge=H;ge!==null;){if(ge===y){ge=null;break}if(H=ge.sibling,H!==null){H.return=ge.return,ge=H;break}ge=ge.return}H=ge}}function oe(y,S,T,B){y=null;for(var H=S,K=!1;H!==null;){if(!K){if((H.flags&524288)!==0)K=!0;else if((H.flags&262144)!==0)break}if(H.tag===10){var ge=H.alternate;if(ge===null)throw Error(i(387));if(ge=ge.memoizedProps,ge!==null){var De=H.type;Go(H.pendingProps.value,ge.value)||(y!==null?y.push(De):y=[De])}}else if(H===Kh.current){if(ge=H.alternate,ge===null)throw Error(i(387));ge.memoizedState.memoizedState!==H.memoizedState.memoizedState&&(y!==null?y.push(Lc):y=[Lc])}H=H.return}y!==null&&ee(S,y,T,B),S.flags|=262144}function we(y){for(y=y.firstContext;y!==null;){var S=y.context;if(!Go(vo?S._currentValue:S._currentValue2,y.memoizedValue))return!0;y=y.next}return!1}function Ee(y){Vc=y,xl=null,y=y.dependencies,y!==null&&(y.firstContext=null)}function Ce(y){return ht(Vc,y)}function He(y,S){return Vc===null&&Ee(y),ht(y,S)}function ht(y,S){var T=vo?S._currentValue:S._currentValue2;if(S={context:S,memoizedValue:T,next:null},xl===null){if(y===null)throw Error(i(308));xl=S,y.dependencies={lanes:0,firstContext:S},y.flags|=524288}else xl=xl.next=S;return T}function Ht(){return{controller:new km,data:new Map,refCount:0}}function Zt(y){y.refCount--,y.refCount===0&&yA(vA,function(){y.controller.abort()})}function Un(){var y=vu.current;return y!==null?y:fi.pooledCache}function _n(y,S){S===null?C(vu,vu.current):C(vu,S.pool)}function cn(){var y=Un();return y===null?null:{parent:vo?zi._currentValue:zi._currentValue2,pool:y}}function xn(y){y.flags|=4}function ir(y,S){if(y!==null&&y.child===S.child)return!1;if((S.flags&16)!==0)return!0;for(y=S.child;y!==null;){if((y.flags&13878)!==0||(y.subtreeFlags&13878)!==0)return!0;y=y.sibling}return!1}function Yr(y,S,T,B){if(na)for(T=S.child;T!==null;){if(T.tag===5||T.tag===6)D0(y,T.stateNode);else if(!(T.tag===4||Ni&&T.tag===27)&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===S)break;for(;T.sibling===null;){if(T.return===null||T.return===S)return;T=T.return}T.sibling.return=T.return,T=T.sibling}else if(Zl)for(var H=S.child;H!==null;){if(H.tag===5){var K=H.stateNode;T&&B&&(K=US(K,H.type,H.memoizedProps)),D0(y,K)}else if(H.tag===6)K=H.stateNode,T&&B&&(K=zS(K,H.memoizedProps)),D0(y,K);else if(H.tag!==4){if(H.tag===22&&H.memoizedState!==null)K=H.child,K!==null&&(K.return=H),Yr(y,H,!0,!0);else if(H.child!==null){H.child.return=H,H=H.child;continue}}if(H===S)break;for(;H.sibling===null;){if(H.return===null||H.return===S)return;H=H.return}H.sibling.return=H.return,H=H.sibling}}function mi(y,S,T,B){if(Zl)for(var H=S.child;H!==null;){if(H.tag===5){var K=H.stateNode;T&&B&&(K=US(K,H.type,H.memoizedProps)),PS(y,K)}else if(H.tag===6)K=H.stateNode,T&&B&&(K=zS(K,H.memoizedProps)),PS(y,K);else if(H.tag!==4){if(H.tag===22&&H.memoizedState!==null)K=H.child,K!==null&&(K.return=H),mi(y,H,!(H.memoizedProps!==null&&H.memoizedProps.mode==="manual"),!0);else if(H.child!==null){H.child.return=H,H=H.child;continue}}if(H===S)break;for(;H.sibling===null;){if(H.return===null||H.return===S)return;H=H.return}H.sibling.return=H.return,H=H.sibling}}function os(y,S){if(Zl&&ir(y,S)){y=S.stateNode;var T=y.containerInfo,B=k0();mi(B,S,!1,!1),y.pendingChildren=B,xn(S),fb(T,B)}}function Ma(y,S,T,B){if(na)y.memoizedProps!==B&&xn(S);else if(Zl){var H=y.stateNode,K=y.memoizedProps;if((y=ir(y,S))||K!==B){var ge=ra.current;K=_m(H,T,K,B,!y,null),K===H?S.stateNode=H:(Cd(K,T,B,ge)&&xn(S),S.stateNode=K,y?Yr(K,S,!1,!1):xn(S))}else S.stateNode=H}}function ta(y,S,T){if(IS(S,T)){if(y.flags|=16777216,!ub(S,T))if(Ef())y.flags|=8192;else throw Lf=H0,z0}else y.flags&=-16777217}function kr(y,S){if(cA(S)){if(y.flags|=16777216,!Gh(S))if(Ef())y.flags|=8192;else throw Lf=H0,z0}else y.flags&=-16777217}function ts(y,S){S!==null&&(y.flags|=4),y.flags&16384&&(S=y.tag!==22?N():536870912,y.lanes|=S,Su|=S)}function mo(y,S){if(!jr)switch(y.tailMode){case"hidden":S=y.tail;for(var T=null;S!==null;)S.alternate!==null&&(T=S),S=S.sibling;T===null?y.tail=null:T.sibling=null;break;case"collapsed":T=y.tail;for(var B=null;T!==null;)T.alternate!==null&&(B=T),T=T.sibling;B===null?S||y.tail===null?y.tail=null:y.tail.sibling=null:B.sibling=null}}function Fi(y){var S=y.alternate!==null&&y.alternate.child===y.child,T=0,B=0;if(S)for(var H=y.child;H!==null;)T|=H.lanes|H.childLanes,B|=H.subtreeFlags&31457280,B|=H.flags&31457280,H.return=y,H=H.sibling;else for(H=y.child;H!==null;)T|=H.lanes|H.childLanes,B|=H.subtreeFlags,B|=H.flags,H.return=y,H=H.sibling;return y.subtreeFlags|=B,y.childLanes=T,S}function Wv(y,S,T){var B=S.pendingProps;switch(le(S),S.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fi(S),null;case 1:return Fi(S),null;case 3:return T=S.stateNode,B=null,y!==null&&(B=y.memoizedState.cache),S.memoizedState.cache!==B&&(S.flags|=2048),O(zi),ue(),T.pendingContext&&(T.context=T.pendingContext,T.pendingContext=null),(y===null||y.child===null)&&(pt(S)?xn(S):y===null||y.memoizedState.isDehydrated&&(S.flags&256)===0||(S.flags|=1024,ec!==null&&(S0(ec),ec=null))),os(y,S),Fi(S),null;case 26:if(pl){T=S.type;var H=S.memoizedState;return y===null?(xn(S),H!==null?(Fi(S),kr(S,H)):(Fi(S),ta(S,T,B))):H?H!==y.memoizedState?(xn(S),Fi(S),kr(S,H)):(Fi(S),S.flags&=-16777217):(na?y.memoizedProps!==B&&xn(S):Ma(y,S,T,B),Fi(S),ta(S,T,B)),null}case 27:if(Ni){if(xe(S),T=pu.current,H=S.type,y!==null&&S.stateNode!=null)na?y.memoizedProps!==B&&xn(S):Ma(y,S,H,B);else{if(!B){if(S.stateNode===null)throw Error(i(166));return Fi(S),null}y=ra.current,pt(S)?ze(S,y):(y=Fc(H,B,T,y,!0),S.stateNode=y,xn(S))}return Fi(S),null}case 5:if(xe(S),T=S.type,y!==null&&S.stateNode!=null)Ma(y,S,T,B);else{if(!B){if(S.stateNode===null)throw Error(i(166));return Fi(S),null}y=ra.current,pt(S)?ze(S,y):(H=NS(T,B,pu.current,y,S),Yr(H,S,!1,!1),S.stateNode=H,Cd(H,T,B,y)&&xn(S))}return Fi(S),ta(S,S.type,S.pendingProps),null;case 6:if(y&&S.stateNode!=null)T=y.memoizedProps,na?T!==B&&xn(S):Zl&&(T!==B?(S.stateNode=gi(B,pu.current,ra.current,S),xn(S)):S.stateNode=y.stateNode);else{if(typeof B!="string"&&S.stateNode===null)throw Error(i(166));if(y=pu.current,T=ra.current,pt(S)){if(!Da)throw Error(i(176));if(y=S.stateNode,T=S.memoizedProps,B=null,H=ka,H!==null)switch(H.tag){case 27:case 5:B=H.memoizedProps}WS(y,T,S,B)||Pe(S)}else S.stateNode=gi(B,y,T,S)}return Fi(S),null;case 13:if(B=S.memoizedState,y===null||y.memoizedState!==null&&y.memoizedState.dehydrated!==null){if(H=pt(S),B!==null&&B.dehydrated!==null){if(y===null){if(!H)throw Error(i(318));if(!Da)throw Error(i(344));if(H=S.memoizedState,H=H!==null?H.dehydrated:null,!H)throw Error(i(317));rA(H,S)}else dt(),(S.flags&128)===0&&(S.memoizedState=null),S.flags|=4;Fi(S),H=!1}else ec!==null&&(S0(ec),ec=null),H=!0;if(!H)return S.flags&256?(Nn(S),S):(Nn(S),null)}if(Nn(S),(S.flags&128)!==0)return S.lanes=T,S;if(T=B!==null,y=y!==null&&y.memoizedState!==null,T){B=S.child,H=null,B.alternate!==null&&B.alternate.memoizedState!==null&&B.alternate.memoizedState.cachePool!==null&&(H=B.alternate.memoizedState.cachePool.pool);var K=null;B.memoizedState!==null&&B.memoizedState.cachePool!==null&&(K=B.memoizedState.cachePool.pool),K!==H&&(B.flags|=2048)}return T!==y&&T&&(S.child.flags|=8192),ts(S,S.updateQueue),Fi(S),null;case 4:return ue(),os(y,S),y===null&&_s(S.stateNode.containerInfo),Fi(S),null;case 10:return O(S.type),Fi(S),null;case 19:if(x(ia),H=S.memoizedState,H===null)return Fi(S),null;if(B=(S.flags&128)!==0,K=H.rendering,K===null)if(B)mo(H,!1);else{if(ki!==0||y!==null&&(y.flags&128)!==0)for(y=S.child;y!==null;){if(K=$s(y),K!==null){for(S.flags|=128,mo(H,!1),y=K.updateQueue,S.updateQueue=y,ts(S,y),S.subtreeFlags=0,y=T,T=S.child;T!==null;)_0(T,y),T=T.sibling;return C(ia,ia.current&1|2),S.child}y=y.sibling}H.tail!==null&&Ql()>$m&&(S.flags|=128,B=!0,mo(H,!1),S.lanes=4194304)}else{if(!B)if(y=$s(K),y!==null){if(S.flags|=128,B=!0,y=y.updateQueue,S.updateQueue=y,ts(S,y),mo(H,!0),H.tail===null&&H.tailMode==="hidden"&&!K.alternate&&!jr)return Fi(S),null}else 2*Ql()-H.renderingStartTime>$m&&T!==536870912&&(S.flags|=128,B=!0,mo(H,!1),S.lanes=4194304);H.isBackwards?(K.sibling=S.child,S.child=K):(y=H.last,y!==null?y.sibling=K:S.child=K,H.last=K)}return H.tail!==null?(S=H.tail,H.rendering=S,H.tail=S.sibling,H.renderingStartTime=Ql(),S.sibling=null,y=ia.current,C(ia,B?y&1|2:y&1),S):(Fi(S),null);case 22:case 23:return Nn(S),Ri(),B=S.memoizedState!==null,y!==null?y.memoizedState!==null!==B&&(S.flags|=8192):B&&(S.flags|=8192),B?(T&536870912)!==0&&(S.flags&128)===0&&(Fi(S),S.subtreeFlags&6&&(S.flags|=8192)):Fi(S),T=S.updateQueue,T!==null&&ts(S,T.retryQueue),T=null,y!==null&&y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(T=y.memoizedState.cachePool.pool),B=null,S.memoizedState!==null&&S.memoizedState.cachePool!==null&&(B=S.memoizedState.cachePool.pool),B!==T&&(S.flags|=2048),y!==null&&x(vu),null;case 24:return T=null,y!==null&&(T=y.memoizedState.cache),S.memoizedState.cache!==T&&(S.flags|=2048),O(zi),Fi(S),null;case 25:return null}throw Error(i(156,S.tag))}function cS(y,S){switch(le(S),S.tag){case 1:return y=S.flags,y&65536?(S.flags=y&-65537|128,S):null;case 3:return O(zi),ue(),y=S.flags,(y&65536)!==0&&(y&128)===0?(S.flags=y&-65537|128,S):null;case 26:case 27:case 5:return xe(S),null;case 13:if(Nn(S),y=S.memoizedState,y!==null&&y.dehydrated!==null){if(S.alternate===null)throw Error(i(340));dt()}return y=S.flags,y&65536?(S.flags=y&-65537|128,S):null;case 19:return x(ia),null;case 4:return ue(),null;case 10:return O(S.type),null;case 22:case 23:return Nn(S),Ri(),y!==null&&x(vu),y=S.flags,y&65536?(S.flags=y&-65537|128,S):null;case 24:return O(zi),null;case 25:return null;default:return null}}function jv(y,S){switch(le(S),S.tag){case 3:O(zi),ue();break;case 26:case 27:case 5:xe(S);break;case 4:ue();break;case 13:Nn(S);break;case 19:x(ia);break;case 10:O(S.type);break;case 22:case 23:Nn(S),Ri(),y!==null&&x(vu);break;case 24:O(zi)}}function Uh(y,S){try{var T=S.updateQueue,B=T!==null?T.lastEffect:null;if(B!==null){var H=B.next;T=H;do{if((T.tag&y)===y){B=void 0;var K=T.create,ge=T.inst;B=K(),ge.destroy=B}T=T.next}while(T!==H)}}catch(De){ui(S,S.return,De)}}function ul(y,S,T){try{var B=S.updateQueue,H=B!==null?B.lastEffect:null;if(H!==null){var K=H.next;B=K;do{if((B.tag&y)===y){var ge=B.inst,De=ge.destroy;if(De!==void 0){ge.destroy=void 0,H=S;var Qe=T;try{De()}catch(It){ui(H,Qe,It)}}}B=B.next}while(B!==K)}}catch(It){ui(S,S.return,It)}}function E2(y){var S=y.updateQueue;if(S!==null){var T=y.stateNode;try{qe(S,T)}catch(B){ui(y,y.return,B)}}}function Fo(y,S,T){T.props=jl(y.type,y.memoizedProps),T.state=y.memoizedState;try{T.componentWillUnmount()}catch(B){ui(y,S,B)}}function Oc(y,S){try{var T=y.ref;if(T!==null){var B=y.stateNode;switch(y.tag){case 26:case 27:case 5:var H=Sm(B);break;default:H=B}typeof T=="function"?y.refCleanup=T(H):T.current=H}}catch(K){ui(y,S,K)}}function Po(y,S){var T=y.ref,B=y.refCleanup;if(T!==null)if(typeof B=="function")try{B()}catch(H){ui(y,S,H)}finally{y.refCleanup=null,y=y.alternate,y!=null&&(y.refCleanup=null)}else if(typeof T=="function")try{T(null)}catch(H){ui(y,S,H)}else T.current=null}function uS(y){var S=y.type,T=y.memoizedProps,B=y.stateNode;try{ak(B,S,T,y)}catch(H){ui(y,y.return,H)}}function dS(y,S,T){try{H2(y.stateNode,y.type,T,S,y)}catch(B){ui(y,y.return,B)}}function fS(y){return y.tag===5||y.tag===3||(pl?y.tag===26:!1)||(Ni?y.tag===27:!1)||y.tag===4}function g0(y){e:for(;;){for(;y.sibling===null;){if(y.return===null||fS(y.return))return null;y=y.return}for(y.sibling.return=y.return,y=y.sibling;y.tag!==5&&y.tag!==6&&(!Ni||y.tag!==27)&&y.tag!==18;){if(y.flags&2||y.child===null||y.tag===4)continue e;y.child.return=y,y=y.child}if(!(y.flags&2))return y.stateNode}}function hS(y,S,T){var B=y.tag;if(B===5||B===6)y=y.stateNode,S?G2(T,y,S):$S(T,y);else if(!(B===4||Ni&&B===27)&&(y=y.child,y!==null))for(hS(y,S,T),y=y.sibling;y!==null;)hS(y,S,T),y=y.sibling}function hd(y,S,T){var B=y.tag;if(B===5||B===6)y=y.stateNode,S?V2(T,y,S):U2(T,y);else if(!(B===4||Ni&&B===27)&&(y=y.child,y!==null))for(hd(y,S,T),y=y.sibling;y!==null;)hd(y,S,T),y=y.sibling}function qv(y,S,T){y=y.containerInfo;try{Em(y,T)}catch(B){ui(S,S.return,B)}}function y0(y,S){for(lb(y.containerInfo),ur=S;ur!==null;)if(y=ur,S=y.child,(y.subtreeFlags&1028)!==0&&S!==null)S.return=y,ur=S;else for(;ur!==null;){y=ur;var T=y.alternate;switch(S=y.flags,y.tag){case 0:break;case 11:case 15:break;case 1:if((S&1024)!==0&&T!==null){S=void 0;var B=y,H=T.memoizedProps;T=T.memoizedState;var K=B.stateNode;try{var ge=jl(B.type,H,B.elementType===B.type);S=K.getSnapshotBeforeUpdate(ge,T),K.__reactInternalSnapshotBeforeUpdate=S}catch(De){ui(B,B.return,De)}}break;case 3:(S&1024)!==0&&na&&K2(y.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((S&1024)!==0)throw Error(i(163))}if(S=y.sibling,S!==null){S.return=y.return,ur=S;break}ur=y.return}return ge=Nr,Nr=!1,ge}function Xv(y,S,T){var B=T.flags;switch(T.tag){case 0:case 11:case 15:md(y,T),B&4&&Uh(5,T);break;case 1:if(md(y,T),B&4)if(y=T.stateNode,S===null)try{y.componentDidMount()}catch(De){ui(T,T.return,De)}else{var H=jl(T.type,S.memoizedProps);S=S.memoizedState;try{y.componentDidUpdate(H,S,y.__reactInternalSnapshotBeforeUpdate)}catch(De){ui(T,T.return,De)}}B&64&&E2(T),B&512&&Oc(T,T.return);break;case 3:if(md(y,T),B&64&&(B=T.updateQueue,B!==null)){if(y=null,T.child!==null)switch(T.child.tag){case 27:case 5:y=Sm(T.child.stateNode);break;case 1:y=T.child.stateNode}try{qe(B,y)}catch(De){ui(T,T.return,De)}}break;case 26:if(pl){md(y,T),B&512&&Oc(T,T.return);break}case 27:case 5:md(y,T),S===null&&B&4&&uS(T),B&512&&Oc(T,T.return);break;case 12:md(y,T);break;case 13:md(y,T),B&4&&Kv(y,T);break;case 22:if(H=T.memoizedState!==null||bu,!H){S=S!==null&&S.memoizedState!==null||gs;var K=bu,ge=gs;bu=H,(gs=S)&&!ge?gd(y,T,(T.subtreeFlags&8772)!==0):md(y,T),bu=K,gs=ge}B&512&&(T.memoizedProps.mode==="manual"?Oc(T,T.return):Po(T,T.return));break;default:md(y,T)}}function pS(y){var S=y.alternate;S!==null&&(y.alternate=null,pS(S)),y.child=null,y.deletions=null,y.sibling=null,y.tag===5&&(S=y.stateNode,S!==null&&sk(S)),y.stateNode=null,y.return=null,y.dependencies=null,y.memoizedProps=null,y.memoizedState=null,y.pendingProps=null,y.stateNode=null,y.updateQueue=null}function Ra(y,S,T){for(T=T.child;T!==null;)Sf(y,S,T),T=T.sibling}function Sf(y,S,T){if(Vo&&typeof Vo.onCommitFiberUnmount=="function")try{Vo.onCommitFiberUnmount(As,T)}catch{}switch(T.tag){case 26:if(pl){gs||Po(T,S),Ra(y,S,T),T.memoizedState?Vh(T.memoizedState):T.stateNode&&Am(T.stateNode);break}case 27:if(Ni){gs||Po(T,S);var B=Fn,H=br;Fn=T.stateNode,Ra(y,S,T),Of(T.stateNode),Fn=B,br=H;break}case 5:gs||Po(T,S);case 6:if(na){if(B=Fn,H=br,Fn=null,Ra(y,S,T),Fn=B,br=H,Fn!==null)if(br)try{W2(Fn,T.stateNode)}catch(K){ui(T,S,K)}else try{LS(Fn,T.stateNode)}catch(K){ui(T,S,K)}}else Ra(y,S,T);break;case 18:na&&Fn!==null&&(br?O0(Fn,T.stateNode):sA(Fn,T.stateNode));break;case 4:na?(B=Fn,H=br,Fn=T.stateNode.containerInfo,br=!0,Ra(y,S,T),Fn=B,br=H):(Zl&&qv(T.stateNode,T,k0()),Ra(y,S,T));break;case 0:case 11:case 14:case 15:gs||ul(2,T,S),gs||ul(4,T,S),Ra(y,S,T);break;case 1:gs||(Po(T,S),B=T.stateNode,typeof B.componentWillUnmount=="function"&&Fo(T,S,B)),Ra(y,S,T);break;case 21:Ra(y,S,T);break;case 22:gs||Po(T,S),gs=(B=gs)||T.memoizedState!==null,Ra(y,S,T),gs=B;break;default:Ra(y,S,T)}}function Kv(y,S){if(Da&&S.memoizedState===null&&(y=S.alternate,y!==null&&(y=y.memoizedState,y!==null&&(y=y.dehydrated,y!==null))))try{uk(y)}catch(T){ui(S,S.return,T)}}function A2(y){switch(y.tag){case 13:case 19:var S=y.stateNode;return S===null&&(S=y.stateNode=new di),S;case 22:return y=y.stateNode,S=y._retryCache,S===null&&(S=y._retryCache=new di),S;default:throw Error(i(435,y.tag))}}function pd(y,S){var T=A2(y);S.forEach(function(B){var H=Mf.bind(null,y,B);T.has(B)||(T.add(B),B.then(H,H))})}function go(y,S){var T=S.deletions;if(T!==null)for(var B=0;B<T.length;B++){var H=T[B],K=y,ge=S;if(na){var De=ge;e:for(;De!==null;){switch(De.tag){case 27:case 5:Fn=De.stateNode,br=!1;break e;case 3:Fn=De.stateNode.containerInfo,br=!0;break e;case 4:Fn=De.stateNode.containerInfo,br=!0;break e}De=De.return}if(Fn===null)throw Error(i(160));Sf(K,ge,H),Fn=null,br=!1}else Sf(K,ge,H);K=H.alternate,K!==null&&(K.return=null),H.return=null}if(S.subtreeFlags&13878)for(S=S.child;S!==null;)mS(S,y),S=S.sibling}function mS(y,S){var T=y.alternate,B=y.flags;switch(y.tag){case 0:case 11:case 14:case 15:go(S,y),Uo(y),B&4&&(ul(3,y,y.return),Uh(3,y),ul(5,y,y.return));break;case 1:go(S,y),Uo(y),B&512&&(gs||T===null||Po(T,T.return)),B&64&&bu&&(y=y.updateQueue,y!==null&&(B=y.callbacks,B!==null&&(T=y.shared.hiddenCallbacks,y.shared.hiddenCallbacks=T===null?B:T.concat(B))));break;case 26:if(pl){var H=cs;go(S,y),Uo(y),B&512&&(gs||T===null||Po(T,T.return)),B&4&&(B=T!==null?T.memoizedState:null,S=y.memoizedState,T===null?S===null?y.stateNode===null?y.stateNode=$0(H,y.type,y.memoizedProps,y):L0(H,y.type,y.stateNode):y.stateNode=oA(H,S,y.memoizedProps):B!==S?(B===null?T.stateNode!==null&&Am(T.stateNode):Vh(B),S===null?L0(H,y.type,y.stateNode):oA(H,S,y.memoizedProps)):S===null&&y.stateNode!==null&&dS(y,y.memoizedProps,T.memoizedProps));break}case 27:if(Ni&&B&4&&y.alternate===null){H=y.stateNode;var K=y.memoizedProps;try{kf(H),dA(y.type,K,H,y)}catch(Jt){ui(y,y.return,Jt)}}case 5:if(go(S,y),Uo(y),B&512&&(gs||T===null||Po(T,T.return)),na){if(y.flags&32){S=y.stateNode;try{FS(S)}catch(Jt){ui(y,y.return,Jt)}}B&4&&y.stateNode!=null&&(S=y.memoizedProps,dS(y,S,T!==null?T.memoizedProps:S)),B&1024&&(YS=!0)}break;case 6:if(go(S,y),Uo(y),B&4&&na){if(y.stateNode===null)throw Error(i(162));B=y.memoizedProps,T=T!==null?T.memoizedProps:B,S=y.stateNode;try{z2(S,T,B)}catch(Jt){ui(y,y.return,Jt)}}break;case 3:if(pl?(lA(),H=cs,cs=vb(S.containerInfo),go(S,y),cs=H):go(S,y),Uo(y),B&4){if(na&&Da&&T!==null&&T.memoizedState.isDehydrated)try{ck(S.containerInfo)}catch(Jt){ui(y,y.return,Jt)}if(Zl){B=S.containerInfo,T=S.pendingChildren;try{Em(B,T)}catch(Jt){ui(y,y.return,Jt)}}}YS&&(YS=!1,T2(y));break;case 4:pl?(T=cs,cs=vb(y.stateNode.containerInfo),go(S,y),Uo(y),cs=T):(go(S,y),Uo(y)),B&4&&Zl&&qv(y.stateNode,y,y.stateNode.pendingChildren);break;case 12:go(S,y),Uo(y);break;case 13:go(S,y),Uo(y),y.child.flags&8192&&y.memoizedState!==null!=(T!==null&&T.memoizedState!==null)&&(wo=Ql()),B&4&&(B=y.updateQueue,B!==null&&(y.updateQueue=null,pd(y,B)));break;case 22:B&512&&(gs||T===null||Po(T,T.return)),H=y.memoizedState!==null;var ge=T!==null&&T.memoizedState!==null,De=bu,Qe=gs;if(bu=De||H,gs=Qe||ge,go(S,y),gs=Qe,bu=De,Uo(y),S=y.stateNode,S._current=y,S._visibility&=-3,S._visibility|=S._pendingVisibility&2,B&8192&&(S._visibility=H?S._visibility&-2:S._visibility|1,H&&(S=bu||gs,T===null||ge||S||um(y)),na&&(y.memoizedProps===null||y.memoizedProps.mode!=="manual"))){e:if(T=null,na)for(S=y;;){if(S.tag===5||pl&&S.tag===26||Ni&&S.tag===27){if(T===null){ge=T=S;try{K=ge.stateNode,H?j2(K):X2(ge.stateNode,ge.memoizedProps)}catch(Jt){ui(ge,ge.return,Jt)}}}else if(S.tag===6){if(T===null){ge=S;try{var It=ge.stateNode;H?q2(It):ok(It,ge.memoizedProps)}catch(Jt){ui(ge,ge.return,Jt)}}}else if((S.tag!==22&&S.tag!==23||S.memoizedState===null||S===y)&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===y)break e;for(;S.sibling===null;){if(S.return===null||S.return===y)break e;T===S&&(T=null),S=S.return}T===S&&(T=null),S.sibling.return=S.return,S=S.sibling}}B&4&&(B=y.updateQueue,B!==null&&(T=B.retryQueue,T!==null&&(B.retryQueue=null,pd(y,T))));break;case 19:go(S,y),Uo(y),B&4&&(B=y.updateQueue,B!==null&&(y.updateQueue=null,pd(y,B)));break;case 21:break;default:go(S,y),Uo(y)}}function Uo(y){var S=y.flags;if(S&2){try{if(na&&(!Ni||y.tag!==27)){e:{for(var T=y.return;T!==null;){if(fS(T)){var B=T;break e}T=T.return}throw Error(i(160))}switch(B.tag){case 27:if(Ni){var H=B.stateNode,K=g0(y);hd(y,K,H);break}case 5:var ge=B.stateNode;B.flags&32&&(FS(ge),B.flags&=-33);var De=g0(y);hd(y,De,ge);break;case 3:case 4:var Qe=B.stateNode.containerInfo,It=g0(y);hS(y,It,Qe);break;default:throw Error(i(161))}}}catch(Jt){ui(y,y.return,Jt)}y.flags&=-3}S&4096&&(y.flags&=-4097)}function T2(y){if(y.subtreeFlags&1024)for(y=y.child;y!==null;){var S=y;T2(S),S.tag===5&&S.flags&1024&&db(S.stateNode),y=y.sibling}}function md(y,S){if(S.subtreeFlags&8772)for(S=S.child;S!==null;)Xv(y,S.alternate,S),S=S.sibling}function um(y){for(y=y.child;y!==null;){var S=y;switch(S.tag){case 0:case 11:case 14:case 15:ul(4,S,S.return),um(S);break;case 1:Po(S,S.return);var T=S.stateNode;typeof T.componentWillUnmount=="function"&&Fo(S,S.return,T),um(S);break;case 26:case 27:case 5:Po(S,S.return),um(S);break;case 22:Po(S,S.return),S.memoizedState===null&&um(S);break;default:um(S)}y=y.sibling}}function gd(y,S,T){for(T=T&&(S.subtreeFlags&8772)!==0,S=S.child;S!==null;){var B=S.alternate,H=y,K=S,ge=K.flags;switch(K.tag){case 0:case 11:case 15:gd(H,K,T),Uh(4,K);break;case 1:if(gd(H,K,T),B=K,H=B.stateNode,typeof H.componentDidMount=="function")try{H.componentDidMount()}catch(It){ui(B,B.return,It)}if(B=K,H=B.updateQueue,H!==null){var De=B.stateNode;try{var Qe=H.shared.hiddenCallbacks;if(Qe!==null)for(H.shared.hiddenCallbacks=null,H=0;H<Qe.length;H++)Te(Qe[H],De)}catch(It){ui(B,B.return,It)}}T&&ge&64&&E2(K),Oc(K,K.return);break;case 26:case 27:case 5:gd(H,K,T),T&&B===null&&ge&4&&uS(K),Oc(K,K.return);break;case 12:gd(H,K,T);break;case 13:gd(H,K,T),T&&ge&4&&Kv(H,K);break;case 22:K.memoizedState===null&&gd(H,K,T),Oc(K,K.return);break;default:gd(H,K,T)}S=S.sibling}}function Yv(y,S){var T=null;y!==null&&y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(T=y.memoizedState.cachePool.pool),y=null,S.memoizedState!==null&&S.memoizedState.cachePool!==null&&(y=S.memoizedState.cachePool.pool),y!==T&&(y!=null&&y.refCount++,T!=null&&Zt(T))}function v0(y,S){y=null,S.alternate!==null&&(y=S.alternate.memoizedState.cache),S=S.memoizedState.cache,S!==y&&(S.refCount++,y!=null&&Zt(y))}function fa(y,S,T,B){if(S.subtreeFlags&10256)for(S=S.child;S!==null;)gS(y,S,T,B),S=S.sibling}function gS(y,S,T,B){var H=S.flags;switch(S.tag){case 0:case 11:case 15:fa(y,S,T,B),H&2048&&Uh(9,S);break;case 3:fa(y,S,T,B),H&2048&&(y=null,S.alternate!==null&&(y=S.alternate.memoizedState.cache),S=S.memoizedState.cache,S!==y&&(S.refCount++,y!=null&&Zt(y)));break;case 12:if(H&2048){fa(y,S,T,B),y=S.stateNode;try{var K=S.memoizedProps,ge=K.id,De=K.onPostCommit;typeof De=="function"&&De(ge,S.alternate===null?"mount":"update",y.passiveEffectDuration,-0)}catch(Qe){ui(S,S.return,Qe)}}else fa(y,S,T,B);break;case 23:break;case 22:K=S.stateNode,S.memoizedState!==null?K._visibility&4?fa(y,S,T,B):Wa(y,S):K._visibility&4?fa(y,S,T,B):(K._visibility|=4,Na(y,S,T,B,(S.subtreeFlags&10256)!==0)),H&2048&&Yv(S.alternate,S);break;case 24:fa(y,S,T,B),H&2048&&v0(S.alternate,S);break;default:fa(y,S,T,B)}}function Na(y,S,T,B,H){for(H=H&&(S.subtreeFlags&10256)!==0,S=S.child;S!==null;){var K=y,ge=S,De=T,Qe=B,It=ge.flags;switch(ge.tag){case 0:case 11:case 15:Na(K,ge,De,Qe,H),Uh(8,ge);break;case 23:break;case 22:var Jt=ge.stateNode;ge.memoizedState!==null?Jt._visibility&4?Na(K,ge,De,Qe,H):Wa(K,ge):(Jt._visibility|=4,Na(K,ge,De,Qe,H)),H&&It&2048&&Yv(ge.alternate,ge);break;case 24:Na(K,ge,De,Qe,H),H&&It&2048&&v0(ge.alternate,ge);break;default:Na(K,ge,De,Qe,H)}S=S.sibling}}function Wa(y,S){if(S.subtreeFlags&10256)for(S=S.child;S!==null;){var T=y,B=S,H=B.flags;switch(B.tag){case 22:Wa(T,B),H&2048&&Yv(B.alternate,B);break;case 24:Wa(T,B),H&2048&&v0(B.alternate,B);break;default:Wa(T,B)}S=S.sibling}}function ql(y){if(y.subtreeFlags&Sl)for(y=y.child;y!==null;)Jv(y),y=y.sibling}function Jv(y){switch(y.tag){case 26:ql(y),y.flags&Sl&&(y.memoizedState!==null?uA(cs,y.memoizedState,y.memoizedProps):bo(y.type,y.memoizedProps));break;case 5:ql(y),y.flags&Sl&&bo(y.type,y.memoizedProps);break;case 3:case 4:if(pl){var S=cs;cs=vb(y.stateNode.containerInfo),ql(y),cs=S}else ql(y);break;case 22:y.memoizedState===null&&(S=y.alternate,S!==null&&S.memoizedState!==null?(S=Sl,Sl=16777216,ql(y),Sl=S):ql(y));break;default:ql(y)}}function b0(y){var S=y.alternate;if(S!==null&&(y=S.child,y!==null)){S.child=null;do S=y.sibling,y.sibling=null,y=S;while(y!==null)}}function wf(y){var S=y.deletions;if((y.flags&16)!==0){if(S!==null)for(var T=0;T<S.length;T++){var B=S[T];ur=B,yS(B,y)}b0(y)}if(y.subtreeFlags&10256)for(y=y.child;y!==null;)Zv(y),y=y.sibling}function Zv(y){switch(y.tag){case 0:case 11:case 15:wf(y),y.flags&2048&&ul(9,y,y.return);break;case 3:wf(y);break;case 12:wf(y);break;case 22:var S=y.stateNode;y.memoizedState!==null&&S._visibility&4&&(y.return===null||y.return.tag!==13)?(S._visibility&=-5,yd(y)):wf(y);break;default:wf(y)}}function yd(y){var S=y.deletions;if((y.flags&16)!==0){if(S!==null)for(var T=0;T<S.length;T++){var B=S[T];ur=B,yS(B,y)}b0(y)}for(y=y.child;y!==null;){switch(S=y,S.tag){case 0:case 11:case 15:ul(8,S,S.return),yd(S);break;case 22:T=S.stateNode,T._visibility&4&&(T._visibility&=-5,yd(S));break;default:yd(S)}y=y.sibling}}function yS(y,S){for(;ur!==null;){var T=ur;switch(T.tag){case 0:case 11:case 15:ul(8,T,S);break;case 23:case 22:if(T.memoizedState!==null&&T.memoizedState.cachePool!==null){var B=T.memoizedState.cachePool.pool;B!=null&&B.refCount++}break;case 24:Zt(T.memoizedState.cache)}if(B=T.child,B!==null)B.return=T,ur=B;else e:for(T=y;ur!==null;){B=ur;var H=B.sibling,K=B.return;if(pS(B),B===T){ur=null;break e}if(H!==null){H.return=K,ur=H;break e}ur=K}}}function dm(y){var S=k2(y);if(S!=null){if(typeof S.memoizedProps["data-testname"]!="string")throw Error(i(364));return S}if(y=OS(y),y===null)throw Error(i(362));return y.stateNode.current}function Cf(y,S){var T=y.tag;switch(S.$$typeof){case Bm:if(y.type===S.value)return!0;break;case rc:e:{for(S=S.value,y=[y,0],T=0;T<y.length;){var B=y[T++],H=B.tag,K=y[T++],ge=S[K];if(H!==5&&H!==26&&H!==27||!Cm(B)){for(;ge!=null&&Cf(B,ge);)K++,ge=S[K];if(K===S.length){S=!0;break e}else for(B=B.child;B!==null;)y.push(B,K),B=B.sibling}}S=!1}return S;case Yi:if((T===5||T===26||T===27)&&L2(y.stateNode,S.value))return!0;break;case xu:if((T===5||T===6||T===26||T===27)&&(y=$2(y),y!==null&&0<=y.indexOf(S.value)))return!0;break;case Gc:if((T===5||T===26||T===27)&&(y=y.memoizedProps["data-testname"],typeof y=="string"&&y.toLowerCase()===S.value.toLowerCase()))return!0;break;default:throw Error(i(365))}return!1}function vS(y){switch(y.$$typeof){case Bm:return"<"+(a(y.value)||"Unknown")+">";case rc:return":has("+(vS(y)||"")+")";case Yi:return'[role="'+y.value+'"]';case xu:return'"'+y.value+'"';case Gc:return'[data-testname="'+y.value+'"]';default:throw Error(i(365))}}function zo(y,S){var T=[];y=[y,0];for(var B=0;B<y.length;){var H=y[B++],K=H.tag,ge=y[B++],De=S[ge];if(K!==5&&K!==26&&K!==27||!Cm(H)){for(;De!=null&&Cf(H,De);)ge++,De=S[ge];if(ge===S.length)T.push(H);else for(H=H.child;H!==null;)y.push(H,ge),H=H.sibling}}return T}function x0(y,S){if(!Df)throw Error(i(363));y=dm(y),y=zo(y,S),S=[],y=Array.from(y);for(var T=0;T<y.length;){var B=y[T++],H=B.tag;if(H===5||H===26||H===27)Cm(B)||S.push(B.stateNode);else for(B=B.child;B!==null;)y.push(B),B=B.sibling}return S}function Cs(){if((Zr&2)!==0&&$r!==0)return $r&-$r;if(Qn.T!==null){var y=yl;return y!==0?y:at()}return O2()}function bS(){_l===0&&(_l=($r&536870912)===0||jr?$():536870912);var y=vl.current;return y!==null&&(y.flags|=32),_l}function ha(y,S,T){(y===fi&&_i===2||y.cancelPendingCommit!==null)&&(Ia(y,0),Ho(y,$r,_l,!1)),k(y,T),((Zr&2)===0||y!==fi)&&(y===fi&&((Zr&2)===0&&(Id|=T),ki===4&&Ho(y,$r,_l,!1)),ot(y))}function _f(y,S,T){if((Zr&6)!==0)throw Error(i(327));var B=!T&&(S&60)===0&&(S&y.expiredLanes)===0||R(y,S),H=B?SS(y,S):eb(y,S,!0),K=B;do{if(H===0){wl&&!B&&Ho(y,S,0,!1);break}else if(H===6)Ho(y,S,0,!sc);else{if(T=y.current.alternate,K&&!fm(T)){H=eb(y,S,!1),K=!1;continue}if(H===2){if(K=S,y.errorRecoveryDisabledLanes&K)var ge=0;else ge=y.pendingLanes&-536870913,ge=ge!==0?ge:ge&536870912?536870912:0;if(ge!==0){S=ge;e:{var De=y;H=ip;var Qe=Da&&De.current.memoizedState.isDehydrated;if(Qe&&(Ia(De,ge).flags|=256),ge=eb(De,ge,!1),ge!==2){if(sa&&!Qe){De.errorRecoveryDisabledLanes|=K,Id|=K,H=4;break e}K=ys,ys=H,K!==null&&S0(K)}H=ge}if(K=!1,H!==2)continue}}if(H===1){Ia(y,0),Ho(y,S,0,!0);break}e:{switch(B=y,H){case 0:case 1:throw Error(i(345));case 4:if((S&4194176)===S){Ho(B,S,_l,!sc);break e}break;case 2:ys=null;break;case 3:case 5:break;default:throw Error(i(329))}if(B.finishedWork=T,B.finishedLanes=S,(S&62914560)===S&&(K=wo+300-Ql(),10<K)){if(Ho(B,S,_l,!sc),M(B,0)!==0)break e;B.timeoutHandle=Ps(Qv.bind(null,B,T,ys,G0,Rb,S,_l,Id,Su,sc,2,-0,0),K);break e}Qv(B,T,ys,G0,Rb,S,_l,Id,Su,sc,0,-0,0)}}break}while(!0);ot(y)}function S0(y){ys===null?ys=y:ys.push.apply(ys,y)}function Qv(y,S,T,B,H,K,ge,De,Qe,It,Jt,dn,gn){var dr=S.subtreeFlags;if((dr&8192||(dr&16785408)===16785408)&&(DS(),Jv(S),S=Us(),S!==null)){y.cancelPendingCommit=S(Af.bind(null,y,T,B,H,ge,De,Qe,1,dn,gn)),Ho(y,K,ge,!It);return}Af(y,T,B,H,ge,De,Qe,Jt,dn,gn)}function fm(y){for(var S=y;;){var T=S.tag;if((T===0||T===11||T===15)&&S.flags&16384&&(T=S.updateQueue,T!==null&&(T=T.stores,T!==null)))for(var B=0;B<T.length;B++){var H=T[B],K=H.getSnapshot;H=H.value;try{if(!Go(K(),H))return!1}catch{return!1}}if(T=S.child,S.subtreeFlags&16384&&T!==null)T.return=S,S=T;else{if(S===y)break;for(;S.sibling===null;){if(S.return===null||S.return===y)return!0;S=S.return}S.sibling.return=S.return,S=S.sibling}}return!0}function Ho(y,S,T,B){S&=~V0,S&=~Id,y.suspendedLanes|=S,y.pingedLanes&=~S,B&&(y.warmLanes|=S),B=y.expirationTimes;for(var H=S;0<H;){var K=31-xo(H),ge=1<<K;B[K]=-1,H&=~ge}T!==0&&G(y,T,S)}function w0(){return(Zr&6)===0?(Ut(0),!1):!0}function hm(){if(Gn!==null){if(_i===0)var y=Gn.return;else y=Gn,xl=Vc=null,se(y),Ff=null,Pf=0,y=Gn;for(;y!==null;)jv(y.alternate,y),y=y.return;Gn=null}}function Ia(y,S){y.finishedWork=null,y.finishedLanes=0;var T=y.timeoutHandle;T!==Nf&&(y.timeoutHandle=Nf,cb(T)),T=y.cancelPendingCommit,T!==null&&(y.cancelPendingCommit=null,T()),hm(),fi=y,Gn=T=Kl(y.current,null),$r=S,_i=0,qa=null,sc=!1,wl=R(y,S),sa=!1,Su=_l=V0=Id=Cl=ki=0,ys=ip=null,Rb=!1,(S&8)!==0&&(S|=S&32);var B=y.entangledLanes;if(B!==0)for(y=y.entanglements,B&=S;0<B;){var H=31-xo(B),K=1<<H;S|=y[H],B&=~K}return Xa=S,Le(),T}function dl(y,S){wr=null,Qn.H=ms,S===Im?(S=un(),_i=3):S===z0?(S=un(),_i=4):_i=S===Tb?8:S!==null&&typeof S=="object"&&typeof S.then=="function"?6:1,qa=S,Gn===null&&(ki=1,cl(y,Y(S,y.current)))}function Ef(){var y=vl.current;return y===null?!0:($r&4194176)===$r?Ii===null:($r&62914560)===$r||($r&536870912)!==0?y===Ii:!1}function lu(){var y=Qn.H;return Qn.H=ms,y===null?ms:y}function cu(){var y=Qn.A;return Qn.A=Om,y}function vd(){ki=4,sc||($r&4194176)!==$r&&vl.current!==null||(wl=!0),(Cl&134217727)===0&&(Id&134217727)===0||fi===null||Ho(fi,$r,_l,!1)}function eb(y,S,T){var B=Zr;Zr|=2;var H=lu(),K=cu();(fi!==y||$r!==S)&&(G0=null,Ia(y,S)),S=!1;var ge=ki;e:do try{if(_i!==0&&Gn!==null){var De=Gn,Qe=qa;switch(_i){case 8:hm(),ge=6;break e;case 3:case 2:case 6:vl.current===null&&(S=!0);var It=_i;if(_i=0,qa=null,Xl(y,De,Qe,It),T&&wl){ge=0;break e}break;default:It=_i,_i=0,qa=null,Xl(y,De,Qe,It)}}xS(),ge=ki;break}catch(Jt){dl(y,Jt)}while(!0);return S&&y.shellSuspendCounter++,xl=Vc=null,Zr=B,Qn.H=H,Qn.A=K,Gn===null&&(fi=null,$r=0,Le()),ge}function xS(){for(;Gn!==null;)ls(Gn)}function SS(y,S){var T=Zr;Zr|=2;var B=lu(),H=cu();fi!==y||$r!==S?(G0=null,$m=Ql()+500,Ia(y,S)):wl=R(y,S);e:do try{if(_i!==0&&Gn!==null){S=Gn;var K=qa;t:switch(_i){case 1:_i=0,qa=null,Xl(y,S,K,1);break;case 2:if(en(K)){_i=0,qa=null,ni(S);break}S=function(){_i===2&&fi===y&&(_i=7),ot(y)},K.then(S,S);break e;case 3:_i=7;break e;case 4:_i=5;break e;case 7:en(K)?(_i=0,qa=null,ni(S)):(_i=0,qa=null,Xl(y,S,K,7));break;case 5:var ge=null;switch(Gn.tag){case 26:ge=Gn.memoizedState;case 5:case 27:var De=Gn,Qe=De.type,It=De.pendingProps;if(ge?Gh(ge):ub(Qe,It)){_i=0,qa=null;var Jt=De.sibling;if(Jt!==null)Gn=Jt;else{var dn=De.return;dn!==null?(Gn=dn,fl(dn)):Gn=null}break t}}_i=0,qa=null,Xl(y,S,K,5);break;case 6:_i=0,qa=null,Xl(y,S,K,6);break;case 8:hm(),ki=6;break e;default:throw Error(i(462))}}yo();break}catch(gn){dl(y,gn)}while(!0);return xl=Vc=null,Qn.H=B,Qn.A=H,Zr=T,Gn!==null?0:(fi=null,$r=0,Le(),ki)}function yo(){for(;Gn!==null&&!pA();)ls(Gn)}function ls(y){var S=m0(y.alternate,y,Xa);y.memoizedProps=y.pendingProps,S===null?fl(y):Gn=S}function ni(y){var S=y,T=S.alternate;switch(S.tag){case 15:case 0:S=Uv(T,S,S.pendingProps,S.type,void 0,$r);break;case 11:S=Uv(T,S,S.pendingProps,S.type.render,S.ref,$r);break;case 5:se(S);default:jv(T,S),S=Gn=_0(S,Xa),S=m0(T,S,Xa)}y.memoizedProps=y.pendingProps,S===null?fl(y):Gn=S}function Xl(y,S,T,B){xl=Vc=null,se(S),Ff=null,Pf=0;var H=S.return;try{if(om(y,H,S,T,$r)){ki=1,cl(y,Y(T,y.current)),Gn=null;return}}catch(K){if(H!==null)throw Gn=H,K;ki=1,cl(y,Y(T,y.current)),Gn=null;return}S.flags&32768?(jr||B===1?y=!0:wl||($r&536870912)!==0?y=!1:(sc=y=!0,(B===2||B===3||B===6)&&(B=vl.current,B!==null&&B.tag===13&&(B.flags|=16384))),tb(S,y)):fl(S)}function fl(y){var S=y;do{if((S.flags&32768)!==0){tb(S,sc);return}y=S.return;var T=Wv(S.alternate,S,Xa);if(T!==null){Gn=T;return}if(S=S.sibling,S!==null){Gn=S;return}Gn=S=y}while(S!==null);ki===0&&(ki=5)}function tb(y,S){do{var T=cS(y.alternate,y);if(T!==null){T.flags&=32767,Gn=T;return}if(T=y.return,T!==null&&(T.flags|=32768,T.subtreeFlags=0,T.deletions=null),!S&&(y=y.sibling,y!==null)){Gn=y;return}Gn=y=T}while(y!==null);ki=6,Gn=null}function Af(y,S,T,B,H,K,ge,De,Qe,It){var Jt=Qn.T,dn=_d();try{ja(2),Qn.T=null,M2(y,S,T,B,dn,H,K,ge,De,Qe,It)}finally{Qn.T=Jt,ja(dn)}}function M2(y,S,T,B,H,K,ge,De){do Bc();while(wu!==null);if((Zr&6)!==0)throw Error(i(327));var Qe=y.finishedWork;if(B=y.finishedLanes,Qe===null)return null;if(y.finishedWork=null,y.finishedLanes=0,Qe===y.current)throw Error(i(177));y.callbackNode=null,y.callbackPriority=0,y.cancelPendingCommit=null;var It=Qe.lanes|Qe.childLanes;if(It|=zc,P(y,B,It,K,ge,De),y===fi&&(Gn=fi=null,$r=0),(Qe.subtreeFlags&10256)===0&&(Qe.flags&10256)===0||Wc||(Wc=!0,Gf=It,Nb=T,xd(Cb,function(){return Bc(),null})),T=(Qe.flags&15990)!==0,(Qe.subtreeFlags&15990)!==0||T?(T=Qn.T,Qn.T=null,K=_d(),ja(2),ge=Zr,Zr|=4,y0(y,Qe),mS(Qe,y),D2(y.containerInfo),y.current=Qe,Xv(y,Qe.alternate,Qe),Sb(),Zr=ge,ja(K),Qn.T=T):y.current=Qe,Wc?(Wc=!1,wu=y,sp=B):wS(y,It),It=y.pendingLanes,It===0&&(Vf=null),z(Qe.stateNode),ot(y),S!==null)for(H=y.onRecoverableError,Qe=0;Qe<S.length;Qe++)It=S[Qe],H(It.value,{componentStack:It.stack});return(sp&3)!==0&&Bc(),It=y.pendingLanes,(B&4194218)!==0&&(It&42)!==0?y===Ib?Lm++:(Lm=0,Ib=y):Lm=0,Ut(0),null}function wS(y,S){(y.pooledCacheLanes&=S)===0&&(S=y.pooledCache,S!=null&&(y.pooledCache=null,Zt(S)))}function Bc(){if(wu!==null){var y=wu,S=Gf;Gf=0;var T=X(sp),B=32>T?32:T;T=Qn.T;var H=_d();try{if(ja(B),Qn.T=null,wu===null)var K=!1;else{B=Nb,Nb=null;var ge=wu,De=sp;if(wu=null,sp=0,(Zr&6)!==0)throw Error(i(331));var Qe=Zr;if(Zr|=4,Zv(ge.current),gS(ge,ge.current,De,B),Zr=Qe,Ut(0,!1),Vo&&typeof Vo.onPostCommitFiberRoot=="function")try{Vo.onPostCommitFiberRoot(As,ge)}catch{}K=!0}return K}finally{ja(H),Qn.T=T,wS(y,S)}}return!1}function pm(y,S,T){S=Y(T,S),S=dd(y.stateNode,S,2),y=Mt(y,S,2),y!==null&&(k(y,2),ot(y))}function ui(y,S,T){if(y.tag===3)pm(y,y,T);else for(;S!==null;){if(S.tag===3){pm(S,y,T);break}else if(S.tag===1){var B=S.stateNode;if(typeof S.type.getDerivedStateFromError=="function"||typeof B.componentDidCatch=="function"&&(Vf===null||!Vf.has(B))){y=Y(T,y),T=s0(2),B=Mt(S,T,2),B!==null&&(a0(T,B,S,y),k(B,2),ot(B));break}}S=S.return}}function zh(y,S,T){var B=y.pingCache;if(B===null){B=y.pingCache=new ic;var H=new Set;B.set(S,H)}else H=B.get(S),H===void 0&&(H=new Set,B.set(S,H));H.has(T)||(sa=!0,H.add(T),y=CS.bind(null,y,S,T),S.then(y,y))}function CS(y,S,T){var B=y.pingCache;B!==null&&B.delete(S),y.pingedLanes|=y.suspendedLanes&T,y.warmLanes&=~T,fi===y&&($r&T)===T&&(ki===4||ki===3&&($r&62914560)===$r&&300>Ql()-wo?(Zr&2)===0&&Ia(y,0):V0|=T,Su===$r&&(Su=0)),ot(y)}function Tf(y,S){S===0&&(S=N()),y=je(y,S),y!==null&&(k(y,S),ot(y))}function bd(y){var S=y.memoizedState,T=0;S!==null&&(T=S.retryLane),Tf(y,T)}function Mf(y,S){var T=0;switch(y.tag){case 13:var B=y.stateNode,H=y.memoizedState;H!==null&&(T=H.retryLane);break;case 19:B=y.stateNode;break;case 22:B=y.stateNode._retryCache;break;default:throw Error(i(314))}B!==null&&B.delete(S),Tf(y,T)}function xd(y,S){return F0(y,S)}function _S(y,S,T,B){this.tag=y,this.key=T,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=S,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=B,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function C0(y){return y=y.prototype,!(!y||!y.isReactComponent)}function Kl(y,S){var T=y.alternate;return T===null?(T=t(y.tag,S,y.key,y.mode),T.elementType=y.elementType,T.type=y.type,T.stateNode=y.stateNode,T.alternate=y,y.alternate=T):(T.pendingProps=S,T.type=y.type,T.flags=0,T.subtreeFlags=0,T.deletions=null),T.flags=y.flags&31457280,T.childLanes=y.childLanes,T.lanes=y.lanes,T.child=y.child,T.memoizedProps=y.memoizedProps,T.memoizedState=y.memoizedState,T.updateQueue=y.updateQueue,S=y.dependencies,T.dependencies=S===null?null:{lanes:S.lanes,firstContext:S.firstContext},T.sibling=y.sibling,T.index=y.index,T.ref=y.ref,T.refCleanup=y.refCleanup,T}function _0(y,S){y.flags&=31457282;var T=y.alternate;return T===null?(y.childLanes=0,y.lanes=S,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=T.childLanes,y.lanes=T.lanes,y.child=T.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=T.memoizedProps,y.memoizedState=T.memoizedState,y.updateQueue=T.updateQueue,y.type=T.type,S=T.dependencies,y.dependencies=S===null?null:{lanes:S.lanes,firstContext:S.firstContext}),y}function uu(y,S,T,B,H,K){var ge=0;if(B=y,typeof y=="function")C0(y)&&(ge=1);else if(typeof y=="string")ge=pl&&Ni?B0(y,T,ra.current)?26:fu(y)?27:5:pl?B0(y,T,ra.current)?26:5:Ni&&fu(y)?27:5;else e:switch(y){case Rf:return ps(T.children,H,K,S);case M0:ge=8,H|=24;break;case sb:return y=t(12,T,S,H|2),y.elementType=sb,y.lanes=K,y;case ab:return y=t(13,T,S,H),y.elementType=ab,y.lanes=K,y;case vm:return y=t(19,T,S,H),y.elementType=vm,y.lanes=K,y;case TS:return E0(T,H,K,S);default:if(typeof y=="object"&&y!==null)switch(y.$$typeof){case R0:case $c:ge=10;break e;case AS:ge=9;break e;case N0:ge=11;break e;case ob:ge=14;break e;case Jl:ge=16,B=null;break e}ge=29,T=Error(i(130,y===null?"null":typeof y,"")),B=null}return S=t(ge,T,S,H),S.elementType=y,S.type=B,S.lanes=K,S}function ps(y,S,T,B){return y=t(7,y,B,S),y.lanes=T,y}function E0(y,S,T,B){y=t(22,y,B,S),y.elementType=TS,y.lanes=T;var H={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var K=H._current;if(K===null)throw Error(i(456));if((H._pendingVisibility&2)===0){var ge=je(K,2);ge!==null&&(H._pendingVisibility|=2,ha(ge,K,2))}},attach:function(){var K=H._current;if(K===null)throw Error(i(456));if((H._pendingVisibility&2)!==0){var ge=je(K,2);ge!==null&&(H._pendingVisibility&=-3,ha(ge,K,2))}}};return y.stateNode=H,y}function nb(y,S,T){return y=t(6,y,null,S),y.lanes=T,y}function ES(y,S,T){return S=t(4,y.children!==null?y.children:[],y.key,S),S.lanes=T,S.stateNode={containerInfo:y.containerInfo,pendingChildren:null,implementation:y.implementation},S}function rk(y,S,T,B,H,K,ge,De){this.tag=1,this.containerInfo=y,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Nf,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=I(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=I(0),this.hiddenUpdates=I(null),this.identifierPrefix=B,this.onUncaughtError=H,this.onCaughtError=K,this.onRecoverableError=ge,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=De,this.incompleteTransitions=new Map}function R2(y,S,T,B,H,K,ge,De,Qe,It,Jt,dn){return y=new rk(y,S,T,ge,De,Qe,It,dn),S=1,K===!0&&(S|=24),K=t(3,null,null,S),y.current=K,K.stateNode=y,S=Ht(),S.refCount++,y.pooledCache=S,S.refCount++,K.memoizedState={element:B,isDehydrated:T,cache:S},_t(K),y}function Fs(y){return y?(y=Bf,y):Bf}function rb(y){var S=y._reactInternals;if(S===void 0)throw typeof y.render=="function"?Error(i(188)):(y=Object.keys(y).join(","),Error(i(268,y)));return y=p(S),y=y!==null?g(y):null,y===null?null:Sm(y.stateNode)}function mm(y,S,T,B,H,K){H=Fs(H),B.context===null?B.context=H:B.pendingContext=H,B=yt(S),B.payload={element:T},K=K===void 0?null:K,K!==null&&(B.callback=K),T=Mt(y,B,S),T!==null&&(ha(T,y,S),an(T,y,S))}function gm(y,S){if(y=y.memoizedState,y!==null&&y.dehydrated!==null){var T=y.retryLane;y.retryLane=T!==0&&T<S?T:S}}function A0(y,S){gm(y,S),(y=y.alternate)&&gm(y,S)}var pr={},ym=wv(),hl=Yge(),ib=Object.assign,ik=Symbol.for("react.element"),T0=Symbol.for("react.transitional.element"),Yl=Symbol.for("react.portal"),Rf=Symbol.for("react.fragment"),M0=Symbol.for("react.strict_mode"),sb=Symbol.for("react.profiler"),R0=Symbol.for("react.provider"),AS=Symbol.for("react.consumer"),$c=Symbol.for("react.context"),N0=Symbol.for("react.forward_ref"),ab=Symbol.for("react.suspense"),vm=Symbol.for("react.suspense_list"),ob=Symbol.for("react.memo"),Jl=Symbol.for("react.lazy"),TS=Symbol.for("react.offscreen"),N2=Symbol.for("react.memo_cache_sentinel"),Sd=Symbol.iterator,MS=Symbol.for("react.client.reference"),Qn=ym.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,du,wd,Hh=!1,bm=Array.isArray,RS=e.rendererVersion,I0=e.rendererPackageName,xm=e.extraDevToolsConfig,Sm=e.getPublicInstance,I2=e.getRootHostContext,wm=e.getChildHostContext,lb=e.prepareForCommit,D2=e.resetAfterCommit,NS=e.createInstance,D0=e.appendInitialChild,Cd=e.finalizeInitialChildren,mr=e.shouldSetTextContent,gi=e.createTextInstance,Ps=e.scheduleTimeout,cb=e.cancelTimeout,Nf=e.noTimeout,vo=e.isPrimaryRenderer;e.warnsIfNotActing;var na=e.supportsMutation,Zl=e.supportsPersistence,Da=e.supportsHydration,k2=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var _s=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var ja=e.setCurrentUpdatePriority,_d=e.getCurrentUpdatePriority,O2=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var B2=e.shouldAttemptEagerTransition,sk=e.detachDeletedInstance;e.requestPostPaintCallback;var IS=e.maySuspendCommit,ub=e.preloadInstance,DS=e.startSuspendingCommit,bo=e.suspendInstance,Us=e.waitForCommitToBeReady,If=e.NotPendingTransition,Lc=e.HostTransitionContext,db=e.resetFormInstance;e.bindToConsole;var kS=e.supportsMicrotasks,Ed=e.scheduleMicrotask,Df=e.supportsTestSelectors,OS=e.findFiberRoot,BS=e.getBoundingRect,$2=e.getTextContent,Cm=e.isHiddenSubtree,L2=e.matchAccessibilityRole,F2=e.setFocusIfFocusable,P2=e.setupIntersectionObserver,U2=e.appendChild,$S=e.appendChildToContainer,z2=e.commitTextUpdate,ak=e.commitMount,H2=e.commitUpdate,V2=e.insertBefore,G2=e.insertInContainerBefore,LS=e.removeChild,W2=e.removeChildFromContainer,FS=e.resetTextContent,j2=e.hideInstance,q2=e.hideTextInstance,X2=e.unhideInstance,ok=e.unhideTextInstance,K2=e.clearContainer,_m=e.cloneInstance,k0=e.createContainerChildSet,PS=e.appendChildToContainerChildSet,fb=e.finalizeContainerChildren,Em=e.replaceContainerChildren,US=e.cloneHiddenInstance,zS=e.cloneHiddenTextInstance,hb=e.isSuspenseInstancePending,pb=e.isSuspenseInstanceFallback,Y2=e.getSuspenseInstanceFallbackErrorDetails,J2=e.registerSuspenseInstanceRetry,HS=e.canHydrateFormStateMarker,Z2=e.isFormStateMarkerMatching,VS=e.getNextHydratableSibling,mb=e.getFirstHydratableChild,Q2=e.getFirstHydratableChildWithinContainer,eA=e.getFirstHydratableChildWithinSuspenseInstance,lk=e.canHydrateInstance,GS=e.canHydrateTextInstance,tA=e.canHydrateSuspenseInstance,nA=e.hydrateInstance,WS=e.hydrateTextInstance,rA=e.hydrateSuspenseInstance,iA=e.getNextHydratableInstanceAfterSuspenseInstance,ck=e.commitHydratedContainer,uk=e.commitHydratedSuspenseInstance,sA=e.clearSuspenseBoundary,O0=e.clearSuspenseBoundaryFromContainer,gb=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var yb=e.validateHydratableInstance,aA=e.validateHydratableTextInstance,pl=e.supportsResources,B0=e.isHostHoistableType,vb=e.getHoistableRoot,jS=e.getResource,oA=e.acquireResource,Vh=e.releaseResource,$0=e.hydrateHoistable,L0=e.mountHoistable,Am=e.unmountHoistable,bb=e.createHoistableInstance,lA=e.prepareToCommitHoistables,cA=e.mayResourceSuspendCommit,Gh=e.preloadResource,uA=e.suspendResource,Ni=e.supportsSingletons,Fc=e.resolveSingletonInstance,kf=e.clearSingleton,dA=e.acquireSingletonInstance,Of=e.releaseSingletonInstance,fu=e.isHostSingletonType,Es=[],Ad=-1,Bf={},xo=Math.clz32?Math.clz32:E,fA=Math.log,hA=Math.LN2,hu=128,Wh=4194304,F0=hl.unstable_scheduleCallback,xb=hl.unstable_cancelCallback,pA=hl.unstable_shouldYield,Sb=hl.unstable_requestPaint,Ql=hl.unstable_now,wb=hl.unstable_ImmediatePriority,mA=hl.unstable_UserBlockingPriority,Cb=hl.unstable_NormalPriority,dk=hl.unstable_IdlePriority,gA=hl.log,pa=hl.unstable_setDisableYieldValue,As=null,Vo=null,Go=typeof Object.is=="function"?Object.is:Q,qS=new WeakMap,jh=[],qh=0,Xh=null,Tm=0,ml=[],gl=0,$f=null,Pc=1,Uc="",ra=b(null),Mm=b(null),pu=b(null),Kh=b(null),ka=null,Oa=null,jr=!1,ec=null,ma=!1,P0=Error(i(519)),tc=[],Yh=0,zc=0,U0=null,Td=null,Jh=!1,Pi=!1,XS=!1,Rm=0,Nm=null,Zh=0,yl=0,Qh=null,Md=!1,ep=!1,mu=Object.prototype.hasOwnProperty,Im=Error(i(460)),z0=Error(i(474)),H0={then:function(){}},Lf=null,Ff=null,Pf=0,Uf=es(!0),gu=es(!1),Ui=b(null),Dm=b(0),vl=b(null),Ii=null,ia=b(0),Rd=0,wr=null,Vn=null,Jr=null,nc=!1,tp=!1,zf=!1,_b=0,np=0,ga=null,Hc=0,Eb=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},ms={readContext:Ce,use:_e,useCallback:ci,useContext:ci,useEffect:ci,useImperativeHandle:ci,useLayoutEffect:ci,useInsertionEffect:ci,useMemo:ci,useReducer:ci,useRef:ci,useState:ci,useDebugValue:ci,useDeferredValue:ci,useTransition:ci,useSyncExternalStore:ci,useId:ci};ms.useCacheRefresh=ci,ms.useMemoCache=ci,ms.useHostTransitionStatus=ci,ms.useFormState=ci,ms.useActionState=ci,ms.useOptimistic=ci;var Hf={readContext:Ce,use:_e,useCallback:function(y,S){return Se().memoizedState=[y,S===void 0?null:S],y},useContext:Ce,useEffect:Oh,useImperativeHandle:function(y,S,T){T=T!=null?T.concat([y]):null,au(4194308,4,im.bind(null,S,y),T)},useLayoutEffect:function(y,S){return au(4194308,4,y,S)},useInsertionEffect:function(y,S){au(4,2,y,S)},useMemo:function(y,S){var T=Se();S=S===void 0?null:S;var B=y();if(zf){J(!0);try{y()}finally{J(!1)}}return T.memoizedState=[B,S],B},useReducer:function(y,S,T){var B=Se();if(T!==void 0){var H=T(S);if(zf){J(!0);try{T(S)}finally{J(!1)}}}else H=S;return B.memoizedState=B.baseState=H,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:y,lastRenderedState:H},B.queue=y,y=y.dispatch=am.bind(null,wr,y),[B.memoizedState,y]},useRef:function(y){var S=Se();return y={current:y},S.memoizedState=y},useState:function(y){y=yn(y);var S=y.queue,T=i0.bind(null,wr,S);return S.dispatch=T,[y.memoizedState,T]},useDebugValue:Wl,useDeferredValue:function(y,S){var T=Se();return $h(T,y,S)},useTransition:function(){var y=yn(!1);return y=vf.bind(null,wr,y.queue,!0,!1),Se().memoizedState=y,[!1,y]},useSyncExternalStore:function(y,S,T){var B=wr,H=Se();if(jr){if(T===void 0)throw Error(i(407));T=T()}else{if(T=S(),fi===null)throw Error(i(349));($r&60)!==0||Wt(B,S,T)}H.memoizedState=T;var K={value:T,getSnapshot:S};return H.queue=K,Oh(Hn.bind(null,B,K,y),[y]),B.flags|=2048,hs(9,bn.bind(null,B,K,T,S),{destroy:void 0},null),T},useId:function(){var y=Se(),S=fi.identifierPrefix;if(jr){var T=Uc,B=Pc;T=(B&~(1<<32-xo(B)-1)).toString(32)+T,S=":"+S+"R"+T,T=_b++,0<T&&(S+="H"+T.toString(32)),S+=":"}else T=Hc++,S=":"+S+"r"+T.toString(32)+":";return y.memoizedState=S},useCacheRefresh:function(){return Se().memoizedState=ho.bind(null,wr)}};Hf.useMemoCache=Nt,Hf.useHostTransitionStatus=bf,Hf.useFormState=Wr,Hf.useActionState=Wr,Hf.useOptimistic=function(y){var S=Se();S.memoizedState=S.baseState=y;var T={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return S.queue=T,S=od.bind(null,wr,!0,T),T.dispatch=S,[y,S]};var So={readContext:Ce,use:_e,useCallback:ll,useContext:Ce,useEffect:sd,useImperativeHandle:sm,useInsertionEffect:Fv,useLayoutEffect:Bh,useMemo:n0,useReducer:Tt,useRef:t0,useState:function(){return Tt(vt)},useDebugValue:Wl,useDeferredValue:function(y,S){var T=Ae();return r0(T,Vn.memoizedState,y,S)},useTransition:function(){var y=Tt(vt)[0],S=Ae().memoizedState;return[typeof y=="boolean"?y:Me(y),S]},useSyncExternalStore:Qt,useId:ad};So.useCacheRefresh=fo,So.useMemoCache=Nt,So.useHostTransitionStatus=bf,So.useFormState=wi,So.useActionState=wi,So.useOptimistic=function(y,S){var T=Ae();return ln(T,Vn,y,S)};var bl={readContext:Ce,use:_e,useCallback:ll,useContext:Ce,useEffect:sd,useImperativeHandle:sm,useInsertionEffect:Fv,useLayoutEffect:Bh,useMemo:n0,useReducer:qt,useRef:t0,useState:function(){return qt(vt)},useDebugValue:Wl,useDeferredValue:function(y,S){var T=Ae();return Vn===null?$h(T,y,S):r0(T,Vn.memoizedState,y,S)},useTransition:function(){var y=qt(vt)[0],S=Ae().memoizedState;return[typeof y=="boolean"?y:Me(y),S]},useSyncExternalStore:Qt,useId:ad};bl.useCacheRefresh=fo,bl.useMemoCache=Nt,bl.useHostTransitionStatus=bf,bl.useFormState=id,bl.useActionState=id,bl.useOptimistic=function(y,S){var T=Ae();return Vn!==null?ln(T,Vn,y,S):(T.baseState=y,[y,T.queue.dispatch])};var yu={isMounted:function(y){return(y=y._reactInternals)?d(y)===y:!1},enqueueSetState:function(y,S,T){y=y._reactInternals;var B=Cs(),H=yt(B);H.payload=S,T!=null&&(H.callback=T),S=Mt(y,H,B),S!==null&&(ha(S,y,B),an(S,y,B))},enqueueReplaceState:function(y,S,T){y=y._reactInternals;var B=Cs(),H=yt(B);H.tag=1,H.payload=S,T!=null&&(H.callback=T),S=Mt(y,H,B),S!==null&&(ha(S,y,B),an(S,y,B))},enqueueForceUpdate:function(y,S){y=y._reactInternals;var T=Cs(),B=yt(T);B.tag=2,S!=null&&(B.callback=S),S=Mt(y,B,T),S!==null&&(ha(S,y,T),an(S,y,T))}},Ab=typeof reportError=="function"?reportError:function(y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var S=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof y=="object"&&y!==null&&typeof y.message=="string"?String(y.message):String(y),error:y});if(!window.dispatchEvent(S))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",y);return}console.error(y)},Tb=Error(i(461)),Di=!1,Mb={dehydrated:null,treeContext:null,retryLane:0},Nd=b(null),Vc=null,xl=null,km=typeof AbortController<"u"?AbortController:function(){var y=[],S=this.signal={aborted:!1,addEventListener:function(T,B){y.push(B)}};this.abort=function(){S.aborted=!0,y.forEach(function(T){return T()})}},yA=hl.unstable_scheduleCallback,vA=hl.unstable_NormalPriority,zi={$$typeof:$c,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},KS=Qn.S;Qn.S=function(y,S){typeof S=="object"&&S!==null&&typeof S.then=="function"&&et(y,S),KS!==null&&KS(y,S)};var vu=b(null),bu=!1,gs=!1,YS=!1,di=typeof WeakSet=="function"?WeakSet:Set,ur=null,Nr=!1,Fn=null,br=!1,cs=null,Sl=8192,Om={getCacheForType:function(y){var S=Ce(zi),T=S.data.get(y);return T===void 0&&(T=y(),S.data.set(y,T)),T}},Bm=0,rc=1,Yi=2,Gc=3,xu=4;if(typeof Symbol=="function"&&Symbol.for){var rp=Symbol.for;Bm=rp("selector.component"),rc=rp("selector.has_pseudo_class"),Yi=rp("selector.role"),Gc=rp("selector.test_id"),xu=rp("selector.text")}var ic=typeof WeakMap=="function"?WeakMap:Map,Zr=0,fi=null,Gn=null,$r=0,_i=0,qa=null,sc=!1,wl=!1,sa=!1,Xa=0,ki=0,Cl=0,Id=0,V0=0,_l=0,Su=0,ip=null,ys=null,Rb=!1,wo=0,$m=1/0,G0=null,Vf=null,Wc=!1,wu=null,sp=0,Gf=0,Nb=null,Lm=0,Ib=null;return pr.attemptContinuousHydration=function(y){if(y.tag===13){var S=je(y,67108864);S!==null&&ha(S,y,67108864),A0(y,67108864)}},pr.attemptHydrationAtCurrentPriority=function(y){if(y.tag===13){var S=Cs(),T=je(y,S);T!==null&&ha(T,y,S),A0(y,S)}},pr.attemptSynchronousHydration=function(y){switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var S=_(y.pendingLanes);if(S!==0){for(y.pendingLanes|=2,y.entangledLanes|=2;S;){var T=1<<31-xo(S);y.entanglements[1]|=T,S&=~T}ot(y),(Zr&6)===0&&($m=Ql()+500,Ut(0))}}break;case 13:S=je(y,2),S!==null&&ha(S,y,2),w0(),A0(y,2)}},pr.batchedUpdates=function(y,S){return y(S)},pr.createComponentSelector=function(y){return{$$typeof:Bm,value:y}},pr.createContainer=function(y,S,T,B,H,K,ge,De,Qe,It){return R2(y,S,!1,null,T,B,K,ge,De,Qe,It,null)},pr.createHasPseudoClassSelector=function(y){return{$$typeof:rc,value:y}},pr.createHydrationContainer=function(y,S,T,B,H,K,ge,De,Qe,It,Jt,dn,gn){return y=R2(T,B,!0,y,H,K,De,Qe,It,Jt,dn,gn),y.context=Fs(null),T=y.current,B=Cs(),H=yt(B),H.callback=S??null,Mt(T,H,B),y.current.lanes=B,k(y,B),ot(y),y},pr.createPortal=function(y,S,T){var B=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yl,key:B==null?null:""+B,children:y,containerInfo:S,implementation:T}},pr.createRoleSelector=function(y){return{$$typeof:Yi,value:y}},pr.createTestNameSelector=function(y){return{$$typeof:Gc,value:y}},pr.createTextSelector=function(y){return{$$typeof:xu,value:y}},pr.defaultOnCaughtError=function(y){console.error(y)},pr.defaultOnRecoverableError=function(y){Ab(y)},pr.defaultOnUncaughtError=function(y){Ab(y)},pr.deferredUpdates=function(y){var S=Qn.T,T=_d();try{return ja(32),Qn.T=null,y()}finally{ja(T),Qn.T=S}},pr.discreteUpdates=function(y,S,T,B,H){var K=Qn.T,ge=_d();try{return ja(2),Qn.T=null,y(S,T,B,H)}finally{ja(ge),Qn.T=K,Zr===0&&($m=Ql()+500)}},pr.findAllNodes=x0,pr.findBoundingRects=function(y,S){if(!Df)throw Error(i(363));S=x0(y,S),y=[];for(var T=0;T<S.length;T++)y.push(BS(S[T]));for(S=y.length-1;0<S;S--){T=y[S];for(var B=T.x,H=B+T.width,K=T.y,ge=K+T.height,De=S-1;0<=De;De--)if(S!==De){var Qe=y[De],It=Qe.x,Jt=It+Qe.width,dn=Qe.y,gn=dn+Qe.height;if(B>=It&&K>=dn&&H<=Jt&&ge<=gn){y.splice(S,1);break}else if(B!==It||T.width!==Qe.width||gn<K||dn>ge){if(!(K!==dn||T.height!==Qe.height||Jt<B||It>H)){It>B&&(Qe.width+=It-B,Qe.x=B),Jt<H&&(Qe.width=H-It),y.splice(S,1);break}}else{dn>K&&(Qe.height+=dn-K,Qe.y=K),gn<ge&&(Qe.height=ge-dn),y.splice(S,1);break}}}return y},pr.findHostInstance=rb,pr.findHostInstanceWithNoPortals=function(y){return y=p(y),y=y!==null?v(y):null,y===null?null:Sm(y.stateNode)},pr.findHostInstanceWithWarning=function(y){return rb(y)},pr.flushPassiveEffects=Bc,pr.flushSyncFromReconciler=function(y){var S=Zr;Zr|=1;var T=Qn.T,B=_d();try{if(ja(2),Qn.T=null,y)return y()}finally{ja(B),Qn.T=T,Zr=S,(Zr&6)===0&&Ut(0)}},pr.flushSyncWork=w0,pr.focusWithin=function(y,S){if(!Df)throw Error(i(363));for(y=dm(y),S=zo(y,S),S=Array.from(S),y=0;y<S.length;){var T=S[y++],B=T.tag;if(!Cm(T)){if((B===5||B===26||B===27)&&F2(T.stateNode))return!0;for(T=T.child;T!==null;)S.push(T),T=T.sibling}}return!1},pr.getFindAllNodesFailureDescription=function(y,S){if(!Df)throw Error(i(363));var T=0,B=[];y=[dm(y),0];for(var H=0;H<y.length;){var K=y[H++],ge=K.tag,De=y[H++],Qe=S[De];if((ge!==5&&ge!==26&&ge!==27||!Cm(K))&&(Cf(K,Qe)&&(B.push(vS(Qe)),De++,De>T&&(T=De)),De<S.length))for(K=K.child;K!==null;)y.push(K,De),K=K.sibling}if(T<S.length){for(y=[];T<S.length;T++)y.push(vS(S[T]));return`findAllNodes was able to match part of the selector:
  `+(B.join(" > ")+`

No matching component was found for:
  `)+y.join(" > ")}return null},pr.getPublicRootInstance=function(y){if(y=y.current,!y.child)return null;switch(y.child.tag){case 27:case 5:return Sm(y.child.stateNode);default:return y.child.stateNode}},pr.injectIntoDevTools=function(){var y={bundleType:0,version:RS,rendererPackageName:I0,currentDispatcherRef:Qn,findFiberByHostInstance:k2,reconcilerVersion:"19.0.0"};if(xm!==null&&(y.rendererConfig=xm),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")y=!1;else{var S=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(S.isDisabled||!S.supportsFiber)y=!0;else{try{As=S.inject(y),Vo=S}catch{}y=!!S.checkDCE}}return y},pr.isAlreadyRendering=function(){return!1},pr.observeVisibleRects=function(y,S,T,B){if(!Df)throw Error(i(363));y=x0(y,S);var H=P2(y,T,B).disconnect;return{disconnect:function(){H()}}},pr.shouldError=function(){return null},pr.shouldSuspend=function(){return!1},pr.startHostTransition=function(y,S,T,B){if(y.tag!==5)throw Error(i(476));var H=Lo(y).queue;vf(y,H,S,If,T===null?r:function(){var K=Lo(y).next.queue;return Ic(y,K,{},Cs()),T(B)})},pr.updateContainer=function(y,S,T,B){var H=S.current,K=Cs();return mm(H,K,y,S,T,B),K},pr.updateContainerSync=function(y,S,T,B){return S.tag===0&&Bc(),mm(S.current,2,y,S,T,B),2},pr},n.exports.default=n.exports,Object.defineProperty(n.exports,"__esModule",{value:!0})}(FO)),FO.exports}var sV;function Zge(){return sV||(sV=1,LO.exports=Jge()),LO.exports}var Qge=Zge();const e0e=qp(Qge);var zO={exports:{}},HO={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aV;function t0e(){return aV||(aV=1,function(n){function e(z,J){var Q=z.length;z.push(J);e:for(;0<Q;){var Y=Q-1>>>1,q=z[Y];if(0<i(q,J))z[Y]=J,z[Q]=q,Q=Y;else break e}}function t(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var J=z[0],Q=z.pop();if(Q!==J){z[0]=Q;e:for(var Y=0,q=z.length,te=q>>>1;Y<te;){var ne=2*(Y+1)-1,le=z[ne],ye=ne+1,ue=z[ye];if(0>i(le,Q))ye<q&&0>i(ue,le)?(z[Y]=ue,z[ye]=Q,Y=ye):(z[Y]=le,z[ne]=Q,Y=ne);else if(ye<q&&0>i(ue,Q))z[Y]=ue,z[ye]=Q,Y=ye;else break e}}return J}function i(z,J){var Q=z.sortIndex-J.sortIndex;return Q!==0?Q:z.id-J.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,d=null,h=3,p=!1,g=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function E(z){for(var J=t(c);J!==null;){if(J.callback===null)r(c);else if(J.startTime<=z)r(c),J.sortIndex=J.expirationTime,e(l,J);else break;J=t(c)}}function _(z){if(v=!1,E(z),!g)if(t(l)!==null)g=!0,W();else{var J=t(c);J!==null&&X(_,J.startTime-z)}}var M=!1,R=-1,L=5,$=-1;function N(){return!(n.unstable_now()-$<L)}function I(){if(M){var z=n.unstable_now();$=z;var J=!0;try{e:{g=!1,v&&(v=!1,x(R),R=-1),p=!0;var Q=h;try{t:{for(E(z),d=t(l);d!==null&&!(d.expirationTime>z&&N());){var Y=d.callback;if(typeof Y=="function"){d.callback=null,h=d.priorityLevel;var q=Y(d.expirationTime<=z);if(z=n.unstable_now(),typeof q=="function"){d.callback=q,E(z),J=!0;break t}d===t(l)&&r(l),E(z)}else r(l);d=t(l)}if(d!==null)J=!0;else{var te=t(c);te!==null&&X(_,te.startTime-z),J=!1}}break e}finally{d=null,h=Q,p=!1}J=void 0}}finally{J?k():M=!1}}}var k;if(typeof C=="function")k=function(){C(I)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,G=P.port2;P.port1.onmessage=I,k=function(){G.postMessage(null)}}else k=function(){b(I,0)};function W(){M||(M=!0,k())}function X(z,J){R=b(function(){z(n.unstable_now())},J)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(z){z.callback=null},n.unstable_continueExecution=function(){g||p||(g=!0,W())},n.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<z?Math.floor(1e3/z):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(z){switch(h){case 1:case 2:case 3:var J=3;break;default:J=h}var Q=h;h=J;try{return z()}finally{h=Q}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(z,J){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Q=h;h=z;try{return J()}finally{h=Q}},n.unstable_scheduleCallback=function(z,J,Q){var Y=n.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?Y+Q:Y):Q=Y,z){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=Q+q,z={id:u++,callback:J,priorityLevel:z,startTime:Q,expirationTime:q,sortIndex:-1},Q>Y?(z.sortIndex=Q,e(c,z),t(l)===null&&z===t(c)&&(v?(x(R),R=-1):v=!0,X(_,Q-Y))):(z.sortIndex=q,e(l,z),g||p||(g=!0,W())),z},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(z){var J=h;return function(){var Q=h;h=J;try{return z.apply(this,arguments)}finally{h=Q}}}}(HO)),HO}var oV;function n0e(){return oV||(oV=1,zO.exports=t0e()),zO.exports}var lV=n0e();function jP(n,e,t){if(!n)return;if(t(n)===!0)return n;let r=e?n.return:n.child;for(;r;){const i=jP(r,e,t);if(i)return i;r=e?null:r.sibling}}function MK(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const qP=MK(F.createContext(null));let RK=class extends F.Component{render(){return F.createElement(qP.Provider,{value:this._reactInternals},this.props.children)}};function NK(){const n=F.useContext(qP);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=F.useId();return F.useMemo(()=>{for(const t of[n,n==null?void 0:n.alternate]){if(!t)continue;const r=jP(t,!1,i=>{let s=i.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}});if(r)return r}},[n,e])}const r0e=Symbol.for("react.context"),i0e=n=>n!==null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===r0e;function s0e(){const n=NK(),[e]=F.useState(()=>new Map);e.clear();let t=n;for(;t;){const r=t.type;i0e(r)&&r!==qP&&!e.has(r)&&e.set(r,F.use(MK(r))),t=t.return}return e}function a0e(){const n=s0e();return F.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>r=>F.createElement(e,null,F.createElement(t.Provider,{...r,value:n.get(t)})),e=>F.createElement(RK,{...e})),[n])}function IK(n){let e=n.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const DK=n=>n&&n.isOrthographicCamera,o0e=n=>n&&n.hasOwnProperty("current"),l0e=n=>n!=null&&(typeof n=="string"||typeof n=="number"||n.isColor),R_=((n,e)=>typeof window<"u"&&(((n=window.document)==null?void 0:n.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?F.useLayoutEffect:F.useEffect;function XP(n){const e=F.useRef(n);return R_(()=>void(e.current=n),[n]),e}function c0e(){const n=NK(),e=a0e();return F.useMemo(()=>({children:t})=>{const i=!!jP(n,!0,s=>s.type===F.StrictMode)?F.StrictMode:F.Fragment;return V.jsx(i,{children:V.jsx(e,{children:t})})},[n,e])}function u0e({set:n}){return R_(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}const d0e=(n=>(n=class extends F.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},n.getDerivedStateFromError=()=>({error:!0}),n))();function kK(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}function ix(n){var e;return(e=n.__r3f)==null?void 0:e.root.getState()}const bs={obj:n=>n===Object(n)&&!bs.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,nul:n=>n===null,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:i=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(bs.str(n)||bs.num(n)||bs.boo(n))return n===e;const s=bs.obj(n);if(s&&r==="reference")return n===e;const a=bs.arr(n);if(a&&t==="reference")return n===e;if((a||s)&&n===e)return!0;let o;for(o in n)if(!(o in e))return!1;if(s&&t==="shallow"&&r==="shallow"){for(o in i?e:n)if(!bs.equ(n[o],e[o],{strict:i,objects:"reference"}))return!1}else for(o in i?e:n)if(n[o]!==e[o])return!1;if(bs.und(o)){if(a&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function f0e(n){const e={nodes:{},materials:{},meshes:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material),t.isMesh&&!e.meshes[t.name]&&(e.meshes[t.name]=t)}),e}function h0e(n){n.type!=="Scene"&&(n.dispose==null||n.dispose());for(const e in n){const t=n[e];(t==null?void 0:t.type)!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const OK=["children","key","ref"];function p0e(n){const e={};for(const t in n)OK.includes(t)||(e[t]=n[t]);return e}function TR(n,e,t,r){const i=n;let s=i==null?void 0:i.__r3f;return s||(s={root:e,type:t,parent:null,children:[],props:p0e(r),object:i,eventCount:0,handlers:{},isHidden:!1},i&&(i.__r3f=s)),s}function UC(n,e){let t=n[e];if(!e.includes("-"))return{root:n,key:e,target:t};t=n;for(const i of e.split("-")){var r;e=i,n=t,t=(r=t)==null?void 0:r[e]}return{root:n,key:e,target:t}}const cV=/-\d+$/;function MR(n,e){if(bs.str(e.props.attach)){if(cV.test(e.props.attach)){const i=e.props.attach.replace(cV,""),{root:s,key:a}=UC(n.object,i);Array.isArray(s[a])||(s[a]=[])}const{root:t,key:r}=UC(n.object,e.props.attach);e.previousAttach=t[r],t[r]=e.object}else bs.fun(e.props.attach)&&(e.previousAttach=e.props.attach(n.object,e.object))}function RR(n,e){if(bs.str(e.props.attach)){const{root:t,key:r}=UC(n.object,e.props.attach),i=e.previousAttach;i===void 0?delete t[r]:t[r]=i}else e.previousAttach==null||e.previousAttach(n.object,e.object);delete e.previousAttach}const V$=[...OK,"args","dispose","attach","object","onUpdate","dispose"],uV=new Map;function m0e(n){let e=uV.get(n.constructor);try{e||(e=new n.constructor,uV.set(n.constructor,e))}catch{}return e}function g0e(n,e){const t={};for(const r in e)if(!V$.includes(r)&&!bs.equ(e[r],n.props[r])){t[r]=e[r];for(const i in e)i.startsWith(`${r}-`)&&(t[i]=e[i])}for(const r in n.props){if(V$.includes(r)||e.hasOwnProperty(r))continue;const{root:i,key:s}=UC(n.object,r);if(i.constructor&&i.constructor.length===0){const a=m0e(i);bs.und(a)||(t[s]=a[s])}else t[s]=0}return t}const y0e=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],v0e=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function ah(n,e){var t;const r=n.__r3f,i=r&&IK(r).getState(),s=r==null?void 0:r.eventCount;for(const o in e){let l=e[o];if(V$.includes(o))continue;if(r&&v0e.test(o)){typeof l=="function"?r.handlers[o]=l:delete r.handlers[o],r.eventCount=Object.keys(r.handlers).length;continue}if(l===void 0)continue;let{root:c,key:u,target:d}=UC(n,o);if(d instanceof i1&&l instanceof i1)d.mask=l.mask;else if(d instanceof sn&&l0e(l))d.set(l);else if(d!==null&&typeof d=="object"&&typeof d.set=="function"&&typeof d.copy=="function"&&l!=null&&l.constructor&&d.constructor===l.constructor)d.copy(l);else if(d!==null&&typeof d=="object"&&typeof d.set=="function"&&Array.isArray(l))typeof d.fromArray=="function"?d.fromArray(l):d.set(...l);else if(d!==null&&typeof d=="object"&&typeof d.set=="function"&&typeof l=="number")typeof d.setScalar=="function"?d.setScalar(l):d.set(l);else{var a;c[u]=l,i&&!i.linear&&y0e.includes(u)&&(a=c[u])!=null&&a.isTexture&&c[u].format===la&&c[u].type===Pl&&(c[u].colorSpace=_o)}}if(r!=null&&r.parent&&i!=null&&i.internal&&(t=r.object)!=null&&t.isObject3D&&s!==r.eventCount){const o=r.object,l=i.internal.interaction.indexOf(o);l>-1&&i.internal.interaction.splice(l,1),r.eventCount&&o.raycast!==null&&i.internal.interaction.push(o)}return r&&r.props.attach===void 0&&(r.object.isBufferGeometry?r.props.attach="geometry":r.object.isMaterial&&(r.props.attach="material")),r&&I1(r),n}function I1(n){var e;if(!n.parent)return;n.props.onUpdate==null||n.props.onUpdate(n.object);const t=(e=n.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function BK(n,e){n.manual||(DK(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix())}const Il=n=>n==null?void 0:n.isObject3D;function AT(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function $K(n,e,t,r){const i=t.get(e);i&&(t.delete(e),t.size===0&&(n.delete(r),i.target.releasePointerCapture(r)))}function b0e(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{$K(t.capturedMap,e,r,i)})}function x0e(n){function e(l){const{internal:c}=n.getState(),u=l.offsetX-c.initialClick[0],d=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(u*u+d*d))}function t(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(u=>{var d;return(d=c.__r3f)==null?void 0:d.handlers["onPointer"+u]}))}function r(l,c){const u=n.getState(),d=new Set,h=[],p=c?c(u.internal.interaction):u.internal.interaction;for(let x=0;x<p.length;x++){const C=ix(p[x]);C&&(C.raycaster.camera=void 0)}u.previousRoot||u.events.compute==null||u.events.compute(l,u);function g(x){const C=ix(x);if(!C||!C.events.enabled||C.raycaster.camera===null)return[];if(C.raycaster.camera===void 0){var E;C.events.compute==null||C.events.compute(l,C,(E=C.previousRoot)==null?void 0:E.getState()),C.raycaster.camera===void 0&&(C.raycaster.camera=null)}return C.raycaster.camera?C.raycaster.intersectObject(x,!0):[]}let v=p.flatMap(g).sort((x,C)=>{const E=ix(x.object),_=ix(C.object);return!E||!_?x.distance-C.distance:_.events.priority-E.events.priority||x.distance-C.distance}).filter(x=>{const C=AT(x);return d.has(C)?!1:(d.add(C),!0)});u.events.filter&&(v=u.events.filter(v,u));for(const x of v){let C=x.object;for(;C;){var b;(b=C.__r3f)!=null&&b.eventCount&&h.push({...x,eventObject:C}),C=C.parent}}if("pointerId"in l&&u.internal.capturedMap.has(l.pointerId))for(let x of u.internal.capturedMap.get(l.pointerId).values())d.has(AT(x.intersection))||h.push(x.intersection);return h}function i(l,c,u,d){if(l.length){const h={stopped:!1};for(const p of l){let g=ix(p.object);if(g||p.object.traverseAncestors(v=>{const b=ix(v);if(b)return g=b,!1}),g){const{raycaster:v,pointer:b,camera:x,internal:C}=g,E=new be(b.x,b.y,0).unproject(x),_=N=>{var I,k;return(I=(k=C.capturedMap.get(N))==null?void 0:k.has(p.eventObject))!=null?I:!1},M=N=>{const I={intersection:p,target:c.target};C.capturedMap.has(N)?C.capturedMap.get(N).set(p.eventObject,I):C.capturedMap.set(N,new Map([[p.eventObject,I]])),c.target.setPointerCapture(N)},R=N=>{const I=C.capturedMap.get(N);I&&$K(C.capturedMap,p.eventObject,I,N)};let L={};for(let N in c){let I=c[N];typeof I!="function"&&(L[N]=I)}let $={...p,...L,pointer:b,intersections:l,stopped:h.stopped,delta:u,unprojectedPoint:E,ray:v.ray,camera:x,stopPropagation(){const N="pointerId"in c&&C.capturedMap.get(c.pointerId);if((!N||N.has(p.eventObject))&&($.stopped=h.stopped=!0,C.hovered.size&&Array.from(C.hovered.values()).find(I=>I.eventObject===p.eventObject))){const I=l.slice(0,l.indexOf(p));s([...I,p])}},target:{hasPointerCapture:_,setPointerCapture:M,releasePointerCapture:R},currentTarget:{hasPointerCapture:_,setPointerCapture:M,releasePointerCapture:R},nativeEvent:c};if(d($),h.stopped===!0)break}}}return l}function s(l){const{internal:c}=n.getState();for(const u of c.hovered.values())if(!l.length||!l.find(d=>d.object===u.object&&d.index===u.index&&d.instanceId===u.instanceId)){const h=u.eventObject.__r3f;if(c.hovered.delete(AT(u)),h!=null&&h.eventCount){const p=h.handlers,g={...u,intersections:l};p.onPointerOut==null||p.onPointerOut(g),p.onPointerLeave==null||p.onPointerLeave(g)}}}function a(l,c){for(let u=0;u<c.length;u++){const d=c[u].__r3f;d==null||d.handlers.onPointerMissed==null||d.handlers.onPointerMissed(l)}}function o(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:u}=n.getState();"pointerId"in c&&u.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{u.capturedMap.has(c.pointerId)&&(u.capturedMap.delete(c.pointerId),s([]))})}}return function(u){const{onPointerMissed:d,internal:h}=n.getState();h.lastEvent.current=u;const p=l==="onPointerMove",g=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",b=r(u,p?t:void 0),x=g?e(u):0;l==="onPointerDown"&&(h.initialClick=[u.offsetX,u.offsetY],h.initialHits=b.map(E=>E.eventObject)),g&&!b.length&&x<=2&&(a(u,h.interaction),d&&d(u)),p&&s(b);function C(E){const _=E.eventObject,M=_.__r3f;if(!(M!=null&&M.eventCount))return;const R=M.handlers;if(p){if(R.onPointerOver||R.onPointerEnter||R.onPointerOut||R.onPointerLeave){const L=AT(E),$=h.hovered.get(L);$?$.stopped&&E.stopPropagation():(h.hovered.set(L,E),R.onPointerOver==null||R.onPointerOver(E),R.onPointerEnter==null||R.onPointerEnter(E))}R.onPointerMove==null||R.onPointerMove(E)}else{const L=R[l];L?(!g||h.initialHits.includes(_))&&(a(u,h.interaction.filter($=>!h.initialHits.includes($))),L(E)):g&&h.initialHits.includes(_)&&a(u,h.interaction.filter($=>!h.initialHits.includes($)))}}i(b,u,x,C)}}return{handlePointer:o}}const dV=n=>!!(n!=null&&n.render),KP=F.createContext(null),S0e=(n,e)=>{const t=EK((o,l)=>{const c=new be,u=new be,d=new be;function h(x=l().camera,C=u,E=l().size){const{width:_,height:M,top:R,left:L}=E,$=_/M;C.isVector3?d.copy(C):d.set(...C);const N=x.getWorldPosition(c).distanceTo(d);if(DK(x))return{width:_/x.zoom,height:M/x.zoom,top:R,left:L,factor:1,distance:N,aspect:$};{const I=x.fov*Math.PI/180,k=2*Math.tan(I/2)*N,P=k*(_/M);return{width:P,height:k,top:R,left:L,factor:_/P,distance:N,aspect:$}}}let p;const g=x=>o(C=>({performance:{...C.performance,current:x}})),v=new Lt;return{set:o,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(x=1)=>n(l(),x),advance:(x,C)=>e(x,C,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new FP,pointer:v,mouse:v,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const x=l();p&&clearTimeout(p),x.performance.current!==x.performance.min&&g(x.performance.min),p=setTimeout(()=>g(l().performance.max),x.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:h},setEvents:x=>o(C=>({...C,events:{...C.events,...x}})),setSize:(x,C,E=0,_=0)=>{const M=l().camera,R={width:x,height:C,top:E,left:_};o(L=>({size:R,viewport:{...L.viewport,...h(M,u,R)}}))},setDpr:x=>o(C=>{const E=kK(x);return{viewport:{...C.viewport,dpr:E,initialDpr:C.viewport.initialDpr||E}}}),setFrameloop:(x="always")=>{const C=l().clock;C.stop(),C.elapsedTime=0,x!=="never"&&(C.start(),C.elapsedTime=0),o(()=>({frameloop:x}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:F.createRef(),active:!1,frames:0,priority:0,subscribe:(x,C,E)=>{const _=l().internal;return _.priority=_.priority+(C>0?1:0),_.subscribers.push({ref:x,priority:C,store:E}),_.subscribers=_.subscribers.sort((M,R)=>M.priority-R.priority),()=>{const M=l().internal;M!=null&&M.subscribers&&(M.priority=M.priority-(C>0?1:0),M.subscribers=M.subscribers.filter(R=>R.ref!==x))}}}}}),r=t.getState();let i=r.size,s=r.viewport.dpr,a=r.camera;return t.subscribe(()=>{const{camera:o,size:l,viewport:c,gl:u,set:d}=t.getState();if(l.width!==i.width||l.height!==i.height||c.dpr!==s){i=l,s=c.dpr,BK(o,l),c.dpr>0&&u.setPixelRatio(c.dpr);const h=typeof HTMLCanvasElement<"u"&&u.domElement instanceof HTMLCanvasElement;u.setSize(l.width,l.height,h)}o!==a&&(a=o,d(h=>({viewport:{...h.viewport,...h.viewport.getCurrentViewport(o)}})))}),t.subscribe(o=>n(o)),t};function YP(){const n=F.useContext(KP);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Yd(n=t=>t,e){return YP()(n,e)}function N_(n,e=0){const t=YP(),r=t.getState().internal.subscribe,i=XP(n);return R_(()=>r(i,e,t),[e,r,t]),null}const fV=new WeakMap,w0e=n=>{var e;return typeof n=="function"&&(n==null||(e=n.prototype)==null?void 0:e.constructor)===n};function LK(n,e){return function(t,...r){let i;return w0e(t)?(i=fV.get(t),i||(i=new t,fV.set(t,i))):i=t,n&&n(i),Promise.all(r.map(s=>new Promise((a,o)=>i.load(s,l=>{Il(l==null?void 0:l.scene)&&Object.assign(l,f0e(l.scene)),a(l)},e,l=>o(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`))))))}}function Sh(n,e,t,r){const i=Array.isArray(e)?e:[e],s=jge(LK(t,r),[n,...i],{equal:bs.equ});return Array.isArray(e)?s:s[0]}Sh.preload=function(n,e,t){const r=Array.isArray(e)?e:[e];return qge(LK(t),[n,...r])};Sh.clear=function(n,e){const t=Array.isArray(e)?e:[e];return Xge([n,...t])};function C0e(n){const e=e0e(n);return e.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:F.version}),e}const FK=0,l1={},_0e=/^three(?=[A-Z])/,wI=n=>`${n[0].toUpperCase()}${n.slice(1)}`;let E0e=0;const A0e=n=>typeof n=="function";function PK(n){if(A0e(n)){const e=`${E0e++}`;return l1[e]=n,e}else Object.assign(l1,n)}function UK(n,e){const t=wI(n),r=l1[t];if(n!=="primitive"&&!r)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(n==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function T0e(n,e,t){var r;return n=wI(n)in l1?n:n.replace(_0e,""),UK(n,e),n==="primitive"&&(r=e.object)!=null&&r.__r3f&&delete e.object.__r3f,TR(e.object,t,n,e)}function M0e(n){if(!n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?RR(n.parent,n):Il(n.object)&&(n.object.visible=!1),n.isHidden=!0,I1(n)}}function zK(n){if(n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?MR(n.parent,n):Il(n.object)&&n.props.visible!==!1&&(n.object.visible=!0),n.isHidden=!1,I1(n)}}function JP(n,e,t){const r=e.root.getState();if(!(!n.parent&&n.object!==r.scene)){if(!e.object){var i,s;const a=l1[wI(e.type)];e.object=(i=e.props.object)!=null?i:new a(...(s=e.props.args)!=null?s:[]),e.object.__r3f=e}if(ah(e.object,e.props),e.props.attach)MR(n,e);else if(Il(e.object)&&Il(n.object)){const a=n.object.children.indexOf(t==null?void 0:t.object);if(t&&a!==-1){const o=n.object.children.indexOf(e.object);if(o!==-1){n.object.children.splice(o,1);const l=o<a?a-1:a;n.object.children.splice(l,0,e.object)}else e.object.parent=n.object,n.object.children.splice(a,0,e.object),e.object.dispatchEvent({type:"added"}),n.object.dispatchEvent({type:"childadded",child:e.object})}else n.object.add(e.object)}for(const a of e.children)JP(e,a);I1(e)}}function VO(n,e){e&&(e.parent=n,n.children.push(e),JP(n,e))}function hV(n,e,t){if(!e||!t)return;e.parent=n;const r=n.children.indexOf(t);r!==-1?n.children.splice(r,0,e):n.children.push(e),JP(n,e,t)}function HK(n){if(typeof n.dispose=="function"){const e=()=>{try{n.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():lV.unstable_scheduleCallback(lV.unstable_IdlePriority,e)}}function G$(n,e,t){if(!e)return;e.parent=null;const r=n.children.indexOf(e);r!==-1&&n.children.splice(r,1),e.props.attach?RR(n,e):Il(e.object)&&Il(n.object)&&(n.object.remove(e.object),b0e(IK(e),e.object));const i=e.props.dispose!==null&&t!==!1;for(let s=e.children.length-1;s>=0;s--){const a=e.children[s];G$(e,a,i)}e.children.length=0,delete e.object.__r3f,i&&e.type!=="primitive"&&e.object.type!=="Scene"&&HK(e.object),t===void 0&&I1(e)}function R0e(n,e){for(const t of[n,n.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const r=t.ref(e);typeof r=="function"&&(t.refCleanup=r)}else t.ref&&(t.ref.current=e)}const pM=[];function N0e(){for(const[t]of pM){const r=t.parent;if(r){t.props.attach?RR(r,t):Il(t.object)&&Il(r.object)&&r.object.remove(t.object);for(const i of t.children)i.props.attach?RR(t,i):Il(i.object)&&Il(t.object)&&t.object.remove(i.object)}t.isHidden&&zK(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&HK(t.object)}for(const[t,r,i]of pM){t.props=r;const s=t.parent;if(s){var n,e;const a=l1[wI(t.type)];t.object=(n=t.props.object)!=null?n:new a(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,R0e(i,t.object),ah(t.object,t.props),t.props.attach?MR(s,t):Il(t.object)&&Il(s.object)&&s.object.add(t.object);for(const o of t.children)o.props.attach?MR(t,o):Il(o.object)&&Il(t.object)&&t.object.add(o.object);I1(t)}}pM.length=0}const GO=()=>{},pV={};let TT=FK;const I0e=0,D0e=4,NR=C0e({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:T0e,removeChild:G$,appendChild:VO,appendInitialChild:VO,insertBefore:hV,appendChildToContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||VO(t,e)},removeChildFromContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||G$(t,e)},insertInContainerBefore(n,e,t){const r=n.getState().scene.__r3f;!e||!t||!r||hV(r,e,t)},getRootHostContext:()=>pV,getChildHostContext:()=>pV,commitUpdate(n,e,t,r,i){var s,a,o;UK(e,r);let l=!1;if((n.type==="primitive"&&t.object!==r.object||((s=r.args)==null?void 0:s.length)!==((a=t.args)==null?void 0:a.length)||(o=r.args)!=null&&o.some((u,d)=>{var h;return u!==((h=t.args)==null?void 0:h[d])}))&&(l=!0),l)pM.push([n,{...r},i]);else{const u=g0e(n,r);Object.keys(u).length&&(Object.assign(n.props,u),ah(n.object,u))}(i.sibling===null||(i.flags&D0e)===I0e)&&N0e()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:n=>n==null?void 0:n.object,prepareForCommit:()=>null,preparePortalMount:n=>TR(n.getState().scene,n,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:M0e,unhideInstance:zK,createTextInstance:GO,hideTextInstance:GO,unhideTextInstance:GO,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:F.createContext(null),setCurrentUpdatePriority(n){TT=n},getCurrentUpdatePriority(){return TT},resolveUpdatePriority(){var n;if(TT!==FK)return TT;switch(typeof window<"u"&&((n=window.event)==null?void 0:n.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return uM.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return uM.ContinuousEventPriority;default:return uM.DefaultEventPriority}},resetFormInstance(){}}),nv=new Map,sx={objects:"shallow",strict:!1};function k0e(n,e){if(!e&&typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:r,top:i,left:s}=n.parentElement.getBoundingClientRect();return{width:t,height:r,top:i,left:s}}else if(!e&&typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function O0e(n){const e=nv.get(n),t=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||S0e(q$,gV),a=t||NR.createContainer(s,uM.ConcurrentRoot,null,!1,null,"",i,i,i,null);e||nv.set(n,{fiber:a,store:s});let o,l,c=!1,u=null;return{async configure(d={}){let h;u=new Promise(te=>h=te);let{gl:p,size:g,scene:v,events:b,onCreated:x,shadows:C=!1,linear:E=!1,flat:_=!1,legacy:M=!1,orthographic:R=!1,frameloop:L="always",dpr:$=[1,2],performance:N,raycaster:I,camera:k,onPointerMissed:P}=d,G=s.getState(),W=G.gl;if(!G.gl){const te={canvas:n,powerPreference:"high-performance",antialias:!0,alpha:!0},ne=typeof p=="function"?await p(te):p;dV(ne)?W=ne:W=new WP({...te,...p}),G.set({gl:W})}let X=G.raycaster;X||G.set({raycaster:X=new HP});const{params:z,...J}=I||{};if(bs.equ(J,X,sx)||ah(X,{...J}),bs.equ(z,X.params,sx)||ah(X,{params:{...X.params,...z}}),!G.camera||G.camera===l&&!bs.equ(l,k,sx)){l=k;const te=k==null?void 0:k.isCamera,ne=te?k:R?new Ev(0,0,0,0,.1,1e3):new Ba(75,0,.1,1e3);te||(ne.position.z=5,k&&(ah(ne,k),ne.manual||("aspect"in k||"left"in k||"right"in k||"bottom"in k||"top"in k)&&(ne.manual=!0,ne.updateProjectionMatrix())),!G.camera&&!(k!=null&&k.rotation)&&ne.lookAt(0,0,0)),G.set({camera:ne}),X.camera=ne}if(!G.scene){let te;v!=null&&v.isScene?(te=v,TR(te,s,"",{})):(te=new x_,TR(te,s,"",{}),v&&ah(te,v)),G.set({scene:te})}b&&!G.events.handlers&&G.set({events:b(s)});const Q=k0e(n,g);if(bs.equ(Q,G.size,sx)||G.setSize(Q.width,Q.height,Q.top,Q.left),$&&G.viewport.dpr!==kK($)&&G.setDpr($),G.frameloop!==L&&G.setFrameloop(L),G.onPointerMissed||G.set({onPointerMissed:P}),N&&!bs.equ(N,G.performance,sx)&&G.set(te=>({performance:{...te.performance,...N}})),!G.xr){var Y;const te=(ye,ue)=>{const ve=s.getState();ve.frameloop!=="never"&&gV(ye,!0,ve,ue)},ne=()=>{const ye=s.getState();ye.gl.xr.enabled=ye.gl.xr.isPresenting,ye.gl.xr.setAnimationLoop(ye.gl.xr.isPresenting?te:null),ye.gl.xr.isPresenting||q$(ye)},le={connect(){const ye=s.getState().gl;ye.xr.addEventListener("sessionstart",ne),ye.xr.addEventListener("sessionend",ne)},disconnect(){const ye=s.getState().gl;ye.xr.removeEventListener("sessionstart",ne),ye.xr.removeEventListener("sessionend",ne)}};typeof((Y=W.xr)==null?void 0:Y.addEventListener)=="function"&&le.connect(),G.set({xr:le})}if(W.shadowMap){const te=W.shadowMap.enabled,ne=W.shadowMap.type;if(W.shadowMap.enabled=!!C,bs.boo(C))W.shadowMap.type=cC;else if(bs.str(C)){var q;const le={basic:kq,percentage:zN,soft:cC,variance:Vd};W.shadowMap.type=(q=le[C])!=null?q:cC}else bs.obj(C)&&Object.assign(W.shadowMap,C);(te!==W.shadowMap.enabled||ne!==W.shadowMap.type)&&(W.shadowMap.needsUpdate=!0)}return Qr.enabled=!M,c||(W.outputColorSpace=E?qu:_o,W.toneMapping=_?dh:QF),G.legacy!==M&&G.set(()=>({legacy:M})),G.linear!==E&&G.set(()=>({linear:E})),G.flat!==_&&G.set(()=>({flat:_})),p&&!bs.fun(p)&&!dV(p)&&!bs.equ(p,W,sx)&&ah(W,p),o=x,c=!0,h(),this},render(d){return!c&&!u&&this.configure(),u.then(()=>{NR.updateContainer(V.jsx(B0e,{store:s,children:d,onCreated:o,rootElement:n}),a,null,()=>{})}),s},unmount(){VK(n)}}}function B0e({store:n,children:e,onCreated:t,rootElement:r}){return R_(()=>{const i=n.getState();i.set(s=>({internal:{...s.internal,active:!0}})),t&&t(i),n.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),V.jsx(KP.Provider,{value:n,children:e})}function VK(n,e){const t=nv.get(n),r=t==null?void 0:t.fiber;if(r){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),NR.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,a,o,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(a=s.renderLists)==null||a.dispose==null||a.dispose(),(o=i.gl)==null||o.forceContextLoss==null||o.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),h0e(i.scene),nv.delete(n)}catch{}},500)})}}function $0e(n,e,t){return V.jsx(L0e,{children:n,container:e,state:t})}function L0e({state:n={},children:e,container:t}){const{events:r,size:i,...s}=n,a=YP(),[o]=F.useState(()=>new HP),[l]=F.useState(()=>new Lt),c=XP((d,h)=>{let p;if(h.camera&&i){const g=h.camera;p=d.viewport.getCurrentViewport(g,new be,i),g!==d.camera&&BK(g,i)}return{...d,...h,scene:t,raycaster:o,pointer:l,mouse:l,previousRoot:a,events:{...d.events,...h.events,...r},size:{...d.size,...i},viewport:{...d.viewport,...p},setEvents:g=>h.set(v=>({...v,events:{...v.events,...g}}))}}),u=F.useMemo(()=>{const d=EK((p,g)=>({...s,set:p,get:g})),h=p=>d.setState(g=>c.current(p,g));return h(a.getState()),a.subscribe(h),d},[a,t]);return V.jsx(V.Fragment,{children:NR.createPortal(V.jsx(KP.Provider,{value:u,children:e}),u,null)})}const F0e=new Set,P0e=new Set,U0e=new Set;function WO(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function vC(n,e){switch(n){case"before":return WO(F0e,e);case"after":return WO(P0e,e);case"tail":return WO(U0e,e)}}let jO,qO;function W$(n,e,t){let r=e.clock.getDelta();e.frameloop==="never"&&typeof n=="number"&&(r=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),jO=e.internal.subscribers;for(let i=0;i<jO.length;i++)qO=jO[i],qO.ref.current(qO.store.getState(),r,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let IR=!1,j$=!1,XO,mV,ax;function GK(n){mV=requestAnimationFrame(GK),IR=!0,XO=0,vC("before",n),j$=!0;for(const t of nv.values()){var e;ax=t.store.getState(),ax.internal.active&&(ax.frameloop==="always"||ax.internal.frames>0)&&!((e=ax.gl.xr)!=null&&e.isPresenting)&&(XO+=W$(n,ax))}if(j$=!1,vC("after",n),XO===0)return vC("tail",n),IR=!1,cancelAnimationFrame(mV)}function q$(n,e=1){var t;if(!n)return nv.forEach(r=>q$(r.store.getState(),e));(t=n.gl.xr)!=null&&t.isPresenting||!n.internal.active||n.frameloop==="never"||(e>1?n.internal.frames=Math.min(60,n.internal.frames+e):j$?n.internal.frames=2:n.internal.frames=1,IR||(IR=!0,requestAnimationFrame(GK)))}function gV(n,e=!0,t,r){if(e&&vC("before",n),t)W$(n,t,r);else for(const i of nv.values())W$(n,i.store.getState());e&&vC("after",n)}const KO={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function z0e(n){const{handlePointer:e}=x0e(n);return{priority:1,enabled:!0,compute(t,r,i){r.pointer.set(t.offsetX/r.size.width*2-1,-(t.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(KO).reduce((t,r)=>({...t,[r]:e(r)}),{}),update:()=>{var t;const{events:r,internal:i}=n.getState();(t=i.lastEvent)!=null&&t.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{const{set:r,events:i}=n.getState();if(i.disconnect==null||i.disconnect(),r(s=>({events:{...s.events,connected:t}})),i.handlers)for(const s in i.handlers){const a=i.handlers[s],[o,l]=KO[s];t.addEventListener(o,a,{passive:l})}},disconnect:()=>{const{set:t,events:r}=n.getState();if(r.connected){if(r.handlers)for(const i in r.handlers){const s=r.handlers[i],[a]=KO[i];r.connected.removeEventListener(a,s)}t(i=>({events:{...i.events,connected:void 0}}))}}}}function yV(n,e){let t;return(...r)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...r),e)}}function H0e({debounce:n,scroll:e,polyfill:t,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const i=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,a]=F.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),o=F.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=n?typeof n=="number"?n:n.scroll:null,c=n?typeof n=="number"?n:n.resize:null,u=F.useRef(!1);F.useEffect(()=>(u.current=!0,()=>void(u.current=!1)));const[d,h,p]=F.useMemo(()=>{const x=()=>{if(!o.current.element)return;const{left:C,top:E,width:_,height:M,bottom:R,right:L,x:$,y:N}=o.current.element.getBoundingClientRect(),I={left:C,top:E,width:_,height:M,bottom:R,right:L,x:$,y:N};o.current.element instanceof HTMLElement&&r&&(I.height=o.current.element.offsetHeight,I.width=o.current.element.offsetWidth),Object.freeze(I),u.current&&!j0e(o.current.lastBounds,I)&&a(o.current.lastBounds=I)};return[x,c?yV(x,c):x,l?yV(x,l):x]},[a,r,l,c]);function g(){o.current.scrollContainers&&(o.current.scrollContainers.forEach(x=>x.removeEventListener("scroll",p,!0)),o.current.scrollContainers=null),o.current.resizeObserver&&(o.current.resizeObserver.disconnect(),o.current.resizeObserver=null),o.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",o.current.orientationHandler))}function v(){o.current.element&&(o.current.resizeObserver=new i(p),o.current.resizeObserver.observe(o.current.element),e&&o.current.scrollContainers&&o.current.scrollContainers.forEach(x=>x.addEventListener("scroll",p,{capture:!0,passive:!0})),o.current.orientationHandler=()=>{p()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",o.current.orientationHandler))}const b=x=>{!x||x===o.current.element||(g(),o.current.element=x,o.current.scrollContainers=WK(x),v())};return G0e(p,!!e),V0e(h),F.useEffect(()=>{g(),v()},[e,p,h]),F.useEffect(()=>g,[]),[b,s,d]}function V0e(n){F.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function G0e(n,e){F.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function WK(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...WK(n.parentElement)]}const W0e=["x","y","top","bottom","left","right","width","height"],j0e=(n,e)=>W0e.every(t=>n[t]===e[t]);function q0e({ref:n,children:e,fallback:t,resize:r,style:i,gl:s,events:a=z0e,eventSource:o,eventPrefix:l,shadows:c,linear:u,flat:d,legacy:h,orthographic:p,frameloop:g,dpr:v,performance:b,raycaster:x,camera:C,scene:E,onPointerMissed:_,onCreated:M,...R}){F.useMemo(()=>PK(Oge),[]);const L=c0e(),[$,N]=H0e({scroll:!0,debounce:{scroll:50,resize:0},...r}),I=F.useRef(null),k=F.useRef(null);F.useImperativeHandle(n,()=>I.current);const P=XP(_),[G,W]=F.useState(!1),[X,z]=F.useState(!1);if(G)throw G;if(X)throw X;const J=F.useRef(null);R_(()=>{const Y=I.current;if(N.width>0&&N.height>0&&Y){J.current||(J.current=O0e(Y));async function q(){await J.current.configure({gl:s,scene:E,events:a,shadows:c,linear:u,flat:d,legacy:h,orthographic:p,frameloop:g,dpr:v,performance:b,raycaster:x,camera:C,size:N,onPointerMissed:(...te)=>P.current==null?void 0:P.current(...te),onCreated:te=>{te.events.connect==null||te.events.connect(o?o0e(o)?o.current:o:k.current),l&&te.setEvents({compute:(ne,le)=>{const ye=ne[l+"X"],ue=ne[l+"Y"];le.pointer.set(ye/le.size.width*2-1,-(ue/le.size.height)*2+1),le.raycaster.setFromCamera(le.pointer,le.camera)}}),M==null||M(te)}}),J.current.render(V.jsx(L,{children:V.jsx(d0e,{set:z,children:V.jsx(F.Suspense,{fallback:V.jsx(u0e,{set:W}),children:e??null})})}))}q()}}),F.useEffect(()=>{const Y=I.current;if(Y)return()=>VK(Y)},[]);const Q=o?"none":"auto";return V.jsx("div",{ref:k,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:Q,...i},...R,children:V.jsx("div",{ref:$,style:{width:"100%",height:"100%"},children:V.jsx("canvas",{ref:I,style:{display:"block"},children:t})})})}function jK(n){return V.jsx(RK,{children:V.jsx(q0e,{...n})})}function ss(){return ss=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ss.apply(null,arguments)}function X0e(n,e,t){return Math.max(e,Math.min(n,t))}const tl={toVector(n,e){return n===void 0&&(n=e),Array.isArray(n)?n:[n,n]},add(n,e){return[n[0]+e[0],n[1]+e[1]]},sub(n,e){return[n[0]-e[0],n[1]-e[1]]},addTo(n,e){n[0]+=e[0],n[1]+=e[1]},subTo(n,e){n[0]-=e[0],n[1]-=e[1]}};function vV(n,e,t){return e===0||Math.abs(e)===1/0?Math.pow(n,t*5):n*e*t/(e+t*n)}function bV(n,e,t,r=.15){return r===0?X0e(n,e,t):n<e?-vV(e-n,t-e,r)+e:n>t?+vV(n-t,t-e,r)+t:n}function K0e(n,[e,t],[r,i]){const[[s,a],[o,l]]=n;return[bV(e,s,a,r),bV(t,o,l,i)]}function Y0e(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function J0e(n){var e=Y0e(n,"string");return typeof e=="symbol"?e:String(e)}function uc(n,e,t){return e=J0e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function xV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ds(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?xV(Object(t),!0).forEach(function(r){uc(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):xV(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const qK={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function SV(n){return n?n[0].toUpperCase()+n.slice(1):""}const Z0e=["enter","leave"];function Q0e(n=!1,e){return n&&!Z0e.includes(e)}function eye(n,e="",t=!1){const r=qK[n],i=r&&r[e]||e;return"on"+SV(n)+SV(i)+(Q0e(t,i)?"Capture":"")}const tye=["gotpointercapture","lostpointercapture"];function nye(n){let e=n.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const r=tye.includes(e)?"capturecapture":"capture",i=!!~e.indexOf(r);return i&&(e=e.replace("capture","")),{device:e,capture:i,passive:t}}function rye(n,e=""){const t=qK[n],r=t&&t[e]||e;return n+r}function CI(n){return"touches"in n}function XK(n){return CI(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function iye(n){return Array.from(n.touches).filter(e=>{var t,r;return e.target===n.currentTarget||((t=n.currentTarget)===null||t===void 0||(r=t.contains)===null||r===void 0?void 0:r.call(t,e.target))})}function sye(n){return n.type==="touchend"||n.type==="touchcancel"?n.changedTouches:n.targetTouches}function KK(n){return CI(n)?sye(n)[0]:n}function aye(n){return iye(n).map(e=>e.identifier)}function YO(n){const e=KK(n);return CI(n)?e.identifier:e.pointerId}function wV(n){const e=KK(n);return[e.clientX,e.clientY]}function oye(n){const e={};if("buttons"in n&&(e.buttons=n.buttons),"shiftKey"in n){const{shiftKey:t,altKey:r,metaKey:i,ctrlKey:s}=n;Object.assign(e,{shiftKey:t,altKey:r,metaKey:i,ctrlKey:s})}return e}function DR(n,...e){return typeof n=="function"?n(...e):n}function lye(){}function cye(...n){return n.length===0?lye:n.length===1?n[0]:function(){let e;for(const t of n)e=t.apply(this,arguments)||e;return e}}function CV(n,e){return Object.assign({},e,n||{})}const uye=32;let dye=class{constructor(e,t,r){this.ctrl=e,this.args=t,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:r,args:i}=this;t[r]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=i,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,r=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=r.from?DR(r.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:r,shared:i}=this;t.args=this.args;let s=0;if(e&&(t.event=e,r.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,oye(e)),i.down=i.pressed=i.buttons%2===1||i.touches>0,s=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const R=t._delta.map(Math.abs);tl.addTo(t._distance,R)}this.axisIntent&&this.axisIntent(e);const[a,o]=t._movement,[l,c]=r.threshold,{_step:u,values:d}=t;if(r.hasCustomTransform?(u[0]===!1&&(u[0]=Math.abs(a)>=l&&d[0]),u[1]===!1&&(u[1]=Math.abs(o)>=c&&d[1])):(u[0]===!1&&(u[0]=Math.abs(a)>=l&&Math.sign(a)*l),u[1]===!1&&(u[1]=Math.abs(o)>=c&&Math.sign(o)*c)),t.intentional=u[0]!==!1||u[1]!==!1,!t.intentional)return;const h=[0,0];if(r.hasCustomTransform){const[R,L]=d;h[0]=u[0]!==!1?R-u[0]:0,h[1]=u[1]!==!1?L-u[1]:0}else h[0]=u[0]!==!1?a-u[0]:0,h[1]=u[1]!==!1?o-u[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(h);const p=t.offset,g=t._active&&!t._blocked||t.active;g&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=i[this.ingKey]=t._active,e&&(t.first&&("bounds"in r&&(t._bounds=DR(r.bounds,t)),this.setup&&this.setup()),t.movement=h,this.computeOffset()));const[v,b]=t.offset,[[x,C],[E,_]]=t._bounds;t.overflow=[v<x?-1:v>C?1:0,b<E?-1:b>_?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const M=t._active?r.rubberband||[0,0]:[0,0];if(t.offset=K0e(t._bounds,t.offset,M),t.delta=tl.sub(t.offset,p),this.computeMovement(),g&&(!t.last||s>uye)){t.delta=tl.sub(t.offset,p);const R=t.delta.map(Math.abs);tl.addTo(t.distance,R),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&s>0&&(t.velocity=[R[0]/s,R[1]/s],t.timeDelta=s)}}emit(){const e=this.state,t=this.shared,r=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!r.triggerAllEvents)return;const i=this.handler(Ds(Ds(Ds({},t),e),{},{[this.aliasKey]:e.values}));i!==void 0&&(e.memo=i)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}};function fye([n,e],t){const r=Math.abs(n),i=Math.abs(e);if(r>i&&r>t)return"x";if(i>r&&i>t)return"y"}class hye extends dye{constructor(...e){super(...e),uc(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=tl.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=tl.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,r=this.config;if(!t.axis&&e){const i=typeof r.axisThreshold=="object"?r.axisThreshold[XK(e)]:r.axisThreshold;t.axis=fye(t._movement,i)}t._blocked=(r.lockDirection||!!r.axis)&&!t.axis||!!r.axis&&r.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const pye=n=>n,_V=.15,YK={enabled(n=!0){return n},eventOptions(n,e,t){return Ds(Ds({},t.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[_V,_V];case!1:return[0,0];default:return tl.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return tl.toVector(n)},transform(n,e,t){const r=n||t.shared.transform;return this.hasCustomTransform=!!r,r||pye},threshold(n){return tl.toVector(n,0)}},mye=0,I_=Ds(Ds({},YK),{},{axis(n,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(n=mye){return n},bounds(n={}){if(typeof n=="function")return s=>I_.bounds(n(s));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:e=-1/0,right:t=1/0,top:r=-1/0,bottom:i=1/0}=n;return[[e,t],[r,i]]}}),EV={ArrowRight:(n,e=1)=>[n*e,0],ArrowLeft:(n,e=1)=>[-1*n*e,0],ArrowUp:(n,e=1)=>[0,-1*n*e],ArrowDown:(n,e=1)=>[0,n*e]};class gye extends hye{constructor(...e){super(...e),uc(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),r=e.currentTarget.getBoundingClientRect(),i={left:t.left-r.left+e.offset[0],right:t.right-r.right+e.offset[0],top:t.top-r.top+e.offset[1],bottom:t.bottom-r.bottom+e.offset[1]};e._bounds=I_.bounds(i)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,r=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const i=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(i&&i.size>1&&r._pointerActive)&&(this.start(e),this.setupPointer(e),r._pointerId=YO(e),r._pointerActive=!0,this.computeValues(wV(e)),this.computeInitial(),t.preventScrollAxis&&XK(e)!=="mouse"?(r._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,r=this.config;if(!t._pointerActive)return;const i=YO(e);if(t._pointerId!==void 0&&i!==t._pointerId)return;const s=wV(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=tl.sub(s,t._values),this.computeValues(s)),tl.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(r.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,r=this.config;if(!t._active||!t._pointerActive)return;const i=YO(e);if(t._pointerId!==void 0&&i!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[s,a]=t._distance;if(t.tap=s<=r.tapsThreshold&&a<=r.tapsThreshold,t.tap&&r.filterTaps)t._force=!0;else{const[o,l]=t._delta,[c,u]=t._movement,[d,h]=r.swipe.velocity,[p,g]=r.swipe.distance,v=r.swipe.duration;if(t.elapsedTime<v){const b=Math.abs(o/t.timeDelta),x=Math.abs(l/t.timeDelta);b>d&&Math.abs(c)>p&&(t.swipe[0]=Math.sign(o)),x>h&&Math.abs(u)>g&&(t.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,r=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,yye(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=EV[e.key];if(t){const r=this.state,i=e.shiftKey?10:e.altKey?.1:1;this.start(e),r._delta=t(this.config.keyboardDisplacement,i),r._keyboardActive=!0,tl.addTo(r._movement,r._delta),this.compute(e),this.emit()}}keyUp(e){e.key in EV&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function yye(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}const D_=typeof window<"u"&&window.document&&window.document.createElement;function JK(){return D_&&"ontouchstart"in window}function vye(){return JK()||D_&&window.navigator.maxTouchPoints>1}function bye(){return D_&&"onpointerdown"in window}function xye(){return D_&&"exitPointerLock"in window.document}function Sye(){try{return"constructor"in GestureEvent}catch{return!1}}const Ou={isBrowser:D_,gesture:Sye(),touch:JK(),touchscreen:vye(),pointer:bye(),pointerLock:xye()},wye=250,Cye=180,_ye=.5,Eye=50,Aye=250,Tye=10,AV={mouse:0,touch:0,pen:8},Mye=Ds(Ds({},I_),{},{device(n,e,{pointer:{touch:t=!1,lock:r=!1,mouse:i=!1}={}}){return this.pointerLock=r&&Ou.pointerLock,Ou.touch&&t?"touch":this.pointerLock?"mouse":Ou.pointer&&!i?"pointer":Ou.touch?"touch":"mouse"},preventScrollAxis(n,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&n?wye:void 0,!(!Ou.touchscreen||t===!1))return n||(t!==void 0?"y":void 0)},pointerCapture(n,e,{pointer:{capture:t=!0,buttons:r=1,keys:i=!0}={}}){return this.pointerButtons=r,this.keys=i,!this.pointerLock&&this.device==="pointer"&&t},threshold(n,e,{filterTaps:t=!1,tapsThreshold:r=3,axis:i=void 0}){const s=tl.toVector(n,t?r:i?1:0);return this.filterTaps=t,this.tapsThreshold=r,s},swipe({velocity:n=_ye,distance:e=Eye,duration:t=Aye}={}){return{velocity:this.transform(tl.toVector(n)),distance:this.transform(tl.toVector(e)),duration:t}},delay(n=0){switch(n){case!0:return Cye;case!1:return 0;default:return n}},axisThreshold(n){return n?Ds(Ds({},AV),n):AV},keyboardDisplacement(n=Tye){return n}});Ds(Ds({},YK),{},{device(n,e,{shared:t,pointer:{touch:r=!1}={}}){if(t.target&&!Ou.touch&&Ou.gesture)return"gesture";if(Ou.touch&&r)return"touch";if(Ou.touchscreen){if(Ou.pointer)return"pointer";if(Ou.touch)return"touch"}},bounds(n,e,{scaleBounds:t={},angleBounds:r={}}){const i=a=>{const o=CV(DR(t,a),{min:-1/0,max:1/0});return[o.min,o.max]},s=a=>{const o=CV(DR(r,a),{min:-1/0,max:1/0});return[o.min,o.max]};return typeof t!="function"&&typeof r!="function"?[i(),s()]:a=>[i(a),s(a)]},threshold(n,e,t){return this.lockDirection=t.axis==="lock",tl.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n},pinchOnWheel(n=!0){return n}});Ds(Ds({},I_),{},{mouseOnly:(n=!0)=>n});Ds(Ds({},I_),{},{mouseOnly:(n=!0)=>n});const ZK=new Map,X$=new Map;function Rye(n){ZK.set(n.key,n.engine),X$.set(n.key,n.resolver)}const Nye={key:"drag",engine:gye,resolver:Mye};function Iye(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function Dye(n,e){if(n==null)return{};var t=Iye(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}const kye={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=Ou.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:e=!1}={}){return{passive:n,capture:e}},transform(n){return n}},Oye=["target","eventOptions","window","enabled","transform"];function mM(n={},e){const t={};for(const[r,i]of Object.entries(e))switch(typeof i){case"function":t[r]=i.call(t,n[r],r,n);break;case"object":t[r]=mM(n[r],i);break;case"boolean":i&&(t[r]=n[r]);break}return t}function Bye(n,e,t={}){const r=n,{target:i,eventOptions:s,window:a,enabled:o,transform:l}=r,c=Dye(r,Oye);if(t.shared=mM({target:i,eventOptions:s,window:a,enabled:o,transform:l},kye),e){const u=X$.get(e);t[e]=mM(Ds({shared:t.shared},c),u)}else for(const u in c){const d=X$.get(u);d&&(t[u]=mM(Ds({shared:t.shared},c[u]),d))}return t}class QK{constructor(e,t){uc(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,r,i,s){const a=this._listeners,o=rye(t,r),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},c=Ds(Ds({},l),s);e.addEventListener(o,i,c);const u=()=>{e.removeEventListener(o,i,c),a.delete(u)};return a.add(u),u}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class $ye{constructor(){uc(this,"_timeouts",new Map)}add(e,t,r=140,...i){this.remove(e),this._timeouts.set(e,window.setTimeout(t,r,...i))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class Lye{constructor(e){uc(this,"gestures",new Set),uc(this,"_targetEventStore",new QK(this)),uc(this,"gestureEventStores",{}),uc(this,"gestureTimeoutStores",{}),uc(this,"handlers",{}),uc(this,"config",{}),uc(this,"pointerIds",new Set),uc(this,"touchIds",new Set),uc(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),Fye(this,e)}setEventIds(e){if(CI(e))return this.touchIds=new Set(aye(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=Bye(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,r={};let i;if(!(t.target&&(i=t.target(),!i))){if(t.enabled){for(const a of this.gestures){const o=this.config[a],l=TV(r,o.eventOptions,!!i);if(o.enabled){const c=ZK.get(a);new c(this,e,a).bind(l)}}const s=TV(r,t.eventOptions,!!i);for(const a in this.nativeHandlers)s(a,"",o=>this.nativeHandlers[a](Ds(Ds({},this.state.shared),{},{event:o,args:e})),void 0,!0)}for(const s in r)r[s]=cye(...r[s]);if(!i)return r;for(const s in r){const{device:a,capture:o,passive:l}=nye(s);this._targetEventStore.add(i,a,"",r[s],{capture:o,passive:l})}}}}function ox(n,e){n.gestures.add(e),n.gestureEventStores[e]=new QK(n,e),n.gestureTimeoutStores[e]=new $ye}function Fye(n,e){e.drag&&ox(n,"drag"),e.wheel&&ox(n,"wheel"),e.scroll&&ox(n,"scroll"),e.move&&ox(n,"move"),e.pinch&&ox(n,"pinch"),e.hover&&ox(n,"hover")}const TV=(n,e,t)=>(r,i,s,a={},o=!1)=>{var l,c;const u=(l=a.capture)!==null&&l!==void 0?l:e.capture,d=(c=a.passive)!==null&&c!==void 0?c:e.passive;let h=o?r:eye(r,i,u);t&&d&&(h+="Passive"),n[h]=n[h]||[],n[h].push(s)};function Pye(n,e={},t,r){const i=Ne.useMemo(()=>new Lye(n),[]);if(i.applyHandlers(n,r),i.applyConfig(e,t),Ne.useEffect(i.effect.bind(i)),Ne.useEffect(()=>i.clean.bind(i),[]),e.target===void 0)return i.bind.bind(i)}function Uye(n,e){return Rye(Nye),Pye({drag:n},e||{},"drag")}function bC(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function K$(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function zye(n,e){if(n){if(typeof n=="string")return K$(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return K$(n,e)}}function Hye(n){if(Array.isArray(n))return K$(n)}function Vye(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Gye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wye(n){return Hye(n)||Vye(n)||zye(n)||Gye()}new Lt;new Lt;function jye(n,e,t){return Math.max(e,Math.min(t,n))}function qye(n,e){return jye(n-Math.floor(n/e)*e,0,e)}function Xye(n,e){var t=qye(e-n,Math.PI*2);return t>Math.PI&&(t-=Math.PI*2),t}function eY(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var Au=function n(e,t,r){var i=this;eY(this,n),bC(this,"dot2",function(s,a){return i.x*s+i.y*a}),bC(this,"dot3",function(s,a,o){return i.x*s+i.y*a+i.z*o}),this.x=e,this.y=t,this.z=r},Kye=[new Au(1,1,0),new Au(-1,1,0),new Au(1,-1,0),new Au(-1,-1,0),new Au(1,0,1),new Au(-1,0,1),new Au(1,0,-1),new Au(-1,0,-1),new Au(0,1,1),new Au(0,-1,1),new Au(0,1,-1),new Au(0,-1,-1)],MV=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],RV=new Array(512),NV=new Array(512),Yye=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var t=0;t<256;t++){var r;t&1?r=MV[t]^e&255:r=MV[t]^e>>8&255,RV[t]=RV[t+256]=r,NV[t]=NV[t+256]=Kye[r%12]}};Yye(0);function Jye(n){if(typeof n=="number")n=Math.abs(n);else if(typeof n=="string"){var e=n;n=0;for(var t=0;t<e.length;t++)n=(n+(t+1)*(e.charCodeAt(t)%96))%2147483647}return n===0&&(n=311),n}function IV(n){var e=Jye(n);return function(){var t=e*48271%2147483647;return e=t,t/2147483647}}var Zye=function n(e){var t=this;eY(this,n),bC(this,"seed",0),bC(this,"init",function(r){t.seed=r,t.value=IV(r)}),bC(this,"value",IV(this.seed)),this.init(e)};new Zye(Math.random());var Qye=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.01,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1/(2*Math.PI);return r/Math.atan(1/t)*Math.atan(Math.sin(2*Math.PI*e*i)/t)},tY=function(e){return 1/(1+e+.48*e*e+.235*e*e*e)},eve=function(e){return e},tve={in:function(e){return 1-Math.cos(e*Math.PI/2)},out:function(e){return Math.sin(e*Math.PI/2)},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},nve={in:function(e){return e*e*e},out:function(e){return 1-Math.pow(1-e,3)},inOut:function(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2}},rve={in:function(e){return e*e*e*e*e},out:function(e){return 1-Math.pow(1-e,5)},inOut:function(e){return e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2}},ive={in:function(e){return 1-Math.sqrt(1-Math.pow(e,2))},out:function(e){return Math.sqrt(1-Math.pow(e-1,2))},inOut:function(e){return e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2}},sve={in:function(e){return e*e*e*e},out:function(e){return 1- --e*e*e*e},inOut:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e}},ave={in:function(e){return e===0?0:Math.pow(2,10*e-10)},out:function(e){return e===1?1:1-Math.pow(2,-10*e)},inOut:function(e){return e===0?0:e===1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2}};function La(n,e,t){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.25,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.01,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1/0,a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:tY,o=arguments.length>7&&arguments[7]!==void 0?arguments[7]:.001,l="velocity_"+e;if(n.__damp===void 0&&(n.__damp={}),n.__damp[l]===void 0&&(n.__damp[l]=0),Math.abs(n[e]-t)<=o)return n[e]=t,!1;r=Math.max(1e-4,r);var c=2/r,u=a(c*i),d=n[e]-t,h=t,p=s*r;d=Math.min(Math.max(d,-p),p),t=n[e]-d;var g=(n.__damp[l]+c*d)*i;n.__damp[l]=(n.__damp[l]-c*g)*u;var v=t+(d+g)*u;return h-n[e]>0==v>h&&(v=h,n.__damp[l]=(v-h)/i),n[e]=v,!0}var ove=function(e){return e&&e.isCamera},lve=function(e){return e&&e.isLight},_w=new be,DV=new ua,kV=new ua,Ew=new zn,JO=new be;function cve(n,e,t,r,i,s,a){typeof e=="number"?_w.setScalar(e):Array.isArray(e)?_w.set(e[0],e[1],e[2]):_w.copy(e);var o=n.parent;n.updateWorldMatrix(!0,!1),JO.setFromMatrixPosition(n.matrixWorld),ove(n)||lve(n)?Ew.lookAt(JO,_w,n.up):Ew.lookAt(_w,JO,n.up),kR(n.quaternion,kV.setFromRotationMatrix(Ew),t,r,i,s,a),o&&(Ew.extractRotation(o.matrixWorld),DV.setFromRotationMatrix(Ew),kR(n.quaternion,kV.copy(n.quaternion).premultiply(DV.invert()),t,r,i,s,a))}function Dx(n,e,t,r,i,s,a,o){return La(n,e,n[e]+Xye(n[e],t),r,i,s,a,o)}var Aw=new Lt,OV,BV;function uve(n,e,t,r,i,s,a){return typeof e=="number"?Aw.setScalar(e):Array.isArray(e)?Aw.set(e[0],e[1]):Aw.copy(e),OV=La(n,"x",Aw.x,t,r,i,s,a),BV=La(n,"y",Aw.y,t,r,i,s,a),OV||BV}var lx=new be,$V,LV,FV;function Y$(n,e,t,r,i,s,a){return typeof e=="number"?lx.setScalar(e):Array.isArray(e)?lx.set(e[0],e[1],e[2]):lx.copy(e),$V=La(n,"x",lx.x,t,r,i,s,a),LV=La(n,"y",lx.y,t,r,i,s,a),FV=La(n,"z",lx.z,t,r,i,s,a),$V||LV||FV}var ay=new Hr,PV,UV,zV,HV;function dve(n,e,t,r,i,s,a){return typeof e=="number"?ay.setScalar(e):Array.isArray(e)?ay.set(e[0],e[1],e[2],e[3]):ay.copy(e),PV=La(n,"x",ay.x,t,r,i,s,a),UV=La(n,"y",ay.y,t,r,i,s,a),zV=La(n,"z",ay.z,t,r,i,s,a),HV=La(n,"w",ay.w,t,r,i,s,a),PV||UV||zV||HV}var Tw=new Cc,VV,GV,WV;function fve(n,e,t,r,i,s,a){return Array.isArray(e)?Tw.set(e[0],e[1],e[2],e[3]):Tw.copy(e),VV=Dx(n,"x",Tw.x,t,r,i,s,a),GV=Dx(n,"y",Tw.y,t,r,i,s,a),WV=Dx(n,"z",Tw.z,t,r,i,s,a),VV||GV||WV}var cx=new sn,jV,qV,XV;function hve(n,e,t,r,i,s,a){return e instanceof sn?cx.copy(e):Array.isArray(e)?cx.setRGB(e[0],e[1],e[2]):cx.set(e),jV=La(n,"r",cx.r,t,r,i,s,a),qV=La(n,"g",cx.g,t,r,i,s,a),XV=La(n,"b",cx.b,t,r,i,s,a),jV||qV||XV}var $d=new ua,pp=new Hr,KV=new Hr,Mw=new Hr,YV,JV,ZV,QV;function kR(n,e,t,r,i,s,a){var o=n;Array.isArray(e)?$d.set(e[0],e[1],e[2],e[3]):$d.copy(e);var l=n.dot($d)>0?1:-1;return $d.x*=l,$d.y*=l,$d.z*=l,$d.w*=l,YV=La(n,"x",$d.x,t,r,i,s,a),JV=La(n,"y",$d.y,t,r,i,s,a),ZV=La(n,"z",$d.z,t,r,i,s,a),QV=La(n,"w",$d.w,t,r,i,s,a),pp.set(n.x,n.y,n.z,n.w).normalize(),KV.set(o.__damp.velocity_x,o.__damp.velocity_y,o.__damp.velocity_z,o.__damp.velocity_w),Mw.copy(pp).multiplyScalar(KV.dot(pp)/pp.dot(pp)),o.__damp.velocity_x-=Mw.x,o.__damp.velocity_y-=Mw.y,o.__damp.velocity_z-=Mw.z,o.__damp.velocity_w-=Mw.w,n.set(pp.x,pp.y,pp.z,pp.w),YV||JV||ZV||QV}var Rw=new gK,eG,tG,nG;function pve(n,e,t,r,i,s,a){return Array.isArray(e)?Rw.set(e[0],e[1],e[2]):Rw.copy(e),eG=La(n,"radius",Rw.radius,t,r,i,s,a),tG=Dx(n,"phi",Rw.phi,t,r,i,s,a),nG=Dx(n,"theta",Rw.theta,t,r,i,s,a),eG||tG||nG}var MT=new zn,rG=new be,iG=new ua,sG=new be,aG,oG,lG;function mve(n,e,t,r,i,s,a){var o=n;return o.__damp===void 0&&(o.__damp={position:new be,rotation:new ua,scale:new be},n.decompose(o.__damp.position,o.__damp.rotation,o.__damp.scale)),Array.isArray(e)?MT.set.apply(MT,Wye(e)):MT.copy(e),MT.decompose(rG,iG,sG),aG=Y$(o.__damp.position,rG,t,r,i,s,a),oG=kR(o.__damp.rotation,iG,t,r,i,s,a),lG=Y$(o.__damp.scale,sG,t,r,i,s,a),n.compose(o.__damp.position,o.__damp.rotation,o.__damp.scale),aG||oG||lG}var gve=Object.freeze({__proto__:null,rsqw:Qye,exp:tY,linear:eve,sine:tve,cubic:nve,quint:rve,circ:ive,quart:sve,expo:ave,damp:La,dampLookAt:cve,dampAngle:Dx,damp2:uve,damp3:Y$,damp4:dve,dampE:fve,dampC:hve,dampQ:kR,dampS:pve,dampM:mve});const _I=parseInt(p_.replace(/\D+/g,""));function cG(n,e){if(e===lX)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===wR||e===lP){let t=n.getIndex();if(t===null){const a=[],o=n.getAttribute("position");if(o!==void 0){for(let l=0;l<o.count;l++)a.push(l);n.setIndex(a),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const r=t.count-2,i=[];if(t)if(e===wR)for(let a=1;a<=r;a++)i.push(t.getX(0)),i.push(t.getX(a)),i.push(t.getX(a+1));else for(let a=0;a<r;a++)a%2===0?(i.push(t.getX(a)),i.push(t.getX(a+1)),i.push(t.getX(a+2))):(i.push(t.getX(a+2)),i.push(t.getX(a+1)),i.push(t.getX(a)));i.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(i),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}var Lu=Uint8Array,og=Uint16Array,J$=Uint32Array,nY=new Lu([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),rY=new Lu([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),yve=new Lu([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),iY=function(n,e){for(var t=new og(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new J$(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return[t,i]},sY=iY(nY,2),aY=sY[0],vve=sY[1];aY[28]=258,vve[258]=28;var bve=iY(rY,0),xve=bve[0],Z$=new og(32768);for(var us=0;us<32768;++us){var Jm=(us&43690)>>>1|(us&21845)<<1;Jm=(Jm&52428)>>>2|(Jm&13107)<<2,Jm=(Jm&61680)>>>4|(Jm&3855)<<4,Z$[us]=((Jm&65280)>>>8|(Jm&255)<<8)>>>1}var xC=function(n,e,t){for(var r=n.length,i=0,s=new og(e);i<r;++i)++s[n[i]-1];var a=new og(e);for(i=0;i<e;++i)a[i]=a[i-1]+s[i-1]<<1;var o;if(t){o=new og(1<<e);var l=15-e;for(i=0;i<r;++i)if(n[i])for(var c=i<<4|n[i],u=e-n[i],d=a[n[i]-1]++<<u,h=d|(1<<u)-1;d<=h;++d)o[Z$[d]>>>l]=c}else for(o=new og(r),i=0;i<r;++i)n[i]&&(o[i]=Z$[a[n[i]-1]++]>>>15-n[i]);return o},k_=new Lu(288);for(var us=0;us<144;++us)k_[us]=8;for(var us=144;us<256;++us)k_[us]=9;for(var us=256;us<280;++us)k_[us]=7;for(var us=280;us<288;++us)k_[us]=8;var oY=new Lu(32);for(var us=0;us<32;++us)oY[us]=5;var Sve=xC(k_,9,1),wve=xC(oY,5,1),ZO=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Ld=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},QO=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},Cve=function(n){return(n/8|0)+(n&7&&1)},_ve=function(n,e,t){(t==null||t>n.length)&&(t=n.length);var r=new(n instanceof og?og:n instanceof J$?J$:Lu)(t-e);return r.set(n.subarray(e,t)),r},Eve=function(n,e,t){var r=n.length;if(!r||t&&!t.l&&r<5)return e||new Lu(0);var i=!e||t,s=!t||t.i;t||(t={}),e||(e=new Lu(r*3));var a=function(ve){var xe=e.length;if(ve>xe){var Pe=new Lu(Math.max(xe*2,ve));Pe.set(e),e=Pe}},o=t.f||0,l=t.p||0,c=t.b||0,u=t.l,d=t.d,h=t.m,p=t.n,g=r*8;do{if(!u){t.f=o=Ld(n,l,1);var v=Ld(n,l+1,3);if(l+=3,v)if(v==1)u=Sve,d=wve,h=9,p=5;else if(v==2){var E=Ld(n,l,31)+257,_=Ld(n,l+10,15)+4,M=E+Ld(n,l+5,31)+1;l+=14;for(var R=new Lu(M),L=new Lu(19),$=0;$<_;++$)L[yve[$]]=Ld(n,l+$*3,7);l+=_*3;for(var N=ZO(L),I=(1<<N)-1,k=xC(L,N,1),$=0;$<M;){var P=k[Ld(n,l,I)];l+=P&15;var b=P>>>4;if(b<16)R[$++]=b;else{var G=0,W=0;for(b==16?(W=3+Ld(n,l,3),l+=2,G=R[$-1]):b==17?(W=3+Ld(n,l,7),l+=3):b==18&&(W=11+Ld(n,l,127),l+=7);W--;)R[$++]=G}}var X=R.subarray(0,E),z=R.subarray(E);h=ZO(X),p=ZO(z),u=xC(X,h,1),d=xC(z,p,1)}else throw"invalid block type";else{var b=Cve(l)+4,x=n[b-4]|n[b-3]<<8,C=b+x;if(C>r){if(s)throw"unexpected EOF";break}i&&a(c+x),e.set(n.subarray(b,C),c),t.b=c+=x,t.p=l=C*8;continue}if(l>g){if(s)throw"unexpected EOF";break}}i&&a(c+131072);for(var J=(1<<h)-1,Q=(1<<p)-1,Y=l;;Y=l){var G=u[QO(n,l)&J],q=G>>>4;if(l+=G&15,l>g){if(s)throw"unexpected EOF";break}if(!G)throw"invalid length/literal";if(q<256)e[c++]=q;else if(q==256){Y=l,u=null;break}else{var te=q-254;if(q>264){var $=q-257,ne=nY[$];te=Ld(n,l,(1<<ne)-1)+aY[$],l+=ne}var le=d[QO(n,l)&Q],ye=le>>>4;if(!le)throw"invalid distance";l+=le&15;var z=xve[ye];if(ye>3){var ne=rY[ye];z+=QO(n,l)&(1<<ne)-1,l+=ne}if(l>g){if(s)throw"unexpected EOF";break}i&&a(c+131072);for(var ue=c+te;c<ue;c+=4)e[c]=e[c-z],e[c+1]=e[c+1-z],e[c+2]=e[c+2-z],e[c+3]=e[c+3-z];c=ue}}t.l=u,t.p=Y,t.b=c,u&&(o=1,t.m=h,t.d=d,t.n=p)}while(!o);return c==e.length?e:_ve(e,0,c)},Ave=new Lu(0),Tve=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function RT(n,e){return Eve((Tve(n),n.subarray(2,-4)),e)}var Mve=typeof TextDecoder<"u"&&new TextDecoder,Rve=0;try{Mve.decode(Ave,{stream:!0}),Rve=1}catch{}var Nve=Object.defineProperty,Ive=(n,e,t)=>e in n?Nve(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,uG=(n,e,t)=>(Ive(n,typeof e!="symbol"?e+"":e,t),t);const Dve=(()=>{const n={uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new be},up:{value:new be(0,1,0)}},vertexShader:`
      uniform vec3 sunPosition;
      uniform float rayleigh;
      uniform float turbidity;
      uniform float mieCoefficient;
      uniform vec3 up;

      varying vec3 vWorldPosition;
      varying vec3 vSunDirection;
      varying float vSunfade;
      varying vec3 vBetaR;
      varying vec3 vBetaM;
      varying float vSunE;

      // constants for atmospheric scattering
      const float e = 2.71828182845904523536028747135266249775724709369995957;
      const float pi = 3.141592653589793238462643383279502884197169;

      // wavelength of used primaries, according to preetham
      const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );
      // this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:
      // (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))
      const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );

      // mie stuff
      // K coefficient for the primaries
      const float v = 4.0;
      const vec3 K = vec3( 0.686, 0.678, 0.666 );
      // MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K
      const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );

      // earth shadow hack
      // cutoffAngle = pi / 1.95;
      const float cutoffAngle = 1.6110731556870734;
      const float steepness = 1.5;
      const float EE = 1000.0;

      float sunIntensity( float zenithAngleCos ) {
        zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );
        return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );
      }

      vec3 totalMie( float T ) {
        float c = ( 0.2 * T ) * 10E-18;
        return 0.434 * c * MieConst;
      }

      void main() {

        vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
        vWorldPosition = worldPosition.xyz;

        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        gl_Position.z = gl_Position.w; // set z to camera.far

        vSunDirection = normalize( sunPosition );

        vSunE = sunIntensity( dot( vSunDirection, up ) );

        vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );

        float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );

      // extinction (absorbtion + out scattering)
      // rayleigh coefficients
        vBetaR = totalRayleigh * rayleighCoefficient;

      // mie coefficients
        vBetaM = totalMie( turbidity ) * mieCoefficient;

      }
    `,fragmentShader:`
      varying vec3 vWorldPosition;
      varying vec3 vSunDirection;
      varying float vSunfade;
      varying vec3 vBetaR;
      varying vec3 vBetaM;
      varying float vSunE;

      uniform float mieDirectionalG;
      uniform vec3 up;

      const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );

      // constants for atmospheric scattering
      const float pi = 3.141592653589793238462643383279502884197169;

      const float n = 1.0003; // refractive index of air
      const float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)

      // optical length at zenith for molecules
      const float rayleighZenithLength = 8.4E3;
      const float mieZenithLength = 1.25E3;
      // 66 arc seconds -> degrees, and the cosine of that
      const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;

      // 3.0 / ( 16.0 * pi )
      const float THREE_OVER_SIXTEENPI = 0.05968310365946075;
      // 1.0 / ( 4.0 * pi )
      const float ONE_OVER_FOURPI = 0.07957747154594767;

      float rayleighPhase( float cosTheta ) {
        return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );
      }

      float hgPhase( float cosTheta, float g ) {
        float g2 = pow( g, 2.0 );
        float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );
        return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );
      }

      void main() {

        vec3 direction = normalize( vWorldPosition - cameraPos );

      // optical length
      // cutoff angle at 90 to avoid singularity in next formula.
        float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );
        float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );
        float sR = rayleighZenithLength * inverse;
        float sM = mieZenithLength * inverse;

      // combined extinction factor
        vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );

      // in scattering
        float cosTheta = dot( direction, vSunDirection );

        float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );
        vec3 betaRTheta = vBetaR * rPhase;

        float mPhase = hgPhase( cosTheta, mieDirectionalG );
        vec3 betaMTheta = vBetaM * mPhase;

        vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );
        Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );

      // nightsky
        float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]
        float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]
        vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );
        vec3 L0 = vec3( 0.1 ) * Fex;

      // composition + solar disc
        float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );
        L0 += ( vSunE * 19000.0 * Fex ) * sundisk;

        vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );

        vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );

        gl_FragColor = vec4( retColor, 1.0 );

      #include <tonemapping_fragment>
      #include <${_I>=154?"colorspace_fragment":"encodings_fragment"}>

      }
    `},e=new No({name:"SkyShader",fragmentShader:n.fragmentShader,vertexShader:n.vertexShader,uniforms:mP.clone(n.uniforms),side:Ao,depthWrite:!1});class t extends rs{constructor(){super(new Fg(1,1,1),e)}}return uG(t,"SkyShader",n),uG(t,"material",e),t})(),kve=n=>n&&n.isCubeTexture;class Ove extends rs{constructor(e,t){var r,i;const s=kve(e),o=((i=s?(r=e.image[0])==null?void 0:r.width:e.image.width)!=null?i:1024)/4,l=Math.floor(Math.log2(o)),c=Math.pow(2,l),u=3*Math.max(c,112),d=4*c,h=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/u}`,`#define CUBEUV_TEXEL_HEIGHT ${1/d}`,`#define CUBEUV_MAX_MIP ${l}.0`],p=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,g=h.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${_I>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,v={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},b=new E_(1,16),x=new No({uniforms:v,fragmentShader:g,vertexShader:p,side:$u});super(b,x)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}function OR(n){if(typeof TextDecoder<"u")return new TextDecoder().decode(n);let e="";for(let t=0,r=n.length;t<r;t++)e+=String.fromCharCode(n[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const Dy="srgb",Np="srgb-linear",dG=3001,Bve=3e3;class ZP extends Do{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new Uve(t)}),this.register(function(t){return new zve(t)}),this.register(function(t){return new Yve(t)}),this.register(function(t){return new Jve(t)}),this.register(function(t){return new Zve(t)}),this.register(function(t){return new Vve(t)}),this.register(function(t){return new Gve(t)}),this.register(function(t){return new Wve(t)}),this.register(function(t){return new jve(t)}),this.register(function(t){return new Pve(t)}),this.register(function(t){return new qve(t)}),this.register(function(t){return new Hve(t)}),this.register(function(t){return new Kve(t)}),this.register(function(t){return new Xve(t)}),this.register(function(t){return new Lve(t)}),this.register(function(t){return new Qve(t)}),this.register(function(t){return new ebe(t)})}load(e,t,r,i){const s=this;let a;if(this.resourcePath!=="")a=this.resourcePath;else if(this.path!==""){const c=dg.extractUrlBase(e);a=dg.resolveURL(c,this.path)}else a=dg.extractUrlBase(e);this.manager.itemStart(e);const o=function(c){i?i(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new Mo(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,a,function(u){t(u),s.manager.itemEnd(e)},o)}catch(u){o(u)}},r,o)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,i){let s;const a={},o={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(OR(new Uint8Array(e.slice(0,4)))===lY){try{a[zr.KHR_BINARY_GLTF]=new tbe(e)}catch(u){i&&i(u);return}s=JSON.parse(a[zr.KHR_BINARY_GLTF].content)}else s=JSON.parse(OR(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new pbe(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const u=this.pluginCallbacks[c](l);u.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),o[u.name]=u,a[u.name]=!0}if(s.extensionsUsed)for(let c=0;c<s.extensionsUsed.length;++c){const u=s.extensionsUsed[c],d=s.extensionsRequired||[];switch(u){case zr.KHR_MATERIALS_UNLIT:a[u]=new Fve;break;case zr.KHR_DRACO_MESH_COMPRESSION:a[u]=new nbe(s,this.dracoLoader);break;case zr.KHR_TEXTURE_TRANSFORM:a[u]=new rbe;break;case zr.KHR_MESH_QUANTIZATION:a[u]=new ibe;break;default:d.indexOf(u)>=0&&o[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}l.setExtensions(a),l.setPlugins(o),l.parse(r,i)}parseAsync(e,t){const r=this;return new Promise(function(i,s){r.parse(e,t,i,s)})}}function $ve(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const zr={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Lve{constructor(e){this.parser=e,this.name=zr.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let r=0,i=t.length;r<i;r++){const s=t[r];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,r="light:"+e;let i=t.cache.get(r);if(i)return i;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const u=new sn(16777215);l.color!==void 0&&u.setRGB(l.color[0],l.color[1],l.color[2],Np);const d=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new $P(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new BP(u),c.distance=d;break;case"spot":c=new OP(u),c.distance=d,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,bp(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),i=Promise.resolve(c),t.cache.add(r,i),i}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,r=this.parser,s=r.json.nodes[e],o=(s.extensions&&s.extensions[this.name]||{}).light;return o===void 0?null:this._loadLight(o).then(function(l){return r._getNodeRef(t.cache,o,l)})}}class Fve{constructor(){this.name=zr.KHR_MATERIALS_UNLIT}getMaterialType(){return gc}extendParams(e,t,r){const i=[];e.color=new sn(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const a=s.baseColorFactor;e.color.setRGB(a[0],a[1],a[2],Np),e.opacity=a[3]}s.baseColorTexture!==void 0&&i.push(r.assignTexture(e,"map",s.baseColorTexture,Dy))}return Promise.all(i)}}class Pve{constructor(e){this.parser=e,this.name=zr.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class Uve{constructor(e){this.parser=e,this.name=zr.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ju}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],a=i.extensions[this.name];if(a.clearcoatFactor!==void 0&&(t.clearcoat=a.clearcoatFactor),a.clearcoatTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),a.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),a.clearcoatRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),a.clearcoatNormalTexture!==void 0&&(s.push(r.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),a.clearcoatNormalTexture.scale!==void 0)){const o=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Lt(o,o)}return Promise.all(s)}}class zve{constructor(e){this.parser=e,this.name=zr.KHR_MATERIALS_DISPERSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ju}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class Hve{constructor(e){this.parser=e,this.name=zr.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ju}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],a=i.extensions[this.name];return a.iridescenceFactor!==void 0&&(t.iridescence=a.iridescenceFactor),a.iridescenceTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceMap",a.iridescenceTexture)),a.iridescenceIor!==void 0&&(t.iridescenceIOR=a.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),a.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),a.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),a.iridescenceThicknessTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(s)}}class Vve{constructor(e){this.parser=e,this.name=zr.KHR_MATERIALS_SHEEN}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ju}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new sn(0,0,0),t.sheenRoughness=0,t.sheen=1;const a=i.extensions[this.name];if(a.sheenColorFactor!==void 0){const o=a.sheenColorFactor;t.sheenColor.setRGB(o[0],o[1],o[2],Np)}return a.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=a.sheenRoughnessFactor),a.sheenColorTexture!==void 0&&s.push(r.assignTexture(t,"sheenColorMap",a.sheenColorTexture,Dy)),a.sheenRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(s)}}class Gve{constructor(e){this.parser=e,this.name=zr.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ju}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],a=i.extensions[this.name];return a.transmissionFactor!==void 0&&(t.transmission=a.transmissionFactor),a.transmissionTexture!==void 0&&s.push(r.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(s)}}class Wve{constructor(e){this.parser=e,this.name=zr.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ju}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],a=i.extensions[this.name];t.thickness=a.thicknessFactor!==void 0?a.thicknessFactor:0,a.thicknessTexture!==void 0&&s.push(r.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||1/0;const o=a.attenuationColor||[1,1,1];return t.attenuationColor=new sn().setRGB(o[0],o[1],o[2],Np),Promise.all(s)}}class jve{constructor(e){this.parser=e,this.name=zr.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ju}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class qve{constructor(e){this.parser=e,this.name=zr.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ju}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],a=i.extensions[this.name];t.specularIntensity=a.specularFactor!==void 0?a.specularFactor:1,a.specularTexture!==void 0&&s.push(r.assignTexture(t,"specularIntensityMap",a.specularTexture));const o=a.specularColorFactor||[1,1,1];return t.specularColor=new sn().setRGB(o[0],o[1],o[2],Np),a.specularColorTexture!==void 0&&s.push(r.assignTexture(t,"specularColorMap",a.specularColorTexture,Dy)),Promise.all(s)}}class Xve{constructor(e){this.parser=e,this.name=zr.EXT_MATERIALS_BUMP}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ju}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],a=i.extensions[this.name];return t.bumpScale=a.bumpFactor!==void 0?a.bumpFactor:1,a.bumpTexture!==void 0&&s.push(r.assignTexture(t,"bumpMap",a.bumpTexture)),Promise.all(s)}}class Kve{constructor(e){this.parser=e,this.name=zr.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ju}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],a=i.extensions[this.name];return a.anisotropyStrength!==void 0&&(t.anisotropy=a.anisotropyStrength),a.anisotropyRotation!==void 0&&(t.anisotropyRotation=a.anisotropyRotation),a.anisotropyTexture!==void 0&&s.push(r.assignTexture(t,"anisotropyMap",a.anisotropyTexture)),Promise.all(s)}}class Yve{constructor(e){this.parser=e,this.name=zr.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,r=t.json,i=r.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],a=t.options.ktx2Loader;if(!a){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,a)}}class Jve{constructor(e){this.parser=e,this.name=zr.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const a=s.extensions[t],o=i.images[a.source];let l=r.textureLoader;if(o.uri){const c=r.options.manager.getHandler(o.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(e,a.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Zve{constructor(e){this.parser=e,this.name=zr.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const a=s.extensions[t],o=i.images[a.source];let l=r.textureLoader;if(o.uri){const c=r.options.manager.getHandler(o.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(e,a.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Qve{constructor(e){this.name=zr.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const i=r.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(o){const l=i.byteOffset||0,c=i.byteLength||0,u=i.count,d=i.byteStride,h=new Uint8Array(o,l,c);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(u,d,h,i.mode,i.filter).then(function(p){return p.buffer}):a.ready.then(function(){const p=new ArrayBuffer(u*d);return a.decodeGltfBuffer(new Uint8Array(p),u,d,h,i.mode,i.filter),p})})}else return null}}class ebe{constructor(e){this.name=zr.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,r=t.nodes[e];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const i=t.meshes[r.mesh];for(const c of i.primitives)if(c.mode!==Ru.TRIANGLES&&c.mode!==Ru.TRIANGLE_STRIP&&c.mode!==Ru.TRIANGLE_FAN&&c.mode!==void 0)return null;const a=r.extensions[this.name].attributes,o=[],l={};for(const c in a)o.push(this.parser.getDependency("accessor",a[c]).then(u=>(l[c]=u,l[c])));return o.length<1?null:(o.push(this.parser.createNodeMesh(e)),Promise.all(o).then(c=>{const u=c.pop(),d=u.isGroup?u.children:[u],h=c[0].count,p=[];for(const g of d){const v=new zn,b=new be,x=new ua,C=new be(1,1,1),E=new bP(g.geometry,g.material,h);for(let _=0;_<h;_++)l.TRANSLATION&&b.fromBufferAttribute(l.TRANSLATION,_),l.ROTATION&&x.fromBufferAttribute(l.ROTATION,_),l.SCALE&&C.fromBufferAttribute(l.SCALE,_),E.setMatrixAt(_,v.compose(b,x,C));for(const _ in l)if(_==="_COLOR_0"){const M=l[_];E.instanceColor=new Jy(M.array,M.itemSize,M.normalized)}else _!=="TRANSLATION"&&_!=="ROTATION"&&_!=="SCALE"&&g.geometry.setAttribute(_,l[_]);ei.prototype.copy.call(E,g),this.parser.assignFinalMaterial(E),p.push(E)}return u.isGroup?(u.clear(),u.add(...p),u):p[0]}))}}const lY="glTF",Nw=12,fG={JSON:1313821514,BIN:5130562};class tbe{constructor(e){this.name=zr.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Nw);if(this.header={magic:OR(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==lY)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-Nw,i=new DataView(e,Nw);let s=0;for(;s<r;){const a=i.getUint32(s,!0);s+=4;const o=i.getUint32(s,!0);if(s+=4,o===fG.JSON){const l=new Uint8Array(e,Nw+s,a);this.content=OR(l)}else if(o===fG.BIN){const l=Nw+s;this.body=e.slice(l,l+a)}s+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class nbe{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=zr.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const r=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,o={},l={},c={};for(const u in a){const d=Q$[u]||u.toLowerCase();o[d]=a[u]}for(const u in e.attributes){const d=Q$[u]||u.toLowerCase();if(a[u]!==void 0){const h=r.accessors[e.attributes[u]],p=kx[h.componentType];c[d]=p.name,l[d]=h.normalized===!0}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(d,h){i.decodeDracoFile(u,function(p){for(const g in p.attributes){const v=p.attributes[g],b=l[g];b!==void 0&&(v.normalized=b)}d(p)},o,c,Np,h)})})}}class rbe{constructor(){this.name=zr.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class ibe{constructor(){this.name=zr.KHR_MESH_QUANTIZATION}}class cY extends R1{constructor(e,t,r,i){super(e,t,r,i)}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let a=0;a!==i;a++)t[a]=r[s+a];return t}interpolate_(e,t,r,i){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=o*2,c=o*3,u=i-t,d=(r-t)/u,h=d*d,p=h*d,g=e*c,v=g-c,b=-2*p+3*h,x=p-h,C=1-b,E=x-h+d;for(let _=0;_!==o;_++){const M=a[v+_+o],R=a[v+_+l]*u,L=a[g+_+o],$=a[g+_]*u;s[_]=C*M+E*R+b*L+x*$}return s}}const sbe=new ua;class abe extends cY{interpolate_(e,t,r,i){const s=super.interpolate_(e,t,r,i);return sbe.fromArray(s).normalize().toArray(s),s}}const Ru={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},kx={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},hG={9728:no,9729:ai,9984:HN,9985:Rx,9986:Ty,9987:Pu},pG={33071:oa,33648:Kx,10497:Sg},eB={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Q$={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",..._I>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Zm={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},obe={CUBICSPLINE:void 0,LINEAR:t1,STEP:e1},tB={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function lbe(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new M_({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:vh})),n.DefaultMaterial}function oy(n,e,t){for(const r in t.extensions)n[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=t.extensions[r])}function bp(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function cbe(n,e,t){let r=!1,i=!1,s=!1;for(let c=0,u=e.length;c<u;c++){const d=e[c];if(d.POSITION!==void 0&&(r=!0),d.NORMAL!==void 0&&(i=!0),d.COLOR_0!==void 0&&(s=!0),r&&i&&s)break}if(!r&&!i&&!s)return Promise.resolve(n);const a=[],o=[],l=[];for(let c=0,u=e.length;c<u;c++){const d=e[c];if(r){const h=d.POSITION!==void 0?t.getDependency("accessor",d.POSITION):n.attributes.position;a.push(h)}if(i){const h=d.NORMAL!==void 0?t.getDependency("accessor",d.NORMAL):n.attributes.normal;o.push(h)}if(s){const h=d.COLOR_0!==void 0?t.getDependency("accessor",d.COLOR_0):n.attributes.color;l.push(h)}}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(l)]).then(function(c){const u=c[0],d=c[1],h=c[2];return r&&(n.morphAttributes.position=u),i&&(n.morphAttributes.normal=d),s&&(n.morphAttributes.color=h),n.morphTargetsRelative=!0,n})}function ube(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,r=e.weights.length;t<r;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let r=0,i=t.length;r<i;r++)n.morphTargetDictionary[t[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function dbe(n){let e;const t=n.extensions&&n.extensions[zr.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+nB(t.attributes):e=n.indices+":"+nB(n.attributes)+":"+n.mode,n.targets!==void 0)for(let r=0,i=n.targets.length;r<i;r++)e+=":"+nB(n.targets[r]);return e}function nB(n){let e="";const t=Object.keys(n).sort();for(let r=0,i=t.length;r<i;r++)e+=t[r]+":"+n[t[r]]+";";return e}function eL(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function fbe(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const hbe=new zn;class pbe{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new $ve,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,i=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,s=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||r||i&&s<98?this.textureLoader=new nK(this.options.manager):this.textureLoader=new uK(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Mo(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const r=this,i=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(a){return a._markDefs&&a._markDefs()}),Promise.all(this._invokeAll(function(a){return a.beforeRoot&&a.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(a){const o={scene:a[0][i.scene||0],scenes:a[0],animations:a[1],cameras:a[2],asset:i.asset,parser:r,userData:{}};return oy(s,o,i),bp(o,i),Promise.all(r._invokeAll(function(l){return l.afterRoot&&l.afterRoot(o)})).then(function(){for(const l of o.scenes)l.updateMatrixWorld();e(o)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let i=0,s=t.length;i<s;i++){const a=t[i].joints;for(let o=0,l=a.length;o<l;o++)e[a[o]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const a=e[i];a.mesh!==void 0&&(this._addNodeRef(this.meshCache,a.mesh),a.skin!==void 0&&(r[a.mesh].isSkinnedMesh=!0)),a.camera!==void 0&&this._addNodeRef(this.cameraCache,a.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;const i=r.clone(),s=(a,o)=>{const l=this.associations.get(a);l!=null&&this.associations.set(o,l);for(const[c,u]of a.children.entries())s(u,o.children[c])};return s(r,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){const i=e(t[r]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const r=[];for(let i=0;i<t.length;i++){const s=e(t[i]);s&&r.push(s)}return r}getDependency(e,t){const r=e+":"+t;let i=this.cache.get(r);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(r,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const r=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(s,a){return r.getDependency(e,a)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],r=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[zr.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,a){r.load(dg.resolveURL(t.uri,i.path),s,void 0,function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(r){const i=t.byteLength||0,s=t.byteOffset||0;return r.slice(s,s+i)})}loadAccessor(e){const t=this,r=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){const a=eB[i.type],o=kx[i.componentType],l=i.normalized===!0,c=new o(i.count*a);return Promise.resolve(new oi(c,a,l))}const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(a){const o=a[0],l=eB[i.type],c=kx[i.componentType],u=c.BYTES_PER_ELEMENT,d=u*l,h=i.byteOffset||0,p=i.bufferView!==void 0?r.bufferViews[i.bufferView].byteStride:void 0,g=i.normalized===!0;let v,b;if(p&&p!==d){const x=Math.floor(h/p),C="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+x+":"+i.count;let E=t.cache.get(C);E||(v=new c(o,x*p,i.count*p/u),E=new S_(v,p/u),t.cache.add(C,E)),b=new wg(E,l,h%p/u,g)}else o===null?v=new c(i.count*l):v=new c(o,h,i.count*l),b=new oi(v,l,g);if(i.sparse!==void 0){const x=eB.SCALAR,C=kx[i.sparse.indices.componentType],E=i.sparse.indices.byteOffset||0,_=i.sparse.values.byteOffset||0,M=new C(a[1],E,i.sparse.count*x),R=new c(a[2],_,i.sparse.count*l);o!==null&&(b=new oi(b.array.slice(),b.itemSize,b.normalized));for(let L=0,$=M.length;L<$;L++){const N=M[L];if(b.setX(N,R[L*l]),l>=2&&b.setY(N,R[L*l+1]),l>=3&&b.setZ(N,R[L*l+2]),l>=4&&b.setW(N,R[L*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return b})}loadTexture(e){const t=this.json,r=this.options,s=t.textures[e].source,a=t.images[s];let o=this.textureLoader;if(a.uri){const l=r.manager.getHandler(a.uri);l!==null&&(o=l)}return this.loadTextureImage(e,s,o)}loadTextureImage(e,t,r){const i=this,s=this.json,a=s.textures[e],o=s.images[t],l=(o.uri||o.bufferView)+":"+a.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,r).then(function(u){u.flipY=!1,u.name=a.name||o.name||"",u.name===""&&typeof o.uri=="string"&&o.uri.startsWith("data:image/")===!1&&(u.name=o.uri);const h=(s.samplers||{})[a.sampler]||{};return u.magFilter=hG[h.magFilter]||ai,u.minFilter=hG[h.minFilter]||Pu,u.wrapS=pG[h.wrapS]||Sg,u.wrapT=pG[h.wrapT]||Sg,i.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const r=this,i=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(d=>d.clone());const a=i.images[e],o=self.URL||self.webkitURL;let l=a.uri||"",c=!1;if(a.bufferView!==void 0)l=r.getDependency("bufferView",a.bufferView).then(function(d){c=!0;const h=new Blob([d],{type:a.mimeType});return l=o.createObjectURL(h),l});else if(a.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(d){return new Promise(function(h,p){let g=h;t.isImageBitmapLoader===!0&&(g=function(v){const b=new Ti(v);b.needsUpdate=!0,h(b)}),t.load(dg.resolveURL(d,s.path),g,void 0,p)})}).then(function(d){return c===!0&&o.revokeObjectURL(l),bp(d,a),d.userData.mimeType=a.mimeType||fbe(a.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),d});return this.sourceCache[e]=u,u}assignTexture(e,t,r,i){const s=this;return this.getDependency("texture",r.index).then(function(a){if(!a)return null;if(r.texCoord!==void 0&&r.texCoord>0&&(a=a.clone(),a.channel=r.texCoord),s.extensions[zr.KHR_TEXTURE_TRANSFORM]){const o=r.extensions!==void 0?r.extensions[zr.KHR_TEXTURE_TRANSFORM]:void 0;if(o){const l=s.associations.get(a);a=s.extensions[zr.KHR_TEXTURE_TRANSFORM].extendTexture(a,o),s.associations.set(a,l)}}return i!==void 0&&(typeof i=="number"&&(i=i===dG?Dy:Np),"colorSpace"in a?a.colorSpace=i:a.encoding=i===Dy?dG:Bve),e[t]=a,a})}assignFinalMaterial(e){const t=e.geometry;let r=e.material;const i=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,a=t.attributes.normal===void 0;if(e.isPoints){const o="PointsMaterial:"+r.uuid;let l=this.cache.get(o);l||(l=new rI,Ua.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,l.sizeAttenuation=!1,this.cache.add(o,l)),r=l}else if(e.isLine){const o="LineBasicMaterial:"+r.uuid;let l=this.cache.get(o);l||(l=new il,Ua.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,this.cache.add(o,l)),r=l}if(i||s||a){let o="ClonedMaterial:"+r.uuid+":";i&&(o+="derivative-tangents:"),s&&(o+="vertex-colors:"),a&&(o+="flat-shading:");let l=this.cache.get(o);l||(l=r.clone(),s&&(l.vertexColors=!0),a&&(l.flatShading=!0),i&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(o,l),this.associations.set(l,this.associations.get(r))),r=l}e.material=r}getMaterialType(){return M_}loadMaterial(e){const t=this,r=this.json,i=this.extensions,s=r.materials[e];let a;const o={},l=s.extensions||{},c=[];if(l[zr.KHR_MATERIALS_UNLIT]){const d=i[zr.KHR_MATERIALS_UNLIT];a=d.getMaterialType(),c.push(d.extendParams(o,s,t))}else{const d=s.pbrMetallicRoughness||{};if(o.color=new sn(1,1,1),o.opacity=1,Array.isArray(d.baseColorFactor)){const h=d.baseColorFactor;o.color.setRGB(h[0],h[1],h[2],Np),o.opacity=h[3]}d.baseColorTexture!==void 0&&c.push(t.assignTexture(o,"map",d.baseColorTexture,Dy)),o.metalness=d.metallicFactor!==void 0?d.metallicFactor:1,o.roughness=d.roughnessFactor!==void 0?d.roughnessFactor:1,d.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(o,"metalnessMap",d.metallicRoughnessTexture)),c.push(t.assignTexture(o,"roughnessMap",d.metallicRoughnessTexture))),a=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,o)})))}s.doubleSided===!0&&(o.side=$u);const u=s.alphaMode||tB.OPAQUE;if(u===tB.BLEND?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,u===tB.MASK&&(o.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&a!==gc&&(c.push(t.assignTexture(o,"normalMap",s.normalTexture)),o.normalScale=new Lt(1,1),s.normalTexture.scale!==void 0)){const d=s.normalTexture.scale;o.normalScale.set(d,d)}if(s.occlusionTexture!==void 0&&a!==gc&&(c.push(t.assignTexture(o,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(o.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&a!==gc){const d=s.emissiveFactor;o.emissive=new sn().setRGB(d[0],d[1],d[2],Np)}return s.emissiveTexture!==void 0&&a!==gc&&c.push(t.assignTexture(o,"emissiveMap",s.emissiveTexture,Dy)),Promise.all(c).then(function(){const d=new a(o);return s.name&&(d.name=s.name),bp(d,s),t.associations.set(d,{materials:e}),s.extensions&&oy(i,d,s),d})}createUniqueName(e){const t=ii.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,r=this.extensions,i=this.primitiveCache;function s(o){return r[zr.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(o,t).then(function(l){return mG(l,o,t)})}const a=[];for(let o=0,l=e.length;o<l;o++){const c=e[o],u=dbe(c),d=i[u];if(d)a.push(d.promise);else{let h;c.extensions&&c.extensions[zr.KHR_DRACO_MESH_COMPRESSION]?h=s(c):h=mG(new gr,c,t),i[u]={primitive:c,promise:h},a.push(h)}}return Promise.all(a)}loadMesh(e){const t=this,r=this.json,i=this.extensions,s=r.meshes[e],a=s.primitives,o=[];for(let l=0,c=a.length;l<c;l++){const u=a[l].material===void 0?lbe(this.cache):this.getDependency("material",a[l].material);o.push(u)}return o.push(t.loadGeometries(a)),Promise.all(o).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],d=[];for(let p=0,g=u.length;p<g;p++){const v=u[p],b=a[p];let x;const C=c[p];if(b.mode===Ru.TRIANGLES||b.mode===Ru.TRIANGLE_STRIP||b.mode===Ru.TRIANGLE_FAN||b.mode===void 0)x=s.isSkinnedMesh===!0?new vP(v,C):new rs(v,C),x.isSkinnedMesh===!0&&x.normalizeSkinWeights(),b.mode===Ru.TRIANGLE_STRIP?x.geometry=cG(x.geometry,lP):b.mode===Ru.TRIANGLE_FAN&&(x.geometry=cG(x.geometry,wR));else if(b.mode===Ru.LINES)x=new df(v,C);else if(b.mode===Ru.LINE_STRIP)x=new Lp(v,C);else if(b.mode===Ru.LINE_LOOP)x=new xP(v,C);else if(b.mode===Ru.POINTS)x=new SP(v,C);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+b.mode);Object.keys(x.geometry.morphAttributes).length>0&&ube(x,s),x.name=t.createUniqueName(s.name||"mesh_"+e),bp(x,s),b.extensions&&oy(i,x,b),t.assignFinalMaterial(x),d.push(x)}for(let p=0,g=d.length;p<g;p++)t.associations.set(d[p],{meshes:e,primitives:p});if(d.length===1)return s.extensions&&oy(i,d[0],s),d[0];const h=new Mp;s.extensions&&oy(i,h,s),t.associations.set(h,{meshes:e});for(let p=0,g=d.length;p<g;p++)h.add(d[p]);return h})}loadCamera(e){let t;const r=this.json.cameras[e],i=r[r.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?t=new Ba(dP.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):r.type==="orthographic"&&(t=new Ev(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),bp(t,r),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],r=[];for(let i=0,s=t.joints.length;i<s;i++)r.push(this._loadNodeShallow(t.joints[i]));return t.inverseBindMatrices!==void 0?r.push(this.getDependency("accessor",t.inverseBindMatrices)):r.push(null),Promise.all(r).then(function(i){const s=i.pop(),a=i,o=[],l=[];for(let c=0,u=a.length;c<u;c++){const d=a[c];if(d){o.push(d);const h=new zn;s!==null&&h.fromArray(s.array,c*16),l.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new w_(o,l)})}loadAnimation(e){const t=this.json,r=this,i=t.animations[e],s=i.name?i.name:"animation_"+e,a=[],o=[],l=[],c=[],u=[];for(let d=0,h=i.channels.length;d<h;d++){const p=i.channels[d],g=i.samplers[p.sampler],v=p.target,b=v.node,x=i.parameters!==void 0?i.parameters[g.input]:g.input,C=i.parameters!==void 0?i.parameters[g.output]:g.output;v.node!==void 0&&(a.push(this.getDependency("node",b)),o.push(this.getDependency("accessor",x)),l.push(this.getDependency("accessor",C)),c.push(g),u.push(v))}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(l),Promise.all(c),Promise.all(u)]).then(function(d){const h=d[0],p=d[1],g=d[2],v=d[3],b=d[4],x=[];for(let C=0,E=h.length;C<E;C++){const _=h[C],M=p[C],R=g[C],L=v[C],$=b[C];if(_===void 0)continue;_.updateMatrix&&_.updateMatrix();const N=r._createAnimationTracks(_,M,R,L,$);if(N)for(let I=0;I<N.length;I++)x.push(N[I])}return new o1(s,void 0,x)})}createNodeMesh(e){const t=this.json,r=this,i=t.nodes[e];return i.mesh===void 0?null:r.getDependency("mesh",i.mesh).then(function(s){const a=r._getNodeRef(r.meshCache,i.mesh,s);return i.weights!==void 0&&a.traverse(function(o){if(o.isMesh)for(let l=0,c=i.weights.length;l<c;l++)o.morphTargetInfluences[l]=i.weights[l]}),a})}loadNode(e){const t=this.json,r=this,i=t.nodes[e],s=r._loadNodeShallow(e),a=[],o=i.children||[];for(let c=0,u=o.length;c<u;c++)a.push(r.getDependency("node",o[c]));const l=i.skin===void 0?Promise.resolve(null):r.getDependency("skin",i.skin);return Promise.all([s,Promise.all(a),l]).then(function(c){const u=c[0],d=c[1],h=c[2];h!==null&&u.traverse(function(p){p.isSkinnedMesh&&p.bind(h,hbe)});for(let p=0,g=d.length;p<g;p++)u.add(d[p]);return u})}_loadNodeShallow(e){const t=this.json,r=this.extensions,i=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],a=s.name?i.createUniqueName(s.name):"",o=[],l=i._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&o.push(l),s.camera!==void 0&&o.push(i.getDependency("camera",s.camera).then(function(c){return i._getNodeRef(i.cameraCache,s.camera,c)})),i._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){o.push(c)}),this.nodeCache[e]=Promise.all(o).then(function(c){let u;if(s.isBone===!0?u=new tI:c.length>1?u=new Mp:c.length===1?u=c[0]:u=new ei,u!==c[0])for(let d=0,h=c.length;d<h;d++)u.add(c[d]);if(s.name&&(u.userData.name=s.name,u.name=a),bp(u,s),s.extensions&&oy(r,u,s),s.matrix!==void 0){const d=new zn;d.fromArray(s.matrix),u.applyMatrix4(d)}else s.translation!==void 0&&u.position.fromArray(s.translation),s.rotation!==void 0&&u.quaternion.fromArray(s.rotation),s.scale!==void 0&&u.scale.fromArray(s.scale);return i.associations.has(u)||i.associations.set(u,{}),i.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const t=this.extensions,r=this.json.scenes[e],i=this,s=new Mp;r.name&&(s.name=i.createUniqueName(r.name)),bp(s,r),r.extensions&&oy(t,s,r);const a=r.nodes||[],o=[];for(let l=0,c=a.length;l<c;l++)o.push(i.getDependency("node",a[l]));return Promise.all(o).then(function(l){for(let u=0,d=l.length;u<d;u++)s.add(l[u]);const c=u=>{const d=new Map;for(const[h,p]of i.associations)(h instanceof Ua||h instanceof Ti)&&d.set(h,p);return u.traverse(h=>{const p=i.associations.get(h);p!=null&&d.set(h,p)}),d};return i.associations=c(s),s})}_createAnimationTracks(e,t,r,i,s){const a=[],o=e.name?e.name:e.uuid,l=[];Zm[s.path]===Zm.weights?e.traverse(function(h){h.morphTargetInfluences&&l.push(h.name?h.name:h.uuid)}):l.push(o);let c;switch(Zm[s.path]){case Zm.weights:c=Qy;break;case Zm.rotation:c=ev;break;case Zm.position:case Zm.scale:c=tv;break;default:switch(r.itemSize){case 1:c=Qy;break;case 2:case 3:default:c=tv;break}break}const u=i.interpolation!==void 0?obe[i.interpolation]:t1,d=this._getArrayFromAccessor(r);for(let h=0,p=l.length;h<p;h++){const g=new c(l[h]+"."+Zm[s.path],t.array,d,u);i.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(g),a.push(g)}return a}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const r=eL(t.constructor),i=new Float32Array(t.length);for(let s=0,a=t.length;s<a;s++)i[s]=t[s]*r;t=i}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(r){const i=this instanceof ev?abe:cY;return new i(this.times,this.values,this.getValueSize()/3,r)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function mbe(n,e,t){const r=e.attributes,i=new To;if(r.POSITION!==void 0){const o=t.json.accessors[r.POSITION],l=o.min,c=o.max;if(l!==void 0&&c!==void 0){if(i.set(new be(l[0],l[1],l[2]),new be(c[0],c[1],c[2])),o.normalized){const u=eL(kx[o.componentType]);i.min.multiplyScalar(u),i.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const o=new be,l=new be;for(let c=0,u=s.length;c<u;c++){const d=s[c];if(d.POSITION!==void 0){const h=t.json.accessors[d.POSITION],p=h.min,g=h.max;if(p!==void 0&&g!==void 0){if(l.setX(Math.max(Math.abs(p[0]),Math.abs(g[0]))),l.setY(Math.max(Math.abs(p[1]),Math.abs(g[1]))),l.setZ(Math.max(Math.abs(p[2]),Math.abs(g[2]))),h.normalized){const v=eL(kx[h.componentType]);l.multiplyScalar(v)}o.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(o)}n.boundingBox=i;const a=new ro;i.getCenter(a.center),a.radius=i.min.distanceTo(i.max)/2,n.boundingSphere=a}function mG(n,e,t){const r=e.attributes,i=[];function s(a,o){return t.getDependency("accessor",a).then(function(l){n.setAttribute(o,l)})}for(const a in r){const o=Q$[a]||a.toLowerCase();o in n.attributes||i.push(s(r[a],o))}if(e.indices!==void 0&&!n.index){const a=t.getDependency("accessor",e.indices).then(function(o){n.setIndex(o)});i.push(a)}return bp(n,e),mbe(n,e,t),Promise.all(i).then(function(){return e.targets!==void 0?cbe(n,e.targets,t):n})}const gbe={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `},ybe={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `};let vbe=class extends bI{constructor(e){super(e),this.type=Ws}parse(e){const a=function($,N){switch($){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(N||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(N||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(N||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(N||""))}},d=function($,N,I){N=N||1024;let P=$.pos,G=-1,W=0,X="",z=String.fromCharCode.apply(null,new Uint16Array($.subarray(P,P+128)));for(;0>(G=z.indexOf(`
`))&&W<N&&P<$.byteLength;)X+=z,W+=z.length,P+=128,z+=String.fromCharCode.apply(null,new Uint16Array($.subarray(P,P+128)));return-1<G?($.pos+=W+G+1,X+z.slice(0,G)):!1},h=function($){const N=/^#\?(\S+)/,I=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,k=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,P=/^\s*FORMAT=(\S+)\s*$/,G=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,W={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let X,z;for(($.pos>=$.byteLength||!(X=d($)))&&a(1,"no header found"),(z=X.match(N))||a(3,"bad initial token"),W.valid|=1,W.programtype=z[1],W.string+=X+`
`;X=d($),X!==!1;){if(W.string+=X+`
`,X.charAt(0)==="#"){W.comments+=X+`
`;continue}if((z=X.match(I))&&(W.gamma=parseFloat(z[1])),(z=X.match(k))&&(W.exposure=parseFloat(z[1])),(z=X.match(P))&&(W.valid|=2,W.format=z[1]),(z=X.match(G))&&(W.valid|=4,W.height=parseInt(z[1],10),W.width=parseInt(z[2],10)),W.valid&2&&W.valid&4)break}return W.valid&2||a(3,"missing format specifier"),W.valid&4||a(3,"missing image size specifier"),W},p=function($,N,I){const k=N;if(k<8||k>32767||$[0]!==2||$[1]!==2||$[2]&128)return new Uint8Array($);k!==($[2]<<8|$[3])&&a(3,"wrong scanline width");const P=new Uint8Array(4*N*I);P.length||a(4,"unable to allocate buffer space");let G=0,W=0;const X=4*k,z=new Uint8Array(4),J=new Uint8Array(X);let Q=I;for(;Q>0&&W<$.byteLength;){W+4>$.byteLength&&a(1),z[0]=$[W++],z[1]=$[W++],z[2]=$[W++],z[3]=$[W++],(z[0]!=2||z[1]!=2||(z[2]<<8|z[3])!=k)&&a(3,"bad rgbe scanline format");let Y=0,q;for(;Y<X&&W<$.byteLength;){q=$[W++];const ne=q>128;if(ne&&(q-=128),(q===0||Y+q>X)&&a(3,"bad scanline data"),ne){const le=$[W++];for(let ye=0;ye<q;ye++)J[Y++]=le}else J.set($.subarray(W,W+q),Y),Y+=q,W+=q}const te=k;for(let ne=0;ne<te;ne++){let le=0;P[G]=J[ne+le],le+=k,P[G+1]=J[ne+le],le+=k,P[G+2]=J[ne+le],le+=k,P[G+3]=J[ne+le],G+=4}Q--}return P},g=function($,N,I,k){const P=$[N+3],G=Math.pow(2,P-128)/255;I[k+0]=$[N+0]*G,I[k+1]=$[N+1]*G,I[k+2]=$[N+2]*G,I[k+3]=1},v=function($,N,I,k){const P=$[N+3],G=Math.pow(2,P-128)/255;I[k+0]=qd.toHalfFloat(Math.min($[N+0]*G,65504)),I[k+1]=qd.toHalfFloat(Math.min($[N+1]*G,65504)),I[k+2]=qd.toHalfFloat(Math.min($[N+2]*G,65504)),I[k+3]=qd.toHalfFloat(1)},b=new Uint8Array(e);b.pos=0;const x=h(b),C=x.width,E=x.height,_=p(b.subarray(b.pos),C,E);let M,R,L;switch(this.type){case ns:L=_.length/4;const $=new Float32Array(L*4);for(let I=0;I<L;I++)g(_,I*4,$,I*4);M=$,R=ns;break;case Ws:L=_.length/4;const N=new Uint16Array(L*4);for(let I=0;I<L;I++)v(_,I*4,N,I*4);M=N,R=Ws;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:C,height:E,data:M,header:x.string,gamma:x.gamma,exposure:x.exposure,type:R}}setDataType(e){return this.type=e,this}load(e,t,r,i){function s(a,o){switch(a.type){case ns:case Ws:"colorSpace"in a?a.colorSpace="srgb-linear":a.encoding=3e3,a.minFilter=ai,a.magFilter=ai,a.generateMipmaps=!1,a.flipY=!0;break}t&&t(a,o)}return super.load(e,s,r,i)}};const Iw=_I>=152;class bbe extends bI{constructor(e){super(e),this.type=Ws}parse(e){const N=Math.pow(2.7182818,2.2);function I(ae,me){for(var Oe=0,nt=0;nt<65536;++nt)(nt==0||ae[nt>>3]&1<<(nt&7))&&(me[Oe++]=nt);for(var ct=Oe-1;Oe<65536;)me[Oe++]=0;return ct}function k(ae){for(var me=0;me<16384;me++)ae[me]={},ae[me].len=0,ae[me].lit=0,ae[me].p=null}const P={l:0,c:0,lc:0};function G(ae,me,Oe,nt,ct){for(;Oe<ae;)me=me<<8|an(nt,ct),Oe+=8;Oe-=ae,P.l=me>>Oe&(1<<ae)-1,P.c=me,P.lc=Oe}const W=new Array(59);function X(ae){for(var me=0;me<=58;++me)W[me]=0;for(var me=0;me<65537;++me)W[ae[me]]+=1;for(var Oe=0,me=58;me>0;--me){var nt=Oe+W[me]>>1;W[me]=Oe,Oe=nt}for(var me=0;me<65537;++me){var ct=ae[me];ct>0&&(ae[me]=ct|W[ct]++<<6)}}function z(ae,me,Oe,nt,ct,St,jt){for(var se=Oe,Se=0,Ae=0;ct<=St;ct++){if(se.value-Oe.value>nt)return!1;G(6,Se,Ae,ae,se);var Me=P.l;if(Se=P.c,Ae=P.lc,jt[ct]=Me,Me==63){if(se.value-Oe.value>nt)throw"Something wrong with hufUnpackEncTable";G(8,Se,Ae,ae,se);var _e=P.l+6;if(Se=P.c,Ae=P.lc,ct+_e>St+1)throw"Something wrong with hufUnpackEncTable";for(;_e--;)jt[ct++]=0;ct--}else if(Me>=59){var _e=Me-59+2;if(ct+_e>St+1)throw"Something wrong with hufUnpackEncTable";for(;_e--;)jt[ct++]=0;ct--}}X(jt)}function J(ae){return ae&63}function Q(ae){return ae>>6}function Y(ae,me,Oe,nt){for(;me<=Oe;me++){var ct=Q(ae[me]),St=J(ae[me]);if(ct>>St)throw"Invalid table entry";if(St>14){var jt=nt[ct>>St-14];if(jt.len)throw"Invalid table entry";if(jt.lit++,jt.p){var se=jt.p;jt.p=new Array(jt.lit);for(var Se=0;Se<jt.lit-1;++Se)jt.p[Se]=se[Se]}else jt.p=new Array(1);jt.p[jt.lit-1]=me}else if(St)for(var Ae=0,Se=1<<14-St;Se>0;Se--){var jt=nt[(ct<<14-St)+Ae];if(jt.len||jt.p)throw"Invalid table entry";jt.len=St,jt.lit=me,Ae++}}return!0}const q={c:0,lc:0};function te(ae,me,Oe,nt){ae=ae<<8|an(Oe,nt),me+=8,q.c=ae,q.lc=me}const ne={c:0,lc:0};function le(ae,me,Oe,nt,ct,St,jt,se,Se,Ae){if(ae==me){nt<8&&(te(Oe,nt,ct,jt),Oe=q.c,nt=q.lc),nt-=8;var Me=Oe>>nt,Me=new Uint8Array([Me])[0];if(Se.value+Me>Ae)return!1;for(var _e=se[Se.value-1];Me-- >0;)se[Se.value++]=_e}else if(Se.value<Ae)se[Se.value++]=ae;else return!1;ne.c=Oe,ne.lc=nt}function ye(ae){return ae&65535}function ue(ae){var me=ye(ae);return me>32767?me-65536:me}const ve={a:0,b:0};function xe(ae,me){var Oe=ue(ae),nt=ue(me),ct=nt,St=Oe+(ct&1)+(ct>>1),jt=St,se=St-ct;ve.a=jt,ve.b=se}function Pe(ae,me){var Oe=ye(ae),nt=ye(me),ct=Oe-(nt>>1)&65535,St=nt+ct-32768&65535;ve.a=St,ve.b=ct}function ze(ae,me,Oe,nt,ct,St,jt){for(var se=jt<16384,Se=Oe>ct?ct:Oe,Ae=1,Me;Ae<=Se;)Ae<<=1;for(Ae>>=1,Me=Ae,Ae>>=1;Ae>=1;){for(var _e=0,Nt=_e+St*(ct-Me),vt=St*Ae,Tt=St*Me,Et=nt*Ae,qt=nt*Me,Qt,Wt,bn,Hn;_e<=Nt;_e+=Tt){for(var On=_e,or=_e+nt*(Oe-Me);On<=or;On+=qt){var yn=On+Et,ln=On+vt,Rr=ln+Et;se?(xe(ae[On+me],ae[ln+me]),Qt=ve.a,bn=ve.b,xe(ae[yn+me],ae[Rr+me]),Wt=ve.a,Hn=ve.b,xe(Qt,Wt),ae[On+me]=ve.a,ae[yn+me]=ve.b,xe(bn,Hn),ae[ln+me]=ve.a,ae[Rr+me]=ve.b):(Pe(ae[On+me],ae[ln+me]),Qt=ve.a,bn=ve.b,Pe(ae[yn+me],ae[Rr+me]),Wt=ve.a,Hn=ve.b,Pe(Qt,Wt),ae[On+me]=ve.a,ae[yn+me]=ve.b,Pe(bn,Hn),ae[ln+me]=ve.a,ae[Rr+me]=ve.b)}if(Oe&Ae){var ln=On+vt;se?xe(ae[On+me],ae[ln+me]):Pe(ae[On+me],ae[ln+me]),Qt=ve.a,ae[ln+me]=ve.b,ae[On+me]=Qt}}if(ct&Ae)for(var On=_e,or=_e+nt*(Oe-Me);On<=or;On+=qt){var yn=On+Et;se?xe(ae[On+me],ae[yn+me]):Pe(ae[On+me],ae[yn+me]),Qt=ve.a,ae[yn+me]=ve.b,ae[On+me]=Qt}Me=Ae,Ae>>=1}return _e}function Ke(ae,me,Oe,nt,ct,St,jt,se,Se,Ae){for(var Me=0,_e=0,Nt=se,vt=Math.trunc(ct.value+(St+7)/8);ct.value<vt;)for(te(Me,_e,Oe,ct),Me=q.c,_e=q.lc;_e>=14;){var Tt=Me>>_e-14&16383,Et=me[Tt];if(Et.len)_e-=Et.len,le(Et.lit,jt,Me,_e,Oe,nt,ct,Se,Ae,Nt),Me=ne.c,_e=ne.lc;else{if(!Et.p)throw"hufDecode issues";var qt;for(qt=0;qt<Et.lit;qt++){for(var Qt=J(ae[Et.p[qt]]);_e<Qt&&ct.value<vt;)te(Me,_e,Oe,ct),Me=q.c,_e=q.lc;if(_e>=Qt&&Q(ae[Et.p[qt]])==(Me>>_e-Qt&(1<<Qt)-1)){_e-=Qt,le(Et.p[qt],jt,Me,_e,Oe,nt,ct,Se,Ae,Nt),Me=ne.c,_e=ne.lc;break}}if(qt==Et.lit)throw"hufDecode issues"}}var Wt=8-St&7;for(Me>>=Wt,_e-=Wt;_e>0;){var Et=me[Me<<14-_e&16383];if(Et.len)_e-=Et.len,le(Et.lit,jt,Me,_e,Oe,nt,ct,Se,Ae,Nt),Me=ne.c,_e=ne.lc;else throw"hufDecode issues"}return!0}function pt(ae,me,Oe,nt,ct,St){var jt={value:0},se=Oe.value,Se=Mt(me,Oe),Ae=Mt(me,Oe);Oe.value+=4;var Me=Mt(me,Oe);if(Oe.value+=4,Se<0||Se>=65537||Ae<0||Ae>=65537)throw"Something wrong with HUF_ENCSIZE";var _e=new Array(65537),Nt=new Array(16384);k(Nt);var vt=nt-(Oe.value-se);if(z(ae,me,Oe,vt,Se,Ae,_e),Me>8*(nt-(Oe.value-se)))throw"Something wrong with hufUncompress";Y(_e,Se,Ae,Nt),Ke(_e,Nt,ae,me,Oe,Me,Ae,St,ct,jt)}function dt(ae,me,Oe){for(var nt=0;nt<Oe;++nt)me[nt]=ae[me[nt]]}function pe(ae){for(var me=1;me<ae.length;me++){var Oe=ae[me-1]+ae[me]-128;ae[me]=Oe}}function Le(ae,me){for(var Oe=0,nt=Math.floor((ae.length+1)/2),ct=0,St=ae.length-1;!(ct>St||(me[ct++]=ae[Oe++],ct>St));)me[ct++]=ae[nt++]}function Ue(ae){for(var me=ae.byteLength,Oe=new Array,nt=0,ct=new DataView(ae);me>0;){var St=ct.getInt8(nt++);if(St<0){var jt=-St;me-=jt+1;for(var se=0;se<jt;se++)Oe.push(ct.getUint8(nt++))}else{var jt=St;me-=2;for(var Se=ct.getUint8(nt++),se=0;se<jt+1;se++)Oe.push(Se)}}return Oe}function Ze(ae,me,Oe,nt,ct,St){var yn=new DataView(St.buffer),jt=Oe[ae.idx[0]].width,se=Oe[ae.idx[0]].height,Se=3,Ae=Math.floor(jt/8),Me=Math.ceil(jt/8),_e=Math.ceil(se/8),Nt=jt-(Me-1)*8,vt=se-(_e-1)*8,Tt={value:0},Et=new Array(Se),qt=new Array(Se),Qt=new Array(Se),Wt=new Array(Se),bn=new Array(Se);for(let cr=0;cr<Se;++cr)bn[cr]=me[ae.idx[cr]],Et[cr]=cr<1?0:Et[cr-1]+Me*_e,qt[cr]=new Float32Array(64),Qt[cr]=new Uint16Array(64),Wt[cr]=new Uint16Array(Me*64);for(let cr=0;cr<_e;++cr){var Hn=8;cr==_e-1&&(Hn=vt);var On=8;for(let Zn=0;Zn<Me;++Zn){Zn==Me-1&&(On=Nt);for(let Mn=0;Mn<Se;++Mn)Qt[Mn].fill(0),Qt[Mn][0]=ct[Et[Mn]++],je(Tt,nt,Qt[Mn]),lt(Qt[Mn],qt[Mn]),st(qt[Mn]);ot(qt);for(let Mn=0;Mn<Se;++Mn)Ut(qt[Mn],Wt[Mn],Zn*64)}let jn=0;for(let Zn=0;Zn<Se;++Zn){const Mn=Oe[ae.idx[Zn]].type;for(let Wr=8*cr;Wr<8*cr+Hn;++Wr){jn=bn[Zn][Wr];for(let wi=0;wi<Ae;++wi){const Sr=wi*64+(Wr&7)*8;yn.setUint16(jn+0*Mn,Wt[Zn][Sr+0],!0),yn.setUint16(jn+2*Mn,Wt[Zn][Sr+1],!0),yn.setUint16(jn+4*Mn,Wt[Zn][Sr+2],!0),yn.setUint16(jn+6*Mn,Wt[Zn][Sr+3],!0),yn.setUint16(jn+8*Mn,Wt[Zn][Sr+4],!0),yn.setUint16(jn+10*Mn,Wt[Zn][Sr+5],!0),yn.setUint16(jn+12*Mn,Wt[Zn][Sr+6],!0),yn.setUint16(jn+14*Mn,Wt[Zn][Sr+7],!0),jn+=16*Mn}}if(Ae!=Me)for(let Wr=8*cr;Wr<8*cr+Hn;++Wr){const wi=bn[Zn][Wr]+8*Ae*2*Mn,Sr=Ae*64+(Wr&7)*8;for(let Ci=0;Ci<On;++Ci)yn.setUint16(wi+Ci*2*Mn,Wt[Zn][Sr+Ci],!0)}}}for(var or=new Uint16Array(jt),yn=new DataView(St.buffer),ln=0;ln<Se;++ln){Oe[ae.idx[ln]].decoded=!0;var Rr=Oe[ae.idx[ln]].type;if(Oe[ln].type==2)for(var Jn=0;Jn<se;++Jn){const cr=bn[ln][Jn];for(var Kr=0;Kr<jt;++Kr)or[Kr]=yn.getUint16(cr+Kr*2*Rr,!0);for(var Kr=0;Kr<jt;++Kr)yn.setFloat32(cr+Kr*2*Rr,qe(or[Kr]),!0)}}}function je(ae,me,Oe){for(var nt,ct=1;ct<64;)nt=me[ae.value],nt==65280?ct=64:nt>>8==255?ct+=nt&255:(Oe[ct]=nt,ct++),ae.value++}function lt(ae,me){me[0]=qe(ae[0]),me[1]=qe(ae[1]),me[2]=qe(ae[5]),me[3]=qe(ae[6]),me[4]=qe(ae[14]),me[5]=qe(ae[15]),me[6]=qe(ae[27]),me[7]=qe(ae[28]),me[8]=qe(ae[2]),me[9]=qe(ae[4]),me[10]=qe(ae[7]),me[11]=qe(ae[13]),me[12]=qe(ae[16]),me[13]=qe(ae[26]),me[14]=qe(ae[29]),me[15]=qe(ae[42]),me[16]=qe(ae[3]),me[17]=qe(ae[8]),me[18]=qe(ae[12]),me[19]=qe(ae[17]),me[20]=qe(ae[25]),me[21]=qe(ae[30]),me[22]=qe(ae[41]),me[23]=qe(ae[43]),me[24]=qe(ae[9]),me[25]=qe(ae[11]),me[26]=qe(ae[18]),me[27]=qe(ae[24]),me[28]=qe(ae[31]),me[29]=qe(ae[40]),me[30]=qe(ae[44]),me[31]=qe(ae[53]),me[32]=qe(ae[10]),me[33]=qe(ae[19]),me[34]=qe(ae[23]),me[35]=qe(ae[32]),me[36]=qe(ae[39]),me[37]=qe(ae[45]),me[38]=qe(ae[52]),me[39]=qe(ae[54]),me[40]=qe(ae[20]),me[41]=qe(ae[22]),me[42]=qe(ae[33]),me[43]=qe(ae[38]),me[44]=qe(ae[46]),me[45]=qe(ae[51]),me[46]=qe(ae[55]),me[47]=qe(ae[60]),me[48]=qe(ae[21]),me[49]=qe(ae[34]),me[50]=qe(ae[37]),me[51]=qe(ae[47]),me[52]=qe(ae[50]),me[53]=qe(ae[56]),me[54]=qe(ae[59]),me[55]=qe(ae[61]),me[56]=qe(ae[35]),me[57]=qe(ae[36]),me[58]=qe(ae[48]),me[59]=qe(ae[49]),me[60]=qe(ae[57]),me[61]=qe(ae[58]),me[62]=qe(ae[62]),me[63]=qe(ae[63])}function st(ae){const me=.5*Math.cos(.7853975),Oe=.5*Math.cos(3.14159/16),nt=.5*Math.cos(3.14159/8),ct=.5*Math.cos(3*3.14159/16),St=.5*Math.cos(5*3.14159/16),jt=.5*Math.cos(3*3.14159/8),se=.5*Math.cos(7*3.14159/16);for(var Se=new Array(4),Ae=new Array(4),Me=new Array(4),_e=new Array(4),Nt=0;Nt<8;++Nt){var vt=Nt*8;Se[0]=nt*ae[vt+2],Se[1]=jt*ae[vt+2],Se[2]=nt*ae[vt+6],Se[3]=jt*ae[vt+6],Ae[0]=Oe*ae[vt+1]+ct*ae[vt+3]+St*ae[vt+5]+se*ae[vt+7],Ae[1]=ct*ae[vt+1]-se*ae[vt+3]-Oe*ae[vt+5]-St*ae[vt+7],Ae[2]=St*ae[vt+1]-Oe*ae[vt+3]+se*ae[vt+5]+ct*ae[vt+7],Ae[3]=se*ae[vt+1]-St*ae[vt+3]+ct*ae[vt+5]-Oe*ae[vt+7],Me[0]=me*(ae[vt+0]+ae[vt+4]),Me[3]=me*(ae[vt+0]-ae[vt+4]),Me[1]=Se[0]+Se[3],Me[2]=Se[1]-Se[2],_e[0]=Me[0]+Me[1],_e[1]=Me[3]+Me[2],_e[2]=Me[3]-Me[2],_e[3]=Me[0]-Me[1],ae[vt+0]=_e[0]+Ae[0],ae[vt+1]=_e[1]+Ae[1],ae[vt+2]=_e[2]+Ae[2],ae[vt+3]=_e[3]+Ae[3],ae[vt+4]=_e[3]-Ae[3],ae[vt+5]=_e[2]-Ae[2],ae[vt+6]=_e[1]-Ae[1],ae[vt+7]=_e[0]-Ae[0]}for(var Tt=0;Tt<8;++Tt)Se[0]=nt*ae[16+Tt],Se[1]=jt*ae[16+Tt],Se[2]=nt*ae[48+Tt],Se[3]=jt*ae[48+Tt],Ae[0]=Oe*ae[8+Tt]+ct*ae[24+Tt]+St*ae[40+Tt]+se*ae[56+Tt],Ae[1]=ct*ae[8+Tt]-se*ae[24+Tt]-Oe*ae[40+Tt]-St*ae[56+Tt],Ae[2]=St*ae[8+Tt]-Oe*ae[24+Tt]+se*ae[40+Tt]+ct*ae[56+Tt],Ae[3]=se*ae[8+Tt]-St*ae[24+Tt]+ct*ae[40+Tt]-Oe*ae[56+Tt],Me[0]=me*(ae[Tt]+ae[32+Tt]),Me[3]=me*(ae[Tt]-ae[32+Tt]),Me[1]=Se[0]+Se[3],Me[2]=Se[1]-Se[2],_e[0]=Me[0]+Me[1],_e[1]=Me[3]+Me[2],_e[2]=Me[3]-Me[2],_e[3]=Me[0]-Me[1],ae[0+Tt]=_e[0]+Ae[0],ae[8+Tt]=_e[1]+Ae[1],ae[16+Tt]=_e[2]+Ae[2],ae[24+Tt]=_e[3]+Ae[3],ae[32+Tt]=_e[3]-Ae[3],ae[40+Tt]=_e[2]-Ae[2],ae[48+Tt]=_e[1]-Ae[1],ae[56+Tt]=_e[0]-Ae[0]}function ot(ae){for(var me=0;me<64;++me){var Oe=ae[0][me],nt=ae[1][me],ct=ae[2][me];ae[0][me]=Oe+1.5747*ct,ae[1][me]=Oe-.1873*nt-.4682*ct,ae[2][me]=Oe+1.8556*nt}}function Ut(ae,me,Oe){for(var nt=0;nt<64;++nt)me[Oe+nt]=qd.toHalfFloat(mt(ae[nt]))}function mt(ae){return ae<=1?Math.sign(ae)*Math.pow(Math.abs(ae),2.2):Math.sign(ae)*Math.pow(N,Math.abs(ae)-1)}function ce(ae){return new DataView(ae.array.buffer,ae.offset.value,ae.size)}function re(ae){var me=ae.viewer.buffer.slice(ae.offset.value,ae.offset.value+ae.size),Oe=new Uint8Array(Ue(me)),nt=new Uint8Array(Oe.length);return pe(Oe),Le(Oe,nt),new DataView(nt.buffer)}function $e(ae){var me=ae.array.slice(ae.offset.value,ae.offset.value+ae.size),Oe=RT(me),nt=new Uint8Array(Oe.length);return pe(Oe),Le(Oe,nt),new DataView(nt.buffer)}function Xe(ae){for(var me=ae.viewer,Oe={value:ae.offset.value},nt=new Uint16Array(ae.width*ae.scanlineBlockSize*(ae.channels*ae.type)),ct=new Uint8Array(8192),St=0,jt=new Array(ae.channels),se=0;se<ae.channels;se++)jt[se]={},jt[se].start=St,jt[se].end=jt[se].start,jt[se].nx=ae.width,jt[se].ny=ae.lines,jt[se].size=ae.type,St+=jt[se].nx*jt[se].ny*jt[se].size;var Se=$t(me,Oe),Ae=$t(me,Oe);if(Ae>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(Se<=Ae)for(var se=0;se<Ae-Se+1;se++)ct[se+Se]=tn(me,Oe);var Me=new Uint16Array(65536),_e=I(ct,Me),Nt=Mt(me,Oe);pt(ae.array,me,Oe,Nt,nt,St);for(var se=0;se<ae.channels;++se)for(var vt=jt[se],Tt=0;Tt<jt[se].size;++Tt)ze(nt,vt.start+Tt,vt.nx,vt.size,vt.ny,vt.nx*vt.size,_e);dt(Me,nt,St);for(var Et=0,qt=new Uint8Array(nt.buffer.byteLength),Qt=0;Qt<ae.lines;Qt++)for(var Wt=0;Wt<ae.channels;Wt++){var vt=jt[Wt],bn=vt.nx*vt.size,Hn=new Uint8Array(nt.buffer,vt.end*2,bn*2);qt.set(Hn,Et),Et+=bn*2,vt.end+=bn}return new DataView(qt.buffer)}function at(ae){var me=ae.array.slice(ae.offset.value,ae.offset.value+ae.size),Oe=RT(me);const nt=ae.lines*ae.channels*ae.width,ct=ae.type==1?new Uint16Array(nt):new Uint32Array(nt);let St=0,jt=0;const se=new Array(4);for(let Se=0;Se<ae.lines;Se++)for(let Ae=0;Ae<ae.channels;Ae++){let Me=0;switch(ae.type){case 1:se[0]=St,se[1]=se[0]+ae.width,St=se[1]+ae.width;for(let _e=0;_e<ae.width;++_e){const Nt=Oe[se[0]++]<<8|Oe[se[1]++];Me+=Nt,ct[jt]=Me,jt++}break;case 2:se[0]=St,se[1]=se[0]+ae.width,se[2]=se[1]+ae.width,St=se[2]+ae.width;for(let _e=0;_e<ae.width;++_e){const Nt=Oe[se[0]++]<<24|Oe[se[1]++]<<16|Oe[se[2]++]<<8;Me+=Nt,ct[jt]=Me,jt++}break}}return new DataView(ct.buffer)}function et(ae){var me=ae.viewer,Oe={value:ae.offset.value},nt=new Uint8Array(ae.width*ae.lines*(ae.channels*ae.type*2)),ct={version:zt(me,Oe),unknownUncompressedSize:zt(me,Oe),unknownCompressedSize:zt(me,Oe),acCompressedSize:zt(me,Oe),dcCompressedSize:zt(me,Oe),rleCompressedSize:zt(me,Oe),rleUncompressedSize:zt(me,Oe),rleRawSize:zt(me,Oe),totalAcUncompressedCount:zt(me,Oe),totalDcUncompressedCount:zt(me,Oe),acCompression:zt(me,Oe)};if(ct.version<2)throw"EXRLoader.parse: "+vr.compression+" version "+ct.version+" is unsupported";for(var St=new Array,jt=$t(me,Oe)-2;jt>0;){var se=Ft(me.buffer,Oe),Se=tn(me,Oe),Ae=Se>>2&3,Me=(Se>>4)-1,_e=new Int8Array([Me])[0],Nt=tn(me,Oe);St.push({name:se,index:_e,type:Nt,compression:Ae}),jt-=se.length+3}for(var vt=vr.channels,Tt=new Array(ae.channels),Et=0;Et<ae.channels;++Et){var qt=Tt[Et]={},Qt=vt[Et];qt.name=Qt.name,qt.compression=0,qt.decoded=!1,qt.type=Qt.pixelType,qt.pLinear=Qt.pLinear,qt.width=ae.width,qt.height=ae.lines}for(var Wt={idx:new Array(3)},bn=0;bn<ae.channels;++bn)for(var qt=Tt[bn],Et=0;Et<St.length;++Et){var Hn=St[Et];qt.name==Hn.name&&(qt.compression=Hn.compression,Hn.index>=0&&(Wt.idx[Hn.index]=bn),qt.offset=bn)}if(ct.acCompressedSize>0)switch(ct.acCompression){case 0:var yn=new Uint16Array(ct.totalAcUncompressedCount);pt(ae.array,me,Oe,ct.acCompressedSize,yn,ct.totalAcUncompressedCount);break;case 1:var On=ae.array.slice(Oe.value,Oe.value+ct.totalAcUncompressedCount),or=RT(On),yn=new Uint16Array(or.buffer);Oe.value+=ct.totalAcUncompressedCount;break}if(ct.dcCompressedSize>0){var ln={array:ae.array,offset:Oe,size:ct.dcCompressedSize},Rr=new Uint16Array($e(ln).buffer);Oe.value+=ct.dcCompressedSize}if(ct.rleRawSize>0){var On=ae.array.slice(Oe.value,Oe.value+ct.rleCompressedSize),or=RT(On),Jn=Ue(or.buffer);Oe.value+=ct.rleCompressedSize}for(var Kr=0,cr=new Array(Tt.length),Et=0;Et<cr.length;++Et)cr[Et]=new Array;for(var jn=0;jn<ae.lines;++jn)for(var Zn=0;Zn<Tt.length;++Zn)cr[Zn].push(Kr),Kr+=Tt[Zn].width*ae.type*2;Ze(Wt,cr,Tt,yn,Rr,nt);for(var Et=0;Et<Tt.length;++Et){var qt=Tt[Et];if(!qt.decoded)switch(qt.compression){case 2:for(var Mn=0,Wr=0,jn=0;jn<ae.lines;++jn){for(var wi=cr[Et][Mn],Sr=0;Sr<qt.width;++Sr){for(var Ci=0;Ci<2*qt.type;++Ci)nt[wi++]=Jn[Wr+Ci*qt.width*qt.height];Wr++}Mn++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(nt.buffer)}function Ft(ae,me){for(var Oe=new Uint8Array(ae),nt=0;Oe[me.value+nt]!=0;)nt+=1;var ct=new TextDecoder().decode(Oe.slice(me.value,me.value+nt));return me.value=me.value+nt+1,ct}function At(ae,me,Oe){var nt=new TextDecoder().decode(new Uint8Array(ae).slice(me.value,me.value+Oe));return me.value=me.value+Oe,nt}function _t(ae,me){var Oe=yt(ae,me),nt=Mt(ae,me);return[Oe,nt]}function Xt(ae,me){var Oe=Mt(ae,me),nt=Mt(ae,me);return[Oe,nt]}function yt(ae,me){var Oe=ae.getInt32(me.value,!0);return me.value=me.value+4,Oe}function Mt(ae,me){var Oe=ae.getUint32(me.value,!0);return me.value=me.value+4,Oe}function an(ae,me){var Oe=ae[me.value];return me.value=me.value+1,Oe}function tn(ae,me){var Oe=ae.getUint8(me.value);return me.value=me.value+1,Oe}const zt=function(ae,me){let Oe;return"getBigInt64"in DataView.prototype?Oe=Number(ae.getBigInt64(me.value,!0)):Oe=ae.getUint32(me.value+4,!0)+Number(ae.getUint32(me.value,!0)<<32),me.value+=8,Oe};function hn(ae,me){var Oe=ae.getFloat32(me.value,!0);return me.value+=4,Oe}function Te(ae,me){return qd.toHalfFloat(hn(ae,me))}function qe(ae){var me=(ae&31744)>>10,Oe=ae&1023;return(ae>>15?-1:1)*(me?me===31?Oe?NaN:1/0:Math.pow(2,me-15)*(1+Oe/1024):6103515625e-14*(Oe/1024))}function $t(ae,me){var Oe=ae.getUint16(me.value,!0);return me.value+=2,Oe}function en(ae,me){return qe($t(ae,me))}function Vt(ae,me,Oe,nt){for(var ct=Oe.value,St=[];Oe.value<ct+nt-1;){var jt=Ft(me,Oe),se=yt(ae,Oe),Se=tn(ae,Oe);Oe.value+=3;var Ae=yt(ae,Oe),Me=yt(ae,Oe);St.push({name:jt,pixelType:se,pLinear:Se,xSampling:Ae,ySampling:Me})}return Oe.value+=1,St}function kt(ae,me){var Oe=hn(ae,me),nt=hn(ae,me),ct=hn(ae,me),St=hn(ae,me),jt=hn(ae,me),se=hn(ae,me),Se=hn(ae,me),Ae=hn(ae,me);return{redX:Oe,redY:nt,greenX:ct,greenY:St,blueX:jt,blueY:se,whiteX:Se,whiteY:Ae}}function un(ae,me){var Oe=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],nt=tn(ae,me);return Oe[nt]}function In(ae,me){var Oe=Mt(ae,me),nt=Mt(ae,me),ct=Mt(ae,me),St=Mt(ae,me);return{xMin:Oe,yMin:nt,xMax:ct,yMax:St}}function Tr(ae,me){var Oe=["INCREASING_Y"],nt=tn(ae,me);return Oe[nt]}function lr(ae,me){var Oe=hn(ae,me),nt=hn(ae,me);return[Oe,nt]}function Qs(ae,me){var Oe=hn(ae,me),nt=hn(ae,me),ct=hn(ae,me);return[Oe,nt,ct]}function es(ae,me,Oe,nt,ct){if(nt==="string"||nt==="stringvector"||nt==="iccProfile")return At(me,Oe,ct);if(nt==="chlist")return Vt(ae,me,Oe,ct);if(nt==="chromaticities")return kt(ae,Oe);if(nt==="compression")return un(ae,Oe);if(nt==="box2i")return In(ae,Oe);if(nt==="lineOrder")return Tr(ae,Oe);if(nt==="float")return hn(ae,Oe);if(nt==="v2f")return lr(ae,Oe);if(nt==="v3f")return Qs(ae,Oe);if(nt==="int")return yt(ae,Oe);if(nt==="rational")return _t(ae,Oe);if(nt==="timecode")return Xt(ae,Oe);if(nt==="preview")return Oe.value+=ct,"skipped";Oe.value+=ct}function pi(ae,me,Oe){const nt={};if(ae.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";nt.version=ae.getUint8(4);const ct=ae.getUint8(5);nt.spec={singleTile:!!(ct&2),longName:!!(ct&4),deepFormat:!!(ct&8),multiPart:!!(ct&16)},Oe.value=8;for(var St=!0;St;){var jt=Ft(me,Oe);if(jt==0)St=!1;else{var se=Ft(me,Oe),Se=Mt(ae,Oe),Ae=es(ae,me,Oe,se,Se);Ae===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${se}'.`):nt[jt]=Ae}}if((ct&-5)!=0)throw console.error("EXRHeader:",nt),"THREE.EXRLoader: provided file is currently unsupported.";return nt}function Si(ae,me,Oe,nt,ct){const St={size:0,viewer:me,array:Oe,offset:nt,width:ae.dataWindow.xMax-ae.dataWindow.xMin+1,height:ae.dataWindow.yMax-ae.dataWindow.yMin+1,channels:ae.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:ae.channels[0].pixelType,uncompress:null,getter:null,format:null,[Iw?"colorSpace":"encoding"]:null};switch(ae.compression){case"NO_COMPRESSION":St.lines=1,St.uncompress=ce;break;case"RLE_COMPRESSION":St.lines=1,St.uncompress=re;break;case"ZIPS_COMPRESSION":St.lines=1,St.uncompress=$e;break;case"ZIP_COMPRESSION":St.lines=16,St.uncompress=$e;break;case"PIZ_COMPRESSION":St.lines=32,St.uncompress=Xe;break;case"PXR24_COMPRESSION":St.lines=16,St.uncompress=at;break;case"DWAA_COMPRESSION":St.lines=32,St.uncompress=et;break;case"DWAB_COMPRESSION":St.lines=256,St.uncompress=et;break;default:throw"EXRLoader.parse: "+ae.compression+" is unsupported"}if(St.scanlineBlockSize=St.lines,St.type==1)switch(ct){case ns:St.getter=en,St.inputSize=2;break;case Ws:St.getter=$t,St.inputSize=2;break}else if(St.type==2)switch(ct){case ns:St.getter=hn,St.inputSize=4;break;case Ws:St.getter=Te,St.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+St.type+" for "+ae.compression+".";St.blockCount=(ae.dataWindow.yMax+1)/St.scanlineBlockSize;for(var jt=0;jt<St.blockCount;jt++)zt(me,nt);St.outputChannels=St.channels==3?4:St.channels;const se=St.width*St.height*St.outputChannels;switch(ct){case ns:St.byteArray=new Float32Array(se),St.channels<St.outputChannels&&St.byteArray.fill(1,0,se);break;case Ws:St.byteArray=new Uint16Array(se),St.channels<St.outputChannels&&St.byteArray.fill(15360,0,se);break;default:console.error("THREE.EXRLoader: unsupported type: ",ct);break}return St.bytesPerLine=St.width*St.inputSize*St.channels,St.outputChannels==4?St.format=la:St.format=y_,Iw?St.colorSpace="srgb-linear":St.encoding=3e3,St}const Ri=new DataView(e),as=new Uint8Array(e),$o={value:0},vr=pi(Ri,e,$o),Nn=Si(vr,Ri,as,$o,this.type),$s={value:0},ci={R:0,G:1,B:2,A:3,Y:0};for(let ae=0;ae<Nn.height/Nn.scanlineBlockSize;ae++){const me=Mt(Ri,$o);Nn.size=Mt(Ri,$o),Nn.lines=me+Nn.scanlineBlockSize>Nn.height?Nn.height-me:Nn.scanlineBlockSize;const nt=Nn.size<Nn.lines*Nn.bytesPerLine?Nn.uncompress(Nn):ce(Nn);$o.value+=Nn.size;for(let ct=0;ct<Nn.scanlineBlockSize;ct++){const St=ct+ae*Nn.scanlineBlockSize;if(St>=Nn.height)break;for(let jt=0;jt<Nn.channels;jt++){const se=ci[vr.channels[jt].name];for(let Se=0;Se<Nn.width;Se++){$s.value=(ct*(Nn.channels*Nn.width)+jt*Nn.width+Se)*Nn.inputSize;const Ae=(Nn.height-1-St)*(Nn.width*Nn.outputChannels)+Se*Nn.outputChannels+se;Nn.byteArray[Ae]=Nn.getter(nt,$s)}}}}return{header:vr,width:Nn.width,height:Nn.height,data:Nn.byteArray,format:Nn.format,[Iw?"colorSpace":"encoding"]:Nn[Iw?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,r,i){function s(a,o){Iw?a.colorSpace=o.colorSpace:a.encoding=o.encoding,a.minFilter=ai,a.magFilter=ai,a.generateMipmaps=!1,a.flipY=!1,t&&t(a,o)}return super.load(e,s,r,i)}}const rB=new WeakMap;class xbe extends Do{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,r,i){const s=new Mo(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,a=>{const o={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(a,o).then(t).catch(i)},r,i)}decodeDracoFile(e,t,r,i){const s={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const c=t.attributeTypes[l];c.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=c.name)}const r=JSON.stringify(t);if(rB.has(e)){const l=rB.get(e);if(l.key===r)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const s=this.workerNextTaskID++,a=e.byteLength,o=this._getWorker(s,a).then(l=>(i=l,new Promise((c,u)=>{i._callbacks[s]={resolve:c,reject:u},i.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return o.catch(()=>!0).then(()=>{i&&s&&this._releaseTask(i,s)}),rB.set(e,{key:r,promise:o}),o}_createGeometry(e){const t=new gr;e.index&&t.setIndex(new oi(e.index.array,1));for(let r=0;r<e.attributes.length;r++){const i=e.attributes[r],s=i.name,a=i.array,o=i.itemSize;t.setAttribute(s,new oi(a,o))}return t}_loadLibrary(e,t){const r=new Mo(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise((i,s)=>{r.load(e,i,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(r=>{const i=r[0];e||(this.decoderConfig.wasmBinary=r[1]);const s=Sbe.toString(),a=["/* draco decoder */",i,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([a]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(s){const a=s.data;switch(a.type){case"decode":i._callbacks[a.id].resolve(a);break;case"error":i._callbacks[a.id].reject(a);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+a.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,s){return i._taskLoad>s._taskLoad?-1:1});const r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function Sbe(){let n,e;onmessage=function(a){const o=a.data;switch(o.type){case"init":n=o.decoderConfig,e=new Promise(function(u){n.onModuleLoaded=function(d){u({draco:d})},DracoDecoderModule(n)});break;case"decode":const l=o.buffer,c=o.taskConfig;e.then(u=>{const d=u.draco,h=new d.Decoder,p=new d.DecoderBuffer;p.Init(new Int8Array(l),l.byteLength);try{const g=t(d,h,p,c),v=g.attributes.map(b=>b.array.buffer);g.index&&v.push(g.index.array.buffer),self.postMessage({type:"decode",id:o.id,geometry:g},v)}catch(g){console.error(g),self.postMessage({type:"error",id:o.id,error:g.message})}finally{d.destroy(p),d.destroy(h)}});break}};function t(a,o,l,c){const u=c.attributeIDs,d=c.attributeTypes;let h,p;const g=o.GetEncodedGeometryType(l);if(g===a.TRIANGULAR_MESH)h=new a.Mesh,p=o.DecodeBufferToMesh(l,h);else if(g===a.POINT_CLOUD)h=new a.PointCloud,p=o.DecodeBufferToPointCloud(l,h);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!p.ok()||h.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+p.error_msg());const v={index:null,attributes:[]};for(const b in u){const x=self[d[b]];let C,E;if(c.useUniqueIDs)E=u[b],C=o.GetAttributeByUniqueId(h,E);else{if(E=o.GetAttributeId(h,a[u[b]]),E===-1)continue;C=o.GetAttribute(h,E)}v.attributes.push(i(a,o,h,b,x,C))}return g===a.TRIANGULAR_MESH&&(v.index=r(a,o,h)),a.destroy(h),v}function r(a,o,l){const u=l.num_faces()*3,d=u*4,h=a._malloc(d);o.GetTrianglesUInt32Array(l,d,h);const p=new Uint32Array(a.HEAPF32.buffer,h,u).slice();return a._free(h),{array:p,itemSize:1}}function i(a,o,l,c,u,d){const h=d.num_components(),g=l.num_points()*h,v=g*u.BYTES_PER_ELEMENT,b=s(a,u),x=a._malloc(v);o.GetAttributeDataArrayForAllPoints(l,d,b,v,x);const C=new u(a.HEAPF32.buffer,x,g).slice();return a._free(x),{name:c,array:C,itemSize:h}}function s(a,o){switch(o){case Float32Array:return a.DT_FLOAT32;case Int8Array:return a.DT_INT8;case Int16Array:return a.DT_INT16;case Int32Array:return a.DT_INT32;case Uint8Array:return a.DT_UINT8;case Uint16Array:return a.DT_UINT16;case Uint32Array:return a.DT_UINT32}}}let NT;const iB=()=>{if(NT)return NT;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),r=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let i=n;WebAssembly.validate(t)&&(i=e);let s;const a=WebAssembly.instantiate(o(i),{}).then(d=>{s=d.instance,s.exports.__wasm_call_ctors()});function o(d){const h=new Uint8Array(d.length);for(let g=0;g<d.length;++g){const v=d.charCodeAt(g);h[g]=v>96?v-71:v>64?v-65:v>47?v+4:v>46?63:62}let p=0;for(let g=0;g<d.length;++g)h[p++]=h[g]<60?r[h[g]]:(h[g]-60)*64+h[++g];return h.buffer.slice(0,p)}function l(d,h,p,g,v,b){const x=s.exports.sbrk,C=p+3&-4,E=x(C*g),_=x(v.length),M=new Uint8Array(s.exports.memory.buffer);M.set(v,_);const R=d(E,p,g,_,v.length);if(R===0&&b&&b(E,C,g),h.set(M.subarray(E,E+p*g)),x(E-x(0)),R!==0)throw new Error(`Malformed buffer data: ${R}`)}const c={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},u={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return NT={ready:a,supported:!0,decodeVertexBuffer(d,h,p,g,v){l(s.exports.meshopt_decodeVertexBuffer,d,h,p,g,s.exports[c[v]])},decodeIndexBuffer(d,h,p,g){l(s.exports.meshopt_decodeIndexBuffer,d,h,p,g)},decodeIndexSequence(d,h,p,g){l(s.exports.meshopt_decodeIndexSequence,d,h,p,g)},decodeGltfBuffer(d,h,p,g,v,b){l(s.exports[u[v]],d,h,p,g,s.exports[c[b]])}},NT};let IT=null,uY="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function dY(n=!0,e=!0,t){return r=>{t&&t(r),n&&(IT||(IT=new xbe),IT.setDecoderPath(typeof n=="string"?n:uY),r.setDRACOLoader(IT)),e&&r.setMeshoptDecoder(typeof iB=="function"?iB():iB)}}const zg=(n,e,t,r)=>Sh(ZP,n,dY(e,t,r));zg.preload=(n,e,t,r)=>Sh.preload(ZP,n,dY(e,t,r));zg.clear=n=>Sh.clear(ZP,n);zg.setDecoderPath=n=>{uY=n};const wbe=({focus:n=0,size:e=25,samples:t=10}={})=>`
#define PENUMBRA_FILTER_SIZE float(${e})
#define RGB_NOISE_FUNCTION(uv) (randRGB(uv))
vec3 randRGB(vec2 uv) {
  return vec3(
    fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),
    fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),
    fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)
  );
}

vec3 lowPassRandRGB(vec2 uv) {
  // 3x3 convolution (average)
  // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9
  vec3 result = vec3(0);
  result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));
  result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));
  result *= 0.111111111; // 1.0 / 9.0
  return result;
}
vec3 highPassRandRGB(vec2 uv) {
  // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal
  // hp(x) = x - lp(x)
  return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;
}


vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {
  const float goldenAngle = 2.399963f; // radians
  float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));
  float theta = float(sampleIndex) * goldenAngle + angle;
  float sine = sin(theta);
  float cosine = cos(theta);
  return vec2(cosine, sine) * r;
}
float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation
  return (zReceiver - zBlocker) / zBlocker;
}
float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {
  float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);
  float blockerDepthSum = float(${n});
  float blockers = 0.0;

  int j = 0;
  vec2 offset = vec2(0.);
  float depth = 0.;

  #pragma unroll_loop_start
  for(int i = 0; i < ${t}; i ++) {
    offset = (vogelDiskSample(j, ${t}, angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;
    depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));
    if (depth < compare) {
      blockerDepthSum += depth;
      blockers++;
    }
    j++;
  }
  #pragma unroll_loop_end

  if (blockers > 0.0) {
    return blockerDepthSum / blockers;
  }
  return -1.0;
}

        
float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {
  float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);
  float shadow = 0.0f;
  int j = 0;
  vec2 vogelSample = vec2(0.0);
  vec2 offset = vec2(0.0);
  #pragma unroll_loop_start
  for (int i = 0; i < ${t}; i++) {
    vogelSample = vogelDiskSample(j, ${t}, angle) * texelSize;
    offset = vogelSample * (1.0 + filterRadius * float(${e}));
    shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );
    j++;
  }
  #pragma unroll_loop_end
  return shadow * 1.0 / ${t}.0;
}

float PCSS (sampler2D shadowMap, vec4 coords) {
  vec2 uv = coords.xy;
  float zReceiver = coords.z; // Assumed to be eye-space z in this code
  float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;
  float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);
  if (avgBlockerDepth == -1.0) {
    return 1.0;
  }
  float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);
  return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);
}`;function gG(n,e,t){e.traverse(r=>{r.material&&(n.properties.remove(r.material),r.material.dispose==null||r.material.dispose())}),n.info.programs.length=0,n.compile(e,t)}function Cbe({focus:n=0,samples:e=10,size:t=25}){const r=Yd(a=>a.gl),i=Yd(a=>a.scene),s=Yd(a=>a.camera);return F.useEffect(()=>{const a=fr.shadowmap_pars_fragment;return fr.shadowmap_pars_fragment=fr.shadowmap_pars_fragment.replace("#ifdef USE_SHADOWMAP",`#ifdef USE_SHADOWMAP
`+wbe({size:t,samples:e,focus:n})).replace("#if defined( SHADOWMAP_TYPE_PCF )",`
return PCSS(shadowMap, shadowCoord);
#if defined( SHADOWMAP_TYPE_PCF )`),gG(r,i,s),()=>{fr.shadowmap_pars_fragment=a,gG(r,i,s)}},[n,t,e]),null}const _be=F.forwardRef(({children:n,enabled:e=!0,speed:t=1,rotationIntensity:r=1,floatIntensity:i=1,floatingRange:s=[-.1,.1],autoInvalidate:a=!1,...o},l)=>{const c=F.useRef(null);F.useImperativeHandle(l,()=>c.current,[]);const u=F.useRef(Math.random()*1e4);return N_(d=>{var h,p;if(!e||t===0)return;a&&d.invalidate();const g=u.current+d.clock.elapsedTime;c.current.rotation.x=Math.cos(g/4*t)/8*r,c.current.rotation.y=Math.sin(g/4*t)/8*r,c.current.rotation.z=Math.sin(g/4*t)/20*r;let v=Math.sin(g/4*t)/10;v=dP.mapLinear(v,-.1,.1,(h=s==null?void 0:s[0])!==null&&h!==void 0?h:-.1,(p=s==null?void 0:s[1])!==null&&p!==void 0?p:.1),c.current.position.y=v*i,c.current.updateMatrix()}),F.createElement("group",o,F.createElement("group",{ref:c,matrixAutoUpdate:!1},n))}),fY=(n,e,t)=>{let r;switch(n){case Pl:r=new Uint8ClampedArray(e*t*4);break;case Ws:r=new Uint16Array(e*t*4);break;case xh:r=new Uint32Array(e*t*4);break;case VN:r=new Int8Array(e*t*4);break;case GN:r=new Int16Array(e*t*4);break;case g_:r=new Int32Array(e*t*4);break;case ns:r=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return r};let DT;const Ebe=(n,e,t,r)=>{if(DT!==void 0)return DT;const i=new wc(1,1,r);e.setRenderTarget(i);const s=new rs(new Xp,new gc({color:16777215}));e.render(s,t),e.setRenderTarget(null);const a=fY(n,i.width,i.height);return e.readRenderTargetPixels(i,0,0,i.width,i.height,a),i.dispose(),s.geometry.dispose(),s.material.dispose(),DT=a[0]!==0,DT};class QP{constructor(e){var t,r,i,s,a,o,l,c,u,d,h,p,g,v,b,x;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(E){throw this._renderer.setRenderTarget(null),E}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const C={format:la,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((t=e.renderTargetOptions)===null||t===void 0?void 0:t.anisotropy)!==void 0?(r=e.renderTargetOptions)===null||r===void 0?void 0:r.anisotropy:1,generateMipmaps:((i=e.renderTargetOptions)===null||i===void 0?void 0:i.generateMipmaps)!==void 0?(s=e.renderTargetOptions)===null||s===void 0?void 0:s.generateMipmaps:!1,magFilter:((a=e.renderTargetOptions)===null||a===void 0?void 0:a.magFilter)!==void 0?(o=e.renderTargetOptions)===null||o===void 0?void 0:o.magFilter:ai,minFilter:((l=e.renderTargetOptions)===null||l===void 0?void 0:l.minFilter)!==void 0?(c=e.renderTargetOptions)===null||c===void 0?void 0:c.minFilter:ai,samples:((u=e.renderTargetOptions)===null||u===void 0?void 0:u.samples)!==void 0?(d=e.renderTargetOptions)===null||d===void 0?void 0:d.samples:void 0,wrapS:((h=e.renderTargetOptions)===null||h===void 0?void 0:h.wrapS)!==void 0?(p=e.renderTargetOptions)===null||p===void 0?void 0:p.wrapS:oa,wrapT:((g=e.renderTargetOptions)===null||g===void 0?void 0:g.wrapT)!==void 0?(v=e.renderTargetOptions)===null||v===void 0?void 0:v.wrapT:oa};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=QP.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new x_,this._camera=new Ev,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!Ebe(this._type,this._renderer,this._camera,C)){let E;switch(this._type){case Ws:E=this._renderer.extensions.has("EXT_color_buffer_float")?ns:void 0;break}E!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${ns}`),this._type=E):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new rs(new Xp,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new wc(this.width,this.height,C),this._renderTarget.texture.mapping=((b=e.renderTargetOptions)===null||b===void 0?void 0:b.mapping)!==void 0?(x=e.renderTargetOptions)===null||x===void 0?void 0:x.mapping:bg}static instantiateRenderer(){const e=new WP;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=fY(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new Kd(this.toArray(),this.width,this.height,la,this._type,(e==null?void 0:e.mapping)||bg,(e==null?void 0:e.wrapS)||oa,(e==null?void 0:e.wrapT)||oa,(e==null?void 0:e.magFilter)||ai,(e==null?void 0:e.minFilter)||ai,(e==null?void 0:e.anisotropy)||1,qu);return t.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof No&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof Ti&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof Ti&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const Abe=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,Tbe=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class Mbe extends No{constructor({gamma:e,offsetHdr:t,offsetSdr:r,gainMapMin:i,gainMapMax:s,maxDisplayBoost:a,hdrCapacityMin:o,hdrCapacityMax:l,sdr:c,gainMap:u}){super({name:"GainMapDecoderMaterial",vertexShader:Abe,fragmentShader:Tbe,uniforms:{sdr:{value:c},gainMap:{value:u},gamma:{value:new be(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new be().fromArray(t)},offsetSdr:{value:new be().fromArray(r)},gainMapMin:{value:new be().fromArray(i)},gainMapMax:{value:new be().fromArray(s)},weightFactor:{value:(Math.log2(a)-o)/(l-o)}},blending:uh,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=a,this._hdrCapacityMin=o,this._hdrCapacityMax=l,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class hY extends Error{}class pY extends Error{}const Dw=(n,e,t)=>{const r=new RegExp(`${e}="([^"]*)"`,"i").exec(n);if(r)return r[1];const i=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(n);if(i){const s=i[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return s&&s.length===3?s.map(a=>a.replace(/<\/?rdf:li>/g,"")):i[1].trim()}if(t!==void 0)return t;throw new Error(`Can't find ${e} in gainmap metadata`)},Rbe=n=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(n):e=n.toString();let t=e.indexOf("<x:xmpmeta");for(;t!==-1;){const r=e.indexOf("x:xmpmeta>",t),i=e.slice(t,r+10);try{const s=Dw(i,"hdrgm:GainMapMin","0"),a=Dw(i,"hdrgm:GainMapMax"),o=Dw(i,"hdrgm:Gamma","1"),l=Dw(i,"hdrgm:OffsetSDR","0.015625"),c=Dw(i,"hdrgm:OffsetHDR","0.015625"),u=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(i),d=u?u[1]:"0",h=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(i);if(!h)throw new Error("Incomplete gainmap metadata");const p=h[1];return{gainMapMin:Array.isArray(s)?s.map(g=>parseFloat(g)):[parseFloat(s),parseFloat(s),parseFloat(s)],gainMapMax:Array.isArray(a)?a.map(g=>parseFloat(g)):[parseFloat(a),parseFloat(a),parseFloat(a)],gamma:Array.isArray(o)?o.map(g=>parseFloat(g)):[parseFloat(o),parseFloat(o),parseFloat(o)],offsetSdr:Array.isArray(l)?l.map(g=>parseFloat(g)):[parseFloat(l),parseFloat(l),parseFloat(l)],offsetHdr:Array.isArray(c)?c.map(g=>parseFloat(g)):[parseFloat(c),parseFloat(c),parseFloat(c)],hdrCapacityMin:parseFloat(d),hdrCapacityMax:parseFloat(p)}}catch{}t=e.indexOf("<x:xmpmeta",r)}};class Nbe{constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,r)=>{const i=this.options.debug,s=new DataView(e.buffer);if(s.getUint16(0)!==65496){r(new Error("Not a valid jpeg"));return}const a=s.byteLength;let o=2,l=0,c;for(;o<a;){if(++l>250){r(new Error(`Found no marker after ${l} loops `));return}if(s.getUint8(o)!==255){r(new Error(`Not a valid marker at offset 0x${o.toString(16)}, found: 0x${s.getUint8(o).toString(16)}`));return}if(c=s.getUint8(o+1),i&&console.log(`Marker: ${c.toString(16)}`),c===226){i&&console.log("Found APP2 marker (0xffe2)");const u=o+4;if(s.getUint32(u)===1297106432){const d=u+4;let h;if(s.getUint16(d)===18761)h=!1;else if(s.getUint16(d)===19789)h=!0;else{r(new Error("No valid endianness marker found in TIFF header"));return}if(s.getUint16(d+2,!h)!==42){r(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const p=s.getUint32(d+4,!h);if(p<8){r(new Error("Not valid TIFF data! (First offset less than 8)"));return}const g=d+p,v=s.getUint16(g,!h),b=g+2;let x=0;for(let M=b;M<b+12*v;M+=12)s.getUint16(M,!h)===45057&&(x=s.getUint32(M+8,!h));const E=g+2+v*12+4,_=[];for(let M=E;M<E+x*16;M+=16){const R={MPType:s.getUint32(M,!h),size:s.getUint32(M+4,!h),dataOffset:s.getUint32(M+8,!h),dependantImages:s.getUint32(M+12,!h),start:-1,end:-1,isFII:!1};R.dataOffset?(R.start=d+R.dataOffset,R.isFII=!1):(R.start=0,R.isFII=!0),R.end=R.start+R.size,_.push(R)}if(this.options.extractNonFII&&_.length){const M=new Blob([s]),R=[];for(const L of _){if(L.isFII&&!this.options.extractFII)continue;const $=M.slice(L.start,L.end+1,"image/jpeg");R.push($)}t(R)}}}o+=2+s.getUint16(o+2)}})}}const Ibe=async n=>{const e=Rbe(n);if(!e)throw new pY("Gain map XMP metadata not found");const r=await new Nbe({extractFII:!0,extractNonFII:!0}).extract(n);if(r.length!==2)throw new hY("Gain map recovery image not found");return{sdr:new Uint8Array(await r[0].arrayBuffer()),gainMap:new Uint8Array(await r[1].arrayBuffer()),metadata:e}},yG=n=>new Promise((e,t)=>{const r=document.createElement("img");r.onload=()=>{e(r)},r.onerror=i=>{t(i)},r.src=URL.createObjectURL(n)});class mY extends Do{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new vI}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new Mbe({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new Ti,sdr:new Ti});return new QP({width:16,height:16,type:Ws,colorSpace:qu,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,r,i){const s=i?new Blob([i],{type:"image/jpeg"}):void 0,a=new Blob([r],{type:"image/jpeg"});let o,l,c=!1;if(typeof createImageBitmap>"u"){const h=await Promise.all([s?yG(s):Promise.resolve(void 0),yG(a)]);l=h[0],o=h[1],c=!0}else{const h=await Promise.all([s?createImageBitmap(s,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(a,{imageOrientation:"flipY"})]);l=h[0],o=h[1]}const u=new Ti(l||new ImageData(2,2),bg,oa,oa,ai,D$,la,Pl,1,qu);u.flipY=c,u.needsUpdate=!0;const d=new Ti(o,bg,oa,oa,ai,D$,la,Pl,1,_o);d.flipY=c,d.needsUpdate=!0,e.width=o.width,e.height=o.height,e.material.gainMap=u,e.material.sdr=d,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class Dbe extends mY{load([e,t,r],i,s,a){const o=this.prepareQuadRenderer();let l,c,u;const d=async()=>{if(l&&c&&u){try{await this.render(o,u,l,c)}catch(N){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(r),typeof a=="function"&&a(N),o.disposeOnDemandRenderer();return}typeof i=="function"&&i(o),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(r),o.disposeOnDemandRenderer()}};let h=!0,p=0,g=0,v=!0,b=0,x=0,C=!0,E=0,_=0;const M=()=>{if(typeof s=="function"){const N=p+b+E,I=g+x+_,k=h&&v&&C;s(new ProgressEvent("progress",{lengthComputable:k,loaded:I,total:N}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(r);const R=new Mo(this._internalLoadingManager);R.setResponseType("arraybuffer"),R.setRequestHeader(this.requestHeader),R.setPath(this.path),R.setWithCredentials(this.withCredentials),R.load(e,async N=>{if(typeof N=="string")throw new Error("Invalid sdr buffer");l=N,await d()},N=>{h=N.lengthComputable,g=N.loaded,p=N.total,M()},N=>{this.manager.itemError(e),typeof a=="function"&&a(N)});const L=new Mo(this._internalLoadingManager);L.setResponseType("arraybuffer"),L.setRequestHeader(this.requestHeader),L.setPath(this.path),L.setWithCredentials(this.withCredentials),L.load(t,async N=>{if(typeof N=="string")throw new Error("Invalid gainmap buffer");c=N,await d()},N=>{v=N.lengthComputable,x=N.loaded,b=N.total,M()},N=>{this.manager.itemError(t),typeof a=="function"&&a(N)});const $=new Mo(this._internalLoadingManager);return $.setRequestHeader(this.requestHeader),$.setPath(this.path),$.setWithCredentials(this.withCredentials),$.load(r,async N=>{if(typeof N!="string")throw new Error("Invalid metadata string");u=JSON.parse(N),await d()},N=>{C=N.lengthComputable,_=N.loaded,E=N.total,M()},N=>{this.manager.itemError(r),typeof a=="function"&&a(N)}),o}}class kbe extends mY{load(e,t,r,i){const s=this.prepareQuadRenderer(),a=new Mo(this._internalLoadingManager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(this.withCredentials),this.manager.itemStart(e),a.load(e,async o=>{if(typeof o=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const l=new Uint8Array(o);let c,u,d;try{const h=await Ibe(l);c=h.sdr,u=h.gainMap,d=h.metadata}catch(h){if(h instanceof pY||h instanceof hY)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),d={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},c=l;else throw h}try{await this.render(s,d,c,u)}catch(h){this.manager.itemError(e),typeof i=="function"&&i(h),s.disposeOnDemandRenderer();return}typeof t=="function"&&t(s),this.manager.itemEnd(e),s.disposeOnDemandRenderer()},r,o=>{this.manager.itemError(e),typeof i=="function"&&i(o)}),s}}const zC={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},gY="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",Ox=n=>Array.isArray(n),e4=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function EI({files:n=e4,path:e="",preset:t=void 0,colorSpace:r=void 0,extensions:i}={}){t&&(t4(t),n=zC[t],e=gY);const s=Ox(n),{extension:a,isCubemap:o}=n4(n),l=r4(a);if(!l)throw new Error("useEnvironment: Unrecognized file extension: "+n);const c=Yd(p=>p.gl);F.useLayoutEffect(()=>{if(a!=="webp"&&a!=="jpg"&&a!=="jpeg")return;function p(){Sh.clear(l,s?[n]:n)}c.domElement.addEventListener("webglcontextlost",p,{once:!0})},[n,c.domElement]);const u=Sh(l,s?[n]:n,p=>{(a==="webp"||a==="jpg"||a==="jpeg")&&p.setRenderer(c),p.setPath==null||p.setPath(e),i&&i(p)});let d=s?u[0]:u;if(a==="jpg"||a==="jpeg"||a==="webp"){var h;d=(h=d.renderTarget)==null?void 0:h.texture}return d.mapping=o?bh:Xx,d.colorSpace=r??(o?"srgb":"srgb-linear"),d}const Obe={files:e4,path:"",preset:void 0,extensions:void 0};EI.preload=n=>{const e={...Obe,...n};let{files:t,path:r=""}=e;const{preset:i,extensions:s}=e;i&&(t4(i),t=zC[i],r=gY);const{extension:a}=n4(t);if(a==="webp"||a==="jpg"||a==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const o=r4(a);if(!o)throw new Error("useEnvironment: Unrecognized file extension: "+t);Sh.preload(o,Ox(t)?[t]:t,l=>{l.setPath==null||l.setPath(r),s&&s(l)})};const Bbe={files:e4,preset:void 0};EI.clear=n=>{const e={...Bbe,...n};let{files:t}=e;const{preset:r}=e;r&&(t4(r),t=zC[r]);const{extension:i}=n4(t),s=r4(i);if(!s)throw new Error("useEnvironment: Unrecognized file extension: "+t);Sh.clear(s,Ox(t)?[t]:t)};function t4(n){if(!(n in zC))throw new Error("Preset must be one of: "+Object.keys(zC).join(", "))}function n4(n){var e;const t=Ox(n)&&n.length===6,r=Ox(n)&&n.length===3&&n.some(a=>a.endsWith("json")),i=Ox(n)?n[0]:n;return{extension:t?"cube":r?"webp":i.startsWith("data:application/exr")?"exr":i.startsWith("data:application/hdr")?"hdr":i.startsWith("data:image/jpeg")?"jpg":(e=i.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:t,isGainmap:r}}function r4(n){return n==="cube"?tK:n==="hdr"?vbe:n==="exr"?bbe:n==="jpg"||n==="jpeg"?kbe:n==="webp"?Dbe:null}const $be=n=>n.current&&n.current.isScene,Lbe=n=>$be(n)?n.current:n;function i4(n,e,t,r,i={}){var s,a,o,l;i={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...i};const c=Lbe(e||t),u=c.background,d=c.environment,h={backgroundBlurriness:c.backgroundBlurriness,backgroundIntensity:c.backgroundIntensity,backgroundRotation:(s=(a=c.backgroundRotation)==null||a.clone==null?void 0:a.clone())!==null&&s!==void 0?s:[0,0,0],environmentIntensity:c.environmentIntensity,environmentRotation:(o=(l=c.environmentRotation)==null||l.clone==null?void 0:l.clone())!==null&&o!==void 0?o:[0,0,0]};return n!=="only"&&(c.environment=r),n&&(c.background=r),ah(c,i),()=>{n!=="only"&&(c.environment=d),n&&(c.background=u),ah(c,h)}}function s4({scene:n,background:e=!1,map:t,...r}){const i=Yd(s=>s.scene);return F.useLayoutEffect(()=>{if(t)return i4(e,n,i,t,r)}),null}function yY({background:n=!1,scene:e,blur:t,backgroundBlurriness:r,backgroundIntensity:i,backgroundRotation:s,environmentIntensity:a,environmentRotation:o,...l}){const c=EI(l),u=Yd(d=>d.scene);return F.useLayoutEffect(()=>i4(n,e,u,c,{backgroundBlurriness:t??r,backgroundIntensity:i,backgroundRotation:s,environmentIntensity:a,environmentRotation:o})),F.useEffect(()=>()=>{c.dispose()},[c]),null}function Fbe({children:n,near:e=.1,far:t=1e3,resolution:r=256,frames:i=1,map:s,background:a=!1,blur:o,backgroundBlurriness:l,backgroundIntensity:c,backgroundRotation:u,environmentIntensity:d,environmentRotation:h,scene:p,files:g,path:v,preset:b=void 0,extensions:x}){const C=Yd($=>$.gl),E=Yd($=>$.scene),_=F.useRef(null),[M]=F.useState(()=>new x_),R=F.useMemo(()=>{const $=new gP(r);return $.texture.type=Ws,$},[r]);F.useEffect(()=>()=>{R.dispose()},[R]),F.useLayoutEffect(()=>{if(i===1){const $=C.autoClear;C.autoClear=!0,_.current.update(C,M),C.autoClear=$}return i4(a,p,E,R.texture,{backgroundBlurriness:o??l,backgroundIntensity:c,backgroundRotation:u,environmentIntensity:d,environmentRotation:h})},[n,M,R.texture,p,E,a,i,C]);let L=1;return N_(()=>{if(i===1/0||L<i){const $=C.autoClear;C.autoClear=!0,_.current.update(C,M),C.autoClear=$,L++}}),F.createElement(F.Fragment,null,$0e(F.createElement(F.Fragment,null,n,F.createElement("cubeCamera",{ref:_,args:[e,t,R]}),g||b?F.createElement(yY,{background:!0,files:g,preset:b,path:v,extensions:x}):s?F.createElement(s4,{background:!0,map:s,extensions:x}):null),M))}function Pbe(n){var e,t,r,i;const s=EI(n),a=n.map||s;F.useMemo(()=>PK({GroundProjectedEnvImpl:Ove}),[]),F.useEffect(()=>()=>{s.dispose()},[s]);const o=F.useMemo(()=>[a],[a]),l=(e=n.ground)==null?void 0:e.height,c=(t=n.ground)==null?void 0:t.radius,u=(r=(i=n.ground)==null?void 0:i.scale)!==null&&r!==void 0?r:1e3;return F.createElement(F.Fragment,null,F.createElement(s4,ss({},n,{map:a})),F.createElement("groundProjectedEnvImpl",{args:o,scale:u,height:l,radius:c}))}function Ube(n){return n.ground?F.createElement(Pbe,n):n.map?F.createElement(s4,n):n.children?F.createElement(Fbe,n):F.createElement(yY,n)}const zbe=F.forwardRef(({scale:n=10,frames:e=1/0,opacity:t=1,width:r=1,height:i=1,blur:s=1,near:a=0,far:o=10,resolution:l=512,smooth:c=!0,color:u="#000000",depthWrite:d=!1,renderOrder:h,...p},g)=>{const v=F.useRef(null),b=Yd(W=>W.scene),x=Yd(W=>W.gl),C=F.useRef(null);r=r*(Array.isArray(n)?n[0]:n||1),i=i*(Array.isArray(n)?n[1]:n||1);const[E,_,M,R,L,$,N]=F.useMemo(()=>{const W=new wc(l,l),X=new wc(l,l);X.texture.generateMipmaps=W.texture.generateMipmaps=!1;const z=new Xp(r,i).rotateX(Math.PI/2),J=new rs(z),Q=new yI;Q.depthTest=Q.depthWrite=!1,Q.onBeforeCompile=te=>{te.uniforms={...te.uniforms,ucolor:{value:new sn(u)}},te.fragmentShader=te.fragmentShader.replace("void main() {",`uniform vec3 ucolor;
           void main() {
          `),te.fragmentShader=te.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};const Y=new No(gbe),q=new No(ybe);return q.depthTest=Y.depthTest=!1,[W,z,Q,J,Y,q,X]},[l,r,i,n,u]),I=W=>{R.visible=!0,R.material=L,L.uniforms.tDiffuse.value=E.texture,L.uniforms.h.value=W*1/256,x.setRenderTarget(N),x.render(R,C.current),R.material=$,$.uniforms.tDiffuse.value=N.texture,$.uniforms.v.value=W*1/256,x.setRenderTarget(E),x.render(R,C.current),R.visible=!1};let k=0,P,G;return N_(()=>{C.current&&(e===1/0||k<e)&&(k++,P=b.background,G=b.overrideMaterial,v.current.visible=!1,b.background=null,b.overrideMaterial=M,x.setRenderTarget(E),x.render(b,C.current),I(s),c&&I(s*.4),x.setRenderTarget(null),v.current.visible=!0,b.overrideMaterial=G,b.background=P)}),F.useImperativeHandle(g,()=>v.current,[]),F.createElement("group",ss({"rotation-x":Math.PI/2},p,{ref:v}),F.createElement("mesh",{renderOrder:h,geometry:_,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},F.createElement("meshBasicMaterial",{transparent:!0,map:E.texture,opacity:t,depthWrite:d})),F.createElement("orthographicCamera",{ref:C,args:[-r/2,r/2,i/2,-i/2,a,o]}))});function Hbe(n,e,t=new be){const r=Math.PI*(n-.5),i=2*Math.PI*(e-.5);return t.x=Math.cos(i),t.y=Math.sin(r),t.z=Math.sin(i),t}const Vbe=F.forwardRef(({inclination:n=.6,azimuth:e=.1,distance:t=1e3,mieCoefficient:r=.005,mieDirectionalG:i=.8,rayleigh:s=.5,turbidity:a=10,sunPosition:o=Hbe(n,e),...l},c)=>{const u=F.useMemo(()=>new be().setScalar(t),[t]),[d]=F.useState(()=>new Dve);return F.createElement("primitive",ss({object:d,ref:c,"material-uniforms-mieCoefficient-value":r,"material-uniforms-mieDirectionalG-value":i,"material-uniforms-rayleigh-value":s,"material-uniforms-sunPosition-value":o,"material-uniforms-turbidity-value":a,scale:u},l))});var O_=Tq();const Kw=qp(O_);function Gbe(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function Wbe(...n){return e=>n.forEach(t=>Gbe(t,e))}const vY=F.forwardRef((n,e)=>{const{children:t,...r}=n,i=F.Children.toArray(t),s=i.find(qbe);if(s){const a=s.props.children,o=i.map(l=>l===s?F.Children.count(a)>1?F.Children.only(null):F.isValidElement(a)?a.props.children:null:l);return F.createElement(tL,ss({},r,{ref:e}),F.isValidElement(a)?F.cloneElement(a,void 0,o):null)}return F.createElement(tL,ss({},r,{ref:e}),t)});vY.displayName="Slot";const tL=F.forwardRef((n,e)=>{const{children:t,...r}=n;return F.isValidElement(t)?F.cloneElement(t,{...Xbe(r,t.props),ref:Wbe(e,t.ref)}):F.Children.count(t)>1?F.Children.only(null):null});tL.displayName="SlotClone";const jbe=({children:n})=>F.createElement(F.Fragment,null,n);function qbe(n){return F.isValidElement(n)&&n.type===jbe}function Xbe(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...o)=>{s(...o),i(...o)}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}const Kbe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ybe=Kbe.reduce((n,e)=>{const t=F.forwardRef((r,i)=>{const{asChild:s,...a}=r,o=s?vY:e;return F.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),F.createElement(o,ss({},a,{ref:i}))});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{}),Jbe=F.forwardRef((n,e)=>{var t;const{container:r=globalThis==null||(t=globalThis.document)===null||t===void 0?void 0:t.body,...i}=n;return r?Kw.createPortal(F.createElement(Ybe.div,ss({},i,{ref:e})),r):null}),Zbe=Jbe;var vG=Object.prototype.hasOwnProperty;function HC(n,e){var t,r;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((r=n.length)===e.length)for(;r--&&HC(n[r],e[r]););return r===-1}if(!t||typeof n=="object"){r=0;for(t in n)if(vG.call(n,t)&&++r&&!vG.call(e,t)||!(t in e)||!HC(n[t],e[t]))return!1;return Object.keys(e).length===r}}return n!==n&&e!==e}function AI(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(let r=0;r<t.length;r++)if(!Object.prototype.hasOwnProperty.call(e,t[r])||!Object.is(n[t[r]],e[t[r]]))return!1;return!0}var TI=function(e,t,r,i){this.name=e,this.fn=t,this.args=r,this.modifiers=i};TI.prototype._test=function(e){var t=this.fn;try{Bx(this.modifiers.slice(),t,this)(e)}catch{t=function(){return!1}}try{return Bx(this.modifiers.slice(),t,this)(e)}catch{return!1}};TI.prototype._check=function(e){try{Bx(this.modifiers.slice(),this.fn,this)(e)}catch{if(Bx(this.modifiers.slice(),function(r){return r},this)(!1))return}if(!Bx(this.modifiers.slice(),this.fn,this)(e))throw null};TI.prototype._testAsync=function(e){var t=this;return new Promise(function(r,i){xY(t.modifiers.slice(),t.fn,t)(e).then(function(s){s?r(e):i(null)}).catch(function(s){return i(s)})})};function bY(n,e){return e===void 0&&(e="simple"),typeof n=="object"?n[e]:n}function Bx(n,e,t){if(n.length){var r=n.shift(),i=Bx(n,e,t);return r.perform(i,t)}else return bY(e)}function xY(n,e,t){if(n.length){var r=n.shift(),i=xY(n,e,t);return r.performAsync(i,t)}else return function(s){return Promise.resolve(bY(e,"async")(s))}}var Qbe=function(e,t,r){this.name=e,this.perform=t,this.performAsync=r},a4=function(n){function e(t,r,i,s){for(var a=[],o=arguments.length-4;o-- >0;)a[o]=arguments[o+4];n.call(this,a),n.captureStackTrace&&n.captureStackTrace(this,e),this.rule=t,this.value=r,this.cause=i,this.target=s}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e}(Error),wh=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=[]),this.chain=e,this.nextRuleModifiers=t};wh.prototype._applyRule=function(e,t){var r=this;return function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];return r.chain.push(new TI(t,e.apply(r,i),i,r.nextRuleModifiers)),r.nextRuleModifiers=[],r}};wh.prototype._applyModifier=function(e,t){return this.nextRuleModifiers.push(new Qbe(t,e.simple,e.async)),this};wh.prototype._clone=function(){return new wh(this.chain.slice(),this.nextRuleModifiers.slice())};wh.prototype.test=function(e){return this.chain.every(function(t){return t._test(e)})};wh.prototype.testAll=function(e){var t=[];return this.chain.forEach(function(r){try{r._check(e)}catch(i){t.push(new a4(r,e,i))}}),t};wh.prototype.check=function(e){this.chain.forEach(function(t){try{t._check(e)}catch(r){throw new a4(t,e,r)}})};wh.prototype.testAsync=function(e){var t=this;return new Promise(function(r,i){SY(e,t.chain.slice(),r,i)})};function SY(n,e,t,r){if(e.length){var i=e.shift();i._testAsync(n).then(function(){SY(n,e,t,r)},function(s){r(new a4(i,n,s))})}else t(n)}var bG=function(n,e){return e&&typeof n=="string"&&n.trim().length===0?!0:n==null};function exe(n,e){return e===void 0&&(e=!1),{simple:function(t){return bG(t,e)||n.check(t)===void 0},async:function(t){return bG(t,e)||n.testAsync(t)}}}function yc(){return typeof Proxy<"u"?wY(new wh):nL(new wh)}var VC={};yc.extend=function(n){Object.assign(VC,n)};yc.clearCustomRules=function(){VC={}};function wY(n){return new Proxy(n,{get:function(t,r){if(r in t)return t[r];var i=wY(n._clone());if(r in BR)return i._applyModifier(BR[r],r);if(r in VC)return i._applyRule(VC[r],r);if(r in rL)return i._applyRule(rL[r],r)}})}function nL(n){var e=function(i,s){return Object.keys(i).forEach(function(a){s[a]=function(){for(var o=[],l=arguments.length;l--;)o[l]=arguments[l];var c=nL(s._clone()),u=c._applyRule(i[a],a).apply(void 0,o);return u}}),s},t=e(rL,n),r=e(VC,t);return Object.keys(BR).forEach(function(i){Object.defineProperty(r,i,{get:function(){var s=nL(r._clone());return s._applyModifier(BR[i],i)}})}),r}var BR={not:{simple:function(n){return function(e){return!n(e)}},async:function(n){return function(e){return Promise.resolve(n(e)).then(function(t){return!t}).catch(function(){return!0})}}},some:{simple:function(n){return function(e){return kT(e).some(function(t){try{return n(t)}catch{return!1}})}},async:function(n){return function(e){return Promise.all(kT(e).map(function(t){try{return n(t).catch(function(){return!1})}catch{return!1}})).then(function(t){return t.some(Boolean)})}}},every:{simple:function(n){return function(e){return e!==!1&&kT(e).every(n)}},async:function(n){return function(e){return Promise.all(kT(e).map(n)).then(function(t){return t.every(Boolean)})}}},strict:{simple:function(n,e){return function(t){return xG(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&n(t):n(t)}},async:function(n,e){return function(t){return Promise.resolve(n(t)).then(function(r){return xG(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&r:r}).catch(function(){return!1})}}}};function xG(n){return n&&n.name==="schema"&&n.args.length>0&&typeof n.args[0]=="object"}function kT(n){return typeof n=="string"?n.split(""):n}var rL={equal:function(n){return function(e){return e==n}},exact:function(n){return function(e){return e===n}},number:function(n){return n===void 0&&(n=!0),function(e){return typeof e=="number"&&(n||isFinite(e))}},integer:function(){return function(n){var e=Number.isInteger||txe;return e(n)}},numeric:function(){return function(n){return!isNaN(parseFloat(n))&&isFinite(n)}},string:function(){return ux("string")},boolean:function(){return ux("boolean")},undefined:function(){return ux("undefined")},null:function(){return ux("null")},array:function(){return ux("array")},object:function(){return ux("object")},instanceOf:function(n){return function(e){return e instanceof n}},pattern:function(n){return function(e){return n.test(e)}},lowercase:function(){return function(n){return typeof n=="boolean"||n===n.toLowerCase()&&n.trim()!==""}},uppercase:function(){return function(n){return n===n.toUpperCase()&&n.trim()!==""}},vowel:function(){return function(n){return/^[aeiou]+$/i.test(n)}},consonant:function(){return function(n){return/^(?=[^aeiou])([a-z]+)$/i.test(n)}},first:function(n){return function(e){return e[0]==n}},last:function(n){return function(e){return e[e.length-1]==n}},empty:function(){return function(n){return n.length===0}},length:function(n,e){return function(t){return t.length>=n&&t.length<=(e||n)}},minLength:function(n){return function(e){return e.length>=n}},maxLength:function(n){return function(e){return e.length<=n}},negative:function(){return function(n){return n<0}},positive:function(){return function(n){return n>=0}},between:function(n,e){return function(t){return t>=n&&t<=e}},range:function(n,e){return function(t){return t>=n&&t<=e}},lessThan:function(n){return function(e){return e<n}},lessThanOrEqual:function(n){return function(e){return e<=n}},greaterThan:function(n){return function(e){return e>n}},greaterThanOrEqual:function(n){return function(e){return e>=n}},even:function(){return function(n){return n%2===0}},odd:function(){return function(n){return n%2!==0}},includes:function(n){return function(e){return~e.indexOf(n)}},schema:function(n){return nxe(n)},passesAnyOf:function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];return function(t){return n.some(function(r){return r.test(t)})}},optional:exe};function ux(n){return function(e){return Array.isArray(e)&&n==="array"||e===null&&n==="null"||typeof e===n}}function txe(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n}function nxe(n){return{simple:function(e){var t=[];if(Object.keys(n).forEach(function(r){var i=n[r];try{i.check((e||{})[r])}catch(s){s.target=r,t.push(s)}}),t.length>0)throw t;return!0},async:function(e){var t=[],r=Object.keys(n).map(function(i){var s=n[i];return s.testAsync((e||{})[i]).catch(function(a){a.target=i,t.push(a)})});return Promise.all(r).then(function(){if(t.length>0)throw t;return!0})}}}var Gi="colors",Tl="sizes",Sn="space",rxe={gap:Sn,gridGap:Sn,columnGap:Sn,gridColumnGap:Sn,rowGap:Sn,gridRowGap:Sn,inset:Sn,insetBlock:Sn,insetBlockEnd:Sn,insetBlockStart:Sn,insetInline:Sn,insetInlineEnd:Sn,insetInlineStart:Sn,margin:Sn,marginTop:Sn,marginRight:Sn,marginBottom:Sn,marginLeft:Sn,marginBlock:Sn,marginBlockEnd:Sn,marginBlockStart:Sn,marginInline:Sn,marginInlineEnd:Sn,marginInlineStart:Sn,padding:Sn,paddingTop:Sn,paddingRight:Sn,paddingBottom:Sn,paddingLeft:Sn,paddingBlock:Sn,paddingBlockEnd:Sn,paddingBlockStart:Sn,paddingInline:Sn,paddingInlineEnd:Sn,paddingInlineStart:Sn,top:Sn,right:Sn,bottom:Sn,left:Sn,scrollMargin:Sn,scrollMarginTop:Sn,scrollMarginRight:Sn,scrollMarginBottom:Sn,scrollMarginLeft:Sn,scrollMarginX:Sn,scrollMarginY:Sn,scrollMarginBlock:Sn,scrollMarginBlockEnd:Sn,scrollMarginBlockStart:Sn,scrollMarginInline:Sn,scrollMarginInlineEnd:Sn,scrollMarginInlineStart:Sn,scrollPadding:Sn,scrollPaddingTop:Sn,scrollPaddingRight:Sn,scrollPaddingBottom:Sn,scrollPaddingLeft:Sn,scrollPaddingX:Sn,scrollPaddingY:Sn,scrollPaddingBlock:Sn,scrollPaddingBlockEnd:Sn,scrollPaddingBlockStart:Sn,scrollPaddingInline:Sn,scrollPaddingInlineEnd:Sn,scrollPaddingInlineStart:Sn,fontSize:"fontSizes",background:Gi,backgroundColor:Gi,backgroundImage:Gi,borderImage:Gi,border:Gi,borderBlock:Gi,borderBlockEnd:Gi,borderBlockStart:Gi,borderBottom:Gi,borderBottomColor:Gi,borderColor:Gi,borderInline:Gi,borderInlineEnd:Gi,borderInlineStart:Gi,borderLeft:Gi,borderLeftColor:Gi,borderRight:Gi,borderRightColor:Gi,borderTop:Gi,borderTopColor:Gi,caretColor:Gi,color:Gi,columnRuleColor:Gi,fill:Gi,outline:Gi,outlineColor:Gi,stroke:Gi,textDecorationColor:Gi,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:Tl,minBlockSize:Tl,maxBlockSize:Tl,inlineSize:Tl,minInlineSize:Tl,maxInlineSize:Tl,width:Tl,minWidth:Tl,maxWidth:Tl,height:Tl,minHeight:Tl,maxHeight:Tl,flexBasis:Tl,gridTemplateColumns:Tl,gridTemplateRows:Tl,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},ixe=(n,e)=>typeof e=="function"?{"()":Function.prototype.toString.call(e)}:e,D1=()=>{const n=Object.create(null);return(e,t,...r)=>{const i=(s=>JSON.stringify(s,ixe))(e);return i in n?n[i]:n[i]=t(e,...r)}},Vy=Symbol.for("sxs.internal"),o4=(n,e)=>Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)),SG=n=>{for(const e in n)return!0;return!1},{hasOwnProperty:sxe}=Object.prototype,iL=n=>n.includes("-")?n:n.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),axe=/\s+(?![^()]*\))/,dx=n=>e=>n(...typeof e=="string"?String(e).split(axe):[e]),wG={appearance:n=>({WebkitAppearance:n,appearance:n}),backfaceVisibility:n=>({WebkitBackfaceVisibility:n,backfaceVisibility:n}),backdropFilter:n=>({WebkitBackdropFilter:n,backdropFilter:n}),backgroundClip:n=>({WebkitBackgroundClip:n,backgroundClip:n}),boxDecorationBreak:n=>({WebkitBoxDecorationBreak:n,boxDecorationBreak:n}),clipPath:n=>({WebkitClipPath:n,clipPath:n}),content:n=>({content:n.includes('"')||n.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(n)?n:`"${n}"`}),hyphens:n=>({WebkitHyphens:n,hyphens:n}),maskImage:n=>({WebkitMaskImage:n,maskImage:n}),maskSize:n=>({WebkitMaskSize:n,maskSize:n}),tabSize:n=>({MozTabSize:n,tabSize:n}),textSizeAdjust:n=>({WebkitTextSizeAdjust:n,textSizeAdjust:n}),userSelect:n=>({WebkitUserSelect:n,userSelect:n}),marginBlock:dx((n,e)=>({marginBlockStart:n,marginBlockEnd:e||n})),marginInline:dx((n,e)=>({marginInlineStart:n,marginInlineEnd:e||n})),maxSize:dx((n,e)=>({maxBlockSize:n,maxInlineSize:e||n})),minSize:dx((n,e)=>({minBlockSize:n,minInlineSize:e||n})),paddingBlock:dx((n,e)=>({paddingBlockStart:n,paddingBlockEnd:e||n})),paddingInline:dx((n,e)=>({paddingInlineStart:n,paddingInlineEnd:e||n}))},sB=/([\d.]+)([^]*)/,oxe=(n,e)=>n.length?n.reduce((t,r)=>(t.push(...e.map(i=>i.includes("&")?i.replace(/&/g,/[ +>|~]/.test(r)&&/&.*&/.test(i)?`:is(${r})`:r):r+" "+i)),t),[]):e,lxe=(n,e)=>n in cxe&&typeof e=="string"?e.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(t,r,i,s)=>r+(i==="stretch"?`-moz-available${s};${iL(n)}:${r}-webkit-fill-available`:`-moz-fit-content${s};${iL(n)}:${r}fit-content`)+s):String(e),cxe={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},Fp=n=>n?n+"-":"",CY=(n,e,t)=>n.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(r,i,s,a,o)=>a=="$"==!!s?r:(i||a=="--"?"calc(":"")+"var(--"+(a==="$"?Fp(e)+(o.includes("$")?"":Fp(t))+o.replace(/\$/g,"-"):o)+")"+(i||a=="--"?"*"+(i||"")+(s||"1")+")":"")),uxe=/\s*,\s*(?![^()]*\))/,dxe=Object.prototype.toString,Mx=(n,e,t,r,i)=>{let s,a,o;const l=(c,u,d)=>{let h,p;const g=v=>{for(h in v){const C=h.charCodeAt(0)===64,E=C&&Array.isArray(v[h])?v[h]:[v[h]];for(p of E){const _=/[A-Z]/.test(x=h)?x:x.replace(/-[^]/g,R=>R[1].toUpperCase()),M=typeof p=="object"&&p&&p.toString===dxe&&(!r.utils[_]||!u.length);if(_ in r.utils&&!M){const R=r.utils[_];if(R!==a){a=R,g(R(p)),a=null;continue}}else if(_ in wG){const R=wG[_];if(R!==o){o=R,g(R(p)),o=null;continue}}if(C&&(b=h.slice(1)in r.media?"@media "+r.media[h.slice(1)]:h,h=b.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(R,L,$,N,I,k)=>{const P=sB.test(L),G=.0625*(P?-1:1),[W,X]=P?[N,L]:[L,N];return"("+($[0]==="="?"":$[0]===">"===P?"max-":"min-")+W+":"+($[0]!=="="&&$.length===1?X.replace(sB,(z,J,Q)=>Number(J)+G*($===">"?1:-1)+Q):X)+(I?") and ("+(I[0]===">"?"min-":"max-")+W+":"+(I.length===1?k.replace(sB,(z,J,Q)=>Number(J)+G*(I===">"?-1:1)+Q):k):"")+")"})),M){const R=C?d.concat(h):[...d],L=C?[...u]:oxe(u,h.split(uxe));s!==void 0&&i(CG(...s)),s=void 0,l(p,L,R)}else s===void 0&&(s=[[],u,d]),h=C||h.charCodeAt(0)!==36?h:`--${Fp(r.prefix)}${h.slice(1).replace(/\$/g,"-")}`,p=M?p:typeof p=="number"?p&&_ in fxe?String(p)+"px":String(p):CY(lxe(_,p??""),r.prefix,r.themeMap[_]),s[0].push(`${C?`${h} `:`${iL(h)}:`}${p}`)}}var b,x};g(c),s!==void 0&&i(CG(...s)),s=void 0};l(n,e,t)},CG=(n,e,t)=>`${t.map(r=>`${r}{`).join("")}${e.length?`${e.join(",")}{`:""}${n.join(";")}${e.length?"}":""}${Array(t.length?t.length+1:0).join("}")}`,fxe={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},_G=n=>String.fromCharCode(n+(n>25?39:97)),Gy=n=>(e=>{let t,r="";for(t=Math.abs(e);t>52;t=t/52|0)r=_G(t%52)+r;return _G(t%52)+r})(((e,t)=>{let r=t.length;for(;r;)e=33*e^t.charCodeAt(--r);return e})(5381,JSON.stringify(n))>>>0),Yw=["themed","global","styled","onevar","resonevar","allvar","inline"],hxe=n=>{if(n.href&&!n.href.startsWith(location.origin))return!1;try{return!!n.cssRules}catch{return!1}},pxe=n=>{let e;const t=()=>{const{cssRules:i}=e.sheet;return[].map.call(i,(s,a)=>{const{cssText:o}=s;let l="";if(o.startsWith("--sxs"))return"";if(i[a-1]&&(l=i[a-1].cssText).startsWith("--sxs")){if(!s.cssRules.length)return"";for(const c in e.rules)if(e.rules[c].group===s)return`--sxs{--sxs:${[...e.rules[c].cache].join(" ")}}${o}`;return s.cssRules.length?`${l}${o}`:""}return o}).join("")},r=()=>{if(e){const{rules:o,sheet:l}=e;if(!l.deleteRule){for(;Object(Object(l.cssRules)[0]).type===3;)l.cssRules.splice(0,1);l.cssRules=[]}for(const c in o)delete o[c]}const i=Object(n).styleSheets||[];for(const o of i)if(hxe(o)){for(let l=0,c=o.cssRules;c[l];++l){const u=Object(c[l]);if(u.type!==1)continue;const d=Object(c[l+1]);if(d.type!==4)continue;++l;const{cssText:h}=u;if(!h.startsWith("--sxs"))continue;const p=h.slice(14,-3).trim().split(/\s+/),g=Yw[p[0]];g&&(e||(e={sheet:o,reset:r,rules:{},toString:t}),e.rules[g]={group:d,index:l,cache:new Set(p)})}if(e)break}if(!e){const o=(l,c)=>({type:c,cssRules:[],insertRule(u,d){this.cssRules.splice(d,0,o(u,{import:3,undefined:1}[(u.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return l==="@media{}"?`@media{${[].map.call(this.cssRules,u=>u.cssText).join("")}}`:l}});e={sheet:n?(n.head||n).appendChild(document.createElement("style")).sheet:o("","text/css"),rules:{},reset:r,toString:t}}const{sheet:s,rules:a}=e;for(let o=Yw.length-1;o>=0;--o){const l=Yw[o];if(!a[l]){const c=Yw[o+1],u=a[c]?a[c].index:s.cssRules.length;s.insertRule("@media{}",u),s.insertRule(`--sxs{--sxs:${o}}`,u),a[l]={group:s.cssRules[u+1],index:u,cache:new Set([o])}}mxe(a[l])}};return r(),e},mxe=n=>{const e=n.group;let t=e.cssRules.length;n.apply=r=>{try{e.insertRule(r,t),++t}catch{}}},kw=Symbol(),gxe=D1(),EG=(n,e)=>gxe(n,()=>(...t)=>{let r={type:null,composers:new Set};for(const i of t)if(i!=null)if(i[Vy]){r.type==null&&(r.type=i[Vy].type);for(const s of i[Vy].composers)r.composers.add(s)}else i.constructor!==Object||i.$$typeof?r.type==null&&(r.type=i):r.composers.add(yxe(i,n));return r.type==null&&(r.type="span"),r.composers.size||r.composers.add(["PJLV",{},[],[],{},[]]),vxe(n,r,e)}),yxe=({variants:n,compoundVariants:e,defaultVariants:t,...r},i)=>{const s=`${Fp(i.prefix)}c-${Gy(r)}`,a=[],o=[],l=Object.create(null),c=[];for(const h in t)l[h]=String(t[h]);if(typeof n=="object"&&n)for(const h in n){u=l,d=h,sxe.call(u,d)||(l[h]="undefined");const p=n[h];for(const g in p){const v={[h]:String(g)};String(g)==="undefined"&&c.push(h);const b=p[g],x=[v,b,!SG(b)];a.push(x)}}var u,d;if(typeof e=="object"&&e)for(const h of e){let{css:p,...g}=h;p=typeof p=="object"&&p||{};for(const b in g)g[b]=String(g[b]);const v=[g,p,!SG(p)];o.push(v)}return[s,r,a,o,l,c]},vxe=(n,e,t)=>{const[r,i,s,a]=bxe(e.composers),o=typeof e.type=="function"||e.type.$$typeof?(d=>{function h(){for(let p=0;p<h[kw].length;p++){const[g,v]=h[kw][p];d.rules[g].apply(v)}return h[kw]=[],null}return h[kw]=[],h.rules={},Yw.forEach(p=>h.rules[p]={apply:g=>h[kw].push([p,g])}),h})(t):null,l=(o||t).rules,c=`.${r}${i.length>1?`:where(.${i.slice(1).join(".")})`:""}`,u=d=>{d=typeof d=="object"&&d||xxe;const{css:h,...p}=d,g={};for(const x in s)if(delete p[x],x in d){let C=d[x];typeof C=="object"&&C?g[x]={"@initial":s[x],...C}:(C=String(C),g[x]=C!=="undefined"||a.has(x)?C:s[x])}else g[x]=s[x];const v=new Set([...i]);for(const[x,C,E,_]of e.composers){t.rules.styled.cache.has(x)||(t.rules.styled.cache.add(x),Mx(C,[`.${x}`],[],n,L=>{l.styled.apply(L)}));const M=AG(E,g,n.media),R=AG(_,g,n.media,!0);for(const L of M)if(L!==void 0)for(const[$,N,I]of L){const k=`${x}-${Gy(N)}-${$}`;v.add(k);const P=(I?t.rules.resonevar:t.rules.onevar).cache,G=I?l.resonevar:l.onevar;P.has(k)||(P.add(k),Mx(N,[`.${k}`],[],n,W=>{G.apply(W)}))}for(const L of R)if(L!==void 0)for(const[$,N]of L){const I=`${x}-${Gy(N)}-${$}`;v.add(I),t.rules.allvar.cache.has(I)||(t.rules.allvar.cache.add(I),Mx(N,[`.${I}`],[],n,k=>{l.allvar.apply(k)}))}}if(typeof h=="object"&&h){const x=`${r}-i${Gy(h)}-css`;v.add(x),t.rules.inline.cache.has(x)||(t.rules.inline.cache.add(x),Mx(h,[`.${x}`],[],n,C=>{l.inline.apply(C)}))}for(const x of String(d.className||"").trim().split(/\s+/))x&&v.add(x);const b=p.className=[...v].join(" ");return{type:e.type,className:b,selector:c,props:p,toString:()=>b,deferredInjector:o}};return o4(u,{className:r,selector:c,[Vy]:e,toString:()=>(t.rules.styled.cache.has(r)||u(),r)})},bxe=n=>{let e="";const t=[],r={},i=[];for(const[s,,,,a,o]of n){e===""&&(e=s),t.push(s),i.push(...o);for(const l in a){const c=a[l];(r[l]===void 0||c!=="undefined"||o.includes(c))&&(r[l]=c)}}return[e,t,r,new Set(i)]},AG=(n,e,t,r)=>{const i=[];e:for(let[s,a,o]of n){if(o)continue;let l,c=0,u=!1;for(l in s){const d=s[l];let h=e[l];if(h!==d){if(typeof h!="object"||!h)continue e;{let p,g,v=0;for(const b in h){if(d===String(h[b])){if(b!=="@initial"){const x=b.slice(1);(g=g||[]).push(x in t?t[x]:b.replace(/^@media ?/,"")),u=!0}c+=v,p=!0}++v}if(g&&g.length&&(a={["@media "+g.join(", ")]:a}),!p)continue e}}}(i[c]=i[c]||[]).push([r?"cv":`${l}-${s[l]}`,a,u])}return i},xxe={},Sxe=D1(),wxe=(n,e)=>Sxe(n,()=>(...t)=>{const r=()=>{for(let i of t){i=typeof i=="object"&&i||{};let s=Gy(i);if(!e.rules.global.cache.has(s)){if(e.rules.global.cache.add(s),"@import"in i){let a=[].indexOf.call(e.sheet.cssRules,e.rules.themed.group)-1;for(let o of[].concat(i["@import"]))o=o.includes('"')||o.includes("'")?o:`"${o}"`,e.sheet.insertRule(`@import ${o};`,a++);delete i["@import"]}Mx(i,[],[],n,a=>{e.rules.global.apply(a)})}}return""};return o4(r,{toString:r})}),Cxe=D1(),_xe=(n,e)=>Cxe(n,()=>t=>{const r=`${Fp(n.prefix)}k-${Gy(t)}`,i=()=>{if(!e.rules.global.cache.has(r)){e.rules.global.cache.add(r);const s=[];Mx(t,[],[],n,o=>s.push(o));const a=`@keyframes ${r}{${s.join("")}}`;e.rules.global.apply(a)}return r};return o4(i,{get name(){return i()},toString:i})}),Exe=class{constructor(e,t,r,i){this.token=e==null?"":String(e),this.value=t==null?"":String(t),this.scale=r==null?"":String(r),this.prefix=i==null?"":String(i)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+Fp(this.prefix)+Fp(this.scale)+this.token}toString(){return this.computedValue}},Axe=D1(),Txe=(n,e)=>Axe(n,()=>(t,r)=>{r=typeof t=="object"&&t||Object(r);const i=`.${t=(t=typeof t=="string"?t:"")||`${Fp(n.prefix)}t-${Gy(r)}`}`,s={},a=[];for(const l in r){s[l]={};for(const c in r[l]){const u=`--${Fp(n.prefix)}${l}-${c}`,d=CY(String(r[l][c]),n.prefix,l);s[l][c]=new Exe(c,d,l,n.prefix),a.push(`${u}:${d}`)}}const o=()=>{if(a.length&&!e.rules.themed.cache.has(t)){e.rules.themed.cache.add(t);const l=`${r===n.theme?":root,":""}.${t}{${a.join(";")}}`;e.rules.themed.apply(l)}return t};return{...s,get className(){return o()},selector:i,toString:o}}),Mxe=D1(),Rxe=D1(),Nxe=n=>{const e=(t=>{let r=!1;const i=Mxe(t,s=>{r=!0;const a="prefix"in(s=typeof s=="object"&&s||{})?String(s.prefix):"",o=typeof s.media=="object"&&s.media||{},l=typeof s.root=="object"?s.root||null:globalThis.document||null,c=typeof s.theme=="object"&&s.theme||{},u={prefix:a,media:o,theme:c,themeMap:typeof s.themeMap=="object"&&s.themeMap||{...rxe},utils:typeof s.utils=="object"&&s.utils||{}},d=pxe(l),h={css:EG(u,d),globalCss:wxe(u,d),keyframes:_xe(u,d),createTheme:Txe(u,d),reset(){d.reset(),h.theme.toString()},theme:{},sheet:d,config:u,prefix:a,getCssText:d.toString,toString:d.toString};return String(h.theme=h.createTheme(c)),h});return r||i.reset(),i})(n);return e.styled=(({config:t,sheet:r})=>Rxe(t,()=>{const i=EG(t,r);return(...s)=>{const a=i(...s),o=a[Vy].type,l=Ne.forwardRef((c,u)=>{const d=c&&c.as||o,{props:h,deferredInjector:p}=a(c);return delete h.as,h.ref=u,p?Ne.createElement(Ne.Fragment,null,Ne.createElement(d,h),Ne.createElement(p,null)):Ne.createElement(d,h)});return l.className=a.className,l.displayName=`Styled.${o.displayName||o.name||o}`,l.selector=a.selector,l.toString=()=>a.selector,l[Vy]=a[Vy],l}}))(e),e};function xp(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n==null||n(i),t===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function Ixe(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function _Y(...n){return e=>n.forEach(t=>Ixe(t,e))}function k1(...n){return F.useCallback(_Y(...n),n)}function EY(n,e=[]){let t=[];function r(s,a){const o=F.createContext(a),l=t.length;t=[...t,a];function c(d){const{scope:h,children:p,...g}=d,v=(h==null?void 0:h[n][l])||o,b=F.useMemo(()=>g,Object.values(g));return F.createElement(v.Provider,{value:b},p)}function u(d,h){const p=(h==null?void 0:h[n][l])||o,g=F.useContext(p);if(g)return g;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,u]}const i=()=>{const s=t.map(a=>F.createContext(a));return function(o){const l=(o==null?void 0:o[n])||s;return F.useMemo(()=>({[`__scope${n}`]:{...o,[n]:l}}),[o,l])}};return i.scopeName=n,[r,Dxe(i,...e)]}function Dxe(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=r.reduce((o,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...o,...d}},{});return F.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return t.scopeName=e.scopeName,t}const AY=F.forwardRef((n,e)=>{const{children:t,...r}=n,i=F.Children.toArray(t),s=i.find(kxe);if(s){const a=s.props.children,o=i.map(l=>l===s?F.Children.count(a)>1?F.Children.only(null):F.isValidElement(a)?a.props.children:null:l);return F.createElement(sL,ss({},r,{ref:e}),F.isValidElement(a)?F.cloneElement(a,void 0,o):null)}return F.createElement(sL,ss({},r,{ref:e}),t)});AY.displayName="Slot";const sL=F.forwardRef((n,e)=>{const{children:t,...r}=n;return F.isValidElement(t)?F.cloneElement(t,{...Oxe(r,t.props),ref:_Y(e,t.ref)}):F.Children.count(t)>1?F.Children.only(null):null});sL.displayName="SlotClone";const TY=({children:n})=>F.createElement(F.Fragment,null,n);function kxe(n){return F.isValidElement(n)&&n.type===TY}function Oxe(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...o)=>{s(...o),i(...o)}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}const Bxe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],rv=Bxe.reduce((n,e)=>{const t=F.forwardRef((r,i)=>{const{asChild:s,...a}=r,o=s?AY:e;return F.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),F.createElement(o,ss({},a,{ref:i}))});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function $xe(n,e){n&&O_.flushSync(()=>n.dispatchEvent(e))}function l4(n){const e=F.useRef(n);return F.useEffect(()=>{e.current=n}),F.useMemo(()=>(...t)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...t)},[])}function Lxe(n,e=globalThis==null?void 0:globalThis.document){const t=l4(n);F.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r),()=>e.removeEventListener("keydown",r)},[t,e])}const aL="dismissableLayer.update",Fxe="dismissableLayer.pointerDownOutside",Pxe="dismissableLayer.focusOutside";let TG;const Uxe=F.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),zxe=F.forwardRef((n,e)=>{var t;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...c}=n,u=F.useContext(Uxe),[d,h]=F.useState(null),p=(t=d==null?void 0:d.ownerDocument)!==null&&t!==void 0?t:globalThis==null?void 0:globalThis.document,[,g]=F.useState({}),v=k1(e,$=>h($)),b=Array.from(u.layers),[x]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),C=b.indexOf(x),E=d?b.indexOf(d):-1,_=u.layersWithOutsidePointerEventsDisabled.size>0,M=E>=C,R=Hxe($=>{const N=$.target,I=[...u.branches].some(k=>k.contains(N));!M||I||(s==null||s($),o==null||o($),$.defaultPrevented||l==null||l())},p),L=Vxe($=>{const N=$.target;[...u.branches].some(k=>k.contains(N))||(a==null||a($),o==null||o($),$.defaultPrevented||l==null||l())},p);return Lxe($=>{E===u.layers.size-1&&(i==null||i($),!$.defaultPrevented&&l&&($.preventDefault(),l()))},p),F.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(TG=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),MG(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=TG)}},[d,p,r,u]),F.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),MG())},[d,u]),F.useEffect(()=>{const $=()=>g({});return document.addEventListener(aL,$),()=>document.removeEventListener(aL,$)},[]),F.createElement(rv.div,ss({},c,{ref:v,style:{pointerEvents:_?M?"auto":"none":void 0,...n.style},onFocusCapture:xp(n.onFocusCapture,L.onFocusCapture),onBlurCapture:xp(n.onBlurCapture,L.onBlurCapture),onPointerDownCapture:xp(n.onPointerDownCapture,R.onPointerDownCapture)}))});function Hxe(n,e=globalThis==null?void 0:globalThis.document){const t=l4(n),r=F.useRef(!1),i=F.useRef(()=>{});return F.useEffect(()=>{const s=o=>{if(o.target&&!r.current){let u=function(){MY(Fxe,t,c,{discrete:!0})};var l=u;const c={originalEvent:o};o.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=u,e.addEventListener("click",i.current,{once:!0})):u()}r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function Vxe(n,e=globalThis==null?void 0:globalThis.document){const t=l4(n),r=F.useRef(!1);return F.useEffect(()=>{const i=s=>{s.target&&!r.current&&MY(Pxe,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function MG(){const n=new CustomEvent(aL);document.dispatchEvent(n)}function MY(n,e,t,{discrete:r}){const i=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?$xe(i,s):i.dispatchEvent(s)}const Gxe=globalThis!=null&&globalThis.document?F.useLayoutEffect:()=>{},Wxe=UM.useId||(()=>{});let jxe=0;function qxe(n){const[e,t]=F.useState(Wxe());return Gxe(()=>{t(r=>r??String(jxe++))},[n]),e?`radix-${e}`:""}function Av(n){return n.split("-")[0]}function B_(n){return n.split("-")[1]}function O1(n){return["top","bottom"].includes(Av(n))?"x":"y"}function c4(n){return n==="y"?"height":"width"}function RG(n,e,t){let{reference:r,floating:i}=n;const s=r.x+r.width/2-i.width/2,a=r.y+r.height/2-i.height/2,o=O1(e),l=c4(o),c=r[l]/2-i[l]/2,u=o==="x";let d;switch(Av(e)){case"top":d={x:s,y:r.y-i.height};break;case"bottom":d={x:s,y:r.y+r.height};break;case"right":d={x:r.x+r.width,y:a};break;case"left":d={x:r.x-i.width,y:a};break;default:d={x:r.x,y:r.y}}switch(B_(e)){case"start":d[o]-=c*(t&&u?-1:1);break;case"end":d[o]+=c*(t&&u?-1:1)}return d}const Xxe=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:a}=t,o=await(a.isRTL==null?void 0:a.isRTL(e));let l=await a.getElementRects({reference:n,floating:e,strategy:i}),{x:c,y:u}=RG(l,r,o),d=r,h={},p=0;for(let g=0;g<s.length;g++){const{name:v,fn:b}=s[g],{x,y:C,data:E,reset:_}=await b({x:c,y:u,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:a,elements:{reference:n,floating:e}});c=x??c,u=C??u,h={...h,[v]:{...h[v],...E}},_&&p<=50&&(p++,typeof _=="object"&&(_.placement&&(d=_.placement),_.rects&&(l=_.rects===!0?await a.getElementRects({reference:n,floating:e,strategy:i}):_.rects),{x:c,y:u}=RG(l,d,o)),g=-1)}return{x:c,y:u,placement:d,strategy:i,middlewareData:h}};function RY(n){return typeof n!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(n):{top:n,right:n,bottom:n,left:n}}function $R(n){return{...n,top:n.y,left:n.x,right:n.x+n.width,bottom:n.y+n.height}}async function GC(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:a,elements:o,strategy:l}=n,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:p=0}=e,g=RY(p),v=o[h?d==="floating"?"reference":"floating":d],b=$R(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(v)))==null||t?v:v.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(o.floating)),boundary:c,rootBoundary:u,strategy:l})),x=$R(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:d==="floating"?{...a.floating,x:r,y:i}:a.reference,offsetParent:await(s.getOffsetParent==null?void 0:s.getOffsetParent(o.floating)),strategy:l}):a[d]);return{top:b.top-x.top+g.top,bottom:x.bottom-b.bottom+g.bottom,left:b.left-x.left+g.left,right:x.right-b.right+g.right}}const Kxe=Math.min,gy=Math.max;function oL(n,e,t){return gy(n,Kxe(e,t))}const NG=n=>({name:"arrow",options:n,async fn(e){const{element:t,padding:r=0}=n??{},{x:i,y:s,placement:a,rects:o,platform:l}=e;if(t==null)return{};const c=RY(r),u={x:i,y:s},d=O1(a),h=B_(a),p=c4(d),g=await l.getDimensions(t),v=d==="y"?"top":"left",b=d==="y"?"bottom":"right",x=o.reference[p]+o.reference[d]-u[d]-o.floating[p],C=u[d]-o.reference[d],E=await(l.getOffsetParent==null?void 0:l.getOffsetParent(t));let _=E?d==="y"?E.clientHeight||0:E.clientWidth||0:0;_===0&&(_=o.floating[p]);const M=x/2-C/2,R=c[v],L=_-g[p]-c[b],$=_/2-g[p]/2+M,N=oL(R,$,L),I=(h==="start"?c[v]:c[b])>0&&$!==N&&o.reference[p]<=o.floating[p];return{[d]:u[d]-(I?$<R?R-$:L-$:0),data:{[d]:N,centerOffset:$-N}}}}),Yxe={left:"right",right:"left",bottom:"top",top:"bottom"};function LR(n){return n.replace(/left|right|bottom|top/g,e=>Yxe[e])}function Jxe(n,e,t){t===void 0&&(t=!1);const r=B_(n),i=O1(n),s=c4(i);let a=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(a=LR(a)),{main:a,cross:LR(a)}}const Zxe={start:"end",end:"start"};function IG(n){return n.replace(/start|end/g,e=>Zxe[e])}const NY=["top","right","bottom","left"];NY.reduce((n,e)=>n.concat(e,e+"-start",e+"-end"),[]);const Qxe=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t;const{placement:r,middlewareData:i,rects:s,initialPlacement:a,platform:o,elements:l}=e,{mainAxis:c=!0,crossAxis:u=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",flipAlignment:p=!0,...g}=n,v=Av(r),b=d||(v===a||!p?[LR(a)]:function($){const N=LR($);return[IG($),N,IG(N)]}(a)),x=[a,...b],C=await GC(e,g),E=[];let _=((t=i.flip)==null?void 0:t.overflows)||[];if(c&&E.push(C[v]),u){const{main:$,cross:N}=Jxe(r,s,await(o.isRTL==null?void 0:o.isRTL(l.floating)));E.push(C[$],C[N])}if(_=[..._,{placement:r,overflows:E}],!E.every($=>$<=0)){var M,R;const $=((M=(R=i.flip)==null?void 0:R.index)!=null?M:0)+1,N=x[$];if(N)return{data:{index:$,overflows:_},reset:{placement:N}};let I="bottom";switch(h){case"bestFit":{var L;const k=(L=_.map(P=>[P,P.overflows.filter(G=>G>0).reduce((G,W)=>G+W,0)]).sort((P,G)=>P[1]-G[1])[0])==null?void 0:L[0].placement;k&&(I=k);break}case"initialPlacement":I=a}if(r!==I)return{reset:{placement:I}}}return{}}}};function DG(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function kG(n){return NY.some(e=>n[e]>=0)}const e1e=function(n){let{strategy:e="referenceHidden",...t}=n===void 0?{}:n;return{name:"hide",async fn(r){const{rects:i}=r;switch(e){case"referenceHidden":{const s=DG(await GC(r,{...t,elementContext:"reference"}),i.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:kG(s)}}}case"escaped":{const s=DG(await GC(r,{...t,altBoundary:!0}),i.floating);return{data:{escapedOffsets:s,escaped:kG(s)}}}default:return{}}}}},t1e=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){const{x:t,y:r}=e,i=await async function(s,a){const{placement:o,platform:l,elements:c}=s,u=await(l.isRTL==null?void 0:l.isRTL(c.floating)),d=Av(o),h=B_(o),p=O1(o)==="x",g=["left","top"].includes(d)?-1:1,v=u&&p?-1:1,b=typeof a=="function"?a(s):a;let{mainAxis:x,crossAxis:C,alignmentAxis:E}=typeof b=="number"?{mainAxis:b,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...b};return h&&typeof E=="number"&&(C=h==="end"?-1*E:E),p?{x:C*v,y:x*g}:{x:x*g,y:C*v}}(e,n);return{x:t+i.x,y:r+i.y,data:i}}}};function IY(n){return n==="x"?"y":"x"}const n1e=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:a=!1,limiter:o={fn:b=>{let{x,y:C}=b;return{x,y:C}}},...l}=n,c={x:t,y:r},u=await GC(e,l),d=O1(Av(i)),h=IY(d);let p=c[d],g=c[h];if(s){const b=d==="y"?"bottom":"right";p=oL(p+u[d==="y"?"top":"left"],p,p-u[b])}if(a){const b=h==="y"?"bottom":"right";g=oL(g+u[h==="y"?"top":"left"],g,g-u[b])}const v=o.fn({...e,[d]:p,[h]:g});return{...v,data:{x:v.x-t,y:v.y-r}}}}},r1e=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:i,rects:s,middlewareData:a}=e,{offset:o=0,mainAxis:l=!0,crossAxis:c=!0}=n,u={x:t,y:r},d=O1(i),h=IY(d);let p=u[d],g=u[h];const v=typeof o=="function"?o({...s,placement:i}):o,b=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(l){const M=d==="y"?"height":"width",R=s.reference[d]-s.floating[M]+b.mainAxis,L=s.reference[d]+s.reference[M]-b.mainAxis;p<R?p=R:p>L&&(p=L)}if(c){var x,C,E,_;const M=d==="y"?"width":"height",R=["top","left"].includes(Av(i)),L=s.reference[h]-s.floating[M]+(R&&(x=(C=a.offset)==null?void 0:C[h])!=null?x:0)+(R?0:b.crossAxis),$=s.reference[h]+s.reference[M]+(R?0:(E=(_=a.offset)==null?void 0:_[h])!=null?E:0)-(R?b.crossAxis:0);g<L?g=L:g>$&&(g=$)}return{[d]:p,[h]:g}}}},i1e=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){const{placement:t,rects:r,platform:i,elements:s}=e,{apply:a,...o}=n,l=await GC(e,o),c=Av(t),u=B_(t);let d,h;c==="top"||c==="bottom"?(d=c,h=u===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(h=c,d=u==="end"?"top":"bottom");const p=gy(l.left,0),g=gy(l.right,0),v=gy(l.top,0),b=gy(l.bottom,0),x={availableHeight:r.floating.height-(["left","right"].includes(t)?2*(v!==0||b!==0?v+b:gy(l.top,l.bottom)):l[d]),availableWidth:r.floating.width-(["top","bottom"].includes(t)?2*(p!==0||g!==0?p+g:gy(l.left,l.right)):l[h])},C=await i.getDimensions(s.floating);a==null||a({...e,...x});const E=await i.getDimensions(s.floating);return C.width!==E.width||C.height!==E.height?{reset:{rects:!0}}:{}}}};function DY(n){return n&&n.document&&n.location&&n.alert&&n.setInterval}function Kp(n){if(n==null)return window;if(!DY(n)){const e=n.ownerDocument;return e&&e.defaultView||window}return n}function $_(n){return Kp(n).getComputedStyle(n)}function Ip(n){return DY(n)?"":n?(n.nodeName||"").toLowerCase():""}function kY(){const n=navigator.userAgentData;return n!=null&&n.brands?n.brands.map(e=>e.brand+"/"+e.version).join(" "):navigator.userAgent}function Ch(n){return n instanceof Kp(n).HTMLElement}function Cg(n){return n instanceof Kp(n).Element}function u4(n){return typeof ShadowRoot>"u"?!1:n instanceof Kp(n).ShadowRoot||n instanceof ShadowRoot}function MI(n){const{overflow:e,overflowX:t,overflowY:r}=$_(n);return/auto|scroll|overlay|hidden/.test(e+r+t)}function s1e(n){return["table","td","th"].includes(Ip(n))}function OG(n){const e=/firefox/i.test(kY()),t=$_(n);return t.transform!=="none"||t.perspective!=="none"||t.contain==="paint"||["transform","perspective"].includes(t.willChange)||e&&t.willChange==="filter"||e&&!!t.filter&&t.filter!=="none"}function OY(){return!/^((?!chrome|android).)*safari/i.test(kY())}const BG=Math.min,SC=Math.max,FR=Math.round;function Dp(n,e,t){var r,i,s,a;e===void 0&&(e=!1),t===void 0&&(t=!1);const o=n.getBoundingClientRect();let l=1,c=1;e&&Ch(n)&&(l=n.offsetWidth>0&&FR(o.width)/n.offsetWidth||1,c=n.offsetHeight>0&&FR(o.height)/n.offsetHeight||1);const u=Cg(n)?Kp(n):window,d=!OY()&&t,h=(o.left+(d&&(r=(i=u.visualViewport)==null?void 0:i.offsetLeft)!=null?r:0))/l,p=(o.top+(d&&(s=(a=u.visualViewport)==null?void 0:a.offsetTop)!=null?s:0))/c,g=o.width/l,v=o.height/c;return{width:g,height:v,top:p,right:h+g,bottom:p+v,left:h,x:h,y:p}}function fg(n){return(e=n,(e instanceof Kp(e).Node?n.ownerDocument:n.document)||window.document).documentElement;var e}function RI(n){return Cg(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.pageXOffset,scrollTop:n.pageYOffset}}function BY(n){return Dp(fg(n)).left+RI(n).scrollLeft}function a1e(n,e,t){const r=Ch(e),i=fg(e),s=Dp(n,r&&function(l){const c=Dp(l);return FR(c.width)!==l.offsetWidth||FR(c.height)!==l.offsetHeight}(e),t==="fixed");let a={scrollLeft:0,scrollTop:0};const o={x:0,y:0};if(r||!r&&t!=="fixed")if((Ip(e)!=="body"||MI(i))&&(a=RI(e)),Ch(e)){const l=Dp(e,!0);o.x=l.x+e.clientLeft,o.y=l.y+e.clientTop}else i&&(o.x=BY(i));return{x:s.left+a.scrollLeft-o.x,y:s.top+a.scrollTop-o.y,width:s.width,height:s.height}}function $Y(n){return Ip(n)==="html"?n:n.assignedSlot||n.parentNode||(u4(n)?n.host:null)||fg(n)}function $G(n){return Ch(n)&&getComputedStyle(n).position!=="fixed"?n.offsetParent:null}function lL(n){const e=Kp(n);let t=$G(n);for(;t&&s1e(t)&&getComputedStyle(t).position==="static";)t=$G(t);return t&&(Ip(t)==="html"||Ip(t)==="body"&&getComputedStyle(t).position==="static"&&!OG(t))?e:t||function(r){let i=$Y(r);for(u4(i)&&(i=i.host);Ch(i)&&!["html","body"].includes(Ip(i));){if(OG(i))return i;i=i.parentNode}return null}(n)||e}function LG(n){if(Ch(n))return{width:n.offsetWidth,height:n.offsetHeight};const e=Dp(n);return{width:e.width,height:e.height}}function LY(n){const e=$Y(n);return["html","body","#document"].includes(Ip(e))?n.ownerDocument.body:Ch(e)&&MI(e)?e:LY(e)}function PR(n,e){var t;e===void 0&&(e=[]);const r=LY(n),i=r===((t=n.ownerDocument)==null?void 0:t.body),s=Kp(r),a=i?[s].concat(s.visualViewport||[],MI(r)?r:[]):r,o=e.concat(a);return i?o:o.concat(PR(a))}function FG(n,e,t){return e==="viewport"?$R(function(r,i){const s=Kp(r),a=fg(r),o=s.visualViewport;let l=a.clientWidth,c=a.clientHeight,u=0,d=0;if(o){l=o.width,c=o.height;const h=OY();(h||!h&&i==="fixed")&&(u=o.offsetLeft,d=o.offsetTop)}return{width:l,height:c,x:u,y:d}}(n,t)):Cg(e)?function(r,i){const s=Dp(r,!1,i==="fixed"),a=s.top+r.clientTop,o=s.left+r.clientLeft;return{top:a,left:o,x:o,y:a,right:o+r.clientWidth,bottom:a+r.clientHeight,width:r.clientWidth,height:r.clientHeight}}(e,t):$R(function(r){var i;const s=fg(r),a=RI(r),o=(i=r.ownerDocument)==null?void 0:i.body,l=SC(s.scrollWidth,s.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),c=SC(s.scrollHeight,s.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0);let u=-a.scrollLeft+BY(r);const d=-a.scrollTop;return $_(o||s).direction==="rtl"&&(u+=SC(s.clientWidth,o?o.clientWidth:0)-l),{width:l,height:c,x:u,y:d}}(fg(n)))}function o1e(n){const e=PR(n),t=["absolute","fixed"].includes($_(n).position)&&Ch(n)?lL(n):n;return Cg(t)?e.filter(r=>Cg(r)&&function(i,s){const a=s.getRootNode==null?void 0:s.getRootNode();if(i.contains(s))return!0;if(a&&u4(a)){let o=s;do{if(o&&i===o)return!0;o=o.parentNode||o.host}while(o)}return!1}(r,t)&&Ip(r)!=="body"):[]}const l1e={getClippingRect:function(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const s=[...t==="clippingAncestors"?o1e(e):[].concat(t),r],a=s[0],o=s.reduce((l,c)=>{const u=FG(e,c,i);return l.top=SC(u.top,l.top),l.right=BG(u.right,l.right),l.bottom=BG(u.bottom,l.bottom),l.left=SC(u.left,l.left),l},FG(e,a,i));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(n){let{rect:e,offsetParent:t,strategy:r}=n;const i=Ch(t),s=fg(t);if(t===s)return e;let a={scrollLeft:0,scrollTop:0};const o={x:0,y:0};if((i||!i&&r!=="fixed")&&((Ip(t)!=="body"||MI(s))&&(a=RI(t)),Ch(t))){const l=Dp(t,!0);o.x=l.x+t.clientLeft,o.y=l.y+t.clientTop}return{...e,x:e.x-a.scrollLeft+o.x,y:e.y-a.scrollTop+o.y}},isElement:Cg,getDimensions:LG,getOffsetParent:lL,getDocumentElement:fg,getElementRects:n=>{let{reference:e,floating:t,strategy:r}=n;return{reference:a1e(e,lL(t),r),floating:{...LG(t),x:0,y:0}}},getClientRects:n=>Array.from(n.getClientRects()),isRTL:n=>$_(n).direction==="rtl"};function c1e(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:a=!0,animationFrame:o=!1}=r,l=i&&!o,c=s&&!o,u=l||c?[...Cg(n)?PR(n):[],...PR(e)]:[];u.forEach(g=>{l&&g.addEventListener("scroll",t,{passive:!0}),c&&g.addEventListener("resize",t)});let d,h=null;if(a){let g=!0;h=new ResizeObserver(()=>{g||t(),g=!1}),Cg(n)&&!o&&h.observe(n),h.observe(e)}let p=o?Dp(n):null;return o&&function g(){const v=Dp(n);!p||v.x===p.x&&v.y===p.y&&v.width===p.width&&v.height===p.height||t(),p=v,d=requestAnimationFrame(g)}(),t(),()=>{var g;u.forEach(v=>{l&&v.removeEventListener("scroll",t),c&&v.removeEventListener("resize",t)}),(g=h)==null||g.disconnect(),h=null,o&&cancelAnimationFrame(d)}}const u1e=(n,e,t)=>Xxe(n,e,{platform:l1e,...t});var cL=typeof document<"u"?F.useLayoutEffect:F.useEffect;function uL(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!=e.length)return!1;for(r=t;r--!==0;)if(!uL(n[r],e[r]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){const s=i[r];if(!(s==="_owner"&&n.$$typeof)&&!uL(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}function d1e(n){const e=F.useRef(n);return cL(()=>{e.current=n}),e}function f1e(n){let{middleware:e,placement:t="bottom",strategy:r="absolute",whileElementsMounted:i}=n===void 0?{}:n;const s=F.useRef(null),a=F.useRef(null),o=d1e(i),l=F.useRef(null),[c,u]=F.useState({x:null,y:null,strategy:r,placement:t,middlewareData:{}}),[d,h]=F.useState(e);uL(d==null?void 0:d.map(E=>{let{options:_}=E;return _}),e==null?void 0:e.map(E=>{let{options:_}=E;return _}))||h(e);const p=F.useCallback(()=>{!s.current||!a.current||u1e(s.current,a.current,{middleware:d,placement:t,strategy:r}).then(E=>{g.current&&O_.flushSync(()=>{u(E)})})},[d,t,r]);cL(()=>{g.current&&p()},[p]);const g=F.useRef(!1);cL(()=>(g.current=!0,()=>{g.current=!1}),[]);const v=F.useCallback(()=>{if(typeof l.current=="function"&&(l.current(),l.current=null),s.current&&a.current)if(o.current){const E=o.current(s.current,a.current,p);l.current=E}else p()},[p,o]),b=F.useCallback(E=>{s.current=E,v()},[v]),x=F.useCallback(E=>{a.current=E,v()},[v]),C=F.useMemo(()=>({reference:s,floating:a}),[]);return F.useMemo(()=>({...c,update:p,refs:C,reference:b,floating:x}),[c,p,C,b,x])}const h1e=n=>{const{element:e,padding:t}=n;function r(i){return Object.prototype.hasOwnProperty.call(i,"current")}return{name:"arrow",options:n,fn(i){return r(e)?e.current!=null?NG({element:e.current,padding:t}).fn(i):{}:e?NG({element:e,padding:t}).fn(i):{}}}},p1e=F.forwardRef((n,e)=>{const{children:t,width:r=10,height:i=5,...s}=n;return F.createElement(rv.svg,ss({},s,{ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),n.asChild?t:F.createElement("polygon",{points:"0,0 30,0 15,10"}))}),m1e=p1e;function g1e(n){const e=F.useRef(n);return F.useEffect(()=>{e.current=n}),F.useMemo(()=>(...t)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...t)},[])}const Jw=globalThis!=null&&globalThis.document?F.useLayoutEffect:()=>{};function y1e(n){const[e,t]=F.useState(void 0);return Jw(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let a,o;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;a=c.inlineSize,o=c.blockSize}else a=n.offsetWidth,o=n.offsetHeight;t({width:a,height:o})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}const FY="Popper",[d4,PY]=EY(FY),[v1e,UY]=d4(FY),b1e=n=>{const{__scopePopper:e,children:t}=n,[r,i]=F.useState(null);return F.createElement(v1e,{scope:e,anchor:r,onAnchorChange:i},t)},x1e="PopperAnchor",S1e=F.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,s=UY(x1e,t),a=F.useRef(null),o=k1(e,a);return F.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:F.createElement(rv.div,ss({},i,{ref:o}))}),UR="PopperContent",[w1e,C1e]=d4(UR),[_1e,E1e]=d4(UR,{hasParent:!1,positionUpdateFns:new Set}),A1e=F.forwardRef((n,e)=>{var t,r,i,s,a,o,l,c;const{__scopePopper:u,side:d="bottom",sideOffset:h=0,align:p="center",alignOffset:g=0,arrowPadding:v=0,collisionBoundary:b=[],collisionPadding:x=0,sticky:C="partial",hideWhenDetached:E=!1,avoidCollisions:_=!0,onPlaced:M,...R}=n,L=UY(UR,u),[$,N]=F.useState(null),I=k1(e,mt=>N(mt)),[k,P]=F.useState(null),G=y1e(k),W=(t=G==null?void 0:G.width)!==null&&t!==void 0?t:0,X=(r=G==null?void 0:G.height)!==null&&r!==void 0?r:0,z=d+(p!=="center"?"-"+p:""),J=typeof x=="number"?x:{top:0,right:0,bottom:0,left:0,...x},Q=Array.isArray(b)?b:[b],Y=Q.length>0,q={padding:J,boundary:Q.filter(I1e),altBoundary:Y},{reference:te,floating:ne,strategy:le,x:ye,y:ue,placement:ve,middlewareData:xe,update:Pe}=f1e({strategy:"fixed",placement:z,whileElementsMounted:c1e,middleware:[D1e(),t1e({mainAxis:h+X,alignmentAxis:g}),_?n1e({mainAxis:!0,crossAxis:!1,limiter:C==="partial"?r1e():void 0,...q}):void 0,k?h1e({element:k,padding:v}):void 0,_?Qxe({...q}):void 0,i1e({...q,apply:({elements:mt,availableWidth:ce,availableHeight:re})=>{mt.floating.style.setProperty("--radix-popper-available-width",`${ce}px`),mt.floating.style.setProperty("--radix-popper-available-height",`${re}px`)}}),k1e({arrowWidth:W,arrowHeight:X}),E?e1e({strategy:"referenceHidden"}):void 0].filter(N1e)});Jw(()=>{te(L.anchor)},[te,L.anchor]);const ze=ye!==null&&ue!==null,[Ke,pt]=zY(ve),dt=g1e(M);Jw(()=>{ze&&(dt==null||dt())},[ze,dt]);const pe=(i=xe.arrow)===null||i===void 0?void 0:i.x,Le=(s=xe.arrow)===null||s===void 0?void 0:s.y,Ue=((a=xe.arrow)===null||a===void 0?void 0:a.centerOffset)!==0,[Ze,je]=F.useState();Jw(()=>{$&&je(window.getComputedStyle($).zIndex)},[$]);const{hasParent:lt,positionUpdateFns:st}=E1e(UR,u),ot=!lt;F.useLayoutEffect(()=>{if(!ot)return st.add(Pe),()=>{st.delete(Pe)}},[ot,st,Pe]),Jw(()=>{ot&&ze&&Array.from(st).reverse().forEach(mt=>requestAnimationFrame(mt))},[ot,ze,st]);const Ut={"data-side":Ke,"data-align":pt,...R,ref:I,style:{...R.style,animation:ze?void 0:"none",opacity:(o=xe.hide)!==null&&o!==void 0&&o.referenceHidden?0:void 0}};return F.createElement("div",{ref:ne,"data-radix-popper-content-wrapper":"",style:{position:le,left:0,top:0,transform:ze?`translate3d(${Math.round(ye)}px, ${Math.round(ue)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:Ze,"--radix-popper-transform-origin":[(l=xe.transformOrigin)===null||l===void 0?void 0:l.x,(c=xe.transformOrigin)===null||c===void 0?void 0:c.y].join(" ")},dir:n.dir},F.createElement(w1e,{scope:u,placedSide:Ke,onArrowChange:P,arrowX:pe,arrowY:Le,shouldHideArrow:Ue},ot?F.createElement(_1e,{scope:u,hasParent:!0,positionUpdateFns:st},F.createElement(rv.div,Ut)):F.createElement(rv.div,Ut)))}),T1e="PopperArrow",M1e={top:"bottom",right:"left",bottom:"top",left:"right"},R1e=F.forwardRef(function(e,t){const{__scopePopper:r,...i}=e,s=C1e(T1e,r),a=M1e[s.placedSide];return F.createElement("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0}},F.createElement(m1e,ss({},i,{ref:t,style:{...i.style,display:"block"}})))});function N1e(n){return n!==void 0}function I1e(n){return n!==null}const D1e=()=>({name:"anchorCssProperties",fn(n){const{rects:e,elements:t}=n,{width:r,height:i}=e.reference;return t.floating.style.setProperty("--radix-popper-anchor-width",`${r}px`),t.floating.style.setProperty("--radix-popper-anchor-height",`${i}px`),{}}}),k1e=n=>({name:"transformOrigin",options:n,fn(e){var t,r,i,s,a;const{placement:o,rects:l,middlewareData:c}=e,d=((t=c.arrow)===null||t===void 0?void 0:t.centerOffset)!==0,h=d?0:n.arrowWidth,p=d?0:n.arrowHeight,[g,v]=zY(o),b={start:"0%",center:"50%",end:"100%"}[v],x=((r=(i=c.arrow)===null||i===void 0?void 0:i.x)!==null&&r!==void 0?r:0)+h/2,C=((s=(a=c.arrow)===null||a===void 0?void 0:a.y)!==null&&s!==void 0?s:0)+p/2;let E="",_="";return g==="bottom"?(E=d?b:`${x}px`,_=`${-p}px`):g==="top"?(E=d?b:`${x}px`,_=`${l.floating.height+p}px`):g==="right"?(E=`${-p}px`,_=d?b:`${C}px`):g==="left"&&(E=`${l.floating.width+p}px`,_=d?b:`${C}px`),{data:{x:E,y:_}}}});function zY(n){const[e,t="center"]=n.split("-");return[e,t]}const O1e=b1e,B1e=S1e,$1e=A1e,L1e=R1e,PG=globalThis!=null&&globalThis.document?F.useLayoutEffect:()=>{};function F1e(n,e){return F.useReducer((t,r)=>{const i=e[t][r];return i??t},n)}const HY=n=>{const{present:e,children:t}=n,r=P1e(e),i=typeof t=="function"?t({present:r.isPresent}):F.Children.only(t),s=k1(r.ref,i.ref);return typeof t=="function"||r.isPresent?F.cloneElement(i,{ref:s}):null};HY.displayName="Presence";function P1e(n){const[e,t]=F.useState(),r=F.useRef({}),i=F.useRef(n),s=F.useRef("none"),a=n?"mounted":"unmounted",[o,l]=F1e(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return F.useEffect(()=>{const c=OT(r.current);s.current=o==="mounted"?c:"none"},[o]),PG(()=>{const c=r.current,u=i.current;if(u!==n){const h=s.current,p=OT(c);n?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&h!==p?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,l]),PG(()=>{if(e){const c=d=>{const p=OT(r.current).includes(d.animationName);d.target===e&&p&&O_.flushSync(()=>l("ANIMATION_END"))},u=d=>{d.target===e&&(s.current=OT(r.current))};return e.addEventListener("animationstart",u),e.addEventListener("animationcancel",c),e.addEventListener("animationend",c),()=>{e.removeEventListener("animationstart",u),e.removeEventListener("animationcancel",c),e.removeEventListener("animationend",c)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:F.useCallback(c=>{c&&(r.current=getComputedStyle(c)),t(c)},[])}}function OT(n){return(n==null?void 0:n.animationName)||"none"}function VY(n){const e=F.useRef(n);return F.useEffect(()=>{e.current=n}),F.useMemo(()=>(...t)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...t)},[])}function U1e({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,i]=z1e({defaultProp:e,onChange:t}),s=n!==void 0,a=s?n:r,o=VY(t),l=F.useCallback(c=>{if(s){const d=typeof c=="function"?c(n):c;d!==n&&o(d)}else i(c)},[s,n,i,o]);return[a,l]}function z1e({defaultProp:n,onChange:e}){const t=F.useState(n),[r]=t,i=F.useRef(r),s=VY(e);return F.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),t}const H1e=F.forwardRef((n,e)=>F.createElement(rv.span,ss({},n,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}))),V1e=H1e,[NI,zct]=EY("Tooltip",[PY]),II=PY(),G1e="TooltipProvider",dL="tooltip.open",[Hct,f4]=NI(G1e),h4="Tooltip",[W1e,DI]=NI(h4),j1e=n=>{const{__scopeTooltip:e,children:t,open:r,defaultOpen:i=!1,onOpenChange:s,disableHoverableContent:a,delayDuration:o}=n,l=f4(h4,n.__scopeTooltip),c=II(e),[u,d]=F.useState(null),h=qxe(),p=F.useRef(0),g=a??l.disableHoverableContent,v=o??l.delayDuration,b=F.useRef(!1),[x=!1,C]=U1e({prop:r,defaultProp:i,onChange:L=>{L?(l.onOpen(),document.dispatchEvent(new CustomEvent(dL))):l.onClose(),s==null||s(L)}}),E=F.useMemo(()=>x?b.current?"delayed-open":"instant-open":"closed",[x]),_=F.useCallback(()=>{window.clearTimeout(p.current),b.current=!1,C(!0)},[C]),M=F.useCallback(()=>{window.clearTimeout(p.current),C(!1)},[C]),R=F.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{b.current=!0,C(!0)},v)},[v,C]);return F.useEffect(()=>()=>window.clearTimeout(p.current),[]),F.createElement(O1e,c,F.createElement(W1e,{scope:e,contentId:h,open:x,stateAttribute:E,trigger:u,onTriggerChange:d,onTriggerEnter:F.useCallback(()=>{l.isOpenDelayed?R():_()},[l.isOpenDelayed,R,_]),onTriggerLeave:F.useCallback(()=>{g?M():window.clearTimeout(p.current)},[M,g]),onOpen:_,onClose:M,disableHoverableContent:g},t))},UG="TooltipTrigger",q1e=F.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=DI(UG,t),s=f4(UG,t),a=II(t),o=F.useRef(null),l=k1(e,o,i.onTriggerChange),c=F.useRef(!1),u=F.useRef(!1),d=F.useCallback(()=>c.current=!1,[]);return F.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),F.createElement(B1e,ss({asChild:!0},a),F.createElement(rv.button,ss({"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute},r,{ref:l,onPointerMove:xp(n.onPointerMove,h=>{h.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:xp(n.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:xp(n.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:xp(n.onFocus,()=>{c.current||i.onOpen()}),onBlur:xp(n.onBlur,i.onClose),onClick:xp(n.onClick,i.onClose)})))}),X1e="TooltipPortal",[Vct,K1e]=NI(X1e,{forceMount:void 0}),WC="TooltipContent",Y1e=F.forwardRef((n,e)=>{const t=K1e(WC,n.__scopeTooltip),{forceMount:r=t.forceMount,side:i="top",...s}=n,a=DI(WC,n.__scopeTooltip);return F.createElement(HY,{present:r||a.open},a.disableHoverableContent?F.createElement(GY,ss({side:i},s,{ref:e})):F.createElement(J1e,ss({side:i},s,{ref:e})))}),J1e=F.forwardRef((n,e)=>{const t=DI(WC,n.__scopeTooltip),r=f4(WC,n.__scopeTooltip),i=F.useRef(null),s=k1(e,i),[a,o]=F.useState(null),{trigger:l,onClose:c}=t,u=i.current,{onPointerInTransitChange:d}=r,h=F.useCallback(()=>{o(null),d(!1)},[d]),p=F.useCallback((g,v)=>{const b=g.currentTarget,x={x:g.clientX,y:g.clientY},C=nSe(x,b.getBoundingClientRect()),E=C==="right"||C==="bottom"?-5:5,M=C==="right"||C==="left"?{x:g.clientX+E,y:g.clientY}:{x:g.clientX,y:g.clientY+E},R=rSe(v.getBoundingClientRect()),L=sSe([M,...R]);o(L),d(!0)},[d]);return F.useEffect(()=>()=>h(),[h]),F.useEffect(()=>{if(l&&u){const g=b=>p(b,u),v=b=>p(b,l);return l.addEventListener("pointerleave",g),u.addEventListener("pointerleave",v),()=>{l.removeEventListener("pointerleave",g),u.removeEventListener("pointerleave",v)}}},[l,u,p,h]),F.useEffect(()=>{if(a){const g=v=>{const b=v.target,x={x:v.clientX,y:v.clientY},C=(l==null?void 0:l.contains(b))||(u==null?void 0:u.contains(b)),E=!iSe(x,a);C?h():E&&(h(),c())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[l,u,a,c,h]),F.createElement(GY,ss({},n,{ref:s}))}),[Z1e,Q1e]=NI(h4,{isInside:!1}),GY=F.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:a,...o}=n,l=DI(WC,t),c=II(t),{onClose:u}=l;return F.useEffect(()=>(document.addEventListener(dL,u),()=>document.removeEventListener(dL,u)),[u]),F.useEffect(()=>{if(l.trigger){const d=h=>{const p=h.target;p!=null&&p.contains(l.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,u]),F.createElement(zxe,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:d=>d.preventDefault(),onDismiss:u},F.createElement($1e,ss({"data-state":l.stateAttribute},c,o,{ref:e,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),F.createElement(TY,null,r),F.createElement(Z1e,{scope:t,isInside:!0},F.createElement(V1e,{id:l.contentId,role:"tooltip"},i||r))))}),eSe="TooltipArrow",tSe=F.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=II(t);return Q1e(eSe,t).isInside?null:F.createElement(L1e,ss({},i,r,{ref:e}))});function nSe(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),i=Math.abs(e.right-n.x),s=Math.abs(e.left-n.x);switch(Math.min(t,r,i,s)){case s:return"left";case i:return"right";case t:return"top";case r:return"bottom";default:return null}}function rSe(n){const{top:e,right:t,bottom:r,left:i}=n;return[{x:i,y:e},{x:t,y:e},{x:t,y:r},{x:i,y:r}]}function iSe(n,e){const{x:t,y:r}=n;let i=!1;for(let s=0,a=e.length-1;s<e.length;a=s++){const o=e[s].x,l=e[s].y,c=e[a].x,u=e[a].y;l>r!=u>r&&t<(c-o)*(r-l)/(u-l)+o&&(i=!i)}return i}function sSe(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),aSe(e)}function aSe(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const i=n[r];for(;e.length>=2;){const s=e[e.length-1],a=e[e.length-2];if((s.x-a.x)*(i.y-a.y)>=(s.y-a.y)*(i.x-a.x))e.pop();else break}e.push(i)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const i=n[r];for(;t.length>=2;){const s=t[t.length-1],a=t[t.length-2];if((s.x-a.x)*(i.y-a.y)>=(s.y-a.y)*(i.x-a.x))t.pop();else break}t.push(i)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}const oSe=j1e,lSe=q1e,cSe=Y1e,uSe=tSe;function dSe(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function Ki(n,e){if(n==null)return{};var t=dSe(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}let Rs;(function(n){n[n.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",n[n.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",n[n.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",n[n.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",n[n.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",n[n.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",n[n.THEME_ERROR=6]="THEME_ERROR",n[n.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",n[n.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",n[n.EMPTY_KEY=9]="EMPTY_KEY"})(Rs||(Rs={}));const fSe={[Rs.UNSUPPORTED_INPUT]:(n,e)=>[`An input with type \`${n}\` input was found at path \`${e}\` but it's not supported yet.`],[Rs.NO_COMPONENT_FOR_TYPE]:(n,e)=>[`Type \`${n}\` found at path \`${e}\` can't be displayed in panel because no component supports it yet.`],[Rs.UNKNOWN_INPUT]:(n,e)=>[`input at path \`${n}\` is not recognized.`,e],[Rs.DUPLICATE_KEYS]:(n,e,t)=>[`Key \`${n}\` of path \`${e}\` already exists at path \`${t}\`. Even nested keys need to be unique. Rename one of the keys.`],[Rs.ALREADY_REGISTERED_TYPE]:n=>[`Type ${n} has already been registered. You can't register a component with the same type.`],[Rs.CLIPBOARD_ERROR]:n=>["Error copying the value",n],[Rs.THEME_ERROR]:(n,e)=>[`Error accessing the theme \`${n}.${e}\` value.`],[Rs.PATH_DOESNT_EXIST]:n=>[`Error getting the value at path \`${n}\`. There is probably an error in your \`render\` function.`],[Rs.PATH_DOESNT_EXIST]:n=>[`Error accessing the value at path \`${n}\``],[Rs.INPUT_TYPE_OVERRIDE]:(n,e,t)=>[`Input at path \`${n}\` already exists with type: \`${e}\`. Its type cannot be overridden with type \`${t}\`.`],[Rs.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function WY(n,e,...t){const[r,...i]=fSe[e](...t);console[n]("LEVA: "+r,...i)}const Ap=WY.bind(null,"warn"),hSe=WY.bind(null,"log"),pSe=["value"],mSe=["schema"],gSe=["value"],jY=[],iv={};function zG(n){let{value:e}=n,t=Ki(n,pSe);for(let r of jY){const i=r(e,t);if(i)return i}}function Yp(n,e){let{schema:t}=e,r=Ki(e,mSe);if(n in iv){Ap(Rs.ALREADY_REGISTERED_TYPE,n);return}jY.push((i,s)=>t(i,s)&&n),iv[n]=r}function aB(n,e,t,r){const{normalize:i}=iv[n];if(i)return i(e,t,r);if(typeof e!="object"||!("value"in e))return{value:e};const{value:s}=e,a=Ki(e,gSe);return{value:s,settings:a}}function ySe(n,e,t,r,i,s){const{sanitize:a}=iv[n];return a?a(e,t,r,i,s):e}function HG(n,e,t){const{format:r}=iv[n];return r?r(e,t):e}function vSe(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function VG(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function tr(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?VG(Object(t),!0).forEach(function(r){vSe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):VG(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const _g=(n,e,t)=>n>t?t:n<e?e:n,bSe=n=>{if(n===""||typeof n=="number")return n;try{const e=Qm(n);if(!isNaN(e))return e}catch{}return parseFloat(n)},xSe=Math.log(10);function GG(n){let e=Math.abs(+String(n).replace(".",""));if(e===0)return .01;for(;e!==0&&e%10===0;)e/=10;const t=Math.floor(Math.log(e)/xSe)+1,r=Math.floor(Math.log10(Math.abs(n))),i=Math.pow(10,r-t);return Math.max(i,.001)}const zR=(n,e,t)=>t===e?0:(_g(n,e,t)-e)/(t-e),HR=(n,e,t)=>n*(t-e)+e,SSe=()=>"_"+Math.random().toString(36).substr(2,9),WG=/\(([0-9+\-*/^ .]+)\)/,jG=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,qG=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,XG=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,KG=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,YG=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function Qm(n){if(isNaN(Number(n)))if(WG.test(n)){const e=n.replace(WG,(t,r)=>String(Qm(r)));return Qm(e)}else if(jG.test(n)){const e=n.replace(jG,(t,r,i)=>String(Math.pow(Number(r),Number(i))));return Qm(e)}else if(qG.test(n)){const e=n.replace(qG,(t,r,i)=>String(Number(r)*Number(i)));return Qm(e)}else if(XG.test(n)){const e=n.replace(XG,(t,r,i)=>{if(i!=0)return String(Number(r)/Number(i));throw new Error("Division by zero")});return Qm(e)}else if(KG.test(n)){const e=n.replace(KG,(t,r,i)=>String(Number(r)+Number(i)));return Qm(e)}else if(YG.test(n)){const e=n.replace(YG,(t,r,i)=>String(Number(r)-Number(i)));return Qm(e)}else return Number(n);return Number(n)}function wSe(n,e){return e.reduce((t,r)=>(n&&n.hasOwnProperty(r)&&(t[r]=n[r]),t),{})}function CSe(n,e){const t=tr({},n);return e.forEach(r=>r in n&&delete t[r]),t}function _Se(n,e){return n.reduce((t,r,i)=>Object.assign(t,{[e[i]]:r}),{})}function qY(n){return Object.prototype.toString.call(n)==="[object Object]"}const ESe=n=>qY(n)&&Object.keys(n).length===0;let Jd;(function(n){n.BUTTON="BUTTON",n.BUTTON_GROUP="BUTTON_GROUP",n.MONITOR="MONITOR",n.FOLDER="FOLDER"})(Jd||(Jd={}));let rf;(function(n){n.SELECT="SELECT",n.IMAGE="IMAGE",n.NUMBER="NUMBER",n.COLOR="COLOR",n.STRING="STRING",n.BOOLEAN="BOOLEAN",n.INTERVAL="INTERVAL",n.VECTOR3D="VECTOR3D",n.VECTOR2D="VECTOR2D"})(rf||(rf={}));const ASe=["type","__customInput"],TSe=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],MSe=["type"];function XY(n,e,t={},r){var i,s;if(typeof n!="object"||Array.isArray(n))return{type:r,input:n,options:tr({key:e,label:e,optional:!1,disabled:!1,order:0},t)};if("__customInput"in n){const{type:M,__customInput:R}=n,L=Ki(n,ASe);return XY(R,e,L,M)}const{render:a,label:o,optional:l,order:c=0,disabled:u,hint:d,onChange:h,onEditStart:p,onEditEnd:g,transient:v}=n,b=Ki(n,TSe),x=tr({render:a,key:e,label:o??e,hint:d,transient:v??!!h,onEditStart:p,onEditEnd:g,disabled:u,optional:l,order:c},t);let{type:C}=b,E=Ki(b,MSe);if(C=r??C,C in Jd)return{type:C,input:E,options:x};let _;return r&&qY(E)&&"value"in E?_=E.value:_=ESe(E)?void 0:E,{type:C,input:_,options:tr(tr({},x),{},{onChange:h,optional:(i=x.optional)!==null&&i!==void 0?i:!1,disabled:(s=x.disabled)!==null&&s!==void 0?s:!1})}}function RSe(n,e,t,r){const i=XY(n,e),{type:s,input:a,options:o}=i;if(s)return s in Jd?i:{type:s,input:aB(s,a,t,r),options:o};let l=zG(a);return l?{type:l,input:aB(l,a,t,r),options:o}:(l=zG({value:a}),l?{type:l,input:aB(l,{value:a},t,r),options:o}:!1)}function JG(n,e,t,r,i){const{value:s,type:a,settings:o}=n;n.value=KY({type:a,value:s,settings:o},e,t,r),n.fromPanel=i}const NSe=function(e,t,r){this.type="LEVA_ERROR",this.message="LEVA: "+e,this.previousValue=t,this.error=r};function KY({type:n,value:e,settings:t},r,i,s){const a=n!=="SELECT"&&typeof r=="function"?r(e):r;let o;try{o=ySe(n,a,t,e,i,s)}catch(l){throw new NSe(`The value \`${r}\` did not result in a correct value.`,e,l)}return HC(o,e)?e:o}const YY=(n,e,t=!1)=>{let r=0;return function(){const i=arguments,s=t&&!r,a=()=>n.apply(this,i);window.clearTimeout(r),r=window.setTimeout(a,e),s&&a()}},JY=n=>n.shiftKey?5:n.altKey?1/5:1,ISe=["value"],DSe=["min","max"],kSe=n=>{if(typeof n=="number")return!0;if(typeof n=="string"){const e=parseFloat(n);return isNaN(e)?!1:n.substring((""+e).length).trim().length<4}return!1},ZY=(n,{min:e=-1/0,max:t=1/0,suffix:r})=>{const i=parseFloat(n);if(n===""||isNaN(i))throw Error("Invalid number");const s=_g(i,e,t);return r?s+r:s},OSe=(n,{pad:e=0,suffix:t})=>{const r=parseFloat(n).toFixed(e);return t?r+t:r},QY=n=>{let{value:e}=n,t=Ki(n,ISe);const{min:r=-1/0,max:i=1/0}=t,s=Ki(t,DSe);let a=parseFloat(e);const o=typeof e=="string"?e.substring((""+a).length):void 0;a=_g(a,r,i);let l=t.step;l||(Number.isFinite(r)?Number.isFinite(i)?l=+(Math.abs(i-r)/100).toPrecision(1):l=+(Math.abs(a-r)/100).toPrecision(1):Number.isFinite(i)&&(l=+(Math.abs(i-a)/100).toPrecision(1)));const c=l?GG(l)*10:GG(a);l=l||c/10;const u=Math.round(_g(Math.log10(1/c),0,2));return{value:o?a+o:a,settings:tr({initialValue:a,step:l,pad:u,min:r,max:i,suffix:o},s)}},eJ=(n,{step:e,initialValue:t})=>{const r=Math.round((n-t)/e);return t+r*e};var tJ=Object.freeze({__proto__:null,schema:kSe,sanitize:ZY,format:OSe,normalize:QY,sanitizeStep:eJ});function qs(){return qs=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},qs.apply(this,arguments)}const nJ=F.createContext({});function sl(){return F.useContext(nJ)}const p4=F.createContext(null),rJ=F.createContext(null),iJ=F.createContext(null);function L_(){return F.useContext(rJ)}function BSe(){return F.useContext(iJ)}const sJ=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function BT(n,e){const[t,r]=n.split(" "),i={};return t!=="none"&&(i.boxShadow=`${e.inset?"inset ":""}0 0 0 $borderWidths${[e.key]} $colors${t!=="default"&&t||e.borderColor}`),r&&(i.backgroundColor=r),i}const Ow={$inputStyle:()=>n=>BT(n,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>n=>BT(n,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>n=>BT(n,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>n=>BT(n,{key:"$active",borderColor:"$accent1",inset:!0})},{styled:Wn,css:Gct,createTheme:$Se,globalCss:LSe,keyframes:Wct}=Nxe({prefix:"leva",theme:sJ(),utils:tr(tr({},Ow),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:n=>({"&:focus":Ow.$focusStyle()(n)}),$focusWithin:n=>({"&:focus-within":Ow.$focusStyle()(n)}),$hover:n=>({"&:hover":Ow.$hoverStyle()(n)}),$active:n=>({"&:active":Ow.$activeStyle()(n)})})}),FSe=LSe({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function PSe(n){const e=sJ();if(!n)return{theme:e,className:""};Object.keys(n).forEach(r=>{Object.assign(e[r],n[r])});const t=$Se(e);return{theme:e,className:t.className}}function kp(n,e){const{theme:t}=F.useContext(p4);if(!(n in t)||!(e in t[n]))return Ap(Rs.THEME_ERROR,n,e),"";let r=e;for(;;){let i=t[n][r];if(typeof i=="string"&&i.charAt(0)==="$")r=i.substr(1);else return i}}const aJ=Wn("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),oJ=Wn("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${aJ}`]:{paddingLeft:0}}),USe=Wn(oJ,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),zSe=Wn("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),HSe=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],VSe=["onUpdate"];function m4(n){let{innerLabel:e,value:t,onUpdate:r,onChange:i,onKeyDown:s,type:a,id:o,inputType:l="text",rows:c=0}=n,u=Ki(n,HSe);const{id:d,emitOnEditStart:h,emitOnEditEnd:p,disabled:g}=sl(),v=o||d,b=F.useRef(null),x=c>0,C=x?"textarea":"input",E=F.useCallback(R=>L=>{const $=L.currentTarget.value;R($)},[]);Ne.useEffect(()=>{const R=b.current,L=E($=>{r($),p()});return R==null||R.addEventListener("blur",L),()=>R==null?void 0:R.removeEventListener("blur",L)},[E,r,p]);const _=F.useCallback(R=>{R.key==="Enter"&&E(r)(R)},[E,r]),M=Object.assign({as:C},x?{rows:c}:{},u);return Ne.createElement(zSe,{textArea:x},e&&typeof e=="string"?Ne.createElement(oJ,null,e):e,Ne.createElement(aJ,qs({levaType:a,ref:b,id:v,type:l,autoComplete:"off",spellCheck:"false",value:t,onChange:E(i),onFocus:()=>h(),onKeyPress:_,onKeyDown:s,disabled:g},M)))}function GSe(n){let{onUpdate:e}=n,t=Ki(n,VSe);const r=F.useCallback(s=>e(bSe(s)),[e]),i=F.useCallback(s=>{const a=s.key==="ArrowUp"?1:s.key==="ArrowDown"?-1:0;if(a){s.preventDefault();const o=s.altKey?.1:s.shiftKey?10:1;e(l=>parseFloat(l)+a*o)}},[e]);return Ne.createElement(m4,qs({},t,{onUpdate:r,onKeyDown:i,type:"number"}))}const VR=Wn("div",{}),fL=Wn("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),WSe=Wn("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${fL}::after`]:{opacity:.6},[`${VR}:hover > & + ${fL}::after`]:{opacity:.6},[`${VR}:hover > & > svg`]:{opacity:1}}),lJ=Wn("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${VR}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),cJ=Wn("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${lJ} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),uJ=Wn(cJ,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),jSe=Wn("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),qSe=Wn("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),hL=Wn("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),XSe=Wn("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${hL}`]:{pointerEvents:"auto"}}}}}),dJ=Wn("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),KSe=Wn("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),YSe=Wn(uSe,{fill:"$toolTipBackground"});function g4({children:n}){const{className:e}=F.useContext(p4);return Ne.createElement(Zbe,{className:e},n)}const JSe=["align"];function ZSe(){const{id:n,disable:e,disabled:t}=sl();return Ne.createElement(Ne.Fragment,null,Ne.createElement(qSe,{id:n+"__disable",type:"checkbox",checked:!t,onChange:()=>e(!t)}),Ne.createElement("label",{htmlFor:n+"__disable"}))}function QSe(n){const{id:e,optional:t,hint:r}=sl(),i=n.htmlFor||(e?{htmlFor:e}:null),s=!r&&typeof n.children=="string"?{title:n.children}:null;return Ne.createElement(Ne.Fragment,null,t&&Ne.createElement(ZSe,null),r!==void 0?Ne.createElement(oSe,null,Ne.createElement(lSe,{asChild:!0},Ne.createElement(hL,qs({},i,n))),Ne.createElement(cSe,{side:"top",sideOffset:2},Ne.createElement(KSe,null,r,Ne.createElement(YSe,null)))):Ne.createElement(hL,qs({},i,s,n)))}function hf(n){let{align:e}=n,t=Ki(n,JSe);const{value:r,label:i,key:s,disabled:a}=sl(),{hideCopyButton:o}=BSe(),l=!o&&s!==void 0,[c,u]=F.useState(!1),d=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[s]:r??""})),u(!0)}catch{Ap(Rs.CLIPBOARD_ERROR,{[s]:r})}};return Ne.createElement(jSe,{align:e,onPointerLeave:()=>u(!1)},Ne.createElement(QSe,t),l&&!a&&Ne.createElement("div",{title:`Click to copy ${typeof i=="string"?i:s} value`},c?Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},Ne.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),Ne.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):Ne.createElement("svg",{onClick:d,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},Ne.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),Ne.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const ewe=["toggled"],twe=Wn("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function y4(n){let{toggled:e}=n,t=Ki(n,ewe);return Ne.createElement(twe,qs({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${e?0:-90}deg)`}},t),Ne.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const nwe=["input"];function Qu(n){let{input:e}=n,t=Ki(n,nwe);return e?Ne.createElement(uJ,t):Ne.createElement(cJ,t)}function fJ({value:n,type:e,settings:t,setValue:r}){const[i,s]=F.useState(HG(e,n,t)),a=F.useRef(n),o=F.useRef(t);o.current=t;const l=F.useCallback(u=>s(HG(e,u,o.current)),[e]),c=F.useCallback(u=>{try{r(u)}catch(d){const{type:h,previousValue:p}=d;if(h!=="LEVA_ERROR")throw d;l(p)}},[l,r]);return F.useEffect(()=>{HC(n,a.current)||l(n),a.current=n},[n,l]),{displayValue:i,onChange:s,onUpdate:c}}function F_(n,e){const{emitOnEditStart:t,emitOnEditEnd:r}=sl();return Uye(i=>{i.first&&(document.body.classList.add("leva__panel__dragged"),t==null||t());const s=n(i);return i.last&&(document.body.classList.remove("leva__panel__dragged"),r==null||r()),s},e)}function rwe(n){const e=F.useRef(null),t=F.useRef(null),r=F.useRef(!1);return F.useEffect(()=>{const i=YY(()=>{e.current.width=e.current.offsetWidth*window.devicePixelRatio,e.current.height=e.current.offsetHeight*window.devicePixelRatio,n(e.current,t.current)},250);return window.addEventListener("resize",i),r.current||(i(),r.current=!0),()=>window.removeEventListener("resize",i)},[n]),F.useEffect(()=>{t.current=e.current.getContext("2d")},[]),[e,t]}function hJ(){const n=F.useRef(null),e=F.useRef({x:0,y:0}),t=F.useCallback(r=>{Object.assign(e.current,r),n.current&&(n.current.style.transform=`translate3d(${e.current.x}px, ${e.current.y}px, 0)`)},[]);return[n,t]}const iwe=["__refCount"],oB=(n,e)=>{if(!n[e])return null;const t=n[e];return Ki(t,iwe)};function swe(n){const e=L_(),[t,r]=F.useState(oB(e.getData(),n)),i=F.useCallback(c=>e.setValueAtPath(n,c,!0),[n,e]),s=F.useCallback(c=>e.setSettingsAtPath(n,c),[n,e]),a=F.useCallback(c=>e.disableInputAtPath(n,c),[n,e]),o=F.useCallback(()=>e.emitOnEditStart(n),[n,e]),l=F.useCallback(()=>e.emitOnEditEnd(n),[n,e]);return F.useEffect(()=>{r(oB(e.getData(),n));const c=e.useStore.subscribe(u=>oB(u.data,n),r,{equalityFn:AI});return()=>c()},[e,n]),[t,{set:i,setSettings:s,disable:a,storeId:e.storeId,emitOnEditStart:o,emitOnEditEnd:l}]}const awe=Wn("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),pJ=Wn("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),pL=Wn("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),mJ=Wn("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),gJ=Wn("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function owe({value:n,min:e,max:t,onDrag:r,step:i,initialValue:s}){const a=F.useRef(null),o=F.useRef(null),l=F.useRef(0),c=kp("sizes","scrubberWidth"),u=F_(({event:h,first:p,xy:[g],movement:[v],memo:b})=>{if(p){const{width:C,left:E}=a.current.getBoundingClientRect();l.current=C-parseFloat(c),b=(h==null?void 0:h.target)===o.current?n:HR((g-E)/C,e,t)}const x=b+HR(v/l.current,0,t-e);return r(eJ(x,{step:i,initialValue:s})),b}),d=zR(n,e,t);return Ne.createElement(mJ,qs({ref:a},u()),Ne.createElement(pJ,null,Ne.createElement(gJ,{style:{left:0,right:`${(1-d)*100}%`}})),Ne.createElement(pL,{ref:o,style:{left:`calc(${d} * (100% - ${c}))`}}))}const lwe=Ne.memo(({label:n,onUpdate:e,step:t,innerLabelTrim:r})=>{const[i,s]=F.useState(!1),a=F_(({active:o,delta:[l],event:c,memo:u=0,first:d,last:h,target:p})=>(d&&p.requestPointerLock(),h&&document.exitPointerLock(),s(o),u+=l/2,Math.abs(u)>=1&&(e(g=>parseFloat(g)+Math.floor(u)*t*JY(c)),u=0),u));return Ne.createElement(USe,qs({dragging:i,title:n.length>1?n:""},a()),n.slice(0,r))});function yJ({label:n,id:e,displayValue:t,onUpdate:r,onChange:i,settings:s,innerLabelTrim:a=1}){const o=a>0&&Ne.createElement(lwe,{label:n,step:s.step,onUpdate:r,innerLabelTrim:a});return Ne.createElement(GSe,{id:e,value:String(t),onUpdate:r,onChange:i,innerLabel:o})}function cwe(){const n=sl(),{label:e,value:t,onUpdate:r,settings:i,id:s}=n,{min:a,max:o}=i,l=o!==1/0&&a!==-1/0;return Ne.createElement(Qu,{input:!0},Ne.createElement(hf,null,e),Ne.createElement(awe,{hasRange:l},l&&Ne.createElement(owe,qs({value:parseFloat(t),onDrag:r},i)),Ne.createElement(yJ,qs({},n,{id:s,label:"value",innerLabelTrim:l?0:1}))))}const{sanitizeStep:uwe}=tJ,dwe=Ki(tJ,["sanitizeStep"]);var fwe=tr({component:cwe},dwe);const hwe=(n,e)=>yc().schema({options:yc().passesAnyOf(yc().object(),yc().array())}).test(e),pwe=(n,{values:e})=>{if(e.indexOf(n)<0)throw Error("Selected value doesn't match Select options");return n},mwe=(n,{values:e})=>e.indexOf(n),gwe=n=>{let{value:e,options:t}=n,r,i;return Array.isArray(t)?(i=t,r=t.map(s=>String(s))):(i=Object.values(t),r=Object.keys(t)),"value"in n?i.includes(e)||(r.unshift(String(e)),i.unshift(e)):e=i[0],Object.values(t).includes(e)||(t[String(e)]=e),{value:e,settings:{keys:r,values:i}}};var ywe=Object.freeze({__proto__:null,schema:hwe,sanitize:pwe,format:mwe,normalize:gwe});const vwe=Wn("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),mL=Wn("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),bwe=Wn("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${mL}:focus + &`]:{$focusStyle:""},[`${mL}:hover + &`]:{$hoverStyle:""}});function xwe({displayValue:n,value:e,onUpdate:t,id:r,settings:i,disabled:s}){const{keys:a,values:o}=i,l=F.useRef();return e===o[n]&&(l.current=a[n]),Ne.createElement(vwe,null,Ne.createElement(mL,{id:r,value:n,onChange:c=>t(o[Number(c.currentTarget.value)]),disabled:s},a.map((c,u)=>Ne.createElement("option",{key:c,value:u},c))),Ne.createElement(bwe,null,l.current),Ne.createElement(y4,{toggled:!0}))}function Swe(){const{label:n,value:e,displayValue:t,onUpdate:r,id:i,disabled:s,settings:a}=sl();return Ne.createElement(Qu,{input:!0},Ne.createElement(hf,null,n),Ne.createElement(xwe,{id:i,value:e,displayValue:t,onUpdate:r,settings:a,disabled:s}))}var wwe=tr({component:Swe},ywe);const Cwe=n=>yc().string().test(n),_we=n=>{if(typeof n!="string")throw Error("Invalid string");return n},Ewe=({value:n,editable:e=!0,rows:t=!1})=>({value:n,settings:{editable:e,rows:typeof t=="number"?t:t?5:0}});var Awe=Object.freeze({__proto__:null,schema:Cwe,sanitize:_we,normalize:Ewe});const Twe=["displayValue","onUpdate","onChange","editable"],Mwe=Wn("div",{whiteSpace:"pre-wrap"});function Rwe(n){let{displayValue:e,onUpdate:t,onChange:r,editable:i=!0}=n,s=Ki(n,Twe);return i?Ne.createElement(m4,qs({value:e,onUpdate:t,onChange:r},s)):Ne.createElement(Mwe,null,e)}function Nwe(){const{label:n,settings:e,displayValue:t,onUpdate:r,onChange:i}=sl();return Ne.createElement(Qu,{input:!0},Ne.createElement(hf,null,n),Ne.createElement(Rwe,qs({displayValue:t,onUpdate:r,onChange:i},e)))}var Iwe=tr({component:Nwe},Awe);const Dwe=n=>yc().boolean().test(n),kwe=n=>{if(typeof n!="boolean")throw Error("Invalid boolean");return n};var Owe=Object.freeze({__proto__:null,schema:Dwe,sanitize:kwe});const Bwe=Wn("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function $we({value:n,onUpdate:e,id:t,disabled:r}){return Ne.createElement(Bwe,null,Ne.createElement("input",{id:t,type:"checkbox",checked:n,onChange:i=>e(i.currentTarget.checked),disabled:r}),Ne.createElement("label",{htmlFor:t},Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Ne.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function Lwe(){const{label:n,value:e,onUpdate:t,disabled:r,id:i}=sl();return Ne.createElement(Qu,{input:!0},Ne.createElement(hf,null,n),Ne.createElement($we,{value:e,onUpdate:t,id:i,disabled:r}))}var Fwe=tr({component:Lwe},Owe);const Pwe=["locked"];function Uwe({value:n,id:e,valueKey:t,settings:r,onUpdate:i,innerLabelTrim:s}){const a=F.useRef(n[t]);a.current=n[t];const o=F.useCallback(c=>i({[t]:KY({type:"NUMBER",value:a.current,settings:r},c)}),[i,r,t]),l=fJ({type:"NUMBER",value:n[t],settings:r,setValue:o});return Ne.createElement(yJ,{id:e,label:t,value:n[t],displayValue:l.displayValue,onUpdate:l.onUpdate,onChange:l.onChange,settings:r,innerLabelTrim:s})}const zwe=Wn("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function Hwe(n){let{locked:e}=n,t=Ki(n,Pwe);return Ne.createElement("svg",qs({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),e?Ne.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):Ne.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function v4({value:n,onUpdate:e,settings:t,innerLabelTrim:r}){const{id:i,setSettings:s}=sl(),{lock:a,locked:o}=t;return Ne.createElement(zwe,{withLock:a},a&&Ne.createElement(Hwe,{locked:o,onClick:()=>s({locked:!o})}),Object.keys(n).map((l,c)=>Ne.createElement(Uwe,{id:c===0?i:`${i}.${l}`,key:l,valueKey:l,value:n,settings:t[l],onUpdate:e,innerLabelTrim:r})))}const vJ=(n,e)=>{const t={};let r=0,i=1/0;Object.entries(n).forEach(([s,a])=>{t[s]=QY(tr({value:a},e[s])).settings,r=Math.max(r,t[s].step),i=Math.min(i,t[s].pad)});for(let s in t){const{step:a,min:o,max:l}=e[s]||{};!isFinite(a)&&(!isFinite(o)||!isFinite(l))&&(t[s].step=r,t[s].pad=i)}return t},Vwe=["lock"],Gwe=["value"];function Wwe(n){const e=yc().array().length(n).every.number(),t=r=>{if(!r||typeof r!="object")return!1;const i=Object.values(r);return i.length===n&&i.every(s=>isFinite(s))};return r=>e.test(r)||t(r)}function jwe(n){return Array.isArray(n)?"array":"object"}function wC(n,e,t){return jwe(n)===e?n:e==="array"?Object.values(n):_Se(n,t)}const qwe=(n,e,t)=>{const r=wC(n,"object",e.keys);for(let a in r)r[a]=ZY(r[a],e[a]);const i=Object.keys(r);let s={};if(i.length===e.keys.length)s=r;else{const a=wC(t,"object",e.keys);if(i.length===1&&e.locked){const o=i[0],l=r[o],c=a[o],u=c!==0?l/c:1;for(let d in a)d===o?s[o]=l:s[d]=a[d]*u}else s=tr(tr({},a),r)}return wC(s,e.format,e.keys)},Xwe=(n,e)=>wC(n,"object",e.keys),Kwe=n=>!!n&&("step"in n||"min"in n||"max"in n);function Ywe(n,e,t=[]){const{lock:r=!1}=e,i=Ki(e,Vwe),s=Array.isArray(n)?"array":"object",a=s==="object"?Object.keys(n):t,o=wC(n,"object",a),l=Kwe(i)?a.reduce((u,d)=>Object.assign(u,{[d]:i}),{}):i,c=vJ(o,l);return{value:s==="array"?n:o,settings:tr(tr({},c),{},{format:s,keys:a,lock:r,locked:!1})}}function bJ(n){return{schema:Wwe(n.length),normalize:e=>{let{value:t}=e,r=Ki(e,Gwe);return Ywe(t,r,n)},format:(e,t)=>Xwe(e,t),sanitize:(e,t,r)=>qwe(e,t,r)}}var Jwe={grad:.9,turn:360,rad:360/(2*Math.PI)},mp=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},Za=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t+0},Uu=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n>e?n:e},xJ=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},ZG=function(n){return{r:Uu(n.r,0,255),g:Uu(n.g,0,255),b:Uu(n.b,0,255),a:Uu(n.a)}},lB=function(n){return{r:Za(n.r),g:Za(n.g),b:Za(n.b),a:Za(n.a,3)}},Zwe=/^#([0-9a-f]{3,8})$/i,$T=function(n){var e=n.toString(16);return e.length<2?"0"+e:e},SJ=function(n){var e=n.r,t=n.g,r=n.b,i=n.a,s=Math.max(e,t,r),a=s-Math.min(e,t,r),o=a?s===e?(t-r)/a:s===t?2+(r-e)/a:4+(e-t)/a:0;return{h:60*(o<0?o+6:o),s:s?a/s*100:0,v:s/255*100,a:i}},wJ=function(n){var e=n.h,t=n.s,r=n.v,i=n.a;e=e/360*6,t/=100,r/=100;var s=Math.floor(e),a=r*(1-t),o=r*(1-(e-s)*t),l=r*(1-(1-e+s)*t),c=s%6;return{r:255*[r,o,a,a,l,r][c],g:255*[l,r,r,o,a,a][c],b:255*[a,a,l,r,r,o][c],a:i}},QG=function(n){return{h:xJ(n.h),s:Uu(n.s,0,100),l:Uu(n.l,0,100),a:Uu(n.a)}},e9=function(n){return{h:Za(n.h),s:Za(n.s),l:Za(n.l),a:Za(n.a,3)}},t9=function(n){return wJ((t=(e=n).s,{h:e.h,s:(t*=((r=e.l)<50?r:100-r)/100)>0?2*t/(r+t)*100:0,v:r+t,a:e.a}));var e,t,r},CC=function(n){return{h:(e=SJ(n)).h,s:(i=(200-(t=e.s))*(r=e.v)/100)>0&&i<200?t*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,t,r,i},Qwe=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,eCe=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,tCe=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,nCe=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,gL={string:[[function(n){var e=Zwe.exec(n);return e?(n=e[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?Za(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?Za(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var e=tCe.exec(n)||nCe.exec(n);return e?e[2]!==e[4]||e[4]!==e[6]?null:ZG({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(n){var e=Qwe.exec(n)||eCe.exec(n);if(!e)return null;var t,r,i=QG({h:(t=e[1],r=e[2],r===void 0&&(r="deg"),Number(t)*(Jwe[r]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return t9(i)},"hsl"]],object:[[function(n){var e=n.r,t=n.g,r=n.b,i=n.a,s=i===void 0?1:i;return mp(e)&&mp(t)&&mp(r)?ZG({r:Number(e),g:Number(t),b:Number(r),a:Number(s)}):null},"rgb"],[function(n){var e=n.h,t=n.s,r=n.l,i=n.a,s=i===void 0?1:i;if(!mp(e)||!mp(t)||!mp(r))return null;var a=QG({h:Number(e),s:Number(t),l:Number(r),a:Number(s)});return t9(a)},"hsl"],[function(n){var e=n.h,t=n.s,r=n.v,i=n.a,s=i===void 0?1:i;if(!mp(e)||!mp(t)||!mp(r))return null;var a=function(o){return{h:xJ(o.h),s:Uu(o.s,0,100),v:Uu(o.v,0,100),a:Uu(o.a)}}({h:Number(e),s:Number(t),v:Number(r),a:Number(s)});return wJ(a)},"hsv"]]},n9=function(n,e){for(var t=0;t<e.length;t++){var r=e[t][0](n);if(r)return[r,e[t][1]]}return[null,void 0]},CJ=function(n){return typeof n=="string"?n9(n.trim(),gL.string):typeof n=="object"&&n!==null?n9(n,gL.object):[null,void 0]},rCe=function(n){return CJ(n)[1]},cB=function(n,e){var t=CC(n);return{h:t.h,s:Uu(t.s+100*e,0,100),l:t.l,a:t.a}},uB=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},r9=function(n,e){var t=CC(n);return{h:t.h,s:t.s,l:Uu(t.l+100*e,0,100),a:t.a}},yL=function(){function n(e){this.parsed=CJ(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return Za(uB(this.rgba),2)},n.prototype.isDark=function(){return uB(this.rgba)<.5},n.prototype.isLight=function(){return uB(this.rgba)>=.5},n.prototype.toHex=function(){return e=lB(this.rgba),t=e.r,r=e.g,i=e.b,a=(s=e.a)<1?$T(Za(255*s)):"","#"+$T(t)+$T(r)+$T(i)+a;var e,t,r,i,s,a},n.prototype.toRgb=function(){return lB(this.rgba)},n.prototype.toRgbString=function(){return e=lB(this.rgba),t=e.r,r=e.g,i=e.b,(s=e.a)<1?"rgba("+t+", "+r+", "+i+", "+s+")":"rgb("+t+", "+r+", "+i+")";var e,t,r,i,s},n.prototype.toHsl=function(){return e9(CC(this.rgba))},n.prototype.toHslString=function(){return e=e9(CC(this.rgba)),t=e.h,r=e.s,i=e.l,(s=e.a)<1?"hsla("+t+", "+r+"%, "+i+"%, "+s+")":"hsl("+t+", "+r+"%, "+i+"%)";var e,t,r,i,s},n.prototype.toHsv=function(){return e=SJ(this.rgba),{h:Za(e.h),s:Za(e.s),v:Za(e.v),a:Za(e.a,3)};var e},n.prototype.invert=function(){return Nl({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},n.prototype.saturate=function(e){return e===void 0&&(e=.1),Nl(cB(this.rgba,e))},n.prototype.desaturate=function(e){return e===void 0&&(e=.1),Nl(cB(this.rgba,-e))},n.prototype.grayscale=function(){return Nl(cB(this.rgba,-1))},n.prototype.lighten=function(e){return e===void 0&&(e=.1),Nl(r9(this.rgba,e))},n.prototype.darken=function(e){return e===void 0&&(e=.1),Nl(r9(this.rgba,-e))},n.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},n.prototype.alpha=function(e){return typeof e=="number"?Nl({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):Za(this.rgba.a,3);var t},n.prototype.hue=function(e){var t=CC(this.rgba);return typeof e=="number"?Nl({h:e,s:t.s,l:t.l,a:t.a}):Za(t.h)},n.prototype.isEqual=function(e){return this.toHex()===Nl(e).toHex()},n}(),Nl=function(n){return n instanceof yL?n:new yL(n)},i9=[],iCe=function(n){n.forEach(function(e){i9.indexOf(e)<0&&(e(yL,gL),i9.push(e))})};function sCe(n,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var i in t)r[t[i]]=i;var s={};n.prototype.toName=function(a){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var o,l,c=r[this.toHex()];if(c)return c;if(a!=null&&a.closest){var u=this.toRgb(),d=1/0,h="black";if(!s.length)for(var p in t)s[p]=new n(t[p]).toRgb();for(var g in t){var v=(o=u,l=s[g],Math.pow(o.r-l.r,2)+Math.pow(o.g-l.g,2)+Math.pow(o.b-l.b,2));v<d&&(d=v,h=g)}return h}},e.string.push([function(a){var o=a.toLowerCase(),l=o==="transparent"?"#0000":t[o];return l?new n(l).toRgb():null},"name"])}function B1(){return(B1=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}).apply(this,arguments)}function b4(n,e){if(n==null)return{};var t,r,i={},s=Object.keys(n);for(r=0;r<s.length;r++)e.indexOf(t=s[r])>=0||(i[t]=n[t]);return i}function vL(n){var e=F.useRef(n),t=F.useRef(function(r){e.current&&e.current(r)});return e.current=n,t.current}var c1=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n<e?e:n},_C=function(n){return"touches"in n},bL=function(n){return n&&n.ownerDocument.defaultView||self},s9=function(n,e,t){var r=n.getBoundingClientRect(),i=_C(e)?function(s,a){for(var o=0;o<s.length;o++)if(s[o].identifier===a)return s[o];return s[0]}(e.touches,t):e;return{left:c1((i.pageX-(r.left+bL(n).pageXOffset))/r.width),top:c1((i.pageY-(r.top+bL(n).pageYOffset))/r.height)}},a9=function(n){!_C(n)&&n.preventDefault()},x4=Ne.memo(function(n){var e=n.onMove,t=n.onKey,r=b4(n,["onMove","onKey"]),i=F.useRef(null),s=vL(e),a=vL(t),o=F.useRef(null),l=F.useRef(!1),c=F.useMemo(function(){var p=function(b){a9(b),(_C(b)?b.touches.length>0:b.buttons>0)&&i.current?s(s9(i.current,b,o.current)):v(!1)},g=function(){return v(!1)};function v(b){var x=l.current,C=bL(i.current),E=b?C.addEventListener:C.removeEventListener;E(x?"touchmove":"mousemove",p),E(x?"touchend":"mouseup",g)}return[function(b){var x=b.nativeEvent,C=i.current;if(C&&(a9(x),!function(_,M){return M&&!_C(_)}(x,l.current)&&C)){if(_C(x)){l.current=!0;var E=x.changedTouches||[];E.length&&(o.current=E[0].identifier)}C.focus(),s(s9(C,x,o.current)),v(!0)}},function(b){var x=b.which||b.keyCode;x<37||x>40||(b.preventDefault(),a({left:x===39?.05:x===37?-.05:0,top:x===40?.05:x===38?-.05:0}))},v]},[a,s]),u=c[0],d=c[1],h=c[2];return F.useEffect(function(){return h},[h]),Ne.createElement("div",B1({},r,{onTouchStart:u,onMouseDown:u,className:"react-colorful__interactive",ref:i,onKeyDown:d,tabIndex:0,role:"slider"}))}),P_=function(n){return n.filter(Boolean).join(" ")},S4=function(n){var e=n.color,t=n.left,r=n.top,i=r===void 0?.5:r,s=P_(["react-colorful__pointer",n.className]);return Ne.createElement("div",{className:s,style:{top:100*i+"%",left:100*t+"%"}},Ne.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},Ll=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t},_J=function(n){var e=n.s,t=n.v,r=n.a,i=(200-e)*t/100;return{h:Ll(n.h),s:Ll(i>0&&i<200?e*t/100/(i<=100?i:200-i)*100:0),l:Ll(i/2),a:Ll(r,2)}},xL=function(n){var e=_J(n);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},dB=function(n){var e=_J(n);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},EJ=function(n){var e=n.h,t=n.s,r=n.v,i=n.a;e=e/360*6,t/=100,r/=100;var s=Math.floor(e),a=r*(1-t),o=r*(1-(e-s)*t),l=r*(1-(1-e+s)*t),c=s%6;return{r:Ll(255*[r,o,a,a,l,r][c]),g:Ll(255*[l,r,r,o,a,a][c]),b:Ll(255*[a,a,l,r,r,o][c]),a:Ll(i,2)}},AJ=function(n){var e=n.r,t=n.g,r=n.b,i=n.a,s=Math.max(e,t,r),a=s-Math.min(e,t,r),o=a?s===e?(t-r)/a:s===t?2+(r-e)/a:4+(e-t)/a:0;return{h:Ll(60*(o<0?o+6:o)),s:Ll(s?a/s*100:0),v:Ll(s/255*100),a:i}},TJ=Ne.memo(function(n){var e=n.hue,t=n.onChange,r=P_(["react-colorful__hue",n.className]);return Ne.createElement("div",{className:r},Ne.createElement(x4,{onMove:function(i){t({h:360*i.left})},onKey:function(i){t({h:c1(e+360*i.left,0,360)})},"aria-label":"Hue","aria-valuenow":Ll(e),"aria-valuemax":"360","aria-valuemin":"0"},Ne.createElement(S4,{className:"react-colorful__hue-pointer",left:e/360,color:xL({h:e,s:100,v:100,a:1})})))}),MJ=Ne.memo(function(n){var e=n.hsva,t=n.onChange,r={backgroundColor:xL({h:e.h,s:100,v:100,a:1})};return Ne.createElement("div",{className:"react-colorful__saturation",style:r},Ne.createElement(x4,{onMove:function(i){t({s:100*i.left,v:100-100*i.top})},onKey:function(i){t({s:c1(e.s+100*i.left,0,100),v:c1(e.v-100*i.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+Ll(e.s)+"%, Brightness "+Ll(e.v)+"%"},Ne.createElement(S4,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:xL(e)})))}),w4=function(n,e){if(n===e)return!0;for(var t in n)if(n[t]!==e[t])return!1;return!0};function RJ(n,e,t){var r=vL(t),i=F.useState(function(){return n.toHsva(e)}),s=i[0],a=i[1],o=F.useRef({color:e,hsva:s});F.useEffect(function(){if(!n.equal(e,o.current.color)){var c=n.toHsva(e);o.current={hsva:c,color:e},a(c)}},[e,n]),F.useEffect(function(){var c;w4(s,o.current.hsva)||n.equal(c=n.fromHsva(s),o.current.color)||(o.current={hsva:s,color:c},r(c))},[s,n,r]);var l=F.useCallback(function(c){a(function(u){return Object.assign({},u,c)})},[]);return[s,l]}var aCe=typeof window<"u"?F.useLayoutEffect:F.useEffect,oCe=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},o9=new Map,NJ=function(n){aCe(function(){var e=n.current?n.current.ownerDocument:document;if(e!==void 0&&!o9.has(e)){var t=e.createElement("style");t.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,o9.set(e,t);var r=oCe();r&&t.setAttribute("nonce",r),e.head.appendChild(t)}},[])},lCe=function(n){var e=n.className,t=n.colorModel,r=n.color,i=r===void 0?t.defaultColor:r,s=n.onChange,a=b4(n,["className","colorModel","color","onChange"]),o=F.useRef(null);NJ(o);var l=RJ(t,i,s),c=l[0],u=l[1],d=P_(["react-colorful",e]);return Ne.createElement("div",B1({},a,{ref:o,className:d}),Ne.createElement(MJ,{hsva:c,onChange:u}),Ne.createElement(TJ,{hue:c.h,onChange:u,className:"react-colorful__last-control"}))},cCe=function(n){var e=n.className,t=n.hsva,r=n.onChange,i={backgroundImage:"linear-gradient(90deg, "+dB(Object.assign({},t,{a:0}))+", "+dB(Object.assign({},t,{a:1}))+")"},s=P_(["react-colorful__alpha",e]),a=Ll(100*t.a);return Ne.createElement("div",{className:s},Ne.createElement("div",{className:"react-colorful__alpha-gradient",style:i}),Ne.createElement(x4,{onMove:function(o){r({a:o.left})},onKey:function(o){r({a:c1(t.a+o.left)})},"aria-label":"Alpha","aria-valuetext":a+"%","aria-valuenow":a,"aria-valuemin":"0","aria-valuemax":"100"},Ne.createElement(S4,{className:"react-colorful__alpha-pointer",left:t.a,color:dB(t)})))},uCe=function(n){var e=n.className,t=n.colorModel,r=n.color,i=r===void 0?t.defaultColor:r,s=n.onChange,a=b4(n,["className","colorModel","color","onChange"]),o=F.useRef(null);NJ(o);var l=RJ(t,i,s),c=l[0],u=l[1],d=P_(["react-colorful",e]);return Ne.createElement("div",B1({},a,{ref:o,className:d}),Ne.createElement(MJ,{hsva:c,onChange:u}),Ne.createElement(TJ,{hue:c.h,onChange:u}),Ne.createElement(cCe,{hsva:c,onChange:u,className:"react-colorful__last-control"}))},dCe={defaultColor:{r:0,g:0,b:0,a:1},toHsva:AJ,fromHsva:EJ,equal:w4},fCe=function(n){return Ne.createElement(uCe,B1({},n,{colorModel:dCe}))},hCe={defaultColor:{r:0,g:0,b:0},toHsva:function(n){return AJ({r:n.r,g:n.g,b:n.b,a:1})},fromHsva:function(n){return{r:(e=EJ(n)).r,g:e.g,b:e.b};var e},equal:w4},pCe=function(n){return Ne.createElement(lCe,B1({},n,{colorModel:hCe}))},fB={exports:{}},hB,l9;function mCe(){if(l9)return hB;l9=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return hB=n,hB}var pB,c9;function gCe(){if(c9)return pB;c9=1;var n=mCe();function e(){}function t(){}return t.resetWarningCache=e,pB=function(){function r(a,o,l,c,u,d){if(d!==n){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},pB}var u9;function yCe(){return u9||(u9=1,fB.exports=gCe()()),fB.exports}var vCe=yCe();const vi=qp(vCe);function $1(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(u){try{c(r.next(u))}catch(d){a(d)}}function l(u){try{c(r.throw(u))}catch(d){a(d)}}function c(u){u.done?s(u.value):i(u.value).then(o,l)}c((r=r.apply(n,e||[])).next())})}function L1(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(t=0)),t;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(n,t)}catch(u){c=[6,u],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function bCe(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return s}function xCe(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(bCe(arguments[e]));return n}var SCe=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function U_(n,e){var t=wCe(n);if(typeof t.path!="string"){var r=n.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof e=="string"?e:typeof r=="string"&&r.length>0?r:n.name,writable:!1,configurable:!1,enumerable:!0})}return t}function wCe(n){var e=n.name,t=e&&e.lastIndexOf(".")!==-1;if(t&&!n.type){var r=e.split(".").pop().toLowerCase(),i=SCe.get(r);i&&Object.defineProperty(n,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return n}var CCe=[".DS_Store","Thumbs.db"];function _Ce(n){return $1(this,void 0,void 0,function(){return L1(this,function(e){return GR(n)&&ECe(n)?[2,RCe(n.dataTransfer,n.type)]:ACe(n)?[2,TCe(n)]:Array.isArray(n)&&n.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,MCe(n)]:[2,[]]})})}function ECe(n){return GR(n.dataTransfer)}function ACe(n){return GR(n)&&GR(n.target)}function GR(n){return typeof n=="object"&&n!==null}function TCe(n){return SL(n.target.files).map(function(e){return U_(e)})}function MCe(n){return $1(this,void 0,void 0,function(){var e;return L1(this,function(t){switch(t.label){case 0:return[4,Promise.all(n.map(function(r){return r.getFile()}))];case 1:return e=t.sent(),[2,e.map(function(r){return U_(r)})]}})})}function RCe(n,e){return $1(this,void 0,void 0,function(){var t,r;return L1(this,function(i){switch(i.label){case 0:return n===null?[2,[]]:n.items?(t=SL(n.items).filter(function(s){return s.kind==="file"}),e!=="drop"?[2,t]:[4,Promise.all(t.map(NCe))]):[3,2];case 1:return r=i.sent(),[2,d9(IJ(r))];case 2:return[2,d9(SL(n.files).map(function(s){return U_(s)}))]}})})}function d9(n){return n.filter(function(e){return CCe.indexOf(e.name)===-1})}function SL(n){if(n===null)return[];for(var e=[],t=0;t<n.length;t++){var r=n[t];e.push(r)}return e}function NCe(n){if(typeof n.webkitGetAsEntry!="function")return f9(n);var e=n.webkitGetAsEntry();return e&&e.isDirectory?DJ(e):f9(n)}function IJ(n){return n.reduce(function(e,t){return xCe(e,Array.isArray(t)?IJ(t):[t])},[])}function f9(n){var e=n.getAsFile();if(!e)return Promise.reject(n+" is not a File");var t=U_(e);return Promise.resolve(t)}function ICe(n){return $1(this,void 0,void 0,function(){return L1(this,function(e){return[2,n.isDirectory?DJ(n):DCe(n)]})})}function DJ(n){var e=n.createReader();return new Promise(function(t,r){var i=[];function s(){var a=this;e.readEntries(function(o){return $1(a,void 0,void 0,function(){var l,c,u;return L1(this,function(d){switch(d.label){case 0:if(o.length)return[3,5];d.label=1;case 1:return d.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return l=d.sent(),t(l),[3,4];case 3:return c=d.sent(),r(c),[3,4];case 4:return[3,6];case 5:u=Promise.all(o.map(ICe)),i.push(u),s(),d.label=6;case 6:return[2]}})})},function(o){r(o)})}s()})}function DCe(n){return $1(this,void 0,void 0,function(){return L1(this,function(e){return[2,new Promise(function(t,r){n.file(function(i){var s=U_(i,n.fullPath);t(s)},function(i){r(i)})})]})})}var LT={},h9;function kCe(){return h9||(h9=1,LT.__esModule=!0,LT.default=function(n,e){if(n&&e){var t=Array.isArray(e)?e:e.split(",");if(t.length===0)return!0;var r=n.name||"",i=(n.type||"").toLowerCase(),s=i.replace(/\/.*$/,"");return t.some(function(a){var o=a.trim().toLowerCase();return o.charAt(0)==="."?r.toLowerCase().endsWith(o):o.endsWith("/*")?s===o.replace(/\/.*$/,""):i===o})}return!0}),LT}var OCe=kCe();const BCe=qp(OCe);function p9(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function m9(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?p9(Object(t),!0).forEach(function(r){kJ(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):p9(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function kJ(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function g9(n,e){return PCe(n)||FCe(n,e)||LCe(n,e)||$Ce()}function $Ce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LCe(n,e){if(n){if(typeof n=="string")return y9(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return y9(n,e)}}function y9(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function FCe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,s=!1,a,o;try{for(t=t.call(n);!(i=(a=t.next()).done)&&(r.push(a.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,o=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}return r}}function PCe(n){if(Array.isArray(n))return n}var UCe="file-invalid-type",zCe="file-too-large",HCe="file-too-small",VCe="too-many-files",GCe=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:UCe,message:"File type must be ".concat(t)}},v9=function(e){return{code:zCe,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},b9=function(e){return{code:HCe,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},WCe={code:VCe,message:"Too many files"};function OJ(n,e){var t=n.type==="application/x-moz-file"||BCe(n,e);return[t,t?null:GCe(e)]}function BJ(n,e,t){if(Bw(n.size))if(Bw(e)&&Bw(t)){if(n.size>t)return[!1,v9(t)];if(n.size<e)return[!1,b9(e)]}else{if(Bw(e)&&n.size<e)return[!1,b9(e)];if(Bw(t)&&n.size>t)return[!1,v9(t)]}return[!0,null]}function Bw(n){return n!=null}function jCe(n){var e=n.files,t=n.accept,r=n.minSize,i=n.maxSize,s=n.multiple,a=n.maxFiles;return!s&&e.length>1||s&&a>=1&&e.length>a?!1:e.every(function(o){var l=OJ(o,t),c=g9(l,1),u=c[0],d=BJ(o,r,i),h=g9(d,1),p=h[0];return u&&p})}function WR(n){return typeof n.isPropagationStopped=="function"?n.isPropagationStopped():typeof n.cancelBubble<"u"?n.cancelBubble:!1}function FT(n){return n.dataTransfer?Array.prototype.some.call(n.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!n.target&&!!n.target.files}function x9(n){n.preventDefault()}function qCe(n){return n.indexOf("MSIE")!==-1||n.indexOf("Trident/")!==-1}function XCe(n){return n.indexOf("Edge/")!==-1}function KCe(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return qCe(n)||XCe(n)}function Yf(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),a=1;a<i;a++)s[a-1]=arguments[a];return e.some(function(o){return!WR(r)&&o&&o.apply(void 0,[r].concat(s)),WR(r)})}}function YCe(){return"showOpenFilePicker"in window}function JCe(n){return n=typeof n=="string"?n.split(","):n,[{description:"everything",accept:Array.isArray(n)?n.filter(function(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}).reduce(function(e,t){return m9(m9({},e),{},kJ({},t,[]))},{}):{}}]}function ZCe(n){return n instanceof DOMException&&(n.name==="AbortError"||n.code===n.ABORT_ERR)}function QCe(n){return n instanceof DOMException&&(n.name==="SecurityError"||n.code===n.SECURITY_ERR)}var e_e=["children"],t_e=["open"],n_e=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],r_e=["refKey","onChange","onClick"];function i_e(n){return o_e(n)||a_e(n)||$J(n)||s_e()}function s_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a_e(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function o_e(n){if(Array.isArray(n))return wL(n)}function mB(n,e){return u_e(n)||c_e(n,e)||$J(n,e)||l_e()}function l_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $J(n,e){if(n){if(typeof n=="string")return wL(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return wL(n,e)}}function wL(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function c_e(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,s=!1,a,o;try{for(t=t.call(n);!(i=(a=t.next()).done)&&(r.push(a.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,o=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}return r}}function u_e(n){if(Array.isArray(n))return n}function S9(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ms(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?S9(Object(t),!0).forEach(function(r){CL(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):S9(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function CL(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function jR(n,e){if(n==null)return{};var t=d_e(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function d_e(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}var C4=F.forwardRef(function(n,e){var t=n.children,r=jR(n,e_e),i=FJ(r),s=i.open,a=jR(i,t_e);return F.useImperativeHandle(e,function(){return{open:s}},[s]),Ne.createElement(F.Fragment,null,t(Ms(Ms({},a),{},{open:s})))});C4.displayName="Dropzone";var LJ={disabled:!1,getFilesFromEvent:_Ce,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};C4.defaultProps=LJ;C4.propTypes={children:vi.func,accept:vi.oneOfType([vi.string,vi.arrayOf(vi.string)]),multiple:vi.bool,preventDropOnDocument:vi.bool,noClick:vi.bool,noKeyboard:vi.bool,noDrag:vi.bool,noDragEventsBubbling:vi.bool,minSize:vi.number,maxSize:vi.number,maxFiles:vi.number,disabled:vi.bool,getFilesFromEvent:vi.func,onFileDialogCancel:vi.func,onFileDialogOpen:vi.func,useFsAccessApi:vi.bool,onDragEnter:vi.func,onDragLeave:vi.func,onDragOver:vi.func,onDrop:vi.func,onDropAccepted:vi.func,onDropRejected:vi.func,validator:vi.func};var _L={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function FJ(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=Ms(Ms({},LJ),n),t=e.accept,r=e.disabled,i=e.getFilesFromEvent,s=e.maxSize,a=e.minSize,o=e.multiple,l=e.maxFiles,c=e.onDragEnter,u=e.onDragLeave,d=e.onDragOver,h=e.onDrop,p=e.onDropAccepted,g=e.onDropRejected,v=e.onFileDialogCancel,b=e.onFileDialogOpen,x=e.useFsAccessApi,C=e.preventDropOnDocument,E=e.noClick,_=e.noKeyboard,M=e.noDrag,R=e.noDragEventsBubbling,L=e.validator,$=F.useMemo(function(){return typeof b=="function"?b:w9},[b]),N=F.useMemo(function(){return typeof v=="function"?v:w9},[v]),I=F.useRef(null),k=F.useRef(null),P=F.useReducer(f_e,_L),G=mB(P,2),W=G[0],X=G[1],z=W.isFocused,J=W.isFileDialogActive,Q=W.draggedFiles,Y=F.useRef(typeof window<"u"&&window.isSecureContext&&x&&YCe()),q=function(){!Y.current&&J&&setTimeout(function(){if(k.current){var re=k.current.files;re.length||(X({type:"closeDialog"}),N())}},300)};F.useEffect(function(){return window.addEventListener("focus",q,!1),function(){window.removeEventListener("focus",q,!1)}},[k,J,N,Y]);var te=F.useRef([]),ne=function(re){I.current&&I.current.contains(re.target)||(re.preventDefault(),te.current=[])};F.useEffect(function(){return C&&(document.addEventListener("dragover",x9,!1),document.addEventListener("drop",ne,!1)),function(){C&&(document.removeEventListener("dragover",x9),document.removeEventListener("drop",ne))}},[I,C]);var le=F.useCallback(function(ce){ce.preventDefault(),ce.persist(),Ze(ce),te.current=[].concat(i_e(te.current),[ce.target]),FT(ce)&&Promise.resolve(i(ce)).then(function(re){WR(ce)&&!R||(X({draggedFiles:re,isDragActive:!0,type:"setDraggedFiles"}),c&&c(ce))})},[i,c,R]),ye=F.useCallback(function(ce){ce.preventDefault(),ce.persist(),Ze(ce);var re=FT(ce);if(re&&ce.dataTransfer)try{ce.dataTransfer.dropEffect="copy"}catch{}return re&&d&&d(ce),!1},[d,R]),ue=F.useCallback(function(ce){ce.preventDefault(),ce.persist(),Ze(ce);var re=te.current.filter(function(Xe){return I.current&&I.current.contains(Xe)}),$e=re.indexOf(ce.target);$e!==-1&&re.splice($e,1),te.current=re,!(re.length>0)&&(X({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),FT(ce)&&u&&u(ce))},[I,u,R]),ve=F.useCallback(function(ce,re){var $e=[],Xe=[];ce.forEach(function(at){var et=OJ(at,t),Ft=mB(et,2),At=Ft[0],_t=Ft[1],Xt=BJ(at,a,s),yt=mB(Xt,2),Mt=yt[0],an=yt[1],tn=L?L(at):null;if(At&&Mt&&!tn)$e.push(at);else{var zt=[_t,an];tn&&(zt=zt.concat(tn)),Xe.push({file:at,errors:zt.filter(function(hn){return hn})})}}),(!o&&$e.length>1||o&&l>=1&&$e.length>l)&&($e.forEach(function(at){Xe.push({file:at,errors:[WCe]})}),$e.splice(0)),X({acceptedFiles:$e,fileRejections:Xe,type:"setFiles"}),h&&h($e,Xe,re),Xe.length>0&&g&&g(Xe,re),$e.length>0&&p&&p($e,re)},[X,o,t,a,s,l,h,p,g,L]),xe=F.useCallback(function(ce){ce.preventDefault(),ce.persist(),Ze(ce),te.current=[],FT(ce)&&Promise.resolve(i(ce)).then(function(re){WR(ce)&&!R||ve(re,ce)}),X({type:"reset"})},[i,ve,R]),Pe=F.useCallback(function(){if(Y.current){X({type:"openDialog"}),$();var ce={multiple:o,types:JCe(t)};window.showOpenFilePicker(ce).then(function(re){return i(re)}).then(function(re){ve(re,null),X({type:"closeDialog"})}).catch(function(re){ZCe(re)?(N(re),X({type:"closeDialog"})):QCe(re)&&(Y.current=!1,k.current&&(k.current.value=null,k.current.click()))});return}k.current&&(X({type:"openDialog"}),$(),k.current.value=null,k.current.click())},[X,$,N,x,ve,t,o]),ze=F.useCallback(function(ce){!I.current||!I.current.isEqualNode(ce.target)||(ce.key===" "||ce.key==="Enter"||ce.keyCode===32||ce.keyCode===13)&&(ce.preventDefault(),Pe())},[I,Pe]),Ke=F.useCallback(function(){X({type:"focus"})},[]),pt=F.useCallback(function(){X({type:"blur"})},[]),dt=F.useCallback(function(){E||(KCe()?setTimeout(Pe,0):Pe())},[E,Pe]),pe=function(re){return r?null:re},Le=function(re){return _?null:pe(re)},Ue=function(re){return M?null:pe(re)},Ze=function(re){R&&re.stopPropagation()},je=F.useMemo(function(){return function(){var ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},re=ce.refKey,$e=re===void 0?"ref":re,Xe=ce.role,at=ce.onKeyDown,et=ce.onFocus,Ft=ce.onBlur,At=ce.onClick,_t=ce.onDragEnter,Xt=ce.onDragOver,yt=ce.onDragLeave,Mt=ce.onDrop,an=jR(ce,n_e);return Ms(Ms(CL({onKeyDown:Le(Yf(at,ze)),onFocus:Le(Yf(et,Ke)),onBlur:Le(Yf(Ft,pt)),onClick:pe(Yf(At,dt)),onDragEnter:Ue(Yf(_t,le)),onDragOver:Ue(Yf(Xt,ye)),onDragLeave:Ue(Yf(yt,ue)),onDrop:Ue(Yf(Mt,xe)),role:typeof Xe=="string"&&Xe!==""?Xe:"button"},$e,I),!r&&!_?{tabIndex:0}:{}),an)}},[I,ze,Ke,pt,dt,le,ye,ue,xe,_,M,r]),lt=F.useCallback(function(ce){ce.stopPropagation()},[]),st=F.useMemo(function(){return function(){var ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},re=ce.refKey,$e=re===void 0?"ref":re,Xe=ce.onChange,at=ce.onClick,et=jR(ce,r_e),Ft=CL({accept:t,multiple:o,type:"file",style:{display:"none"},onChange:pe(Yf(Xe,xe)),onClick:pe(Yf(at,lt)),tabIndex:-1},$e,k);return Ms(Ms({},Ft),et)}},[k,t,o,xe,r]),ot=Q.length,Ut=ot>0&&jCe({files:Q,accept:t,minSize:a,maxSize:s,multiple:o,maxFiles:l}),mt=ot>0&&!Ut;return Ms(Ms({},W),{},{isDragAccept:Ut,isDragReject:mt,isFocused:z&&!r,getRootProps:je,getInputProps:st,rootRef:I,inputRef:k,open:pe(Pe)})}function f_e(n,e){switch(e.type){case"focus":return Ms(Ms({},n),{},{isFocused:!0});case"blur":return Ms(Ms({},n),{},{isFocused:!1});case"openDialog":return Ms(Ms({},_L),{},{isFileDialogActive:!0});case"closeDialog":return Ms(Ms({},n),{},{isFileDialogActive:!1});case"setDraggedFiles":var t=e.isDragActive,r=e.draggedFiles;return Ms(Ms({},n),{},{draggedFiles:r,isDragActive:t});case"setFiles":return Ms(Ms({},n),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return Ms({},_L);default:return n}}function w9(){}function h_e(n){let e;const t=new Set,r=(c,u)=>{const d=typeof c=="function"?c(e):c;if(d!==e){const h=e;e=u?d:Object.assign({},e,d),t.forEach(p=>p(e,h))}},i=()=>e,s=(c,u=i,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let h=u(e);function p(){const g=u(e);if(!d(h,g)){const v=h;c(h=g,v)}}return t.add(p),()=>t.delete(p)},l={setState:r,getState:i,subscribe:(c,u,d)=>u||d?s(c,u,d):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=n(r,i,l),l}const p_e=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),C9=p_e?F.useEffect:F.useLayoutEffect;function m_e(n){const e=typeof n=="function"?h_e(n):n,t=(r=e.getState,i=Object.is)=>{const[,s]=F.useReducer(b=>b+1,0),a=e.getState(),o=F.useRef(a),l=F.useRef(r),c=F.useRef(i),u=F.useRef(!1),d=F.useRef();d.current===void 0&&(d.current=r(a));let h,p=!1;(o.current!==a||l.current!==r||c.current!==i||u.current)&&(h=r(a),p=!i(d.current,h)),C9(()=>{p&&(d.current=h),o.current=a,l.current=r,c.current=i,u.current=!1});const g=F.useRef(a);C9(()=>{const b=()=>{try{const C=e.getState(),E=l.current(C);c.current(d.current,E)||(o.current=C,d.current=E,s())}catch{u.current=!0,s()}},x=e.subscribe(b);return e.getState()!==g.current&&b(),x},[]);const v=p?h:d.current;return F.useDebugValue(v),v};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}const g_e=n=>(e,t,r)=>{const i=r.subscribe;return r.subscribe=(a,o,l)=>{let c=a;if(o){const u=(l==null?void 0:l.equalityFn)||Object.is;let d=a(r.getState());c=h=>{const p=a(h);if(!u(d,p)){const g=d;o(d=p,g)}},l!=null&&l.fireImmediately&&o(d,d)}return i(c)},n(e,t,r)};/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var gB,_9;function y_e(){return _9||(_9=1,gB=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1}),gB}/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var yB,E9;function PJ(){if(E9)return yB;E9=1;var n=y_e();function e(t){return n(t)===!0&&Object.prototype.toString.call(t)==="[object Object]"}return yB=function(r){var i,s;return!(e(r)===!1||(i=r.constructor,typeof i!="function")||(s=i.prototype,e(s)===!1)||s.hasOwnProperty("isPrototypeOf")===!1)},yB}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var vB,A9;function _4(){if(A9)return vB;A9=1;var n=PJ();return vB=function(t){return n(t)||typeof t=="function"||Array.isArray(t)},vB}/*!
 * for-in <https://github.com/jonschlinkert/for-in>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var bB,T9;function v_e(){return T9||(T9=1,bB=function(e,t,r){for(var i in e)if(t.call(r,e[i],i,e)===!1)break}),bB}var xB,M9;function b_e(){if(M9)return xB;M9=1;var n=_4(),e=v_e();function t(a,o){for(var l=arguments.length,c=0;++c<l;){var u=arguments[c];i(u)&&e(u,r,a)}return a}function r(a,o){if(s(o)){var l=this[o];i(a)&&i(l)?t(l,a):this[o]=a}}function i(a){return n(a)&&!Array.isArray(a)}function s(a){return a!=="__proto__"&&a!=="constructor"&&a!=="prototype"}return xB=t,xB}/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var SB,R9;function x_e(){if(R9)return SB;R9=1,SB=function(t,r,i,s,a){if(!n(t)||!r)return t;if(r=e(r),i&&(r+="."+e(i)),s&&(r+="."+e(s)),a&&(r+="."+e(a)),r in t)return t[r];for(var o=r.split("."),l=o.length,c=-1;t&&++c<l;){for(var u=o[c];u[u.length-1]==="\\";)u=u.slice(0,-1)+"."+o[++c];t=t[u]}return t};function n(t){return t!==null&&(typeof t=="object"||typeof t=="function")}function e(t){return t?Array.isArray(t)?t.join("."):t:""}return SB}/*!
 * assign-symbols <https://github.com/jonschlinkert/assign-symbols>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var wB,N9;function S_e(){return N9||(N9=1,wB=function(n,e){if(n===null||typeof n>"u")throw new TypeError("expected first argument to be an object.");if(typeof e>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return n;for(var t=Object.prototype.propertyIsEnumerable,r=Object(n),i=arguments.length,s=0;++s<i;)for(var a=Object(arguments[s]),o=Object.getOwnPropertySymbols(a),l=0;l<o.length;l++){var c=o[l];t.call(a,c)&&(r[c]=a[c])}return r}),wB}var CB,I9;function w_e(){if(I9)return CB;I9=1;var n=_4(),e=S_e();CB=Object.assign||function(o){if(o===null||typeof o>"u")throw new TypeError("Cannot convert undefined or null to object");s(o)||(o={});for(var l=1;l<arguments.length;l++){var c=arguments[l];r(c)&&(c=i(c)),s(c)&&(t(o,c),e(o,c))}return o};function t(o,l){for(var c in l)a(l,c)&&(o[c]=l[c])}function r(o){return o&&typeof o=="string"}function i(o){var l={};for(var c in o)l[c]=o[c];return l}function s(o){return o&&typeof o=="object"||n(o)}function a(o,l){return Object.prototype.hasOwnProperty.call(o,l)}return CB}/*!
 * split-string <https://github.com/jonschlinkert/split-string>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var _B,D9;function C_e(){if(D9)return _B;D9=1;var n=w_e();_B=function(i,s,a){if(typeof i!="string")throw new TypeError("expected a string");typeof s=="function"&&(a=s,s=null),typeof s=="string"&&(s={sep:s});var o=n({sep:"."},s),l=o.quotes||['"',"'","`"],c;o.brackets===!0?c={"<":">","(":")","[":"]","{":"}"}:o.brackets&&(c=o.brackets);var u=[],d=[],h=[""],p=o.sep,g=i.length,v=-1,b;function x(){if(c&&d.length)return c[d[d.length-1]]}for(;++v<g;){var C=i[v],E=i[v+1],_={val:C,idx:v,arr:h,str:i};if(u.push(_),C==="\\"){_.val=r(o,i,v)===!0?C+E:E,_.escaped=!0,typeof a=="function"&&a(_),h[h.length-1]+=_.val,v++;continue}if(c&&c[C]){d.push(C);var M=x(),R=v+1;if(i.indexOf(M,R+1)!==-1)for(;d.length&&R<g;){var L=i[++R];if(L==="\\"){L++;continue}if(l.indexOf(L)!==-1){R=e(i,L,R+1);continue}if(M=x(),d.length&&i.indexOf(M,R+1)===-1)break;if(c[L]){d.push(L);continue}M===L&&d.pop()}if(b=R,b===-1){h[h.length-1]+=C;continue}C=i.slice(v,b+1),_.val=C,_.idx=v=b}if(l.indexOf(C)!==-1){if(b=e(i,C,v+1),b===-1){h[h.length-1]+=C;continue}t(C,o)===!0?C=i.slice(v,b+1):C=i.slice(v+1,b),_.val=C,_.idx=v=b}if(typeof a=="function"&&(a(_,u),C=_.val,v=_.idx),_.val===p&&_.split!==!1){h.push("");continue}h[h.length-1]+=_.val}return h};function e(i,s,a,o){var l=i.indexOf(s,a);return i.charAt(l-1)==="\\"?e(i,s,l+1):l}function t(i,s){return s.keepDoubleQuotes===!0&&i==='"'||s.keepSingleQuotes===!0&&i==="'"?!0:s.keepQuotes}function r(i,s,a){return typeof i.keepEscaping=="function"?i.keepEscaping(s,a):i.keepEscaping===!0||s[a+1]==="\\"}return _B}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var EB,k9;function __e(){return k9||(k9=1,EB=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")}),EB}var AB,O9;function E_e(){if(O9)return AB;O9=1;var n=__e();AB=function(i){n(i)||(i={});for(var s=arguments.length,a=1;a<s;a++){var o=arguments[a];n(o)&&e(i,o)}return i};function e(r,i){for(var s in i)t(i,s)&&(r[s]=i[s])}function t(r,i){return Object.prototype.hasOwnProperty.call(r,i)}return AB}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var TB,B9;function A_e(){return B9||(B9=1,TB=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")}),TB}/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var MB,$9;function T_e(){if($9)return MB;$9=1;var n=C_e(),e=E_e(),t=PJ(),r=A_e();MB=function(s,a,o){if(!r(s)||(Array.isArray(a)&&(a=[].concat.apply([],a).join(".")),typeof a!="string"))return s;for(var l=n(a,{sep:".",brackets:!0}).filter(i),c=l.length,u=-1,d=s;++u<c;){var h=l[u];if(u!==c-1){r(d[h])||(d[h]={}),d=d[h];continue}t(d[h])&&t(o)?d[h]=e({},d[h],o):d[h]=o}return s};function i(s){return s!=="__proto__"&&s!=="constructor"&&s!=="prototype"}return MB}var RB,L9;function M_e(){if(L9)return RB;L9=1;var n=_4(),e=b_e(),t=x_e(),r=T_e();return RB=function(s,a,o){if(!n(s))throw new TypeError("expected an object");if(typeof a!="string"||o==null)return e.apply(null,arguments);if(typeof o=="string")return r(s,a,o),s;var l=t(s,a);return n(o)&&n(l)&&(o=e({},l,o)),r(s,a,o),s},RB}var R_e=M_e();const N_e=qp(R_e),E4=(...n)=>n.filter(Boolean).join(".");function I_e(n){const e=n.split(".");return[e.pop(),e.join(".")||void 0]}function D_e(n,e){return Object.entries(wSe(n,e)).reduce((t,[,{value:r,disabled:i,key:s}])=>(t[s]=i?void 0:r,t),{})}function k_e(n,e){const t=F.useRef();return HC(n,t.current)||(t.current=n),t.current}function UJ(n,e){return F.useMemo(n,k_e(e))}function O_e(n){const e=F.useRef(null),t=F.useRef(null),r=F.useRef(!0);return F.useLayoutEffect(()=>{n||(e.current.style.height="0px",e.current.style.overflow="hidden")},[]),F.useEffect(()=>{if(r.current){r.current=!1;return}let i;const s=e.current,a=()=>{n&&(s.style.removeProperty("height"),s.style.removeProperty("overflow"),t.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};s.addEventListener("transitionend",a,{once:!0});const{height:o}=t.current.getBoundingClientRect();return s.style.height=o+"px",n||(s.style.overflow="hidden",i=window.setTimeout(()=>s.style.height="0px",50)),()=>{s.removeEventListener("transitionend",a),clearTimeout(i)}},[n]),{wrapperRef:e,contentRef:t}}const B_e=n=>{const[e,t]=F.useState(n.getVisiblePaths());return F.useEffect(()=>{t(n.getVisiblePaths());const r=n.useStore.subscribe(n.getVisiblePaths,t,{equalityFn:AI});return()=>r()},[n]),e};function $_e(n,e,t){return n.useStore(i=>{const s=tr(tr({},t),i.data);return D_e(s,e)},AI)}function zJ(n=3){const e=F.useRef(null),t=F.useRef(null),[r,i]=F.useState(!1),s=F.useCallback(()=>i(!0),[]),a=F.useCallback(()=>i(!1),[]);return F.useLayoutEffect(()=>{if(r){const{bottom:o,top:l,left:c}=e.current.getBoundingClientRect(),{height:u}=t.current.getBoundingClientRect(),d=o+u>window.innerHeight-40?"up":"down";t.current.style.position="fixed",t.current.style.zIndex="10000",t.current.style.left=c+"px",d==="down"?t.current.style.top=o+n+"px":t.current.style.bottom=window.innerHeight-l+n+"px"}},[n,r]),{popinRef:e,wrapperRef:t,shown:r,show:s,hide:a}}iCe([sCe]);const L_e={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};yc.extend({color:()=>n=>Nl(n).isValid()});const F_e=n=>yc().color().test(n);function HJ(n,{format:e,hasAlpha:t,isString:r}){const i=L_e[e]+(r&&e!=="hex"?"String":""),s=n[i]();return typeof s=="object"&&!t?CSe(s,["a"]):s}const VJ=(n,e)=>{const t=Nl(n);if(!t.isValid())throw Error("Invalid color");return HJ(t,e)},P_e=(n,e)=>HJ(Nl(n),tr(tr({},e),{},{isString:!0,format:"hex"})),U_e=({value:n})=>{const e=rCe(n),t=e==="name"?"hex":e,r=typeof n=="object"?"a"in n:e==="hex"&&n.length===8||/^(rgba)|(hsla)|(hsva)/.test(n),i={format:t,hasAlpha:r,isString:typeof n=="string"};return{value:VJ(n,i),settings:i}};var z_e=Object.freeze({__proto__:null,schema:F_e,sanitize:VJ,format:P_e,normalize:U_e});const H_e=Wn("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),V_e=Wn("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),G_e=Wn("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function F9(n,e){return e!=="rgb"?Nl(n).toRgb():n}function W_e({value:n,displayValue:e,settings:t,onUpdate:r}){const{emitOnEditStart:i,emitOnEditEnd:s}=sl(),{format:a,hasAlpha:o}=t,{popinRef:l,wrapperRef:c,shown:u,show:d,hide:h}=zJ(),p=F.useRef(0),[g,v]=F.useState(()=>F9(n,a)),b=o?fCe:pCe,x=()=>{v(F9(n,a)),d(),i()},C=()=>{h(),s(),window.clearTimeout(p.current)},E=()=>{p.current=window.setTimeout(C,500)};return F.useEffect(()=>()=>window.clearTimeout(p.current),[]),Ne.createElement(Ne.Fragment,null,Ne.createElement(H_e,{ref:l,active:u,onClick:()=>x(),style:{color:e}}),u&&Ne.createElement(g4,null,Ne.createElement(dJ,{onPointerUp:C}),Ne.createElement(G_e,{ref:c,onMouseEnter:()=>window.clearTimeout(p.current),onMouseLeave:_=>_.buttons===0&&E()},Ne.createElement(b,{color:g,onChange:r}))))}function j_e(){const{value:n,displayValue:e,label:t,onChange:r,onUpdate:i,settings:s}=sl();return Ne.createElement(Qu,{input:!0},Ne.createElement(hf,null,t),Ne.createElement(V_e,null,Ne.createElement(W_e,{value:n,displayValue:e,onChange:r,onUpdate:i,settings:s}),Ne.createElement(m4,{value:e,onChange:r,onUpdate:i})))}var q_e=tr({component:j_e},z_e);function X_e(){const{label:n,displayValue:e,onUpdate:t,settings:r}=sl();return Ne.createElement(Qu,{input:!0},Ne.createElement(hf,null,n),Ne.createElement(v4,{value:e,settings:r,onUpdate:t}))}var K_e=tr({component:X_e},bJ(["x","y","z"]));const Y_e=Wn("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),J_e=Wn("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function Z_e({value:n,settings:e,onUpdate:t}){const r=F.useRef(),i=F.useRef(0),s=F.useRef(0),a=F.useRef(1),[o,l]=F.useState(!1),[c,u]=F.useState(!1),[d,h]=hJ(),p=F.useRef(null),g=F.useRef(null);F.useLayoutEffect(()=>{if(o){const{top:P,left:G,width:W,height:X}=p.current.getBoundingClientRect();g.current.style.left=G+W/2+"px",g.current.style.top=P+X/2+"px"}},[o]);const{keys:[v,b],joystick:x}=e,C=x==="invertY"?1:-1,{[v]:{step:E},[b]:{step:_}}=e,M=kp("sizes","joystickWidth"),R=kp("sizes","joystickHeight"),L=parseFloat(M)*.8/2,$=parseFloat(R)*.8/2,N=F.useCallback(()=>{r.current||(u(!0),i.current&&h({x:i.current*L}),s.current&&h({y:s.current*-$}),r.current=window.setInterval(()=>{t(P=>{const G=E*i.current*a.current,W=C*_*s.current*a.current;return Array.isArray(P)?{[v]:P[0]+G,[b]:P[1]+W}:{[v]:P[v]+G,[b]:P[b]+W}})},16))},[L,$,t,h,E,_,v,b,C]),I=F.useCallback(()=>{window.clearTimeout(r.current),r.current=void 0,u(!1)},[]);F.useEffect(()=>{function P(G){a.current=JY(G)}return window.addEventListener("keydown",P),window.addEventListener("keyup",P),()=>{window.clearTimeout(r.current),window.removeEventListener("keydown",P),window.removeEventListener("keyup",P)}},[]);const k=F_(({first:P,active:G,delta:[W,X],movement:[z,J]})=>{P&&l(!0);const Q=_g(z,-L,L),Y=_g(J,-$,$);i.current=Math.abs(z)>Math.abs(Q)?Math.sign(z-Q):0,s.current=Math.abs(J)>Math.abs(Y)?Math.sign(Y-J):0;let q=n[v],te=n[b];G?(i.current||(q+=W*E*a.current,h({x:Q})),s.current||(te-=C*X*_*a.current,h({y:Y})),i.current||s.current?N():I(),t({[v]:q,[b]:te})):(l(!1),i.current=0,s.current=0,h({x:0,y:0}),I())});return Ne.createElement(Y_e,qs({ref:p},k()),o&&Ne.createElement(g4,null,Ne.createElement(J_e,{ref:g,isOutOfBounds:c},Ne.createElement("div",null),Ne.createElement("span",{ref:d}))))}const Q_e=Wn("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function eEe(){const{label:n,displayValue:e,onUpdate:t,settings:r}=sl();return Ne.createElement(Qu,{input:!0},Ne.createElement(hf,null,n),Ne.createElement(Q_e,{withJoystick:!!r.joystick},r.joystick&&Ne.createElement(Z_e,{value:e,settings:r,onUpdate:t}),Ne.createElement(v4,{value:e,settings:r,onUpdate:t})))}const tEe=["joystick"],GJ=bJ(["x","y"]),nEe=n=>{let{joystick:e=!0}=n,t=Ki(n,tEe);const{value:r,settings:i}=GJ.normalize(t);return{value:r,settings:tr(tr({},i),{},{joystick:e})}};var rEe=tr(tr({component:eEe},GJ),{},{normalize:nEe});const iEe=n=>{if(n!==void 0){if(n instanceof File)try{return URL.createObjectURL(n)}catch{return}if(typeof n=="string"&&n.indexOf("blob:")===0)return n;throw Error("Invalid image format [undefined | blob |File].")}},sEe=(n,e)=>typeof e=="object"&&"image"in e,aEe=({image:n})=>({value:n});var oEe=Object.freeze({__proto__:null,sanitize:iEe,schema:sEe,normalize:aEe});const lEe=Wn("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),cEe=Wn("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),uEe=Wn("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),dEe=Wn("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),fEe=Wn("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),hEe=Wn("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function pEe(){const{label:n,value:e,onUpdate:t,disabled:r}=sl(),{popinRef:i,wrapperRef:s,shown:a,show:o,hide:l}=zJ(),c=F.useCallback(g=>{g.length&&t(g[0])},[t]),u=F.useCallback(g=>{g.stopPropagation(),t(void 0)},[t]),{getRootProps:d,getInputProps:h,isDragAccept:p}=FJ({maxFiles:1,accept:"image/*",onDrop:c,disabled:r});return Ne.createElement(Qu,{input:!0},Ne.createElement(hf,null,n),Ne.createElement(lEe,null,Ne.createElement(uEe,{ref:i,hasImage:!!e,onPointerDown:()=>!!e&&o(),onPointerUp:l,style:{backgroundImage:e?`url(${e})`:"none"}}),a&&!!e&&Ne.createElement(g4,null,Ne.createElement(dJ,{onPointerUp:l,style:{cursor:"pointer"}}),Ne.createElement(dEe,{ref:s,style:{backgroundImage:`url(${e})`}})),Ne.createElement(cEe,d({isDragAccept:p}),Ne.createElement("input",h()),Ne.createElement(fEe,null,p?"drop image":"click or drop")),Ne.createElement(hEe,{onClick:u,disabled:!e})))}var mEe=tr({component:pEe},oEe);const P9=yc().number(),gEe=(n,e)=>yc().array().length(2).every.number().test(n)&&yc().schema({min:P9,max:P9}).test(e),qR=n=>({min:n[0],max:n[1]}),WJ=(n,{bounds:[e,t]},r)=>{const i=Array.isArray(n)?qR(n):n,s={min:r[0],max:r[1]},{min:a,max:o}=tr(tr({},s),i);return[_g(Number(a),e,Math.max(e,o)),_g(Number(o),Math.min(t,a),t)]},yEe=({value:n,min:e,max:t})=>{const r={min:e,max:t},i=vJ(qR(n),{min:r,max:r}),s=[e,t],a=tr(tr({},i),{},{bounds:s});return{value:WJ(qR(n),a,n),settings:a}};var vEe=Object.freeze({__proto__:null,schema:gEe,format:qR,sanitize:WJ,normalize:yEe});const bEe=["value","bounds","onDrag"],xEe=["bounds"],SEe=Wn("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function wEe(n){let{value:e,bounds:[t,r],onDrag:i}=n,s=Ki(n,bEe);const a=F.useRef(null),o=F.useRef(null),l=F.useRef(null),c=F.useRef(0),u=kp("sizes","scrubberWidth"),d=F_(({event:g,first:v,xy:[b],movement:[x],memo:C={}})=>{if(v){const{width:_,left:M}=a.current.getBoundingClientRect();c.current=_-parseFloat(u);const R=(g==null?void 0:g.target)===o.current||(g==null?void 0:g.target)===l.current;C.pos=HR((b-M)/_,t,r);const L=Math.abs(C.pos-e.min)-Math.abs(C.pos-e.max);C.key=L<0||L===0&&C.pos<=e.min?"min":"max",R&&(C.pos=e[C.key])}const E=C.pos+HR(x/c.current,0,r-t);return i({[C.key]:uwe(E,s[C.key])}),C}),h=`calc(${zR(e.min,t,r)} * (100% - ${u} - 8px) + 4px)`,p=`calc(${1-zR(e.max,t,r)} * (100% - ${u} - 8px) + 4px)`;return Ne.createElement(mJ,qs({ref:a},d()),Ne.createElement(pJ,null,Ne.createElement(gJ,{style:{left:h,right:p}})),Ne.createElement(pL,{position:"left",ref:o,style:{left:h}}),Ne.createElement(pL,{position:"right",ref:l,style:{right:p}}))}function CEe(){const{label:n,displayValue:e,onUpdate:t,settings:r}=sl(),i=Ki(r,xEe);return Ne.createElement(Ne.Fragment,null,Ne.createElement(Qu,{input:!0},Ne.createElement(hf,null,n),Ne.createElement(SEe,null,Ne.createElement(wEe,qs({value:e},r,{onDrag:t})),Ne.createElement(v4,{value:e,settings:i,onUpdate:t,innerLabelTrim:0}))))}var _Ee=tr({component:CEe},vEe);const EEe=()=>{const n=new Map;return{on:(e,t)=>{let r=n.get(e);r===void 0&&(r=new Set,n.set(e,r)),r.add(t)},off:(e,t)=>{const r=n.get(e);r!==void 0&&(r.delete(t),r.size===0&&n.delete(e))},emit:(e,...t)=>{const r=n.get(e);if(r!==void 0)for(const i of r)i(...t)}}},AEe=["type","value"],TEe=["onChange","transient","onEditStart","onEditEnd"],MEe=function(){const e=m_e(g_e(()=>({data:{}}))),t=EEe();this.storeId=SSe(),this.useStore=e;const r={},i=new Set;this.getVisiblePaths=()=>{const a=this.getData(),o=Object.keys(a),l=[];Object.entries(r).forEach(([u,d])=>{d.render&&o.some(h=>h.indexOf(u)===0)&&!d.render(this.get)&&l.push(u+".")});const c=[];return i.forEach(u=>{u in a&&a[u].__refCount>0&&l.every(d=>u.indexOf(d)===-1)&&(!a[u].render||a[u].render(this.get))&&c.push(u)}),c},this.setOrderedPaths=a=>{a.forEach(o=>i.add(o))},this.orderPaths=a=>(this.setOrderedPaths(a),a),this.disposePaths=a=>{e.setState(o=>{const l=o.data;return a.forEach(c=>{if(c in l){const u=l[c];u.__refCount--,u.__refCount===0&&u.type in Jd&&delete l[c]}}),{data:l}})},this.dispose=()=>{e.setState(()=>({data:{}}))},this.getFolderSettings=a=>r[a]||{},this.getData=()=>e.getState().data,this.addData=(a,o)=>{e.setState(l=>{const c=l.data;return Object.entries(a).forEach(([u,d])=>{let h=c[u];if(h){const{type:p,value:g}=d,v=Ki(d,AEe);p!==h.type?Ap(Rs.INPUT_TYPE_OVERRIDE,p):((h.__refCount===0||o)&&Object.assign(h,v),h.__refCount++)}else c[u]=tr(tr({},d),{},{__refCount:1})}),{data:c}})},this.setValueAtPath=(a,o,l)=>{e.setState(c=>{const u=c.data;return JG(u[a],o,a,this,l),{data:u}})},this.setSettingsAtPath=(a,o)=>{e.setState(l=>{const c=l.data;return c[a].settings=tr(tr({},c[a].settings),o),{data:c}})},this.disableInputAtPath=(a,o)=>{e.setState(l=>{const c=l.data;return c[a].disabled=o,{data:c}})},this.set=(a,o)=>{e.setState(l=>{const c=l.data;return Object.entries(a).forEach(([u,d])=>{try{JG(c[u],d,void 0,void 0,o)}catch{}}),{data:c}})},this.getInput=a=>{try{return this.getData()[a]}catch{Ap(Rs.PATH_DOESNT_EXIST,a)}},this.get=a=>{var o;return(o=this.getInput(a))===null||o===void 0?void 0:o.value},this.emitOnEditStart=a=>{t.emit(`onEditStart:${a}`,this.get(a),a,tr(tr({},this.getInput(a)),{},{get:this.get}))},this.emitOnEditEnd=a=>{t.emit(`onEditEnd:${a}`,this.get(a),a,tr(tr({},this.getInput(a)),{},{get:this.get}))},this.subscribeToEditStart=(a,o)=>{const l=`onEditStart:${a}`;return t.on(l,o),()=>t.off(l,o)},this.subscribeToEditEnd=(a,o)=>{const l=`onEditEnd:${a}`;return t.on(l,o),()=>t.off(l,o)};const s=(a,o,l)=>{const c={};return Object.entries(a).forEach(([u,d])=>{if(u==="")return Ap(Rs.EMPTY_KEY);let h=E4(o,u);if(d.type===Jd.FOLDER){const p=s(d.schema,h,l);Object.assign(c,p),h in r||(r[h]=d.settings)}else if(u in l)Ap(Rs.DUPLICATE_KEYS,u,h,l[u].path);else{const p=RSe(d,u,h,c);if(p){const{type:g,options:v,input:b}=p,{onChange:x,transient:C,onEditStart:E,onEditEnd:_}=v,M=Ki(v,TEe);c[h]=tr(tr(tr({type:g},M),b),{},{fromPanel:!0}),l[u]={path:h,onChange:x,transient:C,onEditStart:E,onEditEnd:_}}else Ap(Rs.UNKNOWN_INPUT,h,d)}}),c};this.getDataFromSchema=a=>{const o={};return[s(a,"",o),o]}},jJ=new MEe,REe={collapsed:!1};function NEe(n,e){return{type:Jd.FOLDER,schema:n,settings:tr(tr({},REe),e)}}const U9=n=>"__levaInput"in n,IEe=(n,e)=>{const t={},r=e?e.toLowerCase():null;return n.forEach(i=>{const[s,a]=I_e(i);(!r||s.toLowerCase().indexOf(r)>-1)&&N_e(t,a,{[s]:{__levaInput:!0,path:i}})}),t},DEe=["type","label","path","valueKey","value","settings","setValue","disabled"];function kEe(n){let{type:e,label:t,path:r,valueKey:i,value:s,settings:a,setValue:o,disabled:l}=n,c=Ki(n,DEe);const{displayValue:u,onChange:d,onUpdate:h}=fJ({type:e,value:s,settings:a,setValue:o}),p=iv[e].component;return p?Ne.createElement(nJ.Provider,{value:tr({key:i,path:r,id:""+r,label:t,displayValue:u,value:s,onChange:d,onUpdate:h,settings:a,setValue:o,disabled:l},c)},Ne.createElement(XSe,{disabled:l},Ne.createElement(p,null))):(Ap(Rs.NO_COMPONENT_FOR_TYPE,e,r),null)}const OEe=Wn("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function BEe({onClick:n,settings:e,label:t}){const r=L_();return Ne.createElement(Qu,null,Ne.createElement(OEe,{disabled:e.disabled,onClick:()=>n(r.get)},t))}const $Ee=Wn("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),LEe=Wn("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),FEe=({label:n,opts:e})=>{let t=typeof n=="string"&&n.trim()===""?null:n,r=e;return typeof e.opts=="object"&&(r.label!==void 0&&(t=e.label),r=e.opts),{label:t,opts:r}};function PEe(n){const{label:e,opts:t}=FEe(n),r=L_();return Ne.createElement(Qu,{input:!!e},e&&Ne.createElement(hf,null,e),Ne.createElement($Ee,null,Object.entries(t).map(([i,s])=>Ne.createElement(LEe,{key:i,onClick:()=>s(r.get)},i))))}const UEe=Wn("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),qJ=100;function zEe(n,e){n.push(e),n.length>qJ&&n.shift()}const HEe=F.forwardRef(function({initialValue:n},e){const t=kp("colors","highlight3"),r=kp("colors","elevation2"),i=kp("colors","highlight1"),[s,a]=F.useMemo(()=>[Nl(i).alpha(.4).toRgbString(),Nl(i).alpha(.1).toRgbString()],[i]),o=F.useRef([n]),l=F.useRef(n),c=F.useRef(n),u=F.useRef(),d=F.useCallback((g,v)=>{if(!g)return;const{width:b,height:x}=g,C=new Path2D,E=b/qJ,_=x*.05;for(let L=0;L<o.current.length;L++){const $=zR(o.current[L],l.current,c.current),N=E*L,I=x-$*(x-_*2)-_;C.lineTo(N,I)}v.clearRect(0,0,b,x);const M=new Path2D(C);M.lineTo(E*(o.current.length+1),x),M.lineTo(0,x),M.lineTo(0,0);const R=v.createLinearGradient(0,0,0,x);R.addColorStop(0,s),R.addColorStop(1,a),v.fillStyle=R,v.fill(M),v.strokeStyle=r,v.lineJoin="round",v.lineWidth=14,v.stroke(C),v.strokeStyle=t,v.lineWidth=2,v.stroke(C)},[t,r,s,a]),[h,p]=rwe(d);return F.useImperativeHandle(e,()=>({frame:g=>{(l.current===void 0||g<l.current)&&(l.current=g),(c.current===void 0||g>c.current)&&(c.current=g),zEe(o.current,g),u.current=requestAnimationFrame(()=>d(h.current,p.current))}}),[h,p,d]),F.useEffect(()=>()=>cancelAnimationFrame(u.current),[]),Ne.createElement(UEe,{ref:h})}),z9=n=>Number.isFinite(n)?n.toPrecision(2):n.toString(),VEe=F.forwardRef(function({initialValue:n},e){const[t,r]=F.useState(z9(n));return F.useImperativeHandle(e,()=>({frame:i=>r(z9(i))}),[]),Ne.createElement("div",null,t)});function H9(n){return typeof n=="function"?n():n.current}function GEe({label:n,objectOrFn:e,settings:t}){const r=F.useRef(),i=F.useRef(H9(e));return F.useEffect(()=>{const s=window.setInterval(()=>{var a;document.hidden||(a=r.current)===null||a===void 0||a.frame(H9(e))},t.interval);return()=>window.clearInterval(s)},[e,t.interval]),Ne.createElement(Qu,{input:!0},Ne.createElement(hf,{align:"top"},n),t.graph?Ne.createElement(HEe,{ref:r,initialValue:i.current}):Ne.createElement(VEe,{ref:r,initialValue:i.current}))}const WEe=["type","label","key"],jEe={[Jd.BUTTON]:BEe,[Jd.BUTTON_GROUP]:PEe,[Jd.MONITOR]:GEe},qEe=Ne.memo(({path:n})=>{const[e,{set:t,setSettings:r,disable:i,storeId:s,emitOnEditStart:a,emitOnEditEnd:o}]=swe(n);if(!e)return null;const{type:l,label:c,key:u}=e,d=Ki(e,WEe);if(l in Jd){const h=jEe[l];return Ne.createElement(h,qs({label:c,path:n},d))}return l in iv?Ne.createElement(kEe,qs({key:s+n,type:l,label:c,storeId:s,path:n,valueKey:u,setValue:t,setSettings:r,disable:i,emitOnEditStart:a,emitOnEditEnd:o},d)):(hSe(Rs.UNSUPPORTED_INPUT,l,n),null)});function XEe({toggle:n,toggled:e,name:t}){return Ne.createElement(WSe,{onClick:()=>n()},Ne.createElement(y4,{toggled:e}),Ne.createElement("div",null,t))}const KEe=({name:n,path:e,tree:t})=>{const r=L_(),i=E4(e,n),{collapsed:s,color:a}=r.getFolderSettings(i),[o,l]=F.useState(!s),c=F.useRef(null),u=kp("colors","folderWidgetColor"),d=kp("colors","folderTextColor");return F.useLayoutEffect(()=>{c.current.style.setProperty("--leva-colors-folderWidgetColor",a||u),c.current.style.setProperty("--leva-colors-folderTextColor",a||d)},[a,u,d]),Ne.createElement(VR,{ref:c},Ne.createElement(XEe,{name:n,toggled:o,toggle:()=>l(h=>!h)}),Ne.createElement(XJ,{parent:i,tree:t,toggled:o}))},XJ=Ne.memo(({isRoot:n=!1,fill:e=!1,flat:t=!1,parent:r,tree:i,toggled:s})=>{const{wrapperRef:a,contentRef:o}=O_e(s),l=L_(),c=([d,h])=>{var p;return(U9(h)?(p=l.getInput(h.path))===null||p===void 0?void 0:p.order:l.getFolderSettings(E4(r,d)).order)||0},u=Object.entries(i).sort((d,h)=>c(d)-c(h));return Ne.createElement(fL,{ref:a,isRoot:n,fill:e,flat:t},Ne.createElement(lJ,{ref:o,isRoot:n,toggled:s},u.map(([d,h])=>U9(h)?Ne.createElement(qEe,{key:h.path,valueKey:h.valueKey,path:h.path}):Ne.createElement(KEe,{key:d,name:d,path:r,tree:h}))))}),YEe=Wn("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${uJ}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),KJ=40,XR=Wn("i",{$flexCenter:"",width:KJ,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),JEe=Wn("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),ZEe=Wn("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${XR}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),QEe=Wn("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),e2e=Wn("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:KJ}}}}),t2e=Ne.forwardRef(({setFilter:n,toggle:e},t)=>{const[r,i]=F.useState(""),s=F.useMemo(()=>YY(n,250),[n]),a=()=>{n(""),i("")},o=l=>{const c=l.currentTarget.value;e(!0),i(c)};return F.useEffect(()=>{s(r)},[r,s]),Ne.createElement(Ne.Fragment,null,Ne.createElement(QEe,{ref:t,value:r,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:l=>l.stopPropagation(),onChange:o}),Ne.createElement(XR,{onClick:()=>a(),style:{visibility:r?"visible":"hidden"}},Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},Ne.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function n2e({setFilter:n,onDrag:e,onDragStart:t,onDragEnd:r,toggle:i,toggled:s,title:a,drag:o,filterEnabled:l,from:c}){const[u,d]=F.useState(!1),h=F.useRef(null);F.useEffect(()=>{var g,v;u?(g=h.current)===null||g===void 0||g.focus():(v=h.current)===null||v===void 0||v.blur()},[u]);const p=F_(({offset:[g,v],first:b,last:x})=>{e({x:g,y:v}),b&&t({x:g,y:v}),x&&r({x:g,y:v})},{filterTaps:!0,from:({offset:[g,v]})=>[(c==null?void 0:c.x)||g,(c==null?void 0:c.y)||v]});return F.useEffect(()=>{const g=v=>{v.key==="L"&&v.shiftKey&&v.metaKey&&d(b=>!b)};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[]),Ne.createElement(Ne.Fragment,null,Ne.createElement(JEe,{mode:o?"drag":void 0},Ne.createElement(XR,{active:!s,onClick:()=>i()},Ne.createElement(y4,{toggled:s,width:12,height:8})),Ne.createElement(e2e,qs({},o?p():{},{drag:o,filterEnabled:l}),a===void 0&&o?Ne.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},Ne.createElement("circle",{cx:"2",cy:"2",r:"2"}),Ne.createElement("circle",{cx:"14",cy:"2",r:"2"}),Ne.createElement("circle",{cx:"26",cy:"2",r:"2"}),Ne.createElement("circle",{cx:"2",cy:"12",r:"2"}),Ne.createElement("circle",{cx:"14",cy:"12",r:"2"}),Ne.createElement("circle",{cx:"26",cy:"12",r:"2"})):a),l&&Ne.createElement(XR,{active:u,onClick:()=>d(g=>!g)},Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},Ne.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),Ne.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),Ne.createElement(ZEe,{toggled:u},Ne.createElement(t2e,{ref:h,setFilter:n,toggle:i})))}const r2e=["store","hidden","theme","collapsed"];function i2e(n){let{store:e,hidden:t=!1,theme:r,collapsed:i=!1}=n,s=Ki(n,r2e);const a=UJ(()=>PSe(r),[r]),[o,l]=F.useState(!i),c=typeof i=="object"?!i.collapsed:o,u=F.useMemo(()=>typeof i=="object"?d=>{typeof d=="function"?i.onChange(!d(!i.collapsed)):i.onChange(!d)}:l,[i]);return!e||t?null:Ne.createElement(p4.Provider,{value:a},Ne.createElement(s2e,qs({store:e},s,{toggled:c,setToggle:u,rootClass:a.className})))}const s2e=Ne.memo(({store:n,rootClass:e,fill:t=!1,flat:r=!1,neverHide:i=!1,oneLineLabels:s=!1,titleBar:a={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:o=!1,toggled:l,setToggle:c})=>{var u,d;const h=B_e(n),[p,g]=F.useState(""),v=F.useMemo(()=>IEe(h,p),[h,p]),[b,x]=hJ(),C=i||h.length>0,E=typeof a=="object"&&a.title||void 0,_=typeof a=="object"&&(u=a.drag)!==null&&u!==void 0?u:!0,M=typeof a=="object"&&(d=a.filter)!==null&&d!==void 0?d:!0,R=typeof a=="object"&&a.position||void 0,L=typeof a=="object"&&a.onDrag||void 0,$=typeof a=="object"&&a.onDragStart||void 0,N=typeof a=="object"&&a.onDragEnd||void 0;return Ne.useEffect(()=>{x({x:R==null?void 0:R.x,y:R==null?void 0:R.y})},[R,x]),FSe(),Ne.createElement(iJ.Provider,{value:{hideCopyButton:o}},Ne.createElement(YEe,{ref:b,className:e,fill:t,flat:r,oneLineLabels:s,hideTitleBar:!a,style:{display:C?"block":"none"}},a&&Ne.createElement(n2e,{onDrag:I=>{x(I),L==null||L(I)},onDragStart:I=>$==null?void 0:$(I),onDragEnd:I=>N==null?void 0:N(I),setFilter:g,toggle:I=>c(k=>I??!k),toggled:l,title:E,drag:_,filterEnabled:M,from:R}),C&&Ne.createElement(rJ.Provider,{value:n},Ne.createElement(XJ,{isRoot:!0,fill:t,flat:r,tree:v,toggled:l}))))}),a2e=["isRoot"];let KR=!1,ky=null;function A4(n){let{isRoot:e=!1}=n,t=Ki(n,a2e);return F.useEffect(()=>(KR=!0,!e&&ky&&(ky.remove(),ky=null),()=>{e||(KR=!1)}),[e]),Ne.createElement(i2e,qs({store:jJ},t))}function o2e(n){F.useEffect(()=>{n&&!KR&&(ky||(ky=document.getElementById("leva__root")||Object.assign(document.createElement("div"),{id:"leva__root"}),document.body&&(document.body.appendChild(ky),Mq.createRoot(ky).render(Ne.createElement(A4,{isRoot:!0})))),KR=!0)},[n])}function l2e(n,e,t,r,i){let s,a,o,l,c;return typeof n=="string"?(a=n,s=e,Array.isArray(t)?c=t:t&&("store"in t?(l=t,c=r):(o=t,Array.isArray(r)?c=r:(l=r,c=i)))):(s=n,Array.isArray(e)?c=e:(l=e,c=t)),{schema:s,folderName:a,folderSettings:o,hookSettings:l,deps:c||[]}}function Sy(n,e,t,r,i){const{folderName:s,schema:a,folderSettings:o,hookSettings:l,deps:c}=l2e(n,e,t,r,i),u=typeof a=="function",d=F.useRef(!1),h=F.useRef(!0),p=UJ(()=>{d.current=!0;const k=typeof a=="function"?a():a;return s?{[s]:NEe(k,o)}:k},c),g=!(l!=null&&l.store);o2e(g);const[v]=F.useState(()=>(l==null?void 0:l.store)||jJ),[b,x]=F.useMemo(()=>v.getDataFromSchema(p),[v,p]),[C,E,_,M,R]=F.useMemo(()=>{const k=[],P=[],G={},W={},X={};return Object.values(x).forEach(({path:z,onChange:J,onEditStart:Q,onEditEnd:Y,transient:q})=>{k.push(z),J?(G[z]=J,q||P.push(z)):P.push(z),Q&&(W[z]=Q),Y&&(X[z]=Y)}),[k,P,G,W,X]},[x]),L=F.useMemo(()=>v.orderPaths(C),[C,v]),$=$_e(v,E,b),N=F.useCallback(k=>{const P=Object.entries(k).reduce((G,[W,X])=>Object.assign(G,{[x[W].path]:X}),{});v.set(P,!1)},[v,x]),I=F.useCallback(k=>v.get(x[k].path),[v,x]);return F.useEffect(()=>{const k=!h.current&&d.current;return v.addData(b,k),h.current=!1,d.current=!1,()=>v.disposePaths(L)},[v,L,b]),F.useEffect(()=>{const k=[];return Object.entries(_).forEach(([P,G])=>{G(v.get(P),P,tr({initial:!0,get:v.get},v.getInput(P)));const W=v.useStore.subscribe(X=>{const z=X.data[P];return[z.disabled?void 0:z.value,z]},([X,z])=>G(X,P,tr({initial:!1,get:v.get},z)),{equalityFn:AI});k.push(W)}),()=>k.forEach(P=>P())},[v,_]),F.useEffect(()=>{const k=[];return Object.entries(M).forEach(([P,G])=>k.push(v.subscribeToEditStart(P,G))),Object.entries(R).forEach(([P,G])=>k.push(v.subscribeToEditEnd(P,G))),()=>k.forEach(P=>P())},[M,R,v]),u?[$,N,I]:$}Yp(rf.SELECT,wwe);Yp(rf.IMAGE,mEe);Yp(rf.NUMBER,fwe);Yp(rf.COLOR,q_e);Yp(rf.STRING,Iwe);Yp(rf.BOOLEAN,Fwe);Yp(rf.INTERVAL,_Ee);Yp(rf.VECTOR3D,K_e);Yp(rf.VECTOR2D,rEe);const YJ="/room-transformed.glb";function c2e(n){const{nodes:e,materials:t}=zg(YJ);return V.jsx("group",{...n,dispose:null,children:V.jsxs("group",{rotation:[-Math.PI/2,0,0],children:[V.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_2.geometry,material:t.Material}),V.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_3.geometry,material:t["Material.002"]}),V.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_4.geometry,material:t["Material.003"]}),V.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_6.geometry,material:t.krzeslo_1}),V.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_7.geometry,material:t.krzeslo_okno}),V.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_8.geometry,material:t.krzeslo_prawe}),V.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_9.geometry,material:t.krzeslo_srodek}),V.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_10.geometry,material:t.podloga}),V.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_11.geometry,material:t.sciana_okno}),V.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_12.geometry,material:t["stolik.001"]}),V.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_16.geometry,material:t["Material.006"]}),V.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_5.geometry,material:t["Material.004"]}),V.jsx("mesh",{geometry:e.Object_13.geometry,children:V.jsx("meshStandardMaterial",{transparent:!0,opacity:.5})}),V.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_14.geometry,material:t["Material.002"]}),V.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_15.geometry,material:t["Material.005"]}),V.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_17.geometry,material:t.mata}),V.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_18.geometry,material:t.stolik})]})})}zg.preload(YJ);function u2e(){const n=F.useRef(null);return N_((e,t)=>{gve.dampE(n.current.rotation,[e.pointer.y*Math.PI/50,e.pointer.x*Math.PI/20,0],.2,t)}),V.jsx("group",{ref:n,children:V.jsx("directionalLight",{position:[5,5,-8],castShadow:!0,intensity:5,"shadow-mapSize":2048,"shadow-bias":-.001,children:V.jsx("orthographicCamera",{attach:"shadow-camera",args:[-8.5,8.5,8.5,-8.5,.1,20]})})})}function NB({color:n="hotpink",floatIntensity:e=15,position:t=[0,5,-8],scale:r=1}){return V.jsx(_be,{floatIntensity:e,children:V.jsxs("mesh",{castShadow:!0,position:t,scale:r,children:[V.jsx("sphereGeometry",{}),V.jsx("meshStandardMaterial",{color:n,roughness:1})]})})}function d2e(){const[n,e]=F.useState(!1),{debug:t,enabled:r,samples:i,...s}=Sy({debug:!1,enabled:!1,size:{value:35,min:0,max:100,step:.1},focus:{value:.5,min:0,max:2,step:.1},samples:{value:16,min:1,max:40,step:1}});return V.jsxs(V.Fragment,{children:[V.jsx("div",{className:"scene-container",children:V.jsxs(jK,{shadows:!0,camera:{position:[5,2,7],fov:50},gl:{alpha:!0},children:[r&&V.jsx(Cbe,{...s,samples:n?Math.min(6,i):i}),V.jsx("color",{attach:"background",args:["transparent"]}),V.jsx("fog",{attach:"fog",args:["#d0d0d0",8,35]}),V.jsx("ambientLight",{intensity:.4}),V.jsx(u2e,{}),V.jsx(c2e,{scale:.5,position:[0,-1,0]}),V.jsx(NB,{}),V.jsx(NB,{position:[2,4,-8],scale:.9}),V.jsx(NB,{position:[-2,2,-8],scale:.8}),V.jsx(Vbe,{inclination:.52,scale:20})]})}),V.jsx(A4,{collapsed:!0})]})}const f2e=()=>V.jsx("section",{id:"footer",className:"w-full bg-black bg-opacity-70 text-gray-300 text-center py-2",children:V.jsx(E1,{children:V.jsxs("div",{className:"max-w-3xl mx-auto px-4",children:[V.jsxs("h2",{children:[" ",new Date().getFullYear()," Dennis Wong. All rights reserved."]}),V.jsx("h2",{children:"Model from: https://codesandbox.io/p/sandbox/ykfpwf"}),V.jsx("h2",{className:"text-3xl font-bold mb-8 bg-clip-text text-transparent text-center"})]})})});function V9(){return V.jsxs(V.Fragment,{children:[V.jsx("div",{className:"fixed top-0 left-0 w-full h-full",children:V.jsx(d2e,{})}),V.jsx(ple,{}),V.jsx(mle,{}),V.jsx(Cle,{}),V.jsx(gle,{}),V.jsx(wle,{}),V.jsx(f2e,{})]})}/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var G9="popstate";function h2e(n={}){function e(r,i){let{pathname:s,search:a,hash:o}=r.location;return EL("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:jC(i)}return m2e(e,t,null,n)}function ks(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function _h(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function p2e(){return Math.random().toString(36).substring(2,10)}function W9(n,e){return{usr:n.state,key:n.key,idx:e}}function EL(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?F1(e):e,state:t,key:e&&e.key||r||p2e()}}function jC({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function F1(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function m2e(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,o="POP",l=null,c=u();c==null&&(c=0,a.replaceState({...a.state,idx:c},""));function u(){return(a.state||{idx:null}).idx}function d(){o="POP";let b=u(),x=b==null?null:b-c;c=b,l&&l({action:o,location:v.location,delta:x})}function h(b,x){o="PUSH";let C=EL(v.location,b,x);c=u()+1;let E=W9(C,c),_=v.createHref(C);try{a.pushState(E,"",_)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(_)}s&&l&&l({action:o,location:v.location,delta:1})}function p(b,x){o="REPLACE";let C=EL(v.location,b,x);c=u();let E=W9(C,c),_=v.createHref(C);a.replaceState(E,"",_),s&&l&&l({action:o,location:v.location,delta:0})}function g(b){return g2e(b)}let v={get action(){return o},get location(){return n(i,a)},listen(b){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(G9,d),l=b,()=>{i.removeEventListener(G9,d),l=null}},createHref(b){return e(i,b)},createURL:g,encodeLocation(b){let x=g(b);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:h,replace:p,go(b){return a.go(b)}};return v}function g2e(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ks(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:jC(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function JJ(n,e,t="/"){return y2e(n,e,t,!1)}function y2e(n,e,t,r){let i=typeof e=="string"?F1(e):e,s=Pp(i.pathname||"/",t);if(s==null)return null;let a=ZJ(n);v2e(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let c=R2e(s);o=T2e(a[l],c,r)}return o}function ZJ(n,e=[],t=[],r=""){let i=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(ks(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let c=Op([r,l.relativePath]),u=t.concat(l);s.children&&s.children.length>0&&(ks(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),ZJ(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:E2e(c,s.index),routesMeta:u})};return n.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))i(s,a);else for(let l of QJ(s.path))i(s,a,l)}),e}function QJ(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=QJ(r.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),i&&o.push(...a),o.map(l=>n.startsWith("/")&&l===""?"/":l)}function v2e(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:A2e(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var b2e=/^:[\w-]+$/,x2e=3,S2e=2,w2e=1,C2e=10,_2e=-2,j9=n=>n==="*";function E2e(n,e){let t=n.split("/"),r=t.length;return t.some(j9)&&(r+=_2e),e&&(r+=S2e),t.filter(i=>!j9(i)).reduce((i,s)=>i+(b2e.test(s)?x2e:s===""?w2e:C2e),r)}function A2e(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function T2e(n,e,t=!1){let{routesMeta:r}=n,i={},s="/",a=[];for(let o=0;o<r.length;++o){let l=r[o],c=o===r.length-1,u=s==="/"?e:e.slice(s.length)||"/",d=YR({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),h=l.route;if(!d&&c&&t&&!r[r.length-1].route.index&&(d=YR({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(i,d.params),a.push({params:i,pathname:Op([s,d.pathname]),pathnameBase:k2e(Op([s,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(s=Op([s,d.pathnameBase]))}return a}function YR(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=M2e(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((c,{paramName:u,isOptional:d},h)=>{if(u==="*"){let g=o[h]||"";a=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const p=o[h];return d&&!p?c[u]=void 0:c[u]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:a,pattern:n}}function M2e(n,e=!1,t=!0){_h(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function R2e(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return _h(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Pp(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function N2e(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?F1(n):n;return{pathname:t?t.startsWith("/")?t:I2e(t,e):e,search:O2e(r),hash:B2e(i)}}function I2e(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function IB(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function D2e(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function eZ(n){let e=D2e(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function tZ(n,e,t,r=!1){let i;typeof n=="string"?i=F1(n):(i={...n},ks(!i.pathname||!i.pathname.includes("?"),IB("?","pathname","search",i)),ks(!i.pathname||!i.pathname.includes("#"),IB("#","pathname","hash",i)),ks(!i.search||!i.search.includes("#"),IB("#","search","hash",i)));let s=n===""||i.pathname==="",a=s?"/":i.pathname,o;if(a==null)o=t;else{let d=e.length-1;if(!r&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}o=d>=0?e[d]:"/"}let l=N2e(i,o),c=a&&a!=="/"&&a.endsWith("/"),u=(s||a===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var Op=n=>n.join("/").replace(/\/\/+/g,"/"),k2e=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),O2e=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,B2e=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function $2e(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var nZ=["POST","PUT","PATCH","DELETE"];new Set(nZ);var L2e=["GET",...nZ];new Set(L2e);var P1=F.createContext(null);P1.displayName="DataRouter";var kI=F.createContext(null);kI.displayName="DataRouterState";F.createContext(!1);var rZ=F.createContext({isTransitioning:!1});rZ.displayName="ViewTransition";var F2e=F.createContext(new Map);F2e.displayName="Fetchers";var P2e=F.createContext(null);P2e.displayName="Await";var Nh=F.createContext(null);Nh.displayName="Navigation";var z_=F.createContext(null);z_.displayName="Location";var Jp=F.createContext({outlet:null,matches:[],isDataRoute:!1});Jp.displayName="Route";var T4=F.createContext(null);T4.displayName="RouteError";function U2e(n,{relative:e}={}){ks(H_(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=F.useContext(Nh),{hash:i,pathname:s,search:a}=V_(n,{relative:e}),o=s;return t!=="/"&&(o=s==="/"?t:Op([t,s])),r.createHref({pathname:o,search:a,hash:i})}function H_(){return F.useContext(z_)!=null}function Zp(){return ks(H_(),"useLocation() may be used only in the context of a <Router> component."),F.useContext(z_).location}var iZ="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function sZ(n){F.useContext(Nh).static||F.useLayoutEffect(n)}function OI(){let{isDataRoute:n}=F.useContext(Jp);return n?Q2e():z2e()}function z2e(){ks(H_(),"useNavigate() may be used only in the context of a <Router> component.");let n=F.useContext(P1),{basename:e,navigator:t}=F.useContext(Nh),{matches:r}=F.useContext(Jp),{pathname:i}=Zp(),s=JSON.stringify(eZ(r)),a=F.useRef(!1);return sZ(()=>{a.current=!0}),F.useCallback((l,c={})=>{if(_h(a.current,iZ),!a.current)return;if(typeof l=="number"){t.go(l);return}let u=tZ(l,JSON.parse(s),i,c.relative==="path");n==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:Op([e,u.pathname])),(c.replace?t.replace:t.push)(u,c.state,c)},[e,t,s,i,n])}F.createContext(null);function V_(n,{relative:e}={}){let{matches:t}=F.useContext(Jp),{pathname:r}=Zp(),i=JSON.stringify(eZ(t));return F.useMemo(()=>tZ(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function H2e(n,e){return aZ(n,e)}function aZ(n,e,t,r){var x;ks(H_(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=F.useContext(Nh),{matches:s}=F.useContext(Jp),a=s[s.length-1],o=a?a.params:{},l=a?a.pathname:"/",c=a?a.pathnameBase:"/",u=a&&a.route;{let C=u&&u.path||"";oZ(l,!u||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let d=Zp(),h;if(e){let C=typeof e=="string"?F1(e):e;ks(c==="/"||((x=C.pathname)==null?void 0:x.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${C.pathname}" was given in the \`location\` prop.`),h=C}else h=d;let p=h.pathname||"/",g=p;if(c!=="/"){let C=c.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(C.length).join("/")}let v=JJ(n,{pathname:g});_h(u||v!=null,`No routes matched location "${h.pathname}${h.search}${h.hash}" `),_h(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${h.pathname}${h.search}${h.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=q2e(v&&v.map(C=>Object.assign({},C,{params:Object.assign({},o,C.params),pathname:Op([c,i.encodeLocation?i.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?c:Op([c,i.encodeLocation?i.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),s,t,r);return e&&b?F.createElement(z_.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...h},navigationType:"POP"}},b):b}function V2e(){let n=Z2e(),e=$2e(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",n),a=F.createElement(F.Fragment,null,F.createElement("p",null," Hey developer "),F.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",F.createElement("code",{style:s},"ErrorBoundary")," or"," ",F.createElement("code",{style:s},"errorElement")," prop on your route.")),F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},e),t?F.createElement("pre",{style:i},t):null,a)}var G2e=F.createElement(V2e,null),W2e=class extends F.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?F.createElement(Jp.Provider,{value:this.props.routeContext},F.createElement(T4.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function j2e({routeContext:n,match:e,children:t}){let r=F.useContext(P1);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),F.createElement(Jp.Provider,{value:n},t)}function q2e(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,s=t==null?void 0:t.errors;if(s!=null){let l=i.findIndex(c=>c.route.id&&(s==null?void 0:s[c.route.id])!==void 0);ks(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,l+1))}let a=!1,o=-1;if(t)for(let l=0;l<i.length;l++){let c=i[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(o=l),c.route.id){let{loaderData:u,errors:d}=t,h=c.route.loader&&!u.hasOwnProperty(c.route.id)&&(!d||d[c.route.id]===void 0);if(c.route.lazy||h){a=!0,o>=0?i=i.slice(0,o+1):i=[i[0]];break}}}return i.reduceRight((l,c,u)=>{let d,h=!1,p=null,g=null;t&&(d=s&&c.route.id?s[c.route.id]:void 0,p=c.route.errorElement||G2e,a&&(o<0&&u===0?(oZ("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,g=null):o===u&&(h=!0,g=c.route.hydrateFallbackElement||null)));let v=e.concat(i.slice(0,u+1)),b=()=>{let x;return d?x=p:h?x=g:c.route.Component?x=F.createElement(c.route.Component,null):c.route.element?x=c.route.element:x=l,F.createElement(j2e,{match:c,routeContext:{outlet:l,matches:v,isDataRoute:t!=null},children:x})};return t&&(c.route.ErrorBoundary||c.route.errorElement||u===0)?F.createElement(W2e,{location:t.location,revalidation:t.revalidation,component:p,error:d,children:b(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):b()},null)}function M4(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function X2e(n){let e=F.useContext(P1);return ks(e,M4(n)),e}function K2e(n){let e=F.useContext(kI);return ks(e,M4(n)),e}function Y2e(n){let e=F.useContext(Jp);return ks(e,M4(n)),e}function R4(n){let e=Y2e(n),t=e.matches[e.matches.length-1];return ks(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function J2e(){return R4("useRouteId")}function Z2e(){var r;let n=F.useContext(T4),e=K2e("useRouteError"),t=R4("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function Q2e(){let{router:n}=X2e("useNavigate"),e=R4("useNavigate"),t=F.useRef(!1);return sZ(()=>{t.current=!0}),F.useCallback(async(i,s={})=>{_h(t.current,iZ),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...s}))},[n,e])}var q9={};function oZ(n,e,t){!e&&!q9[n]&&(q9[n]=!0,_h(!1,t))}F.memo(eAe);function eAe({routes:n,future:e,state:t}){return aZ(n,void 0,t,e)}function vp(n){ks(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function tAe({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:s=!1}){ks(!H_(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=n.replace(/^\/*/,"/"),o=F.useMemo(()=>({basename:a,navigator:i,static:s,future:{}}),[a,i,s]);typeof t=="string"&&(t=F1(t));let{pathname:l="/",search:c="",hash:u="",state:d=null,key:h="default"}=t,p=F.useMemo(()=>{let g=Pp(l,a);return g==null?null:{location:{pathname:g,search:c,hash:u,state:d,key:h},navigationType:r}},[a,l,c,u,d,h,r]);return _h(p!=null,`<Router basename="${a}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:F.createElement(Nh.Provider,{value:o},F.createElement(z_.Provider,{children:e,value:p}))}function nAe({children:n,location:e}){return H2e(AL(n),e)}function AL(n,e=[]){let t=[];return F.Children.forEach(n,(r,i)=>{if(!F.isValidElement(r))return;let s=[...e,i];if(r.type===F.Fragment){t.push.apply(t,AL(r.props.children,s));return}ks(r.type===vp,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ks(!r.props.index||!r.props.children,"An index route cannot have child routes.");let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=AL(r.props.children,s)),t.push(a)}),t}var gM="get",yM="application/x-www-form-urlencoded";function BI(n){return n!=null&&typeof n.tagName=="string"}function rAe(n){return BI(n)&&n.tagName.toLowerCase()==="button"}function iAe(n){return BI(n)&&n.tagName.toLowerCase()==="form"}function sAe(n){return BI(n)&&n.tagName.toLowerCase()==="input"}function aAe(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function oAe(n,e){return n.button===0&&(!e||e==="_self")&&!aAe(n)}var PT=null;function lAe(){if(PT===null)try{new FormData(document.createElement("form"),0),PT=!1}catch{PT=!0}return PT}var cAe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function DB(n){return n!=null&&!cAe.has(n)?(_h(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${yM}"`),null):n}function uAe(n,e){let t,r,i,s,a;if(iAe(n)){let o=n.getAttribute("action");r=o?Pp(o,e):null,t=n.getAttribute("method")||gM,i=DB(n.getAttribute("enctype"))||yM,s=new FormData(n)}else if(rAe(n)||sAe(n)&&(n.type==="submit"||n.type==="image")){let o=n.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=n.getAttribute("formaction")||o.getAttribute("action");if(r=l?Pp(l,e):null,t=n.getAttribute("formmethod")||o.getAttribute("method")||gM,i=DB(n.getAttribute("formenctype"))||DB(o.getAttribute("enctype"))||yM,s=new FormData(o,n),!lAe()){let{name:c,type:u,value:d}=n;if(u==="image"){let h=c?`${c}.`:"";s.append(`${h}x`,"0"),s.append(`${h}y`,"0")}else c&&s.append(c,d)}}else{if(BI(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=gM,r=null,i=yM,a=n}return s&&i==="text/plain"&&(a=s,s=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function N4(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function dAe(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&Pp(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function fAe(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function hAe(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function pAe(n,e,t){let r=await Promise.all(n.map(async i=>{let s=e.routes[i.route.id];if(s){let a=await fAe(s,t);return a.links?a.links():[]}return[]}));return vAe(r.flat(1).filter(hAe).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function X9(n,e,t,r,i,s){let a=(l,c)=>t[c]?l.route.id!==t[c].route.id:!0,o=(l,c)=>{var u;return t[c].pathname!==l.pathname||((u=t[c].route.path)==null?void 0:u.endsWith("*"))&&t[c].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,c)=>a(l,c)||o(l,c)):s==="data"?e.filter((l,c)=>{var d;let u=r.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(a(l,c)||o(l,c))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((d=t[0])==null?void 0:d.params)||{},nextUrl:new URL(n,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function mAe(n,e,{includeHydrateFallback:t}={}){return gAe(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function gAe(n){return[...new Set(n)]}function yAe(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function vAe(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let s=JSON.stringify(yAe(i));return t.has(s)||(t.add(s),r.push({key:s,link:i})),r},[])}function lZ(){let n=F.useContext(P1);return N4(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function bAe(){let n=F.useContext(kI);return N4(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var I4=F.createContext(void 0);I4.displayName="FrameworkContext";function cZ(){let n=F.useContext(I4);return N4(n,"You must render this element inside a <HydratedRouter> element"),n}function xAe(n,e){let t=F.useContext(I4),[r,i]=F.useState(!1),[s,a]=F.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:d}=e,h=F.useRef(null);F.useEffect(()=>{if(n==="render"&&a(!0),n==="viewport"){let v=x=>{x.forEach(C=>{a(C.isIntersecting)})},b=new IntersectionObserver(v,{threshold:.5});return h.current&&b.observe(h.current),()=>{b.disconnect()}}},[n]),F.useEffect(()=>{if(r){let v=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(v)}}},[r]);let p=()=>{i(!0)},g=()=>{i(!1),a(!1)};return t?n!=="intent"?[s,h,{}]:[s,h,{onFocus:$w(o,p),onBlur:$w(l,g),onMouseEnter:$w(c,p),onMouseLeave:$w(u,g),onTouchStart:$w(d,p)}]:[!1,h,{}]}function $w(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function SAe({page:n,...e}){let{router:t}=lZ(),r=F.useMemo(()=>JJ(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?F.createElement(CAe,{page:n,matches:r,...e}):null}function wAe(n){let{manifest:e,routeModules:t}=cZ(),[r,i]=F.useState([]);return F.useEffect(()=>{let s=!1;return pAe(n,e,t).then(a=>{s||i(a)}),()=>{s=!0}},[n,e,t]),r}function CAe({page:n,matches:e,...t}){let r=Zp(),{manifest:i,routeModules:s}=cZ(),{basename:a}=lZ(),{loaderData:o,matches:l}=bAe(),c=F.useMemo(()=>X9(n,e,l,i,r,"data"),[n,e,l,i,r]),u=F.useMemo(()=>X9(n,e,l,i,r,"assets"),[n,e,l,i,r]),d=F.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let g=new Set,v=!1;if(e.forEach(x=>{var E;let C=i.routes[x.route.id];!C||!C.hasLoader||(!c.some(_=>_.route.id===x.route.id)&&x.route.id in o&&((E=s[x.route.id])!=null&&E.shouldRevalidate)||C.hasClientLoader?v=!0:g.add(x.route.id))}),g.size===0)return[];let b=dAe(n,a,"data");return v&&g.size>0&&b.searchParams.set("_routes",e.filter(x=>g.has(x.route.id)).map(x=>x.route.id).join(",")),[b.pathname+b.search]},[a,o,r,i,c,e,n,s]),h=F.useMemo(()=>mAe(u,i),[u,i]),p=wAe(u);return F.createElement(F.Fragment,null,d.map(g=>F.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...t})),h.map(g=>F.createElement("link",{key:g,rel:"modulepreload",href:g,...t})),p.map(({key:g,link:v})=>F.createElement("link",{key:g,...v})))}function _Ae(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var uZ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{uZ&&(window.__reactRouterVersion="7.7.1")}catch{}function EAe({basename:n,children:e,window:t}){let r=F.useRef();r.current==null&&(r.current=h2e({window:t,v5Compat:!0}));let i=r.current,[s,a]=F.useState({action:i.action,location:i.location}),o=F.useCallback(l=>{F.startTransition(()=>a(l))},[a]);return F.useLayoutEffect(()=>i.listen(o),[i,o]),F.createElement(tAe,{basename:n,children:e,location:s.location,navigationType:s.action,navigator:i})}var dZ=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fZ=F.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:s,replace:a,state:o,target:l,to:c,preventScrollReset:u,viewTransition:d,...h},p){let{basename:g}=F.useContext(Nh),v=typeof c=="string"&&dZ.test(c),b,x=!1;if(typeof c=="string"&&v&&(b=c,uZ))try{let N=new URL(window.location.href),I=c.startsWith("//")?new URL(N.protocol+c):new URL(c),k=Pp(I.pathname,g);I.origin===N.origin&&k!=null?c=k+I.search+I.hash:x=!0}catch{_h(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=U2e(c,{relative:i}),[E,_,M]=xAe(r,h),R=RAe(c,{replace:a,state:o,target:l,preventScrollReset:u,relative:i,viewTransition:d});function L(N){e&&e(N),N.defaultPrevented||R(N)}let $=F.createElement("a",{...h,...M,href:b||C,onClick:x||s?e:L,ref:_Ae(p,_),target:l,"data-discover":!v&&t==="render"?"true":void 0});return E&&!v?F.createElement(F.Fragment,null,$,F.createElement(SAe,{page:C})):$});fZ.displayName="Link";var AAe=F.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:s,to:a,viewTransition:o,children:l,...c},u){let d=V_(a,{relative:c.relative}),h=Zp(),p=F.useContext(kI),{navigator:g,basename:v}=F.useContext(Nh),b=p!=null&&OAe(d)&&o===!0,x=g.encodeLocation?g.encodeLocation(d).pathname:d.pathname,C=h.pathname,E=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;t||(C=C.toLowerCase(),E=E?E.toLowerCase():null,x=x.toLowerCase()),E&&v&&(E=Pp(E,v)||E);const _=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let M=C===x||!i&&C.startsWith(x)&&C.charAt(_)==="/",R=E!=null&&(E===x||!i&&E.startsWith(x)&&E.charAt(x.length)==="/"),L={isActive:M,isPending:R,isTransitioning:b},$=M?e:void 0,N;typeof r=="function"?N=r(L):N=[r,M?"active":null,R?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let I=typeof s=="function"?s(L):s;return F.createElement(fZ,{...c,"aria-current":$,className:N,ref:u,style:I,to:a,viewTransition:o},typeof l=="function"?l(L):l)});AAe.displayName="NavLink";var TAe=F.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:s,method:a=gM,action:o,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:d,...h},p)=>{let g=DAe(),v=kAe(o,{relative:c}),b=a.toLowerCase()==="get"?"get":"post",x=typeof o=="string"&&dZ.test(o),C=E=>{if(l&&l(E),E.defaultPrevented)return;E.preventDefault();let _=E.nativeEvent.submitter,M=(_==null?void 0:_.getAttribute("formmethod"))||a;g(_||E.currentTarget,{fetcherKey:e,method:M,navigate:t,replace:i,state:s,relative:c,preventScrollReset:u,viewTransition:d})};return F.createElement("form",{ref:p,method:b,action:v,onSubmit:r?l:C,...h,"data-discover":!x&&n==="render"?"true":void 0})});TAe.displayName="Form";function MAe(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hZ(n){let e=F.useContext(P1);return ks(e,MAe(n)),e}function RAe(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:s,viewTransition:a}={}){let o=OI(),l=Zp(),c=V_(n,{relative:s});return F.useCallback(u=>{if(oAe(u,e)){u.preventDefault();let d=t!==void 0?t:jC(l)===jC(c);o(n,{replace:d,state:r,preventScrollReset:i,relative:s,viewTransition:a})}},[l,o,c,t,r,e,n,i,s,a])}var NAe=0,IAe=()=>`__${String(++NAe)}__`;function DAe(){let{router:n}=hZ("useSubmit"),{basename:e}=F.useContext(Nh),t=J2e();return F.useCallback(async(r,i={})=>{let{action:s,method:a,encType:o,formData:l,body:c}=uAe(r,e);if(i.navigate===!1){let u=i.fetcherKey||IAe();await n.fetch(u,t,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||a,formEncType:i.encType||o,flushSync:i.flushSync})}else await n.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||a,formEncType:i.encType||o,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function kAe(n,{relative:e}={}){let{basename:t}=F.useContext(Nh),r=F.useContext(Jp);ks(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...V_(n||".",{relative:e})},a=Zp();if(n==null){s.search=a.search;let o=new URLSearchParams(s.search),l=o.getAll("index");if(l.some(u=>u==="")){o.delete("index"),l.filter(d=>d).forEach(d=>o.append("index",d));let u=o.toString();s.search=u?`?${u}`:""}}return(!n||n===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:Op([t,s.pathname])),jC(s)}function OAe(n,{relative:e}={}){let t=F.useContext(rZ);ks(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=hZ("useViewTransitionState"),i=V_(n,{relative:e});if(!t.isTransitioning)return!1;let s=Pp(t.currentLocation.pathname,r)||t.currentLocation.pathname,a=Pp(t.nextLocation.pathname,r)||t.nextLocation.pathname;return YR(i.pathname,a)!=null||YR(i.pathname,s)!=null}const pZ=({user:n,clearChat:e,isGuest:t=!1})=>{const r=OI(),i=()=>{localStorage.removeItem("user"),r("/login")};return V.jsxs("div",{className:"fixed top-6 left-0 w-full z-20 px-6 py-4 flex items-center justify-between doto-font",children:[V.jsx("h1",{className:"text-3xl font-semibold text-gray-800",children:t?"Interactive Virtual Assistant (Guest)":"Interactive Virtual Assistant"}),V.jsxs("div",{className:"flex items-center gap-3",children:[V.jsx("span",{className:"text-lg text-gray-800",children:t?"Welcome, Guest":`Welcome, ${n.username}`}),t?null:V.jsx("button",{onClick:i,className:"text-sm text-gray-500 hover:text-gray-700 transition-colors",children:"Logout"}),V.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Clear Chat"})]})]})},BAe=({message:n})=>{const e=n.role==="user";return V.jsxs("div",{className:`flex gap-4 ${e?"justify-end":""}`,children:[!e&&V.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-cyan-400 to-teal-600 flex items-center justify-center text-white font-semibold text-sm flex-shrink-0",children:"AI"}),V.jsx("div",{className:`px-4 py-3 rounded-2xl max-w-2xl ${e?"bg-gray-200 text-gray-900":"bg-white border border-gray-200 text-gray-800"}`,children:V.jsx("p",{className:"text-sm leading-relaxed",children:n.content})}),e&&V.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-300 flex items-center justify-center text-gray-600 font-semibold text-sm flex-shrink-0",children:"U"})]})};/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Ae=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),LAe=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),K9=n=>{const e=LAe(n);return e.charAt(0).toUpperCase()+e.slice(1)},mZ=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),FAe=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var PAe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UAe=F.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:a,...o},l)=>F.createElement("svg",{ref:l,...PAe,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:mZ("lucide",i),...!s&&!FAe(o)&&{"aria-hidden":"true"},...o},[...a.map(([c,u])=>F.createElement(c,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $I=(n,e)=>{const t=F.forwardRef(({className:r,...i},s)=>F.createElement(UAe,{ref:s,iconNode:e,className:mZ(`lucide-${$Ae(K9(n))}`,`lucide-${n}`,r),...i}));return t.displayName=K9(n),t};/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zAe=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],HAe=$I("chevron-down",zAe);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VAe=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],kB=$I("message-square",VAe);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GAe=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],WAe=$I("mic",GAe);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jAe=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],qAe=$I("send",jAe),gZ=({messages:n,loading:e})=>{const t=F.useRef(null),[r,i]=F.useState(!1);return F.useEffect(()=>{var s;r||(s=t.current)==null||s.scrollIntoView({behavior:"smooth"})},[n,e,r]),V.jsxs("div",{className:`
            fixed bottom-24 right-6 
            transition-all duration-300 ease-in-out
            ${r?"w-16 h-16":"w-96 h-96"}
            bg-white rounded-2xl shadow-2xl
            flex flex-col
            z-50
        `,children:[V.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 cursor-pointer hover:bg-gray-50 rounded-t-2xl",onClick:()=>i(!r),children:[!r&&V.jsxs(V.Fragment,{children:[V.jsxs("div",{className:"flex items-center gap-2",children:[V.jsx(kB,{size:20,className:"text-blue-500"}),V.jsx("h3",{className:"font-semibold text-gray-800",children:"Chat History"})]}),V.jsx("button",{className:"p-1 hover:bg-gray-200 rounded-lg transition-colors",children:V.jsx(HAe,{size:20,className:"text-gray-600"})})]}),r&&V.jsx("button",{className:"w-full h-full flex items-center justify-center",children:V.jsx(kB,{size:24,className:"text-blue-500"})})]}),!r&&V.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:n.length===0?V.jsxs("div",{className:"text-center text-gray-400 mt-8",children:[V.jsx(kB,{size:48,className:"mx-auto mb-2 opacity-50"}),V.jsx("p",{className:"text-sm",children:"No messages yet"})]}):V.jsxs("div",{className:"space-y-4",children:[n.map(s=>V.jsx(BAe,{message:s},s.id)),e&&V.jsxs("div",{className:"flex gap-3 items-start",children:[V.jsx("div",{className:"w-6 h-6 rounded-lg bg-gradient-to-br from-cyan-400 to-teal-600 flex items-center justify-center text-white font-semibold text-xs flex-shrink-0",children:"AI"}),V.jsx("div",{className:"px-3 py-2 rounded-xl bg-white border border-gray-200",children:V.jsxs("div",{className:"flex gap-1",children:[V.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),V.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),V.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]}),V.jsx("div",{ref:t})]})})]})},yZ=({input:n,setInput:e,onSend:t,loading:r,disabled:i,isGuest:s=!1})=>{const a=o=>{o.key==="Enter"&&!o.shiftKey&&(o.preventDefault(),t())};return V.jsx("div",{className:"fixed bottom-0 left-0 w-full z-20 pointer-events-none",children:V.jsxs("div",{className:"max-w-3xl mx-auto p-4 pointer-events-auto",children:[V.jsxs("div",{className:"flex gap-3 items-end",children:[V.jsx("div",{className:"flex-1 rounded-2xl border border-white/20 backdrop-blur-md bg-white/5 focus-within:border-orange-400 transition-all",children:V.jsx("textarea",{value:n,onChange:o=>e(o.target.value),onKeyDown:a,placeholder:"Message the assistant...",className:"w-full px-4 py-3 bg-transparent resize-none focus:outline-none text-sm text-white placeholder-white/60",rows:1,disabled:r||i})}),V.jsx("button",{onClick:t,disabled:!n.trim()||r||i,className:`p-3 rounded-xl backdrop-blur-md bg-orange-500/90 text-white\r
                       hover:bg-orange-600/90 disabled:opacity-50 disabled:cursor-not-allowed transition-all`,children:r?V.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):V.jsx(qAe,{size:20})}),V.jsx("button",{disabled:r||i,className:`p-3 rounded-xl backdrop-blur-md bg-green-500/90 text-white\r
                       hover:bg-green-600/90 disabled:opacity-50 disabled:cursor-not-allowed transition-all`,children:V.jsx(WAe,{size:20})})]}),V.jsx("p",{className:"text-xs text-white/60 text-center mt-3 select-none",children:s?"Guest mode  conversation history is temporary":"AI remembers your conversation history"})]})})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XAe=1e-7,KAe=1e-4;class vZ{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class D4{refCount(e){return oc("refCount")}incRef(e){return oc("incRef")}timerAvailable(){return!0}time(e){return oc("time")}read(e){return oc("read")}readSync(e){return oc("readSync")}readToGPU(e,t){return oc("readToGPU")}numDataIds(){return oc("numDataIds")}disposeData(e,t){return oc("disposeData")}write(e,t,r){return oc("write")}move(e,t,r,i,s){return oc("move")}createTensorFromGPUData(e,t,r){return oc("createTensorFromGPUData")}memory(){return oc("memory")}floatPrecision(){return oc("floatPrecision")}epsilon(){return this.floatPrecision()===32?XAe:KAe}dispose(){return oc("dispose")}}function oc(n){throw new Error(`'${n}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YAe(n){let e=n.length,t=0;for(;e>0;)t=Math.random()*e|0,e--,Sx(n,e,t)}function sv(n,e,t){return Math.max(n,Math.min(e,t))}function k4(n){return n%2===0?n:n+1}function Sx(n,e,t){const r=n[e];n[e]=n[t],n[t]=r}function JAe(n){let e=0;for(let t=0;t<n.length;t++)e+=n[t];return e}function de(n,e){if(!n)throw new Error(typeof e=="string"?e:e())}function Rc(n,e,t=""){de(Vr(n,e),()=>t+` Shapes ${n} and ${e} must match`)}function U1(n){de(n!=null,()=>"The input to the tensor constructor must be a non-null value.")}function xt(n){if(n.length===0)return 1;let e=n[0];for(let t=1;t<n.length;t++)e*=n[t];return e}function ZAe(n,e){if(n===e)return!0;if(n==null||e==null||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==null&&e[t]!==null&&n[t]!==e[t])return!1;return!0}function Vr(n,e){if(n===e)return!0;if(n==null||e==null||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function u1(n){return n%1===0}function TL(n){const e=Math.ceil(Math.sqrt(n));return[e,Math.ceil(n/e)]}function $x(n,e){return e<=n.length?n:n+" ".repeat(e-n.length)}function Y9(n,e=i=>0,t,r){return new Promise((i,s)=>{let a=0;const o=()=>{if(n()){i();return}a++;const l=e(a);if(t!=null&&a>=t){s();return}r!=null?r(o,l):setTimeout(o,l)};o()})}function bZ(n,e){let t=1,r=-1;for(let s=0;s<n.length;++s)if(n[s]>=0)t*=n[s];else if(n[s]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${s}`);r=s}else if(n[s]<0)throw Error(`Shapes can not be < 0. Found ${n[s]} at dim ${s}`);if(r===-1){if(e>0&&e!==t)throw Error(`Size(${e}) must match the product of shape ${n}`);return n}if(t===0)throw Error(`Cannot infer the missing size in [${n}] when there are 0 elements`);if(e%t!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${t}`);const i=n.slice();return i[r]=e/t,i}function Ir(n,e){const t=e.length;return n=n==null?e.map((r,i)=>i):[].concat(n),de(n.every(r=>r>=-t&&r<t),()=>`All values in axis param must be in range [-${t}, ${t}) but got axis ${n}`),de(n.every(r=>u1(r)),()=>`All values in axis param must be integers but got axis ${n}`),n.map(r=>r<0?t+r:r)}function Hg(n,e){const t=[],r=[],i=e!=null&&Array.isArray(e)&&e.length===0,s=e==null||i?null:Ir(e,n).sort();let a=0;for(let o=0;o<n.length;++o){if(s!=null){if(s[a]===o&&n[o]!==1)throw new Error(`Can't squeeze axis ${o} since its dim '${n[o]}' is not 1`);(s[a]==null||s[a]>o)&&n[o]===1&&(t.push(n[o]),r.push(o)),s[a]<=o&&a++}n[o]!==1&&(t.push(n[o]),r.push(o))}return{newShape:t,keptDims:r}}function so(n,e){return js(n,e)}function js(n,e){let t=null;if(n==null||n==="float32")t=new Float32Array(e);else if(n==="int32")t=new Int32Array(e);else if(n==="bool")t=new Uint8Array(e);else if(n==="string")t=new Array(e);else throw new Error(`Unknown data type ${n}`);return t}function QAe(n,e){for(let t=0;t<n.length;t++){const r=n[t];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function eTe(n){return n==="bool"||n==="complex64"||n==="float32"||n==="int32"||n==="string"}function xZ(n,e){return!(e==="complex64"||e==="float32"&&n!=="complex64"||e==="int32"&&n!=="float32"&&n!=="complex64"||e==="bool"&&n==="bool")}function JR(n){if(n==="float32"||n==="int32")return 4;if(n==="complex64")return 8;if(n==="bool")return 1;throw new Error(`Unknown dtype ${n}`)}function tTe(n){if(n==null)return 0;let e=0;return n.forEach(t=>e+=t.length),e}function G_(n){return typeof n=="string"||n instanceof String}function nTe(n){return typeof n=="boolean"}function ML(n){return typeof n=="number"}function z1(n){return Array.isArray(n)?z1(n[0]):n instanceof Float32Array?"float32":n instanceof Int32Array||n instanceof Uint8Array||n instanceof Uint8ClampedArray?"int32":ML(n)?"float32":G_(n)?"string":nTe(n)?"bool":"float32"}function RL(n){return!!(n&&n.constructor&&n.call&&n.apply)}function NL(n,e){for(let t=e;t<n;++t)if(n%t===0)return t;return n}function kn(n){const e=n.length;if(e<2)return[];const t=new Array(e-1);t[e-2]=n[e-1];for(let r=e-3;r>=0;--r)t[r]=t[r+1]*n[r+1];return t}function SZ(n,e,t,r=!1){const i=new Array;if(e.length===1){const s=e[0]*(r?2:1);for(let a=0;a<s;a++)i[a]=t[n+a]}else{const s=e[0],a=e.slice(1),o=a.reduce((l,c)=>l*c)*(r?2:1);for(let l=0;l<s;l++)i[l]=SZ(n+l*o,a,t,r)}return i}function Gu(n,e,t=!1){if(n.length===0)return e[0];const r=n.reduce((i,s)=>i*s)*(t?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${n}] does not match the input size ${e.length}${t?" for a complex tensor":""}.`);return SZ(0,n,e,t)}function rTe(n,e){if(Array.isArray(n))return n;if(e==="float32")return n instanceof Float32Array?n:new Float32Array(n);if(e==="int32")return n instanceof Int32Array?n:new Int32Array(n);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(n));throw new Error(`Unknown dtype ${e}`)}function O4(n,e){const t=Io(n,e);for(let r=0;r<t.length;r++)t[r]=1;return t}function Io(n,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(n);if(e==="int32")return new Int32Array(n);if(e==="bool")return new Uint8Array(n);throw new Error(`Unknown data type ${e}`)}function wZ(n,e){const t=n.reduce((r,i)=>r*i,1);if(e==null||e==="float32")return Gu(n,new Float32Array(t));if(e==="int32")return Gu(n,new Int32Array(t));if(e==="bool")return Gu(n,new Uint8Array(t));throw new Error(`Unknown data type ${e}`)}function iu(n){n.forEach(e=>{de(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${n}].`)})}function fh(n,e,t){if(e===0)return 0;if(e===1)return n[0];let r=n[n.length-1];for(let i=0;i<n.length-1;++i)r+=t[i]*n[i];return r}function H1(n,e,t){if(e===0)return[];if(e===1)return[n];const r=new Array(e);for(let i=0;i<r.length-1;++i)r[i]=Math.floor(n/t[i]),n-=r[i]*t[i];return r[r.length-1]=n,r}function av(n){return n&&n.then&&typeof n.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J9="tfjsflags";class iTe{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=sTe,this.populateURLFlags()}setPlatform(e,t){this.platform!=null&&(it().getBool("IS_TEST")||it().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=t}registerFlag(e,t,r){if(this.flagRegistry[e]={evaluationFn:t,setHook:r},this.urlFlags[e]!=null){const i=this.urlFlags[e];it().getBool("IS_TEST")||it().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${i}.`),this.set(e,i)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const t=this.evaluateFlag(e);if(av(t))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=t,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);J9 in e&&e[J9].split(",").forEach(r=>{const[i,s]=r.split(":");this.urlFlags[i]=oTe(i,s)})}}function sTe(n){const e={};return n.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(t,...r)=>(aTe(e,r[0],r[1]),r.join("="))),e}function aTe(n,e,t){n[decodeURIComponent(e)]=decodeURIComponent(t||"")}function oTe(n,e){const t=e.toLowerCase();return t==="true"||t==="false"?t==="true":`${+t}`===t?+t:e}function it(){return CZ}let CZ=null;function lTe(n){CZ=n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let OB;function _Z(){if(OB==null){let n;if(typeof window<"u")n=window;else if(typeof global<"u")n=global;else if(typeof process<"u")n=process;else if(typeof self<"u")n=self;else throw new Error("Could not find a global object");OB=n}return OB}function cTe(){const n=_Z();return n._tfGlobals==null&&(n._tfGlobals=new Map),n._tfGlobals}function B4(n,e){const t=cTe();if(t.has(n))return t.get(n);{const r=e();return t.set(n,r),t.get(n)}}const LI="Abs",W_="Acos",j_="Acosh",V1="Add",FI="AddN",$4="All",L4="Any",PI="ArgMax",UI="ArgMin",q_="Asin",X_="Asinh",K_="Atan",Y_="Atanh",J_="Atan2",zI="AvgPool",F4="AvgPoolGrad",HI="AvgPool3D",P4="AvgPool3DGrad",VI="BatchMatMul",GI="BatchToSpaceND",U4="Bincount",WI="BitwiseAnd",uTe="BroadcastTo",z4="BroadcastArgs",Z_="Cast",Q_="Ceil",eE="ClipByValue",H4="Complex",jI="ComplexAbs",qI="Concat",XI="Conv2D",V4="Conv2DBackpropFilter",KI="Conv2DBackpropInput",YI="Conv3D",G4="Conv3DBackpropFilterV2",W4="Conv3DBackpropInputV2",tE="Cos",nE="Cosh",j4="Cumprod",JI="Cumsum",q4="CropAndResize",X4="DenseBincount",K4="DepthToSpace",ZI="DepthwiseConv2dNative",Y4="DepthwiseConv2dNativeBackpropFilter",J4="DepthwiseConv2dNativeBackpropInput",Z4="Diag",QI="Dilation2D",IL="Dilation2DBackpropInput",DL="Dilation2DBackpropFilter",dTe="Draw",rE="RealDiv",Q4="Einsum",iE="Elu",eU="EluGrad",sE="Erf",eD="Equal",aE="Exp",tD="ExpandDims",oE="Expm1",tU="FFT",nU="Fill",rU="FlipLeftRight",lE="Floor",cE="FloorDiv",nD="FusedBatchNorm",rD="GatherV2",iU="GatherNd",iD="Greater",uE="GreaterEqual",dE="Identity",sU="IFFT",aU="Imag",fE="IsFinite",hE="IsInf",pE="IsNan",sD="LeakyRelu",aD="Less",oD="LessEqual",oU="LinSpace",mE="Log",gE="Log1p",lD="LogicalAnd",cD="LogicalNot",uD="LogicalOr",fTe="LogSoftmax",dD="LRN",lU="LRNGrad",fD="Max",yE="Maximum",hD="MaxPool",cU="MaxPoolGrad",pD="MaxPool3D",uU="MaxPool3DGrad",dU="MaxPoolWithArgmax",mD="Mean",gD="Min",vE="Minimum",yD="MirrorPad",bE="Mod",fU="Multinomial",xE="Multiply",vD="Neg",bD="NotEqual",hU="NonMaxSuppressionV3",pU="NonMaxSuppressionV4",mU="NonMaxSuppressionV5",xD="OnesLike",SD="OneHot",wD="Pack",CD="PadV2",SE="Pow",_D="Prelu",ED="Prod",gU="RaggedGather",yU="RaggedRange",vU="RaggedTensorToTensor",bU="Range",xU="Real",wE="Reciprocal",CE="Relu",AD="Reshape",TD="ResizeNearestNeighbor",SU="ResizeNearestNeighborGrad",MD="ResizeBilinear",wU="ResizeBilinearGrad",_E="Relu6",RD="Reverse",EE="Round",AE="Rsqrt",CU="ScatterNd",_U="TensorScatterUpdate",EU="SearchSorted",ND="Select",TE="Selu",ID="Slice",ME="Sin",RE="Sinh",NE="Sign",IE="Sigmoid",DE="Softplus",kE="Sqrt",DD="Sum",kD="SpaceToBatchND",OD="SplitV",BD="Softmax",AU="SparseFillEmptyRows",TU="SparseReshape",MU="SparseSegmentMean",RU="SparseSegmentSum",NU="SparseToDense",OE="SquaredDifference",IU="Square",$D="StaticRegexReplace",DU="StridedSlice",kU="StringNGrams",OU="StringSplit",BU="StringToHashBucketFast",BE="Sub",$E="Tan",LE="Tanh",FE="Tile",$U="TopK",LU="Transform",Lx="Transpose",FU="Unique",LD="Unpack",FD="UnsortedSegmentSum",PD="ZerosLike",PE="Step",kL="FromPixels",PU="RotateWithOffset",ZR="_FusedMatMul",QR="FusedConv2D",eN="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kc(...n){it().getBool("IS_TEST")||it().getBool("PROD")||console.warn(...n)}function hTe(...n){it().getBool("IS_TEST")||it().getBool("PROD")||console.log(...n)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tN=B4("kernelRegistry",()=>new Map),OL=B4("gradRegistry",()=>new Map);function BL(n,e){const t=AZ(n,e);return tN.get(t)}function Z9(n){return OL.get(n)}function Q9(n){const e=tN.entries(),t=[];for(;;){const{done:r,value:i}=e.next();if(r)break;const[s,a]=i,[o]=s.split("_");o===n&&t.push(a)}return t}function EZ(n){const{kernelName:e,backendName:t}=n,r=AZ(e,t);tN.has(r)&&Kc(`The kernel '${e}' for backend '${t}' is already registered`),tN.set(r,n)}function pTe(n){const{kernelName:e}=n;OL.has(e)&&it().getBool("DEBUG")&&Kc(`Overriding the gradient for '${e}'`),OL.set(e,n)}function AZ(n,e){return`${e}_${n}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TZ(n){return n instanceof Float32Array||n instanceof Int32Array||n instanceof Uint8Array||n instanceof Uint8ClampedArray}var BB,eW;function mTe(){if(eW)return BB;eW=1,BB=e;var n=null;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function e(I,k,P){this.low=I|0,this.high=k|0,this.unsigned=!!P}e.prototype.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0});function t(I){return(I&&I.__isLong__)===!0}e.isLong=t;var r={},i={};function s(I,k){var P,G,W;return k?(I>>>=0,(W=0<=I&&I<256)&&(G=i[I],G)?G:(P=o(I,(I|0)<0?-1:0,!0),W&&(i[I]=P),P)):(I|=0,(W=-128<=I&&I<128)&&(G=r[I],G)?G:(P=o(I,I<0?-1:0,!1),W&&(r[I]=P),P))}e.fromInt=s;function a(I,k){if(isNaN(I))return k?C:x;if(k){if(I<0)return C;if(I>=g)return L}else{if(I<=-v)return $;if(I+1>=v)return R}return I<0?a(-I,k).neg():o(I%p|0,I/p|0,k)}e.fromNumber=a;function o(I,k,P){return new e(I,k,P)}e.fromBits=o;var l=Math.pow;function c(I,k,P){if(I.length===0)throw Error("empty string");if(I==="NaN"||I==="Infinity"||I==="+Infinity"||I==="-Infinity")return x;if(typeof k=="number"?(P=k,k=!1):k=!!k,P=P||10,P<2||36<P)throw RangeError("radix");var G;if((G=I.indexOf("-"))>0)throw Error("interior hyphen");if(G===0)return c(I.substring(1),k,P).neg();for(var W=a(l(P,8)),X=x,z=0;z<I.length;z+=8){var J=Math.min(8,I.length-z),Q=parseInt(I.substring(z,z+J),P);if(J<8){var Y=a(l(P,J));X=X.mul(Y).add(a(Q))}else X=X.mul(W),X=X.add(a(Q))}return X.unsigned=k,X}e.fromString=c;function u(I,k){return typeof I=="number"?a(I,k):typeof I=="string"?c(I,k):o(I.low,I.high,typeof k=="boolean"?k:I.unsigned)}e.fromValue=u;var d=65536,h=1<<24,p=d*d,g=p*p,v=g/2,b=s(h),x=s(0);e.ZERO=x;var C=s(0,!0);e.UZERO=C;var E=s(1);e.ONE=E;var _=s(1,!0);e.UONE=_;var M=s(-1);e.NEG_ONE=M;var R=o(-1,2147483647,!1);e.MAX_VALUE=R;var L=o(-1,-1,!0);e.MAX_UNSIGNED_VALUE=L;var $=o(0,-2147483648,!1);e.MIN_VALUE=$;var N=e.prototype;return N.toInt=function(){return this.unsigned?this.low>>>0:this.low},N.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},N.toString=function(k){if(k=k||10,k<2||36<k)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq($)){var P=a(k),G=this.div(P),W=G.mul(P).sub(this);return G.toString(k)+W.toInt().toString(k)}else return"-"+this.neg().toString(k);for(var X=a(l(k,6),this.unsigned),z=this,J="";;){var Q=z.div(X),Y=z.sub(Q.mul(X)).toInt()>>>0,q=Y.toString(k);if(z=Q,z.isZero())return q+J;for(;q.length<6;)q="0"+q;J=""+q+J}},N.getHighBits=function(){return this.high},N.getHighBitsUnsigned=function(){return this.high>>>0},N.getLowBits=function(){return this.low},N.getLowBitsUnsigned=function(){return this.low>>>0},N.getNumBitsAbs=function(){if(this.isNegative())return this.eq($)?64:this.neg().getNumBitsAbs();for(var k=this.high!=0?this.high:this.low,P=31;P>0&&(k&1<<P)==0;P--);return this.high!=0?P+33:P+1},N.isZero=function(){return this.high===0&&this.low===0},N.eqz=N.isZero,N.isNegative=function(){return!this.unsigned&&this.high<0},N.isPositive=function(){return this.unsigned||this.high>=0},N.isOdd=function(){return(this.low&1)===1},N.isEven=function(){return(this.low&1)===0},N.equals=function(k){return t(k)||(k=u(k)),this.unsigned!==k.unsigned&&this.high>>>31===1&&k.high>>>31===1?!1:this.high===k.high&&this.low===k.low},N.eq=N.equals,N.notEquals=function(k){return!this.eq(k)},N.neq=N.notEquals,N.ne=N.notEquals,N.lessThan=function(k){return this.comp(k)<0},N.lt=N.lessThan,N.lessThanOrEqual=function(k){return this.comp(k)<=0},N.lte=N.lessThanOrEqual,N.le=N.lessThanOrEqual,N.greaterThan=function(k){return this.comp(k)>0},N.gt=N.greaterThan,N.greaterThanOrEqual=function(k){return this.comp(k)>=0},N.gte=N.greaterThanOrEqual,N.ge=N.greaterThanOrEqual,N.compare=function(k){if(t(k)||(k=u(k)),this.eq(k))return 0;var P=this.isNegative(),G=k.isNegative();return P&&!G?-1:!P&&G?1:this.unsigned?k.high>>>0>this.high>>>0||k.high===this.high&&k.low>>>0>this.low>>>0?-1:1:this.sub(k).isNegative()?-1:1},N.comp=N.compare,N.negate=function(){return!this.unsigned&&this.eq($)?$:this.not().add(E)},N.neg=N.negate,N.add=function(k){t(k)||(k=u(k));var P=this.high>>>16,G=this.high&65535,W=this.low>>>16,X=this.low&65535,z=k.high>>>16,J=k.high&65535,Q=k.low>>>16,Y=k.low&65535,q=0,te=0,ne=0,le=0;return le+=X+Y,ne+=le>>>16,le&=65535,ne+=W+Q,te+=ne>>>16,ne&=65535,te+=G+J,q+=te>>>16,te&=65535,q+=P+z,q&=65535,o(ne<<16|le,q<<16|te,this.unsigned)},N.subtract=function(k){return t(k)||(k=u(k)),this.add(k.neg())},N.sub=N.subtract,N.multiply=function(k){if(this.isZero())return x;if(t(k)||(k=u(k)),n){var P=n.mul(this.low,this.high,k.low,k.high);return o(P,n.get_high(),this.unsigned)}if(k.isZero())return x;if(this.eq($))return k.isOdd()?$:x;if(k.eq($))return this.isOdd()?$:x;if(this.isNegative())return k.isNegative()?this.neg().mul(k.neg()):this.neg().mul(k).neg();if(k.isNegative())return this.mul(k.neg()).neg();if(this.lt(b)&&k.lt(b))return a(this.toNumber()*k.toNumber(),this.unsigned);var G=this.high>>>16,W=this.high&65535,X=this.low>>>16,z=this.low&65535,J=k.high>>>16,Q=k.high&65535,Y=k.low>>>16,q=k.low&65535,te=0,ne=0,le=0,ye=0;return ye+=z*q,le+=ye>>>16,ye&=65535,le+=X*q,ne+=le>>>16,le&=65535,le+=z*Y,ne+=le>>>16,le&=65535,ne+=W*q,te+=ne>>>16,ne&=65535,ne+=X*Y,te+=ne>>>16,ne&=65535,ne+=z*Q,te+=ne>>>16,ne&=65535,te+=G*q+W*Y+X*Q+z*J,te&=65535,o(le<<16|ye,te<<16|ne,this.unsigned)},N.mul=N.multiply,N.divide=function(k){if(t(k)||(k=u(k)),k.isZero())throw Error("division by zero");if(n){if(!this.unsigned&&this.high===-2147483648&&k.low===-1&&k.high===-1)return this;var P=(this.unsigned?n.div_u:n.div_s)(this.low,this.high,k.low,k.high);return o(P,n.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?C:x;var G,W,X;if(this.unsigned){if(k.unsigned||(k=k.toUnsigned()),k.gt(this))return C;if(k.gt(this.shru(1)))return _;X=C}else{if(this.eq($)){if(k.eq(E)||k.eq(M))return $;if(k.eq($))return E;var z=this.shr(1);return G=z.div(k).shl(1),G.eq(x)?k.isNegative()?E:M:(W=this.sub(k.mul(G)),X=G.add(W.div(k)),X)}else if(k.eq($))return this.unsigned?C:x;if(this.isNegative())return k.isNegative()?this.neg().div(k.neg()):this.neg().div(k).neg();if(k.isNegative())return this.div(k.neg()).neg();X=x}for(W=this;W.gte(k);){G=Math.max(1,Math.floor(W.toNumber()/k.toNumber()));for(var J=Math.ceil(Math.log(G)/Math.LN2),Q=J<=48?1:l(2,J-48),Y=a(G),q=Y.mul(k);q.isNegative()||q.gt(W);)G-=Q,Y=a(G,this.unsigned),q=Y.mul(k);Y.isZero()&&(Y=E),X=X.add(Y),W=W.sub(q)}return X},N.div=N.divide,N.modulo=function(k){if(t(k)||(k=u(k)),n){var P=(this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,k.low,k.high);return o(P,n.get_high(),this.unsigned)}return this.sub(this.div(k).mul(k))},N.mod=N.modulo,N.rem=N.modulo,N.not=function(){return o(~this.low,~this.high,this.unsigned)},N.and=function(k){return t(k)||(k=u(k)),o(this.low&k.low,this.high&k.high,this.unsigned)},N.or=function(k){return t(k)||(k=u(k)),o(this.low|k.low,this.high|k.high,this.unsigned)},N.xor=function(k){return t(k)||(k=u(k)),o(this.low^k.low,this.high^k.high,this.unsigned)},N.shiftLeft=function(k){return t(k)&&(k=k.toInt()),(k&=63)===0?this:k<32?o(this.low<<k,this.high<<k|this.low>>>32-k,this.unsigned):o(0,this.low<<k-32,this.unsigned)},N.shl=N.shiftLeft,N.shiftRight=function(k){return t(k)&&(k=k.toInt()),(k&=63)===0?this:k<32?o(this.low>>>k|this.high<<32-k,this.high>>k,this.unsigned):o(this.high>>k-32,this.high>=0?0:-1,this.unsigned)},N.shr=N.shiftRight,N.shiftRightUnsigned=function(k){if(t(k)&&(k=k.toInt()),k&=63,k===0)return this;var P=this.high;if(k<32){var G=this.low;return o(G>>>k|P<<32-k,P>>>k,this.unsigned)}else return k===32?o(P,0,this.unsigned):o(P>>>k-32,0,this.unsigned)},N.shru=N.shiftRightUnsigned,N.shr_u=N.shiftRightUnsigned,N.toSigned=function(){return this.unsigned?o(this.low,this.high,!1):this},N.toUnsigned=function(){return this.unsigned?this:o(this.low,this.high,!0)},N.toBytes=function(k){return k?this.toBytesLE():this.toBytesBE()},N.toBytesLE=function(){var k=this.high,P=this.low;return[P&255,P>>>8&255,P>>>16&255,P>>>24,k&255,k>>>8&255,k>>>16&255,k>>>24]},N.toBytesBE=function(){var k=this.high,P=this.low;return[k>>>24,k>>>16&255,k>>>8&255,k&255,P>>>24,P>>>16&255,P>>>8&255,P&255]},e.fromBytes=function(k,P,G){return G?e.fromBytesLE(k,P):e.fromBytesBE(k,P)},e.fromBytesLE=function(k,P){return new e(k[0]|k[1]<<8|k[2]<<16|k[3]<<24,k[4]|k[5]<<8|k[6]<<16|k[7]<<24,P)},e.fromBytesBE=function(k,P){return new e(k[4]<<24|k[5]<<16|k[6]<<8|k[7],k[0]<<24|k[1]<<16|k[2]<<8|k[3],P)},BB}var MZ=mTe();const RZ=qp(MZ),gTe=Aq({__proto__:null,default:RZ},[MZ]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wy=RZ||gTe;function UD(n){return wy.fromString(n,!0,16)}const NZ=UD("c3a5c85c97cb3127"),yy=UD("b492b66fbe98f273"),Jo=UD("9ae16a3b2f90404f");function $L(n){return n.xor(n.shru(47))}function IZ(n,e,t){const r=n.slice(e,e+t);return wy.fromBytes(Array.from(r),!0,!0)}function Zi(n,e){return IZ(n,e,8)}function tW(n,e){return IZ(n,e,4)}function $a(n,e){return e===0?n:n.shru(e).or(n.shl(64-e))}function hg(n,e,t=UD("9ddfea08eb382d69")){let r=n.xor(e).mul(t);r=r.xor(r.shru(47));let i=e.xor(r).mul(t);return i=i.xor(i.shru(47)),i=i.mul(t),i}function yTe(n,e,t,r,i,s){i=i.add(n),s=$a(s.add(i).add(r),21);const a=i;return i=i.add(e),i=i.add(t),s=s.add($a(i,44)),[i.add(r),s.add(a)]}function UT(n,e,t,r){return yTe(Zi(n,e),Zi(n,e+8),Zi(n,e+16),Zi(n,e+24),t,r)}function vTe(n,e=n.length){if(e>=8){const t=Jo.add(e*2),r=Zi(n,0).add(Jo),i=Zi(n,e-8),s=$a(i,37).mul(t).add(r),a=$a(r,25).add(i).mul(t);return hg(s,a,t)}if(e>=4){const t=Jo.add(e*2),r=tW(n,0);return hg(r.shl(3).add(e),tW(n,e-4),t)}if(e>0){const t=n[0],r=n[e>>1],i=n[e-1],s=t+(r<<8),a=e+(i<<2);return $L(Jo.mul(s).xor(NZ.mul(a))).mul(Jo)}return Jo}function bTe(n,e=n.length){const t=Jo.add(e*2),r=Zi(n,0).mul(yy),i=Zi(n,8),s=Zi(n,e-8).mul(t),a=Zi(n,e-16).mul(Jo);return hg($a(r.add(i),43).add($a(s,30)).add(a),r.add($a(i.add(Jo),18)).add(s),t)}function xTe(n,e=n.length){const t=Jo.add(e*2),r=Zi(n,0).mul(Jo),i=Zi(n,8),s=Zi(n,e-8).mul(t),a=Zi(n,e-16).mul(Jo),o=$a(r.add(i),43).add($a(s,30)).add(a),l=hg(o,r.add($a(i.add(Jo),18)).add(s),t),c=Zi(n,16).mul(t),u=Zi(n,24),d=o.add(Zi(n,e-32)).mul(t),h=l.add(Zi(n,e-24)).mul(t);return hg($a(c.add(u),43).add($a(d,30)).add(h),c.add($a(u.add(r),18)).add(d),t)}function STe(n,e=n.length){const t=wy.fromNumber(81,!0);if(e<=32)return e<=16?vTe(n,e):bTe(n,e);if(e<=64)return xTe(n,e);let r=t,i=t.mul(yy).add(113),s=$L(i.mul(Jo).add(113)).mul(Jo),a=[wy.UZERO,wy.UZERO],o=[wy.UZERO,wy.UZERO];r=r.mul(Jo).add(Zi(n,0));let l=0;const c=(e-1>>6)*64,u=c+(e-1&63)-63;do r=$a(r.add(i).add(a[0]).add(Zi(n,l+8)),37).mul(yy),i=$a(i.add(a[1]).add(Zi(n,l+48)),42).mul(yy),r=r.xor(o[1]),i=i.add(a[0]).add(Zi(n,l+40)),s=$a(s.add(o[0]),33).mul(yy),a=UT(n,l,a[1].mul(yy),r.add(o[0])),o=UT(n,l+32,s.add(o[1]),i.add(Zi(n,l+16))),[s,r]=[r,s],l+=64;while(l!==c);const d=yy.add(s.and(255).shl(1));return l=u,o[0]=o[0].add(e-1&63),a[0]=a[0].add(o[0]),o[0]=o[0].add(a[0]),r=$a(r.add(i).add(a[0]).add(Zi(n,l+8)),37).mul(d),i=$a(i.add(a[1]).add(Zi(n,l+48)),42).mul(d),r=r.xor(o[1].mul(9)),i=i.add(a[0].mul(9).add(Zi(n,l+40))),s=$a(s.add(o[0]),33).mul(d),a=UT(n,l,a[1].mul(d),r.add(o[0])),o=UT(n,l+32,s.add(o[1]),i.add(Zi(n,l+16))),[s,r]=[r,s],hg(hg(a[0],o[0],d).add($L(i).mul(NZ)).add(s),hg(a[1],o[1],d).add(r),d)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vg(n,e){return e==="string"?pg(n):Tv([n],e)}function wTe(n,e){return n instanceof Float32Array&&e==="float32"||n instanceof Int32Array&&e==="int32"||n instanceof Uint8Array&&e==="bool"}function Tv(n,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(n)&&(n=ov(n)),it().getBool("DEBUG")&&QAe(n,e),wTe(n,e))return n;if(e==null||e==="float32"||e==="complex64")return new Float32Array(n);if(e==="int32")return new Int32Array(n);if(e==="bool"){const t=new Uint8Array(n.length);for(let r=0;r<t.length;++r)Math.round(n[r])!==0&&(t[r]=1);return t}else throw new Error(`Unknown data type ${e}`)}function Dl(){return it().platform.now()}function pg(n,e="utf-8"){return e=e||"utf-8",it().platform.encode(n,e)}function Eg(n,e="utf-8"){return e=e||"utf-8",it().platform.decode(n,e)}function Xu(n){return it().platform.isTypedArray!=null?it().platform.isTypedArray(n):TZ(n)}function ov(n,e=[],t=!1){if(e==null&&(e=[]),typeof n=="boolean"||typeof n=="number"||typeof n=="string"||av(n)||n==null||Xu(n)&&t)e.push(n);else if(Array.isArray(n)||Xu(n))for(let r=0;r<n.length;++r)ov(n[r],e,t);else{let r=-1;for(const i of Object.keys(n))/^([1-9]+[0-9]*|0)$/.test(i)&&(r=Math.max(r,Number(i)));for(let i=0;i<=r;i++)ov(n[i],e,t)}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CTe{constructor(e,t){this.backendTimer=e,this.logger=t,t==null&&(this.logger=new ETe)}profileKernel(e,t,r){let i;const s=()=>{i=r()};let a;const o=Dl();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(s);else{s();for(const c of i)c.dataSync();a=Promise.resolve({kernelMs:Dl()-o})}if(it().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<i.length;c++){const u=i[c];u.data().then(d=>{_Te(d,u.dtype,e)})}return{kernelName:e,outputs:i,inputs:t,timeMs:a.then(c=>c.kernelMs),extraInfo:a.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:t,outputs:r,timeMs:i,inputs:s,extraInfo:a}=e;r.forEach(o=>{Promise.all([o.data(),i,a]).then(l=>{this.logger.logKernelProfile(t,o,l[0],l[1],s,l[2])})})}}function _Te(n,e,t){if(e!=="float32")return!1;for(let r=0;r<n.length;r++){const i=n[r];if(isNaN(i)||!isFinite(i))return console.warn(`Found ${i} in the result of '${t}'`),!0}return!1}class ETe{logKernelProfile(e,t,r,i,s,a){const o=typeof i=="number"?$x(`${i}ms`,9):i.error,l=$x(e,25),c=t.rank,u=t.size,d=$x(t.shape.toString(),14);let h="";for(const p in s){const g=s[p];if(g!=null){const v=g.shape||t.shape,b=v.length;h+=`${p}: ${b}D ${b>0?v:""} `}}console.log(`%c${l}	%c${o}	%c${c}D ${d}	%c${u}	%c${h}	%c${a}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ATe(n,e,t){const r={},i={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<n.length;l++){const c=n[l],u=c.inputs;for(const d in u){const h=u[d];let p=!1;for(let g=0;g<e.length;g++)if(r[h.id]){c.outputs.forEach(v=>r[v.id]=!0),p=!0,i[c.id]=!0;break}if(p)break}}const s={};s[t.id]=!0;const a={};for(let l=n.length-1;l>=0;l--){const c=n[l],u=c.inputs;for(let d=0;d<c.outputs.length;d++)if(s[c.outputs[d].id]){for(const h in u)s[u[h].id]=!0,a[c.id]=!0;break}}const o=[];for(let l=0;l<n.length;l++){const c=n[l];if(i[c.id]&&a[c.id]){const u={};for(const h in c.inputs){const p=c.inputs[h];r[p.id]&&(u[h]=p)}const d=Object.assign({},c);d.inputs=u,d.outputs=c.outputs,o.push(d)}}return o}function TTe(n,e,t,r){for(let i=e.length-1;i>=0;i--){const s=e[i],a=[];if(s.outputs.forEach(l=>{const c=n[l.id];c!=null?a.push(c):a.push(null)}),s.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${s.kernelName}.`);const o=s.gradient(a);for(const l in s.inputs){if(!(l in o))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(o)}.`);const c=t(()=>o[l]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${c.dtype}'`);const u=s.inputs[l];if(!Vr(c.shape,u.shape))throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input '${l}' has shape '${c.shape}', which does not match the shape of the input '${u.shape}'`);if(n[u.id]==null)n[u.id]=c;else{const d=n[u.id];n[u.id]=r(d,c),d.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nW=20,Lw=3,$B=7;function MTe(n,e,t,r){const i=kn(e),s=RTe(n,e,t,i),a=e.length,o=vM(n,e,t,i,s),l=["Tensor"];return r&&(l.push(`  dtype: ${t}`),l.push(`  rank: ${a}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(o.map(c=>"    "+c).join(`
`)),l.join(`
`)}function RTe(n,e,t,r){const i=xt(e),s=r[r.length-1],a=new Array(s).fill(0),o=e.length,l=t==="complex64"?Qw(n):n;if(o>1)for(let c=0;c<i/s;c++){const u=c*s;for(let d=0;d<s;d++)a[d]=Math.max(a[d],Zw(l[u+d],0,t).length)}return a}function Zw(n,e,t){let r;return Array.isArray(n)?r=`${parseFloat(n[0].toFixed($B))} + ${parseFloat(n[1].toFixed($B))}j`:G_(n)?r=`'${n}'`:t==="bool"?r=DZ(n):r=parseFloat(n.toFixed($B)).toString(),$x(r,e)}function DZ(n){return n===0?"false":"true"}function vM(n,e,t,r,i,s=!0){const a=t==="complex64"?2:1,o=e[0],l=e.length;if(l===0){if(t==="complex64"){const v=Qw(n);return[Zw(v[0],0,t)]}return t==="bool"?[DZ(n[0])]:[n[0].toString()]}if(l===1){if(o>nW){const b=Lw*a;let x=Array.from(n.slice(0,b)),C=Array.from(n.slice((o-Lw)*a,o*a));return t==="complex64"&&(x=Qw(x),C=Qw(C)),["["+x.map((E,_)=>Zw(E,i[_],t)).join(", ")+", ..., "+C.map((E,_)=>Zw(E,i[o-Lw+_],t)).join(", ")+"]"]}return["["+(t==="complex64"?Qw(n):Array.from(n)).map((b,x)=>Zw(b,i[x],t)).join(", ")+"]"]}const c=e.slice(1),u=r.slice(1),d=r[0]*a,h=[];if(o>nW){for(let v=0;v<Lw;v++){const b=v*d,x=b+d;h.push(...vM(n.slice(b,x),c,t,u,i,!1))}h.push("...");for(let v=o-Lw;v<o;v++){const b=v*d,x=b+d;h.push(...vM(n.slice(b,x),c,t,u,i,v===o-1))}}else for(let v=0;v<o;v++){const b=v*d,x=b+d;h.push(...vM(n.slice(b,x),c,t,u,i,v===o-1))}const p=l===2?",":"";h[0]="["+(o>0?h[0]+p:"");for(let v=1;v<h.length-1;v++)h[v]=" "+h[v]+p;let g=`,
`;for(let v=2;v<l;v++)g+=`
`;return h[h.length-1]=" "+h[h.length-1]+"]"+(s?"":g),h}function Qw(n){const e=[];for(let t=0;t<n.length;t+=2)e.push([n[t],n[t+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ca{constructor(e,t,r){if(this.dtype=t,this.shape=e.slice(),this.size=xt(e),r!=null){const i=r.length;de(i===this.size,()=>`Length of values '${i}' does not match the size inferred by the shape '${this.size}'.`)}if(t==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||js(t,this.size),this.strides=kn(e)}set(e,...t){t.length===0&&(t=[0]),de(t.length===this.rank,()=>`The number of provided coordinates (${t.length}) must match the rank (${this.rank})`);const r=this.locToIndex(t);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let t=0;for(const i of e){if(i<0||i>=this.shape[t]){const s=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(s)}t++}let r=e[e.length-1];for(let i=0;i<e.length-1;++i)r+=this.strides[i]*e[i];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let t=e[e.length-1];for(let r=0;r<e.length-1;++r)t+=this.strides[r]*e[r];return t}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const t=new Array(this.shape.length);for(let r=0;r<t.length-1;++r)t[r]=Math.floor(e/this.strides[r]),e-=t[r]*this.strides[r];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return Wd().makeTensor(this.values,this.shape,this.dtype)}}let Wd=null,wx=null;function NTe(n){Wd=n}function ITe(n){wx=n}class ji{constructor(e,t,r,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=xt(e),this.strides=kn(e),this.dataId=r,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return wx.buffer(this.shape,this.dtype,e)}bufferSync(){return wx.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return Gu(this.shape,e,this.dtype==="complex64")}arraySync(){return Gu(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=Wd().read(this.dataId);if(this.dtype==="string"){const t=await e;try{return t.map(r=>Eg(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),Wd().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=Wd().readSync(this.dataId);if(this.dtype==="string")try{return e.map(t=>Eg(t))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await Wd().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),Wd().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return wx.print(this,e)}clone(){return this.throwIfDisposed(),wx.clone(this)}toString(e=!1){const t=this.dataSync();return MTe(t,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),wx.cast(this,e)}variable(e=!0,t,r){return this.throwIfDisposed(),Wd().makeVariable(this,e,t,r)}}Object.defineProperty(ji,Symbol.hasInstance,{value:n=>!!n&&n.data!=null&&n.dataSync!=null&&n.throwIfDisposed!=null});function Ct(){return B4("Tensor",()=>ji)}Ct();class nN extends ji{constructor(e,t,r,i){super(e.shape,e.dtype,e.dataId,i),this.trainable=t,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!Vr(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);Wd().disposeTensor(this),this.dataId=e.dataId,Wd().incRef(this,null)}dispose(){Wd().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(nN,Symbol.hasInstance,{value:n=>n instanceof ji&&n.assign!=null&&n.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var rW;(function(n){n.R0="R0",n.R1="R1",n.R2="R2",n.R3="R3",n.R4="R4",n.R5="R5",n.R6="R6"})(rW||(rW={}));var LL;(function(n){n.float32="float32",n.int32="int32",n.bool="int32",n.complex64="complex64"})(LL||(LL={}));var FL;(function(n){n.float32="float32",n.int32="int32",n.bool="bool",n.complex64="complex64"})(FL||(FL={}));var PL;(function(n){n.float32="float32",n.int32="float32",n.bool="float32",n.complex64="complex64"})(PL||(PL={}));var UL;(function(n){n.float32="complex64",n.int32="complex64",n.bool="complex64",n.complex64="complex64"})(UL||(UL={}));const DTe={float32:PL,int32:LL,bool:FL,complex64:UL};function _c(n,e){if(n==="string"||e==="string"){if(n==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${n} with ${e}`)}return DTe[n][e]}function UU(n){return _c(n,"int32")}function kZ(n){return n!=null&&typeof n=="object"&&"texture"in n&&n.texture instanceof WebGLTexture}function OZ(n){return typeof GPUBuffer<"u"&&n!=null&&typeof n=="object"&&"buffer"in n&&n.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bs(n,e){if(n.dtype===e.dtype)return[n,e];const t=_c(n.dtype,e.dtype);return[n.cast(t),e.cast(t)]}function kTe(n,e){de(n.dtype===e.dtype,()=>`The dtypes of the first(${n.dtype}) and second(${e.dtype}) input must match`)}function BZ(n){const e=[];return $Z(n,e,new Set),e}function $Z(n,e,t){if(n==null)return;if(n instanceof ji){e.push(n);return}if(!OTe(n))return;const r=n;for(const i in r){const s=r[i];t.has(s)||(t.add(s),$Z(s,e,t))}}function OTe(n){return Array.isArray(n)||typeof n=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LB(n){return n.kernelName!=null}class iW{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class d1{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new iW}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const r=e[t];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:t}=this.initializeBackend(e);if(t)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t,r=1){return e in this.registryFactory?(Kc(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:t,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:t,asyncInit:r}=this.initializeBackend(e);if(!(r?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new CTe(this.backendInstance),!0}setupRegisteredKernels(){Q9(this.backendName).forEach(t=>{t.setupFunc!=null&&t.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){Q9(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const t=this.registryFactory[e];if(t==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=t.factory();if(r&&!(r instanceof D4)&&typeof r.then=="function"){const i=++this.pendingBackendInitId,s=r.then(a=>i<this.pendingBackendInitId?!1:(this.registry[e]=a,this.pendingBackendInit=null,!0)).catch(a=>(i<this.pendingBackendInitId||(this.pendingBackendInit=null,Kc(`Initialization of backend ${e} failed`),Kc(a.stack||a.message)),!1));return this.pendingBackendInit=s,{success:s,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return Kc(`Initialization of backend ${e} failed`),Kc(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const r=e[t],{success:i,asyncInit:s}=this.initializeBackend(r);if(s||i)return{name:r,asyncInit:s}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){const r=this.state.tensorInfo.get(t),i=r.backend,s=this.readSync(t),a=i.refCount(t);i.disposeData(t,!0),r.backend=e,e.move(t,s,r.shape,r.dtype,a),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let r=null;if(t==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");t=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof t!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let i;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(i),()=>(i=t(),i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),i))}scopedRun(e,t,r){e();try{const i=r();return t(),i}catch(i){throw t(),i}}nextTensorId(){return d1.nextTensorId++}nextVariableId(){return d1.nextVariableId++}clone(e){const t=Be.runKernel(dE,{x:e}),r={x:e},i=a=>({x:()=>{const o="float32",l={x:a},c={dtype:o};return Be.runKernel(Z_,l,c)}}),s=[];return this.addTapeNode(this.state.activeScope.name,r,[t],i,s,{}),t}runKernel(e,t,r){if(this.backendName==null&&this.backend,!(BL(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:t,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,r){const i=this.backend.numDataIds();let s=0;r.forEach(l=>{s+=l.dtype==="complex64"?3:1});const a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=i-t-s-a;if(o>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${o} data ids) after running '${e}'`)}runKernelFunc(e){let t,r=[];const i=this.isTapeOn(),s=this.state.numBytes,a=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let o;this.backendName==null&&this.backend;let l;const c=LB(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(LB(e)){const{kernelName:g,inputs:v,attrs:b}=e;this.backendName==null&&this.backend;const x=BL(g,this.backendName);de(x!=null,()=>`Cannot find registered kernel '${g}' for backend '${this.backendName}'`),o=()=>{const C=this.backend.numDataIds();l=x.kernelFunc({inputs:v,attrs:b,backend:this.backend});const E=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(g,C,E);const _=E.map(M=>M.rank!=null?M:this.makeTensorFromTensorInfo(M));if(i){const M=this.getTensorsForGradient(g,v,_);r=this.saveTensorsForBackwardMode(M)}return _}}else{const{forwardFunc:g}=e,v=b=>{i&&(r=b.map(x=>this.keep(this.clone(x))))};o=()=>{const b=this.backend.numDataIds();l=this.tidy(()=>g(this.backend,v));const x=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(c,b,x),x}}const{inputs:u,attrs:d}=e,h=LB(e)?null:e.backwardsFunc;let p;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?t=o():(p=this.profiler.profileKernel(c,u,()=>o()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(p),t=p.outputs)}),i&&this.addTapeNode(c,u,t,h,r,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-a,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(u).map(g=>u[g]!=null?u[g].shape:null),outputShapes:t.map(g=>g.shape),kernelTimeMs:p.timeMs,extraInfo:p.extraInfo}),Array.isArray(l)?t:t[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,t,r){const i=Z9(e);if(i!=null){const s=i.inputsToSave||[],a=i.outputsToSave||[];let o;i.saveAllInputs?(de(Array.isArray(t),()=>"saveAllInputs is true, expected inputs to be an array."),o=Object.keys(t).map(c=>t[c])):o=s.map(c=>t[c]);const l=r.filter((c,u)=>a[u]);return o.concat(l)}return[]}makeTensor(e,t,r,i){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",i=i||this.backend;let s=e;r==="string"&&G_(e[0])&&(s=e.map(l=>pg(l)));const a=i.write(s,t,r),o=new ji(t,r,a,this.nextTensorId());if(this.trackTensor(o,i),r==="string"){const l=this.state.tensorInfo.get(a),c=tTe(s);this.state.numBytes+=c-l.bytes,l.bytes=c}return o}makeTensorFromDataId(e,t,r,i){r=r||"float32";const s={dataId:e,shape:t,dtype:r};return this.makeTensorFromTensorInfo(s,i)}makeTensorFromTensorInfo(e,t){const{dataId:r,shape:i,dtype:s}=e,a=new ji(i,s,r,this.nextTensorId());return this.trackTensor(a,t),a}makeVariable(e,t=!0,r,i){r=r||this.nextVariableId().toString(),i!=null&&i!==e.dtype&&(e=e.cast(i));const s=new nN(e,t,r,this.nextTensorId());if(this.state.registeredVariables[s.name]!=null)throw new Error(`Variable with name ${s.name} was already registered`);return this.state.registeredVariables[s.name]=s,this.incRef(s,this.backend),s}trackTensor(e,t){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*JR(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof nN||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*JR(e.dtype);this.state.numBytes-=r}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const t=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(i=>i.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const i of this.state.activeProfile.kernels)i.kernelTimeMs=await i.kernelTimeMs,i.extraInfo=await i.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,t,r,i,s,a){const o={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:r,saved:s},l=Z9(e);l!=null&&(i=l.gradFunc),i!=null&&(o.gradient=c=>(c=c.map((u,d)=>{if(u==null){const h=r[d],p=Io(h.size,h.dtype);return this.makeTensor(p,h.shape,h.dtype)}return u}),i(c.length>1?c:c[0],s,a))),this.state.activeTape.push(o)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){const t=BZ(e),r=new Set(t.map(s=>s.id));for(let s=0;s<this.state.activeScope.track.length;s++){const a=this.state.activeScope.track[s];!a.kept&&!r.has(a.id)&&a.dispose()}const i=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach(s=>{!s.kept&&s.scopeId===i.id&&this.track(s)})}gradients(e,t,r,i=!1){if(de(t.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const s=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));de(s instanceof ji,()=>"The result y returned by f() must be a tensor.");const a=ATe(this.state.activeTape,t,s);if(!i&&a.length===0&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const o={};o[s.id]=r??BTe(s.shape),TTe(o,a,c=>this.tidy(c),$Te);const l=t.map(c=>o[c.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(c=>{for(const u of c.saved)u.dispose()}),this.state.activeTape=null),{value:s,grads:l}})}customGrad(e){return de(RL(e),()=>"The f passed in customGrad(f) must be a function."),(...t)=>{de(t.every(o=>o instanceof ji),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const i={};t.forEach((o,l)=>{i[l]=o});const s=(o,l)=>(r=e(...t,l),de(r.value instanceof ji,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),de(RL(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),a=(o,l)=>{const c=r.gradFunc(o,l),u=Array.isArray(c)?c:[c];de(u.length===t.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),de(u.every(h=>h instanceof ji),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const d={};return u.forEach((h,p)=>{d[p]=()=>h}),d};return this.runKernelFunc({forwardFunc:s,backwardsFunc:a,inputs:i})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}async time(e){const t=Dl(),r=await this.backend.time(e);return r.wallMs=Dl()-t,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new iW;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}d1.nextTensorId=0;d1.nextVariableId=0;function BTe(n){const e=O4(xt(n),"float32");return Be.makeTensor(e,n,"float32")}function LZ(){const n=_Z();if(n._tfengine==null){const e=new iTe(n);n._tfengine=new d1(e)}return lTe(n._tfengine.ENV),NTe(()=>n._tfengine),n._tfengine}const Be=LZ();function $Te(n,e){const t={a:n,b:e};return Be.runKernel(V1,t)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LTe(){return typeof navigator<"u"&&navigator!=null}function FZ(n){if(n||LTe()){if(n||(n=navigator),n.product==="ReactNative")return!0;const e=n.userAgent||n.vendor||(typeof window<"u"?window.opera:"");if(!e){const t=n;return t.userAgentData&&t.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function PZ(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ul=it();Ul.registerFlag("DEBUG",()=>!1,n=>{n&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Ul.registerFlag("IS_BROWSER",()=>PZ());Ul.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Ul.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Ul.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));Ul.registerFlag("PROD",()=>!1);Ul.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Ul.getBool("DEBUG"));Ul.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Ul.registerFlag("IS_TEST",()=>!1);Ul.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>Ul.getBool("DEBUG"));Ul.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);Ul.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);Ul.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gg(n,e){let t=n;if(Xu(n))return e==="string"?[]:[n.length];if(kZ(n)){const i=n.channels||"RGBA";return[n.height,n.width*i.length]}else if(OZ(n))return[n.buffer.size/(e==null?4:JR(e))];if(!Array.isArray(n))return[];const r=[];for(;Array.isArray(t)||Xu(t)&&e!=="string";)r.push(t.length),t=t[0];return Array.isArray(n)&&it().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&UZ(n,r,[]),r}function UZ(n,e,t){if(t=t||[],!Array.isArray(n)&&!Xu(n)){de(e.length===0,()=>`Element arr[${t.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}de(e.length>0,()=>`Element arr[${t.join("][")}] should be a primitive, but is an array of ${n.length} elements`),de(n.length===e[0],()=>`Element arr[${t.join("][")}] should have ${e[0]} elements, but has ${n.length} elements`);const r=e.slice(1);for(let i=0;i<n.length;++i)UZ(n[i],r,t.concat(i))}function sW(n,e,t,r){if(n!=="string_or_numeric"){if(n==null)throw new Error("Expected dtype cannot be null.");if(n!=="numeric"&&n!==e||n==="numeric"&&e==="string")throw new Error(`Argument '${t}' passed to '${r}' must be ${n} tensor, but got ${e} tensor`)}}function he(n,e,t,r="numeric"){if(n instanceof Ct())return sW(r,n.dtype,e,t),n;let i=z1(n);if(i!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),sW(r,i,e,t),n==null||!Xu(n)&&!Array.isArray(n)&&typeof n!="number"&&typeof n!="boolean"&&typeof n!="string"){const l=n==null?"null":n.constructor.name;throw new Error(`Argument '${e}' passed to '${t}' must be a Tensor or TensorLike, but got '${l}'`)}const s=Gg(n,i);!Xu(n)&&!Array.isArray(n)&&(n=[n]);const o=i!=="string"?Tv(n,i):ov(n,[],!0);return Be.makeTensor(o,s,i)}function rN(n,e,t,r="numeric"){if(!Array.isArray(n))throw new Error(`Argument ${e} passed to ${t} must be a \`Tensor[]\` or \`TensorLike[]\``);return n.map((s,a)=>he(s,`${e}[${a}]`,t,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zZ="__op";function Ie(n){const e=Object.keys(n);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let t=e[0];const r=n[t];t.endsWith("_")&&(t=t.substring(0,t.length-1)),t=t+zZ;const i=(...s)=>{Be.startScope(t);try{const a=r(...s);return av(a)&&console.error("Cannot return a Promise inside of tidy."),Be.endScope(a),a}catch(a){throw Be.endScope(null),a}};return Object.defineProperty(i,"name",{value:t,configurable:!0}),i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FTe(n,e){const t=he(n,"real","complex"),r=he(e,"imag","complex");Rc(t.shape,r.shape,`real and imag shapes, ${t.shape} and ${r.shape}, must match in call to tf.complex().`);const i={real:t,imag:r};return Be.runKernel(H4,i)}const Ag=Ie({complex_:FTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wg(n,e,t,r){if(r==null)r=z1(n);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(OZ(n)||kZ(n)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return Be.backend.createTensorFromGPUData(n,e||t,r)}if(!Xu(n)&&!Array.isArray(n)&&typeof n!="number"&&typeof n!="boolean"&&typeof n!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){iu(e);const i=xt(e),s=xt(t);de(i===s,()=>`Based on the provided shape, [${e}], the tensor should have ${i} values but has ${s}`);for(let a=0;a<t.length;++a){const o=t[a],l=a===t.length-1?o!==xt(e.slice(a)):!0;de(t[a]===e[a]||!l,()=>`Error creating a new Tensor. Inferred shape (${t}) does not match the provided shape (${e}). `)}}return!Xu(n)&&!Array.isArray(n)&&(n=[n]),e=e||t,n=r!=="string"?Tv(n,r):ov(n,[],!0),Be.makeTensor(n,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zd(n,e,t){const r=Gg(n,t);return Wg(n,e,r,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lv={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class pf{static join(e){return new pf(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>Xu(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let t=0;for(let r=0;r<e.length;r++){const i=e[r];r!==e.length-1&&i.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const s=t+i.byteLength;this.shards.push({buffer:i,start:t,end:s}),t=s}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,t=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,t=isNaN(Number(t))?0:t,e=Math.max(0,e),t=Math.min(this.byteLength,t),t<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const i=t-e,s=new ArrayBuffer(i),a=new Uint8Array(s);let o=0;for(let l=r;l<this.shards.length;l++){const c=this.shards[l],d=e+o-c.start,h=o,g=Math.min(t,c.end)-c.start,v=new Uint8Array(c.buffer,d,g-d);if(a.set(v,h),o+=v.length,t<c.end)break}return s}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function t(i){return e<i.start?-1:e>=i.end?1:0}if(t(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=PTe(this.shards,t);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function PTe(n,e){let t=0,r=n.length;for(;t<=r;){const i=Math.floor((r-t)/2)+t,s=e(n[i]);if(s===0)return i;s<0?r=i:t=i+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qf(){return Be}function aW(){return Be.memory()}function Ye(n,e){return Be.tidy(n,e)}function rr(n){BZ(n).forEach(t=>t.dispose())}function Fa(n){return Be.keep(n)}function UTe(){return Be.ready()}function HZ(){return Be.backendName}function VZ(n,e,t=1){return Be.registerBackend(n,e,t)}function GZ(){return Be.backend}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tg=4;async function zL(n,e){const t=[],r=[],i=Array.isArray(n)?n.map(a=>a.name):Object.keys(n);for(let a=0;a<i.length;++a){const o=i[a],l=Array.isArray(n)?n[a].tensor:n[o];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${o}': ${l.dtype}`);const c={name:o,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const u=new Promise(async d=>{const h=await l.bytes(),p=h.reduce((b,x)=>b+x.length,0)+Tg*h.length,g=new Uint8Array(p);let v=0;for(let b=0;b<h.length;b++){const x=h[b],C=new Uint8Array(new Uint32Array([x.length]).buffer);g.set(C,v),v+=Tg,g.set(x,v),v+=x.length}d(g)});r.push(u)}else r.push(l.data());e!=null&&(c.group=e),t.push(c)}const s=await Promise.all(r);return{data:VTe(s),specs:t}}function WZ(n,e){const t=new pf(n),r={};let i=0;for(const s of e){const a=zTe(s,(o,l)=>t.slice(i+o,i+l));r[s.name]=jZ(s,t.slice(i,i+a)),i+=a}return r}function zTe(n,e){const t=xt(n.shape);let r;if("quantization"in n){const i=n.quantization;r=lv[i.dtype]}else if(n.dtype==="string"){let i=0;for(let s=0;s<t;s++)i+=Tg+new Uint32Array(e(i,i+Tg))[0];return i}else r=lv[n.dtype];return t*r}async function HTe(n,e){const t=xt(n.shape);let r;if("quantization"in n){const i=n.quantization;r=lv[i.dtype]}else if(n.dtype==="string"){let i=0;for(let s=0;s<t;s++)i+=Tg+new Uint32Array(await e(i,i+Tg))[0];return i}else r=lv[n.dtype];return t*r}function jZ(n,e){const t=n.name,r=n.dtype,i=n.shape,s=xt(i);let a,o=0;if("quantization"in n){const l=n.quantization;if(l.dtype==="uint8"||l.dtype==="uint16"){if(!("min"in l&&"scale"in l))throw new Error(`Weight ${n.name} with quantization ${l.dtype} doesn't have corresponding metadata min and scale.`)}else if(l.dtype==="float16"){if(r!=="float32")throw new Error(`Weight ${n.name} is quantized with ${l.dtype} which only supports weights of type float32 not ${r}.`)}else throw new Error(`Weight ${n.name} has unknown quantization dtype ${l.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const c=lv[l.dtype],u=l.dtype==="uint8"?new Uint8Array(e):new Uint16Array(e);if(r==="float32")if(l.dtype==="uint8"||l.dtype==="uint16"){a=new Float32Array(u.length);for(let d=0;d<u.length;d++){const h=u[d];a[d]=h*l.scale+l.min}}else if(l.dtype==="float16")a=KTe()(u);else throw new Error(`Unsupported quantization type ${l.dtype} for weight type float32.`);else if(r==="int32"){if(l.dtype!=="uint8"&&l.dtype!=="uint16")throw new Error(`Unsupported quantization type ${l.dtype} for weight type int32.`);a=new Int32Array(u.length);for(let d=0;d<u.length;d++){const h=u[d];a[d]=Math.round(h*l.scale+l.min)}}else throw new Error(`Unsupported dtype in weight '${t}': ${r}`);o+=s*c}else if(r==="string"){const l=xt(n.shape);a=[];for(let c=0;c<l;c++){const u=new Uint32Array(e.slice(o,o+Tg))[0];o+=Tg;const d=new Uint8Array(e.slice(o,o+u));a.push(d),o+=u}}else{const l=lv[r];if(r==="float32")a=new Float32Array(e);else if(r==="int32")a=new Int32Array(e);else if(r==="bool")a=new Uint8Array(e);else if(r==="complex64"){a=new Float32Array(e);const c=new Float32Array(a.length/2),u=new Float32Array(a.length/2);for(let g=0;g<c.length;g++)c[g]=a[g*2],u[g]=a[g*2+1];const d=Zd(c,i,"float32"),h=Zd(u,i,"float32"),p=Ag(d,h);return d.dispose(),h.dispose(),p}else throw new Error(`Unsupported dtype in weight '${t}': ${r}`);o+=s*l}return Zd(a,i,r)}async function oW(n,e,t){let r=new Uint8Array(e);for(;r.byteLength<t;){const{done:i,value:s}=await n.read();if(i&&s==null){const o=t-r.byteLength;throw new Error(`Reader is done but ${o} bytes are still expected`)}const a=new Uint8Array(r.length+s.byteLength);a.set(r,0),a.set(new Uint8Array(s),r.length),r=a}return r.buffer}async function qZ(n,e){const t={},r=n.getReader();let i=new ArrayBuffer(0);for(const s of e){const a=await HTe(s,async(c,u)=>(i=await oW(r,i,u),i.slice(c,u)));i=await oW(r,i,a);const o=i.slice(0,a);i=i.slice(a);const l=jZ(s,o);if(t[s.name]=l,HZ()==="webgpu"){const c=GZ();"uploadToGPU"in c&&xt(l.shape)>=it().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&c.uploadToGPU(l.dataId)}}return t}function VTe(n){if(n===null)throw new Error(`Invalid input value: ${JSON.stringify(n)}`);let e=0;const t=[];n.forEach(s=>{if(e+=s.byteLength,t.push(s.byteLength===s.buffer.byteLength?s:new s.constructor(s)),!(s instanceof Float32Array||s instanceof Int32Array||s instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${s.constructor.name}`)});const r=new Uint8Array(e);let i=0;return t.forEach(s=>{r.set(new Uint8Array(s.buffer),i),i+=s.byteLength}),r.buffer}const zU=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function lW(n){return zU?Buffer.byteLength(n,"utf8"):new Blob([n]).size}function GTe(n){if(zU)return Buffer.from(n).toString("base64");const e=new Uint8Array(n);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);return btoa(t)}function WTe(n){if(zU){const r=Buffer.from(n,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(n),t=new Uint8Array(e.length);for(let r=0;r<e.length;++r)t.set([e.charCodeAt(r)],r);return t.buffer}function XZ(n){return pf.join(n)}function cW(n){for(n=n.trim();n.endsWith("/");)n=n.slice(0,n.length-1);const t=n.split("/");return t[t.length-1]}function KZ(n,e){const t={modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,weightsManifest:e};return n.signature!=null&&(t.signature=n.signature),n.userDefinedMetadata!=null&&(t.userDefinedMetadata=n.userDefinedMetadata),n.modelInitializer!=null&&(t.modelInitializer=n.modelInitializer),n.initializerSignature!=null&&(t.initializerSignature=n.initializerSignature),n.trainingConfig!=null&&(t.trainingConfig=n.trainingConfig),t}function YZ(n,e,t){const r={modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy};if(n.trainingConfig!=null&&(r.trainingConfig=n.trainingConfig),n.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!t)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=t}return n.signature!=null&&(r.signature=n.signature),n.userDefinedMetadata!=null&&(r.userDefinedMetadata=n.userDefinedMetadata),n.modelInitializer!=null&&(r.modelInitializer=n.modelInitializer),n.initializerSignature!=null&&(r.initializerSignature=n.initializerSignature),r}async function HU(n,e){let t,r;return n.weightsManifest!=null&&([t,r]=await e(n.weightsManifest)),YZ(n,t,r)}function UE(n){if(n.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:n.modelTopology==null?0:lW(JSON.stringify(n.modelTopology)),weightSpecsBytes:n.weightSpecs==null?0:lW(JSON.stringify(n.weightSpecs)),weightDataBytes:n.weightData==null?0:new pf(n.weightData).byteLength}}function HL(n){const e=[];for(const t of n)e.push(...t.weights);return e}function jTe(){const n=t=>{let r=t<<13,i=0;for(;(r&8388608)===0;)i-=8388608,r<<=1;return r&=-8388609,i+=947912704,r|i},e=new Uint32Array(2048);e[0]=0;for(let t=1;t<1024;t++)e[t]=n(t);for(let t=1024;t<2048;t++)e[t]=939524096+(t-1024<<13);return e}function qTe(){const n=new Uint32Array(64);n[0]=0,n[31]=1199570944,n[32]=2147483648,n[63]=3347054592;for(let e=1;e<31;e++)n[e]=e<<23;for(let e=33;e<63;e++)n[e]=2147483648+(e-32<<23);return n}function XTe(){const n=new Uint32Array(64);for(let e=0;e<64;e++)n[e]=1024;return n[0]=n[32]=0,n}function KTe(){const n=jTe(),e=qTe(),t=XTe();return r=>{const i=new ArrayBuffer(4*r.length),s=new Uint32Array(i);for(let a=0;a<r.length;a++){const o=r[a],l=n[t[o>>10]+(o&1023)]+e[o>>10];s[a]=l}return new Float32Array(i)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xs{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return xs.instance==null&&(xs.instance=new xs),xs.instance}static registerSaveRouter(e){xs.getInstance().saveRouters.push(e)}static registerLoadRouter(e){xs.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return xs.getHandlers(e,"save")}static getLoadHandlers(e,t){return xs.getHandlers(e,"load",t)}static getHandlers(e,t,r){const i=[];return(t==="load"?xs.getInstance().loadRouters:xs.getInstance().saveRouters).forEach(a=>{const o=a(e,r);o!==null&&i.push(o)}),i}}const YTe=n=>xs.registerSaveRouter(n),JTe=n=>xs.registerLoadRouter(n),JZ=n=>xs.getSaveHandlers(n),ZTe=(n,e)=>xs.getLoadHandlers(n,e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VL="tensorflowjs",GL=1,Oy="models_store",lg="model_info_store";function ZZ(){if(!it().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const n=typeof window>"u"?self:window,e=n.indexedDB||n.mozIndexedDB||n.webkitIndexedDB||n.msIndexedDB||n.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function WL(n){const e=n.result;e.createObjectStore(Oy,{keyPath:"modelPath"}),e.createObjectStore(lg,{keyPath:"modelPath"})}class cv{constructor(e){if(this.indexedDB=ZZ(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise((r,i)=>{const s=this.indexedDB.open(VL,GL);s.onupgradeneeded=()=>WL(s),s.onsuccess=()=>{const a=s.result;if(t==null){const o=a.transaction(Oy,"readonly"),c=o.objectStore(Oy).get(this.modelPath);c.onsuccess=()=>{if(c.result==null)return a.close(),i(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(c.result.modelArtifacts)},c.onerror=u=>(a.close(),i(c.error)),o.oncomplete=()=>a.close()}else{t.weightData=pf.join(t.weightData);const o=UE(t),l=a.transaction(lg,"readwrite");let c=l.objectStore(lg),u;try{u=c.put({modelPath:this.modelPath,modelArtifactsInfo:o})}catch(h){return i(h)}let d;u.onsuccess=()=>{d=a.transaction(Oy,"readwrite");const h=d.objectStore(Oy);let p;try{p=h.put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:o})}catch(g){return i(g)}p.onsuccess=()=>r({modelArtifactsInfo:o}),p.onerror=g=>{c=l.objectStore(lg);const v=c.delete(this.modelPath);v.onsuccess=()=>(a.close(),i(p.error)),v.onerror=b=>(a.close(),i(p.error))}},u.onerror=h=>(a.close(),i(u.error)),l.oncomplete=()=>{d==null?a.close():d.oncomplete=()=>a.close()}}},s.onerror=a=>i(s.error)})}}cv.URL_SCHEME="indexeddb://";const QZ=n=>it().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(cv.URL_SCHEME)?QTe(n.slice(cv.URL_SCHEME.length)):null;xs.registerSaveRouter(QZ);xs.registerLoadRouter(QZ);function QTe(n){return new cv(n)}function eMe(n){return n.startsWith(cv.URL_SCHEME)?n.slice(cv.URL_SCHEME.length):n}class tMe{constructor(){this.indexedDB=ZZ()}async listModels(){return new Promise((e,t)=>{const r=this.indexedDB.open(VL,GL);r.onupgradeneeded=()=>WL(r),r.onsuccess=()=>{const i=r.result,s=i.transaction(lg,"readonly"),o=s.objectStore(lg).getAll();o.onsuccess=()=>{const l={};for(const c of o.result)l[c.modelPath]=c.modelArtifactsInfo;e(l)},o.onerror=l=>(i.close(),t(o.error)),s.oncomplete=()=>i.close()},r.onerror=i=>t(r.error)})}async removeModel(e){return e=eMe(e),new Promise((t,r)=>{const i=this.indexedDB.open(VL,GL);i.onupgradeneeded=()=>WL(i),i.onsuccess=()=>{const s=i.result,a=s.transaction(lg,"readwrite"),o=a.objectStore(lg),l=o.get(e);let c;l.onsuccess=()=>{if(l.result==null)return s.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const u=o.delete(e),d=()=>{c=s.transaction(Oy,"readwrite");const p=c.objectStore(Oy).delete(e);p.onsuccess=()=>t(l.result.modelArtifactsInfo),p.onerror=g=>r(l.error)};u.onsuccess=d,u.onerror=h=>(d(),s.close(),r(l.error))}},l.onerror=u=>(s.close(),r(l.error)),a.oncomplete=()=>{c==null?s.close():c.oncomplete=()=>s.close()}},i.onerror=s=>r(i.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tp="/",Cx="tensorflowjs_models",eQ="info",nMe="model_topology",rMe="weight_specs",iMe="weight_data",sMe="model_metadata";function tQ(n){return{info:[Cx,n,eQ].join(Tp),topology:[Cx,n,nMe].join(Tp),weightSpecs:[Cx,n,rMe].join(Tp),weightData:[Cx,n,iMe].join(Tp),modelMetadata:[Cx,n,sMe].join(Tp)}}function nQ(n){for(const e of Object.values(n))window.localStorage.removeItem(e)}function aMe(n){const e=n.split(Tp);if(e.length<3)throw new Error(`Invalid key format: ${n}`);return e.slice(1,e.length-1).join(Tp)}function oMe(n){return n.startsWith(uv.URL_SCHEME)?n.slice(uv.URL_SCHEME.length):n}class uv{constructor(e){if(!it().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=tQ(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const t=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),i=UE(e),s=pf.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,GTe(s));const a={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(a)),{modelArtifactsInfo:i}}catch{throw nQ(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${i.modelTopologyBytes}, weightSpecsBytes=${i.weightSpecsBytes}, weightDataBytes=${i.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const t={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);t.modelTopology=r;const i=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(i==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);t.weightSpecs=i;const s=this.LS.getItem(this.keys.modelMetadata);if(s!=null){const o=JSON.parse(s);t.format=o.format,t.generatedBy=o.generatedBy,t.convertedBy=o.convertedBy,o.signature!=null&&(t.signature=o.signature),o.userDefinedMetadata!=null&&(t.userDefinedMetadata=o.userDefinedMetadata),o.modelInitializer!=null&&(t.modelInitializer=o.modelInitializer),o.initializerSignature!=null&&(t.initializerSignature=o.initializerSignature),o.trainingConfig!=null&&(t.trainingConfig=o.trainingConfig)}const a=this.LS.getItem(this.keys.weightData);if(a==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return t.weightData=WTe(a),t}}uv.URL_SCHEME="localstorage://";const rQ=n=>it().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(uv.URL_SCHEME)?lMe(n.slice(uv.URL_SCHEME.length)):null;xs.registerSaveRouter(rQ);xs.registerLoadRouter(rQ);function lMe(n){return new uv(n)}class cMe{constructor(){de(it().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),de(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},t=Cx+Tp,r=Tp+eQ;for(let i=0;i<this.LS.length;++i){const s=this.LS.key(i);if(s.startsWith(t)&&s.endsWith(r)){const a=aMe(s);e[a]=JSON.parse(this.LS.getItem(s))}}return e}async removeModel(e){e=oMe(e);const t=tQ(e);if(this.LS.getItem(t.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(t.info));return nQ(t),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fx="://";class Yo{constructor(){this.managers={}}static getInstance(){return Yo.instance==null&&(Yo.instance=new Yo),Yo.instance}static registerManager(e,t){de(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(Fx)&&(e=e.slice(0,e.indexOf(Fx))),de(e.length>0,()=>"scheme must not be an empty string.");const r=Yo.getInstance();de(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=t}static getManager(e){const t=Yo.getInstance().managers[e];if(t==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return t}static getSchemes(){return Object.keys(Yo.getInstance().managers)}}function bM(n){if(n.indexOf(Fx)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${Yo.getSchemes().join(",")}`);return{scheme:n.split(Fx)[0],path:n.split(Fx)[1]}}async function iQ(n,e,t=!1){de(n!==e,()=>`Old path and new path are the same: '${n}'`);const r=xs.getLoadHandlers(n);de(r.length>0,()=>`Copying failed because no load handler is found for source URL ${n}.`),de(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${n}.`);const i=r[0],s=xs.getSaveHandlers(e);de(s.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),de(s.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${e}.`);const a=s[0],o=bM(n).scheme,l=bM(n).path,c=o===bM(n).scheme,u=await i.load();t&&c&&await Yo.getManager(o).removeModel(l);const d=await a.save(u);return t&&!c&&await Yo.getManager(o).removeModel(l),d.modelArtifactsInfo}async function uMe(){const n=Yo.getSchemes(),e={};for(const t of n){const r=await Yo.getManager(t).listModels();for(const i in r){const s=t+Fx+i;e[s]=r[i]}}return e}async function dMe(n){const e=bM(n);return Yo.getManager(e.scheme).removeModel(e.path)}async function fMe(n,e){return iQ(n,e,!1)}async function hMe(n,e){return iQ(n,e,!0)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pMe{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if(t!=="utf-8"&&t!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${t}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}setTimeoutCustom(e,t){if(typeof window>"u"||!it().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,t);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const i=this.functionRefs[r.data.index];i(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return TZ(e)}}if(it().get("IS_BROWSER")){it().setPlatform("browser",new pMe);try{Yo.registerManager(uv.URL_SCHEME,new cMe)}catch{}try{Yo.registerManager(cv.URL_SCHEME,new tMe)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mMe={importFetch:()=>require("node-fetch")};let FB;class gMe{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return it().global.fetch!=null?it().global.fetch(e,t):(FB==null&&(FB=mMe.importFetch()),FB(e,t))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,t){if(t!=="utf-8"&&t!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${t}`);return this.textEncoder.encode(e)}decode(e,t){return e.length===0?"":new this.util.TextDecoder(t).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}it().get("IS_NODE")&&!it().get("IS_BROWSER")&&it().setPlatform("node",new gMe);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ar(n,e="float32",t){return e=e||"float32",iu(n),new Ca(n,e,t)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yMe(n,e){const t=he(n,"x","cast");if(!eTe(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&t.dtype!=="string"||e!=="string"&&t.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:t},i={dtype:e};return Be.runKernel(Z_,r,i)}const nn=Ie({cast_:yMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vMe(n){const t={x:he(n,"x","clone","string_or_numeric")};return Be.runKernel(dE,t)}const Bp=Ie({clone_:vMe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sQ(n,e=!1){console.log(n.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */LZ();const bMe={buffer:Ar,cast:nn,clone:Bp,print:sQ};ITe(bMe);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xMe(n,e){let t=he(n,"a","add"),r=he(e,"b","add");[t,r]=Bs(t,r);const i={a:t,b:r};return Be.runKernel(V1,i)}const Bt=Ie({add_:xMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SMe(n,e){let t=he(n,"a","floorDiv"),r=he(e,"b","floorDiv");[t,r]=Bs(t,r);const i={a:t,b:r};return Be.runKernel(cE,i)}const VU=Ie({floorDiv_:SMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wMe(n,e){let t=he(n,"a","div"),r=he(e,"b","div");if([t,r]=Bs(t,r),t.dtype==="int32"&&r.dtype==="int32")return VU(t,r);const i={a:t,b:r},s={};return Be.runKernel(rE,i,s)}const mn=Ie({div_:wMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CMe(n,e){let t=he(n,"a","mul"),r=he(e,"b","mul");[t,r]=Bs(t,r);const i={a:t,b:r};return Be.runKernel(xE,i)}const ke=Ie({mul_:CMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Me(n){const e=he(n,"x","abs");if(e.dtype==="complex64"){const t={x:e};return Be.runKernel(jI,t)}else{const t={x:e};return Be.runKernel(LI,t)}}const va=Ie({abs_:_Me});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EMe(n){const t={x:he(n,"x","acos")};return Be.runKernel(W_,t)}const aQ=Ie({acos_:EMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AMe(n){const t={x:he(n,"x","acosh")};return Be.runKernel(j_,t)}const oQ=Ie({acosh_:AMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TMe(n){de(Array.isArray(n),()=>"The argument passed to tf.addN() must be a list of tensors"),de(n.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${n.length}`);const e=n.map((i,s)=>he(i,`tensors${s}`,"addN")),t=e[0];e.forEach(i=>{if(i.dtype!==t.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(i=>{if(!Vr(i.shape,t.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const r=e;return Be.runKernel(FI,r)}const MMe=Ie({addN_:TMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RMe(n,e=null,t=!1){const i={x:he(n,"x","all","bool")},s={axis:e,keepDims:t};return Be.runKernel($4,i,s)}const GU=Ie({all_:RMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NMe(n,e=null,t=!1){const i={x:he(n,"x","any","bool")},s={axis:e,keepDims:t};return Be.runKernel(L4,i,s)}const iN=Ie({any_:NMe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IMe(n,e=0){const r={x:he(n,"x","argMax")},i={axis:e};return Be.runKernel(PI,r,i)}const f1=Ie({argMax_:IMe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DMe(n,e=0){const r={x:he(n,"x","argMin")},i={axis:e};return Be.runKernel(UI,r,i)}const lQ=Ie({argMin_:DMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kMe(n){const t={x:he(n,"x","asin")};return Be.runKernel(q_,t)}const cQ=Ie({asin_:kMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OMe(n){const t={x:he(n,"x","asinh")};return Be.runKernel(X_,t)}const uQ=Ie({asinh_:OMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BMe(n){const t={x:he(n,"x","atan")};return Be.runKernel(K_,t)}const dQ=Ie({atan_:BMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Me(n,e){let t=he(n,"a","atan2"),r=he(e,"b","atan2");[t,r]=Bs(t,r);const i={a:t,b:r};return Be.runKernel(J_,i)}const fQ=Ie({atan2_:$Me});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LMe(n){const t={x:he(n,"x","atanh")};return Be.runKernel(Y_,t)}const hQ=Ie({atanh_:LMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zE(n,e,t,r,i="NHWC",s){const a=n[3],o=[...e,a],l=em(i);return Va(n,o,t,s,r,null,null,l)}function ed(n,e,t,r,i,s,a="channelsLast"){const[o,l]=qC(e);let c;if(a==="channelsLast")c=[o,l,n[3],n[3]];else if(a==="channelsFirst")c=[o,l,n[1],n[1]];else throw new Error(`Unknown dataFormat ${a}`);return Va(n,c,t,r,i,s,!1,a)}function Qp(n,e,t,r,i,s,a="NDHWC"){const[o,l,c]=jL(e);let u,d;if(a==="NDHWC")d="channelsLast",u=[o,l,c,n[4],n[4]];else if(a==="NCDHW")d="channelsFirst",u=[o,l,c,n[1],n[1]];else throw new Error(`Unknown dataFormat ${a}`);return jg(n,u,t,r,i,!1,d,s)}function Va(n,e,t,r,i,s,a=!1,o="channelsLast"){let[l,c,u,d]=[-1,-1,-1,-1];if(o==="channelsLast")[l,c,u,d]=n;else if(o==="channelsFirst")[l,d,c,u]=n;else throw new Error(`Unknown dataFormat ${o}`);const[h,p,,g]=e,[v,b]=qC(t),[x,C]=qC(r),E=Px(h,x),_=Px(p,C),{padInfo:M,outHeight:R,outWidth:L}=UMe(i,c,u,v,b,E,_,s,o),$=a?g*d:g;let N;return o==="channelsFirst"?N=[l,$,R,L]:o==="channelsLast"&&(N=[l,R,L,$]),{batchSize:l,dataFormat:o,inHeight:c,inWidth:u,inChannels:d,outHeight:R,outWidth:L,outChannels:$,padInfo:M,strideHeight:v,strideWidth:b,filterHeight:h,filterWidth:p,effectiveFilterHeight:E,effectiveFilterWidth:_,dilationHeight:x,dilationWidth:C,inShape:n,outShape:N,filterShape:e}}function jg(n,e,t,r,i,s=!1,a="channelsLast",o){let[l,c,u,d,h]=[-1,-1,-1,-1,-1];if(a==="channelsLast")[l,c,u,d,h]=n;else if(a==="channelsFirst")[l,h,c,u,d]=n;else throw new Error(`Unknown dataFormat ${a}`);const[p,g,v,,b]=e,[x,C,E]=jL(t),[_,M,R]=jL(r),L=Px(p,_),$=Px(g,M),N=Px(v,R),{padInfo:I,outDepth:k,outHeight:P,outWidth:G}=zMe(i,c,u,d,x,C,E,L,$,N,o),W=s?b*h:b;let X;return a==="channelsFirst"?X=[l,W,k,P,G]:a==="channelsLast"&&(X=[l,k,P,G,W]),{batchSize:l,dataFormat:a,inDepth:c,inHeight:u,inWidth:d,inChannels:h,outDepth:k,outHeight:P,outWidth:G,outChannels:W,padInfo:I,strideDepth:x,strideHeight:C,strideWidth:E,filterDepth:p,filterHeight:g,filterWidth:v,effectiveFilterDepth:L,effectiveFilterHeight:$,effectiveFilterWidth:N,dilationDepth:_,dilationHeight:M,dilationWidth:R,inShape:n,outShape:X,filterShape:e}}function FMe(n,e,t,r,i){r==null&&(r=WU(n,e,t));const s=n[0],a=n[1],o=XC((s-e+2*r)/t+1,i),l=XC((a-e+2*r)/t+1,i);return[o,l]}function PMe(n,e,t,r,i,s){i==null&&(i=WU(n,e[0],r[0]));const a=[0,0,0,t];for(let o=0;o<3;o++)n[o]+2*i>=e[o]&&(a[o]=XC((n[o]-e[o]+2*i)/r[o]+1,s));return a}function WU(n,e,t,r=1){const i=Px(e,r);return Math.floor((n[0]*(t-1)-t+i)/2)}function qC(n){return typeof n=="number"?[n,n,n]:n.length===2?[n[0],n[1],1]:n}function jL(n){return typeof n=="number"?[n,n,n]:n}function Px(n,e){return e<=1?n:n+(n-1)*(e-1)}function UMe(n,e,t,r,i,s,a,o,l){let c,u,d;if(typeof n=="number"){c={top:n,bottom:n,left:n,right:n,type:n===0?"VALID":"NUMBER"};const p=FMe([e,t],s,r,n,o);u=p[0],d=p[1]}else if(n==="same"){u=Math.ceil(e/r),d=Math.ceil(t/i);const h=Math.max(0,(u-1)*r+s-e),p=Math.max(0,(d-1)*i+a-t),g=Math.floor(h/2),v=h-g,b=Math.floor(p/2),x=p-b;c={top:g,bottom:v,left:b,right:x,type:"SAME"}}else if(n==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((e-s+1)/r),d=Math.ceil((t-a+1)/i);else if(typeof n=="object"){const h=l==="channelsLast"?n[1][0]:n[2][0],p=l==="channelsLast"?n[1][1]:n[2][1],g=l==="channelsLast"?n[2][0]:n[3][0],v=l==="channelsLast"?n[2][1]:n[3][1];c={top:h,bottom:p,left:g,right:v,type:h===0&&p===0&&g===0&&v===0?"VALID":"EXPLICIT"},u=XC((e-s+h+p)/r+1,o),d=XC((t-a+g+v)/i+1,o)}else throw Error(`Unknown padding parameter: ${n}`);return{padInfo:c,outHeight:u,outWidth:d}}function zMe(n,e,t,r,i,s,a,o,l,c,u){let d,h,p,g;if(n==="valid"&&(n=0),typeof n=="number"){d={top:n,bottom:n,left:n,right:n,front:n,back:n,type:n===0?"VALID":"NUMBER"};const b=PMe([e,t,r,1],[o,l,c],1,[i,s,a],n,u);h=b[0],p=b[1],g=b[2]}else if(n==="same"){h=Math.ceil(e/i),p=Math.ceil(t/s),g=Math.ceil(r/a);const v=(h-1)*i+o-e,b=(p-1)*s+l-t,x=(g-1)*a+c-r,C=Math.floor(v/2),E=v-C,_=Math.floor(b/2),M=b-_,R=Math.floor(x/2),L=x-R;d={top:_,bottom:M,left:R,right:L,front:C,back:E,type:"SAME"}}else throw Error(`Unknown padding parameter: ${n}`);return{padInfo:d,outDepth:h,outHeight:p,outWidth:g}}function XC(n,e){if(!e)return Math.trunc(n);switch(e){case"round":return Math.round(n);case"ceil":return Math.ceil(n);case"floor":return Math.floor(n);default:throw new Error(`Unknown roundingMode ${e}`)}}function Mg(n){const[e,t,r]=qC(n);return e===1&&t===1&&r===1}function oo(n,e){return Mg(n)||Mg(e)}function dv(n){return qC(n).every(e=>e>0)}function em(n){if(n==="NHWC")return"channelsLast";if(n==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${n}`)}function al(n,e,t){if(t!=null){if(typeof e=="string")throw Error(`Error in ${n}: pad must be an integer when using dimRoundingMode ${t} but got pad ${e}.`);if(typeof e=="number")de(u1(e),()=>`Error in ${n}: pad must be an integer when using dimRoundingMode ${t} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(i=>{de(u1(i),()=>`Error in ${n}: pad must be an integer when using dimRoundingMode ${t} but got pad ${i}.`)})});else throw Error(`Error in ${n}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HMe(n,e){const r={x:he(n,"x","reshape","string_or_numeric")},i={shape:e};return Be.runKernel(AD,r,i)}const Fe=Ie({reshape_:HMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VMe(n,e,t,r,i){const s=he(n,"x","avgPool","float32"),a=1;de(oo(t,a),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${t} and dilations '${a}'`);let o=s,l=!1;s.rank===3&&(l=!0,o=Fe(s,[1,s.shape[0],s.shape[1],s.shape[2]])),de(o.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${o.rank}.`),al("avgPool",r,i);const c={x:o},u={filterSize:e,strides:t,pad:r,dimRoundingMode:i};let d=Be.runKernel(zI,c,u);return d=nn(d,s.dtype),l?Fe(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const zD=Ie({avgPool_:VMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GMe(n,e,t,r,i,s="NDHWC"){const a=he(n,"x","avgPool3d","float32");let o=a,l=!1;a.rank===4&&(l=!0,o=Fe(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),de(o.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${o.rank}.`),de(s==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),de(typeof t=="number"&&t>0||Array.isArray(t)&&t[0]>0&&t[1]>0&&t[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${t}'`),al("avgPool3d",r,i);const c={x:o},u={filterSize:e,strides:t,pad:r,dimRoundingMode:i,dataFormat:s};let d=Be.runKernel(HI,c,u);return d=nn(d,o.dtype),l?Fe(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const pQ=Ie({avgPool3d_:GMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WMe(n,e=0){de(n.length>=1,()=>"Pass at least one tensor to concat");const t=rN(n,"tensors","concat","string_or_numeric");if(t[0].dtype==="complex64"&&t.forEach(s=>{if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${s.dtype}. `)}),t.length===1)return Bp(t[0]);const r=t,i={axis:e};return Be.runKernel(qI,r,i)}const Os=Ie({concat_:WMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jMe(n,e,t=!1,r=!1){let i=he(n,"a","matMul"),s=he(e,"b","matMul");[i,s]=Bs(i,s);const a={a:i,b:s},o={transposeA:t,transposeB:r};return Be.runKernel(VI,a,o)}const Br=Ie({matMul_:jMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qMe(n){const t={x:he(n,"x","sigmoid","float32")};return Be.runKernel(IE,t)}const Qd=Ie({sigmoid_:qMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XMe(n,e,t){const r=he(n,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const i={x:r},s={begin:e,size:t};return Be.runKernel(ID,i,s)}const Kn=Ie({slice_:XMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KMe(n){const t={x:he(n,"x","tanh","float32")};return Be.runKernel(LE,t)}const fv=Ie({tanh_:KMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YMe(n,e,t,r,i,s){const a=he(n,"forgetBias","basicLSTMCell"),o=he(e,"lstmKernel","basicLSTMCell"),l=he(t,"lstmBias","basicLSTMCell"),c=he(r,"data","basicLSTMCell"),u=he(i,"c","basicLSTMCell"),d=he(s,"h","basicLSTMCell"),h=Os([c,d],1),p=Br(h,o),g=Bt(p,l),v=g.shape[0],b=g.shape[1]/4,x=[v,b],C=Kn(g,[0,0],x),E=Kn(g,[0,b],x),_=Kn(g,[0,b*2],x),M=Kn(g,[0,b*3],x),R=Bt(ke(Qd(C),fv(E)),ke(u,Qd(Bt(a,_)))),L=ke(fv(R),Qd(M));return[R,L]}const JMe=Ie({basicLSTMCell_:YMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZMe(n,e,t){const r=he(n,"x","batchToSpaceND"),i=e.reduce((o,l)=>o*l);de(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),de(t.length===e.length,()=>`crops.length is ${t.length} but should be equal to blockShape.length  ${e.length}`),de(r.shape[0]%i===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${i}`);const s={x:r},a={blockShape:e,crops:t};return Be.runKernel(GI,s,a)}const HD=Ie({batchToSpaceND_:ZMe});function QMe(n){let e;return n.rank===0||n.rank===1?e=Fe(n,[1,1,1,n.size]):n.rank===2?e=Fe(n,[1,1,n.shape[0],n.shape[1]]):n.rank===3?e=Fe(n,[1,n.shape[0],n.shape[1],n.shape[2]]):e=n,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eRe(n,e,t,r,i,s){s==null&&(s=.001);const a=he(n,"x","batchNorm"),o=he(e,"mean","batchNorm"),l=he(t,"variance","batchNorm");let c;i!=null&&(c=he(i,"scale","batchNorm"));let u;r!=null&&(u=he(r,"offset","batchNorm")),de(o.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),de(u==null||o.rank===u.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),de(c==null||o.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const h={x:QMe(a),scale:c,offset:u,mean:o,variance:l},p={varianceEpsilon:s},g=Be.runKernel(nD,h,p);return Fe(g,a.shape)}const HE=Ie({batchNorm_:eRe});function tRe(n,e,t,r,i,s){const a=he(n,"x","batchNorm"),o=he(e,"mean","batchNorm"),l=he(t,"variance","batchNorm");let c;i!=null&&(c=he(i,"scale","batchNorm"));let u;return r!=null&&(u=he(r,"offset","batchNorm")),de(a.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${a.rank}.`),de(o.rank===2||o.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${o.rank}.`),de(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&de(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),u!=null&&de(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${u.rank}.`),HE(a,o,l,u,c,s)}const mQ=Ie({batchNorm2d_:tRe});function nRe(n,e,t,r,i,s){const a=he(n,"x","batchNorm"),o=he(e,"mean","batchNorm"),l=he(t,"variance","batchNorm");let c;i!=null&&(c=he(i,"scale","batchNorm"));let u;return r!=null&&(u=he(r,"offset","batchNorm")),de(a.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${a.rank}.`),de(o.rank===3||o.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${o.rank}.`),de(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&de(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),u!=null&&de(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${u.rank}.`),HE(a,o,l,u,c,s)}const gQ=Ie({batchNorm3d_:nRe});function rRe(n,e,t,r,i,s){const a=he(n,"x","batchNorm"),o=he(e,"mean","batchNorm"),l=he(t,"variance","batchNorm");let c;i!=null&&(c=he(i,"scale","batchNorm"));let u;return r!=null&&(u=he(r,"offset","batchNorm")),de(a.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${a.rank}.`),de(o.rank===4||o.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${o.rank}.`),de(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&de(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),u!=null&&de(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${u.rank}.`),HE(a,o,l,u,c,s)}const yQ=Ie({batchNorm4d_:rRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iRe(n,e,t){const r=he(n,"x","bincount"),i=he(e,"weights","bincount");de(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),de(t>=0,()=>`size must be non-negative, but got ${t}.`),de(i.size===r.size||i.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${i.shape}.`);const s={x:r,weights:i},a={size:t};return Be.runKernel(U4,s,a)}const vQ=Ie({bincount_:iRe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sRe(n,e){const t=he(n,"x","bitwiseAnd"),r=he(e,"y","bitwiseAnd");if(!Vr(t.shape,r.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${t.shape}, y: ${r.shape}`);if(t.dtype!=="int32"||r.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${t.dtype} and type of y: ${r.dtype}`);const i={a:t,b:r};return Be.runKernel(WI,i)}const aRe=Ie({bitwiseAnd_:sRe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oRe(n,e){const t=he(n,"s0","broadcastArgs","int32"),r=he(e,"s1","broadcastArgs","int32");if(t.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${t.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);const i={s0:t,s1:r};return Be.runKernel(z4,i)}const lRe=Ie({broadcastArgs_:oRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cRe(n,e){let t=he(n,"broadcastTo","x");const r=t.shape;if(iu(e),e.length<t.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${t.rank}.`);if(e.length>t.rank){const c=t.shape.slice();for(;c.length<e.length;)c.unshift(1);t=Fe(t,c)}const i=t.shape,s=Array.from(e);for(let c=e.length-1;c>=0;c--)if(i[c]===e[c])s[c]=1;else if(t.shape[c]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(s.map((c,u)=>c>1?u:-1).filter(c=>c>=0).length===0)return Bp(t);const o={x:t},l={reps:s};return Be.runKernel(FE,o,l)}const Ux=Ie({broadcastTo_:cRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uRe(n){const t={x:he(n,"x","ceil","float32")};return Be.runKernel(Q_,t)}const bQ=Ie({ceil_:uRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G1(n,e,t){iu(n),t=t||z1(e);const r={shape:n,value:e,dtype:t};return Be.runKernel(nU,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dRe(n,e,t){const r=he(n,"x","clipByValue");if(de(e<=t,()=>`Error in clip: min (${e}) must be less than or equal to max (${t}).`),e===t)return G1(r.shape,e,r.dtype);const i={x:r},s={clipValueMin:e,clipValueMax:t};return Be.runKernel(eE,i,s)}const zl=Ie({clipByValue_:dRe});function fRe(n){return Os(n,0)}const xQ=Ie({concat1d_:fRe});function hRe(n,e){return Os(n,e)}const SQ=Ie({concat2d_:hRe});function pRe(n,e){return Os(n,e)}const wQ=Ie({concat3d_:pRe});function mRe(n,e){return Os(n,e)}const CQ=Ie({concat4d_:mRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gRe(n,e,t,r,i="NHWC",s=[1,1],a){const o=he(n,"x","conv2d","float32"),l=he(e,"filter","conv2d","float32");let c=o,u=!1;o.rank===3&&(u=!0,c=Fe(o,[1,o.shape[0],o.shape[1],o.shape[2]])),de(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),de(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),al("conv2d",r,a);const d=i==="NHWC"?c.shape[3]:c.shape[1];de(d===l.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`),de(oo(t,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${t} and dilations '${s}'`),de(dv(s),()=>"Error in conv2D: Dilated rates should be larger than 0."),de(dv(t),()=>"Error in conv2D: Strides should be larger than 0.");const h={x:c,filter:l},p={strides:t,pad:r,dataFormat:i,dilations:s,dimRoundingMode:a},g=Be.runKernel(XI,h,p);return u?Fe(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const Rg=Ie({conv2d_:gRe});function yRe(n,e,t,r,i="NWC",s=1,a){const o=he(n,"x","conv1d"),l=he(e,"filter","conv1d");let c=o,u=!1;o.rank===2&&(u=!0,c=Fe(o,[1,o.shape[0],o.shape[1]])),de(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),de(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),al("conv1d",r,a),de(c.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${l.shape[1]}.`),de(oo(t,s),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${t} and dilation '${s}'`),de(dv(s),()=>"Error in conv1D: Dilated rates should be larger than 0."),de(dv(t),()=>"Error in conv1D: Stride should be larger than 0."),de(i==="NWC",()=>`Error in conv1d: got dataFormat of ${i} but only NWC is currently supported.`);const d=Fe(l,[1,l.shape[0],l.shape[1],l.shape[2]]),h=Fe(c,[c.shape[0],1,c.shape[1],c.shape[2]]),b=Rg(h,d,[1,t],r,"NHWC",[1,s],a);return u?Fe(b,[b.shape[2],b.shape[3]]):Fe(b,[b.shape[0],b.shape[2],b.shape[3]])}const jU=Ie({conv1d_:yRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vRe(n,e,t,r,i,s="NHWC",a){de(n.length===e.rank,()=>`Length of inShape (${n.length}) and rank of dy (${e.rank}) must match`);let o=n,l=e,c=!1;e.rank===3&&(c=!0,l=Fe(e,[1,e.shape[0],e.shape[1],e.shape[2]]),o=[1,n[0],n[1],n[2]]),de(o.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${o.length}.`),de(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),de(t.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${t.rank}`);const u=s==="NHWC"?o[3]:o[1],d=s==="NHWC"?l.shape[3]:l.shape[1];de(u===t.shape[2],()=>`Error in conv2dDerInput: depth of input (${u}) must match input depth for filter ${t.shape[2]}.`),de(d===t.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${t.shape[3]}.`),al("conv2dDerInput",i,a);const h={dy:l,filter:t},p={strides:r,pad:i,dataFormat:s,dimRoundingMode:a,inputShape:o},g=Be.runKernel(KI,h,p);return c?Fe(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const qU=Ie({conv2DBackpropInput_:vRe});function bRe(n,e,t,r,i,s){const a=he(n,"x","conv2dTranspose"),o=he(e,"filter","conv2dTranspose");return qU(t,a,o,r,i,"NHWC",s)}const XU=Ie({conv2dTranspose_:bRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xRe(n,e,t,r,i="NDHWC",s=[1,1,1]){const a=he(n,"x","conv3d"),o=he(e,"filter","conv3d");let l=a,c=!1;a.rank===4&&(c=!0,l=Fe(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),de(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),de(o.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${o.rank}.`),de(l.shape[4]===o.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${o.shape[3]}.`),de(oo(t,s),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${t} and dilations '${s}'`),de(i==="NDHWC",()=>`Error in conv3d: got dataFormat of ${i} but only NDHWC is currently supported.`),de(dv(s),()=>"Error in conv3D: Dilated rates should be larger than 0."),de(dv(t),()=>"Error in conv3D: Strides should be larger than 0.");const u={x:l,filter:o},d={strides:t,pad:r,dataFormat:i,dilations:s},h=Be.runKernel(YI,u,d);return c?Fe(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const _Q=Ie({conv3d_:xRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SRe(n,e,t,r,i){de(n.length===e.rank,()=>`Length of inShape (${n.length}) and rank of dy (${e.rank}) must match`);let s=n,a=e,o=!1;e.rank===4&&(o=!0,a=Fe(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),s=[1,n[0],n[1],n[2],n[3]]);const l=s[4],c=a.shape[4];de(s.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${s.length}.`),de(a.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${a.rank}`),de(t.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${t.rank}`),de(l===t.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${t.shape[3]}.`),de(c===t.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${t.shape[4]}.`);const u={dy:a,filter:t},d={pad:i,strides:r,inputShape:s},h=Be.runKernel(W4,u,d);return o?Fe(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const EQ=Ie({conv3DBackpropInput_:SRe});function wRe(n,e,t,r,i){const s=he(n,"x","conv3dTranspose"),a=he(e,"filter","conv3dTranspose");return EQ(t,s,a,r,i)}const AQ=Ie({conv3dTranspose_:wRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CRe(n){const t={x:he(n,"x","cos","float32")};return Be.runKernel(tE,t)}const VD=Ie({cos_:CRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Re(n){const t={x:he(n,"x","cosh","float32")};return Be.runKernel(nE,t)}const KU=Ie({cosh_:_Re});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ERe(n,e=0,t=!1,r=!1){const s={x:he(n,"x","cumprod")},a={axis:e,exclusive:t,reverse:r};return Be.runKernel(j4,s,a)}const sN=Ie({cumprod_:ERe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ARe(n,e=0,t=!1,r=!1){const s={x:he(n,"x","cumsum")},a={axis:e,exclusive:t,reverse:r};return Be.runKernel(JI,s,a)}const YU=Ie({cumsum_:ARe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TRe(n,e,t,r=!1){const i=he(n,"x","denseBincount"),s=he(e,"weights","denseBincount");de(i.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${i.dtype}`),de(i.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${i.rank}.`),de(t>=0,()=>`size must be non-negative, but got ${t}.`),de(s.size===i.size||s.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${i.shape}, weights shape: ${s.shape}.`);const a={x:i,weights:s},o={size:t,binaryOutput:r};return Be.runKernel(X4,a,o)}const qL=Ie({denseBincount_:TRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MRe(n,e,t="NHWC"){const r=he(n,"x","depthToSpace","float32"),i=t==="NHWC"?r.shape[1]:r.shape[2],s=t==="NHWC"?r.shape[2]:r.shape[3],a=t==="NHWC"?r.shape[3]:r.shape[1];de(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),de(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e}  for depthToSpace with input shape
    ${r.shape}`),de(s*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${e} for depthToSpace with input shape
        ${r.shape}`),de(a%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${a} for depthToSpace with input shape ${r.shape}`);const o={x:r},l={blockSize:e,dataFormat:t};return Be.runKernel(K4,o,l)}const TQ=Ie({depthToSpace_:MRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RRe(n,e,t,r,i="NHWC",s=[1,1],a){const o=he(n,"x","depthwiseConv2d","float32"),l=he(e,"filter","depthwiseConv2d","float32");let c=o,u=!1;o.rank===3&&(u=!0,c=Fe(o,[1,o.shape[0],o.shape[1],o.shape[2]])),de(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),de(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const d=i==="NHWC"?c.shape[3]:c.shape[1];de(d===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${l.shape[2]}.`),al("depthwiseConv2d",r,a);const h={x:c,filter:l},p={strides:t,pad:r,dataFormat:i,dilations:s,dimRoundingMode:a},g=Be.runKernel(ZI,h,p);return u?Fe(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const VE=Ie({depthwiseConv2d_:RRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NRe(n){const t={x:he(n,"x","diag")};return Be.runKernel(Z4,t)}const IRe=Ie({diag_:NRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DRe(n,e,t,r,i=[1,1],s="NHWC"){const a=he(n,"x","dilation2d"),o=he(e,"filter","dilation2d");de(a.rank===3||a.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${a.rank}.`),de(o.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${o.rank}.`),de(s==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${s}`);let l=a,c=!1;a.rank===3&&(l=Fe(a,[1,a.shape[0],a.shape[1],a.shape[2]]),c=!0),de(l.shape[3]===o.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${o.shape[2]}`);const u={x:l,filter:o},d={strides:t,pad:r,dilations:i},h=Be.runKernel(QI,u,d);return c?Fe(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const MQ=Ie({dilation2d_:DRe});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h1(n,e){const t=n.length,r=[];for(let i=0;i<t;i++){const s=t-1-i,a=n[s]||1;(e[e.length-1-i]||1)>1&&a===1&&r.unshift(s)}return r}function Aa(n,e){const t=[];for(let r=0;r<e.length;r++){const i=n[n.length-r-1],s=e.length-r-1,a=e[s];(i==null||i===1&&a>1)&&t.unshift(s)}return t}function hr(n,e){const t=Math.max(n.length,e.length),r=new Array(t);for(let i=0;i<t;i++){let s=n[n.length-i-1];s==null&&(s=1);let a=e[e.length-i-1];if(a==null&&(a=1),s===1)r[t-i-1]=a;else if(a===1)r[t-i-1]=s;else if(s!==a){const o=`Operands could not be broadcast together with shapes ${n} and ${e}.`;throw Error(o)}else r[t-i-1]=s}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kRe(n,e){let t=he(n,"a","equal","string_or_numeric"),r=he(e,"b","equal","string_or_numeric");[t,r]=Bs(t,r),hr(t.shape,r.shape);const i={a:t,b:r};return Be.runKernel(eD,i)}const sf=Ie({equal_:kRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ORe(n,e,t){const r=he(e,"a","where"),i=he(t,"b","where"),s=he(n,"condition","where","bool"),a=hr(hr(s.shape,r.shape),i.shape),o=Ux(s,a),l=Ux(r,a),c=Ux(i,a),u={condition:o,t:l,e:c};return Be.runKernel(ND,u)}const Ro=Ie({where_:ORe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BRe(n){const t={x:he(n,"x","zerosLike")};return Be.runKernel(PD,t)}const Xr=Ie({zerosLike_:BRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Re(n,e){let t=he(n,"a","div"),r=he(e,"b","div");[t,r]=Bs(t,r);const i=mn(t,r),s=Xr(i),a=sf(r,s);return Ro(a,s,i)}const RQ=Ie({divNoNan_:$Re});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LRe(n,e){const t=he(n,"t1","dot"),r=he(e,"t2","dot");de((t.rank===1||t.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${t.rank} and ${r.rank}.`);const i=t.rank===1?t.size:t.shape[1],s=r.rank===1?r.size:r.shape[0];if(de(i===s,()=>`Error in dot: inner dimensions of inputs must match, but got ${i} and ${s}.`),t.rank===1&&r.rank===1){const a=Fe(t,[1,-1]),o=Fe(r,[-1,1]),l=Br(a,o);return Fe(l,[])}else if(t.rank===1&&r.rank===2){const a=Fe(t,[1,-1]),o=Fe(r,[r.shape[0],r.shape[1]]),l=Br(a,o);return Fe(l,[l.size])}else if(t.rank===2&&r.rank===1){const a=Fe(r,[-1,1]),o=Br(t,a);return Fe(o,[o.size])}else{const a=Fe(r,[r.shape[0],r.shape[1]]);return Br(t,a)}}const NQ=Ie({dot_:LRe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FRe(n,...e){const t=e.map((i,s)=>he(i,`tensors${s}`,"einsum")),r={equation:n};return Be.runKernel(Q4,t,r)}const _x=Ie({einsum_:FRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PRe(n){const t={x:he(n,"x","elu","float32")};return Be.runKernel(iE,t)}const GE=Ie({elu_:PRe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function URe(n,e){const t=he(n,"x","ensureShape","string_or_numeric");if(!ZAe(t.shape,e))throw new Error(`EnsureShape: Shape of tensor ${t.shape} is not compatible with expected shape ${e}`);return n}const zRe=Ie({ensureShape_:URe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HRe(n){let e=he(n,"x","erf");de(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=nn(e,"float32"));const t={x:e};return Be.runKernel(sE,t)}const JU=Ie({erf_:HRe});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZU(n,e){for(let t=0;t<n.length;++t)if(n[n.length-t-1]!==e-1-t)return!1;return!0}function IQ(n,e,t){const r=n.length+e.length,i=[];let s=0,a=0;for(let o=0;o<r;o++)t.indexOf(o)===-1?i.push(n[s++]):i.push(e[a++]);return i}function Ga(n,e){const t=[],r=n.length;for(let s=0;s<r;s++)e.indexOf(s)===-1&&t.push(n[s]);const i=e.map(s=>n[s]);return[t,i]}function Xs(n,e){const t=e.map(r=>1);return IQ(n,t,e)}function lo(n,e,t){de(ZU(e,t),()=>`${n} supports only inner-most axes for now. Got axes ${e} and rank-${t} input.`)}function ws(n,e){if(ZU(n,e))return null;const t=[];for(let r=0;r<e;++r)n.indexOf(r)===-1&&t.push(r);return n.forEach(r=>t.push(r)),t}function qg(n){return n.map((e,t)=>[t,e]).sort((e,t)=>e[1]-t[1]).map(e=>e[0])}function Ys(n,e){const t=[];for(let r=e-n;r<e;++r)t.push(r);return t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VRe(n,e=null,t=!1){const i={x:he(n,"x","max")},s={reductionIndices:e,keepDims:t};return Be.runKernel(fD,i,s)}const Wu=Ie({max_:VRe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GRe(n,e=null,t=!1){const i={x:he(n,"x","min")},s={axis:e,keepDims:t};return Be.runKernel(gD,i,s)}const KC=Ie({min_:GRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WRe(n,e){let t=he(n,"base","pow"),r=he(e,"exp","pow");[t,r]=Bs(t,r);const i={a:t,b:r};return Be.runKernel(SE,i)}const Up=Ie({pow_:WRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $n(n,e){if((Xu(n)&&e!=="string"||Array.isArray(n))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&Xu(n)&&!(n instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Wg(n,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jRe(n){const t={x:he(n,"x","sqrt","float32")};return Be.runKernel(kE,t)}const ao=Ie({sqrt_:jRe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qRe(n){const e=he(n,"x","square"),t={};return Be.runKernel("Square",{x:e},t)}const qi=Ie({square_:qRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XRe(n,e=null,t=!1){let r=he(n,"x","sum");r.dtype==="bool"&&(r=nn(r,"int32"));const i={x:r},s={axis:e,keepDims:t};return Be.runKernel(DD,i,s)}const wn=Ie({sum_:XRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KRe(n,e="euclidean",t=null,r=!1){n=he(n,"x","norm");const i=DQ(n,e,t);let s=i.shape;if(r){const a=Ir(t,n.shape);s=Xs(i.shape,a)}return Fe(i,s)}function DQ(n,e,t=null){if(n.rank===0)return va(n);if(n.rank!==1&&t===null)return DQ(Fe(n,[-1]),e,t);if(n.rank===1||typeof t=="number"||Array.isArray(t)&&t.length===1){if(e===1)return wn(va(n),t);if(e===1/0)return Wu(va(n),t);if(e===-1/0)return KC(va(n),t);if(e==="euclidean"||e===2)return ao(wn(Up(va(n),$n(2,"int32")),t));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(t)&&t.length===2){if(e===1)return Wu(wn(va(n),t[0]),t[1]-1);if(e===1/0)return Wu(wn(va(n),t[1]),t[0]);if(e===-1/0)return KC(wn(va(n),t[1]),t[0]);if(e==="fro"||e==="euclidean")return ao(wn(qi(n),t));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${t}`)}const WE=Ie({norm_:KRe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YRe(n,e=null,t=!1){return WE(n,"euclidean",e,t)}const kQ=Ie({euclideanNorm_:YRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JRe(n){const t={x:he(n,"x","exp")};return Be.runKernel(aE,t)}const nl=Ie({exp_:JRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZRe(n,e=0){const t=he(n,"x","expandDims","string_or_numeric");de(e<=t.rank,()=>"Axis must be <= rank of the tensor");const r={input:t},i={dim:e};return Be.runKernel(tD,r,i)}const Qa=Ie({expandDims_:ZRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QRe(n){const t={x:he(n,"x","expm1")};return Be.runKernel(oE,t)}const OQ=Ie({expm1_:QRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eNe(n,e){const t=he(n,"x","tile","string_or_numeric");de(t.rank===e.length,()=>`Error in transpose: rank of input ${t.rank} must match length of reps ${e}.`);const r={x:t},i={reps:e};return Be.runKernel(FE,r,i)}const zu=Ie({tile_:eNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tNe(n,e,t,r="float32"){e==null&&(e=n);const i=Ar([n,e],r),s=n<=e?n:e;for(let o=0;o<s;++o)i.set(1,o,o);const a=Fe(i.toTensor(),[n,e]);if(t==null)return a;if(t.length===1)return zu(Qa(a,0),[t[0],1,1]);if(t.length===2)return zu(Qa(Qa(a,0),0),[t[0],t[1],1,1]);if(t.length===3)return zu(Qa(Qa(Qa(a,0),0),0),[t[0],t[1],t[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${t.length}D.`)}const QU=Ie({eye_:tNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nNe(n){const t={x:he(n,"x","floor","float32")};return Be.runKernel(lE,t)}const jE=Ie({floor_:nNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rNe(n,e,t=0,r=0){const i=he(n,"x","gather"),s=he(e,"indices","gather","int32"),a={x:i,indices:s},o={axis:t,batchDims:r};return Be.runKernel(rD,a,o)}const qE=Ie({gather_:rNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iNe(n,e){let t=he(n,"a","greater","string_or_numeric"),r=he(e,"b","greater","string_or_numeric");[t,r]=Bs(t,r),hr(t.shape,r.shape);const i={a:t,b:r};return Be.runKernel(iD,i)}const Nc=Ie({greater_:iNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sNe(n,e){let t=he(n,"a","greaterEqual","string_or_numeric"),r=he(e,"b","greaterEqual","string_or_numeric");[t,r]=Bs(t,r),hr(t.shape,r.shape);const i={a:t,b:r};return Be.runKernel(uE,i)}const Xg=Ie({greaterEqual_:sNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aNe(n){const t={input:he(n,"input","imag")};return Be.runKernel(aU,t)}const GD=Ie({imag_:aNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oNe(n){const t={x:he(n,"x","isFinite")};return Be.runKernel(fE,t)}const BQ=Ie({isFinite_:oNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lNe(n){const t={x:he(n,"x","isInf")};return Be.runKernel(hE,t)}const $Q=Ie({isInf_:lNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cNe(n){const t={x:he(n,"x","isNaN")};return Be.runKernel(pE,t)}const LQ=Ie({isNaN_:cNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uNe(n,e=.2){const r={x:he(n,"x","leakyRelu")},i={alpha:e};return Be.runKernel(sD,r,i)}const WD=Ie({leakyRelu_:uNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dNe(n,e){let t=he(n,"a","less","string_or_numeric"),r=he(e,"b","less","string_or_numeric");[t,r]=Bs(t,r),hr(t.shape,r.shape);const i={a:t,b:r};return Be.runKernel(aD,i)}const YC=Ie({less_:dNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fNe(n,e){let t=he(n,"a","lessEqual","string_or_numeric"),r=he(e,"b","lessEqual","string_or_numeric");[t,r]=Bs(t,r),hr(t.shape,r.shape);const i={a:t,b:r};return Be.runKernel(oD,i)}const Mv=Ie({lessEqual_:fNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hNe(n,e,t){if(t<=0)throw new Error("The number of values should be positive.");const r={start:n,stop:e,num:t};return Be.runKernel(oU,{},r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pNe(n,e=5,t=1,r=1,i=.5){const s=he(n,"x","localResponseNormalization");de(s.rank===4||s.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${s.rank}.`),de(u1(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let a=s,o=!1;s.rank===3&&(o=!0,a=Fe(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const l={x:a},c={depthRadius:e,bias:t,alpha:r,beta:i},u=Be.runKernel(dD,l,c);return o?Fe(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const FQ=Ie({localResponseNormalization_:pNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mNe(n){const t={x:he(n,"x","log","float32")};return Be.runKernel(mE,t)}const nu=Ie({log_:mNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gNe(n){const t={x:he(n,"x","log1p")};return Be.runKernel(gE,t)}const jD=Ie({log1p_:gNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yNe(n,e){de(RL(n),()=>"The f passed in variableGrads(f) must be a function"),de(e==null||Array.isArray(e)&&e.every(c=>c instanceof nN),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const t=e!=null;if(!t){e=[];for(const c in Be.registeredVariables)e.push(Be.registeredVariables[c])}const r=t?e.filter(c=>!c.trainable):null,i=e.length;e=e.filter(c=>c.trainable),de(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${i} variables is trainable.`);const s=!0,{value:a,grads:o}=Be.gradients(n,e,null,s);de(o.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),de(a.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${a.rank} tensor`);const l={};return e.forEach((c,u)=>{o[u]!=null&&(l[c.name]=o[u])}),r!=null&&r.forEach(c=>l[c.name]=null),{value:a,grads:l}}function zp(n){return Be.customGrad(n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vNe(n){const t={x:he(n,"x","neg")};return Be.runKernel(vD,t)}const is=Ie({neg_:vNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bNe(n){const t={x:he(n,"x","softplus")};return Be.runKernel(DE,t)}const W1=Ie({softplus_:bNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xNe(n){const e=he(n,"x","logSigmoid");return zp(r=>({value:is(W1(is(r))),gradFunc:a=>ke(a,Qd(is(r)))}))(e)}const PQ=Ie({logSigmoid_:xNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SNe(n,e){let t=he(n,"a","sub"),r=he(e,"b","sub");[t,r]=Bs(t,r);const i={a:t,b:r};return Be.runKernel(BE,i)}const vn=Ie({sub_:SNe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wNe(n,e=-1){const t=he(n,"logits","logSoftmax");if(e===-1&&(e=t.rank-1),e!==t.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${t.rank} and axis was ${e}`);return zp((i,s)=>{const o=Wu(i,e,!0),l=vn(i,o),c=vn(nn(l,"float32"),nu(wn(nl(l),e,!0)));return s([c]),{value:c,gradFunc:(d,h)=>{const[p]=h,g=!0,v=nl(p);return vn(d,ke(wn(d,e,g),v))}}})(t)}const ez=Ie({logSoftmax_:wNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CNe(n,e=null,t=!1){const r=he(n,"x","logSumExp"),i=Ir(e,r.shape),s=Wu(r,i,!0),a=vn(r,s),o=nl(a),l=wn(o,i),c=nu(l),u=Bt(Fe(s,c.shape),c);if(t){const d=Xs(u.shape,i);return Fe(u,d)}return u}const qD=Ie({logSumExp_:CNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ne(n,e){const t=he(n,"a","logicalAnd","bool"),r=he(e,"b","logicalAnd","bool");hr(t.shape,r.shape);const i={a:t,b:r};return Be.runKernel(lD,i)}const Eh=Ie({logicalAnd_:_Ne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ENe(n){const t={x:he(n,"x","logicalNot","bool")};return Be.runKernel(cD,t)}const XD=Ie({logicalNot_:ENe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ANe(n,e){const t=he(n,"a","logicalOr","bool"),r=he(e,"b","logicalOr","bool");hr(t.shape,r.shape);const i={a:t,b:r};return Be.runKernel(uD,i)}const tz=Ie({logicalOr_:ANe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TNe(n,e){const t=he(n,"a","logicalXor","bool"),r=he(e,"b","logicalXor","bool");return hr(t.shape,r.shape),Eh(tz(n,e),XD(Eh(n,e)))}const UQ=Ie({logicalXor_:TNe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zT=2147483648;function MNe(n,e,t="left"){const r=he(n,"sortedSequence","searchSorted"),i=he(e,"values","searchSorted"),s=r.shape[r.shape.length-1],a=i.shape[i.shape.length-1],o=Fe(r,[-1,s]),l=Fe(i,[-1,a]);if(o.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(o.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(xt(l.shape)>=zT)throw new Error(`values tensor size must less than ${zT}`);if(o.shape[1]>=zT)throw new Error(`trailing dim_size must less than ${zT} for int32 output type, was ${o.shape[1]}`);const c={sortedSequence:o,values:l},u={side:t};return Be.runKernel(EU,c,u)}const nz=Ie({searchSorted_:MNe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RNe(n,e){return nz(n,e,"left")}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NNe(n,e,t,r,i){const s=he(n,"x","maxPool"),a=1;let o=s,l=!1;s.rank===3&&(l=!0,o=Fe(s,[1,s.shape[0],s.shape[1],s.shape[2]])),de(o.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${o.rank}.`),de(oo(t,a),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${t} and dilations '${a}'`),al("maxPool",r,i);const c={x:o},u={filterSize:e,strides:t,pad:r,dimRoundingMode:i},d=Be.runKernel(hD,c,u);return l?Fe(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const KD=Ie({maxPool_:NNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function INe(n,e=[1,1,1],t,r,i,s="NDHWC"){const a=he(n,"x","maxPool3d");let o=a,l=!1;a.rank===4&&(l=!0,o=Fe(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),de(o.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${o.rank}.`),de(s==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),al("maxPool3d",r,i);const c={x:o},u={filterSize:e,strides:t,pad:r,dimRoundingMode:i,dataFormat:s},d=Be.runKernel(pD,c,u);return l?Fe(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const zQ=Ie({maxPool3d_:INe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DNe(n,e,t,r,i=!1){const a={x:he(n,"x","maxPoolWithArgmax")},o={filterSize:e,strides:t,pad:r,includeBatchInIndex:i},l=Be.runKernel(dU,a,o);return{result:l[0],indexes:l[1]}}const kNe=Ie({maxPoolWithArgmax_:DNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ONe(n,e){let t=he(n,"a","maximum"),r=he(e,"b","maximum");[t,r]=Bs(t,r),t.dtype==="bool"&&(t=nn(t,"int32"),r=nn(r,"int32")),hr(t.shape,r.shape);const i={a:t,b:r};return Be.runKernel(yE,i)}const tm=Ie({maximum_:ONe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BNe(n,e=null,t=!1){const i={x:he(n,"x","mean")},s={axis:e,keepDims:t};return Be.runKernel(mD,i,s)}const Is=Ie({mean_:BNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xa(n,e="float32"){if(iu(n),e==="complex64"){const r=xa(n,"float32"),i=xa(n,"float32");return Ag(r,i)}const t=Io(xt(n),e);return Be.makeTensor(t,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vc(n,e="float32"){if(iu(n),e==="complex64"){const r=vc(n,"float32"),i=xa(n,"float32");return Ag(r,i)}const t=O4(xt(n),e);return Be.makeTensor(t,n,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ne(n,e,{indexing:t="xy"}={}){if(t!=="xy"&&t!=="ij")throw new TypeError(`${t} is not a valid third argument to meshgrid`);if(n===void 0)return[];let r=he(n,"x","meshgrid",n instanceof ji?n.dtype:"float32");if(e===void 0)return[r];let i=he(e,"y","meshgrid",e instanceof ji?e.dtype:"float32");const s=xt(r.shape),a=xt(i.shape);return t==="xy"?(r=Fe(r,[1,-1]),i=Fe(i,[-1,1]),[Br(vc([a,1],r.dtype),r),Br(i,vc([1,s],i.dtype))]):(r=Fe(r,[-1,1]),i=Fe(i,[1,-1]),[Br(r,vc([1,a],r.dtype)),Br(vc([s,1],i.dtype),i)])}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LNe(n,e){let t=he(n,"a","minimum"),r=he(e,"b","minimum");[t,r]=Bs(t,r),t.dtype==="bool"&&(t=nn(t,"int32"),r=nn(r,"int32")),hr(t.shape,r.shape);const i={a:t,b:r};return Be.runKernel(vE,i)}const hv=Ie({minimum_:LNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FNe(n,e,t){de(t==="reflect"||t==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${t}.`);const r=he(n,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");de(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const i=t==="reflect"?1:0;for(let o=0;o<r.rank;o++)de(e[o].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),de(e[o][0]>=0&&e[o][0]<=r.shape[o]-i&&e[o][1]>=0&&e[o][1]<=r.shape[o]-i,()=>`Padding in dimension ${o} cannot be greater than or equal to ${r.shape[o]-i} or less than 0 for input of shape ${r.shape}`);const s={paddings:e,mode:t},a={x:r};return Be.runKernel(yD,a,s)}const HQ=Ie({mirrorPad_:FNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PNe(n,e){let t=he(n,"a","mod"),r=he(e,"b","mod");[t,r]=Bs(t,r);const i={a:t,b:r};return Be.runKernel(bE,i)}const VQ=Ie({mod_:PNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UNe(n,e=null,t=!1){n=he(n,"x","moments");const r=Ir(e,n.shape),i=Is(n,r,t);let s=i.shape;t||(s=Xs(i.shape,r));const a=qi(vn(nn(n,"float32"),Fe(i,s))),o=Is(a,r,t);return{mean:i,variance:o}}const YD=Ie({moments_:UNe});function zNe(n,e,t,r){const i=he(e,"data","multiRNNCell"),s=rN(t,"c","multiRNNCell"),a=rN(r,"h","multiRNNCell");let o=i;const l=[];for(let d=0;d<n.length;d++){const h=n[d](o,s[d],a[d]);l.push(h[0]),l.push(h[1]),o=h[1]}const c=[],u=[];for(let d=0;d<l.length;d+=2)c.push(l[d]),u.push(l[d+1]);return[c,u]}const HNe=Ie({multiRNNCell_:zNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VNe(n,e,t,r=!1){const i=he(n,"logits","multinomial"),s=i.size,a=i.rank;if(s<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${s}.`);if(a>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${a}`);t=t||Math.random();const l={logits:a===1?Fe(i,[1,-1]):i},c={numSamples:e,seed:t,normalized:r},u=Be.runKernel(fU,l,c);return a===1?Fe(u,[u.size]):u}const GNe=Ie({multinomial_:VNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WNe(n,e){let t=he(n,"a","notEqual","string_or_numeric"),r=he(e,"b","notEqual","string_or_numeric");[t,r]=Bs(t,r),hr(t.shape,r.shape);const i={a:t,b:r};return Be.runKernel(bD,i)}const p1=Ie({notEqual_:WNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jNe(n,e,t=1,r=0,i="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const a={indices:he(n,"indices","oneHot","int32")},o={dtype:i,depth:e,onValue:t,offValue:r};return Be.runKernel(SD,a,o)}const rz=Ie({oneHot_:jNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qNe(n){const t={x:he(n,"x","onesLike")};return Be.runKernel(xD,t)}const ru=Ie({onesLike_:qNe});function XNe(n,e){const t=he(n,"v1","outerProduct"),r=he(e,"v2","outerProduct");de(t.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${t.rank} and ${r.rank}.`);const i=Fe(t,[-1,1]),s=Fe(r,[1,-1]);return Br(i,s)}const KNe=Ie({outerProduct_:XNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YNe(n,e,t=0){const r=he(n,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const i={paddings:e,constantValue:t},s={x:r};return Be.runKernel(CD,s,i)}const Kg=Ie({pad_:YNe});function JNe(n,e,t=0){return de(e.length===2,()=>"Invalid number of paddings. Must be length of 2."),Kg(n,[e],t)}const ZNe=Ie({pad1d_:JNe});function QNe(n,e,t=0){return de(e.length===2&&e[0].length===2&&e[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Kg(n,e,t)}const eIe=Ie({pad2d_:QNe});function tIe(n,e,t=0){return de(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Kg(n,e,t)}const nIe=Ie({pad3d_:tIe});function rIe(n,e,t=0){return de(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Kg(n,e,t)}const iIe=Ie({pad4d_:rIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sIe(n,e,t){const r=he(n,"x","spaceToBatchND");de(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),de(t.length===e.length,()=>`paddings.shape[0] ${t.length} must be equal to [blockShape] ${e.length}`),de(r.shape.reduce((a,o,l)=>l>0&&l<=e.length?a&&(o+t[l-1][0]+t[l-1][1])%e[l-1]===0:a,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${t.toString()} must be divisible by blockShapes ${e.toString()}`);const i={x:r},s={blockShape:e,paddings:t};return Be.runKernel(kD,i,s)}const JD=Ie({spaceToBatchND_:sIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aIe(n,e,t,r,i,s,a){i==null&&(i=[1,1]),s==null&&(s=1),r===0&&(r="valid");const o=he(n,"x","maxPool");let l=o,c=!1;o.rank===3&&(c=!0,l=Fe(o,[1,o.shape[0],o.shape[1],o.shape[2]])),de(oo(s,i),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${s} and dilations '${i}'`);const u=ed(l.shape,e,s,i,r),d=[u.dilationHeight,u.dilationWidth];let h;r==="same"?h=lIe([u.filterHeight,u.filterWidth],d):h=[[0,0],[0,0]];const p=d[0]===1&&d[1]===1,[g,v]=oIe([u.inHeight,u.inWidth],d,h),b=p?r:"valid",x=p?l:JD(l,d,g),E=(t==="avg"?()=>zD(x,e,s,b,a):()=>KD(x,e,s,b,a))(),_=p?E:HD(E,d,v);return c?Fe(_,[_.shape[1],_.shape[2],_.shape[3]]):_}function oIe(n,e,t){const r=t.map(u=>u[0]),i=t.map(u=>u[1]),s=n.concat(r,i),a=e.map((u,d)=>(u-s[d]%u)%u),o=i.map((u,d)=>u+a[d]),l=e.map((u,d)=>[r[d],o[d]]),c=e.map((u,d)=>[0,a[d]]);return[l,c]}function lIe(n,e){const r=n.map((a,o)=>a+(a-1)*(e[o]-1)).map(a=>a-1),i=r.map(a=>Math.floor(a/2)),s=r.map((a,o)=>a-i[o]);return r.map((a,o)=>[i[o],s[o]])}const GQ=Ie({pool_:aIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cIe(n,e){const t=he(n,"x","prelu"),r=he(e,"alpha","prelu"),i={x:t,alpha:r};return Be.runKernel(_D,i)}const ZD=Ie({prelu_:cIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uIe(n,e=null,t=!1){let r=he(n,"x","prod");r.dtype==="bool"&&(r=nn(r,"int32"));const i={x:r},s={axis:e,keepDims:t};return Be.runKernel(ED,i,s)}const WQ=Ie({prod_:uIe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dIe(n,e,t,r){const i=n.map((u,d)=>he(u,`tensors${d}`,"raggedGather","int32")),s=he(e,"paramsDenseValues","raggedGather"),a=he(t,"indices","raggedGather","int32"),o={paramsNestedSplits:i,paramsDenseValues:s,indices:a},l={outputRaggedRank:r},c=Be.runKernel(gU,o,l);return{outputNestedSplits:c.slice(0,c.length-1),outputDenseValues:c[c.length-1]}}const fIe=Ie({raggedGather_:dIe});/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hIe(n,e,t){const r=he(n,"starts","raggedRange"),i=he(e,"limits","raggedRange",r.dtype),s=he(t,"deltas","raggedRange",r.dtype),a={starts:r,limits:i,deltas:s},o=Be.runKernel(yU,a);return{rtNestedSplits:o[0],rtDenseValues:o[1]}}const pIe=Ie({raggedRange_:hIe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mIe(n,e,t,r,i){const s=he(n,"shape","raggedTensorToTensor","int32"),a=he(e,"values","raggedTensorToTensor"),o=he(t,"defaultValue","raggedTensorToTensor",a.dtype),l=r.map((d,h)=>he(d,`tensors${h}`,"raggedTensorToTensor","int32")),c={shape:s,values:a,defaultValue:o,rowPartitionTensors:l},u={rowPartitionTypes:i};return Be.runKernel(vU,c,u)}const gIe=Ie({raggedTensorToTensor_:mIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yIe(n,e,t){iu(n);const r=xt(n);let i=null;if(t==null||t==="float32")i=new Float32Array(r);else if(t==="int32")i=new Int32Array(r);else if(t==="bool")i=new Uint8Array(r);else throw new Error(`Unknown data type ${t}`);for(let s=0;s<r;s++)i[s]=e();return Be.makeTensor(i,n,t)}const vIe=Ie({rand_:yIe});var xM={exports:{}},bIe=xM.exports,uW;function xIe(){return uW||(uW=1,function(n){(function(e,t,r){function i(l){var c=this,u=o();c.next=function(){var d=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=d-(c.c=d|0)},c.c=1,c.s0=u(" "),c.s1=u(" "),c.s2=u(" "),c.s0-=u(l),c.s0<0&&(c.s0+=1),c.s1-=u(l),c.s1<0&&(c.s1+=1),c.s2-=u(l),c.s2<0&&(c.s2+=1),u=null}function s(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function a(l,c){var u=new i(l),d=c&&c.state,h=u.next;return h.int32=function(){return u.next()*4294967296|0},h.double=function(){return h()+(h()*2097152|0)*11102230246251565e-32},h.quick=h,d&&(typeof d=="object"&&s(d,u),h.state=function(){return s(u,{})}),h}function o(){var l=4022871197,c=function(u){u=String(u);for(var d=0;d<u.length;d++){l+=u.charCodeAt(d);var h=.02519603282416938*l;l=h>>>0,h-=l,h*=l,l=h>>>0,h-=l,l+=h*4294967296}return(l>>>0)*23283064365386963e-26};return c}t&&t.exports?t.exports=a:this.alea=a})(bIe,n)}(xM)),xM.exports}var SM={exports:{}},SIe=SM.exports,dW;function wIe(){return dW||(dW=1,function(n){(function(e,t,r){function i(o){var l=this,c="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},o===(o|0)?l.x=o:c+=o;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,l.next()}function s(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l}function a(o,l){var c=new i(o),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var h=c.next()>>>11,p=(c.next()>>>0)/4294967296,g=(h+p)/(1<<21);while(g===0);return g},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&s(u,c),d.state=function(){return s(c,{})}),d}t&&t.exports?t.exports=a:this.xor128=a})(SIe,n)}(SM)),SM.exports}var wM={exports:{}},CIe=wM.exports,fW;function _Ie(){return fW||(fW=1,function(n){(function(e,t,r){function i(o){var l=this,c="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,o===(o|0)?l.x=o:c+=o;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,u==c.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function s(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l.v=o.v,l.d=o.d,l}function a(o,l){var c=new i(o),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var h=c.next()>>>11,p=(c.next()>>>0)/4294967296,g=(h+p)/(1<<21);while(g===0);return g},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&s(u,c),d.state=function(){return s(c,{})}),d}t&&t.exports?t.exports=a:this.xorwow=a})(CIe,n)}(wM)),wM.exports}var CM={exports:{}},EIe=CM.exports,hW;function AIe(){return hW||(hW=1,function(n){(function(e,t,r){function i(o){var l=this;l.next=function(){var u=l.x,d=l.i,h,p;return h=u[d],h^=h>>>7,p=h^h<<24,h=u[d+1&7],p^=h^h>>>10,h=u[d+3&7],p^=h^h>>>3,h=u[d+4&7],p^=h^h<<7,h=u[d+7&7],h=h^h<<13,p^=h^h<<9,u[d]=p,l.i=d+1&7,p};function c(u,d){var h,p=[];if(d===(d|0))p[0]=d;else for(d=""+d,h=0;h<d.length;++h)p[h&7]=p[h&7]<<15^d.charCodeAt(h)+p[h+1&7]<<13;for(;p.length<8;)p.push(0);for(h=0;h<8&&p[h]===0;++h);for(h==8?p[7]=-1:p[h],u.x=p,u.i=0,h=256;h>0;--h)u.next()}c(l,o)}function s(o,l){return l.x=o.x.slice(),l.i=o.i,l}function a(o,l){o==null&&(o=+new Date);var c=new i(o),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var h=c.next()>>>11,p=(c.next()>>>0)/4294967296,g=(h+p)/(1<<21);while(g===0);return g},d.int32=c.next,d.quick=d,u&&(u.x&&s(u,c),d.state=function(){return s(c,{})}),d}t&&t.exports?t.exports=a:this.xorshift7=a})(EIe,n)}(CM)),CM.exports}var _M={exports:{}},TIe=_M.exports,pW;function MIe(){return pW||(pW=1,function(n){(function(e,t,r){function i(o){var l=this;l.next=function(){var u=l.w,d=l.X,h=l.i,p,g;return l.w=u=u+1640531527|0,g=d[h+34&127],p=d[h=h+1&127],g^=g<<13,p^=p<<17,g^=g>>>15,p^=p>>>12,g=d[h]=g^p,l.i=h,g+(u^u>>>16)|0};function c(u,d){var h,p,g,v,b,x=[],C=128;for(d===(d|0)?(p=d,d=null):(d=d+"\0",p=0,C=Math.max(C,d.length)),g=0,v=-32;v<C;++v)d&&(p^=d.charCodeAt((v+32)%d.length)),v===0&&(b=p),p^=p<<10,p^=p>>>15,p^=p<<4,p^=p>>>13,v>=0&&(b=b+1640531527|0,h=x[v&127]^=p+b,g=h==0?g+1:0);for(g>=128&&(x[(d&&d.length||0)&127]=-1),g=127,v=512;v>0;--v)p=x[g+34&127],h=x[g=g+1&127],p^=p<<13,h^=h<<17,p^=p>>>15,h^=h>>>12,x[g]=p^h;u.w=b,u.X=x,u.i=g}c(l,o)}function s(o,l){return l.i=o.i,l.w=o.w,l.X=o.X.slice(),l}function a(o,l){o==null&&(o=+new Date);var c=new i(o),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var h=c.next()>>>11,p=(c.next()>>>0)/4294967296,g=(h+p)/(1<<21);while(g===0);return g},d.int32=c.next,d.quick=d,u&&(u.X&&s(u,c),d.state=function(){return s(c,{})}),d}t&&t.exports?t.exports=a:this.xor4096=a})(TIe,n)}(_M)),_M.exports}var EM={exports:{}},RIe=EM.exports,mW;function NIe(){return mW||(mW=1,function(n){(function(e,t,r){function i(o){var l=this,c="";l.next=function(){var d=l.b,h=l.c,p=l.d,g=l.a;return d=d<<25^d>>>7^h,h=h-p|0,p=p<<24^p>>>8^g,g=g-d|0,l.b=d=d<<20^d>>>12^h,l.c=h=h-p|0,l.d=p<<16^h>>>16^g,l.a=g-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,o===Math.floor(o)?(l.a=o/4294967296|0,l.b=o|0):c+=o;for(var u=0;u<c.length+20;u++)l.b^=c.charCodeAt(u)|0,l.next()}function s(o,l){return l.a=o.a,l.b=o.b,l.c=o.c,l.d=o.d,l}function a(o,l){var c=new i(o),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var h=c.next()>>>11,p=(c.next()>>>0)/4294967296,g=(h+p)/(1<<21);while(g===0);return g},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&s(u,c),d.state=function(){return s(c,{})}),d}t&&t.exports?t.exports=a:this.tychei=a})(RIe,n)}(EM)),EM.exports}var AM={exports:{}};const IIe={},DIe=Object.freeze(Object.defineProperty({__proto__:null,default:IIe},Symbol.toStringTag,{value:"Module"})),kIe=nle(DIe);var OIe=AM.exports,gW;function BIe(){return gW||(gW=1,function(n){(function(e,t,r){var i=256,s=6,a=52,o="random",l=r.pow(i,s),c=r.pow(2,a),u=c*2,d=i-1,h;function p(_,M,R){var L=[];M=M==!0?{entropy:!0}:M||{};var $=x(b(M.entropy?[_,E(t)]:_??C(),3),L),N=new g(L),I=function(){for(var k=N.g(s),P=l,G=0;k<c;)k=(k+G)*i,P*=i,G=N.g(1);for(;k>=u;)k/=2,P/=2,G>>>=1;return(k+G)/P};return I.int32=function(){return N.g(4)|0},I.quick=function(){return N.g(4)/4294967296},I.double=I,x(E(N.S),t),(M.pass||R||function(k,P,G,W){return W&&(W.S&&v(W,N),k.state=function(){return v(N,{})}),G?(r[o]=k,P):k})(I,$,"global"in M?M.global:this==r,M.state)}function g(_){var M,R=_.length,L=this,$=0,N=L.i=L.j=0,I=L.S=[];for(R||(_=[R++]);$<i;)I[$]=$++;for($=0;$<i;$++)I[$]=I[N=d&N+_[$%R]+(M=I[$])],I[N]=M;(L.g=function(k){for(var P,G=0,W=L.i,X=L.j,z=L.S;k--;)P=z[W=d&W+1],G=G*i+z[d&(z[W]=z[X=d&X+P])+(z[X]=P)];return L.i=W,L.j=X,G})(i)}function v(_,M){return M.i=_.i,M.j=_.j,M.S=_.S.slice(),M}function b(_,M){var R=[],L=typeof _,$;if(M&&L=="object")for($ in _)try{R.push(b(_[$],M-1))}catch{}return R.length?R:L=="string"?_:_+"\0"}function x(_,M){for(var R=_+"",L,$=0;$<R.length;)M[d&$]=d&(L^=M[d&$]*19)+R.charCodeAt($++);return E(M)}function C(){try{var _;return h&&(_=h.randomBytes)?_=_(i):(_=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(_)),E(_)}catch{var M=e.navigator,R=M&&M.plugins;return[+new Date,e,R,e.screen,E(t)]}}function E(_){return String.fromCharCode.apply(0,_)}if(x(r.random(),t),n.exports){n.exports=p;try{h=kIe}catch{}}else r["seed"+o]=p})(typeof self<"u"?self:OIe,[],Math)}(AM)),AM.exports}var PB,yW;function $Ie(){if(yW)return PB;yW=1;var n=xIe(),e=wIe(),t=_Ie(),r=AIe(),i=MIe(),s=NIe(),a=BIe();return a.alea=n,a.xor128=e,a.xorwow=t,a.xorshift7=r,a.xor4096=i,a.tychei=s,PB=a,PB}var QD=$Ie();/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iz{constructor(e,t,r,i,s){this.mean=e,this.stdDev=t,this.dtype=r,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const a=s||Math.random();this.random=QD.alea(a.toString())}nextValue(){if(!isNaN(this.nextVal)){const i=this.nextVal;return this.nextVal=NaN,i}let e,t,r=!1;for(;!r;){let i,s,a;do i=2*this.random()-1,s=2*this.random()-1,a=i*i+s*s;while(a>=1||a===0);const o=Math.sqrt(-2*Math.log(a)/a);e=this.mean+this.stdDev*i*o,t=this.mean+this.stdDev*s*o,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(t))&&(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class LIe{constructor(e,t,r,i){this.alpha=e,this.beta=1/t,this.dtype=r;const s=i||Math.random();this.randu=QD.alea(s.toString()),this.randn=new iz(0,1,r,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,t,r,i,s,a;for(;;){do i=this.randn.nextValue(),a=1+this.c*i;while(a<=0);if(a*=a*a,e=i*i,t=1-.331*e*e,r=.5*e+this.d*(1-a+Math.log(a)),s=this.randu(),s<t||Math.log(s)<r)break}return a=1/this.beta*this.d*a,this.alpha<1&&(a*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(a)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}}class FIe{constructor(e=0,t=1,r,i){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=t-e,this.dtype=r,i==null&&(i=Math.random()),typeof i=="number"&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${t} <= 1 and dtype is not float`);this.random=QD.alea(i)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PIe(n,e,t=1,r="float32",i){if(iu(n),t==null&&(t=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);const s=new LIe(e,t,r,i),a=Ar(n,r);for(let o=0;o<a.values.length;o++)a.values[o]=s.nextValue();return a.toTensor()}const UIe=Ie({randomGamma_:PIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zIe(n,e=0,t=1,r,i){if(iu(n),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const s=new iz(e,t,r,!1,i),a=Ar(n,r);for(let o=0;o<a.values.length;o++)a.values[o]=s.nextValue();return a.toTensor()}const sz=Ie({randomNormal_:zIe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HIe(n,e,t){if(e!=null&&e==="bool")throw new Error(`Unsupported data type ${e}`);return sz(n,0,1,e,t)}const VIe=Ie({randomStandardNormal_:HIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GIe(n,e=0,t=1,r="float32",i){iu(n);const s=Ar(n,r),a=new FIe(e,t,null,i);for(let o=0;o<s.values.length;o++)s.values[o]=a.nextValue();return s.toTensor()}const Rv=Ie({randomUniform_:GIe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WIe(n,e,t,r){return Rv(n,e,t,"int32",r)}const jIe=Ie({randomUniformInt_:WIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m1(n,e,t=1,r="float32"){if(t===0)throw new Error("Cannot have a step of zero");const i={start:n,stop:e,step:t,dtype:r};return Be.runKernel(bU,{},i)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qIe(n){const t={input:he(n,"input","real")};return Be.runKernel(xU,t)}const JC=Ie({real_:qIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XIe(n){const t={x:he(n,"x","reciprocal")};return Be.runKernel(wE,t)}const jQ=Ie({reciprocal_:XIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KIe(n){const t={x:he(n,"x","relu")};return Be.runKernel(CE,t)}const Ih=Ie({relu_:KIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YIe(n){const t={x:he(n,"x","relu6")};return Be.runKernel(_E,t)}const az=Ie({relu6_:YIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JIe(n,e){const r={x:he(n,"x","reverse")},i={dims:e};return Be.runKernel(RD,r,i)}const Ku=Ie({reverse_:JIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZIe(n){const e=he(n,"x","reverse");return de(e.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),Ku(e,0)}const QIe=Ie({reverse1d_:ZIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eDe(n,e){const t=he(n,"x","reverse");return de(t.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${t.rank}.`),Ku(t,e)}const tDe=Ie({reverse2d_:eDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nDe(n,e){const t=he(n,"x","reverse");return de(t.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${t.rank}.`),Ku(t,e)}const rDe=Ie({reverse3d_:nDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iDe(n,e){const t=he(n,"x","reverse");return de(t.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${t.rank}.`),Ku(t,e)}const sDe=Ie({reverse4d_:iDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aDe(n){const t={x:he(n,"x","round")};return Be.runKernel(EE,t)}const oz=Ie({round_:aDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oDe(n){const t={x:he(n,"x","rsqrt","float32")};return Be.runKernel(AE,t)}const lz=Ie({rsqrt_:oDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lDe(n){const t={x:he(n,"x","selu")};return Be.runKernel(TE,t)}const cz=Ie({selu_:lDe});function cDe(n,e,t,r,i,s=[1,1],a="NHWC"){const o=he(n,"x","separableConv2d"),l=he(e,"depthwiseFilter","separableConv2d"),c=he(t,"pointwiseFilter","separableConv2d");let u=o,d=!1;if(o.rank===3&&(d=!0,u=Fe(o,[1,o.shape[0],o.shape[1],o.shape[2]])),a==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");de(u.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${u.rank}.`),de(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),de(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),de(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),de(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);const h=l.shape[2],p=l.shape[3];de(c.shape[2]===h*p,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${h*p}, but got ${c.shape[2]}.`);const g=VE(u,l,r,i,a,s),b=Rg(g,c,1,"valid",a);return d?Fe(b,[b.shape[1],b.shape[2],b.shape[3]]):b}const uz=Ie({separableConv2d_:cDe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function uDe(n,e){const t=he(n,"x","setdiff1d"),r=he(e,"y","setdiff1d");de(t.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${t.dtype}) and y (${r.dtype}).`),de(t.rank===1,()=>`x should be 1D tensor, but got x (${t.shape}).`),de(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);const i=await t.data(),s=await r.data(),a=new Set(s);let o=0;for(let u=0;u<i.length;u++)a.has(i[u])||o++;const l=new Ca([o],t.dtype),c=new Ca([o],"int32");for(let u=0,d=0;u<i.length;u++)a.has(i[u])||(l.values[d]=i[u],c.values[d]=u,d++);return[l.toTensor(),c.toTensor()]}const dDe=uDe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fDe(n){const t={x:he(n,"x","sign")};return Be.runKernel(NE,t)}const qQ=Ie({sign_:fDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hDe(n){const t={x:he(n,"x","sin","float32")};return Be.runKernel(ME,t)}const dz=Ie({sin_:hDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pDe(n){const t={x:he(n,"x","sinh")};return Be.runKernel(RE,t)}const fz=Ie({sinh_:pDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mDe(n,e,t){const r=he(n,"x","slice1d");return de(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),Kn(r,[e],[t])}const e3=Ie({slice1d_:mDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gDe(n,e,t){const r=he(n,"x","slice2d");return de(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),Kn(r,e,t)}const hz=Ie({slice2d_:gDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yDe(n,e,t){const r=he(n,"x","slice3d");return de(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),Kn(r,e,t)}const t3=Ie({slice3d_:yDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vDe(n,e,t){const r=he(n,"x","slice4d");return de(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),Kn(r,e,t)}const ZC=Ie({slice4d_:vDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bDe(n,e=-1){const t=he(n,"logits","softmax","float32");if(e===-1&&(e=t.rank-1),e!==t.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${t.rank} and dim was ${e}`);const r={logits:t},i={dim:e};return Be.runKernel(BD,r,i)}const n3=Ie({softmax_:bDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xDe(n){de(n.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${n.dtype}.`);const e={input:n};return Be.runKernel(tU,e)}const r3=Ie({fft_:xDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SDe(n){de(n.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${n.dtype}.`);const e={input:n};return Be.runKernel(sU,e)}const QC=Ie({ifft_:SDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wDe(n){const e=n.shape[n.shape.length-1],t=n.size/e;let r;if(e<=2){const i=Fe(n,[t,e]);r=QC(i)}else{const i=[t,2*(e-1)],s=Fe(JC(n),[t,e]),a=Fe(GD(n),[t,e]),o=Ku(Kn(s,[0,1],[t,e-2]),1),l=ke(Ku(Kn(a,[0,1],[t,e-2]),1),$n(-1)),c=Os([s,o],1),u=Os([a,l],1),d=Fe(Ag(c,u),[i[0],i[1]]);r=QC(d)}if(r=JC(r),n.rank===3&&n.shape[0]!==0){const i=r,s=n.shape[0];r=Fe(r,[s,r.shape[0]/s,r.shape[1]]),i.dispose()}return r}const pz=Ie({irfft_:wDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CDe(n,e,t=0){const i={x:he(n,"x","split")},s={numOrSizeSplits:e,axis:t};return Be.runKernel(OD,i,s)}const bc=Ie({split_:CDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _De(n,e){de(n.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${n.dtype}`);let t=n.shape[n.shape.length-1];const r=n.size/t;let i;if(e!=null&&e<t){const g=n.shape.map(b=>0),v=n.shape.map(b=>b);v[n.shape.length-1]=e,i=Kn(n,g,v),t=e}else if(e!=null&&e>t){const g=n.shape.map(v=>v);g[n.shape.length-1]=e-t,i=Os([n,xa(g)],n.shape.length-1),t=e}else i=n;const s=Xr(i),a=Fe(Ag(i,s),[r,t]),o=r3(a),l=Math.floor(t/2)+1,c=JC(o),u=GD(o),d=bc(c,[l,t-l],c.shape.length-1),h=bc(u,[l,t-l],u.shape.length-1),p=i.shape.slice();return p[i.shape.length-1]=l,Fe(Ag(d[0],h[0]),p)}const i3=Ie({rfft_:_De});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EDe(n,e){let t=he(n,"a","squaredDifference"),r=he(e,"b","squaredDifference");[t,r]=Bs(t,r),hr(t.shape,r.shape);const i={a:t,b:r},s={};return Be.runKernel(OE,i,s)}const mz=Ie({squaredDifference_:EDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ADe(n,e){const t=he(n,"x","squeeze","string_or_numeric");return Fe(t,Hg(t.shape,e).newShape)}const Gs=Ie({squeeze_:ADe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TDe(n,e=0){const t=rN(n,"tensors","stack","string_or_numeric");de(t.length>=1,()=>"Pass at least one tensor to tf.stack"),t.length>0&&de(e<=t[0].rank,()=>"Axis must be <= rank of the tensor");const r=t,i={axis:e};return Be.runKernel(wD,r,i)}const Ec=Ie({stack_:TDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MDe(n,e=0){const r={x:he(n,"x","step")},i={alpha:e};return Be.runKernel(PE,r,i)}const j1=Ie({step_:MDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RDe(n,e,t,r,i=0,s=0,a=0,o=0,l=0){const u={x:he(n,"x","stridedSlice","string_or_numeric")},d={begin:e,end:t,strides:r,beginMask:i,endMask:s,ellipsisMask:a,newAxisMask:o,shrinkAxisMask:l};return Be.runKernel(DU,u,d)}const XQ=Ie({stridedSlice_:RDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NDe(n){const t={x:he(n,"x","tan","float32")};return Be.runKernel($E,t)}const KQ=Ie({tan_:NDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ca(n,e){U1(n);const t=Gg(n,e);if(t.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Wg(n,null,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wy(n,e,t){if(U1(n),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=Gg(n,t);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Wg(n,e,r,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YQ(n,e,t){if(U1(n),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const r=Gg(n,t);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Wg(n,e,r,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IDe(n,e,t){if(U1(n),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const r=Gg(n,t);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Wg(n,e,r,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DDe(n,e,t){if(U1(n),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");const r=Gg(n,t);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Wg(n,e,r,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kDe(n,e,t){if(U1(n),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");const r=Gg(n,t);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||r,Wg(n,e,r,t)}function JQ(n,e,t){const r=e.rank>1?e.shape[e.rank-1]:1,i=e.rank>1?e.rank-1:1,s=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${t.shape}, indices.shape: ${e.shape}, shape: ${n}, sliceDim: ${r}, and batchDim: ${i}.`;if(t.rank<i)throw new Error(s+` update.rank < ${i}. `);if(n.length<r+(t.rank-i))throw new Error(s+` Output shape length < ${r+(t.rank-i)}`);if(t.rank!==i+n.length-r)throw new Error(s+` update.rank != ${i+n.length-r}`);for(let a=0;a<i;++a)if(t.shape[a]!==e.shape[a])throw new Error(s+` updates.shape[${a}] (${t.shape[a]}) != indices.shape[${a}] (${e.shape[a]}).`);for(let a=0;a<t.rank-i;++a)if(t.shape[a+i]!==n[a+r])throw new Error(s+` updates.shape[${a+i}] (${t.shape[a+i]}) != shape[${a+i}] (${n[a+i]})`)}function gz(n,e,t){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(n.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${n.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(t.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${t}`);if(t.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(n.size===0)throw new Error(`Updates specified for empty output. updates shape: ${n.shape}`)}JQ(t,e,n)}function Nv(n,e,t){const r=e.shape.length,i=r>1?e.shape[r-1]:1,s=t.length;let a=1;for(let d=i;d<s;++d)a*=t[d];const o=i<1?1:i,l=xt(e.shape)/o,c=[...kn(t.slice(0,i)),1],u=xt(t);return{sliceRank:i,numUpdates:l,sliceSize:a,strides:c,outputSize:u}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ODe(n,e,t){const r=he(n,"tensor","tensorScatterupdate"),i=he(e,"indices","tensorScatterupdate","int32"),s=he(t,"updates","tensorScatterupdate");if(gz(s,i,r.shape),r.dtype!==s.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${s.dtype}.`);const a={tensor:r,indices:i,updates:s},o={};return Be.runKernel(_U,a,o)}const BDe=Ie({tensorScatterUpdate_:ODe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $De(n,e=1,t=!0){const r=he(n,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const i=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>i)throw new Error(`'k' passed to topk() must be <= the last dimension (${i}) but got ${e}`);const s={x:r},a={k:e,sorted:t},[o,l]=Be.runKernel($U,s,a);return{values:o,indices:l}}const ZQ=Ie({topk_:$De});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LDe(n,e=0,t=1,r,i){if(iu(n),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const s=new iz(e,t,r,!0,i),a=Ar(n,r);for(let o=0;o<a.values.length;o++)a.values[o]=s.nextValue();return a.toTensor()}const yz=Ie({truncatedNormal_:LDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FDe(n,e=0){const t=he(n,"x","unique","string_or_numeric");de(t.rank>0,()=>"The input tensor must be at least 1D");const r={x:t},i={axis:e},[s,a]=Be.runKernel(FU,r,i);return{values:s,indices:a}}const QQ=Ie({unique_:FDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PDe(n,e,t){const r=he(n,"x","unsortedSegmentSum"),i=he(e,"segmentIds","unsortedSegmentSum","int32");de(u1(t),()=>"numSegments must be of dtype int");const s={x:r,segmentIds:i},a={numSegments:t};return Be.runKernel(FD,s,a)}const vz=Ie({unsortedSegmentSum_:PDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UDe(n,e=0){const t=he(n,"x","unstack","string_or_numeric");de(e>=-t.shape.length&&e<t.shape.length,()=>`Axis = ${e} is not in [-${t.shape.length}, ${t.shape.length})`);const r={value:t},i={axis:e};return Be.runKernel(LD,r,i)}const Yu=Ie({unstack_:UDe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zDe(n,e){return nz(n,e,"right")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eee(n,e=!0,t,r){return Be.makeVariable(n,e,t,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bz(n,e){const t=[];for(let s=0;s<e.length;s++)e[s]&&t.push(s);const r=Ar(n,"int32"),i=Ar([t.length,n.length],"int32");for(let s=0;s<t.length;s++){const a=r.indexToLoc(t[s]),o=s*n.length;i.values.set(a,o)}return i.toTensor()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function HDe(n){const e=he(n,"condition","whereAsync","bool"),t=await e.data(),r=bz(e.shape,t);return n!==e&&e.dispose(),r}const tee=HDe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function VDe(n,e,t){const r=he(n,"tensor","boolMask"),i=he(e,"mask","boolMask","bool"),s=t??0,a=i.rank,o=r.shape;de(a>0,()=>"mask cannot be scalar"),Rc(o.slice(s,s+a),i.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let v=s;v<s+a;v++)l*=o[v];const c=o.slice(0,s).concat([l],o.slice(s+a)),u=Fe(r,c),d=Fe(i,[-1]),h=await tee(d),p=Gs(h,[1]),g=qE(u,p,s);return n!==r&&r.dispose(),e!==i&&i.dispose(),p.dispose(),u.dispose(),d.dispose(),h.dispose(),g}const GDe=VDe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WDe(n,e,t){const r=he(n,"x","transpose");if(e==null&&(e=r.shape.map((a,o)=>o).reverse()),de(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(a=>{de(a>=0&&a<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const i={x:r},s={perm:e};return r.dtype==="complex64"?Ye(()=>{let a=JC(r),o=GD(r);return a=Be.runKernel(Lx,{x:a},s),o=Be.runKernel(Lx,{x:o},s),t&&(o=is(o)),Ag(a,o)}):Be.runKernel(Lx,i,s)}const qr=Ie({transpose_:WDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jDe(n,e,t,r,i=!0){const s=he(n,"v","movingAverage"),a=he(e,"x","movingAverage"),o=he(t,"decay","movingAverage");kTe(s,a),de(Vr(s.shape,a.shape),()=>"Shape mismatch in v and x");const l=$n(1),c=vn(l,o);let u=ke(vn(a,s),c);if(i){de(r!=null,()=>"When using zeroDebias: true, step is required.");const d=he(r,"step","movingAverage");u=mn(u,vn(l,Up(o,d)))}return Bt(s,u)}const qDe=Ie({movingAverage_:jDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XDe(n,e,t){iu(t);const r=he(n,"indices","scatterND","int32"),i=he(e,"updates","scatterND");gz(i,r,t);const s={indices:r,updates:i},a={shape:t};return Be.runKernel(CU,s,a)}const KDe=Ie({scatterND_:XDe});function YDe(n,e,t,r){if(n.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${n.dtype}.`);if(n.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${n.shape}.`);const i=n.rank>0?n.shape[0]:1,s=n.rank>1?n.shape[1]:1;if(t.length!==s)throw new Error(`outputShape has incorrect number of elements:, ${t.length}, should be: ${s}.`);const a=e.size;if(!(e.rank===0||e.rank===1&&a===i))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${i}]`);if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JDe(n,e,t,r=0){iu(t);const i=he(n,"sparseIndices","sparseToDense","int32"),s=he(e,"sparseValues","sparseToDense","string_or_numeric"),a=he(r,"defaultValue","sparseToDense",s.dtype);YDe(i,s,t,a);const o={sparseIndices:i,sparseValues:s,defaultValue:a},l={outputShape:t};return Be.runKernel(NU,o,l)}const ZDe=Ie({sparseToDense_:JDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QDe(n,e){const t=he(e,"indices","gatherND","int32"),i={params:he(n,"x","gatherND","string_or_numeric"),indices:t};return Be.runKernel(iU,i)}const e3e=Ie({gatherND_:QDe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t3e(n,e){if(e==null)return n.shape.slice();if(Vr(n.shape,e))return e;if(n.shape.length===e.length){const t=[];for(let r=0;r<n.shape.length;r++)e[r]==null&&n.shape[r]!=null?t.push(n.shape[r]):t.push(e[r]);return t}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n3e(n,e,t,r){const i=he(n,"x","dropout");if(de(i.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${i.dtype} tensor instead.`),de(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return n instanceof ji?i.clone():i;const s=t3e(i,t),a=1-e,o=mn(jE(Bt(Rv(s,0,1,"float32",r),a)),a);return ke(i,o)}const nee=Ie({dropout_:n3e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ree(n){return Math.floor(Math.pow(2,Math.ceil(Math.log(n)/Math.log(2))))}function xz(n,e,t){const r=1-n%2,i=new Float32Array(n);for(let s=0;s<n;++s){const a=2*Math.PI*s/(n+r-1);i[s]=e-t*Math.cos(a)}return ca(i,"float32")}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function r3e(n,e,t=1){const r=he(n,"predictions","inTopK"),i=he(e,"targets","inTopK");de(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),de(r.rank-1===i.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${i.rank}`),Rc(r.shape.slice(0,r.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const s=r.shape[r.shape.length-1];de(t>0&&t<=s,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${s}), but got ${t}`);const a=await r.data(),o=await i.data(),[l,c]=[a.length/s,s],u=so("bool",l);for(let d=0;d<l;d++){const h=d*c,p=a.subarray(h,h+c),g=[];for(let v=0;v<p.length;v++)g.push({value:p[v],index:v});g.sort((v,b)=>b.value-v.value),u[d]=0;for(let v=0;v<t;v++)if(g[v].index===o[d]){u[d]=1;break}}return n!==r&&r.dispose(),e!==i&&i.dispose(),Zd(u,i.shape,"bool")}const i3e=r3e;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s3e(n,e,t,r,i,s="NHWC",a){let o=n;n.rank===3&&(o=Fe(n,[1,n.shape[0],n.shape[1],n.shape[2]]));let l=e;l.rank===3&&(l=Fe(e,[1,e.shape[0],e.shape[1],e.shape[2]])),de(o.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${o.shape}.`),de(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),de(t.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${t}.`);const c=s==="NHWC"?o.shape[3]:o.shape[1],u=s==="NHWC"?l.shape[3]:l.shape[1];de(c===t[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${t[2]}.`),de(u===t[3],()=>`Error in conv2dDerFilter: depth of dy (${u}) must match output depth for filter (${t[3]}).`),al("conv2dDerFilter",i,a);const d={x:o,dy:l},h={strides:r,pad:i,dataFormat:s,dimRoundingMode:a,filterShape:t};return Be.runKernel(V4,d,h)}const Sz=Ie({conv2DBackpropFilter_:s3e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s3(n,e,t){if(t==null||t==="linear")return n;if(t==="relu")return ke(n,j1(e));throw new Error(`Cannot compute gradient for fused activation ${t}.`)}function a3(n,e){let t=e;const r=Aa(n.shape,e.shape);return r.length>0&&(t=wn(t,r)),Fe(t,n.shape)}function o3(n,e,t,r){if(e==="linear")return n;if(e==="relu")return Ih(n);if(e==="elu")return GE(n);if(e==="relu6")return az(n);if(e==="prelu")return ZD(n,t);if(e==="leakyrelu")return WD(n,r);if(e==="sigmoid")return Qd(n);throw new Error(`Unknown fused activation ${e}.`)}const l3=(n,e)=>!(n>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a3e({x:n,filter:e,strides:t,pad:r,dataFormat:i="NHWC",dilations:s=[1,1],dimRoundingMode:a,bias:o,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(l=l||"linear",l3(Be.state.gradientDepth,l)===!1){de(i==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${i} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let R=Rg(n,e,t,r,i,s,a);return o!=null&&(R=Bt(R,o)),o3(R,l,c,u)}const d=he(n,"x","conv2d","float32"),h=he(e,"filter","conv2d","float32");let p=d,g=!1;d.rank===3&&(g=!0,p=Fe(d,[1,d.shape[0],d.shape[1],d.shape[2]])),de(p.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${p.rank}.`),de(h.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${h.rank}.`),al("fused conv2d",r,a);const v=i==="NHWC"?p.shape[3]:p.shape[1];de(h.shape[2]===v,()=>`Error in conv2d: depth of input (${v}) must match input depth for filter ${h.shape[2]}.`),de(oo(t,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${t} and dilations '${s}'`);const b=Va(p.shape,h.shape,t,s,r,a);let x;o!=null&&(x=he(o,"bias","fused conv2d"),[x]=Bs(x,d),i==="NHWC"?hr(b.outShape,x.shape):(de(x.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${x.shape.length}.`),de(x.shape.length===0||x.shape[0]===b.outChannels||x.shape[0]===1,()=>`Error in fused conv2d: bias shape (${x.shape}) is not compatible with the number of output channels (${b.outChannels})`)));let C;if(c!=null){const R=c.shape;if(de(R.length<=1||R.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${R.length}.`),R.length===1)de(R[0]===1||R[0]===b.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${R}) is not compatible with the number of output channels (${b.outChannels}).`);else if(R.length===3)try{hr(R,b.outShape)}catch{const $=`Error in fused conv2d: PReLU activation weights (${R}) is not compatible with the output shape of the conv2d (${b.outShape}).`;throw Error($)}C=he(c,"prelu weights","fused conv2d")}const E=(R,L)=>{de(i==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${i} but only NHWC is currently supported.`);const[$,N,I,k]=L,P=s3(R,I,l);de(Mg(s),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`);const G=qU(N.shape,P,$,t,r),W=Sz(N,P,$.shape,t,r),X=[G,W];if(k!=null){const z=a3(k,P);X.push(z)}return X},_={x:p,filter:h,bias:x,preluActivationWeights:C},M={strides:t,pad:r,dataFormat:i,dilations:s,dimRoundingMode:a,activation:l,leakyreluAlpha:u};return o==null?zp((L,$,N)=>{let I=Be.runKernel(QR,_,M);return N([$,L,I]),g&&(I=Fe(I,[I.shape[1],I.shape[2],I.shape[3]])),{value:I,gradFunc:E}})(p,h):zp((L,$,N,I)=>{let k=Be.runKernel(QR,_,M);return I([$,L,k,N]),g&&(k=Fe(k,[k.shape[1],k.shape[2],k.shape[3]])),{value:k,gradFunc:E}})(p,h,x)}const iee=Ie({fusedConv2d_:a3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o3e(n,e,t,r,i,s=[1,1],a){let o=n;n.rank===3&&(o=Fe(n,[1,n.shape[0],n.shape[1],n.shape[2]]));let l=e;l.rank===3&&(l=Fe(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={x:o,dy:l},u={strides:r,pad:i,dimRoundingMode:a,dilations:s,filterShape:t};return Be.runKernel(Y4,c,u)}const see=Ie({depthwiseConv2dNativeBackpropFilter_:o3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l3e(n,e,t,r,i,s=[1,1],a){let o=e,l=!1;e.rank===3&&(l=!0,o=Fe(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={dy:o,filter:t},u={strides:r,pad:i,dimRoundingMode:a,dilations:s,inputShape:n},d=Be.runKernel(J4,c,u);return l?Fe(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const aee=Ie({depthwiseConv2dNativeBackpropInput_:l3e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c3e({x:n,filter:e,strides:t,pad:r,dataFormat:i="NHWC",dilations:s=[1,1],dimRoundingMode:a,bias:o,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(l3(Be.state.gradientDepth,l)===!1){let M=VE(n,e,t,r,i,s,a);return o!=null&&(M=Bt(M,o)),o3(M,l,c,u)}const d=he(n,"x","depthwiseConv2d","float32"),h=he(e,"filter","depthwiseConv2d","float32");let p=d,g=!1;d.rank===3&&(g=!0,p=Fe(d,[1,d.shape[0],d.shape[1],d.shape[2]])),de(p.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${p.rank}.`),de(h.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${h.rank}.`),de(p.shape[3]===h.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${p.shape[3]}) must match the inChannels dimension in filter ${h.shape[2]}.`),s==null&&(s=[1,1]),de(oo(t,s),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${t} and dilations '${s}'`),al("fused depthwiseConv2d",r,a);const v=Va(p.shape,h.shape,t,s,r,a,!0);let b;o!=null&&(b=he(o,"bias","fused conv2d"),[b]=Bs(b,d),hr(v.outShape,b.shape));let x;c!=null&&(x=he(c,"prelu weights","fused depthwiseConv2d"));const C=(M,R)=>{de(Mg(s),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${s}'`);const[L,$,N,I]=R,k=s3(M,N,l),P=aee($.shape,k,L,t,r,s,a),G=see($,k,L.shape,t,r,s,a);if(I!=null){const W=a3(b,k);return[P,G,W]}return[P,G]},E={x:p,filter:h,bias:b,preluActivationWeights:x},_={strides:t,pad:r,dataFormat:i,dilations:s,dimRoundingMode:a,activation:l,leakyreluAlpha:u};return o==null?zp((R,L,$)=>{let N=Be.runKernel(eN,E,_);return $([L,R,N]),g&&(N=Fe(N,[N.shape[1],N.shape[2],N.shape[3]])),{value:N,gradFunc:C}})(p,h):zp((R,L,$,N)=>{let I=Be.runKernel(eN,E,_);return N([L,R,I,$]),g&&(I=Fe(I,[I.shape[1],I.shape[2],I.shape[3]])),{value:I,gradFunc:C}})(p,h,b)}const u3e=Ie({fusedDepthwiseConv2d_:c3e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d3e({a:n,b:e,transposeA:t=!1,transposeB:r=!1,bias:i,activation:s="linear",preluActivationWeights:a,leakyreluAlpha:o=.2}){if(l3(Be.state.gradientDepth,s)===!1){let k=Br(n,e,t,r);return i!=null&&(k=Bt(k,i)),o3(k,s,a,o)}let l=he(n,"a","fused matMul"),c=he(e,"b","fused matMul");[l,c]=Bs(l,c);const u=t?l.shape[l.rank-2]:l.shape[l.rank-1],d=r?c.shape[c.rank-1]:c.shape[c.rank-2],h=t?l.shape[l.rank-1]:l.shape[l.rank-2],p=r?c.shape[c.rank-2]:c.shape[c.rank-1],g=l.shape.slice(0,-2),v=c.shape.slice(0,-2),b=xt(g),x=xt(v);de(u===d,()=>`Error in fused matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${l.shape} and ${c.shape} and transposeA=${t} and transposeB=${r} must match.`);const E=hr(l.shape.slice(0,-2),c.shape.slice(0,-2)).concat([h,p]),_=t?Fe(l,[b,u,h]):Fe(l,[b,h,u]),M=r?Fe(c,[x,p,d]):Fe(c,[x,d,p]);let R;i!=null&&(R=he(i,"bias","fused matMul"),[R]=Bs(R,l),hr(E,R.shape));let L;a!=null&&(L=he(a,"prelu weights","fused matMul"));const $=(k,P)=>{const[G,W,X,z]=P,J=s3(Fe(k,X.shape),X,s);let Q,Y;if(!t&&!r?(Q=Br(J,W,!1,!0),Y=Br(G,J,!0,!1)):!t&&r?(Q=Br(J,W,!1,!1),Y=Br(J,G,!0,!1)):t&&!r?(Q=Br(W,J,!1,!0),Y=Br(G,J,!1,!1)):(Q=Br(W,J,!0,!0),Y=Br(J,G,!0,!0)),i!=null){const q=a3(z,J);return[Q,Y,q]}else return[Q,Y]},N={a:_,b:M,bias:R,preluActivationWeights:L},I={transposeA:t,transposeB:r,activation:s,leakyreluAlpha:o};return i==null?zp((P,G,W)=>{const X=Be.runKernel(ZR,N,I);return W([P,G,X]),{value:Fe(X,E),gradFunc:$}})(_,M):zp((P,G,W,X)=>{const z=Be.runKernel(ZR,N,I);return X([P,G,z,W]),{value:Fe(z,E),gradFunc:$}})(_,M,R)}const XL=Ie({fusedMatMul_:d3e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f3e=Object.freeze(Object.defineProperty({__proto__:null,conv2d:iee,depthwiseConv2d:u3e,matMul:XL},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h3e(n){return xz(n,.54,.46)}const p3e=Ie({hammingWindow_:h3e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m3e(n){return xz(n,.5,.5)}const oee=Ie({hannWindow_:m3e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g3e(n,e,t,r=!1,i=0){let s=0;const a=[];for(;s+e<=n.size;)a.push(Kn(n,s,e)),s+=t;if(r)for(;s<n.size;){const o=s+e-n.size,l=Os([Kn(n,s,e-o),G1([o],i)]);a.push(l),s+=t}return a.length===0?Wy([],[0,e]):Fe(Os(a),[a.length,e])}const lee=Ie({frame_:g3e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y3e(n,e,t,r,i=oee){r==null&&(r=ree(e));const s=lee(n,e,t),a=ke(s,i(e));return i3(a,r)}const v3e=Ie({stft_:y3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b3e(n,e,t,r,i="bilinear",s=0){const a=he(n,"image","cropAndResize"),o=he(e,"boxes","cropAndResize","float32"),l=he(t,"boxInd","cropAndResize","int32"),c=o.shape[0];de(a.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${a.rank}.`),de(o.rank===2&&o.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${o.shape}.`),de(l.rank===1&&l.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${o.shape}.`),de(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),de(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),de(i==="bilinear"||i==="nearest",()=>`method must be bilinear or nearest, but was ${i}`);const u={image:a,boxes:o,boxInd:l},d={method:i,extrapolationValue:s,cropSize:r};return Be.runKernel(q4,u,d)}const x3e=Ie({cropAndResize_:b3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S3e(n){const e=he(n,"image","flipLeftRight","float32");de(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const t={image:e};return Be.runKernel(rU,t,{})}const w3e=Ie({flipLeftRight_:S3e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C3e(n){const e=he(n,"image","grayscaleToRGB"),t=e.rank-1,r=e.shape[t];de(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),de(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const i=new Array(e.rank);return i.fill(1,0,t),i[t]=3,zu(e,i)}const _3e=Ie({grayscaleToRGB_:C3e});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E3e(n){const e=he(n,"image","RGBToGrayscale"),t=e.rank-1,r=e.shape[t];de(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),de(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const i=e.dtype,s=nn(e,"float32"),a=ca([.2989,.587,.114]);let o;switch(e.rank){case 2:o=_x("ij,j->i",s,a);break;case 3:o=_x("ijk,k->ij",s,a);break;case 4:o=_x("ijkl,l->ijk",s,a);break;case 5:o=_x("ijklm,m->ijkl",s,a);break;case 6:o=_x("ijklmn,n->ijklm",s,a);break;default:throw new Error("Not a valid tensor rank.")}return o=Qa(o,-1),nn(o,i)}const A3e=Ie({rgbToGrayscale_:E3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T3e(n,e,t=0,r=.5){const i=he(n,"image","rotateWithOffset","float32");de(i.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${i.rank}.`);const s={image:i},a={radians:e,fillValue:t,center:r};return Be.runKernel(PU,s,a)}const M3e=Ie({rotateWithOffset_:T3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q1(n,e,t,r,i,s){r==null&&(r=.5),i==null&&(i=Number.NEGATIVE_INFINITY),s==null&&(s=0);const a=n.shape[0];return t=Math.min(t,a),de(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),de(n.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${n.rank}'`),de(n.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${n.shape[1]}`),de(e.rank===1,()=>"scores must be a 1D tensor"),de(e.shape[0]===a,()=>`scores has incompatible shape with boxes. Expected ${a}, but was ${e.shape[0]}`),de(0<=s&&s<=1,()=>`softNmsSigma must be in [0, 1], but was '${s}'`),{maxOutputSize:t,iouThreshold:r,scoreThreshold:i,softNmsSigma:s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R3e(n,e,t,r=.5,i=Number.NEGATIVE_INFINITY){const s=he(n,"boxes","nonMaxSuppression","float32"),a=he(e,"scores","nonMaxSuppression","float32"),o=q1(s,a,t,r,i);t=o.maxOutputSize,r=o.iouThreshold,i=o.scoreThreshold;const l={maxOutputSize:t,iouThreshold:r,scoreThreshold:i};return Be.runKernel(hU,{boxes:s,scores:a},l)}const N3e=Ie({nonMaxSuppression_:R3e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I3e(n,e,t){const r=D3e(n,e,t),i=r<0?-(r+1):r;n.splice(i,0,e)}function D3e(n,e,t){return O3e(n,e,t||k3e)}function k3e(n,e){return n>e?1:n<e?-1:0}function O3e(n,e,t){let r=0,i=n.length,s=0,a=!1;for(;r<i;){s=r+(i-r>>>1);const o=t(e,n[s]);o>0?r=s+1:(i=s,a=!o)}return a?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wz(n,e,t,r,i){return Ez(n,e,t,r,i,0)}function Cz(n,e,t,r,i,s){return Ez(n,e,t,r,i,0,!1,s,!0)}function _z(n,e,t,r,i,s){return Ez(n,e,t,r,i,s,!0)}function Ez(n,e,t,r,i,s,a=!1,o=!1,l=!1){const c=[];for(let b=0;b<e.length;b++)e[b]>i&&c.push({score:e[b],boxIndex:b,suppressBeginIndex:0});c.sort(vW);const u=s>0?-.5/s:0,d=[],h=[];for(;d.length<t&&c.length>0;){const b=c.pop(),{score:x,boxIndex:C,suppressBeginIndex:E}=b;if(x<i)break;let _=!1;for(let M=d.length-1;M>=E;--M){const R=B3e(n,C,d[M]);if(R>=r){_=!0;break}if(b.score=b.score*$3e(r,u,R),b.score<=i)break}b.suppressBeginIndex=d.length,_||(b.score===x?(d.push(C),h.push(b.score)):b.score>i&&I3e(c,b,vW))}const p=d.length,g=t-p;o&&g>0&&(d.push(...new Array(g).fill(0)),h.push(...new Array(g).fill(0)));const v={selectedIndices:d};return a&&(v.selectedScores=h),l&&(v.validOutputs=p),v}function B3e(n,e,t){const r=n.subarray(e*4,e*4+4),i=n.subarray(t*4,t*4+4),s=Math.min(r[0],r[2]),a=Math.min(r[1],r[3]),o=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(i[0],i[2]),u=Math.min(i[1],i[3]),d=Math.max(i[0],i[2]),h=Math.max(i[1],i[3]),p=(o-s)*(l-a),g=(d-c)*(h-u);if(p<=0||g<=0)return 0;const v=Math.max(s,c),b=Math.max(a,u),x=Math.min(o,d),C=Math.min(l,h),E=Math.max(x-v,0)*Math.max(C-b,0);return E/(p+g-E)}function $3e(n,e,t){const r=Math.exp(e*t*t);return t<=n?r:0}function vW(n,e){return n.score-e.score||n.score===e.score&&e.boxIndex-n.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function L3e(n,e,t,r=.5,i=Number.NEGATIVE_INFINITY){const s=he(n,"boxes","nonMaxSuppressionAsync"),a=he(e,"scores","nonMaxSuppressionAsync"),o=q1(s,a,t,r,i);t=o.maxOutputSize,r=o.iouThreshold,i=o.scoreThreshold;const l=await Promise.all([s.data(),a.data()]),c=l[0],u=l[1],{selectedIndices:d}=wz(c,u,t,r,i);return s!==n&&s.dispose(),a!==e&&a.dispose(),ca(d,"int32")}const F3e=L3e;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P3e(n,e,t,r=.5,i=Number.NEGATIVE_INFINITY,s=0){const a=he(n,"boxes","nonMaxSuppression"),o=he(e,"scores","nonMaxSuppression"),l=q1(a,o,t,r,i,s);t=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,s=l.softNmsSigma;const c={boxes:a,scores:o},u={maxOutputSize:t,iouThreshold:r,scoreThreshold:i,softNmsSigma:s},d=Be.runKernel(mU,c,u);return{selectedIndices:d[0],selectedScores:d[1]}}const U3e=Ie({nonMaxSuppressionWithScore_:P3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function z3e(n,e,t,r=.5,i=Number.NEGATIVE_INFINITY,s=0){const a=he(n,"boxes","nonMaxSuppressionAsync"),o=he(e,"scores","nonMaxSuppressionAsync"),l=q1(a,o,t,r,i,s);t=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,s=l.softNmsSigma;const c=await Promise.all([a.data(),o.data()]),u=c[0],d=c[1],{selectedIndices:h,selectedScores:p}=_z(u,d,t,r,i,s);return a!==n&&a.dispose(),o!==e&&o.dispose(),{selectedIndices:ca(h,"int32"),selectedScores:ca(p)}}const H3e=z3e;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V3e(n,e,t,r=.5,i=Number.NEGATIVE_INFINITY,s=!1){const a=he(n,"boxes","nonMaxSuppression"),o=he(e,"scores","nonMaxSuppression"),l=q1(a,o,t,r,i,null),c=l.maxOutputSize,u=l.iouThreshold,d=l.scoreThreshold,h={boxes:a,scores:o},p={maxOutputSize:c,iouThreshold:u,scoreThreshold:d,padToMaxOutputSize:s},g=Be.runKernel(pU,h,p);return{selectedIndices:g[0],validOutputs:g[1]}}const G3e=Ie({nonMaxSuppressionPadded_:V3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function W3e(n,e,t,r=.5,i=Number.NEGATIVE_INFINITY,s=!1){const a=he(n,"boxes","nonMaxSuppressionAsync"),o=he(e,"scores","nonMaxSuppressionAsync"),l=q1(a,o,t,r,i,null),c=l.maxOutputSize,u=l.iouThreshold,d=l.scoreThreshold,[h,p]=await Promise.all([a.data(),o.data()]),{selectedIndices:g,validOutputs:v}=Cz(h,p,c,u,d,s);return a!==n&&a.dispose(),o!==e&&o.dispose(),{selectedIndices:ca(g,"int32"),validOutputs:$n(v,"int32")}}const j3e=W3e;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q3e(n,e,t=!1,r=!1){const i=he(n,"images","resizeBilinear");de(i.rank===3||i.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${i.rank}.`),de(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),de(r===!1||t===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let s=i,a=!1;i.rank===3&&(a=!0,s=Fe(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const o={images:s},l={alignCorners:t,halfPixelCenters:r,size:e},c=Be.runKernel(MD,o,l);return a?Fe(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const cee=Ie({resizeBilinear_:q3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X3e(n,e,t=!1,r=!1){const i=he(n,"images","resizeNearestNeighbor");de(i.rank===3||i.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${i.rank}.`),de(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),de(i.dtype==="float32"||i.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),de(r===!1||t===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let s=i,a=!1;i.rank===3&&(a=!0,s=Fe(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const o={images:s},l={alignCorners:t,halfPixelCenters:r,size:e},c=Be.runKernel(TD,o,l);return a?Fe(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const uee=Ie({resizeNearestNeighbor_:X3e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K3e(n,e="binary",t=!1,r=.5){const i=he(n,"image","threshold"),s=.2989,a=.587,o=.114,l=i.shape[0]*i.shape[1];let c=ke(ca([r]),255),u,d,h,p;if(de(i.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${i.rank}.`),de(i.shape[2]===3||i.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${i.shape[2]}.`),de(i.dtype==="int32"||i.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${i.dtype}.`),de(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),i.shape[2]===3){[u,d,h]=bc(i,[1,1,1],-1);const b=ke(u,s),x=ke(d,a),C=ke(h,o);p=Bt(Bt(b,x),C)}else p=n;if(e==="otsu"){const b=vQ(nn(oz(p),"int32"),Zd([]),256);c=Y3e(b,l)}const g=t?Mv(p,c):Nc(p,c);return nn(ke(g,255),"int32")}function Y3e(n,e){let t=ca([-1]),r=ca([0]),i=ca([0]),s,a,o,l,c,u;for(let d=0;d<n.size-1;d++){s=Kn(n,0,d+1),a=Kn(n,d+1),c=mn(wn(s),e),u=mn(wn(a),e);const h=wn(ke(s,m1(0,s.size)));o=mn(h,wn(s));const p=G1(a.shape,s.size),g=Bt(m1(0,a.size),p),v=ke(a,g);l=mn(wn(v),wn(a));const b=vn(o,l),x=vn(o,l),C=ke(c,u);i=ke(ke(C,b),x);const E=Nc(i,r);r=Ro(E,i,r),t=Ro(E,ca([d]),t)}return t}const J3e=Ie({threshold_:K3e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z3e(n,e,t="nearest",r="constant",i=0,s){const a=he(n,"image","transform","float32"),o=he(e,"transforms","transform","float32");de(a.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${a.rank}.`),de(o.rank===2&&(o.shape[0]===a.shape[0]||o.shape[0]===1)&&o.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),de(s==null||s.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${s}.`);const l={image:a,transforms:o},c={interpolation:t,fillMode:r,fillValue:i,outputShape:s};return Be.runKernel(LU,l,c)}const Q3e=Ie({transform_:Z3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eke(n,e,t){const r=he(n,"a","bandPart");de(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const i=r.shape,[s,a]=r.shape.slice(-2);let o,l;typeof e=="number"?(de(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),de(e<=s,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${s}).`),o=he(e<0?s:e,"numLower","bandPart")):(de(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),o=Ro(YC(e,0),s,hv(e,s))),typeof t=="number"?(de(t%1===0,()=>`bandPart(): numUpper must be an integer, got ${t}.`),de(t<=a,()=>`bandPart(): numUpper (${t}) must not be greater than the number of columns (${a}).`),l=he(t<0?a:t,"numUpper","bandPart")):(de(t.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=Ro(YC(t,0),a,hv(t,a)));const c=Fe(m1(0,s,1,"int32"),[-1,1]),u=m1(0,a,1,"int32"),d=vn(c,u),h=Eh(Mv(d,o),Xg(d,is(l))),p=xa([s,a],r.dtype);return Fe(Ec(Yu(Fe(r,[-1,s,a])).map(g=>Ro(h,g,p))),i)}const tke=Ie({bandPart_:eke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nke(n){let e;if(Array.isArray(n)){e=!1,de(n!=null&&n.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const i=n[0].shape[0];for(let s=1;s<n.length;++s)de(n[s].shape[0]===i,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${n[s].shape[0]} vs. ${i})`)}else e=!0,n=bc(n,n.shape[0],0).map(i=>Gs(i,[0]));de(n.length<=n[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${n.length}) exceeds number of dimensions (${n[0].shape[0]}).`);const t=[],r=n;for(let i=0;i<n.length;++i)t.push(Be.tidy(()=>{let s=r[i];if(i>0)for(let a=0;a<i;++a){const o=ke(wn(ke(t[a],s)),t[a]);s=vn(s,o)}return mn(s,WE(s,"euclidean"))}));return e?Ec(t,0):t}const rke=Ie({gramSchmidt_:nke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ike(n,e=!1){if(de(n.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${n.rank}`),n.rank===2)return bW(n,e);{const t=n.shape.slice(0,n.shape.length-2).reduce((l,c)=>l*c),r=Yu(Fe(n,[t,n.shape[n.shape.length-2],n.shape[n.shape.length-1]]),0),i=[],s=[];r.forEach(l=>{const[c,u]=bW(l,e);i.push(c),s.push(u)});const a=Fe(Ec(i,0),n.shape),o=Fe(Ec(s,0),n.shape);return[a,o]}}function bW(n,e=!1){return Be.tidy(()=>{de(n.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${n.shape.length}D Tensor.`);const t=n.shape[0],r=n.shape[1];let i=QU(t),s=Bp(n);const a=Wy([[1]],[1,1]);let o=Bp(a);const l=t>=r?r:t;for(let c=0;c<l;++c){const u=s,d=o,h=i;[o,s,i]=Be.tidy(()=>{const p=Kn(s,[c,c],[t-c,1]),g=WE(p),v=Kn(s,[c,c],[1,1]),b=Ro(Nc(v,0),Wy([[-1]]),Wy([[1]])),x=vn(v,ke(b,g)),C=mn(p,x);C.shape[0]===1?o=Bp(a):o=Os([a,Kn(C,[1,0],[C.shape[0]-1,C.shape[1]])],0);const E=is(mn(Br(b,x),g)),_=Kn(s,[c,0],[t-c,r]),M=ke(E,o),R=qr(o);if(c===0)s=vn(_,Br(M,Br(R,_)));else{const N=vn(_,Br(M,Br(R,_)));s=Os([Kn(s,[0,0],[c,r]),N],0)}const L=qr(M),$=Kn(i,[0,c],[t,i.shape[1]-c]);if(c===0)i=vn($,Br(Br($,o),L));else{const N=vn($,Br(Br($,o),L));i=Os([Kn(i,[0,0],[t,c]),N],1)}return[o,s,i]}),rr([u,d,h])}return!e&&t>r&&(i=Kn(i,[0,0],[t,r]),s=Kn(s,[0,0],[r,r])),[i,s]})}const ske=Ie({qr_:ike});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var $l;(function(n){n[n.NONE=0]="NONE",n[n.MEAN=1]="MEAN",n[n.SUM=2]="SUM",n[n.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})($l||($l={}));function ake(n,e,t=$l.SUM_BY_NONZERO_WEIGHTS){const r=he(n,"losses","computeWeightedLoss");let i=null;e!=null&&(i=he(e,"weights","computeWeightedLoss"));const s=i==null?r:ke(r,i);if(t===$l.NONE)return s;if(t===$l.SUM)return wn(s);if(t===$l.MEAN){if(i==null)return Is(s);{const a=r.size/i.size,o=mn(wn(s),wn(i));return a>1?mn(o,$n(a)):o}}if(t===$l.SUM_BY_NONZERO_WEIGHTS){if(i==null)return mn(wn(s),$n(r.size));{const a=ke(i,vc(r.shape)),o=nn(wn(p1(a,$n(0))),"float32");return mn(wn(s),o)}}throw Error(`Unknown reduction: ${t}`)}const nm=Ie({computeWeightedLoss_:ake});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oke(n,e,t,r=$l.SUM_BY_NONZERO_WEIGHTS){const i=he(n,"labels","absoluteDifference"),s=he(e,"predictions","absoluteDifference");let a=null;t!=null&&(a=he(t,"weights","absoluteDifference")),Rc(i.shape,s.shape,"Error in absoluteDifference: ");const o=va(vn(i,s));return nm(o,a,r)}const lke=Ie({absoluteDifference_:oke});function cke(n,e,t,r,i=$l.SUM_BY_NONZERO_WEIGHTS){const s=he(n,"labels","cosineDistance"),a=he(e,"predictions","cosineDistance");let o=null;r!=null&&(o=he(r,"weights","cosineDistance")),Rc(s.shape,a.shape,"Error in cosineDistance: ");const l=$n(1),c=vn(l,wn(ke(s,a),t,!0));return nm(c,o,i)}const uke=Ie({cosineDistance_:cke});function dke(n,e,t,r=$l.SUM_BY_NONZERO_WEIGHTS){let i=he(n,"labels","hingeLoss");const s=he(e,"predictions","hingeLoss");let a=null;t!=null&&(a=he(t,"weights","hingeLoss")),Rc(i.shape,s.shape,"Error in hingeLoss: ");const o=$n(1);i=vn(ke($n(2),i),o);const l=Ih(vn(o,ke(i,s)));return nm(l,a,r)}const fke=Ie({hingeLoss_:dke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hke(n,e,t,r=1,i=$l.SUM_BY_NONZERO_WEIGHTS){const s=he(n,"labels","huberLoss"),a=he(e,"predictions","huberLoss");let o=null;t!=null&&(o=he(t,"weights","huberLoss")),Rc(s.shape,a.shape,"Error in huberLoss: ");const l=$n(r),c=va(vn(a,s)),u=hv(c,l),d=vn(c,u),h=Bt(ke($n(.5),qi(u)),ke(l,d));return nm(h,o,i)}const pke=Ie({huberLoss_:hke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mke(n,e,t,r=1e-7,i=$l.SUM_BY_NONZERO_WEIGHTS){const s=he(n,"labels","logLoss"),a=he(e,"predictions","logLoss");let o=null;t!=null&&(o=he(t,"weights","logLoss")),Rc(s.shape,a.shape,"Error in logLoss: ");const l=$n(1),c=$n(r),u=is(ke(s,nu(Bt(a,c)))),d=ke(vn(l,s),nu(Bt(vn(l,a),c))),h=vn(u,d);return nm(h,o,i)}const gke=Ie({logLoss_:mke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yke(n,e,t,r=$l.SUM_BY_NONZERO_WEIGHTS){const i=he(n,"labels","meanSquaredError"),s=he(e,"predictions","meanSquaredError");let a=null;t!=null&&(a=he(t,"weights","meanSquaredError")),Rc(i.shape,s.shape,"Error in meanSquaredError: ");const o=mz(i,s);return nm(o,a,r)}const vke=Ie({meanSquaredError_:yke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bke(n,e){const t=he(n,"labels","sigmoidCrossEntropyWithLogits"),r=he(e,"logits","sigmoidCrossEntropyWithLogits");Rc(t.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const i=Ih(r),s=ke(r,t),a=jD(nl(is(va(r))));return Bt(vn(i,s),a)}function xke(n,e,t,r=0,i=$l.SUM_BY_NONZERO_WEIGHTS){let s=he(n,"multiClassLabels","sigmoidCrossEntropy");const a=he(e,"logits","sigmoidCrossEntropy");let o=null;if(t!=null&&(o=he(t,"weights","sigmoidCrossEntropy")),Rc(s.shape,a.shape,"Error in sigmoidCrossEntropy: "),r>0){const c=$n(r),u=$n(1),d=$n(.5);s=Bt(ke(s,vn(u,c)),ke(d,c))}const l=bke(s,a);return nm(l,o,i)}const Ske=Ie({sigmoidCrossEntropy_:xke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wke(n,e,t=-1){if(t===-1&&(t=e.rank-1),t!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${t}`);return zp((i,s,a)=>{const l=qD(s,[t],!0),c=vn(nn(s,"float32"),l);a([i,c]);const u=is(ke(c,i));return{value:wn(u,[t]),gradFunc:(p,g)=>{const[v,b]=g,x=Xs(p.shape,[t]);return[ke(Fe(p,x),vn(nn(v,"float32"),nl(b))),ke(Fe(p,x),vn(nl(b),nn(v,"float32")))]}}})(n,e)}function Cke(n,e,t,r=0,i=$l.SUM_BY_NONZERO_WEIGHTS){let s=he(n,"onehotLabels","softmaxCrossEntropy");const a=he(e,"logits","softmaxCrossEntropy");let o=null;if(t!=null&&(o=he(t,"weights","softmaxCrossEntropy")),Rc(s.shape,a.shape,"Error in softmaxCrossEntropy: "),r>0){const c=$n(r),u=$n(1),d=$n(s.shape[1]);s=Bt(ke(s,vn(u,c)),mn(c,d))}const l=wke(s,a);return nm(l,o,i)}const _ke=Ie({softmaxCrossEntropy_:Cke});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eke(n,e,t,r){const i=he(n,"indices","sparseFillEmptyRows","int32"),s=he(e,"values","sparseFillEmptyRows"),a=he(t,"denseShape","sparseFillEmptyRows","int32"),o=he(r,"defaultValue","sparseFillEmptyRows",s.dtype);if(i.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${i.shape}`);if(s.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${s.shape}`);if(a.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${a.shape}`);if(o.rank!==0)throw new Error(`Default value should be a scalar but received shape ${o.shape}`);const l={indices:i,values:s,denseShape:a,defaultValue:o},c=Be.runKernel(AU,l);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}const Ake=Ie({sparseFillEmptyRows_:Eke});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tke(n,e,t){const r=he(n,"inputIndices","sparseReshape","int32"),i=he(e,"inputShape","sparseReshape","int32"),s=he(t,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(i.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${i.shape}`);if(s.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${s.shape}`);const a={inputIndices:r,inputShape:i,newShape:s},o=Be.runKernel(TU,a);return{outputIndices:o[0],outputShape:o[1]}}const Mke=Ie({sparseReshape_:Tke});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rke(n,e,t){const r=he(n,"data","sparseSegmentMean"),i=he(e,"indices","sparseSegmentMean","int32"),s=he(t,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${i.shape}`);if(s.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${s.shape}`);const a={data:r,indices:i,segmentIds:s};return Be.runKernel(MU,a)}const Nke=Ie({sparseSegmentMean_:Rke});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ike(n,e,t){const r=he(n,"data","sparseSegmentSum"),i=he(e,"indices","sparseSegmentSum","int32"),s=he(t,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${i.shape}`);if(s.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${s.shape}`);const a={data:r,indices:i,segmentIds:s};return Be.runKernel(RU,a)}const Dke=Ie({sparseSegmentSum_:Ike});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kke(n,e,t,r,i,s,a,o){const l=he(n,"data","stringNGrams","string");if(l.dtype!=="string")throw new Error("Data must be of datatype string");if(l.shape.length!==1)throw new Error(`Data must be a vector, saw: ${l.shape}`);const c=he(e,"dataSplits","stringNGrams");if(c.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const u={separator:t,nGramWidths:r,leftPad:i,rightPad:s,padWidth:a,preserveShortSequences:o},d={data:l,dataSplits:c},h=Be.runKernel(kU,d,u);return{nGrams:h[0],nGramsSplits:h[1]}}const Oke=Ie({stringNGrams_:kke});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bke(n,e,t=!0){const r=he(n,"input","stringSplit","string"),i=he(e,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(i.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${i.shape}`);const s={skipEmpty:t},a={input:r,delimiter:i},o=Be.runKernel(OU,a,s);return{indices:o[0],values:o[1],shape:o[2]}}const $ke=Ie({stringSplit_:Bke});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lke(n,e){const t=he(n,"input","stringToHashBucketFast","string"),r={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");const i={input:t};return Be.runKernel(BU,i,r)}const Fke=Ie({stringToHashBucketFast_:Lke});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pke(n,e,t,r=!0){const i=he(n,"input","staticRegexReplace","string"),s={pattern:e,rewrite:t,replaceGlobal:r};return Be.runKernel($D,{x:i},s)}const Uke=Ie({staticRegexReplace_:Pke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zke={fft:r3,ifft:QC,rfft:i3,irfft:pz},Hke={hammingWindow:p3e,hannWindow:oee,frame:lee,stft:v3e},Zc={flipLeftRight:w3e,grayscaleToRGB:_3e,resizeNearestNeighbor:uee,resizeBilinear:cee,rgbToGrayscale:A3e,rotateWithOffset:M3e,cropAndResize:x3e,nonMaxSuppression:N3e,nonMaxSuppressionAsync:F3e,nonMaxSuppressionWithScore:U3e,nonMaxSuppressionWithScoreAsync:H3e,nonMaxSuppressionPadded:G3e,nonMaxSuppressionPaddedAsync:j3e,threshold:J3e,transform:Q3e},dee={bandPart:tke,gramSchmidt:rke,qr:ske},Vke={absoluteDifference:lke,computeWeightedLoss:nm,cosineDistance:uke,hingeLoss:fke,huberLoss:pke,logLoss:gke,meanSquaredError:vke,sigmoidCrossEntropy:Ske,softmaxCrossEntropy:_ke},Gke={sparseFillEmptyRows:Ake,sparseReshape:Mke,sparseSegmentMean:Nke,sparseSegmentSum:Dke},Wke={stringNGrams:Oke,stringSplit:$ke,stringToHashBucketFast:Fke,staticRegexReplace:Uke};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jke=new Map,qke=new Map;class X1{getClassName(){return this.constructor.className}static fromConfig(e,t){return new e(t)}}class Fu{constructor(){this.classNameMap={}}static getMap(){return Fu.instance==null&&(Fu.instance=new Fu),Fu.instance}static register(e){Fu.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function Gt(n,e,t){de(n.className!=null,()=>"Class being registered does not have the static className property defined."),de(typeof n.className=="string",()=>"className is required to be a string, but got type "+typeof n.className),de(n.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof t>"u"&&(t=n.className);const r=t,i=e+">"+r;return Fu.register(n),jke.set(i,n),qke.set(n,i),n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Yg extends X1{minimize(e,t=!1,r){const{value:i,grads:s}=this.computeGradients(e,r);if(r!=null){const a=r.map(o=>({name:o.name,tensor:s[o.name]}));this.applyGradients(a)}else this.applyGradients(s);return rr(s),t?i:(i.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,t){return yNe(e,t)}dispose(){this.iterations_!=null&&rr(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:$n(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(Yg,Symbol.hasInstance,{value:n=>n.minimize!=null&&n.computeGradients!=null&&n.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fee extends Yg{static get className(){return"Adadelta"}constructor(e,t,r=null){super(),this.learningRate=e,this.rho=t,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=Be.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=Be.registeredVariables[r],a=!1;this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${r}/accum_grad`,variable:Ye(()=>Xr(s).variable(a))}),this.accumulatedUpdates[i]==null&&(this.accumulatedUpdates[i]={originalName:`${r}/accum_var`,variable:Ye(()=>Xr(s).variable(a))});const o=Array.isArray(e)?e[i].tensor:e[r];if(o==null)return;const l=this.accumulatedGrads[i].variable,c=this.accumulatedUpdates[i].variable;Ye(()=>{const u=Bt(ke(l,this.rho),ke(qi(o),1-this.rho)),d=ke(mn(ao(Bt(c,this.epsilon)),ao(Bt(l,this.epsilon))),o),h=Bt(ke(c,this.rho),ke(qi(d),1-this.rho));l.assign(u),c.assign(h);const p=Bt(ke(d,-this.learningRate),s);s.assign(p)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(rr(this.accumulatedGrads.map(e=>e.variable)),rr(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(e){e=await this.extractIterations(e);const t=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,t).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedUpdates=e.slice(t,t*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hee extends Yg{static get className(){return"Adagrad"}constructor(e,t=.1){super(),this.learningRate=e,this.initialAccumulatorValue=t,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=Be.registeredVariables[r];this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${r}/accumulator`,variable:Ye(()=>G1(s.shape,this.initialAccumulatorValue).variable(!1))});const a=Array.isArray(e)?e[i].tensor:e[r];if(a==null)return;const o=this.accumulatedGrads[i].variable;Ye(()=>{const l=Bt(o,qi(a));o.assign(l);const c=Bt(ke(mn(a,ao(Bt(l,Be.backend.epsilon()))),-this.learningRate),s);s.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&rr(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const t=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(t)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pee extends Yg{static get className(){return"Adam"}constructor(e,t,r,i=null){super(),this.learningRate=e,this.beta1=t,this.beta2=r,this.epsilon=i,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Ye(()=>{this.accBeta1=$n(t).variable(),this.accBeta2=$n(r).variable()}),i==null&&(this.epsilon=Be.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);Ye(()=>{const r=vn(1,this.accBeta1),i=vn(1,this.accBeta2);t.forEach((s,a)=>{const o=Be.registeredVariables[s],l=!1;this.accumulatedFirstMoment[a]==null&&(this.accumulatedFirstMoment[a]={originalName:`${s}/m`,variable:Ye(()=>Xr(o).variable(l))}),this.accumulatedSecondMoment[a]==null&&(this.accumulatedSecondMoment[a]={originalName:`${s}/v`,variable:Ye(()=>Xr(o).variable(l))});const c=Array.isArray(e)?e[a].tensor:e[s];if(c==null)return;const u=this.accumulatedFirstMoment[a].variable,d=this.accumulatedSecondMoment[a].variable,h=Bt(ke(u,this.beta1),ke(c,1-this.beta1)),p=Bt(ke(d,this.beta2),ke(qi(c),1-this.beta2)),g=mn(h,r),v=mn(p,i);u.assign(h),d.assign(p);const b=Bt(ke(mn(g,Bt(ao(v),this.epsilon)),-this.learningRate),o);o.assign(b)}),this.accBeta1.assign(ke(this.accBeta1,this.beta1)),this.accBeta2.assign(ke(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&rr(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&rr(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(e){e=await this.extractIterations(e),Ye(()=>{this.accBeta1.assign(Up(this.beta1,this.iterations_+1)),this.accBeta2.assign(Up(this.beta2,this.iterations_+1))});const t=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,t).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(t,t*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mee extends Yg{static get className(){return"Adamax"}constructor(e,t,r,i=null,s=0){super(),this.learningRate=e,this.beta1=t,this.beta2=r,this.epsilon=i,this.decay=s,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Ye(()=>{this.iteration=$n(0).variable(),this.accBeta1=$n(t).variable()}),i==null&&(this.epsilon=Be.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);Ye(()=>{const r=vn(1,this.accBeta1),i=mn(-this.learningRate,Bt(ke(this.iteration,this.decay),1));t.forEach((s,a)=>{const o=Be.registeredVariables[s],l=!1;this.accumulatedFirstMoment[a]==null&&(this.accumulatedFirstMoment[a]={originalName:`${s}/m`,variable:Xr(o).variable(l)}),this.accumulatedWeightedInfNorm[a]==null&&(this.accumulatedWeightedInfNorm[a]={originalName:`${s}/v`,variable:Xr(o).variable(l)});const c=Array.isArray(e)?e[a].tensor:e[s];if(c==null)return;const u=this.accumulatedFirstMoment[a].variable,d=this.accumulatedWeightedInfNorm[a].variable,h=Bt(ke(u,this.beta1),ke(c,1-this.beta1)),p=ke(d,this.beta2),g=va(c),v=tm(p,g);u.assign(h),d.assign(v);const b=Bt(ke(mn(i,r),mn(h,Bt(v,this.epsilon))),o);o.assign(b)}),this.iteration.assign(Bt(this.iteration,1)),this.accBeta1.assign(ke(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&rr(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&rr(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Az extends Yg{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=Array.isArray(e)?e[i].tensor:e[r];if(s==null)return;const a=Be.registeredVariables[r];Ye(()=>{const o=Bt(ke(this.c,s),a);a.assign(o)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=Fa($n(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gee extends Az{static get className(){return"Momentum"}constructor(e,t,r=!1){super(e),this.learningRate=e,this.momentum=t,this.useNesterov=r,this.accumulations=[],this.m=$n(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=Be.registeredVariables[r];this.accumulations[i]==null&&(this.accumulations[i]={originalName:`${r}/momentum`,variable:Ye(()=>Xr(s).variable(!1))});const a=this.accumulations[i].variable,o=Array.isArray(e)?e[i].tensor:e[r];o!=null&&Ye(()=>{let l;const c=Bt(ke(this.m,a),o);this.useNesterov?l=Bt(ke(this.c,Bt(o,ke(c,this.m))),s):l=Bt(ke(this.c,c),s),a.assign(c),s.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&rr(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const t=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(t)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yee extends Yg{static get className(){return"RMSProp"}constructor(e,t=.9,r=0,i=null,s=!1){if(super(),this.learningRate=e,this.decay=t,this.momentum=r,this.epsilon=i,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=s,i==null&&(this.epsilon=Be.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=Be.registeredVariables[r],a=!1;this.accumulatedMeanSquares[i]==null&&(this.accumulatedMeanSquares[i]={originalName:`${r}/rms`,variable:Ye(()=>Xr(s).variable(a))}),this.accumulatedMoments[i]==null&&(this.accumulatedMoments[i]={originalName:`${r}/momentum`,variable:Ye(()=>Xr(s).variable(a))}),this.accumulatedMeanGrads[i]==null&&this.centered&&(this.accumulatedMeanGrads[i]={originalName:`${r}/mg`,variable:Ye(()=>Xr(s).variable(a))});const o=Array.isArray(e)?e[i].tensor:e[r];if(o==null)return;const l=this.accumulatedMeanSquares[i].variable,c=this.accumulatedMoments[i].variable;Ye(()=>{const u=Bt(ke(l,this.decay),ke(qi(o),1-this.decay));if(this.centered){const d=this.accumulatedMeanGrads[i].variable,h=Bt(ke(d,this.decay),ke(o,1-this.decay)),p=mn(ke(o,this.learningRate),ao(vn(u,Bt(qi(h),this.epsilon)))),g=Bt(ke(c,this.momentum),p);l.assign(u),d.assign(h),c.assign(g);const v=vn(s,g);s.assign(v)}else{const d=Bt(ke(l,this.decay),ke(qi(o),1-this.decay)),h=Bt(ke(c,this.momentum),mn(ke(o,this.learningRate),ao(Bt(d,this.epsilon))));l.assign(d),c.assign(h);const p=vn(s,h);s.assign(p)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&rr(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&rr(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&rr(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(e){e=await this.extractIterations(e);const t=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,t).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedMoments=e.slice(t,t*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(t*2,t*3).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xke=[fee,hee,pee,mee,gee,yee,Az];function Kke(){for(const n of Xke)Gt(n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yke="model",Jke=".json",Zke=".weights.bin";function xW(n){return new Promise(e=>setTimeout(e)).then(n)}class pv{constructor(e){if(!it().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(pv.URL_SCHEME)&&(e=e.slice(pv.URL_SCHEME.length)),(e==null||e.length===0)&&(e=Yke),this.modelJsonFileName=e+Jke,this.weightDataFileName=e+Zke}async save(e){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const t=pf.join(e.weightData),r=window.URL.createObjectURL(new Blob([t],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const i=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],s=KZ(e,i),a=window.URL.createObjectURL(new Blob([JSON.stringify(s)],{type:"application/json"})),o=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(o.download=this.modelJsonFileName,o.href=a,await xW(()=>o.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){const l=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;l.download=this.weightDataFileName,l.href=r,await xW(()=>l.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:UE(e)}}}}pv.URL_SCHEME="downloads://";class Qke{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,t)=>{const r=new FileReader;r.onload=i=>{const s=JSON.parse(i.target.result),a=s.modelTopology;if(a==null){t(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(s.weightsManifest==null){t(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){e({modelTopology:a});return}const l=HU(s,c=>this.loadWeights(c));e(l)},r.onerror=i=>t(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})}loadWeights(e){const t=[],r=[];for(const a of e)t.push(...a.weights),r.push(...a.paths);const i=this.checkManifestAndWeightFiles(e),s=r.map(a=>this.loadWeightsFile(a,i[a]));return Promise.all(s).then(a=>[t,a])}loadWeightsFile(e,t){return new Promise((r,i)=>{const s=new FileReader;s.onload=a=>{const o=a.target.result;r(o)},s.onerror=a=>i(`Failed to weights data from file of path '${e}'.`),s.readAsArrayBuffer(t)})}checkManifestAndWeightFiles(e){const t=[],r=this.weightsFiles.map(s=>cW(s.name)),i={};for(const s of e)s.paths.forEach(a=>{const o=cW(a);if(t.indexOf(o)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${o}'`);if(t.push(o),r.indexOf(o)===-1)throw new Error(`Weight file with basename '${o}' is not provided.`);i[a]=this.weightsFiles[r.indexOf(o)]});if(t.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${t.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return i}}const eOe=n=>it().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(pv.URL_SCHEME)?tOe(n.slice(pv.URL_SCHEME.length)):null;xs.registerSaveRouter(eOe);function tOe(n="model"){return new pv(n)}function nOe(n){return new Qke(n)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SW(n,e,t,r){a(n),t=t??0,r=r??1,o(t,r);let i=0;const s=l=>(l.then(c=>{const u=t+ ++i/n.length*(r-t);return e(u),c}),l);function a(l){de(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function o(l,c){de(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),de(c>=0&&c<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${c}`),de(c>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${c}`)}return Promise.all(n.map(s))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function vee(n,e){e==null&&(e={});const t=e.fetchFunc==null?it().platform.fetch:e.fetchFunc,r=n.map(d=>t(d,e.requestInit,{isBinary:!0})),o=(e.onProgress==null?await Promise.all(r):await SW(r,e.onProgress,0,.5)).map(d=>d.arrayBuffer());return e.onProgress==null?await Promise.all(o):await SW(o,e.onProgress,.5,1)}function rOe(n,e){var t;const r=e.fetchFunc==null?it().platform.fetch:e.fetchFunc;let i=0,s;return(t=e.onProgress)===null||t===void 0||t.call(e,0),new ReadableStream({pull:async a=>{for(var o;i<n.length;){s||(s=(await r(n[i],e.requestInit,{isBinary:!0})).body.getReader());const{done:l,value:c}=await s.read();if(l){i++,s=void 0,(o=e.onProgress)===null||o===void 0||o.call(e,i/n.length);continue}a.enqueue(c);return}a.close()}})}async function iOe(n,e="",t,r){return bee(a=>vee(a,{requestInit:r}))(n,e,t)}function bee(n){return async(e,t="",r)=>{const i=e.map(()=>!1),s={},a=r!=null?r.map(()=>!1):[],o=[];if(e.forEach((p,g)=>{let v=0;p.weights.forEach(b=>{const x="quantization"in b?b.quantization.dtype:b.dtype,C=lv[x]*xt(b.shape),E=()=>{i[g]=!0,s[g]==null&&(s[g]=[]),s[g].push({manifestEntry:b,groupOffset:v,sizeBytes:C})};r!=null?r.forEach((_,M)=>{_===b.name&&(E(),a[M]=!0)}):E(),o.push(b.name),v+=C})}),!a.every(p=>p)){const p=r.filter((g,v)=>!a[v]);throw new Error(`Could not find weights in manifest with names: ${p.join(", ")}. 
Manifest JSON has weights with names: ${o.join(", ")}.`)}const l=i.reduce((p,g,v)=>(g&&p.push(v),p),[]),c=[];l.forEach(p=>{e[p].paths.forEach(g=>{const v=t+(t.endsWith("/")?"":"/")+g;c.push(v)})});const u=await n(c),d={};let h=0;return l.forEach(p=>{const g=e[p].paths.length,v=new pf(u.slice(h,h+g));s[p].forEach(x=>{const C=v.slice(x.groupOffset,x.groupOffset+x.sizeBytes),E=WZ(C,[x.manifestEntry]);for(const _ in E)d[_]=E[_]}),h+=g}),d}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sOe="application/octet-stream",aOe="application/json";class Tz{constructor(e,t){if(this.DEFAULT_METHOD="POST",t==null&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.weightUrlConverter=t.weightUrlConverter,t.fetchFunc!=null?(de(typeof t.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=t.fetchFunc):this.fetch=it().platform.fetch,de(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&de(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,t.requestInit!=null&&t.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{},this.loadOptions=t}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],i=KZ(e,r);if(t.body.append("model.json",new Blob([JSON.stringify(i)],{type:aOe}),"model.json"),e.weightData!=null){const a=pf.join(e.weightData);t.body.append("model.weights.bin",new Blob([a],{type:sOe}),"model.weights.bin")}const s=await this.fetch(this.path,t);if(s.ok)return{modelArtifactsInfo:UE(e),responses:[s]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${s.status}.`)}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let t;try{t=await e.json()}catch{let a=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?a+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":a+=" Please make sure the server is serving valid JSON for this request.",new Error(a)}const r=t.modelTopology,i=t.weightsManifest;if(r==null&&i==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return t}async load(){if(this.loadOptions.streamWeights)return this.loadStream();const e=await this.loadModelJSON();return HU(e,t=>this.loadWeights(t))}async loadStream(){const e=await this.loadModelJSON(),t=await this.getWeightUrls(e.weightsManifest),r=HL(e.weightsManifest),i=()=>rOe(t,this.loadOptions);return Object.assign(Object.assign({},e),{weightSpecs:r,getWeightStream:i})}async getWeightUrls(e){const t=Array.isArray(this.path)?this.path[1]:this.path,[r,i]=oOe(t),s=this.weightPathPrefix||r,a=[],o=[];for(const l of e)for(const c of l.paths)this.weightUrlConverter!=null?o.push(this.weightUrlConverter(c)):a.push(s+c+i);return this.weightUrlConverter&&a.push(...await Promise.all(o)),a}async loadWeights(e){const t=await this.getWeightUrls(e),r=HL(e),i=await vee(t,this.loadOptions);return[r,i]}}Tz.URL_SCHEME_REGEX=/^https?:\/\//;function oOe(n){const e=n.lastIndexOf("/"),t=n.lastIndexOf("?"),r=n.substring(0,e),i=t>e?n.substring(t):"";return[r+"/",i]}function KL(n){return n.match(Tz.URL_SCHEME_REGEX)!=null}const xee=(n,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let t=!0;if(Array.isArray(n)?t=n.every(r=>KL(r)):t=KL(n),t)return Mz(n,e)}return null};xs.registerSaveRouter(xee);xs.registerLoadRouter(xee);function Mz(n,e){return new Tz(n,e)}function lOe(n,e){return Mz(n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UB{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class See{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class cOe{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=t=>Promise.resolve(e.save(t)))}}function uOe(n,e,t,r){const i=arguments;return new cOe(wee(...i))}function wee(n,e,t,r){return arguments.length===1?n.modelTopology!=null||n.weightSpecs!=null?new UB(n):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new UB({modelTopology:n})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new UB({modelTopology:n,weightSpecs:e,weightData:t,trainingConfig:r}))}function dOe(n){return new See(n)}function fOe(n){return new See(n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cee=Object.freeze(Object.defineProperty({__proto__:null,CompositeArrayBuffer:pf,browserFiles:nOe,browserHTTPRequest:lOe,concatenateArrayBuffers:XZ,copyModel:fMe,decodeWeights:WZ,decodeWeightsStream:qZ,encodeWeights:zL,fromMemory:uOe,fromMemorySync:wee,getLoadHandlers:ZTe,getModelArtifactsForJSON:HU,getModelArtifactsForJSONSync:YZ,getModelArtifactsInfoForJSON:UE,getSaveHandlers:JZ,getWeightSpecs:HL,http:Mz,isHTTPScheme:KL,listModels:uMe,loadWeights:iOe,moveModel:hMe,registerLoadRouter:JTe,registerSaveRouter:YTe,removeModel:dMe,weightsLoaderFactory:bee,withSaveHandler:dOe,withSaveHandlerSync:fOe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let ly;function hOe(n,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(n==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let t=!1,r=!1,i=!1,s=!1,a=!1,o=!1;if(n.data instanceof Uint8Array)t=!0;else if(typeof ImageData<"u"&&n instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement)i=!0;else if(typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement)s=!0;else if(n.getContext!=null)a=!0;else if(typeof ImageBitmap<"u"&&n instanceof ImageBitmap)o=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${n.constructor.name}`);if(BL(kL,Be.backendName)!=null){const g={pixels:n},v={numChannels:e};return Be.runKernel(kL,g,v)}const[c,u]=i?[n.videoWidth,n.videoHeight]:[n.width,n.height];let d;if(a)d=n.getContext("2d").getImageData(0,0,c,u).data;else if(r||t)d=n.data;else if(s||i||o){if(ly==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")ly=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else ly=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});ly.canvas.width=c,ly.canvas.height=u,ly.drawImage(n,0,0,c,u),d=ly.getImageData(0,0,c,u).data}let h;if(e===4)h=new Int32Array(d);else{const g=c*u;h=new Int32Array(g*e);for(let v=0;v<g;v++)for(let b=0;b<e;++b)h[v*e+b]=d[v*4+b]}return YQ(h,[u,c,e],"int32")}function pOe(n){if(n.rank!==2&&n.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${n.rank}.`);const e=n.rank===2?1:n.shape[2];if(e>4||e===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${e}`);if(n.dtype!=="float32"&&n.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${n.dtype}. Please use float32 or int32 tensors.`)}async function mOe(n,e){let t=he(n,"img","toPixels");if(!(n instanceof ji)){const c=t;t=nn(c,"int32"),c.dispose()}pOe(t);const[r,i]=t.shape.slice(0,2),s=t.rank===2?1:t.shape[2],a=await t.data(),o=t.dtype==="float32"?255:1,l=new Uint8ClampedArray(i*r*4);for(let c=0;c<r*i;++c){const u=[0,0,0,255];for(let h=0;h<s;h++){const p=a[c*s+h];if(t.dtype==="float32"){if(p<0||p>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${p}.`)}else if(t.dtype==="int32"&&(p<0||p>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${p}.`);s===1?(u[0]=p*o,u[1]=p*o,u[2]=p*o):u[h]=p*o}const d=c*4;l[d+0]=Math.round(u[0]),l[d+1]=Math.round(u[1]),l[d+2]=Math.round(u[2]),l[d+3]=Math.round(u[3])}return t!==n&&t.dispose(),l}const gOe=Ie({fromPixels_:hOe});function Rz(n,e){const t=n.shape.length,r=e.shape.length;if(t<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${t}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>t)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${t}`);if(xt(n.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${n.shape}.`);const i=e.shape,s=i[i.length-1];let a=1;for(let d=0;d<i.length-1;++d)a*=i[d];const o=n.shape,l=i.slice();l.pop();let c=1;for(let d=s;d<t;++d)c*=o[d],l.push(o[d]);const u=[...kn(n.shape).map(d=>d/c),1].slice(0,s);return[l,a,c,u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YL=-2,yOe=-1;function Nz(n,e,t){const r=n.shape.length;de(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),de(r===t.length,()=>`Error in slice${r}D: Length of size ${t} must match the rank of the array (${r}).`);for(let i=0;i<r;++i)de(e[i]+t[i]<=n.shape[i],()=>`Error in slice${r}D: begin[${i}] + size[${i}] (${e[i]+t[i]}) would overflow input.shape[${i}] (${n.shape[i]})`)}function vOe(n){const e=[];let t=0;for(;n>0;)n&1&&e.push(t),n/=2,t++;return e}function Iz(n,e,t){const r=[];for(let i=0;i<n.length;i++)r[i]=Math.ceil((e[i]-n[i])/t[i]);return r}function _ee(n,e,t,r){const i=[...n];for(let s=i.length;s<r.length;s++)i.push(1);for(let s=0;s<t;s++)s===0?i[e]=1:(i.splice(e,0,1),i.pop());return i}function Eee(n,e,t){return t<=n?t:t-(e-1)}function Aee(n,e){const t=[];for(let r=0;r<n;r++)t.push(e+r);return t}function bOe(n,e,t,r,i,s,a,o,l){const c=n.length;let u=new Array(c),d=new Array(c),h=new Array(c);if(e.length&&t>0){const p=e[0],g=t+1;u=Tee(a,p,g,r,n),d=Mee(o,p,g,i,n),h=_ee(s,p,g,n)}else for(let p=0;p<c;p++)u[p]=Nee(a,r,s,n,p,l),d[p]=Iee(o,i,s,n,p,l),h[p]=Ree(s,p,l);return{begin:u,end:d,strides:h}}function Tee(n,e,t,r,i){const s=[...i],a=Aee(t,e);for(let o=0;o<s.length;o++)if(a.indexOf(o)>-1)s[o]=0;else{const l=Eee(e,t,o);let c=r[l];n&1<<l&&(c=0),s[o]=c}return s}function Mee(n,e,t,r,i){const s=[...i],a=Aee(t,e);for(let o=0;o<s.length;o++)if(a.indexOf(o)>-1)s[o]=Number.MAX_SAFE_INTEGER;else{const l=Eee(e,t,o);let c=r[l];n&1<<l&&(c=Number.MAX_SAFE_INTEGER),s[o]=c}for(let o=0;o<s.length;o++){const l=i[o];s[o]<0&&(s[o]+=l),s[o]=sv(0,s[o],i[o])}return s}function Ree(n,e,t){let r=n[e];return(t&1<<e||r==null)&&(r=1),r}function Nee(n,e,t,r,i,s){let a=e[i];const o=t[i]||1;(n&1<<i||s&1<<i||a==null)&&(o>0?a=Number.MIN_SAFE_INTEGER:a=Number.MAX_SAFE_INTEGER);const l=r[i];return a<0&&(a+=l),a=sv(0,a,l-1),a}function Iee(n,e,t,r,i,s){let a=e[i];const o=t[i]||1;(n&1<<i||s&1<<i||a==null)&&(o>0?a=Number.MAX_SAFE_INTEGER:a=Number.MIN_SAFE_INTEGER);const l=r[i];return a<0&&(a+=l),o>0?a=sv(0,a,l):a=sv(-1,a,l-1),a}function Dz(n,e,t){let r=t.length;for(let i=0;i<t.length;i++)if(t[i]>1){r=i;break}for(let i=r+1;i<t.length;i++)if(e[i]>0||t[i]!==n[i])return!1;return!0}function kz(n,e){let t=n.length>0?n[n.length-1]:1;for(let r=0;r<n.length-1;r++)t+=n[r]*e[r];return t}function c3(n,e,t){let r;const i=n.shape.length;typeof e=="number"?r=[e,...new Array(i-1).fill(0)]:e.length<i?r=e.concat(new Array(i-e.length).fill(0)):r=e.slice(),r.forEach(a=>{de(a!==-1,()=>"slice() does not support negative begin indexing.")});let s;return t==null?s=new Array(i).fill(-1):typeof t=="number"?s=[t,...new Array(i-1).fill(-1)]:t.length<i?s=t.concat(new Array(i-t.length).fill(-1)):s=t,s=s.map((a,o)=>a>=0?a:(de(a===-1,()=>`Negative size values should be exactly -1 but got ${a} for the slice() size at index ${o}.`),n.shape[o]-r[o])),[r,s]}function Oz(n,e,t,r,i,s,a,o,l){let c;if(r==null?(c=new Array(e.length),c.fill(1)):c=r,a!=null&&(a&a-1)!==0)throw new Error("Multiple ellipses in slice is not allowed.");let u=!1;const d={dims:c.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:t.slice(),strides:c.slice(),beginMask:i,endMask:s,ellipsisMask:a,newAxisMask:o,shrinkAxisMask:l};for(let E=0;E<d.dims;E++)u&&(1<<E&o)!==0&&d.numAddAxisAfterEllipsis++,1<<E&a&&(u=!0);u||(d.ellipsisMask|=1<<d.dims,d.dims++);const h={dims:n.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};xOe(d,h);let p=!0,g=!0,v=!0;const b=[],x=[];for(let E=0;E<n.length;++E){if(h.strides[E]===0)throw Error(`strides[${E}] must be non-zero`);const _=!!(h.shrinkAxisMask&1<<E),M=n[E];if(M===-1){b.push(_?1:-1);continue}const R=[h.beginMask&1<<E,h.endMask&1<<E],L=[h.strides[E]>0?0:-1,h.strides[E]>0?M:M-1];if(_&&h.strides[E]<=0)throw Error("only stride 1 allowed on non-range indexing.");v=v&&h.strides[E]===1;const $=!!(h.beginMask&1<<E&&h.endMask&1<<E);if(h.beginValid&&h.endValid){if(_){const P=h.begin[E]<0?M+h.begin[E]:h.begin[E];if(h.begin[E]=P,h.end[E]=h.begin[E]+1,P<0||P>=M)throw Error(`slice index ${h.begin[E]} of dimension ${E} out of bounds.`)}else h.begin[E]=wW(h.begin[E],0,h.strides[E],M,R,L),h.end[E]=wW(h.end[E],1,h.strides[E],M,R,L);const k=h.strides[E]===1&&h.begin[E]===0&&h.end[E]===M;p=p&&k,g=g&&(E===0&&h.strides[E]===1||k)}else p=p&&h.strides[E]===1&&$,g=g&&(E===0&&h.strides[E]===1||$);let N,I=!1;if(h.beginValid&&h.endValid?(N=h.end[E]-h.begin[E],I=!0):_?(N=1,I=!0):$&&M>=0&&(h.strides[E]<0?N=-M:N=M,I=!0),I){let k;N===0||N<0!=h.strides[E]<0?k=0:k=Math.trunc(N/h.strides[E])+(N%h.strides[E]!==0?1:0),b.push(k)}else b.push(-1)}for(let E=0;E<h.finalShapeGatherIndices.length;++E){const _=h.finalShapeGatherIndices[E];_>=0?x.push(b[_]):_===YL&&x.push(1)}return{finalShapeSparse:x.filter((E,_)=>h.finalShapeGatherIndices[_]!==YL),finalShape:x,isIdentity:p,sliceDim0:g,isSimpleSlice:v,begin:h.begin,end:h.end,strides:h.strides}}function xOe(n,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let t=0;e.beginValid=n.begin!=null,e.endValid=n.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<n.dims;r++)if(1<<r&n.ellipsisMask){const i=Math.min(e.dims-(n.dims-r)+1+n.numAddAxisAfterEllipsis,e.dims);for(;t<i;t++)e.begin[t]=0,e.end[t]=0,e.strides[t]=1,e.beginMask|=1<<t,e.endMask|=1<<t,e.finalShapeGatherIndices.push(t),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[t]=r}else if(1<<r&n.newAxisMask)e.finalShapeGatherIndices.push(YL),e.finalShapeGatherIndicesSparse.push(-1);else{if(t===e.begin.length)throw Error(`Index out of range using input dim ${t}; input has only ${e.dims} dims, ${e.begin.length}.`);n.begin!=null&&(e.begin[t]=n.begin[r]),n.end!=null&&(e.end[t]=n.end[r]),e.strides[t]=n.strides[r],n.beginMask&1<<r&&(e.beginMask|=1<<t),n.endMask&1<<r&&(e.endMask|=1<<t),n.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(yOe),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<t):(e.finalShapeGatherIndices.push(t),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[t]=r,t++}}function wW(n,e,t,r,i,s){if(i[e])return t>0?s[e]:s[e+1&1];{const a=n<0?r+n:n;return a<s[0]?s[0]:a>s[1]?s[1]:a}}const SOe=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:Nz,computeFlatOffset:kz,computeOutShape:Iz,getNormalizedAxes:bOe,isSliceContinous:Dz,maskToAxes:vOe,parseSliceParams:c3,sliceInfo:Oz,startForAxis:Nee,startIndicesWithElidedDims:Tee,stopForAxis:Iee,stopIndicesWithElidedDims:Mee,stridesForAxis:Ree,stridesWithElidedDims:_ee},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wOe{static sgd(e){return new Az(e)}static momentum(e,t,r=!1){return new gee(e,t,r)}static rmsprop(e,t=.9,r=0,i=null,s=!1){return new yee(e,t,r,i,s)}static adam(e=.001,t=.9,r=.999,i=null){return new pee(e,t,r,i)}static adadelta(e=.001,t=.95,r=null){return new fee(e,t,r)}static adamax(e=.002,t=.9,r=.999,i=null,s=0){return new mee(e,t,r,i,s)}static adagrad(e,t=.1){return new hee(e,t)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fx=wOe;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const COe=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:n=>n();function Dee(){return new Promise(n=>COe(()=>n()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bz(n,e){const t=n[0].length;n.forEach((i,s)=>{de(i.length===t,()=>`Error in concat${t}D: rank of tensors[${s}] must be the same as the rank of the rest (${t})`)}),de(e>=0&&e<t,()=>`Error in concat${t}D: axis must be between 0 and ${t-1}.`);const r=n[0];n.forEach((i,s)=>{for(let a=0;a<t;a++)de(a===e||i[a]===r[a],()=>`Error in concat${t}D: Shape of tensors[${s}] (${i}) does not match the shape of the rest (${r}) along the non-concatenated axis ${s}.`)})}function hh(n,e){const t=n[0].slice();for(let r=1;r<n.length;r++)t[e]+=n[r][e];return t}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var jd;(function(n){n[n.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",n[n.VALUE_ROWIDS=1]="VALUE_ROWIDS",n[n.ROW_LENGTHS=2]="ROW_LENGTHS",n[n.ROW_SPLITS=3]="ROW_SPLITS",n[n.ROW_LIMITS=4]="ROW_LIMITS",n[n.ROW_STARTS=5]="ROW_STARTS"})(jd||(jd={}));function kee(n,e,t){let r=new Array;if(t==null&&e==null)return r;if(e==null)for(;r.length<n+t.length;)r.push(-1);else r=e.slice();if(t==null)return r;if(n+t.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${n+t.length}, but shape.rank = ${r.length}`);for(let i=1;i<t.length;++i){const s=t[i],a=r[r.length-t.length+i],o=r[a];if(s>=0)if(o>=0){if(o!==s)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${i+n}] = ${s} but shape[${i+n}] = ${o}`)}else r[a]=s}return r}function Oee(n){const e={FIRST_DIM_SIZE:jd.FIRST_DIM_SIZE,VALUE_ROWIDS:jd.VALUE_ROWIDS,ROW_LENGTHS:jd.ROW_LENGTHS,ROW_SPLITS:jd.ROW_SPLITS,ROW_LIMITS:jd.ROW_LIMITS,ROW_STARTS:jd.ROW_STARTS},t=[];for(const r of n)if(r in e)t.push(e[r]);else break;return t}function Bee(n){return n.length===0?0:n[0]===jd.FIRST_DIM_SIZE?n.length-1:n.length}function $ee(n,e){if(n==null||e==null)return;const t=n.length,r=e.length;if(t>=r)throw new Error(`defaultValue.shape=${n} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${t} must be less than ragged tensor input flatValues.rank = ${r})`);for(let i=0;i<Math.min(t,r-1);++i){const s=n[i],a=e[i+1];if(s>=0&&a>=0&&s!==1&&s!==a)throw new Error(`defaultValue.shape=${n}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${i-n.length}] = ${s} but ragged tensor input.flatValues.shape[${i-n.length}] = ${a}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $z=30;function u3(n){return n<=$z?n:NL(n,Math.floor(Math.sqrt(n)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lz(n,e,t){const r=t*(typeof n=="number"?n:n[0]),i=e*(typeof n=="number"?n:n[1]);return[r,i]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XE(n,e,t,r=!0){let i=[];if(r)i=i.concat(e.slice(0)),i.push(n[0]/t),i=i.concat(n.slice(1));else{i=i.concat(n[0]);const s=e.length;for(let a=0;a<s;++a)i=i.concat([n[a+1]/e[a],e[a]]);i=i.concat(n.slice(s+1))}return i}function KE(n,e,t=!0){const r=[];if(t){r.push(e);for(let i=e+1;i<n;++i)i<=2*e?(r.push(i),r.push(i-(e+1))):r.push(i)}else{const i=[],s=[];for(let a=1;a<n;++a)a>=e*2+1||a%2===1?s.push(a):i.push(a);r.push(...i),r.push(0),r.push(...s)}return r}function YE(n,e,t,r=!0){const i=[];r?i.push(n[0]/t):i.push(n[0]*t);for(let s=1;s<n.length;++s)s<=e.length?r?i.push(e[s-1]*n[s]):i.push(n[s]/e[s-1]):i.push(n[s]);return i}function Fz(n,e){const t=[0];for(let r=0;r<e;++r)t.push(n[r][0]);return t}function Pz(n,e,t){const r=n.slice(0,1);for(let i=0;i<t;++i)r.push(n[i+1]-e[i][0]-e[i][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d3=1.7580993408473768,f3=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uz=.3275911,zz=.254829592,Hz=-.284496736,Vz=1.421413741,Gz=-1.453152027,Wz=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hp(n,e){if(n.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${n.length}, imag: ${e.length}.`);const t=new Float32Array(n.length*2);for(let r=0;r<t.length;r+=2)t[r]=n[r/2],t[r+1]=e[r/2];return t}function Lee(n){const e=new Float32Array(n.length/2),t=new Float32Array(n.length/2);for(let r=0;r<n.length;r+=2)e[r/2]=n[r],t[r/2]=n[r+1];return{real:e,imag:t}}function Fee(n){const e=Math.ceil(n.length/4),t=new Float32Array(e),r=new Float32Array(e);for(let i=0;i<n.length;i+=4)t[Math.floor(i/4)]=n[i],r[Math.floor(i/4)]=n[i+1];return{real:t,imag:r}}function Pee(n){const e=Math.floor(n.length/4),t=new Float32Array(e),r=new Float32Array(e);for(let i=2;i<n.length;i+=4)t[Math.floor(i/4)]=n[i],r[Math.floor(i/4)]=n[i+1];return{real:t,imag:r}}function jz(n,e){const t=n[e*2],r=n[e*2+1];return{real:t,imag:r}}function Uee(n,e,t,r){n[r*2]=e,n[r*2+1]=t}function zee(n,e){const t=new Float32Array(n/2),r=new Float32Array(n/2);for(let i=0;i<Math.ceil(n/2);i++){const s=(e?2:-2)*Math.PI*(i/n);t[i]=Math.cos(s),r[i]=Math.sin(s)}return{real:t,imag:r}}function Hee(n,e,t){const r=(t?2:-2)*Math.PI*(n/e),i=Math.cos(r),s=Math.sin(r);return{real:i,imag:s}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zB="->",_Oe=/->/g,CW=",",_W="...";function qz(n,e){n=n.replace(/\s/g,"");const t=(n.length-n.replace(_Oe,"").length)/zB.length;if(t<1)throw new Error("Equations without an arrow are not supported.");if(t>1)throw new Error(`Equation must contain exactly one arrow ("${zB}").`);const[r,i]=n.split(zB);de(r.indexOf(_W)===-1,()=>`The ellipsis notation ("${_W}") is not supported yet.`);const s=r.split(CW),a=s.length;if(e!==a)throw new Error(`Expected ${a} input tensors, received ${e}`);if(a>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const o=[];for(let h=0;h<i.length;++h){const p=i[h];if(!s.some(g=>g.indexOf(p)!==-1))throw new Error(`Output subscripts contain the label ${p} not present in the input subscripts.`);o.indexOf(p)===-1&&o.push(p)}for(let h=0;h<r.length;++h){const p=r[h];o.indexOf(p)===-1&&p!==CW&&o.push(p)}const l=new Array(s.length);for(let h=0;h<a;++h){if(new Set(s[h].split("")).size!==s[h].length)throw new Error(`Found duplicate axes in input component ${s[h]}. Support for duplicate axes in input is not implemented yet.`);l[h]=[];for(let p=0;p<s[h].length;++p)l[h].push(o.indexOf(s[h][p]))}const c=o.length,u=i.length,d=[];for(let h=u;h<c;++h)d.push(h);return{allDims:o,summedDims:d,idDims:l}}function Xz(n,e){let t=new Array(n);t.fill(-1);for(let i=0;i<e.length;++i)t[e[i]]=i;const r=[];for(let i=0;i<n;++i)t[i]===-1&&r.push(i);return t=t.filter(i=>i!==-1),{permutationIndices:t,expandDims:r}}function Kz(n,e,t){const r=new Array(n);for(let i=0;i<t.length;++i){const s=t[i].shape;for(let a=0;a<e[i].length;++a)r[e[i][a]]===void 0?r[e[i][a]]=s[a]:de(r[e[i][a]]===s[a],()=>`Expected dimension ${r[e[i][a]]} at axis ${a} of input shaped ${JSON.stringify(s)}, but got dimension ${s[a]}`)}}function Yz(n,e){const t=n,r=[];let i=0;n.length===0&&t.push(-1),i=n.length+1;for(let a=0;a<i;++a)r.push([]);const s=[];for(let a=0;a<t.length;++a){const o=t[a],l=EOe(e,o);for(const c of l)s.indexOf(c)===-1&&(r[a].push(c),s.push(c))}return{path:t,steps:r}}function Jz(n){return n.every((e,t)=>e===t)}function EOe(n,e){const t=[];for(let r=0;r<n.length;++r)(n[r].length===0||n[r].indexOf(e)!==-1||e===-1)&&t.push(r);return t}function Zz(n,e,t=0){let r=[];if(typeof e=="number")de(n.shape[t]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(n.shape[t]/e);else{const i=e.reduce((a,o)=>(o===-1&&(a+=1),a),0);de(i<=1,()=>"There should be only one negative value in split array.");const s=e.indexOf(-1);if(s!==-1){const a=e.reduce((o,l)=>l>0?o+l:o);e[s]=n.shape[t]-a}de(n.shape[t]===e.reduce((a,o)=>a+o),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vee(n){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${n}`}function Gee(n,e){return`indices(${n}, 0) is invalid: ${e} < 0`}function Wee(n,e,t){return`indices(${n}, 0) is invalid: ${e} >= ${t}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jee(n,e){return`only one output dimension may be -1, not both ${n} and ${e}`}function qee(n,e){return`size ${n} must be non-negative, not ${e}`}function Xee(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function Kee(n,e){const t=xt(n),r=xt(e);return`Input to reshape is a SparseTensor with ${t}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${n} outputShape= ${e}`}function Yee(n,e){const t=xt(n),r=xt(e);return`Input to reshape is a tensor with ${t} dense values, but the requested shape has ${r}. inputShape=${n} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JL(){return"segment ids must be >= 0"}function Jee(){return"segment ids are not increasing"}function Zee(n,e){return`Segment id ${n} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function Qee(n,e,t){return`Bad: indices[${n}] == ${e} out of range [0, ${t})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ete(n,e){let t=!1,r;for(n<=$z?(r=n,t=!0):r=NL(n,Math.floor(Math.sqrt(n)));!t;)r>e||r===n?t=!0:r=NL(n,r+1);return r}function tte(n,e,t){const r=[],i=n.length;for(let s=0;s<i;s++)s!==e?r.push(n[s]):r.push(t);return r}function Qz(n,e,t,r){const i=e.shape.length,s=n.shape.length;if(r!==0&&(r<-i||r>i))throw new Error(`Expect batchDims in the range of [-${i}, ${i}], but got ${r}`);if(r<0&&(r+=i),r>s)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${s}).`);if(t<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${t}).`);for(let d=0;d<r;++d)if(n.shape[d]!==e.shape[d])throw new Error(`x.shape[${d}]: ${n.shape[d]} should be equal to indices.shape[${d}]: ${e.shape[d]}.`);const a=n.shape[t],o=[];let l=1,c=1,u=1;for(let d=0;d<r;++d)o.push(n.shape[d]),l*=n.shape[d];for(let d=r;d<t;d++)o.push(n.shape[d]),c*=n.shape[d];for(let d=r;d<i;d++)o.push(e.shape[d]);for(let d=t+1;d<s;d++)o.push(n.shape[d]),u*=n.shape[d];return{batchSize:l,sliceSize:u,outerSize:c,dimSize:a,outputShape:o}}const AOe=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:Qz,computeOutShape:tte,segOpComputeOptimalWindowSize:ete},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vp(n){try{return n.map(e=>Eg(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function nte(n){return n.map(e=>pg(e))}const TOe=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:zz,ERF_A2:Hz,ERF_A3:Vz,ERF_A4:Gz,ERF_A5:Wz,ERF_P:Uz,PARALLELIZE_THRESHOLD:$z,get RowPartitionType(){return jd},SELU_SCALE:f3,SELU_SCALEALPHA:d3,applyActivation:o3,assertAndGetBroadcastShape:hr,assertAxesAreInnerMostDims:lo,assertParamsConsistent:Bz,assignToTypedArray:Uee,axesAreInnerMostDims:ZU,calculateShapes:Nv,checkEinsumDimSizes:Kz,checkPadOnDimRoundingMode:al,combineLocations:IQ,combineRaggedTensorToTensorShapes:kee,complexWithEvenIndex:Fee,complexWithOddIndex:Pee,computeConv2DInfo:Va,computeConv3DInfo:jg,computeDefaultPad:WU,computeDilation2DInfo:zE,computeOptimalWindowSize:u3,computeOutAndReduceShapes:Ga,computeOutShape:hh,computePool2DInfo:ed,computePool3DInfo:Qp,convertConv2DDataFormat:em,decodeEinsumEquation:qz,eitherStridesOrDilationsAreOne:oo,expandShapeToKeepDim:Xs,exponent:Hee,exponents:zee,fromStringArrayToUint8:nte,fromUint8ToStringArray:Vp,getAxesPermutation:ws,getBroadcastDims:h1,getComplexWithIndex:jz,getEinsumComputePath:Yz,getEinsumPermutation:Xz,getFusedBiasGradient:a3,getFusedDyActivation:s3,getImageCenter:Lz,getInnerMostAxes:Ys,getPermuted:KE,getRaggedRank:Bee,getReductionAxes:Aa,getReshaped:XE,getReshapedPermuted:YE,getRowPartitionTypesHelper:Oee,getSliceBeginCoords:Fz,getSliceSize:Pz,getSparseFillEmptyRowsIndicesDenseShapeMismatch:Vee,getSparseFillEmptyRowsNegativeIndexErrorMessage:Gee,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:Wee,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:Xee,getSparseReshapeInputOutputMismatchErrorMessage:Yee,getSparseReshapeInputOutputMultipleErrorMessage:Kee,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:jee,getSparseReshapeNegativeOutputDimErrorMessage:qee,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:Qee,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:JL,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:Jee,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:Zee,getUndoAxesPermutation:qg,isIdentityPermutation:Jz,log:hTe,mergeRealAndImagArrays:Hp,prepareAndValidate:Rz,prepareSplitSize:Zz,segment_util:AOe,shouldFuse:l3,slice_util:SOe,splitRealAndImagArrays:Lee,stridesOrDilationsArePositive:dv,tupleValuesAreOne:Mg,upcastType:_c,validateDefaultValueShape:$ee,validateInput:gz,validateUpdateShape:JQ,warn:Kc},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Kke();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rte={kernelName:LI,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ke(n,j1(nn(t,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MOe={kernelName:W_,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>{const r=qi(nn(t,"float32")),i=ao(vn($n(1),r));return is(mn(n,i))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ROe={kernelName:j_,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>{const r=ao(vn(qi(nn(t,"float32")),1));return mn(n,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NOe={kernelName:V1,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e,i=hr(t.shape,r.shape);return{a:()=>{let o=n;const l=Aa(t.shape,i);return l.length>0&&(o=wn(o,l)),Fe(o,t.shape)},b:()=>{let o=n;const l=Aa(r.shape,i);return l.length>0&&(o=wn(o,l)),Fe(o,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IOe={kernelName:FI,saveAllInputs:!0,gradFunc:(n,e)=>{const t={};return e.forEach((r,i)=>{t[i]=()=>n.clone()}),t}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DOe={kernelName:PI,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>Xr(t)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kOe={kernelName:UI,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>Xr(t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OOe={kernelName:q_,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>mn(n,ao(vn($n(1),qi(nn(t,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BOe={kernelName:X_,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>{const r=ao(Bt($n(1),qi(nn(t,"float32"))));return mn(n,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Oe={kernelName:J_,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e,i=hr(t.shape,r.shape);return{a:()=>{const o=Bt(qi(t),qi(r));let l=ke(n,mn(r,o));const c=Aa(t.shape,i);return c.length>0&&(l=wn(l,c)),Fe(l,t.shape)},b:()=>{const o=Bt(qi(t),qi(r));let l=is(ke(n,mn(t,o)));const c=Aa(r.shape,i);return c.length>0&&(l=wn(l,c)),Fe(l,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LOe={kernelName:K_,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>mn(n,Bt(qi(nn(t,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FOe={kernelName:Y_,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>mn(n,vn($n(1),qi(nn(t,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function POe(n,e,t,r,i,s){const a=he(n,"dy","avgPool3dGrad"),o=he(e,"input","avgPool3dGrad");let l=a,c=o,u=!1;o.rank===4&&(u=!0,l=Fe(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),c=Fe(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),de(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),de(c.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${c.rank}.`),al("avgPool3dGrad",i,s);const d={dy:l,input:c},h={filterSize:t,strides:r,pad:i,dimRoundingMode:s},p=Be.runKernel(P4,d,h);return u?Fe(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}const UOe=Ie({avgPool3dGrad_:POe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zOe={kernelName:HI,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,{filterSize:i,strides:s,pad:a,dimRoundingMode:o}=t;return{x:()=>UOe(n,r,i,s,a,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HOe(n,e,t,r,i){const s=he(n,"dy","avgPoolGrad"),a=he(e,"input","avgPoolGrad");de(a.rank===s.rank,()=>`Rank of input (${a.rank}) does not match rank of dy (${s.rank})`);let o=a,l=s,c=!1;a.rank===3&&(c=!0,o=Fe(a,[1,a.shape[0],a.shape[1],a.shape[2]]),l=Fe(s,[1,s.shape[0],s.shape[1],s.shape[2]])),de(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),de(o.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${o.rank}.`);const u={dy:l,input:o},d={filterSize:t,strides:r,pad:i},h=Be.runKernel(F4,u,d);return c?Fe(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const VOe=Ie({avgPoolGrad_:HOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GOe={kernelName:zI,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,{filterSize:i,strides:s,pad:a}=t;return{x:()=>VOe(n,r,i,s,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WOe={kernelName:VI,inputsToSave:["a","b"],gradFunc:(n,e,t)=>{const[r,i]=e,{transposeA:s,transposeB:a}=t;return!s&&!a?{a:()=>Br(n,i,!1,!0),b:()=>Br(r,n,!0,!1)}:!s&&a?{a:()=>Br(n,i,!1,!1),b:()=>Br(n,r,!0,!1)}:s&&!a?{a:()=>Br(i,n,!1,!0),b:()=>Br(r,n,!1,!1)}:{a:()=>Br(i,n,!0,!0),b:()=>Br(n,r,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jOe={kernelName:GI,gradFunc:(n,e,t)=>{const{blockShape:r,crops:i}=t;return{x:()=>JD(n,r,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qOe={kernelName:uTe,gradFunc:(n,e,t)=>{const r=t,i=r.inputShape,s=r.shape,a=Array.from(s);for(let l=i.length-1;l>=0;l--)if(i[l]===s[l])a[l]=1;else if(i[l]!==1)throw new Error(`broadcastTo(): [${i}] cannot be broadcast to [${s}].`);const o=[];for(let l=0;l<a.length;l++)a[l]>1&&o.push(l);return{x:()=>wn(n,o,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XOe={kernelName:Z_,gradFunc:n=>({x:()=>n.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KOe={kernelName:Q_,gradFunc:n=>({x:()=>Xr(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YOe={kernelName:eE,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,{clipValueMin:i,clipValueMax:s}=t;return{x:()=>Ro(Eh(Xg(r,i),Mv(r,s)),n,Xr(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JOe={kernelName:jI,inputsToSave:["x"],gradFunc:rte.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZOe={kernelName:qI,saveAllInputs:!0,gradFunc:(n,e,t)=>{const r=e.map(l=>l.shape),{axis:i}=t,s=Ir(i,e[0].shape)[0],a=r.map(l=>l[s]);return bc(n,a,s).map(l=>()=>l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QOe={kernelName:XI,inputsToSave:["x","filter"],gradFunc:(n,e,t)=>{const[r,i]=e,{dilations:s,strides:a,pad:o,dataFormat:l}=t;return de(Mg(s),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`),{x:()=>qU(r.shape,n,i,a,o,l),filter:()=>Sz(r,n,i.shape,a,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eBe={kernelName:KI,inputsToSave:["dy","filter"],gradFunc:(n,e,t)=>{const[r,i]=e,{strides:s,pad:a,dataFormat:o,dimRoundingMode:l}=t;return{dy:()=>Rg(n,i,s,a,o,1,l),filter:()=>Sz(n,r,i.shape,s,a,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tBe(n,e,t,r,i){let s=n;n.rank===4&&(s=Fe(n,[1,n.shape[0],n.shape[1],n.shape[2],n.shape[3]]));let a=e;a.rank===4&&(a=Fe(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),de(s.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${s.shape}.`),de(a.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${a.shape}.`),de(t.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${t}.`),de(s.shape[4]===t[3],()=>`Error in conv3dDerFilter: depth of input ${s.shape[4]}) must match input depth in filter (${t[3]}.`),de(a.shape[4]===t[4],()=>`Error in conv3dDerFilter: depth of dy (${a.shape[4]}) must match output depth for filter (${t[4]}).`);const o={x:s,dy:a},l={strides:r,pad:i,filterShape:t};return Be.runKernel(G4,o,l)}const nBe=Ie({conv3DBackpropFilter_:tBe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rBe={kernelName:YI,inputsToSave:["x","filter"],gradFunc:(n,e,t)=>{const{dilations:r,strides:i,pad:s}=t;de(Mg(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[a,o]=e;return{x:()=>EQ(a.shape,n,o,i,s),filter:()=>nBe(a,n,o.shape,i,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iBe={kernelName:tE,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ke(is(dz(nn(t,"float32"))),n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sBe={kernelName:nE,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ke(fz(nn(t,"float32")),n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aBe={kernelName:JI,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,{axis:i,exclusive:s,reverse:a}=t;return{x:()=>{const o=ws([i],r.rank);let l=YU(n,i,s,!a);return o!=null&&(l=qr(l,o)),l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oBe={kernelName:ZI,inputsToSave:["x","filter"],gradFunc:(n,e,t)=>{const{dilations:r,strides:i,pad:s,dimRoundingMode:a}=t,o=r??[1,1];de(Mg(o),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${o}'`);const[l,c]=e;return de(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),de(c.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${c.rank}.`),de(l.shape[3]===c.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`),de(oo(i,o),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${i} and dilations '${o}'.`),al("depthwiseConv2d",s,a),{x:()=>aee(l.shape,n,c,i,s,o,a),filter:()=>see(l,n,c.shape,i,s,o,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lBe={kernelName:QI,inputsToSave:["x","filter"],gradFunc:(n,e,t)=>{const[r,i]=e,s={x:r,filter:i,dy:n},a={x:r,filter:i,dy:n};return{x:()=>Be.runKernel(IL,s,t),filter:()=>Be.runKernel(DL,a,t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cBe={kernelName:iE,outputsToSave:[!0],gradFunc:(n,e)=>{const[t]=e,r={dy:n,y:t};return{x:()=>Be.runKernel(eU,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uBe={kernelName:sE,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e,r=ke(nl(is(qi(t))),2/Math.sqrt(Math.PI));return{x:()=>ke(n,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dBe={kernelName:aE,outputsToSave:[!0],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ke(n,t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fBe={kernelName:tD,inputsToSave:["input"],gradFunc:(n,e)=>{const[t]=e;return{input:()=>Fe(n,t.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hBe={kernelName:oE,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ke(n,nl(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pBe={kernelName:lE,gradFunc:n=>({x:()=>Xr(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mBe={kernelName:cE,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e,i=hr(t.shape,r.shape);return{a:()=>{const o=mn(n,nn(r,"float32")),l=Aa(t.shape,i);return l.length>0?Fe(wn(o,l),t.shape):o},b:()=>{let o=ke(n,nn(t,"float32"));const l=Aa(r.shape,i);l.length>0&&(o=Fe(wn(o,l),r.shape));const c=qi(r);return is(mn(o,nn(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gBe={kernelName:nD,inputsToSave:["x","mean","variance","scale"],gradFunc:(n,e,t)=>{const{varianceEpsilon:r}=t,[i,s,a,o]=e,l=o??$n(1),c=Aa(s.shape,i.shape),u=[];if(s.rank===1){for(let _=0;_<i.shape.length-1;++_)u.push(i.shape[_]);u.push(1)}const d=vn(i,s),h=ke(n,l),p=lz(Bt(a,$n(r))),g=ke(ke(ke(p,p),p),$n(-.5));return{x:()=>s.rank===1?Fe(ke(ke(n,zu(Fe(p,[1,1,1,s.shape[0]]),u)),l),i.shape):Fe(ke(ke(n,p),l),i.shape),mean:()=>{let _=ke(ke(p,$n(-1)),h);return s.rank===1&&(_=wn(_,c)),Fe(_,s.shape)},variance:()=>{let _=ke(ke(g,d),h);return s.rank===1&&(_=wn(_,c)),Fe(_,s.shape)},scale:()=>{const _=ke(d,p);let M=ke(n,_);return s.rank===1&&(M=wn(M,c)),Fe(M,s.shape)},offset:()=>{let _=n;return s.rank===1&&(_=wn(_,c)),Fe(_,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yBe={kernelName:rD,inputsToSave:["x","indices"],gradFunc:(n,e,t)=>{const[r,i]=e,{axis:s,batchDims:a}=t,o=Ir(s,r.shape)[0],l=(c,u,d)=>()=>{const h=c.shape,p=u.size,g=h.slice(0,o),v=g.length,b=h.slice(s,h.length).slice(1),x=b.length,C=EW(0,v),E=EW(v+1,v+1+x),_=AW([g,[p],b]),M=Fe(d,_),R=Fe(u,[p]),L=AW([[v],C,E]),$=qr(M,L);let N=vz($,R,c.shape[o]);const I=qg(L);return N=qr(N,I),N};if(a===1){const c=r.shape[0],u=r.split(c,0);return{x:()=>Ec(u.map((p,g)=>l(p,i.slice(g,1),n.slice(g,1))())).reshape(r.shape),indices:()=>i}}else return{x:l(r,i,n),indices:()=>i}}};function EW(n,e){const t=[];for(let r=n;r<e;++r)t.push(r);return t}function AW(n){const e=[];for(let t=0;t<n.length;++t)for(let r=0;r<n[t].length;++r)e.push(n[t][r]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vBe={kernelName:uE,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e;return{a:()=>Xr(t),b:()=>Xr(r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bBe={kernelName:dE,gradFunc:n=>({x:()=>nn(n,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xBe={kernelName:fE,gradFunc:n=>({x:()=>Xr(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SBe={kernelName:hE,gradFunc:n=>({x:()=>Xr(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wBe={kernelName:pE,gradFunc:n=>({x:()=>Xr(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CBe={kernelName:sD,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,{alpha:i}=t,s=Nc(r,0);return{x:()=>Ro(s,n,ke(n,i))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Be={kernelName:gE,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>mn(n,Bt(t,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EBe={kernelName:mE,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>mn(n,nn(t,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ABe={kernelName:fTe,inputsToSave:[],outputsToSave:[!0],gradFunc:(n,e,t)=>{const[r]=e,{axis:i}=t;return{logits:()=>{const a=nl(r);return vn(n,ke(wn(n,i,!0),a))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TBe(n,e,t,r=5,i=1,s=1,a=.5){const o={x:n,y:e,dy:t},l={depthRadius:r,bias:i,alpha:s,beta:a};return Be.runKernel(lU,o,l)}const MBe=Ie({localResponseNormalizationBackprop_:TBe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RBe={kernelName:dD,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(n,e,t)=>{const[r,i]=e,{depthRadius:s,bias:a,alpha:o,beta:l}=t;return{x:()=>MBe(r,i,n,s,a,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ite(n,e,t,r){return e.rank<t.rank&&(e=Fe(e,Xs(e.shape,r))),n.rank<t.rank&&(n=Fe(n,Xs(n.shape,r))),{x:()=>ke(n,nn(sf(t,e),n.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TW={kernelName:fD,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(n,e,t)=>{const r=t,{reductionIndices:i}=r,s=e[0],a=e[1],o=Ir(i,s.shape),l=ite(n,a,s,o);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NBe={kernelName:yE,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e;return{a:()=>ke(n,nn(Xg(t,r),"float32")),b:()=>ke(n,nn(YC(t,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IBe(n,e,t,r,i,s,a){const o=he(n,"dy","maxPool3dGrad"),l=he(e,"input","maxPool3dGrad"),c=he(t,"output","maxPool3dGrad");let u=o,d=l,h=c,p=!1;l.rank===4&&(p=!0,u=Fe(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),d=Fe(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),h=Fe(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),de(u.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${u.rank}.`),de(d.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${d.rank}.`),de(h.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${h.rank}.`),al("maxPool3dGrad",s,a);const g={dy:u,input:d,output:h},v={filterSize:r,strides:i,pad:s,dimRoundingMode:a},b=Be.runKernel(uU,g,v);return p?Fe(b,[b.shape[1],b.shape[2],b.shape[3],b.shape[4]]):b}const DBe=Ie({maxPool3dGrad_:IBe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kBe={kernelName:pD,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(n,e,t)=>{const[r,i]=e,{filterSize:s,strides:a,pad:o,dimRoundingMode:l}=t;return{x:()=>DBe(n,r,i,s,a,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OBe(n,e,t,r,i,s,a){const o=he(n,"dy","maxPoolGrad"),l=he(e,"input","maxPoolGrad"),c=he(t,"output","maxPoolGrad");de(l.rank===o.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${o.rank})`),de(o.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${o.rank}.`),de(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),al("maxPoolGrad",s,a);const u={dy:o,input:l,output:c},d={filterSize:r,strides:i,pad:s,dimRoundingMode:a};return Be.runKernel(cU,u,d)}const BBe=Ie({maxPoolGrad_:OBe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Be={kernelName:hD,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(n,e,t)=>{const[r,i]=e,{filterSize:s,strides:a,pad:o}=t;return{x:()=>BBe(n,r,i,s,a,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LBe={kernelName:mD,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,{axis:i}=t,s=Ir(i,r.shape),o=Ga(r.shape,s)[1],l=xt(o);return{x:()=>{const u=r.shape.slice();s.forEach(p=>{u[p]=1});const d=Fe(n,u);return mn(ke(d,vc(r.shape,"float32")),l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FBe={kernelName:gD,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(n,e,t)=>{const r=t,{axis:i}=r,[s,a]=e,o=Ir(i,s.shape),l=ite(n,a,s,o);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PBe={kernelName:vE,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e;return{a:()=>ke(n,nn(Mv(t,r),"float32")),b:()=>ke(n,nn(Nc(t,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UBe={kernelName:yD,inputsToSave:["x"],gradFunc:(n,e,t)=>{const r=e[0],{paddings:i}=t,s=i.map(a=>a[0]);return{x:()=>Kn(n,s,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zBe={kernelName:bE,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e,i=hr(t.shape,r.shape);return{a:()=>{const o=Aa(t.shape,i);return o.length>0?Fe(wn(n,o),t.shape):n},b:()=>{const o=ke(n,is(jE(mn(t,r)))),l=Aa(r.shape,i);return l.length>0?Fe(wn(o,l),r.shape):o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HBe={kernelName:xE,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e,i=hr(t.shape,r.shape);return{a:()=>{const o=ke(n,nn(r,"float32")),l=Aa(t.shape,i);return l.length>0?Fe(wn(o,l),t.shape):o},b:()=>{const o=ke(n,nn(t,"float32")),l=Aa(r.shape,i);return l.length>0?Fe(wn(o,l),r.shape):o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VBe={kernelName:vD,gradFunc:n=>({x:()=>is(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GBe={kernelName:SD,inputsToSave:["indices"],gradFunc:(n,e)=>{const t=e[0];return{indices:()=>xa(t.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WBe={kernelName:xD,gradFunc:n=>({x:()=>Xr(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jBe={kernelName:wD,saveAllInputs:!0,gradFunc:(n,e,t)=>{const{axis:r}=t;return Yu(n,r).map(s=>()=>s)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MW={kernelName:CD,inputsToSave:["x"],gradFunc:(n,e,t)=>{const r=e[0],{paddings:i}=t,s=i.map(a=>a[0]);return{x:()=>Kn(n,s,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qBe={kernelName:SE,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(n,e)=>{const[t,r,i]=e,s=t,a=r,o=hr(s.shape,a.shape);return{a:()=>{const u=nn(a,"float32");let d=ke(n,ke(u,Up(s,vn(u,$n(1)))));const h=Aa(s.shape,o);return h.length>0&&(d=wn(d,h)),Fe(d,s.shape)},b:()=>{const u=Nc(s,0),d=Ro(u,nu(s),Xr(s));let h=ke(n,ke(i,d));const p=Aa(a.shape,o);return p.length>0&&(h=wn(h,p)),Fe(h,a.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XBe={kernelName:_D,inputsToSave:["x","alpha"],gradFunc:(n,e)=>{const[t,r]=e,i=Nc(t,0);return{x:()=>Ro(i,n,ke(n,r)),alpha:()=>{let s=Ro(i,Xr(n),ke(n,t));const a=Aa(r.shape,n.shape);return a.length>0&&(s=wn(s,a)),Fe(s,r.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KBe(n,e,t){const r=n.shape.slice();r[t]=1;const i=Fe(e,r),s=sN(n,t,!0,!1),a=sN(n,t,!0,!0),o=ke(s,a);return ke(i,o)}function YBe(n,e,t){const r=n.shape.length,i=r-t.length,s=ws(t,r);let a=n;s!=null&&(a=qr(n,s));const o=a.shape.slice(),c=o.splice(r-t.length,t.length).reduce((h,p)=>h*p,1);o.push(c);const u=a.reshape(o);let d=KBe(u,e,i);if(d=d.reshape(a.shape),s!=null){const h=qg(s);d=qr(d,h)}return d}const JBe={kernelName:ED,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,{axis:i}=t;let s=[];return i==null?s=r.shape.map((a,o)=>o):typeof i=="number"?s=[i]:s=i,{x:()=>YBe(r,n,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZBe={kernelName:rE,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e,i=hr(t.shape,r.shape);return{a:()=>{const o=mn(n,nn(r,"float32")),l=Aa(t.shape,i);return l.length>0?Fe(wn(o,l),t.shape):o},b:()=>{let o=ke(n,nn(t,"float32"));const l=Aa(r.shape,i);l.length>0&&(o=Fe(wn(o,l),r.shape));const c=qi(r);return is(mn(o,nn(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QBe={kernelName:wE,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>mn(n,is(qi(t)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e$e={kernelName:_E,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e,r=ke(Mv(t,6),j1(t));return{x:()=>ke(n,nn(r,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t$e={kernelName:CE,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ke(n,nn(j1(t),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n$e={kernelName:AD,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>Fe(n,t.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r$e={kernelName:MD,inputsToSave:["images"],gradFunc:(n,e,t)=>{const[r]=e,i={dy:n,images:r};return{images:()=>Be.runKernel(wU,i,t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i$e={kernelName:TD,inputsToSave:["images"],gradFunc:(n,e,t)=>{const[r]=e,i={dy:n,images:r};return{images:()=>Be.runKernel(SU,i,t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s$e={kernelName:RD,gradFunc:(n,e,t)=>{const{dims:r}=t,i=Ir(r,n.shape);return{x:()=>Ku(n,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a$e={kernelName:EE,gradFunc:n=>({x:()=>Xr(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o$e={kernelName:AE,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>is(mn(n,ke(Up(t,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l$e={kernelName:ND,inputsToSave:["condition"],gradFunc:(n,e)=>{const[t]=e;return{condition:()=>nn(Xr(t),"float32"),t:()=>ke(n,nn(t,n.dtype)),e:()=>ke(n,nn(XD(t),n.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c$e={kernelName:TE,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>{const r=Nc(t,$n(0)),i=$n(d3),s=$n(f3),a=ke(n,s),o=ke(ke(n,i),nl(nn(t,"float32")));return Ro(r,a,o)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u$e={kernelName:IE,outputsToSave:[!0],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ke(n,ke(t,vn($n(1),t)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d$e={kernelName:NE,gradFunc:n=>({x:()=>Xr(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f$e={kernelName:ME,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ke(VD(nn(t,"float32")),n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h$e={kernelName:RE,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ke(KU(nn(t,"float32")),n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p$e={kernelName:ID,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,{begin:i,size:s}=t,a=r.shape,[o,l]=c3(r,i,s),c=[];for(let u=0;u<n.rank;u++)c.push([o[u],a[u]-o[u]-l[u]]);return{x:()=>Kg(n,c)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m$e={kernelName:BD,outputsToSave:[!0],gradFunc:(n,e,t)=>{const[r]=e,{dim:i}=t,s=!0,a=ke(n,r);return{logits:()=>vn(a,ke(wn(a,[i],s),r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g$e={kernelName:DE,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ke(n,Qd(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RW={kernelName:kD,gradFunc:(n,e,t)=>{const{blockShape:r,paddings:i}=t;return{x:()=>HD(n,r,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NW={kernelName:OD,gradFunc:(n,e,t)=>{const{axis:r}=t;return{x:()=>Os(n,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y$e={kernelName:kE,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>mn(n,ke(ao(nn(t,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v$e={kernelName:IU,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ke(n,ke(nn(t,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b$e={kernelName:OE,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e,i=$n(2);return{a:()=>ke(n,ke(i,vn(t,r))),b:()=>ke(n,ke(i,vn(r,t)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x$e={kernelName:PE,gradFunc:n=>({x:()=>Xr(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S$e={kernelName:BE,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e,i=hr(t.shape,r.shape);return{a:()=>{let o=n;const l=Aa(t.shape,i);return l.length>0&&(o=wn(o,l)),Fe(o,t.shape)},b:()=>{let o=n;const l=Aa(r.shape,i);return l.length>0&&(o=wn(o,l)),Fe(is(o),r.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w$e={kernelName:DD,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,i=r.shape.slice(),{axis:s}=t;Ir(s,r.shape).forEach(c=>{i[c]=1});const o=Fe(n,i),l=ke(o,vc(r.shape,"float32"));return{x:()=>l}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C$e={kernelName:$E,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>mn(n,qi(VD(t)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _$e={kernelName:LE,outputsToSave:[!0],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ke(vn($n(1),qi(t)),n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E$e={kernelName:FE,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,{reps:i}=t;return{x:()=>{let a=Xr(r);if(r.rank===1)for(let o=0;o<i[0];++o)a=Bt(a,Kn(n,[o*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let o=0;o<i[0];++o)for(let l=0;l<i[1];++l)a=Bt(a,Kn(n,[o*r.shape[0],l*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let o=0;o<i[0];++o)for(let l=0;l<i[1];++l)for(let c=0;c<i[2];++c)a=Bt(a,Kn(n,[o*r.shape[0],l*r.shape[1],c*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let o=0;o<i[0];++o)for(let l=0;l<i[1];++l)for(let c=0;c<i[2];++c)for(let u=0;u<i[3];++u)a=Bt(a,Kn(n,[o*r.shape[0],l*r.shape[1],c*r.shape[2],u*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A$e={kernelName:Lx,gradFunc:(n,e,t)=>{const r=t,{perm:i}=r,s=qg(i);return{x:()=>qr(n,s)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T$e={kernelName:LD,gradFunc:(n,e,t)=>{const r=t,{axis:i}=r;return{value:()=>Ec(n,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M$e={kernelName:FD,inputsToSave:["segmentIds"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>R$e(n,t)}}};function R$e(n,e){const t=tm(e,Xr(e)),r=qE(n,t);let i=Xg(e,$n(0,"int32"));const s=r.rank-i.rank;for(let o=0;o<s;++o)i=Qa(i,o+1);i=Eh(i,vc(r.shape,"bool"));const a=Xr(r);return Ro(i,r,a)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N$e={kernelName:PD,gradFunc:n=>({x:()=>Xr(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I$e=[rte,MOe,ROe,NOe,IOe,DOe,kOe,OOe,BOe,$Oe,LOe,FOe,zOe,GOe,WOe,jOe,qOe,XOe,KOe,YOe,JOe,ZOe,eBe,QOe,rBe,iBe,sBe,aBe,oBe,lBe,ZBe,cBe,uBe,dBe,fBe,hBe,mBe,pBe,gBe,yBe,vBe,bBe,xBe,SBe,wBe,CBe,_Be,EBe,ABe,RBe,TW,TW,NBe,kBe,$Be,LBe,FBe,PBe,UBe,zBe,HBe,VBe,GBe,WBe,jBe,MW,MW,qBe,XBe,JBe,QBe,e$e,t$e,n$e,r$e,i$e,s$e,a$e,o$e,l$e,c$e,u$e,d$e,f$e,h$e,p$e,m$e,g$e,RW,RW,NW,NW,y$e,b$e,v$e,x$e,S$e,w$e,C$e,_$e,E$e,A$e,T$e,M$e,N$e];for(const n of I$e)pTe(n);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.abs=function(){return this.throwIfDisposed(),va(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.acos=function(){return this.throwIfDisposed(),aQ(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.acosh=function(){return this.throwIfDisposed(),oQ(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.add=function(n){return this.throwIfDisposed(),Bt(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.all=function(n,e){return this.throwIfDisposed(),GU(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.any=function(n,e){return this.throwIfDisposed(),iN(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.argMax=function(n){return this.throwIfDisposed(),f1(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.argMin=function(n){return this.throwIfDisposed(),lQ(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.asScalar=function(){return this.throwIfDisposed(),de(this.size===1,()=>"The array must have only 1 element."),Fe(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.asType=function(n){return this.throwIfDisposed(),nn(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.as1D=function(){return this.throwIfDisposed(),Fe(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.as2D=function(n,e){return this.throwIfDisposed(),Fe(this,[n,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.as3D=function(n,e,t){return this.throwIfDisposed(),Fe(this,[n,e,t])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.as4D=function(n,e,t,r){return this.throwIfDisposed(),Fe(this,[n,e,t,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.as5D=function(n,e,t,r,i){return this.throwIfDisposed(),Fe(this,[n,e,t,r,i])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.asin=function(){return this.throwIfDisposed(),cQ(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.asinh=function(){return this.throwIfDisposed(),uQ(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.atan=function(){return this.throwIfDisposed(),dQ(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.atan2=function(n){return this.throwIfDisposed(),fQ(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.atanh=function(){return this.throwIfDisposed(),hQ(this)};Ct().prototype.avgPool=function(n,e,t,r){return this.throwIfDisposed(),zD(this,n,e,t,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.batchToSpaceND=function(n,e){return this.throwIfDisposed(),HD(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.batchNorm=function(n,e,t,r,i){return this.throwIfDisposed(),HE(this,n,e,t,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.broadcastTo=function(n){return this.throwIfDisposed(),Ux(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.cast=function(n){return this.throwIfDisposed(),nn(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.ceil=function(){return this.throwIfDisposed(),bQ(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.clipByValue=function(n,e){return this.throwIfDisposed(),zl(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.concat=function(n,e){return this.throwIfDisposed(),n instanceof ji&&(n=[n]),Os([this,...n],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.conv1d=function(n,e,t,r,i,s){return this.throwIfDisposed(),jU(this,n,e,t,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.conv2dTranspose=function(n,e,t,r,i){return this.throwIfDisposed(),XU(this,n,e,t,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.conv2d=function(n,e,t,r,i,s){return this.throwIfDisposed(),Rg(this,n,e,t,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.cos=function(){return this.throwIfDisposed(),VD(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.cosh=function(){return this.throwIfDisposed(),KU(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.cumprod=function(n,e,t){return this.throwIfDisposed(),sN(this,n,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.cumsum=function(n,e,t){return this.throwIfDisposed(),YU(this,n,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.depthToSpace=function(n,e){return this.throwIfDisposed(),TQ(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.depthwiseConv2d=function(n,e,t,r,i,s){return this.throwIfDisposed(),VE(this,n,e,t,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.dilation2d=function(n,e,t,r,i){return this.throwIfDisposed(),MQ(this,n,e,t,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.divNoNan=function(n){return this.throwIfDisposed(),RQ(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.div=function(n){return this.throwIfDisposed(),mn(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.dot=function(n){return this.throwIfDisposed(),NQ(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.elu=function(){return this.throwIfDisposed(),GE(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.equal=function(n){return this.throwIfDisposed(),sf(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.erf=function(){return this.throwIfDisposed(),JU(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.euclideanNorm=function(n,e){return this.throwIfDisposed(),kQ(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.exp=function(){return this.throwIfDisposed(),nl(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.expandDims=function(n){return this.throwIfDisposed(),Qa(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.expm1=function(){return this.throwIfDisposed(),OQ(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.fft=function(){return this.throwIfDisposed(),r3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.flatten=function(){return this.throwIfDisposed(),Fe(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.floor=function(){return this.throwIfDisposed(),jE(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.floorDiv=function(n){return this.throwIfDisposed(),VU(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.gather=function(n,e,t){return this.throwIfDisposed(),qE(this,n,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.greaterEqual=function(n){return this.throwIfDisposed(),Xg(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.greater=function(n){return this.throwIfDisposed(),Nc(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.ifft=function(){return this.throwIfDisposed(),QC(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.irfft=function(){return this.throwIfDisposed(),pz(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.isFinite=function(){return this.throwIfDisposed(),BQ(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.isInf=function(){return this.throwIfDisposed(),$Q(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.isNaN=function(){return this.throwIfDisposed(),LQ(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.leakyRelu=function(n){return this.throwIfDisposed(),WD(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.lessEqual=function(n){return this.throwIfDisposed(),Mv(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.less=function(n){return this.throwIfDisposed(),YC(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.localResponseNormalization=function(n,e,t,r){return this.throwIfDisposed(),FQ(this,n,e,t,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.logSigmoid=function(){return this.throwIfDisposed(),PQ(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.logSoftmax=function(n){return this.throwIfDisposed(),ez(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.logSumExp=function(n,e){return this.throwIfDisposed(),qD(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.log=function(){return this.throwIfDisposed(),nu(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.log1p=function(){return this.throwIfDisposed(),jD(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.logicalAnd=function(n){return this.throwIfDisposed(),Eh(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.logicalNot=function(){return this.throwIfDisposed(),XD(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.logicalOr=function(n){return this.throwIfDisposed(),tz(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.logicalXor=function(n){return this.throwIfDisposed(),UQ(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.matMul=function(n,e,t){return this.throwIfDisposed(),Br(this,n,e,t)};Ct().prototype.maxPool=function(n,e,t,r){return this.throwIfDisposed(),KD(this,n,e,t,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.max=function(n,e){return this.throwIfDisposed(),Wu(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.maximum=function(n){return this.throwIfDisposed(),tm(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.mean=function(n,e){return this.throwIfDisposed(),Is(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.min=function(n,e){return this.throwIfDisposed(),KC(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.minimum=function(n){return this.throwIfDisposed(),hv(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.mirrorPad=function(n,e){return this.throwIfDisposed(),HQ(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.mod=function(n){return this.throwIfDisposed(),VQ(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.mul=function(n){return this.throwIfDisposed(),ke(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.neg=function(){return this.throwIfDisposed(),is(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.norm=function(n,e,t){return this.throwIfDisposed(),WE(this,n,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.notEqual=function(n){return this.throwIfDisposed(),p1(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.oneHot=function(n,e=1,t=0){return this.throwIfDisposed(),rz(this,n,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.onesLike=function(){return this.throwIfDisposed(),ru(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.pad=function(n,e){return this.throwIfDisposed(),Kg(this,n,e)};Ct().prototype.pool=function(n,e,t,r,i,s){return this.throwIfDisposed(),GQ(this,n,e,t,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.pow=function(n){return this.throwIfDisposed(),Up(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.prelu=function(n){return this.throwIfDisposed(),ZD(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.prod=function(n,e){return this.throwIfDisposed(),WQ(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.reciprocal=function(){return this.throwIfDisposed(),jQ(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.relu=function(){return this.throwIfDisposed(),Ih(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.relu6=function(){return this.throwIfDisposed(),az(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.reshapeAs=function(n){return this.throwIfDisposed(),Fe(this,n.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.reshape=function(n){return this.throwIfDisposed(),Fe(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.resizeBilinear=function(n,e,t){return this.throwIfDisposed(),cee(this,n,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.resizeNearestNeighbor=function(n,e,t){return this.throwIfDisposed(),uee(this,n,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.reverse=function(n){return this.throwIfDisposed(),Ku(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.rfft=function(){return this.throwIfDisposed(),i3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.round=function(){return this.throwIfDisposed(),oz(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.rsqrt=function(){return this.throwIfDisposed(),lz(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.selu=function(){return this.throwIfDisposed(),cz(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.separableConv2d=function(n,e,t,r,i,s){return this.throwIfDisposed(),uz(this,n,e,t,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.sigmoid=function(){return this.throwIfDisposed(),Qd(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.sign=function(){return this.throwIfDisposed(),qQ(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.sin=function(){return this.throwIfDisposed(),dz(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.sinh=function(){return this.throwIfDisposed(),fz(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.slice=function(n,e){return this.throwIfDisposed(),Kn(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.softmax=function(n){return this.throwIfDisposed(),n3(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.softplus=function(){return this.throwIfDisposed(),W1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.spaceToBatchND=function(n,e){return this.throwIfDisposed(),JD(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.split=function(n,e){return this.throwIfDisposed(),bc(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.sqrt=function(){return this.throwIfDisposed(),ao(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.square=function(){return this.throwIfDisposed(),qi(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.squaredDifference=function(n){return this.throwIfDisposed(),mz(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.squeeze=function(n){return this.throwIfDisposed(),Gs(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.stack=function(n,e){this.throwIfDisposed();const t=n instanceof ji?[this,n]:[this,...n];return Ec(t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.step=function(n){return this.throwIfDisposed(),j1(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.stridedSlice=function(n,e,t,r,i,s,a,o){return this.throwIfDisposed(),XQ(this,n,e,t,r,i,s,a,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.sub=function(n){return this.throwIfDisposed(),vn(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.sum=function(n,e){return this.throwIfDisposed(),wn(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.tan=function(){return this.throwIfDisposed(),KQ(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.tanh=function(){return this.throwIfDisposed(),fv(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.tile=function(n){return this.throwIfDisposed(),zu(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.toBool=function(){return this.throwIfDisposed(),nn(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.toFloat=function(){return this.throwIfDisposed(),nn(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.toInt=function(){return this.throwIfDisposed(),nn(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.topk=function(n,e){return this.throwIfDisposed(),ZQ(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.transpose=function(n){return this.throwIfDisposed(),qr(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.unique=function(n){return this.throwIfDisposed(),QQ(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.unsortedSegmentSum=function(n,e){return this.throwIfDisposed(),vz(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.unstack=function(n){return this.throwIfDisposed(),Yu(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.where=function(n,e){return this.throwIfDisposed(),Ro(n,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ct().prototype.zerosLike=function(){return this.throwIfDisposed(),Xr(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class eh extends Error{constructor(e){super(e),Object.setPrototypeOf(this,eh.prototype)}}class Hu extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Hu.prototype)}}class Ve extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Ve.prototype)}}class Er extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Er.prototype)}}class e5 extends Error{constructor(e){super(e),Object.setPrototypeOf(this,e5.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class ste{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let t;return this.cache.has(e)&&(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t)),t}put(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,t)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let t=0;t<this.maxEntries-e;t++){const r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function mv(n,e){if(Array.isArray(n)){let t=[];for(let r=0;r<e;r++)t=t.concat(n);return t}else{const t=new Array(e);return t.fill(n),t}}function th(n,e){if(!n)throw new e5(e)}function IW(n,e){let t=0;for(const r of n)r===e&&t++;return t}function kl(n){return n.length===1?n[0]:n}function Ai(n){return Array.isArray(n)?n:[n]}function Sp(n){const t=n.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return t[0]!=="_"?t:"private"+t}function Cy(n){return n.length<=1||n.indexOf("_")===-1?n:n.replace(/[_]+(\w|$)/g,(e,t)=>t.toUpperCase())}let Tu={};function t5(n){if(n==null)return null;const e={};return e.className=n.getClassName(),e.config=n.getConfig(),e}function ZL(n){if(!(n==null||typeof n!="object"))if(Array.isArray(n))n.forEach(e=>ZL(e));else{const e=Object.keys(n);for(const t of e){const r=n[t];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?n[t]=r.value:ZL(r))}}}function JE(n,e={},t={},r="object",i=!1){if(typeof n=="string"){const s=n;let a;if(s in t)a=t[s];else if(s in Tu)a=Tu[s];else if(a=e[s],a==null)throw new Ve(`Unknown ${r}: ${n}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return a}else{const s=n;if(s.className==null||s.config==null)throw new Ve(`${r}: Improper config format: ${JSON.stringify(s)}.
'className' and 'config' must set.`);const a=s.className;let o,l;if(a in t?[o,l]=t[a]:a in Tu?[o,l]=Tu.className:a in e&&([o,l]=e[a]),o==null)throw new Ve(`Unknown ${r}: ${a}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){const c={};for(const p of Object.keys(Tu))c[p]=Tu[p];for(const p of Object.keys(t))c[p]=t[p];const u=s.config;u.customObjects=c;const d=Object.assign({},Tu);for(const p of Object.keys(t))Tu[p]=t[p];ZL(s.config);const h=l(o,s.config,t,i);return Tu=Object.assign({},d),h}else{const c=Object.assign({},Tu);for(const d of Object.keys(t))Tu[d]=t[d];const u=new o(s.config);return Tu=Object.assign({},c),u}}}function D$e(n,e){return n<e?-1:n>e?1:0}function HT(n,e){return-1*D$e(n,e)}function mg(n){if(n==null)return n;const e=[];for(const t of n)e.indexOf(t)===-1&&e.push(t);return e}function k$e(n){if(n==null)throw new Ve(`Invalid value in obj: ${JSON.stringify(n)}`);for(const e in n)if(n.hasOwnProperty(e))return!1;return!0}function Iv(n,e,t){if(t!=null&&n.indexOf(t)<0)throw new Ve(`${t} is not a valid ${e}.  Valid values are ${n} or null/undefined.`)}function n5(n,e,t=0,r=1/0){return th(t>=0),th(r>=t),Array.isArray(n)&&n.length>=t&&n.length<=r&&n.every(i=>typeof i===e)}function Pa(n,e){Array.isArray(n)?(de(n.length>0,()=>`${e} is unexpectedly an empty array.`),n.forEach((t,r)=>Pa(t,`element ${r+1} of ${e}`))):de(Number.isInteger(n)&&n>0,()=>`Expected ${e} to be a positive integer, but got ${ate(n)}.`)}function ate(n){return n===null?"null":Array.isArray(n)?"["+n.map(e=>ate(e)).join(",")+"]":typeof n=="string"?`"${n}"`:`${n}`}function O$e(n,e,t){let r=t!=null?t():Dl(),i;return(...a)=>{const o=t!=null?t():Dl();return o-r<e||(r=o,i=n(...a)),i}}function ote(n){return n==="relu"?"relu":n==="linear"?"linear":n==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let B$e=0;function lte(){return B$e++}const VT={};function h3(n=""){return n in VT||(VT[n]=0),VT[n]+=1,n+VT[n].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const $$e=["channelsFirst","channelsLast"],L$e=["nearest","bilinear"],F$e=["valid","same","causal"],P$e=["max","avg"],U$e=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const hx=new Map;function Js(n){Iv($$e,"DataFormat",n)}function z$e(n){Iv(L$e,"InterpolationFormat",n)}function su(n){Iv(F$e,"PaddingMode",n)}function cte(n){Iv(P$e,"PoolMode",n)}const EC=[],DW="/";function jy(n,e){EC.push(n);try{const t=e();return EC.pop(),t}catch(t){throw EC.pop(),t}}function H$e(){return EC.length===0?"":EC.join(DW)+DW}function ute(n){if(!fte(n))throw new Error("Not a valid tensor name: '"+n+"'");return H$e()+n}function dte(n){if(!fte(n))throw new Error("Not a valid tensor name: '"+n+"'");hx.has(n)||hx.set(n,0);const e=hx.get(n);if(hx.set(n,hx.get(n)+1),e>0){const t=`${n}_${e}`;return hx.set(t,1),t}else return n}const V$e=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function fte(n){return!!n.match(V$e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function G$e(n){return n===parseInt(n.toString(),10)}function gg(n,e,t){e==null&&(e=0),t==null&&(t=n.length);let r=1;for(let i=e;i<t;++i)r*=n[i];return r}function g1(n){if(n.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let t=0;t<n.length;t++){const r=n[t];r<e&&(e=r)}return e}function Ng(n){if(n.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let t=0;t<n.length;t++){const r=n[t];r>e&&(e=r)}return e}function af(n,e){if(e<n)throw new Ve(`end (${e}) < begin (${n}) is forbidden.`);const t=[];for(let r=n;r<e;++r)t.push(r);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let HB;function Sa(){return HB==null&&(HB=GZ().epsilon()),HB}function of(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ph(n,e){return nn(n,e)}function ZE(n,e=-1){const t=n.shape.slice();return e<0&&(e=t.length+e+1),t.splice(e,0,1),Fe(n,t)}function W$e(n,e){return Ye(()=>{if(n.shape.length!==2)throw new Ve(`repeat() expects a rank-2 tensor, but received a rank-${n.shape.length} tensor.`);const t=ZE(n,1);return QL(t,[1,e,1])})}function j$e(n){const e=[gg(n.shape)];return Fe(n,e)}function q$e(n){if(n.rank<=1)throw new Ve(`batchFlatten requires a minimum rank of 2. Got rank: ${n.rank}.`);const e=[n.shape[0],gg(n.shape,1)];return Fe(n,e)}function qy(n,e,t){return Ye(()=>{switch(n.rank){case 1:return e3(n,e,t);case 2:return hz(n,[e,0],[t,n.shape[1]]);case 3:return t3(n,[e,0,0],[t,n.shape[1],n.shape[2]]);case 4:return ZC(n,[e,0,0,0],[t,n.shape[1],n.shape[2],n.shape[3]]);case 5:return Kn(n,[e,0,0,0,0],[t,n.shape[1],n.shape[2],n.shape[3],n.shape[4]]);case 6:return Kn(n,[e,0,0,0,0,0],[t,n.shape[1],n.shape[2],n.shape[3],n.shape[4],n.shape[5]]);default:throw new Ve(`sliceAlongFirstAxis() received an unsupported tensor rank: ${n.rank}`)}})}function VB(n,e,t){return Ye(()=>{switch(n.rank){case 1:return e3(n,e,t);case 2:return hz(n,[0,e],[n.shape[0],t]);case 3:return t3(n,[0,0,e],[n.shape[0],n.shape[1],t]);case 4:return ZC(n,[0,0,0,e],[n.shape[0],n.shape[1],n.shape[2],t]);default:throw new Ve(`sliceAlongLastAxis() received an unsupported tensor rank: ${n.rank}`)}})}function GT(n,e,t,r){return Ye(()=>{switch(n.rank){case 1:return e3(n,e,t);case 2:switch(r){case 1:return qy(n,e,t);case 2:return VB(n,e,t);default:throw new Ve(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return qy(n,e,t);case 2:return t3(n,[0,e,0],[n.shape[0],t,n.shape[2]]);case 3:return VB(n,e,t);default:throw new Ve(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return qy(n,e,t);case 2:return ZC(n,[0,e,0,0],[n.shape[0],t,n.shape[2],n.shape[3]]);case 3:return ZC(n,[0,0,e,0],[n.shape[0],n.shape[1],t,n.shape[3]]);case 4:return VB(n,e,t);default:throw new Ve(`The axis is not within the rank of the tensor ${r}`)}default:throw new Ve(`sliceAlongLastAxis() received an unsupported tensor rank: ${n.rank}`)}})}function r5(n,e=-1){let t;return e<0&&(t=n[0].rank,t!==0?e=t:e=0),e===n[0].rank&&(e=-1),Os(n,e)}function kW(n,e){switch(n.rank){case 1:return xQ([n,e]);case 2:return SQ([n,e],0);case 3:return wQ([n,e],0);case 4:return CQ([n,e],0);default:throw new Ve(`concatAlongFirstAxis() received an unsupported tensor rank: ${n.rank}`)}}function QL(n,e){if(Array.isArray(e)||(e=[e]),n.rank!==e.length)throw new Ve(`The length of input n (${e.length}) does not match the number of dimensions in input x (${n.rank})`);return zu(n,e)}function p3(n,e=0,t=1,r,i){return sz(n,e,t,r,i)}function mh(n,e,t,r){if(n.rank<2||e.rank<2)throw new Er(`dot requires both inputs to be rank >= 2 but got x shape = ${n.shape} and y shape = ${e.shape}`);if(e.rank>=3){const i=n.shape.slice(-1)[0],s=e.shape.slice(-2)[0];if(i!==s)throw new Er(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${n.shape} and  y shape = ${e.shape}`)}if(n.rank===2&&e.rank===2)return XL({a:n,b:e,transposeA:!1,transposeB:!1,bias:r?eF(n.rank,r,of()):null,activation:t});{const i=n.shape.slice(),s=i.pop();n=Fe(n,[-1,s]);const a=e.shape.slice(),o=a.pop(),l=a.pop(),c=[...a,o],u=Array.from({length:e.rank},(g,v)=>v===0?e.rank-2:v<=e.rank-2?v-1:v);e=Fe(qr(e,u),[l,-1]);const d=[...i,...c];return Fe(XL({a:n,b:e,transposeA:!1,transposeB:!1,bias:r?eF(n.rank,r,of()):null,activation:t}),d)}}function hte(n,e,t){return Ye(()=>(Array.isArray(e)?e=ca(e,"int32"):e=nn(e,"int32"),qE(n,e,t)))}function QE(n){return ke(n,n)}function eF(n,e,t){const r=e.shape;if(e.rank!==1&&e.rank!==n)throw new Ve(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${n}`);if(n===5){if(t==="channelsFirst")return r.length===1?Fe(e,[1,r[0],1,1,1]):Fe(e,[1,r[3],r[0],r[1],r[2]]);if(t==="channelsLast")return r.length===1?Fe(e,[1,1,1,1,r[0]]):Fe(e,[1].concat(r))}else if(n===4){if(t==="channelsFirst")return r.length===1?Fe(e,[1,r[0],1,1]):Fe(e,[1,r[2],r[0],r[1]]);if(t==="channelsLast")return r.length===1?Fe(e,[1,1,1,r[0]]):Fe(e,[1].concat(r))}else if(n===3){if(t==="channelsFirst")return r.length===1?Fe(e,[1,r[0],1]):Fe(e,[1,r[1],r[0]]);if(t==="channelsLast")return r.length===1?Fe(e,[1,1,r[0]]):Fe(e,[1].concat(r))}else if(n<3)return e;throw new Ve(`Unsupported input rank by biasAdd: ${e.rank}`)}function mf(n,e,t){return Ye(()=>(t==null&&(t=of()),Js(t),Bt(n,eF(n.rank,e,t))))}function X$e(n,e=1){if(e!==1)throw new Er(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return GE(n)}function K$e(n){return Ye(()=>mn(n,Bt(va(n),1)))}function pte(n,e,t,r){return Ye(()=>nee(n,e,t,r))}function Y$e(n){return Ye(()=>{const e=Bt(.5,ke(.2,n));return zl(e,0,1)})}function e2(n,e,t=!1){return t?n():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const J$e=["fanIn","fanOut","fanAvg"],Z$e=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Q$e(n){Iv(J$e,"FanMode",n)}function eLe(n){Iv(Z$e,"Distribution",n)}class td extends X1{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class mte extends td{apply(e,t){return xa(e,t)}}mte.className="Zeros";Gt(mte);class i5 extends td{apply(e,t){return vc(e,t)}}i5.className="Ones";Gt(i5);class gte extends td{constructor(e){if(super(),typeof e!="object")throw new Ve(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new Ve(`config must have value set but got ${e}`);this.value=e.value}apply(e,t){return Ye(()=>ke($n(this.value),vc(e,t)))}getConfig(){return{value:this.value}}}gte.className="Constant";Gt(gte);class yte extends td{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,t){return Rv(e,this.minval,this.maxval,t,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}yte.className="RandomUniform";Gt(yte);class vte extends td{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if(t=t||"float32",t!=="float32"&&t!=="int32")throw new Er(`randomNormal does not support dType ${t}.`);return p3(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}vte.className="RandomNormal";Gt(vte);class bte extends td{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if(t=t||"float32",t!=="float32"&&t!=="int32")throw new Er(`truncatedNormal does not support dType ${t}.`);return yz(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}bte.className="TruncatedNormal";Gt(bte);class xte extends td{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,t){return Ye(()=>{if(e.length!==2||e[0]!==e[1])throw new Ve("Identity matrix initializer can only be used for 2D square matrices.");return ke(this.gain,QU(e[0]))})}getConfig(){return{gain:this.gain}}}xte.className="Identity";Gt(xte);function tLe(n,e="channelsLast"){let t,r;if(Js(e),n.length===2)t=n[0],r=n[1];else if([3,4,5].indexOf(n.length)!==-1){if(e==="channelsFirst"){const i=gg(n,2);t=n[1]*i,r=n[0]*i}else if(e==="channelsLast"){const i=gg(n,0,n.length-2);t=n[n.length-2]*i,r=n[n.length-1]*i}}else{const i=gg(n);t=Math.sqrt(i),r=Math.sqrt(i)}return[t,r]}class Ac extends td{constructor(e){if(super(),e.scale<0)throw new Ve(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,Q$e(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,eLe(this.distribution),this.seed=e.seed}apply(e,t){const r=tLe(e),i=r[0],s=r[1];let a=this.scale;if(this.mode==="fanIn"?a/=Math.max(1,i):this.mode==="fanOut"?a/=Math.max(1,s):a/=Math.max(1,(i+s)/2),this.distribution==="normal"){const o=Math.sqrt(a);if(t=t||"float32",t!=="float32"&&t!=="int32")throw new Er(`${this.getClassName()} does not support dType ${t}.`);return yz(e,0,o,t,this.seed)}else{const o=Math.sqrt(3*a);return Rv(e,-o,o,t,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}Ac.className="VarianceScaling";Gt(Ac);class s5 extends Ac{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Ac.className}}s5.className="GlorotUniform";Gt(s5);class a5 extends Ac{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Ac.className}}a5.className="GlorotNormal";Gt(a5);class o5 extends Ac{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Ac.className}}o5.className="HeNormal";Gt(o5);class l5 extends Ac{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Ac.className}}l5.className="HeUniform";Gt(l5);class c5 extends Ac{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Ac.className}}c5.className="LeCunNormal";Gt(c5);class u5 extends Ac{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Ac.className}}u5.className="LeCunUniform";Gt(u5);class Ste extends td{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,t){return Ye(()=>{if(e.length<2)throw new Er("Shape must be at least 2D.");if(t!=="int32"&&t!=="float32"&&t!==void 0)throw new TypeError(`Unsupported data type ${t}.`);t=t;const r=xt(e.slice(0,-1)),i=e[e.length-1],s=r*i;s>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${s}) elements: Slowness may result.`);const a=[Math.max(i,r),Math.min(i,r)],o=p3(a,0,1,t,this.seed),l=dee.qr(o,!1);let c=l[0];const d=l[1].flatten().stridedSlice([0],[Math.min(i,r)*Math.min(i,r)],[Math.min(i,r)+1]);return c=ke(c,d.sign()),r<i&&(c=c.transpose()),ke($n(this.gain),c.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}Ste.className="Orthogonal";Gt(Ste);const OW={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function BW(n,e={}){return JE(n,Fu.getMap().classNameMap,e,"initializer")}function Ss(n){return t5(n)}function ds(n){if(typeof n=="string"){const e=n in OW?OW[n]:n;if(e==="GlorotNormal")return new a5;if(e==="GlorotUniform")return new s5;if(e==="HeNormal")return new o5;if(e==="HeUniform")return new l5;if(e==="LeCunNormal")return new c5;if(e==="LeCunUniform")return new u5;{const t={};return t.className=e,t.config={},BW(t)}}else return n instanceof td?n:BW(n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function tF(n){return Array.isArray(n)&&Array.isArray(n[0])}function aN(n){return n.length===0?[]:Array.isArray(n[0])?n:[n]}function Yn(n){let e;if(Array.isArray(n)){if(n.length!==1)throw new Ve(`Expected Tensor length to be 1; got ${n.length}`);e=n[0]}else e=n;return e}function si(n){if(Array.isArray(n)&&Array.isArray(n[0])){if(n.length===1)return n=n,n[0];throw new Ve(`Expected exactly 1 Shape; got ${n.length}`)}else return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function oN(n){let e=0;for(const t of n)t.shape.length===0?e+=1:e+=t.shape.reduce((r,i)=>r*i);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const $W="Variable";class nLe{constructor(e,t="float32",r=$W,i=!0,s=null){this.dtype=t??"float32",this.shape=e.shape,this.id=lte(),r=r??$W,this.originalName=ute(r),this.name=dte(this.originalName),this.trainable_=i,this.constraint=s,this.val=eee(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),rLe(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function rLe(n,e){if(n.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(n.shape)+" vs. "+JSON.stringify(e.shape))}function nF(n){return n.map(e=>e.read())}function d5(n){n.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class wa{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class Ah{constructor(e,t,r,i,s,a,o){this.dtype=e,this.shape=t,this.sourceLayer=r,this.inputs=i,this.callArgs=s,this.outputTensorIndex=o,this.id=lte(),a!=null&&(this.originalName=ute(a),this.name=dte(this.originalName)),this.rank=t.length}}let iLe=0;class m3{constructor(e,t){this.callArgs=t,this.id=iLe++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const r of e.inboundLayers)r!=null&&r.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const t of this.inboundLayers)t!=null?e.push(t.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let sLe=0;class Dr extends X1{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=sLe++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let t=e.name;if(!t){const r=this.getClassName();t=Sp(r)+"_"+h3(r)}if(this.name=t,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let r;if(e.batchInputShape!=null)r=e.batchInputShape;else if(e.inputShape!=null){let s=null;e.batchSize!=null&&(s=e.batchSize),r=[s].concat(e.inputShape)}this.batchInputShape=r;let i=e.dtype;i==null&&(i=e.inputDType),i==null&&(i="float32"),this.dtype=i}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,t){return e.name+"_ib-"+t.toString()}getNodeAtIndex(e,t){if(this.inboundNodes.length===0)throw new Hu(`The layer has never been called and thus has no defined ${t}.`);if(this.inboundNodes.length<=e)throw new Ve(`Asked to get ${t} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return kl(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return kl(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new eh(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new eh(`Layer ${this.name} is not connected, no input to return.`);return kl(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new eh(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new eh(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return kl(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(t=>t.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const t=Ai(e);if(this.inputSpec==null||this.inputSpec.length===0)return;const r=Ai(this.inputSpec);if(t.length!==r.length)throw new Ve(`Layer ${this.name} expects ${r.length} inputs, but it received ${t.length} input tensors. Input received: ${e}`);for(let i=0;i<t.length;i++){const s=t[i],a=r[i];if(a==null)continue;const o=s.rank;if(a.ndim!=null&&o!==a.ndim)throw new Ve(`Input ${i} is incompatible with layer ${this.name}: expected ndim=${a.ndim}, found ndim=${o}`);if(a.maxNDim!=null&&o>a.maxNDim)throw new Ve(`Input ${i} is incompatible with layer ${this.name}: expected max_ndim=${a.maxNDim}, found ndim=${o}`);if(a.minNDim!=null&&o<a.minNDim)throw new Ve(`Input ${i} is incompatible with layer ${this.name}: expected min_ndim=${a.minNDim}, found ndim=${o}.`);if(a.dtype!=null&&s.dtype!==a.dtype)throw new Ve(`Input ${i} is incompatible with layer ${this.name} : expected dtype=${a.dtype}, found dtype=${s.dtype}.`);if(a.axes){const l=s.shape;for(const c in a.axes){const u=Number(c),d=a.axes[c],h=u>=0?l[u]:l[l.length+u];if(d!=null&&[d,null].indexOf(h)===-1)throw new Ve(`Input ${i} is incompatible with layer ${this.name}: expected axis ${u} of input shape to have value ${d} but got shape ${l}.`)}}if(a.shape!=null)for(let l=0;l<a.shape.length;++l){const c=a.shape[l],u=s.shape[l];if(c!=null&&u!=null&&c!==u)throw new Ve(`Input ${i} is incompatible with layer ${this.name}: expected shape=${a.shape}, found shape=${s.shape}.`)}}}call(e,t){return e}invokeCallHook(e,t){this._callHook!=null&&this._callHook(e,t)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,t){t=t||{},this.assertNotDisposed();const r=Ai(e),i=lLe(e),s=cLe(e);if(i===s)throw new Ve("Arguments to apply() must be all SymbolicTensors or all Tensors");return jy(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const a=[];for(const o of Ai(e))a.push(o.shape);this.build(kl(a)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&s&&(this._refCount=1)}if(this.assertInputCompatibility(e),s){let a=this.call(e,t);this.supportsMasking&&this.setMaskMetadata(e,a);const o=Ai(a),l=[];for(let c of o)r.indexOf(c)!==-1&&(c=c.clone()),l.push(c);if(a=kl(l),this.activityRegularizer!=null)throw new Er("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return a}else{const a=aLe(e),o=this.computeOutputShape(a);let l;const c=oLe(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?a[0]:a),o!=null&&o.length>0&&Array.isArray(o[0])?l=o.map((u,d)=>new Ah(c,u,this,Ai(e),t,this.name,d)):l=new Ah(c,o,this,Ai(e),t,this.name),this.addInboundNode(e,l,null,null,a,o,t),this._refCount++,this.activityRegularizer!=null)throw new Er("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let t=!1;this.batchInputShape.forEach((r,i)=>{r!=null&&e[i]!=null&&e[i]!==r&&(t=!0)}),t&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new eh(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const t of this.inboundNodes){const r=JSON.stringify(t.outputShapes);e.indexOf(r)===-1&&e.push(r)}if(e.length===1){const t=this.inboundNodes[0].outputShapes;return Array.isArray(t)&&Array.isArray(t[0])&&t.length===1?t[0]:t}else throw new eh(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new Hu(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return oN(this.weights)}build(e){this.built=!0}getWeights(e=!1){return nF(e?this.trainableWeights:this.weights)}setWeights(e){Ye(()=>{const t=this.weights;if(t.length!==e.length)throw new Ve(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${t.length} weights. Provided weights: ${e}...`);if(t.length===0)return;const r=[],i=nF(t);for(let s=0;s<i.length;++s){const a=i[s],o=t[s],l=e[s];if(!Vr(a.shape,l.shape))throw new Ve(`Layer weight shape ${a.shape} not compatible with provided weight shape ${l.shape}`);r.push([o,l])}d5(r)})}addWeight(e,t,r,i,s,a,o,l){if(this._addedWeightNames.indexOf(e)!==-1)throw new Ve(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(i=l!=null?l():ds("zeros"));const c=i.apply(t,r),u=new nLe(c,r,e,a,o);return c.dispose(),s!=null&&this.addLoss(()=>s.apply(u.read())),a==null&&(a=!0),a?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=Ai(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,t){if(!this.supportsMasking){if(t!=null)if(Array.isArray(t))t.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return t}setMaskMetadata(e,t,r){if(!this.supportsMasking)return;const i=this.computeMask(e,r),s=Ai(t),a=Ai(i);if(s.length!==a.length)throw new Error(`${this.name} outputs ${s.length} tensors but ${s.length} masks for those tensors`);for(let o=0;o<s.length;o++)s[o].kerasMask=a[o]}addInboundNode(e,t,r,i,s,a,o=null){const l=Ai(e);t=Ai(t),r=Ai(r),i=Ai(i),s=aN(s),a=aN(a);const c=[],u=[],d=[];for(const h of l)c.push(h.sourceLayer),u.push(h.nodeIndex),d.push(h.tensorIndex);new m3({outboundLayer:this,inboundLayers:c,nodeIndices:u,tensorIndices:d,inputTensors:l,outputTensors:t,inputMasks:r,outputMasks:i,inputShapes:s,outputShapes:a},o);for(let h=0;h<t.length;h++)t[h].sourceLayer=this,t[h].nodeIndex=this.inboundNodes.length-1,t[h].tensorIndex=h}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function aLe(n){n=Ai(n);const e=[];for(const t of n)e.push(t.shape);return kl(e)}function oLe(n){return"float32"}function wte(n,e,t){if((e==null||t!=null&&t>0)&&(e=n.sourceLayer,t=n.nodeIndex),e.inboundNodes.length===0)return[n];{const r=e.inboundNodes[t];if(r.inboundLayers.length===0)return r.inputTensors;{const i=[];for(let s=0;s<r.inboundLayers.length;s++){const a=r.inputTensors[s],o=r.inboundLayers[s],l=r.nodeIndices[s],c=wte(a,o,l);for(const u of c)i.indexOf(u)===-1&&i.push(u)}return i}}}function lLe(n){let e=!0;for(const t of Ai(n))if(!(t instanceof Ah)){e=!1;break}return e}function cLe(n){let e=!0;for(const t of Ai(n))if(t instanceof Ah){e=!1;break}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class t2 extends Dr{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:h3("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new Ve("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let t=e.batchInputShape;if(t==null){if(e.inputShape==null)throw new Ve("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");t=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new Ve("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=e.dtype||"float32";this.batchInputShape=t,this.dtype=r,this.inputSpec=[{shape:t}];const i=new Ah(this.dtype,this.batchInputShape,this,[],{},this.name);i.nodeIndex=0,i.tensorIndex=0,new m3({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[i],outputTensors:[i],inputMasks:[null],outputMasks:[null],inputShapes:[t],outputShapes:[t]})}apply(e,t){throw new Ve(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}t2.className="InputLayer";Gt(t2);function uLe(n){if(n.batchShape==null&&n.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(n.batchShape!=null&&n.shape!=null)throw new Ve("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=n.batchShape;n.shape!=null&&e==null&&(e=[null].concat(n.shape));let t=n.dtype;return t==null&&(t="float32"),new t2({batchInputShape:e,name:n.name,dtype:t,sparse:n.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function dLe(n,e){if(n.dtype==null||n.dtype===e.dtype)return e;try{return nn(e,n.dtype)}catch{throw new Ve(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${n.name}' (${n.dtype}).`)}}class cg{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof cg)for(const t in e.id2Value)this.id2Value[t]=e.id2Value[t],t in e.id2Mask&&(this.id2Mask[t]=e.id2Mask[t]);else{if(e==null)return;for(const t of e)this.add(t.key,t.value)}}add(e,t,r){if(this.id2Value[e.id]==null)this.id2Value[e.id]=dLe(e,t),this.name2Id[e.name]=e.id,r!=null&&(this.id2Mask[e.id]=r);else throw new Ve(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof Ah){if(this.id2Value[e.id]==null)throw new Ve(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const t=this.name2Id[e];if(t==null)throw new Ve(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[t]}}getMask(e){if(e instanceof Ah){if(this.id2Value[e.id]==null)throw new Ve(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const t=this.name2Id[e];if(t==null)throw new Ve(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[t]}}disposeMasks(){this.id2Mask!=null&&rr(this.id2Mask)}}const lN=new ste,cN=new ste;function fLe(n){lN!=null&&lN.setMaxEntries(n),cN!=null&&cN.setMaxEntries(n)}function eC(n,e,t,r){const i=t==null?!1:t.training,s=Array.isArray(n),a=s?n:[n],o=a.map(g=>g.name),l=[],c=e.names();for(const g of o)c.indexOf(g)!==-1?l.push(e.getValue(g)):l.push(null);const u=o.join(",")+"|"+e.names().sort().join(",");let d=lN.get(u),h;if(d==null){const g=hLe(a,e);d=g.sorted,h=g.recipientCounts,lN.put(u,d),cN.put(u,h)}h={},i||Object.assign(h,cN.get(u));const p=new cg(e);for(let g=0;g<d.length;++g){const v=d[g],b=v.sourceLayer;if(b instanceof t2)continue;const x=[],C=[],E=[];let _=!1;for(const N of v.inputs){const I=p.getValue(N),k=p.getMask(N);x.push(I),C.push(k),k!=null&&(_=!0),i||(h[N.name]--,h[N.name]===0&&!e.hasKey(N)&&o.indexOf(N.name)===-1&&!I.isDisposed&&N.sourceLayer.stateful!==!0&&E.push(I))}_&&(t=t||{},t.mask=C[0]);const M=Ai(b.apply(x,t));let R=null;b.supportsMasking&&(R=b.computeMask(x,C));const L=mLe(v),$=Array.isArray(L)?L:[L];for(let N=0;N<$.length;++N){p.hasKey($[N])||p.add($[N],M[N],Array.isArray(R)?R[0]:R);const I=o.indexOf($[N].name);I!==-1&&(l[I]=M[N])}i||rr(E)}return p.disposeMasks(),s?l:l[0]}function hLe(n,e){de(n!=null&&n.length>0,()=>"Expected at least one fetch, got none");let t=[],r={};if(n.length===1){const i=LW(n[0],e);t=i.sorted,r=i.recipientMap}else{const i=new Set;for(const s of n){const{sorted:a,recipientMap:o}=LW(s,e);for(const l of a)i.has(l.name)||(t.push(l),i.add(l.name));for(const l in o)r[l]==null&&(r[l]=new Set),o[l].forEach(c=>r[l].add(c))}}return{sorted:t,recipientCounts:pLe(r)}}function pLe(n){const e={};for(const t in n)e[t]=n[t].size;return e}function LW(n,e){const t=new Set,r=[],i={};for(const o of e.names())t.add(o);const s=[],a=[];for(s.push(n);s.length>0;){const o=s[s.length-1];if(t.has(o.name)){s.pop();continue}const l=a[a.length-1]===s.length-1;if(o.inputs.length===0||l)s.pop(),r.push(o),t.add(o.name),l&&a.pop();else{a.push(s.length-1);for(const c of o.inputs)i[c.name]==null&&(i[c.name]=new Set),i[c.name].add(o.name),!t.has(c.name)&&s.push(c)}}return{sorted:r,recipientMap:i}}function mLe(n){let e;if(n.sourceLayer.inboundNodes.length===1)e=n.sourceLayer.output;else{let t=null;for(let r=0;r<n.sourceLayer.inboundNodes.length;++r)for(const i of n.sourceLayer.inboundNodes[r].outputTensors)if(i.id===n.id){t=r;break}e=n.sourceLayer.getOutputAt(t)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gLe=it();gLe.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,fLe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function f5(n,e){return Ye(()=>ao(wn(ke(n,n),e,!0)))}class n2 extends X1{getConfig(){return{}}}class Cte extends n2{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Ye(()=>{const t=f5(e,this.axis),r=zl(t,0,this.maxValue);return ke(e,mn(r,Bt(Sa(),t)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}Cte.className="MaxNorm";Gt(Cte);class _te extends n2{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Ye(()=>mn(e,Bt(Sa(),f5(e,this.axis))))}getConfig(){return{axis:this.axis}}}_te.className="UnitNorm";Gt(_te);class Ete extends n2{apply(e){return Ih(e)}}Ete.className="NonNeg";Gt(Ete);class Ate extends n2{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Ye(()=>{const t=f5(e,this.axis),r=Bt(ke(this.rate,zl(t,this.minValue,this.maxValue)),ke(1-this.rate,t));return ke(e,mn(r,Bt(Sa(),t)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}Ate.className="MinMaxNorm";Gt(Ate);const FW={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function _a(n){return t5(n)}function PW(n,e={}){return JE(n,Fu.getMap().classNameMap,e,"constraint")}function Ea(n){if(n==null)return null;if(typeof n=="string"){const t={className:n in FW?FW[n]:n,config:{}};return PW(t)}else return n instanceof n2?n:PW(n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function cy(n){if(n==null)return;const e=[],t=[],r=[];for(const i in n){const s=n[i];if(typeof s!="number"){const a=s;e.push(a.data()),t.push(i),r.push(a)}}if(e.length>0){const i=await Promise.all(e);for(let s=0;s<i.length;++s)n[t[s]]=i[s][0];rr(r)}}function Tte(n){if(n!=null)for(const e in n){const t=n[e];typeof t!="number"&&t.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var UW;(function(n){n[n.SILENT=0]="SILENT",n[n.VERBOSE=1]="VERBOSE"})(UW||(UW={}));const yLe=125;class e_{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,t){}async onEpochEnd(e,t){}async onBatchBegin(e,t){}async onBatchEnd(e,t){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class vLe{constructor(e,t=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=t}append(e){this.callbacks.push(e)}setParams(e){for(const t of this.callbacks)t.setParams(e)}setModel(e){for(const t of this.callbacks)t.setModel(e)}async onEpochBegin(e,t){t==null&&(t={});for(const r of this.callbacks)await r.onEpochBegin(e,t)}async onEpochEnd(e,t){t==null&&(t={});for(const r of this.callbacks)await r.onEpochEnd(e,t)}async onBatchBegin(e,t){t==null&&(t={});for(const r of this.callbacks)await r.onBatchBegin(e,t)}async onBatchEnd(e,t){t==null&&(t={});for(const r of this.callbacks)await r.onBatchEnd(e,t)}async onTrainBegin(e){e==null&&(e={});for(const t of this.callbacks)await t.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const t of this.callbacks)await t.onTrainEnd(e)}}class bLe extends e_{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,t){t==null&&(t={});const r=t.size==null?0:t.size;this.seen+=r;for(const i in t){const s=t[i];if(typeof s=="number")this.totals.hasOwnProperty(i)||(this.totals[i]=0),this.totals[i]=this.totals[i]+s*r;else{let a;i in this.totals?a=this.totals[i]:this.totals[i]=0;const o=Ye(()=>Bt(this.totals[i],ke(s,r)));this.totals[i]=o,a!=null&&a.dispose()}}}async onEpochEnd(e,t){if(t!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?t[r]=this.totals[r]/this.seen:Ye(()=>{const i=ke(mn(1,this.seen),this.totals[r]);t[r]=i,this.totals[r].dispose(),Fa(t[r])}))}}class xLe extends e_{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,t){t==null&&(t={}),this.epoch.push(e);for(const r in t)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(t[r])}async syncData(){const e=[],t=[],r=[];for(const s in this.history){const a=this.history[s];for(let o=0;o<a.length;++o)if(typeof a[o]!="number"){const l=a[o];e.push(l.data()),t.push(s),r.push(o)}}const i=await Promise.all(e);for(let s=0;s<i.length;++s)this.history[t[s]][r[s]].dispose(),this.history[t[s]][r[s]]=i[s][0]}}class SLe extends e_{constructor(e,t){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||Dee,this.yieldEvery=t||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=yLe),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");ML(this.yieldEvery)&&(this.maybeWait=O$e(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,t,r){const i=[];this.yield!=null&&(await cy(r),i.push(this.yield(e,t,r))),i.push(this.nextFrameFunc()),await Promise.all(i)}async onEpochBegin(e,t){this.currentEpoch=e,this.epochBegin!=null&&(await cy(t),await this.epochBegin(e,t))}async onEpochEnd(e,t){const r=[];this.epochEnd!=null&&(await cy(t),r.push(this.epochEnd(e,t))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(e,t){this.batchBegin!=null&&(await cy(t),await this.batchBegin(e,t))}async onBatchEnd(e,t){const r=[];this.batchEnd!=null&&(await cy(t),r.push(this.batchEnd(e,t))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):ML(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,e,t)),await Promise.all(r)}async onTrainBegin(e){this.trainBegin!=null&&(await cy(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await cy(e),await this.trainEnd(e))}}function Mte(n,e){return n==null&&(n={}),n instanceof e_?[n]:Array.isArray(n)&&n[0]instanceof e_?n:Ai(n).map(r=>new SLe(r,e))}class Nu{constructor(){}static registerCallbackConstructor(e,t){de(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),Nu.checkForDuplicate(t),Nu.constructors[e]==null&&(Nu.constructors[e]=[]),Nu.constructors[e].push(t)}static checkForDuplicate(e){for(const t in Nu.constructors)Nu.constructors[+t].forEach(i=>{if(i===e)throw new Ve("Duplicate callback constructor.")})}static clear(){Nu.constructors={}}static createCallbacks(e){const t=[];for(const r in Nu.constructors){const i=+r;e>=i&&t.push(...Nu.constructors[i])}return t.map(r=>new r)}}Nu.constructors={};function Rte(n,e,t,r,i,s,a,o,l){const c=new xLe,u=[new bLe,...Nu.createCallbacks(e)];n!=null&&u.push(...n),u.push(c);const d=new vLe(u);return d.setParams({epochs:t,initialEpoch:r,samples:i,steps:s,batchSize:a,verbose:e,doValidation:o,metrics:l}),{callbackList:d,history:c}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function $p(n,e={},t=!1){return JE(n,Fu.getMap().classNameMap,e,"layer",t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function uN(n,e){return Ye(()=>{n.dtype!=="float32"&&(n=nn(n,"float32"));const t=wn(QE(n),e,!0),r=G1(t.shape,Sa()),i=ao(tm(t,r));return mn(n,i)})}function g3(n,e){return Ye(()=>Is(QE(vn(e,n)),-1))}function h5(n,e){return Ye(()=>Is(va(vn(e,n)),-1))}function p5(n,e){return Ye(()=>{const t=vn(n,e),r=zl(va(n),Sa(),Number.MAX_VALUE),i=va(mn(t,r));return ke(100,Is(i,-1))})}function wLe(n,e){return Ye(()=>{const t=zl(e,Sa(),Number.MAX_VALUE),r=nu(Bt(1,t)),i=zl(n,Sa(),Number.MAX_VALUE),s=nu(Bt(1,i));return Is(QE(vn(r,s)),-1)})}function CLe(n,e){return Ye(()=>{const t=tm(0,vn(1,ke(n,e)));return Is(QE(t),-1)})}function _Le(n,e){return Ye(()=>{const t=tm(0,vn(1,ke(n,e)));return Is(t,-1)})}function ELe(n,e){return Ye(()=>{const t=wn(ke(n,e),-1),r=Wu(ke(vn(1,n),e),-1);return tm(0,Bt(1,vn(r,t)))})}function ALe(n,e){return Ye(()=>{const t=Math.log(2),r=vn(e,n),i=vn(Bt(r,W1(ke(-2,r))),t);return Is(i,-1)})}function t_(n,e,t=!1){return Ye(()=>{if(t)e=n3(e);else{const r=wn(e,e.shape.length-1,!0);e=mn(e,r)}return e=zl(e,Sa(),1-Sa()),is(wn(ke(nn(n,"float32"),nu(e)),e.shape.length-1))})}function dN(n,e,t=!1){return Ye(()=>{const r=nn(jE(j$e(n)),"int32");e=zl(e,Sa(),1-Sa());const i=e.shape,s=Fe(rz(r,i[i.length-1]),i);return t_(s,e,t)})}function TLe(n,e){if(!Vr(n.shape,e.shape))throw new Ve(`logits and labels must have the same shape, but got shapes ${JSON.stringify(n.shape)} and ${JSON.stringify(e.shape)}`);return Ye(()=>{const t=Ih(e),r=is(va(e));return Bt(vn(t,ke(e,n)),jD(nl(r)))})}function y3(n,e){return Ye(()=>{let t;return t=zl(e,Sa(),1-Sa()),t=nu(mn(t,vn(1,t))),Is(TLe(n,t),-1)})}function MLe(n,e){return Ye(()=>{const t=zl(n,Sa(),1),r=zl(e,Sa(),1);return wn(ke(n,nu(mn(t,r))),-1)})}function RLe(n,e){return Ye(()=>{const t=nu(Bt(Sa(),e));return Is(vn(e,ke(n,t)),-1)})}function Nte(n,e){return Ye(()=>{const t=uN(n,-1),r=uN(e,-1),i=ke(t,r);return is(wn(i,-1))})}const fN={meanSquaredError:g3,meanAbsoluteError:h5,meanAbsolutePercentageError:p5,meanSquaredLogarithmicError:wLe,squaredHinge:CLe,hinge:_Le,categoricalHinge:ELe,logcosh:ALe,categoricalCrossentropy:t_,sparseCategoricalCrossentropy:dN,binaryCrossentropy:y3,kullbackLeiblerDivergence:MLe,poisson:RLe,cosineProximity:Nte};function GB(n){if(typeof n=="string"){if(n in fN)return fN[n];let e=`Unknown loss ${n}`;throw n.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${n}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new Ve(e)}else return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Ite(n,e){return Ye(()=>{const t=ke(.5,ru(e)),r=ph(Nc(e,t),n.dtype);return Is(sf(n,r),-1)})}function Dte(n,e){return Ye(()=>ph(sf(f1(n,-1),f1(e,-1)),"float32"))}function NLe(n,e){return Ye(()=>nn(wn(Eh(sf(n,1),sf(e,1))),"float32"))}function ILe(n,e){return Ye(()=>nn(wn(Eh(sf(n,0),sf(e,1))),"float32"))}function DLe(n,e){return Ye(()=>{const t=NLe(n,e),r=ILe(n,e),i=Bt(t,r);return nn(Ro(Nc(i,0),mn(t,i),0),"float32")})}function kLe(n,e){return y3(n,e)}function OLe(n,e){return n.rank===e.rank&&(n=Gs(n,[n.rank-1])),e=f1(e,-1),e.dtype!==n.dtype&&(e=nn(e,n.dtype)),nn(sf(n,e),"float32")}const BLe=g3,$Le=g3,LLe=h5,FLe=h5,PLe=p5,ULe=p5,kte=t_,zLe=Nte,Ote=dN,hN={binaryAccuracy:Ite,categoricalAccuracy:Dte,precision:DLe,categoricalCrossentropy:kte,sparseCategoricalCrossentropy:Ote,mse:BLe,MSE:$Le,mae:LLe,MAE:FLe,mape:PLe,MAPE:ULe,cosine:zLe};function HLe(n){if(typeof n=="string"&&n in hN)return hN[n];if(typeof n!="string"&&n!=null)return n;throw new Ve(`Unknown metric ${n}`)}function WT(n){if(th(n!==null,`Unknown LossOrMetricFn ${n}`),typeof n=="string")return n;{let e;for(const t of Object.keys(fN))if(fN[t]===n){e=t;break}if(e!==void 0)return e;for(const t of Object.keys(hN))if(hN[t]===n){e=t;break}return e!==void 0?e:n.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function VLe(n){const e={Adagrad:()=>fx.adagrad(.01),Adadelta:()=>fx.adadelta(1,.95,Sa()),Adam:()=>fx.adam(.001,.9,.999,Sa()),Adamax:()=>fx.adamax(.002,.9,.999,Sa(),0),RMSProp:()=>fx.rmsprop(.001,.9,0,Sa()),SGD:()=>fx.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,n in e)return e[n]();throw new Ve(`Unknown Optimizer ${n}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const zW=1*1024*1024;function HW(n,e,t=!1){if(n==null||typeof n!="object"||Object.getPrototypeOf(n)!==Object.prototype||!rF(n))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(t){const r=JSON.stringify(n);r.length>zW&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${zW}.`)}}function rF(n){if(n===null)return!0;if(typeof n=="object")if(Object.getPrototypeOf(n)===Object.prototype){const e=Object.keys(n);for(const t of e)if(typeof t!="string"||!rF(n[t]))return!1;return!0}else if(Array.isArray(n)){for(const e of n)if(!rF(e))return!1;return!0}else return!1;else{const e=typeof n;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function GLe(n,e,t,r=console.log){const i=jLe(n),s=["Layer (type)","Input Shape","Output shape","Param #"];i?(e=e||90,t=t||[.32,.61,.89,1]):(e=e||115,t=t||[.24,.48,.7,.8,1]),t[t.length-1]<=1&&(t=t.map(u=>Math.floor(e*u)));let a;if(!i){s.push("Receives inputs"),a=[];for(const u in n.nodesByDepth)a.push(...n.nodesByDepth[u])}r("_".repeat(e)),pN(s,t,r),r("=".repeat(e));const o=n.layers;for(let u=0;u<o.length;++u)i?qLe(o[u],t,r):XLe(o[u],t,a,r),r((u===o.length-1?"=":"_").repeat(e));n.checkTrainableWeightsConsistency();const l=WLe(n),c=oN(n.nonTrainableWeights);r(`Total params: ${l+c}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${c}`),r("_".repeat(e))}function WLe(n){let e;return n.collectedTrainableWeights!=null?e=oN(n.collectedTrainableWeights):e=oN(n.trainableWeights),e}function jLe(n){let e=!0;const t=[],r=[];for(const i in n.nodesByDepth)t.push(n.nodesByDepth[i]);for(const i of t){if(i.length>1||i.length===1&&i[0].inboundLayers.length>1){e=!1;break}r.push(...i)}if(e)for(const i of n.layers){let s=!1;for(const a of i.inboundNodes)if(r.indexOf(a)!==-1)if(s){e=!1;break}else s=!0;if(!e)break}return e}function pN(n,e,t=console.log){let r="";for(let i=0;i<n.length;++i)i>0&&(r=r.slice(0,r.length-1)+" "),r+=n[i],r=r.slice(0,e[i]),r+=" ".repeat(e[i]-r.length);t(r)}function qLe(n,e,t){let r,i;try{i=n.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{i="multiple"}try{r=JSON.stringify(n.outputShape)}catch{r="multiple"}const s=n.name,a=n.getClassName(),o=[`${s} (${a})`,i,r,n.countParams().toString()];pN(o,e,t)}function XLe(n,e,t,r){let i,s;try{s=n.inboundNodes.map(d=>JSON.stringify(d.inputShapes)).join(",")}catch{s="multiple"}try{i=JSON.stringify(n.outputShape)}catch{i="multiple"}const a=[];for(const d of n.inboundNodes)if(!(t!=null&&t.length>0&&t.indexOf(d)===-1))for(let h=0;h<d.inboundLayers.length;++h){const p=d.inboundLayers[h].name,g=d.nodeIndices[h],v=d.tensorIndices[h];a.push(`${p}[${g}][${v}]`)}const o=n.name,l=n.getClassName(),c=a.length===0?"":a[0],u=[`${o} (${l})`,s,i,n.countParams().toString(),c];pN(u,e,r);for(let d=1;d<a.length;++d)pN(["","","","",a[d]],e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Bte(n,e,t){return(n==="inboundNodes"||n==="outputLayers"||n==="inputLayers")&&e===0&&typeof t=="string"}function iF(n,e){if(n===null)return null;if(typeof n=="string")return Cy(n);if(typeof n=="number"||typeof n=="boolean")return n;if(n instanceof Array){const t=[],r=n.length;for(let i=0;i<r;++i){const s=n[i];Bte(e,i,s)?t.push(s):t.push(iF(s,e))}return t}else{const t={};for(const r of Object.keys(n)){const i=n[r];if(r==="name"&&typeof i=="string")t[r]=i;else{const s=Cy(r);t[s]=iF(i,s)}}return t}}function sF(n,e){if(n==null)return null;if(typeof n=="string")return Sp(n);if(typeof n=="number"||typeof n=="boolean")return n;if(n instanceof Array){const t=[],r=n.length;for(let i=0;i<r;++i){const s=n[i];Bte(e,i,s)?t.push(s):t.push(sF(s,e))}return t}else{const t={};for(const r of Object.keys(n)){const i=n[r],s=Sp(r);(r==="name"||r==="className")&&typeof i=="string"?t[s]=i:t[s]=sF(i,r)}return t}}/** @license See the LICENSE file. */const $te="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const KLe=n=>{const e=Object.keys(n);if(e.length===0)return!1;const t=e[0].split("/");return!isNaN(parseInt(t[t.length-1],10))};class zd extends Dr{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const C=this.getClassName().toLowerCase();this.name=h3(C)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],mg(this.inputs).length!==this.inputs.length)throw new Ve(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(C=>C.name)}`);mg(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(C=>C.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const C of this.outputs){const E=C.sourceLayer,_=C.nodeIndex,M=C.tensorIndex;this.outputLayers.push(E),this.outputLayersNodeIndices.push(_),this.outputLayersTensorIndices.push(M)}for(const C of this.inputs){const E=C.sourceLayer,_=C.nodeIndex,M=C.tensorIndex;th(_===0,"input layer has >1 nodes"),th(M===0,"input layer has >1 tensors"),this.inputLayers.push(E),this.inputLayersNodeIndices.push(_),this.inputLayersTensorIndices.push(M)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let C=0;C<this.inputLayers.length;C++){const E=this.inputLayers[C];if(!(E instanceof t2))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${C} (0-based) originates from layer type ${E.getClassName()}.`);this.inputNames.push(E.name),this.feedInputShapes.push(E.batchInputShape),this.feedInputNames.push(E.name)}for(const C of this.outputLayers)this.outputNames.push(C.name);this.internalInputShapes=this.inputs.map(C=>C.shape),this.internalOutputShapes=this.outputs.map(C=>C.shape);const t={},r={},i={},s={},a={},o=[],l=(C,E,_,M,R,L)=>{(M==null||R==null||L==null)&&(M=C.sourceLayer,R=C.nodeIndex,L=C.tensorIndex);const $=M.inboundNodes[R];if(_.indexOf($)!==-1)throw new Hu(`The tensor ${C.name} at layer "${M.name}" is part of a cycle.`);if(E.indexOf($)!==-1)return;this.containerNodes.add(zd.nodeKey(M,R)),M.id in a||(a[M.id]=Object.keys(a).length),_.indexOf($)===-1&&_.push($);const N=$.inboundLayers.length;for(let I=0;I<N;I++){const k=$.inputTensors[I],P=$.inboundLayers[I],G=$.nodeIndices[I],W=$.tensorIndices[I];l(k,E,_,P,G,W)}for(E.push($);_.indexOf($)>=0;)_.splice(_.indexOf($),1);o.push($)},c=[],u=[];for(const C of this.outputs)l(C,c,u);const d=o.slice().reverse();for(const C of d){r[C.id]=C,C.id in t||(t[C.id]=0);let E=t[C.id];const _=i[C.outboundLayer.id]==null?0:i[C.outboundLayer.id];E=Math.max(E,_),i[C.outboundLayer.id]=E,s[C.outboundLayer.id]=C.outboundLayer,t[C.id]=E;for(let M=0;M<C.inboundLayers.length;M++){const R=C.inboundLayers[M],L=C.nodeIndices[M],$=R.inboundNodes[L],N=t[$.id]==null?0:t[$.id];t[$.id]=Math.max(E+1,N),r[$.id]=$}}const h={};for(const C in t){const E=t[C];E in h||(h[E]=[]),h[E].push(r[C])}const p={};for(const C in i){const E=i[C];E in p||(p[E]=[]),p[E].push(s[C])}let g=Object.keys(p).map(C=>parseInt(C,10)).sort(HT);this.layers=[];for(const C of g){const E=p[C];E.sort((_,M)=>{const R=a[_.id],L=a[M.id];return R<L?-1:R>L?1:0});for(const _ of E)_ instanceof zd&&this.internalContainerRefs.push(_),this.layers.push(_)}this.layersByDepth=p,g=Object.keys(h).map(C=>parseInt(C,10)).sort(HT);const v=this.inputs.slice(),b=[];for(const C of g)for(const E of h[C]){const _=E.outboundLayer;if(_!=null){for(const M of E.inputTensors)if(v.indexOf(M)===-1)throw new Hu(`Graph disconnected: cannot obtain value for tensor ${M} at layer "${_.name}". The following previous layers were accessed without issue: ${b}`);for(const M of E.outputTensors)v.push(M);b.push(_.name)}}this.nodesByDepth=h;const x=this.layers.map(C=>C.name);for(const C of x){const E=x.filter(_=>_===C).length;if(E!==1)throw new Hu(`The name "${C}" is used ${E} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(x))}this.outboundNodes=[],this.inboundNodes=[],new m3({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(C=>null),outputMasks:this.outputs.map(C=>null),inputShapes:this.inputs.map(C=>C.shape),outputShapes:this.outputs.map(C=>C.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const t of this.layers)e.numDisposedVariables+=t.dispose().numDisposedVariables;for(const t of this.internalContainerRefs)e.numDisposedVariables+=t.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(t=>{t._trainableWeights.forEach(r=>r.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new Ve("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const t of this.layers)e=e.concat(t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.layers)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const r of this.layers)t.push(...r.trainableWeights);return t.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,t=!0){const r={};let i=0;const s=KLe(e);s&&this.parseWeights(e);for(const o of this.layers)for(const[l,c]of o.weights.entries()){const u=s?`${c.name.split("/").slice(0,-1).join("/")+"/"}${l}`:c.originalName;if(r[u]!=null)throw new Ve(`Duplicate weight name: ${u}`);r[u]=c,i++}const a=[];for(const o in e){let l=o;if(r[o]==null){const c=o.split("/");l=c.slice(0,-2).concat([c[c.length-1]]).join("/")}if(r[l]!=null)a.push([r[l],e[o]]);else if(t)throw new Ve(`Provided weight data has no target variable: ${o}`);delete r[l]}if(t){const o=[];for(const l in r)o.push(l);if(o.length>0)throw new Ve(`${o.length} of ${i} weights are not set: ${o}`)}d5(a)}parseWeights(e){for(const t in Object.keys(e)){const r=t.split("/"),i=["vars","layer_checkpoint_dependencies"],s=r.map(a=>a.startsWith("_")?a.slice(1):a).filter(a=>!i.includes(a)).join("/");s!==t&&(e[s]=e[t],delete e[t])}}updatedConfig(){const e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion=`tfjs-layers ${$te}`,t.backend="TensorFlow.js",t}toJSON(e,t=!0){const r=sF(this.updatedConfig());return t?JSON.stringify(r):r}call(e,t){return Ye(()=>{e=Ai(e);const r=new cg;for(let i=0;i<this.inputs.length;++i)r.add(this.inputs[i],e[i]);return eC(this.outputs,r,t)})}computeMask(e,t){return Ye(()=>{e=Ai(e);let r;return t==null?r=mv(null,e.length):r=Ai(t),this.runInternalGraph(e,r)[1]})}computeOutputShape(e){const t=aN(e);if(t.length!==this.inputLayers.length)throw new Ve(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let o=0;o<t.length;o++){const l=this.inputLayers[o],c=t[o],u=l.name+"_0_0";r[u]=c}const i=Object.keys(this.nodesByDepth).map(o=>parseInt(o,10)).sort(HT);if(i.length>1)for(const o of i){const l=this.nodesByDepth[o];for(const c of l){const u=c.outboundLayer;if(this.inputLayers.map(v=>v.id).indexOf(u.id)!==-1)continue;const d=[];for(let v=0;v<c.inboundLayers.length;v++){const b=c.inboundLayers[v],x=c.nodeIndices[v],C=c.tensorIndices[v],E=`${b.name}_${x}_${C}`,_=r[E];d.push(_)}const h=u.computeOutputShape(kl(d)),p=aN(h),g=u.inboundNodes.indexOf(c);for(let v=0;v<p.length;v++){const b=`${u.name}_${g}_${v}`;r[b]=p[v]}}}const s=[],a=[];for(let o=0;o<this.outputLayers.length;o++){const l=this.outputLayers[o],c=this.outputLayersNodeIndices[o],u=this.outputLayersTensorIndices[o],d=`${l.name}_${c}_${u}`;a.push(d)}for(let o=0;o<a.length;o++){const l=a[o];th(l in r),s.push(r[l])}return kl(s)}runInternalGraph(e,t){t==null&&(t=mv(null,e.length));const r={};for(let l=0;l<this.inputs.length;++l){const c=this.inputs[l],u=e[l],d=t[l];r[c.id]=[u,d]}const i=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(HT);for(const l of i){const c=this.nodesByDepth[l];for(const u of c){const d=u.outboundLayer,h=u.inputTensors,p=u.outputTensors,g=new Array;for(const v of h)v.id in r&&g.push(r[v.id]);if(g.length===h.length){let v={},b,x,C,E;if(u.callArgs!=null&&(v=u.callArgs),g.length===1){const[_,M]=g[0];v.mask==null&&(v.mask=M),C=Ai(d.call(_,v)),E=Ai(d.computeMask(_,M)),b=[_],x=[M]}else b=g.map(_=>_[0]),x=g.map(_=>_[1]),v.mask==null&&(v.mask=x),C=Ai(d.call(b,v)),E=Ai(d.computeMask(b,x));if(d.activityRegularizer)throw new Er("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let _=0;_<p.length;++_){const M=p[_],R=C[_],L=E[_];r[M.id]=[R,L]}}}}const s=[],a=[],o=[];for(const l of this.outputs){th(l.id in r,`Could not compute output ${l.name} : ${l.id}`);const[c,u]=r[l.id];o.push(c.shape),s.push(c),a.push(u)}return[s,a,o]}buildNodeConversionMap(e){const t={};let r;for(const i of this.layers){r=i instanceof zd?1:0;for(let s=0;s<i.inboundNodes.length;s++){const a=zd.nodeKey(i,s);this.containerNodes.has(a)&&(t[a]=r,r+=1)}}return t}getLayer(e,t){if(t!=null)return this.findLayer(t);if(e==null)throw new Ve("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const r of this.layers)if(r.name===e)return r;throw new Ve(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new Ve(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return Ye(()=>{const e=[];for(const t of this.layers)for(let r=0;r<t.inboundNodes.length;++r){const i=zd.nodeKey(t,r);this.containerNodes.has(i)&&e.push(...t.calculateLosses())}return e})}getConfig(){const e={name:this.name},t=this.buildNodeConversionMap(this.layers),r=[];for(const a of this.layers){const o=a.getClassName(),l=a.getConfig(),c=[];for(let d=0;d<a.inboundNodes.length;d++){const h=a.inboundNodes[d],p=zd.nodeKey(a,d);let g={};if(this.containerNodes.has(p)){if(h.callArgs)try{JSON.stringify(h.callArgs),g=h.callArgs}catch{console.warn(`Layer ${a.name} was passed non-serializable keyword arguments: ${h.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),g={}}if(h.inboundLayers.length>0){const v=[];for(let b=0;b<h.inboundLayers.length;b++){const x=h.inboundLayers[b],C=h.nodeIndices[b],E=h.tensorIndices[b],_=zd.nodeKey(x,C);let M=t[_];M==null&&(M=0),v.push([x.name,M,E,g])}c.push(v)}}}const u={};u.name=a.name,u.className=o,u.config=l,u.inboundNodes=c,r.push(u)}e.layers=r;const i=[];for(let a=0;a<this.inputLayers.length;a++){const o=this.inputLayers[a],l=this.inputLayersNodeIndices[a],c=zd.nodeKey(o,l);if(!this.containerNodes.has(c))continue;let u=t[c];u==null&&(u=0);const d=this.inputLayersTensorIndices[a];i.push([o.name,u,d])}e.inputLayers=i;const s=[];for(let a=0;a<this.outputLayers.length;a++){const o=this.outputLayers[a],l=this.outputLayersNodeIndices[a],c=zd.nodeKey(o,l);if(!this.containerNodes.has(c))continue;let u=t[c];u==null&&(u=0);const d=this.outputLayersTensorIndices[a];s.push([o.name,u,d])}return e.outputLayers=s,e}static fromConfig(e,t,r={},i=!1){const s={},a={};function o(b,x){b.name in a?a[b.name].push(x):a[b.name]=[x]}function l(b,x){const C=[];let E;for(const _ of x){const M=_[0],R=_[1],L=_[2];if(E=_[3]==null?{}:_[3],!(M in s)){o(b,x);return}const $=s[M];if($.inboundNodes.length<=R){o(b,x);return}const N=$.inboundNodes[R];C.push(N.outputTensors[L])}C.length>0&&b.apply(kl(C),E)}function c(b){const x=b.name,C=$p(b,t.customObjects!=null?t.customObjects:{});C.setFastWeightInitDuringBuild(i),s[x]=C,b.inboundNodes.forEach(_=>{if(!(_ instanceof Array))throw new Ve(`Corrupted configuration, expected array for nodeData: ${_}`);o(C,_)})}const u=t.name,d=t.layers;for(const b of d)c(b);for(;!k$e(a);)for(const b of d){const x=s[b.name];if(x.name in a){const C=a[x.name];delete a[x.name];for(const E of C)l(x,E)}}const h=[],p=[],g=t.inputLayers;for(const b of g){const x=b[0],C=b[1],E=b[2];th(x in s);const M=s[x].inboundNodes[C].outputTensors;h.push(M[E])}const v=t.outputLayers;for(const b of v){const x=b[0],C=b[1],E=b[2];th(x in s);const M=s[x].inboundNodes[C].outputTensors;p.push(M[E])}return new e({inputs:h,outputs:p,name:u})}get stateful(){if(this._stateful)throw new Ve("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){Ye(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function YLe(n,e,t){const r=e.length;if(n==null||Array.isArray(n)&&n.length===0)return e.map(i=>null);if(r===1)return Array.isArray(n)&&n.length===1?n:typeof n=="object"&&e[0]in n?[n[e[0]]]:[n];if(Array.isArray(n)){if(n.length!==r)throw new Error(`Provided ${t} is an array of ${n.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return n}else if(typeof n=="object"&&Object.keys(n).length>0&&typeof n[Object.keys(n)[0]]=="object"){const i=[];return e.forEach(s=>{s in n?i.push(n[s]):i.push(null)}),i}else throw new Error(`The model has multiple (${r}) outputs, so ${t} must be either an array with ${r} elements or an object with ${e} keys. Provided ${t} not understood: ${JSON.stringify(n)}`)}function Lte(n,e){return YLe(n,e,"classWeight")}async function Fte(n,e,t,r){if(t!=null){const i=Ye(()=>{if(n.shape.length===1)return Bp(n);if(n.shape.length===2){if(n.shape[1]>1)return f1(n,1);if(n.shape[1]===1)return Fe(n,[n.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${n.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${n.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),s=Array.from(await i.data());rr(i);const a=[];return s.forEach(o=>{if(t[o]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${o} exists in the data but not in classWeight`);a.push(t[o])}),ca(a,"float32")}else return null}function JLe(n,e){return ke(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const ZLe=32;function Pte(n,e){let t,r;const i=e;t=i.xs,r=i.ys,de(t!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const s=VW("input",n.inputNames,t),a=VW("output",n.outputNames,r),o=s[0].shape[0];de(s.length===n.inputs.length,()=>`LayersModel has ${n.inputs.length} inputs, but the dataset provides ${s.length} inputs.  (Expected input keys: ${JSON.stringify(n.inputNames)})`),de(a.length===n.outputs.length,()=>`LayersModel has ${n.outputs.length} outputs, but the dataset provides ${a.length} outputs.  (Expected output keys: ${JSON.stringify(n.outputNames)})`);for(let l=0;l<s.length;l++)de(s[l].shape[0]===o,()=>`Batch size mismatch: input ${n.inputNames[l]} has ${s[l].shape[0]}; expected  ${o} based on input ${n.inputNames[0]}.`);for(let l=0;l<a.length;l++)de(a[l].shape[0]===o,()=>`Batch size mismatch: output ${n.outputNames[l]} has ${a[l].shape[0]}; expected  ${o} based on input ${n.inputNames[0]}.`);return{xs:s,ys:a}}function VW(n,e,t){if(t instanceof ji)return[t];if(Array.isArray(t))return de(t.length===e.length,()=>`Received an array of ${t.length} Tensors, but expected ${e.length} to match the ${n} keys ${e}.`),t;{const r=[];for(const i of e){if(t[i]==null)throw new Ve(`The feature data generated by the dataset lacks the required ${n} key '${i}'.`);r.push(t[i])}return r}}function QLe(n){if(n.length===3)throw new Er("Validation with sample weights is not implemented yet.");return{xs:n[0],ys:n[1]}}async function eFe(n,e,t){const r=t.batchesPerEpoch!=null;if(de(n.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),de(t!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),de(t.epochs!=null&&t.epochs>0&&Number.isInteger(t.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${t.epochs}`),de(!r||t.batchesPerEpoch>0&&Number.isInteger(t.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${t.batchesPerEpoch}`),de(t.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),n.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");n.isTraining=!0;try{const i=t.validationData!=null;let s,a;if(i)if(GW(t.validationData))de(t.validationBatches==null||t.validationBatches>0&&Number.isInteger(t.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${t.validationBatches}`);else{const b=QLe(t.validationData);s=b.xs,a=b.ys}const o=n.makeTrainFunction(),l=n.getDedupedMetricsNames();let c;i?c=l.slice().concat(l.map(b=>"val_"+b)):c=l.slice();const u=Mte(t.callbacks,t.yieldEvery),d=t.verbose==null?1:t.verbose,{callbackList:h,history:p}=Rte(u,d,t.epochs,null,null,tFe(e,t),null,i,c);h.setModel(n),n.history=p,await h.onTrainBegin(),n.stopTraining_=!1;let g=t.initialEpoch==null?0:t.initialEpoch,v=await e.iterator();for(;g<t.epochs;){const b={};await h.onEpochBegin(g);let x=0,C=0;for(r||(v=await e.iterator());!r||x<t.batchesPerEpoch;){const E=await v.next();if(r&&E.done){console.warn(`You provided \`batchesPerEpoch\` as ${t.batchesPerEpoch}, but your dataset iterator ran out of data after ${x} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${t.batchesPerEpoch*t.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(E.value!=null){const{xs:_,ys:M}=Pte(n,E.value),R={};R.batch=C,R.size=_[0].shape[0],await h.onBatchBegin(C,R);const L=[];if(t.classWeight!=null){const I=Lte(t.classWeight,n.outputNames);for(let k=0;k<I.length;++k)L.push(await Fte(M[k],null,I[k]))}const $=_.concat(M).concat(L),N=o($);rr($);for(let I=0;I<l.length;++I){const k=l[I],P=N[I];R[k]=P,Fa(P)}await h.onBatchEnd(C,R),Tte(R),C++,x++}if(r?x>=t.batchesPerEpoch:E.done){if(i){let _;GW(t.validationData)?_=Ai(await n.evaluateDataset(t.validationData,{batches:t.validationBatches})):_=Ai(n.evaluate(s,a,{batchSize:t.validationBatchSize==null?ZLe:t.validationBatchSize,verbose:0}));for(let M=0;M<n.metricsNames.length;++M)b[`val_${n.metricsNames[M]}`]=_[M]}break}if(n.stopTraining_)break}if(await h.onEpochEnd(g,b),g++,n.stopTraining_)break}return await h.onTrainEnd(),await n.history.syncData(),n.history}finally{n.isTraining=!1}}function tFe(n,e){let t=null;return e.batchesPerEpoch!=null?t=e.batchesPerEpoch:Number.isFinite(n.size)&&(t=n.size),t}function GW(n){return typeof n.iterator=="function"}function nFe(n){return typeof n.next=="function"}async function rFe(n,e,t){t=t||{};const r=t.batches!=null,i=n.testFunction;let s=[];if(t.verbose>0)throw new Er("Verbose mode is not implemented yet.");de(!r||t.batches>0&&Number.isInteger(t.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(t.batches)}`);const a=nFe(e)?e:await e.iterator();let o=0,l=0;for(;!r||l<t.batches;){const c=await a.next();if(s=Ye(()=>{if(c.value){const{xs:u,ys:d}=Pte(n,c.value),h=u.concat(d),p=Ye(()=>i(h));if(rr(h),l===0)for(let v=0;v<p.length;++v)s.push($n(0));const g=h[0].shape[0];for(let v=0;v<p.length;++v){const b=p[v],x=s[v];s[v]=Ye(()=>Bt(s[v],ke(g,b))),l>0&&rr(x)}rr(p),o+=g,++l}return s}),c.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${t.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let c=0;c<s.length;++c){const u=s[c];s[c]=mn(s[c],o),rr(u)}return kl(s)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function WB(n){de(n>0&&Number.isInteger(n),()=>`batchSize is required to be a positive integer, but got ${n}`)}function Fw(n,e,t){return n==null?[null]:Array.isArray(n)?n.map(r=>qy(r,e,t-e)):qy(n,e,t-e)}function aF(n,e){return Ye(()=>n==null?null:Array.isArray(n)?n.map(t=>aF(t,e)):hte(n,e.dtype==="int32"?e:nn(e,"int32")))}function jB(n,e){const t=[];let r=0,i=null;for(;r<n;)i=r+e,i>=n&&(i=n),t.push([r,i]),r=i;return t}function Ute(n){const e=[];n instanceof ji&&(n=[n]);for(let t=0;t<n.length;++t){const r=n[t];if(r.rank===1)e.push(ZE(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function Fd(n,e){if(n==null)return;const t=[];if(e instanceof ji)t.push(e.id);else if(Array.isArray(e))e.forEach(i=>t.push(i.id));else if(e!=null)for(const i in e){const s=e[i];t.push(s.id)}const r=[];if(n instanceof ji)t.indexOf(n.id)===-1&&r.push(n);else if(Array.isArray(n))n.forEach(i=>{t.indexOf(i.id)===-1&&r.push(i)});else if(n!=null)for(const i in n){const s=n[i];t.indexOf(s.id)===-1&&r.push(s)}r.forEach(i=>{i.isDisposed||i.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function iFe(n){return n instanceof ji}function oF(n){return Array.isArray(n)}function WW(n){return!iFe(n)&&!oF(n)}function jW(n,e,t,r=!0,i=""){if(e==null||e.length===0){if(n!=null){let a=!1;if(oF(n)&&n.length>0)a=!0;else if(WW(n)){for(const o in n)if(n.hasOwnProperty(o)){a=!0;break}}else a=!0;if(a)throw new Ve(`Error when checking model ${i} expected no data, but got ${n}`)}return[]}if(n==null)return e.map(a=>null);let s;if(WW(n)){n=n,s=[];for(const a of e){if(n[a]==null)throw new Ve(`No data provided for "${a}". Need data for each key in: ${e}`);s.push(n[a])}}else if(oF(n)){if(n=n,n.length!==e.length)throw new Ve(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${n}`);s=n}else{if(n=n,e.length>1)throw new Ve(`The model ${i} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${n.shape}`);s=[n]}if(s=Ute(s),t!=null)for(let a=0;a<e.length;++a){if(t[a]==null)continue;const o=s[a];if(o.shape.length!==t[a].length)throw new Ve(`Error when checking ${i}: expected ${e[a]} to have ${t[a].length} dimension(s). but got array with shape ${o.shape}`);for(let l=0;l<t[a].length;++l){if(l===0&&!r)continue;const c=o.shape[l],u=t[a][l];if(u!=null&&u>=0&&c!==u)throw new Ve(`${i} expected a batch of elements where each example has shape [${t[a].slice(1,t[a].length)}] (i.e.,tensor shape [*,${t[a].slice(1,t[a].length)}]) but the ${i} received an input with ${o.shape[0]} examples, each with shape [${o.shape.slice(1,o.shape.length)}] (tensor shape [${o.shape}])`)}}return s}function sFe(n,e,t){const r=mg(n.map(s=>s.shape[0]));r.sort();const i=mg(e.map(s=>s.shape[0]));if(i.sort(),r.length>1)throw new Ve(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(n.map(s=>s.shape))}`);if(i.length>1)throw new Ve(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(s=>s.shape))}`);if(r.length>0&&i.length>0&&!Vr(r,i))throw new Ve(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${i[0]} target sample(s).`)}function aFe(n,e,t){const r=[g3,y3,t_];for(let i=0;i<n.length;++i){const s=n[i],a=e[i],o=t[i];if(a!=null){if(a===t_&&s.shape[s.shape.length-1]===1)throw new Ve(`You are passing a target array of shape ${s.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(a)!==-1){const l=s.shape.slice(1),c=o.slice(1);for(let u=0;u<l.length;++u){const d=l[u],h=c[u];if(h!=null&&d!==h)throw new Ve(`A target Tensor with shape ${s.shape} was passed for an output of shape ${o}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function qW(n,e,t,r=!0,i=""){let s;if(Array.isArray(n)){if(n.length!==e.length)throw new Ve(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${n.length} Tensors(s).`);s=n}else{if(e.length>1)throw new Ve(`The model expects ${e.length} ${i} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(n.shape)}.`);s=[n]}if(t!=null)for(let a=0;a<e.length;++a){if(t[a]==null)continue;const o=s[a];if(o.shape.length!==t[a].length)throw new Ve(`Error when checking ${i}: expected ${e[a]} to have ${t[a].length} dimension(s), but got array with shape ${JSON.stringify(o.shape)}`);for(let l=0;l<t[a].length;++l){if(l===0&&!r)continue;const c=o.shape[l],u=t[a][l];if(u!=null&&u!==c)throw new Ve(`Error when checking ${i}: expected ${e[a]} to have shape ${JSON.stringify(t[a])} but got array with shape ${JSON.stringify(o.shape)}.`)}}}function oFe(n,e){if(n==null||Array.isArray(n)&&n.length===0)return e.map(r=>[]);let t;if(typeof n=="string"||typeof n=="function")t=[n];else if(Array.isArray(n)||typeof n=="object")t=n;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${n}`);if(Array.isArray(t))return e.map(r=>t);{const r=[];for(const i of e){let s=t.hasOwnProperty(i)?t[i]:[];Array.isArray(s)||(s=[s]),r.push(s)}return r}}const lFe="layers-model";class zx extends zd{constructor(e){super(e),this.isTraining=!1}summary(e,t,r=console.log){if(!this.built)throw new Ve("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");GLe(this,e,t,r)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=VLe(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof Yg))throw new Ve("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let t=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const a in e.loss)if(this.outputNames.indexOf(a)===-1)throw new Ve(`Unknown entry in loss dictionary: "${a}". Only expected the following keys: ${this.outputNames}`);for(const a of this.outputNames)e.loss[a]==null&&console.warn(`Output "${a}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${a} during training`),t.push(GB(e.loss[a]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new Ve(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);t=e.loss.map(o=>GB(o))}else{const a=GB(e.loss);this.outputs.forEach(o=>{t.push(a)})}this.lossFunctions=t,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let a=0;a<this.outputs.length;++a){const o=this.internalOutputShapes[a],l=this.outputNames[a];this.feedOutputNames.push(l),this.feedOutputShapes.push(o),this.feedLossFns.push(this.lossFunctions[a])}const r=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],jy("loss",()=>{for(let a=0;a<this.outputs.length;++a){if(r.indexOf(a)!==-1)continue;const o=this.lossFunctions[a];this.outputs.length>1&&(this.metricsTensors.push([o,a]),this.metricsNames.push(this.outputNames[a]+"_loss"))}});const i=oFe(e.metrics,this.outputNames),s=(a,o,l)=>{this.outputNames.length>1&&(o=this.outputNames[a]+"_"+o),this.metricsNames.push(o),this.metricsTensors.push([l,a])};jy("metric",()=>{for(let a=0;a<this.outputs.length;++a){if(r.indexOf(a)!==-1)continue;const o=i[a];(c=>{let d,h,p;for(const g of c){if(typeof g=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(g)!==-1){const b=this.internalOutputShapes[a];b[b.length-1]===1||this.lossFunctions[a]===y3?["accuracy","acc"].indexOf(g)!==-1?h=Ite:["crossentropy","ce"].indexOf(g)!==-1&&(h=kLe):this.lossFunctions[a]===dN?["accuracy","acc"].indexOf(g)!==-1?h=OLe:["crossentropy","ce"].indexOf(g)!==-1&&(h=Ote):["accuracy","acc"].indexOf(g)!==-1?h=Dte:["crossentropy","ce"].indexOf(g)!==-1&&(h=kte);let x;["accuracy","acc"].indexOf(g)!==-1?x="acc":["crossentropy","ce"].indexOf(g)!==-1&&(x="ce"),p=h,d=""+x}else p=HLe(g),d=""+WT(g);let v;jy(d,()=>{v=p}),s(a,d,v)}})(o)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,t,r={}){const i=r.batchSize==null?32:r.batchSize;WB(i);const a=this.standardizeUserDataXY(e,t,!0,i);try{const o=a[0].concat(a[1]);this.makeTestFunction();const l=this.testFunction,c=this.testLoop(l,o,i,r.verbose,r.steps);return kl(c)}finally{Fd(a[0],e),Fd(a[1],t)}}async evaluateDataset(e,t){return this.makeTestFunction(),rFe(this,e,t)}checkNumSamples(e,t,r,i="steps"){let s;if(r!=null){if(s=null,t!=null)throw new Ve(`If ${i} is set, batchSize must be null or undefined.Got batchSize = ${t}`)}else if(e!=null)Array.isArray(e)?s=e[0].shape[0]:s=e.shape[0];else throw new Ve(`Either the input data should have a defined shape, or ${i} shoud be specified.`);return s}execute(e,t){if(Array.isArray(t)&&t.length===0)throw new Ve("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(t),i=r?t:[t],s=this.retrieveSymbolicTensors(i),a=new cg;if(e instanceof ji&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new Ve(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)a.add(this.inputs[l],e[l])}else for(const l of this.inputs){const c=e[l.name];if(c==null)throw new Ve(`No value is provided for the model's input ${l.name}`);a.add(l,c)}const o=eC(s,a);return r?o:o[0]}retrieveSymbolicTensors(e){const t=mv(null,e.length);let r=e.length;for(const i of this.layers){const s=Array.isArray(i.output)?i.output:[i.output],a=s.map(o=>o.name);for(let o=0;o<e.length;++o){const l=a.indexOf(e[o]);if(l!==-1&&(t[o]=s[l],r--),r===0)break}if(r===0)break}if(r>0){const i=[];throw t.forEach((s,a)=>{s==null&&i.push(e[a])}),new Ve(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(i)}`)}return t}predictLoop(e,t=32,r=!1){return Ye(()=>{const i=this.checkNumSamples(e);if(r)throw new Er("Verbose predictLoop() is not implemented yet.");const s=jB(i,t),a=this.outputs.map(o=>[]);for(let o=0;o<s.length;++o)Ye(()=>{const c=s[o][0],u=s[o][1],d=Fw(e,c,u),h=[];if(Array.isArray(d))for(let g=0;g<d.length;++g)h.push({key:this.inputs[g],value:d[g]});else h.push({key:this.inputs[0],value:d});const p=new cg(h);return eC(this.outputs,p)}).forEach((c,u)=>a[u].push(c));return kl(a.map(o=>Os(o,0)))})}predict(e,t={}){const r=Ute(e);qW(r,this.inputNames,this.feedInputShapes,!1);try{const i=t.batchSize==null?32:t.batchSize;return WB(i),this.predictLoop(r,i)}finally{Fd(r,e)}}predictOnBatch(e){qW(e,this.inputNames,this.feedInputShapes,!0);const t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}standardizeUserDataXY(e,t,r=!0,i){if(this.optimizer_==null)throw new Hu("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const s=[];for(let a=0;a<this.feedOutputShapes.length;++a){const o=this.feedOutputShapes[a];this.feedLossFns[a]===dN?s.push(o.slice(0,o.length-1).concat([1])):s.push(o)}if(e=jW(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=jW(t,this.feedOutputNames,s,!1,"target"),sFe(e,t),aFe(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&i!=null&&i>0&&e[0].shape[0]%i!==0)throw new Ve(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${i}. Found: ${e[0].shape[0]} sample(s).`);return[e,t]}async standardizeUserData(e,t,r,i,s=!0,a){const[o,l]=this.standardizeUserDataXY(e,t,s,a);if(r!=null)throw new Error("sample weight is not supported yet.");let c=null;if(i!=null){const u=Lte(i,this.outputNames);c=[];for(let d=0;d<u.length;++d)c.push(await Fte(l[d],null,u[d]))}return[o,l,c]}testLoop(e,t,r,i=0,s){return Ye(()=>{const a=this.checkNumSamples(t,r,s,"steps"),o=[];if(i>0)throw new Er("Verbose mode is not implemented yet.");if(s!=null)throw new Er("steps mode in testLoop() is not implemented yet");{const l=jB(a,r),c=ca(af(0,a));for(let u=0;u<l.length;++u){const d=l[u][0],h=l[u][1],p=qy(c,d,h-d),g=aF(t,p),v=e(g);if(u===0)for(let b=0;b<v.length;++b)o.push($n(0));for(let b=0;b<v.length;++b){const x=v[b];o[b]=Bt(o[b],ke(h-d,x))}}for(let u=0;u<o.length;++u)o[u]=mn(o[u],a)}return o})}getDedupedMetricsNames(){const e=this.metricsNames,t=[];for(let r=0;r<e.length;++r){const i=e[r];let s=i;if(IW(e,i)>1){const a=IW(e.slice(0,r),i);s+=`_${a}`}t.push(s)}return t}makeTrainFunction(){return e=>{const t=[],r=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),s=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),a=[],o=()=>{const d=[];for(let v=0;v<this.inputs.length;++v)d.push({key:this.inputs[v],value:r[v]});const h=new cg(d),p=eC(this.outputs,h,{training:!0});let g;for(let v=0;v<this.lossFunctions.length;++v){const b=this.lossFunctions[v];let x=b(i[v],p[v]);s[v]!=null&&(x=JLe(x,s[v]));const C=Is(x);t.push(C),v===0?g=x:g=Bt(g,x)}for(let v=0;v<this.metricsTensors.length;++v){let b;if(this.outputs.length>1&&v<this.outputs.length)b=t[v];else{const x=this.metricsTensors[v][0],C=this.metricsTensors[v][1];b=Is(x(i[C],p[C]))}Fa(b),a.push(b)}return g=Is(g),this.calculateLosses().forEach(v=>{g=Bt(g,v)}),g},l=this.collectedTrainableWeights.map(d=>d.read());return[this.optimizer_.minimize(o,!0,l)].concat(a)}}makeTestFunction(){this.testFunction=e=>Ye(()=>{const t=[];let r;const i=e.slice(0,this.inputs.length),s=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=[];for(let c=0;c<this.inputs.length;++c)a.push({key:this.inputs[c],value:i[c]});const o=new cg(a),l=eC(this.outputs,o);for(let c=0;c<this.lossFunctions.length;++c){const u=this.lossFunctions[c],d=Is(u(s[c],l[c]));c===0?r=d:r=Bt(r,d),t.push(r)}for(let c=0;c<this.metricsTensors.length;++c){const u=this.metricsTensors[c][0],d=this.metricsTensors[c][1],h=Is(u(s[d],l[d]));t.push(h)}return t})}async fit(e,t,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let i,s,a,o,l,c,u,d,h;try{const p=r.batchSize==null?32:r.batchSize;WB(p);const v=await this.standardizeUserData(e,t,r.sampleWeight,r.classWeight,!1,p);i=v[0],s=v[1],h=v[2];let b=!1,x;if(r.validationData!=null&&r.validationData.length>0){if(b=!0,r.validationData.length===2)l=r.validationData[0],c=r.validationData[1];else throw r.validationData.length===3?new Er("validationData including sample weights is not supported yet."):new Ve(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const I=await this.standardizeUserData(l,c,null,null,!0,p);u=I[0],d=I[1],x=u.concat(d)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){b=!0;const N=Math.floor(i[0].shape[0]*(1-r.validationSplit)),I=i[0].shape[0];u=Fw(i,N,I),a=i,i=Fw(i,0,N),d=Fw(s,N,I),o=s,s=Fw(s,0,N),x=u.concat(d)}else r.validationSteps!=null&&(b=!0);const C=i.concat(s).concat(h);this.checkTrainableWeightsConsistency();const E=this.makeTrainFunction(),_=this.getDedupedMetricsNames();let M,R;b?(this.makeTestFunction(),M=this.testFunction,R=_.slice().concat(_.map(N=>"val_"+N))):(M=null,x=[],R=_.slice());const L=Mte(r.callbacks,r.yieldEvery);return await this.fitLoop(E,C,_,p,r.epochs,r.verbose,L,M,x,r.shuffle,R,r.initialEpoch,null,null)}finally{this.isTraining=!1,Fd(i,e),Fd(s,t),Fd(a,e),Fd(o,t),Fd(u,l),Fd(d,c),h!=null&&rr(h)}}async fitLoop(e,t,r,i,s,a,o,l,c,u,d,h,p,g){i==null&&(i=32),s==null&&(s=1),u==null&&(u=!0),h==null&&(h=0);let v=!1;if(l!=null&&c!=null&&(v=!0),g!=null&&(v=!0,p==null))throw new Ve("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const b=this.checkNumSamples(t,i,p,"steps_per_epoch");let x;b!=null&&(x=af(0,b)),a==null&&(a=1);const{callbackList:C,history:E}=Rte(o,a,s,h,b,p,i,v,d);C.setModel(this),this.history=E,await C.onTrainBegin(),this.stopTraining_=!1;for(let _=h;_<s;++_){await C.onEpochBegin(_);const M={};if(p!=null)throw new Er("stepsPerEpoch mode is not implemented yet.");{if(u==="batch")throw new Er("batch shuffling is not implemneted yet");u&&YAe(x);const R=ca(x),L=jB(b,i);for(let $=0;$<L.length;++$){const N={};if(await C.onBatchBegin($,N),Ye(()=>{const I=L[$][0],k=L[$][1],P=qy(R,I,k-I);N.batch=$,N.size=k-I;const G=aF(t,P),W=e(G);for(let X=0;X<r.length;++X){const z=r[X],J=W[X];N[z]=J,Fa(J)}if($===L.length-1&&v){const X=this.testLoop(l,c,i);for(let z=0;z<r.length;++z){const J=r[z],Q=X[z];Fa(Q),M["val_"+J]=Q}}}),await C.onBatchEnd($,N),Tte(N),this.stopTraining_)break}R.dispose()}if(await C.onEpochEnd(_,M),this.stopTraining_)break}return await C.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,t){return eFe(this,e,t)}async trainOnBatch(e,t){const r=await this.standardizeUserData(e,t),i=r[0],s=r[1],o=this.makeTrainFunction()(i.concat(s)),l=[];for(const c of o){const u=await c.data();l.push(u[0])}return rr(o),Fd(r[0],e),Fd(r[1],t),kl(l)}getNamedWeights(e){const t=[],r=e!=null&&e.trainableOnly,i=r?this.trainableWeights:this.weights,s=this.getWeights(r);for(let a=0;a<i.length;++a)r&&!i[a].trainable||t.push({name:i[a].originalName,tensor:s[a]});return t}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const t=aW().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-aW().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=Sp(this.loss);else if(Array.isArray(this.loss)){for(const t of this.loss)if(typeof t!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(t=>Sp(t))}else{const t=Object.keys(this.loss);e={};const r=this.loss;for(const i of t)if(typeof r[i]=="string")e[i]=Sp(r[i]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Sp(WT(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>Sp(WT(e)));{const e={};for(const t in this.metrics)e[t]=Sp(WT(this.metrics[t]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const t=iF(e.optimizer_config),r=$p(t);let i;if(typeof e.loss=="string")i=Cy(e.loss);else if(Array.isArray(e.loss))i=e.loss.map(a=>Cy(a));else if(e.loss!=null){i={};for(const a in e.loss)i[a]=Cy(e.loss[a])}let s;if(Array.isArray(e.metrics))s=e.metrics.map(a=>Cy(a));else if(e.metrics!=null){s={};for(const a in e.metrics)s[a]=Cy(e.metrics[a])}this.compile({loss:i,metrics:s,optimizer:r})}async save(e,t){if(typeof e=="string"){const c=JZ(e);if(c.length===0)throw new Ve(`Cannot find any save handlers for URL '${e}'`);if(c.length>1)throw new Ve(`Found more than one (${c.length}) save handlers for URL '${e}'`);e=c[0]}if(e.save==null)throw new Ve("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await zL(this.getNamedWeights(t)),o={modelTopology:this.toJSON(null,!1),format:lFe,generatedBy:`TensorFlow.js tfjs-layers v${$te}`,convertedBy:null};if((t==null?!1:t.includeOptimizer)&&this.optimizer!=null){o.trainingConfig=this.getTrainingConfig();const c="optimizer",{data:u,specs:d}=await zL(await this.optimizer.getWeights(),c);r.specs.push(...d),r.data=XZ([r.data,u])}return this.userDefinedMetadata!=null&&(HW(this.userDefinedMetadata,this.name,!0),o.userDefinedMetadata=this.userDefinedMetadata),o.weightData=r.data,o.weightSpecs=r.specs,e.save(o)}setUserDefinedMetadata(e){HW(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}zx.className="Model";Gt(zx);class zte extends zx{}zte.className="Functional";Gt(zte);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class n_ extends zx{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:h3("sequential_"),e.layers!=null)for(const t of e.layers)this.add(t)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new Ve(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const t=e instanceof n_||e instanceof zx;let r;if(t){if(r=e,r.outputs.length!==1)throw new Ve("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new Ve("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new Ve("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const i=uLe({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(i)}if(t)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new Ve(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new Ve("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=wte(this.outputs[0])}this.inboundNodes=[],new m3({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:mv(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(i=>i.shape),outputShapes:this.outputs[0].shape})}else{const i=e.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,t){return this.model==null&&this.build(),this.model.call(e,t)}build(e){if(si(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new zx({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,t,r=console.log){this.built||this.build(),super.summary(e,t,r)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,t,r={}){if(!this.built)throw new Hu("The model needs to be compiled before being used.");return this.model.evaluate(e,t,r)}async evaluateDataset(e,t){if(!this.built)throw new Hu("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,t)}predict(e,t={}){return this.model==null&&this.build(),this.model.predict(e,t)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,t,r={}){if(!this.built)throw new Hu("The model needs to be compiled before being used.");return this.model.fit(e,t,r)}async fitDataset(e,t){if(!this.built)throw new Hu("The model needs to be compiled before being used.");return this.model.fitDataset(e,t)}async trainOnBatch(e,t){return this.model.trainOnBatch(e,t)}static fromConfig(e,t,r={},i=!1){let s,a={};if(t instanceof Array){if(t[0].className==null||t[0].className==="Merge")throw new Ve("Legacy serialization format not supported yet.");s=t}else de(t.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),s=t.layers,delete t.layers,a=t;const o=new e(a);if(!(o instanceof n_))throw new Er(`Sequential.fromConfig called on non-Sequential input: ${o}`);for(const l of s){const u=$p(l,void 0,i);i&&u.setFastWeightInitDuringBuild(!0),o.add(u)}return o}set stopTraining(e){if(this.model==null)throw new Ve("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new Ve("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const t of this.layers){const r={};r.className=t.getClassName(),r.config=t.getConfig(),e.push(r)}return{name:this.name,layers:e}}}n_.className="Sequential";Gt(n_);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let ko=class extends X1{getConfig(){return{}}};class Hte extends ko{apply(e,t=1){return X$e(e,t)}}Hte.className="elu";Gt(Hte);class Vte extends ko{apply(e){return cz(e)}}Vte.className="selu";Gt(Vte);class Gte extends ko{apply(e){return Ih(e)}}Gte.className="relu";Gt(Gte);class Wte extends ko{apply(e){return Ye(()=>hv(6,Ih(e)))}}Wte.className="relu6";Gt(Wte);class jte extends ko{apply(e){return e}}jte.className="linear";Gt(jte);class qte extends ko{apply(e){return Qd(e)}}qte.className="sigmoid";Gt(qte);class Xte extends ko{apply(e){return Y$e(e)}}Xte.className="hardSigmoid";Gt(Xte);class Kte extends ko{apply(e){return W1(e)}}Kte.className="softplus";Gt(Kte);class Yte extends ko{apply(e){return K$e(e)}}Yte.className="softsign";Gt(Yte);class Jte extends ko{apply(e){return fv(e)}}Jte.className="tanh";Gt(Jte);let m5=class extends ko{apply(e,t=-1){return n3(e,t)}};m5.className="softmax";Gt(m5);class Zte extends ko{apply(e,t=-1){return ez(e,t)}}Zte.className="logSoftmax";Gt(Zte);class Qte extends ko{apply(e){return Ye(()=>Ye(()=>{const t=Math.sqrt(2),r=ke(.5,Bt(1,JU(mn(e,t))));return ke(e,r)}))}}Qte.className="gelu";Gt(Qte);class ene extends ko{apply(e){return Ye(()=>ke(.5,ke(e,Bt(1,fv(ke(ao(mn(2,Math.PI)),Bt(e,ke(.044715,Up(e,3)))))))))}}ene.className="gelu_new";Gt(ene);class tne extends ko{apply(e){return Ye(()=>ke(e,fv(W1(e))))}}tne.className="mish";Gt(tne);class nne extends ko{apply(e,t=1){return Ye(()=>ke(Qd(ke(e,t)),e))}}nne.className="swish";Gt(nne);function Ig(n){return n.getClassName()}function qB(n,e={}){return JE(n,Fu.getMap().classNameMap,e,"activation")}function Dg(n){if(n==null){const e={};return e.className="linear",e.config={},qB(e)}if(typeof n=="string"){const e={};return e.className=n,e.config={},qB(e)}else return n instanceof ko?n:qB(n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function cFe(n){if(n!=null&&typeof n!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${n}`)}class rne extends X1{}class ine extends rne{constructor(e){super(),cFe(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return Ye(()=>{let t=xa([1]);return this.hasL1&&(t=Bt(t,wn(ke(this.l1,va(e))))),this.hasL2&&(t=Bt(t,wn(ke(this.l2,QE(e))))),Fe(t,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,t){return new e({l1:t.l1,l2:t.l2})}}ine.className="L1L2";Gt(ine);const XW={l1l2:"L1L2"};function Xi(n){return t5(n)}function KW(n,e={}){return JE(n,Fu.getMap().classNameMap,e,"regularizer")}function fs(n){if(n==null)return null;if(typeof n=="string"){const t={className:n in XW?XW[n]:n,config:{}};return KW(t)}else return n instanceof rne?n:KW(n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class sne extends Dr{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,t){e=Yn(e);let r=Ih(e);return this.maxValue!=null&&(r=zl(r,0,this.maxValue)),r}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},t=super.getConfig();return Object.assign(e,t),e}}sne.className="ReLU";Gt(sne);class ane extends Dr{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,t){const r=Yn(e);return WD(r,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}ane.className="LeakyReLU";Gt(ane);class one extends Dr{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=ds(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=fs(e.alphaRegularizer),this.alphaConstraint=Ea(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new Ve(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=si(e);const t=e.slice(1);if(this.sharedAxes!=null)for(const i of this.sharedAxes)t[i-1]=1;this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let i=1;i<e.length;++i)r[i]=e[i];this.inputSpec=[new wa({ndim:e.length,axes:r})],this.built=!0}call(e,t){return e=Yn(e),ZD(e,this.alpha.read())}getConfig(){const e={alphaInitializer:Ss(this.alphaInitializer),alphaRegularizer:Xi(this.alphaRegularizer),alphaConstraint:_a(this.alphaConstraint),sharedAxes:this.sharedAxes},t=super.getConfig();return Object.assign(e,t),e}}one.className="PReLU";Gt(one);let lne=class extends Dr{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new Er(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,t){const r=Yn(e);return GE(r)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}};lne.className="ELU";Gt(lne);class cne extends Dr{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,t){const r=Yn(e);return ke(r,nn(Nc(r,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},t=super.getConfig();return Object.assign(e,t),e}}cne.className="ThresholdedReLU";Gt(cne);class une extends Dr{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new m5().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,t){return Ye(()=>{let r=Yn(e);const i=t.mask;if(i!=null){const s=ke(vn(vc(r.shape),nn(i,r.dtype)),$n(-1e9));r=Bt(r,s)}return this.axis instanceof Array?this.axis.length>1?nl(vn(r,qD(r,this.axis,!0))):this.softmax(r,this.axis[0]):this.softmax(r,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}une.className="Softmax";Gt(une);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Hx(n,e,t){if(typeof n=="number")return mv(n,e);if(n.length!==e)throw new Ve(`The ${t} argument must be an integer or tuple of ${e} integers. Received: ${n.length} elements.`);for(let r=0;r<e;++r){const i=n[r];if(!G$e(i))throw new Ve(`The ${t} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(n)} including a non-integer number ${i}`)}return n}function ef(n,e,t,r,i=1){if(n==null)return n;const s=e+(e-1)*(i-1);let a;return t==="same"?a=n:a=n-s+1,Math.floor((a+r-1)/r)}function nh(n,e,t,r){if(n==null)return null;if(r==="valid")n=n*e+Ng([t-e,0]);else if(r==="same")n=n*e;else throw new Ve(`Unsupport padding mode: ${r}.`);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function g5(n,e){return Ye(()=>(Js(e),e==="channelsFirst"?qr(n,[0,2,3,1]):n))}function dne(n,e){return Ye(()=>(Js(e),e==="channelsFirst"?qr(n,[0,2,3,4,1]):n))}function uFe(n,e,t,r=1,i="valid",s,a=1){return Ye(()=>{if(s==null&&(s=of()),Js(s),n.shape.length!==3)throw new Ve(`The input of a conv1dWithBias operation should be 3, but is ${n.shape.length} instead.`);if(e.shape.length!==3)throw new Ve(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(t!=null&&t.shape.length!==1)throw new Ve(`The bias for a conv1dWithBias operation should be 1, but is ${t.shape.length} instead`);if(s==="channelsFirst"&&(n=qr(n,[0,2,1])),i==="causal")throw new Er("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let o=jU(n,e,r,i==="same"?"same":"valid","NWC",a);return t!=null&&(o=mf(o,t)),o})}function YW(n,e,t,r=[1,1],i="valid",s,a,o=null){return Ye(()=>{if(s==null&&(s=of()),Js(s),n.rank!==3&&n.rank!==4)throw new Ve(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${n.rank}.`);if(e.rank!==3&&e.rank!==4)throw new Ve(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${n.rank}.`);let l=g5(n,s);if(i==="causal")throw new Er("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=iee({x:l,filter:e,strides:r,pad:i==="same"?"same":"valid",dilations:a,dataFormat:"NHWC",bias:t,activation:o}),s==="channelsFirst"&&(l=qr(l,[0,3,1,2])),l})}function dFe(n,e,t,r=[1,1,1],i="valid",s,a){return Ye(()=>{if(s==null&&(s=of()),Js(s),n.rank!==4&&n.rank!==5)throw new Ve(`conv3dWithBias expects input to be of rank 4 or 5, but received ${n.rank}.`);if(e.rank!==4&&e.rank!==5)throw new Ve(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${n.rank}.`);let o=dne(n,s);if(i==="causal")throw new Er("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return o=_Q(o,e,r,i==="same"?"same":"valid","NDHWC",a),t!=null&&(o=mf(o,t)),s==="channelsFirst"&&(o=qr(o,[0,4,1,2,3])),o})}class v3 extends Dr{constructor(e,t){if(super(t),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",v3.verifyArgs(t),this.rank=e,Pa(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new Er(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=Hx(t.kernelSize,e,"kernelSize"),this.strides=Hx(t.strides==null?1:t.strides,e,"strides"),this.padding=t.padding==null?"valid":t.padding,su(this.padding),this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,Js(this.dataFormat),this.activation=Dg(t.activation),this.useBias=t.useBias==null?!0:t.useBias,this.biasInitializer=ds(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=Ea(t.biasConstraint),this.biasRegularizer=fs(t.biasRegularizer),this.activityRegularizer=fs(t.activityRegularizer),this.dilationRate=Hx(t.dilationRate==null?1:t.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new Ve(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new Ve(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new Ve(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(th("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!n5(e.kernelSize,"number",1,3))throw new Ve(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Ig(this.activation),useBias:this.useBias,biasInitializer:Ss(this.biasInitializer),biasRegularizer:Xi(this.biasRegularizer),activityRegularizer:Xi(this.activityRegularizer),biasConstraint:_a(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}class K1 extends v3{constructor(e,t){super(e,t),this.kernel=null,K1.verifyArgs(t),this.filters=t.filters,Pa(this.filters,"filters"),this.kernelInitializer=ds(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=Ea(t.kernelConstraint),this.kernelRegularizer=fs(t.kernelRegularizer)}build(e){e=si(e);const t=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[t]==null)throw new Ve(`The channel dimension of the input should be defined. Found ${e[t]}`);const r=e[t],i=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[t]:r}}],this.built=!0}call(e,t){return Ye(()=>{e=Yn(e);let r;const i=this.bias==null?null:this.bias.read(),s=ote(this.activation.getClassName());if(s!=null&&this.rank===2)r=YW(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate,s);else{if(this.rank===1)r=uFe(e,this.kernel.read(),i,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=YW(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=dFe(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new Er("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(e){e=si(e);const t=[],r=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let s=0;s<r.length;++s){const a=ef(r[s],this.kernelSize[s],this.padding,this.strides[s],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[s]);t.push(a)}let i=[e[0]];return this.dataFormat==="channelsLast"?(i=i.concat(t),i.push(this.filters)):(i.push(this.filters),i=i.concat(t)),i}getConfig(){const e={filters:this.filters,kernelInitializer:Ss(this.kernelInitializer),kernelRegularizer:Xi(this.kernelRegularizer),kernelConstraint:_a(this.kernelConstraint)},t=super.getConfig();return Object.assign(e,t),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new Ve(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class r2 extends K1{constructor(e){super(2,e),r2.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!n5(e.kernelSize,"number",1,2))throw new Ve(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}r2.className="Conv2D";Gt(r2);class i2 extends K1{constructor(e){super(3,e),i2.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new Ve(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}i2.className="Conv3D";Gt(i2);class fne extends r2{constructor(e){if(super(e),this.inputSpec=[new wa({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new Ve(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=si(e),e.length!==4)throw new Ve("Input should have rank 4; Received input shape: "+JSON.stringify(e));const t=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[t]==null)throw new Ve("The channel dimension of the inputs should be defined. Found `None`.");const r=e[t],i=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new wa({ndim:4,axes:{[t]:r}})],this.built=!0}call(e,t){return Ye(()=>{let r=Yn(e);if(r.shape.length!==4)throw new Ve(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const i=r.shape,s=i[0];let a,o;this.dataFormat==="channelsFirst"?(a=2,o=3):(a=1,o=2);const l=i[a],c=i[o],u=this.kernelSize[0],d=this.kernelSize[1],h=this.strides[0],p=this.strides[1],g=nh(l,h,u,this.padding),v=nh(c,p,d,this.padding),b=[s,g,v,this.filters];this.dataFormat!=="channelsLast"&&(r=qr(r,[0,2,3,1]));let x=XU(r,this.kernel.read(),b,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(x=qr(x,[0,3,1,2])),this.bias!=null&&(x=mf(x,this.bias.read(),this.dataFormat)),this.activation!=null&&(x=this.activation.apply(x)),x})}computeOutputShape(e){e=si(e);const t=e.slice();let r,i,s;this.dataFormat==="channelsFirst"?(r=1,i=2,s=3):(r=3,i=1,s=2);const a=this.kernelSize[0],o=this.kernelSize[1],l=this.strides[0],c=this.strides[1];return t[r]=this.filters,t[i]=nh(t[i],l,a,this.padding),t[s]=nh(t[s],c,o,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}fne.className="Conv2DTranspose";Gt(fne);class hne extends i2{constructor(e){if(super(e),this.inputSpec=[new wa({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new Ve(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=si(e),e.length!==5)throw new Ve("Input should have rank 5; Received input shape: "+JSON.stringify(e));const t=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[t]==null)throw new Ve("The channel dimension of the inputs should be defined. Found `None`.");const r=e[t],i=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new wa({ndim:5,axes:{[t]:r}})],this.built=!0}call(e,t){return Ye(()=>{let r=Yn(e);if(r.shape.length!==5)throw new Ve(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const i=r.shape,s=i[0];let a,o,l;this.dataFormat==="channelsFirst"?(l=2,a=3,o=4):(l=1,a=2,o=3);const c=i[l],u=i[a],d=i[o],h=this.kernelSize[0],p=this.kernelSize[1],g=this.kernelSize[2],v=this.strides[0],b=this.strides[1],x=this.strides[2],C=nh(c,v,h,this.padding),E=nh(u,b,p,this.padding),_=nh(d,x,g,this.padding),M=[s,C,E,_,this.filters];this.dataFormat!=="channelsLast"&&(r=qr(r,[0,2,3,4,1]));let R=AQ(r,this.kernel.read(),M,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(R=qr(R,[0,4,1,2,3])),this.bias!==null&&(R=mf(R,this.bias.read(),this.dataFormat)),this.activation!==null&&(R=this.activation.apply(R)),R})}computeOutputShape(e){e=si(e);const t=e.slice();let r,i,s,a;this.dataFormat==="channelsFirst"?(r=1,i=2,s=3,a=4):(r=4,i=1,s=2,a=3);const o=this.kernelSize[0],l=this.kernelSize[1],c=this.kernelSize[2],u=this.strides[0],d=this.strides[1],h=this.strides[2];return t[r]=this.filters,t[i]=nh(t[i],u,o,this.padding),t[s]=nh(t[s],d,l,this.padding),t[a]=nh(t[a],h,c,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}hne.className="Conv3DTranspose";Gt(hne);class pne extends K1{constructor(e,t){if(super(e,t),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,t.filters==null)throw new Ve("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(t.kernelInitializer!=null||t.kernelRegularizer!=null||t.kernelConstraint!=null)throw new Ve("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(t.padding!=null&&t.padding!=="same"&&t.padding!=="valid")throw new Ve(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(t.padding)}`);this.depthMultiplier=t.depthMultiplier==null?1:t.depthMultiplier,this.depthwiseInitializer=ds(t.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=fs(t.depthwiseRegularizer),this.depthwiseConstraint=Ea(t.depthwiseConstraint),this.pointwiseInitializer=ds(t.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=fs(t.pointwiseRegularizer),this.pointwiseConstraint=Ea(t.pointwiseConstraint)}build(e){if(e=si(e),e.length<this.rank+2)throw new Ve(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const t=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[t]==null||e[t]<0)throw new Ve(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[t])}`);const r=e[t],i=this.kernelSize.concat([r,this.depthMultiplier]),s=[];for(let o=0;o<this.rank;++o)s.push(1);s.push(r*this.depthMultiplier,this.filters);const a=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",i,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,a,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",s,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,a,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,a,this.biasConstraint):this.bias=null,this.inputSpec=[new wa({ndim:this.rank+2,axes:{[t]:r}})],this.built=!0}call(e,t){return Ye(()=>{e=Yn(e);let r;if(this.rank===1)throw new Er("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=qr(e,[0,2,3,1])),r=uz(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=mf(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=qr(r,[0,3,1,2])),r})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=Ss(this.depthwiseInitializer),e.pointwiseInitializer=Ss(this.pointwiseInitializer),e.depthwiseRegularizer=Xi(this.depthwiseRegularizer),e.pointwiseRegularizer=Xi(this.pointwiseRegularizer),e.depthwiseConstraint=_a(this.depthwiseConstraint),e.pointwiseConstraint=_a(this.pointwiseConstraint),e}}pne.className="SeparableConv";class mne extends pne{constructor(e){super(2,e)}}mne.className="SeparableConv2D";Gt(mne);class b3 extends K1{constructor(e){super(1,e),b3.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!n5(e.kernelSize,"number",1,1))throw new Ve(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}b3.className="Conv1D";Gt(b3);class gne extends Dr{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,t){return Ye(()=>{if(e=Yn(e),this.dataFormat==="channelsLast"){const r=GT(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return GT(r,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=GT(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return GT(r,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}gne.className="Cropping2D";Gt(gne);class yne extends Dr{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Js(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,z$e(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const t=e[2]==null?null:this.size[0]*e[2],r=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],t,r]}else{const t=e[1]==null?null:this.size[0]*e[1],r=e[2]==null?null:this.size[1]*e[2];return[e[0],t,r,e[3]]}}call(e,t){return Ye(()=>{let r=Yn(e);const i=r.shape;if(this.dataFormat==="channelsFirst"){r=qr(r,[0,2,3,1]);const s=this.size[0]*i[2],a=this.size[1]*i[3],o=this.interpolation==="nearest"?Zc.resizeNearestNeighbor(r,[s,a]):Zc.resizeBilinear(r,[s,a]);return qr(o,[0,3,1,2])}else{const s=this.size[0]*i[1],a=this.size[1]*i[2];return this.interpolation==="nearest"?Zc.resizeNearestNeighbor(r,[s,a]):Zc.resizeBilinear(r,[s,a])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}}yne.className="UpSampling2D";Gt(yne);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function fFe(n,e,t=[1,1],r="valid",i,s){return Ye(()=>{i==null&&(i=of()),Js(i);let a=g5(n,i);if(n.rank!==4)throw new Ve(`Input for depthwiseConv2d is required to be 4-D, but is instead ${n.rank}-D`);if(e.rank!==4)throw new Ve(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return a=VE(a,e,t,r==="same"?"same":"valid","NHWC",s),i==="channelsFirst"&&(a=qr(a,[0,3,1,2])),a})}class vne extends v3{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=ds(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=Ea(e.depthwiseConstraint),this.depthwiseRegularizer=fs(e.depthwiseRegularizer)}build(e){if(e=si(e),e.length<4)throw new Ve(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const t=this.dataFormat==="channelsFirst"?1:3;if(e[t]==null||e[t]<0)throw new Ve(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[t]}).`);const r=e[t],i=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",i,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return Ye(()=>{e=Yn(e);let r=fFe(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=mf(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(e){e=si(e);const t=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],i=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,s=ef(t,this.kernelSize[0],this.padding,this.strides[0]),a=ef(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],i,s,a]:[e[0],s,a,i]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=Ss(this.depthwiseInitializer),e.depthwiseRegularizer=Xi(this.depthwiseRegularizer),e.depthwiseConstraint=_a(this.depthwiseRegularizer),e}}vne.className="DepthwiseConv2D";Gt(vne);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function bne(n,e,t,r){if(Array.isArray(n)){if(e!=null||t!=null)throw new Ve("When inputs is an array, neither initialState or constants should be provided");r!=null&&(t=n.slice(n.length-r,n.length),n=n.slice(0,n.length-r)),n.length>1&&(e=n.slice(1,n.length)),n=n[0]}function i(s){return s==null||Array.isArray(s)?s:[s]}return e=i(e),t=i(t),{inputs:n,initialState:e,constants:t}}function xne(n,e,t,r=!1,i,s,a=!1,o=!1){return Ye(()=>{const l=e.shape.length;if(l<3)throw new Ve(`Input should be at least 3D, but is ${l}D.`);const c=[1,0].concat(af(2,l));e=qr(e,c),a&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),i!=null&&(i=nn(nn(i,"bool"),"float32"),i.rank===l-1&&(i=Qa(i,-1)),i=qr(i,c)),r&&(e=Ku(e,0),i!=null&&(i=Ku(i,0)));const u=[];let d,h=t;const p=e.shape[0],g=Yu(e);let v;i!=null&&(v=Yu(i));for(let x=0;x<p;++x){const C=g[x],E=Ye(()=>n(C,h));if(i==null)d=E[0],h=E[1];else{const _=Ye(()=>{const M=v[x],R=vn(ru(M),M),L=Bt(ke(E[0],M),ke(h[0],R)),$=h.map((N,I)=>Bt(ke(E[1][I],M),ke(N,R)));return{output:L,newStates:$}});d=_.output,h=_.newStates}o&&u.push(d)}let b;return o&&(b=Ec(u,1)),[d,b,h]})}class Jg extends Dr{constructor(e){super(e);let t;if(e.cell==null)throw new Ve("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?t=new b5({cells:e.cell}):t=e.cell,t.stateSize==null)throw new Ve("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=t,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new wa({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return af(0,e).map(t=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){tF(e)&&(e=e[0]),e=e;let t=this.cell.stateSize;Array.isArray(t)||(t=[t]);const r=t[0];let i;if(this.returnSequences?i=[e[0],e[1],r]:i=[e[0],r],this.returnState){const s=[];for(const a of t)s.push([e[0],a]);return[i].concat(s)}else return i}computeMask(e,t){return Ye(()=>{Array.isArray(t)&&(t=t[0]);const r=this.returnSequences?t:null;if(this.returnState){const i=this.states.map(s=>null);return[r].concat(i)}else return r})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[];for(let r=0;r<e;++r)t.push(null);return t}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new Er("Constants support is not implemented in RNN yet.");tF(e)&&(e=e[0]),e=e;const t=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new wa({shape:[t,null,...r]});const i=[e[0]].concat(e.slice(2));this.cell.build(i);let s;if(Array.isArray(this.cell.stateSize)?s=this.cell.stateSize:s=[this.cell.stateSize],this.stateSpec!=null){if(!Vr(this.stateSpec.map(a=>a.shape[a.shape.length-1]),s))throw new Ve(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=s.map(a=>new wa({shape:[null,a]}));this.stateful&&this.resetStates()}resetStates(e,t=!1){Ye(()=>{if(!this.stateful)throw new eh("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new Ve("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>xa([r,i])):this.states_=[xa([r,this.cell.stateSize])];else if(e==null)rr(this.states_),this.keptStates!=null&&(rr(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>xa([r,i])):this.states_[0]=xa([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new Ve(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);t===!0?this.keptStates.push(this.states_.slice()):rr(this.states_);for(let i=0;i<this.states_.length;++i){const s=e[i],a=Array.isArray(this.cell.stateSize)?this.cell.stateSize[i]:this.cell.stateSize,o=[r,a];if(!Vr(s.shape,o))throw new Ve(`State ${i} is incompatible with layer ${this.name}: expected shape=${o}, received shape=${s.shape}`);this.states_[i]=s}}this.states_=this.states_.map(i=>Fa(i.clone()))})}apply(e,t){let r=t==null?null:t.initialState,i=t==null?null:t.constants;t==null&&(t={});const s=bne(e,r,i,this.numConstants);e=s.inputs,r=s.initialState,i=s.constants;let a=[],o=[];if(r!=null){t.initialState=r,a=a.concat(r),this.stateSpec=[];for(const c of r)this.stateSpec.push(new wa({shape:c.shape}));o=o.concat(this.stateSpec)}if(i!=null&&(t.constants=i,a=a.concat(i),this.numConstants=i.length),a[0]instanceof Ah){const c=[e].concat(a),u=this.inputSpec.concat(o),d=this.inputSpec;this.inputSpec=u;const h=super.apply(c,t);return this.inputSpec=d,h}else return super.apply(e,t)}call(e,t){return Ye(()=>{const r=t==null?null:t.mask,i=t==null?null:t.training;let s=t==null?null:t.initialState;e=Yn(e),s==null&&(this.stateful?s=this.states_:s=this.getInitialState(e));const a=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(s.length!==a)throw new Ve(`RNN Layer has ${a} state(s) but was passed ${s.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const o={training:i},c=xne((g,v)=>{const b=this.cell.call([g].concat(v),o);return[b[0],b.slice(1)]},e,s,this.goBackwards,r,null,this.unroll,this.returnSequences),u=c[0],d=c[1],h=c[2];this.stateful&&this.resetStates(h,i);const p=this.returnSequences?d:u;return this.returnState?[p].concat(h):p})}getInitialState(e){return Ye(()=>{let t=xa(e.shape);return t=wn(t,[1,2]),t=ZE(t),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?QL(t,[1,r]):t):this.cell.stateSize>1?[QL(t,[1,this.cell.stateSize])]:[t]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(t.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===Jg.className&&(t.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),t)}static fromConfig(e,t,r={}){const i=t.cell,s=$p(i,r);return new e(Object.assign(t,{cell:s}))}}Jg.className="RNN";Gt(Jg);class x3 extends Dr{}class y5 extends x3{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Pa(this.units,"units"),this.activation=Dg(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=ds(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=ds(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=ds(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=fs(e.kernelRegularizer),this.recurrentRegularizer=fs(e.recurrentRegularizer),this.biasRegularizer=fs(e.biasRegularizer),this.kernelConstraint=Ea(e.kernelConstraint),this.recurrentConstraint=Ea(e.recurrentConstraint),this.biasConstraint=Ea(e.biasConstraint),this.dropout=g1([1,Ng([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=g1([1,Ng([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=si(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return Ye(()=>{if(e=e,e.length!==2)throw new Ve(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let r=e[1];e=e[0];const i=t.training==null?!1:t.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=kg({ones:()=>ru(e),rate:this.dropout,training:i,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=kg({ones:()=>ru(r),rate:this.recurrentDropout,training:i,dropoutFunc:this.dropoutFunc}));let s;const a=this.dropoutMask,o=this.recurrentDropoutMask;a!=null?s=mh(ke(e,a),this.kernel.read()):s=mh(e,this.kernel.read()),this.bias!=null&&(s=mf(s,this.bias.read())),o!=null&&(r=ke(r,o));let l=Bt(s,mh(r,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const e=super.getConfig(),t={units:this.units,activation:Ig(this.activation),useBias:this.useBias,kernelInitializer:Ss(this.kernelInitializer),recurrentInitializer:Ss(this.recurrentInitializer),biasInitializer:Ss(this.biasInitializer),kernelRegularizer:Xi(this.kernelRegularizer),recurrentRegularizer:Xi(this.recurrentRegularizer),biasRegularizer:Xi(this.biasRegularizer),activityRegularizer:Xi(this.activityRegularizer),kernelConstraint:_a(this.kernelConstraint),recurrentConstraint:_a(this.recurrentConstraint),biasConstraint:_a(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),t)}}y5.className="SimpleRNNCell";Gt(y5);class Sne extends Jg{constructor(e){e.cell=new y5(e),super(e)}call(e,t){return Ye(()=>{this.cell.dropoutMask!=null&&(rr(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(rr(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=t==null?null:t.mask,i=t==null?null:t.training,s=t==null?null:t.initialState;return super.call(e,{mask:r,training:i,initialState:s})})}static fromConfig(e,t){return new e(t)}}Sne.className="SimpleRNN";Gt(Sne);class v5 extends x3{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new Ve("GRUCell does not support reset_after parameter set to true.");this.units=e.units,Pa(this.units,"units"),this.activation=Dg(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Dg(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=ds(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=ds(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=ds(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=fs(e.kernelRegularizer),this.recurrentRegularizer=fs(e.recurrentRegularizer),this.biasRegularizer=fs(e.biasRegularizer),this.kernelConstraint=Ea(e.kernelConstraint),this.recurrentConstraint=Ea(e.recurrentConstraint),this.biasConstraint=Ea(e.biasConstraint),this.dropout=g1([1,Ng([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=g1([1,Ng([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=si(e);const t=e[e.length-1];this.kernel=this.addWeight("kernel",[t,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return Ye(()=>{if(e=e,e.length!==2)throw new Ve(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const r=t.training==null?!1:t.training;let i=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=kg({ones:()=>ru(e),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=kg({ones:()=>ru(i),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));const s=this.dropoutMask,a=this.recurrentDropoutMask;let o,l,c;0<this.dropout&&this.dropout<1&&(e=ke(e,s[0]));let u=mh(e,this.kernel.read());this.useBias&&(u=mf(u,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(i=ke(i,a[0]));const d=this.recurrentKernel.read(),[h,p]=bc(d,[2*this.units,this.units],d.rank-1),g=mh(i,h),[v,b,x]=bc(u,3,u.rank-1),[C,E]=bc(g,2,g.rank-1);o=this.recurrentActivation.apply(Bt(v,C)),l=this.recurrentActivation.apply(Bt(b,E));const _=mh(ke(l,i),p);c=this.activation.apply(Bt(x,_));const M=Bt(ke(o,i),ke(Bt(1,is(o)),c));return[M,M]})}getConfig(){const e=super.getConfig(),t={units:this.units,activation:Ig(this.activation),recurrentActivation:Ig(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Ss(this.kernelInitializer),recurrentInitializer:Ss(this.recurrentInitializer),biasInitializer:Ss(this.biasInitializer),kernelRegularizer:Xi(this.kernelRegularizer),recurrentRegularizer:Xi(this.recurrentRegularizer),biasRegularizer:Xi(this.biasRegularizer),activityRegularizer:Xi(this.activityRegularizer),kernelConstraint:_a(this.kernelConstraint),recurrentConstraint:_a(this.recurrentConstraint),biasConstraint:_a(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),t)}}v5.className="GRUCell";Gt(v5);class wne extends Jg{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new v5(e),super(e)}call(e,t){return Ye(()=>{this.cell.dropoutMask!=null&&(rr(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(rr(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=t==null?null:t.mask,i=t==null?null:t.training,s=t==null?null:t.initialState;return super.call(e,{mask:r,training:i,initialState:s})})}static fromConfig(e,t){return t.implmentation===0&&(t.implementation=1),new e(t)}}wne.className="GRU";Gt(wne);class S3 extends x3{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Pa(this.units,"units"),this.activation=Dg(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Dg(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=ds(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=ds(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=ds(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=fs(e.kernelRegularizer),this.recurrentRegularizer=fs(e.recurrentRegularizer),this.biasRegularizer=fs(e.biasRegularizer),this.kernelConstraint=Ea(e.kernelConstraint),this.recurrentConstraint=Ea(e.recurrentConstraint),this.biasConstraint=Ea(e.biasConstraint),this.dropout=g1([1,Ng([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=g1([1,Ng([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var t;e=si(e);const r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let i;if(this.useBias){if(this.unitForgetBias){const s=this.biasInitializer,a=this.units;i=new(t=class extends td{apply(l,c){const u=s.apply([a]),d=new i5().apply([a]),h=s.apply([a*2]);return kW(kW(u,d),h)}},t.className="CustomInit",t)}else i=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,i,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,t){return Ye(()=>{const r=t.training==null?!1:t.training;if(e=e,e.length!==3)throw new Ve(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let i=e[1];const s=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=kg({ones:()=>ru(e),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=kg({ones:()=>ru(i),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));const a=this.dropoutMask,o=this.recurrentDropoutMask;let l,c,u,d;0<this.dropout&&this.dropout<1&&(e=ke(e,a[0]));let h=mh(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(i=ke(i,o[0])),h=Bt(h,mh(i,this.recurrentKernel.read())),this.useBias&&(h=mf(h,this.bias.read()));const[p,g,v,b]=bc(h,4,h.rank-1);l=this.recurrentActivation.apply(p),c=this.recurrentActivation.apply(g),u=Bt(ke(c,s),ke(l,this.activation.apply(v))),d=this.recurrentActivation.apply(b);const x=ke(d,this.activation.apply(u));return[x,x,u]})}getConfig(){const e=super.getConfig(),t={units:this.units,activation:Ig(this.activation),recurrentActivation:Ig(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Ss(this.kernelInitializer),recurrentInitializer:Ss(this.recurrentInitializer),biasInitializer:Ss(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Xi(this.kernelRegularizer),recurrentRegularizer:Xi(this.recurrentRegularizer),biasRegularizer:Xi(this.biasRegularizer),activityRegularizer:Xi(this.activityRegularizer),kernelConstraint:_a(this.kernelConstraint),recurrentConstraint:_a(this.recurrentConstraint),biasConstraint:_a(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),t)}}S3.className="LSTMCell";Gt(S3);class Cne extends Jg{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new S3(e),super(e)}call(e,t){return Ye(()=>{this.cell.dropoutMask!=null&&(rr(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(rr(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=t==null?null:t.mask,i=t==null?null:t.training,s=t==null?null:t.initialState;return super.call(e,{mask:r,training:i,initialState:s})})}static fromConfig(e,t){return t.implmentation===0&&(t.implementation=1),new e(t)}}Cne.className="LSTM";Gt(Cne);class b5 extends x3{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const t of this.cells.slice().reverse())Array.isArray(t.stateSize)?e.push(...t.stateSize):e.push(t.stateSize);return e}call(e,t){return Ye(()=>{e=e;let r=e.slice(1);const i=[];for(const o of this.cells.slice().reverse())Array.isArray(o.stateSize)?i.push(r.splice(0,o.stateSize.length)):i.push(r.splice(0,1));i.reverse();const s=[];let a;for(let o=0;o<this.cells.length;++o){const l=this.cells[o];r=i[o],o===0?a=[e[0]].concat(r):a=[a[0]].concat(r),a=l.call(a,t),s.push(a.slice(1))}r=[];for(const o of s.slice().reverse())r.push(...o);return[a[0]].concat(r)})}build(e){tF(e)&&(e=e[0]),e=e;let t;this.cells.forEach((r,i)=>{jy(`RNNCell_${i}`,()=>{r.build(e),Array.isArray(r.stateSize)?t=r.stateSize[0]:t=r.stateSize,e=[e[0],t]})}),this.built=!0}getConfig(){const e=super.getConfig(),t=s=>({className:s.getClassName(),config:s.getConfig()}),i={cells:this.cells.map(t)};return Object.assign(Object.assign({},e),i)}static fromConfig(e,t,r={}){const i=[];for(const s of t.cells)i.push($p(s,r));return new e({cells:i})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const t of this.cells)e.push(...t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.cells)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const r of this.cells)t.push(...r.trainableWeights);return t.concat(e)}return e}getWeights(){const e=[];for(const t of this.cells)e.push(...t.weights);return nF(e)}setWeights(e){const t=[];for(const r of this.cells){const i=r.weights.length,s=e.splice(i);for(let a=0;a<r.weights.length;++a)t.push([r.weights[a],s[a]])}d5(t)}}b5.className="StackedRNNCells";Gt(b5);function kg(n){const{ones:e,rate:t,training:r=!1,count:i=1,dropoutFunc:s}=n,a=()=>s!=null?s(e(),t):pte(e(),t),o=()=>e2(a,e,r);return!i||i<=1?Fa(o().clone()):Array(i).fill(void 0).map(o).map(c=>Fa(c.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var hFe=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class _ne extends Jg{constructor(e){if(e.unroll)throw new Er("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new Er("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new wa({ndim:5})]}call(e,t){return Ye(()=>{if(this.cell.dropoutMask!=null&&(rr(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(rr(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),t&&t.constants)throw new Ve("ConvRNN2D cell does not support constants");const r=t==null?null:t.mask,i=t==null?null:t.training,s=t==null?null:t.initialState;return super.call(e,{mask:r,training:i,initialState:s})})}computeOutputShape(e){let t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0],...t.slice(2)]),this.returnState&&(t=[t,...Array(2).fill([e[0],...t.slice(-3)])]),t}getInitialState(e){return Ye(()=>{const{stateSize:t}=this.cell,r=e.shape,i=this.computeSingleOutputShape(r),s=[i[0],...i.slice(2)],a=xa(s);return Array.isArray(t)?Array(t.length).fill(a):[a]})}resetStates(e,t=!1){Ye(()=>{if(!this.stateful)throw new eh("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,i=this.computeSingleOutputShape(r),s=[i[0],...i.slice(2)];if(r[0]==null)throw new Ve("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>xa(s)):this.states_=[xa(s)];else if(e==null)rr(this.states_),this.keptStates!=null&&(rr(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>xa(s)):this.states_[0]=xa(s);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new Ve(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);t?this.keptStates.push(this.states_.slice()):rr(this.states_);for(let o=0;o<this.states_.length;++o){const l=e[o],c=s;if(!Vr(l.shape,c))throw new Ve(`State ${o} is incompatible with layer ${this.name}: expected shape=${c}, received shape=${l.shape}`);this.states_[o]=l}}this.states_=this.states_.map(o=>Fa(o.clone()))})}computeSingleOutputShape(e){const{dataFormat:t,filters:r,kernelSize:i,padding:s,strides:a,dilationRate:o}=this.cell,l=t==="channelsFirst",c=e[l?3:2],u=e[l?4:3],d=ef(c,i[0],s,a[0],o[0]),h=ef(u,i[1],s,a[1],o[1]);return[...e.slice(0,2),...l?[r,d,h]:[d,h,r]]}}_ne.className="ConvRNN2D";class x5 extends S3{constructor(e){const{filters:t,kernelSize:r,strides:i,padding:s,dataFormat:a,dilationRate:o}=e;super(Object.assign(Object.assign({},e),{units:t})),this.filters=t,Pa(this.filters,"filters"),this.kernelSize=Hx(r,2,"kernelSize"),this.kernelSize.forEach(l=>Pa(l,"kernelSize")),this.strides=Hx(i||1,2,"strides"),this.strides.forEach(l=>Pa(l,"strides")),this.padding=s||"valid",su(this.padding),this.dataFormat=a||"channelsLast",Js(this.dataFormat),this.dilationRate=Hx(o||1,2,"dilationRate"),this.dilationRate.forEach(l=>Pa(l,"dilationRate"))}build(e){var t;e=si(e);const r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new Ve(`The channel dimension of the input should be defined. Found ${e[r]}`);const i=e[r],s=4,a=this.kernelSize.concat([i,this.filters*s]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const o=this.kernelSize.concat([this.filters,this.filters*s]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",o,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const c=this.biasInitializer,u=this.filters;l=new(t=class extends td{apply(h,p){const g=c.apply([u]),v=vc([u]),b=c.apply([u*2]);return r5([g,v,b])}},t.className="CustomInit",t)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*s],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,t){return Ye(()=>{if(e.length!==3)throw new Ve(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const r=t.training||!1,i=e[0],s=e[1],a=e[2],o=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=kg({ones:()=>ru(i),rate:this.dropout,training:r,count:o,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,c=(q,te,ne)=>!te||!te[ne]?q:ke(te[ne],q);let u=c(i,l,0),d=c(i,l,1),h=c(i,l,2),p=c(i,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=kg({ones:()=>ru(s),rate:this.recurrentDropout,training:r,count:o,dropoutFunc:this.dropoutFunc}));const g=this.recurrentDropoutMask;let v=c(s,g,0),b=c(s,g,1),x=c(s,g,2),C=c(s,g,3);const E=3,[_,M,R,L]=bc(this.kernel.read(),o,E),[$,N,I,k]=this.useBias?bc(this.bias.read(),o):[null,null,null,null];u=this.inputConv(u,_,$,this.padding),d=this.inputConv(d,M,N,this.padding),h=this.inputConv(h,R,I,this.padding),p=this.inputConv(p,L,k,this.padding);const[P,G,W,X]=bc(this.recurrentKernel.read(),o,E);v=this.recurrentConv(v,P),b=this.recurrentConv(b,G),x=this.recurrentConv(x,W),C=this.recurrentConv(C,X);const z=this.recurrentActivation.apply(Bt(u,v)),J=this.recurrentActivation.apply(Bt(d,b)),Q=Bt(ke(J,a),ke(z,this.activation.apply(Bt(h,x)))),Y=ke(this.recurrentActivation.apply(Bt(p,C)),this.activation.apply(Q));return[Y,Y,Q]})}getConfig(){const e=super.getConfig(),{units:t}=e,r=hFe(e,["units"]),i={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},r),i)}inputConv(e,t,r,i){const s=Rg(e,t,this.strides,i||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?mf(s,r,this.dataFormat):s}recurrentConv(e,t){return Rg(e,t,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}x5.className="ConvLSTM2DCell";Gt(x5);class Ene extends _ne{constructor(e){const t=new x5(e);super(Object.assign(Object.assign({},e),{cell:t}))}static fromConfig(e,t){return new e(t)}}Ene.className="ConvLSTM2D";Gt(Ene);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class S5 extends Dr{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const t=e.shape,r=[];for(let i=0;i<this.noiseShape.length;++i)r.push(this.noiseShape[i]==null?t[i]:this.noiseShape[i]);return r}call(e,t){return Ye(()=>{this.invokeCallHook(e,t);const r=Yn(e);if(0<this.rate&&this.rate<1){const i=t.training==null?!1:t.training,s=this.getNoiseShape(r);return e2(()=>pte(r,this.rate,s,this.seed),()=>r,i)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=super.getConfig();return Object.assign(e,t),e}dispose(){return super.dispose()}}S5.className="Dropout";Gt(S5);class Ane extends S5{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const t=e.shape;return[t[0],1,t[2]]}}Ane.className="SpatialDropout1D";Gt(Ane);class Tne extends Dr{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let t=null;e.batchSize!=null&&(t=e.batchSize),this.batchInputShape=[t,e.inputDim]}this.units=e.units,Pa(this.units,"units"),this.activation=Dg(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=ds(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=ds(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=Ea(e.kernelConstraint),this.biasConstraint=Ea(e.biasConstraint),this.kernelRegularizer=fs(e.kernelRegularizer),this.biasRegularizer=fs(e.biasRegularizer),this.activityRegularizer=fs(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=si(e);const t=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:t}}],this.built=!0}computeOutputShape(e){e=si(e);const t=e.slice();return t[t.length-1]=this.units,t}call(e,t){return Ye(()=>{this.invokeCallHook(e,t);const r=Yn(e),i=ote(this.activation.getClassName());let s;return i!=null?s=mh(r,this.kernel.read(),i,this.bias?this.bias.read():null):(s=mh(r,this.kernel.read()),this.bias!=null&&(s=mf(s,this.bias.read())),this.activation!=null&&(s=this.activation.apply(s))),s})}getConfig(){const e={units:this.units,activation:Ig(this.activation),useBias:this.useBias,kernelInitializer:Ss(this.kernelInitializer),biasInitializer:Ss(this.biasInitializer),kernelRegularizer:Xi(this.kernelRegularizer),biasRegularizer:Xi(this.biasRegularizer),activityRegularizer:Xi(this.activityRegularizer),kernelConstraint:_a(this.kernelConstraint),biasConstraint:_a(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}Tne.className="Dense";Gt(Tne);class Mne extends Dr{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=si(e);for(const t of e.slice(1))if(t==null)throw new Ve(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],gg(e,1)]}call(e,t){return Ye(()=>{this.invokeCallHook(e,t);let r=Yn(e);if(this.dataFormat==="channelsFirst"&&r.rank>1){const i=[0];for(let s=2;s<r.rank;++s)i.push(s);i.push(1),r=qr(r,i)}return q$e(r)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const t=super.getConfig();return Object.assign(e,t),e}}Mne.className="Flatten";Gt(Mne);class Rne extends Dr{constructor(e){super(e),this.supportsMasking=!0,this.activation=Dg(e.activation)}call(e,t){return Ye(()=>{this.invokeCallHook(e,t);const r=Yn(e);return this.activation.apply(r)})}getConfig(){const e={activation:Ig(this.activation)},t=super.getConfig();return Object.assign(e,t),e}}Rne.className="Activation";Gt(Rne);class Nne extends Dr{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,t){return Ye(()=>(e=Yn(e),W$e(e,this.n)))}getConfig(){const e={n:this.n},t=super.getConfig();return Object.assign(e,t),e}}Nne.className="RepeatVector";Gt(Nne);class Ine extends Dr{constructor(e){super(e),this.targetShape=e.targetShape;for(let t=0;t<this.targetShape.length;++t)this.isUnknown(this.targetShape[t])&&(this.targetShape[t]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,t){const r="Total size of new array must be unchanged.",i=t.slice();let s=1,a=null;for(let l=0;l<i.length;++l){const c=i[l];if(this.isUnknown(c))if(a===null)a=l;else throw new Ve("Can only specifiy one unknown dimension.");else s*=c}const o=gg(e);if(a!==null){if(s===0||o%s!==0)throw new Ve(r);i[a]=o/s}else if(o!==s)throw new Ve(r);return i}computeOutputShape(e){let t=!1;for(let r=0;r<e.length;++r)if(this.isUnknown(e[r])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,t){return Ye(()=>{this.invokeCallHook(e,t);const r=Yn(e),i=r.shape,s=i.slice(0,1).concat(this.fixUnknownDimension(i.slice(1),this.targetShape));return Fe(r,s)})}getConfig(){const e={targetShape:this.targetShape},t=super.getConfig();return Object.assign(e,t),e}}Ine.className="Reshape";Gt(Ine);class Dne extends Dr{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const t=af(1,e.dims.length+1);if(!Vr(e.dims.slice().sort(),t))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new wa({ndim:this.dims.length+1})]}computeOutputShape(e){e=si(e);const t=e.slice();return this.dims.forEach((r,i)=>{t[i+1]=e[r]}),t}call(e,t){return qr(Yn(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},t=super.getConfig();return Object.assign(e,t),e}}Dne.className="Permute";Gt(Dne);class kne extends Dr{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={maskValue:this.maskValue};return Object.assign(t,e),t}computeMask(e,t){const r=Yn(e);return iN(p1(r,this.maskValue),-1)}call(e,t){return Ye(()=>{this.invokeCallHook(e,t);const r=Yn(e),a=iN(p1(r,this.maskValue),-1,!0);return ke(r,nn(a,r.dtype))})}}kne.className="Masking";Gt(kne);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class One extends Dr{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let t=null;e.batchSize!=null&&(t=e.batchSize),e.inputLength==null?this.batchInputShape=[t,null]:this.batchInputShape=[t].concat(Ai(e.inputLength))}this.inputDim=e.inputDim,Pa(this.inputDim,"inputDim"),this.outputDim=e.outputDim,Pa(this.outputDim,"outputDim"),this.embeddingsInitializer=ds(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=fs(e.embeddingsRegularizer),this.activityRegularizer=fs(e.activityRegularizer),this.embeddingsConstraint=Ea(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,t){return Ye(()=>this.maskZero?(e=Yn(e),p1(e,Xr(e))):null)}computeOutputShape(e){if(e=si(e),this.inputLength==null)return[...e,this.outputDim];const t=Ai(this.inputLength);if(t.length!==e.length-1)throw new Ve(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let r=0;for(let i=0;i<t.length;++i){const s=t[i],a=e[i+1];if(s!=null&&a!=null&&s!==a)throw new Ve(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);s==null&&(t[r]=a),r++}}return[e[0],...t,this.outputDim]}call(e,t){return Ye(()=>{this.invokeCallHook(e,t);let r=Yn(e);r.dtype!=="int32"&&(r=ph(r,"int32"));const i=hte(this.embeddings.read(),Fe(r,[r.size]));return Fe(i,si(this.computeOutputShape(r.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Ss(this.embeddingsInitializer),embeddingsRegularizer:Xi(this.embeddingsRegularizer),activityRegularizer:Xi(this.activityRegularizer),embeddingsConstraint:_a(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=super.getConfig();return Object.assign(e,t),e}}One.className="Embedding";Gt(One);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Dv extends Dr{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new Er}computeElementwiseOpOutputShape(e,t){if(e==null||t==null)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(t.length===0)return e;const r=e.slice(0,e.length-t.length);for(let i=0;i<t.length;++i){const s=e[e.length-t.length+i],a=t[i];if(s==null||a==null||s<0||a<0)r.push(null);else if(s===1)r.push(a);else if(a===1)r.push(s);else{if(s!==a)throw new Ve("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));r.push(s)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[si(e)]),e=e,e.length<2)throw new Ve(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let t=[];for(const s of e)s!=null&&s[0]!==null&&t.push(s[0]);if(t=mg(t),t.length>1)throw new Ve(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let r=e[0]==null?null:e[0].slice(1);for(let s=1;s<e.length;++s){const a=e[s]==null?null:e[s].slice(1);r=this.computeElementwiseOpOutputShape(r,a)}const i=e.map(s=>s.length);e.indexOf(null)===-1&&mg(i).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,t){return Ye(()=>{if(e=e,this.reshapeRequired){const r=[],i=e.map(s=>s.rank);if(i.indexOf(null)===-1){const s=Ng(i);for(let a of e){const o=a.rank;for(let l=0;l<s-o;++l)a=ZE(a,1);r.push(a)}return this.mergeFunction(r)}else{let s=!1;for(const l of e){const c=l.rank;if(c==null){const u=l.shape,d=u[0],h=u.slice(1).concat([d]);let p=Fe(l,[d].concat(gg(u.slice(1))));p=qr(p,[1,0]),p=Fe(p,h),r.push(p),s=!0}else if(c>1){const u=af(1,c).concat([0]);r.push(qr(l,u)),s=!0}else r.push(l)}let a=this.mergeFunction(r);const o=a.rank;if(s){if(o==null){const l=a.shape,c=l.length,u=l[c-1],d=[u].concat(l.slice(0,l.length-1));a=Fe(qr(Fe(a,[-1,u]),[1,0]),d)}else if(o>1){const l=[o-1].concat(af(0,o-1));a=qr(a,l)}}return a}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let t;e[0]==null?t=null:t=e[0].slice(1);for(let i=1;i<e.length;++i){const s=e[i]==null?null:e[i].slice(1);t=this.computeElementwiseOpOutputShape(t,s)}let r=[];for(const i of e)i!=null&&i[0]!==null&&r.push(i[0]);return r=mg(r),r.length===1?t=r.concat(t):t=[null].concat(t),t}computeMask(e,t){return Ye(()=>{if(t==null)return null;if(!Array.isArray(t))throw new Ve("`mask` should be an Array");if(!Array.isArray(e))throw new Ve("`inputs` should be an Array");if(t.length!==e.length)throw new Ve(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${t.length})`);if(t.every(i=>i==null))return null;t=t.map(i=>i==null?i:Qa(i,0));let r=t[0];for(let i=1;i<t.length-1;++i)r=Eh(r,t[i]);return r})}}class Bne extends Dv{constructor(e){super(e)}mergeFunction(e){return Ye(()=>{let t=e[0].clone();for(let r=1;r<e.length;++r)t=Bt(t,e[r]);return t})}}Bne.className="Add";Gt(Bne);class $ne extends Dv{constructor(e){super(e)}mergeFunction(e){return Ye(()=>{let t=e[0].clone();for(let r=1;r<e.length;++r)t=ke(t,e[r]);return t})}}$ne.className="Multiply";Gt($ne);class Lne extends Dv{constructor(e){super(e)}mergeFunction(e){return Ye(()=>{let t=e[0].clone();for(let r=1;r<e.length;++r)t=Bt(t,e[r]);return ke(1/e.length,t)})}}Lne.className="Average";Gt(Lne);class Fne extends Dv{constructor(e){super(e)}mergeFunction(e){return Ye(()=>{let t=e[0];for(let r=1;r<e.length;++r)t=tm(t,e[r]);return t})}}Fne.className="Maximum";Gt(Fne);class Pne extends Dv{constructor(e){super(e)}mergeFunction(e){return Ye(()=>{let t=e[0];for(let r=1;r<e.length;++r)t=hv(t,e[r]);return t})}}Pne.className="Minimum";Gt(Pne);class Une extends Dv{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new Ve("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let t=!0;for(const i of e)if(i!=null){t=!1;break}if(t)return;const r=[];for(let i=0;i<e.length;++i){const s=e[i].slice();s.splice(this.axis,1);let a=!1;for(const o of r)if(Vr(o,s)){a=!0;break}a||r.push(s)}if(r.length>1)throw new Ve("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return Ye(()=>r5(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new Ve("A `Concatenate` layer should be called on a list of inputs.");const t=e,r=t[0].slice(),i=this.axis<0?r.length+this.axis:this.axis;for(const s of t.slice(1)){if(r[i]==null||s[i]==null){r[i]=null;break}r[i]+=s[i]}return r}computeMask(e,t){if(t==null)return null;if(!Array.isArray(t))throw new Ve("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new Ve("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new Ve(`Mismatch in the length of mask (${t.length}) and the legnth of inputs (${e.length})`);return Ye(()=>{let r=!0;if(t.forEach(a=>{if(a!=null){r=!1;return}}),r)return null;const i=[];for(let a=0;a<e.length;++a)t[a]==null?i.push(nn(ru(e[a]),"bool")):t[a].rank<e[a].rank?i.push(Qa(t[a],-1)):i.push(t[a]);const s=Os(i,this.axis);return GU(s,-1,!1)})}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}Une.className="Concatenate";Gt(Une);function Pw(n,e){for(;n<0;)n+=e;return n}function pFe(n,e,t){if(n.shape.length>3||e.shape.length>3)throw new Er("batchDot is not implemented for tensors of 4D or higher rank yet");if(de(n.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${n.shape.length}`),de(n.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof t=="number"&&(t=[t,t]),n.dtype==="complex64"||e.dtype==="complex64")throw new Er("batchDot is not implemented for complex64-type Tensors yet.");const r=n.shape.length,i=e.shape.length;t==null&&(t=[r-1,i-2]);const s=t;return Ye(()=>{let a;if(r>i){a=r-i;const l=[];for(let c=0;c<a;++c)l.push(1);e=Fe(e,e.shape.concat(l))}else if(i>r){a=i-r;const l=[];for(let c=0;c<a;++c)l.push(1);n=Fe(n,n.shape.concat(l))}else a=0;let o;if(n.shape.length===2&&e.shape.length===2)s[0]===s[1]?o=wn(ke(n,e),s[0]):o=wn(ke(qr(n,[1,0]),e),s[1]);else{const l=s[0]!==n.shape.length-1,c=s[1]===e.shape.length-1;o=Br(n,e,l,c)}if(a>0){let l;r>i?l=r+i-3:l=r-1;const c=[];for(let u=l;u<l+a;++u)c.push(u);o=Gs(o,c)}return o.shape.length===1&&(o=Qa(o,1)),o})}class zne extends Dv{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){de(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const t=e[0],r=e[1];if(t.length>3||r.length>3)throw new Er("Dot layer does not support tensors of 4D or higher rank yet.");const i=this.interpretAxes(t,r);if(t[i[0]]!==r[i[1]])throw new Ve(`Dimension incompatibility: ${t[i[0]]} !== ${r[i[1]]}`)}mergeFunction(e){if(e.length!==2)throw new Ve(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let t=e[0],r=e[1],i;return Array.isArray(this.axes)?i=this.axes.map((s,a)=>Pw(s,e[a].shape.length)):i=[Pw(this.axes,t.shape.length),Pw(this.axes,r.shape.length)],this.normalize&&(t=uN(t,i[0]),r=uN(r,i[1])),pFe(t,r,i)}interpretAxes(e,t){let r;return Array.isArray(this.axes)?r=this.axes:r=[Pw(this.axes,e.length),Pw(this.axes,t.length)],r}computeOutputShape(e){de(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const t=e[0].slice(),r=e[1].slice();if(t.length>3||r.length>3)throw new Er("Dot layer does not support tensors of 4D or higher rank yet.");const i=this.interpretAxes(t,r);t.splice(i[0],1),r.splice(i[1],1),r.splice(0,1);const s=t.concat(r);return s.length===1&&s.push(1),s}computeMask(e,t){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},t=super.getConfig();return Object.assign(e,t),e}}zne.className="Dot";Gt(zne);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Hne extends Dr{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={stddev:this.stddev};return Object.assign(t,e),t}call(e,t){return Ye(()=>{this.invokeCallHook(e,t);const r=Yn(e);return e2(()=>Bt(p3(r.shape,0,this.stddev),r),()=>r,t.training||!1)})}}Hne.className="GaussianNoise";Gt(Hne);class Vne extends Dr{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return Ye(()=>{this.invokeCallHook(e,t);const r=Yn(e);return this.rate>0&&this.rate<1?e2(()=>{const s=Math.sqrt(this.rate/(1-this.rate));return ke(r,p3(r.shape,1,s))},()=>r,t.training||!1):r})}}Vne.className="GaussianDropout";Gt(Vne);class Gne extends Dr{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||Yn(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return Ye(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(e);return e2(()=>{const s=Yn(e),o=-1.6732632423543772*1.0507009873554805;let l=Xg(Rv(r),this.rate);l=ph(l,"float32");const c=((1-this.rate)*(1+this.rate*o**2))**-.5,u=-c*o*this.rate,d=Bt(ke(s,l),ke(Bt(l,-1),o));return Bt(ke(d,c),u)},()=>Yn(e),t.training||!1)}return e})}}Gne.className="AlphaDropout";Gt(Gne);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function r_(n,e,t,r,i,s=.001){let a;if(n.rank===2)a=mQ(n,e,t,r,i,s);else if(n.rank===3)a=gQ(n,e,t,r,i,s);else if(n.rank===4)a=yQ(n,e,t,r,i,s);else throw new Er(`batchNormalization is not implemented for array of rank ${n.rank} yet`);return a}function mFe(n,e,t,r,i=.001){return Ye(()=>{const s=YD(n,r),a=s.mean,o=s.variance;return[r_(n,a,o,t,e,i),a,o]})}function gFe(n,e,t,r,i=.001){return Ye(()=>{const s=YD(n,r),a=s.mean,o=s.variance,l=[];for(const g of af(0,n.rank))r.indexOf(g)!==-1?l.push(1):l.push(n.shape[g]);const c=Fe(a,l),u=Fe(o,l),d=e==null?null:Fe(e,l),h=t==null?null:Fe(t,l);return[r_(n,c,u,h,d,i),a,o]})}function yFe(n,e,t,r,i=.001){return Vr(r.slice().sort(),af(0,n.rank-1))?mFe(n,e,t,r,i):gFe(n,e,t,r,i)}class Wne extends Dr{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=ds(e.betaInitializer||"zeros"),this.gammaInitializer=ds(e.gammaInitializer||"ones"),this.movingMeanInitializer=ds(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=ds(e.movingVarianceInitializer||"ones"),this.betaConstraint=Ea(e.betaConstraint),this.gammaConstraint=Ea(e.gammaConstraint),this.betaRegularizer=fs(e.betaRegularizer),this.gammaRegularizer=fs(e.gammaRegularizer)}build(e){e=si(e);const t=this.axis>=0?this.axis:this.axis+e.length,r=e[t];if(r==null)throw new Ve(`Axis ${t} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new wa({ndim:e.length,axes:{[t]:r}})];const i=[r];this.scale&&(this.gamma=this.addWeight("gamma",i,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",i,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",i,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",i,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,t){return Ye(()=>{const r=t.training==null?!1:t.training,i=Yn(e),s=i.shape,a=s.length,o=af(0,a),l=this.axis>=0?this.axis:this.axis+a;o.splice(l,1);const c=mv(1,a);c[l]=s[l];const u=o.slice();u.sort();const d=!Vr(u,af(0,a).slice(0,a-1)),h=()=>{if(d){const C=Fe(this.movingMean.read(),c),E=Fe(this.movingVariance.read(),c),_=this.center?Fe(this.beta.read(),c):null,M=this.scale?Fe(this.gamma.read(),c):null;return r_(i,C,E,_,M,this.epsilon)}else return r_(i,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return h();const[p,g,v]=yFe(i,this.gamma.read(),this.beta.read(),o,this.epsilon),b=(C,E,_)=>{Ye(()=>{const M=1-_,R=C.read(),L=ke(vn(R,E),M);C.write(vn(R,L))})};return(()=>{b(this.movingMean,g,this.momentum),b(this.movingVariance,v,this.momentum)})(),p})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Ss(this.betaInitializer),gammaInitializer:Ss(this.gammaInitializer),movingMeanInitializer:Ss(this.movingMeanInitializer),movingVarianceInitializer:Ss(this.movingVarianceInitializer),betaRegularizer:Xi(this.betaRegularizer),gammaRegularizer:Xi(this.gammaRegularizer),betaConstraint:_a(this.betaConstraint),gammaConstraint:_a(this.gammaConstraint)},t=super.getConfig();return Object.assign(e,t),e}}Wne.className="BatchNormalization";Gt(Wne);class jne extends Dr{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const t of this.axis)if(!Number.isInteger(t))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=ds(e.betaInitializer||"zeros"),this.gammaInitializer=ds(e.gammaInitializer||"ones"),this.betaRegularizer=fs(e.betaRegularizer),this.gammaRegularizer=fs(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=si(e);const t=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let s=0;s<this.axis.length;++s)this.axis[s]<0&&(this.axis[s]+=t);for(const s of this.axis)if(s<0||s>=t)throw new Error(`Invalid axis: ${s}`);if(this.axis.length!==mg(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(s=>e[s]),i=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,i):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,i):this.beta=null,this.built=!0}call(e,t){const r=Yn(e),i=r.shape,s=i.length;return Ye(()=>{let{mean:o,variance:l}=YD(r,this.axis,!0);const c=mv(1,s);for(const v of this.axis)c[v]=i[v];const u=v=>v!=null&&v.shape.length!==s?Fe(v,c):v;let d=this.scale?u(this.gamma.read()):null,h=this.center?u(this.beta.read()):null;const p=[],g=[];for(let v=0;v<s;++v)this.axis.indexOf(v)!==-1?(p.push(i[v]),g.push(1)):(p.push(1),g.push(i[v]));return o=zu(o,p),l=zu(l,p),d!=null&&(d=zu(d,g)),h!=null&&(h=zu(h,g)),r_(r,o,l,h,d,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Ss(this.betaInitializer),gammaInitializer:Ss(this.gammaInitializer),betaRegularizer:Xi(this.betaRegularizer),gammaRegularizer:Xi(this.gammaRegularizer)},t=super.getConfig();return Object.assign(e,t),e}}jne.className="LayerNormalization";Gt(jne);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function vFe(n,e,t){return Ye(()=>{if(n.rank!==4)throw new Ve(`temporalPadding expects input tensor to be 4-D, but received a ${n.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new Ve("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(t==null&&(t=of()),t!=="channelsLast"&&t!=="channelsFirst")throw new Ve(`Unknown data format: ${t}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return t==="channelsFirst"?r=[[0,0],[0,0],e[0],e[1]]:r=[[0,0],e[0],e[1],[0,0]],Kg(n,r)})}class qne extends Dr{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?of():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new Ve(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let t,r;if(typeof e.padding[0]=="number")t=[e.padding[0],e.padding[0]],r=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new Ve(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(t=e.padding[0],e.padding[1].length!==2)throw new Ve(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);r=e.padding[1]}this.padding=[t,r]}this.inputSpec=[new wa({ndim:4})]}computeOutputShape(e){e=si(e);let t,r;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?t=e[2]+this.padding[0][0]+this.padding[0][1]:t=null,e[3]!=null&&e[3]>=0?r=e[3]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],e[1],t,r]):(e[1]!=null&&e[1]>=0?t=e[1]+this.padding[0][0]+this.padding[0][1]:t=null,e[2]!=null&&e[2]>=0?r=e[2]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],t,r,e[3]])}call(e,t){return Ye(()=>vFe(Yn(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}qne.className="ZeroPadding2D";Gt(qne);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function w3(n,e,t,r,i,s){return Ye(()=>{Js(i),cte(s),su(r),t==null&&(t=[1,1]),r==null&&(r="valid"),i==null&&(i=of()),s==null&&(s="max"),n=g5(n,i);let a;const o=r==="same"?"same":"valid";return s==="max"?a=KD(n,e,t,o):a=zD(n,e,t,o),i==="channelsFirst"&&(a=qr(a,[0,3,1,2])),a})}function Xne(n,e,t,r,i,s){return Ye(()=>{Js(i),cte(s),su(r),t==null&&(t=[1,1,1]),r==null&&(r="valid"),i==null&&(i=of()),s==null&&(s="max"),n=dne(n,i);let a;const o=r==="same"?"same":"valid";return s==="max"?a=zQ(n,e,t,o):a=pQ(n,e,t,o),i==="channelsFirst"&&(a=qr(a,[0,4,1,2,3])),a})}class Kne extends Dr{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new Ve(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(Pa(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new Ve(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);Pa(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,su(this.padding),this.inputSpec=[new wa({ndim:3})]}computeOutputShape(e){e=si(e);const t=ef(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}call(e,t){return Ye(()=>{this.invokeCallHook(e,t),e=ZE(Yn(e),2);const r=this.poolingFunction(Yn(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return Gs(r,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=super.getConfig();return Object.assign(e,t),e}}class Yne extends Kne{constructor(e){super(e)}poolingFunction(e,t,r,i,s){return Js(s),su(i),w3(e,t,r,i,s,"max")}}Yne.className="MaxPooling1D";Gt(Yne);class Jne extends Kne{constructor(e){super(e)}poolingFunction(e,t,r,i,s){return Js(s),su(i),w3(e,t,r,i,s,"avg")}}Jne.className="AveragePooling1D";Gt(Jne);class Zne extends Dr{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new Ve(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];Pa(this.poolSize,"poolSize"),Pa(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Js(this.dataFormat),su(this.padding),this.inputSpec=[new wa({ndim:4})]}computeOutputShape(e){e=si(e);let t=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2];return t=ef(t,this.poolSize[0],this.padding,this.strides[0]),r=ef(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],t,r]:[e[0],t,r,e[3]]}call(e,t){return Ye(()=>(this.invokeCallHook(e,t),this.poolingFunction(Yn(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class Qne extends Zne{constructor(e){super(e)}poolingFunction(e,t,r,i,s){return Js(s),su(i),w3(e,t,r,i,s,"max")}}Qne.className="MaxPooling2D";Gt(Qne);class ere extends Zne{constructor(e){super(e)}poolingFunction(e,t,r,i,s){return Js(s),su(i),w3(e,t,r,i,s,"avg")}}ere.className="AveragePooling2D";Gt(ere);class tre extends Dr{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new Ve(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];Pa(this.poolSize,"poolSize"),Pa(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Js(this.dataFormat),su(this.padding),this.inputSpec=[new wa({ndim:5})]}computeOutputShape(e){e=si(e);let t=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],i=this.dataFormat==="channelsFirst"?e[4]:e[3];return t=ef(t,this.poolSize[0],this.padding,this.strides[0]),r=ef(r,this.poolSize[1],this.padding,this.strides[1]),i=ef(i,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],t,r,i]:[e[0],t,r,i,e[4]]}call(e,t){return Ye(()=>(this.invokeCallHook(e,t),this.poolingFunction(Yn(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class nre extends tre{constructor(e){super(e)}poolingFunction(e,t,r,i,s){return Js(s),su(i),Xne(e,t,r,i,s,"max")}}nre.className="MaxPooling3D";Gt(nre);class rre extends tre{constructor(e){super(e)}poolingFunction(e,t,r,i,s){return Js(s),su(i),Xne(e,t,r,i,s,"avg")}}rre.className="AveragePooling3D";Gt(rre);class ire extends Dr{constructor(e){super(e),this.inputSpec=[new wa({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,t){throw new Er}}class sre extends ire{constructor(e){super(e||{})}call(e,t){return Ye(()=>{const r=Yn(e);return Is(r,1)})}}sre.className="GlobalAveragePooling1D";Gt(sre);class are extends ire{constructor(e){super(e||{})}call(e,t){return Ye(()=>{const r=Yn(e);return Wu(r,1)})}}are.className="GlobalMaxPooling1D";Gt(are);class ore extends Dr{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Js(this.dataFormat),this.inputSpec=[new wa({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,t){throw new Er}getConfig(){const e={dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class lre extends ore{call(e,t){return Ye(()=>{const r=Yn(e);return this.dataFormat==="channelsLast"?Is(r,[1,2]):Is(r,[2,3])})}}lre.className="GlobalAveragePooling2D";Gt(lre);class cre extends ore{call(e,t){return Ye(()=>{const r=Yn(e);return this.dataFormat==="channelsLast"?Wu(r,[1,2]):Wu(r,[2,3])})}}cre.className="GlobalMaxPooling2D";Gt(cre);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class ure extends Dr{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=super.getConfig();return Object.assign(e,t),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,t,r={}){const i=t.layer,s=$p(i,r);delete t.layer;const a={layer:s};return Object.assign(a,t),new e(a)}}class dre extends ure{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=si(e),e.length<3)throw new Ve(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=si(e);const t=[e[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(t),i=e[1];return[r[0],i].concat(r.slice(1))}call(e,t){return Ye(()=>(e=Yn(e),xne((a,o)=>[Yn(this.layer.call(a,t)),[]],e,[],!1,null,null,!1,!0)[1]))}}dre.className="TimeDistributed";Gt(dre);function bFe(n){Iv(U$e,"BidirectionalMergeMode",n)}const xFe="concat";class fre extends ure{constructor(e){super(e);const t=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=t,this.forwardLayer=$p(r),t.goBackwards=t.goBackwards!==!0;const i={};if(i.className=e.layer.getClassName(),i.config=t,this.backwardLayer=$p(i),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?xFe:e.mergeMode,bFe(this.mergeMode),e.weights)throw new Er("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const t=e.length,r=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let t=this.forwardLayer.computeOutputShape(e);Array.isArray(t)&&Array.isArray(t[0])||(t=[t]),t=t;let r,i,s;return this.returnState&&(s=t.slice(1)),r=t[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,i=[r]):this.mergeMode==null?i=[r,r.slice()]:i=[r],this.returnState?this.mergeMode==null?i.concat(s).concat(s.slice()):[r].concat(s).concat(s.slice()):kl(i)}apply(e,t){let r=t==null?null:t.initialState,i=t==null?null:t.constants;t==null&&(t={});const s=bne(e,r,i,this.numConstants);if(e=s.inputs,r=s.initialState,i=s.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(r==null||r.length===0)&&i==null)return super.apply(e,t);const a=[],o=[];if(r!=null){const c=r.length;if(c%2>0)throw new Ve("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=r,a.push(...r);const u=r.map(d=>new wa({shape:d.shape}));this.forwardLayer.stateSpec=u.slice(0,c/2),this.backwardLayer.stateSpec=u.slice(c/2),o.push(...u)}if(i!=null)throw new Er("Support for constants in Bidirectional layers is not implemented yet.");const l=a[0]instanceof Ah;for(const c of a)if(c instanceof Ah!==l)throw new Ve("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const c=[e].concat(a),u=this.inputSpec.concat(o),d=this.inputSpec;this.inputSpec=u;const h=super.apply(c,t);return this.inputSpec=d,h}else return super.apply(e,t)}call(e,t){return Ye(()=>{const r=t.initialState;let i,s;if(r==null)i=this.forwardLayer.call(e,t),s=this.backwardLayer.call(e,t);else{const l=r.slice(0,r.length/2),c=r.slice(r.length/2);i=this.forwardLayer.call(e,Object.assign(t,{initialState:l})),s=this.backwardLayer.call(e,Object.assign(t,{initialState:c}))}let a;this.returnState&&(Array.isArray(i)&&(a=i.slice(1).concat(s.slice(1))),i=i[0],s=s[0]),this.returnSequences&&(s=Ku(s,1));let o;return this.mergeMode==="concat"?o=r5([i,s]):this.mergeMode==="sum"?o=Bt(i,s):this.mergeMode==="ave"?o=ke(.5,Bt(i,s)):this.mergeMode==="mul"?o=ke(i,s):this.mergeMode==null&&(o=[i,s]),this.returnState?this.mergeMode==null?o.concat(a):[o].concat(a):o})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){jy(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),jy(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,t){Array.isArray(t)&&(t=t[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[t,t]:r=t:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const s=this.forwardLayer.states.map(a=>null);return Array.isArray(r)?r.concat(s).concat(s):[r].concat(s).concat(s)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},t=super.getConfig();return Object.assign(e,t),e}static fromConfig(e,t){const r=$p(t.layer);if(delete t.layer,t.numConstants!=null)throw new Er("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const i=t;return i.layer=r,new e(i)}}fre.className="Bidirectional";Gt(fre);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class hre extends Dr{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return Ye(()=>(e=Yn(e),e.dtype!=="float32"&&(e=ph(e,"float32")),Bt(ke(e,this.scale),this.offset)))}}hre.className="Rescaling";Gt(hre);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:SFe,cropAndResize:wFe}=Zc;class pre extends Dr{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,t,r,i,s,a,o,l){return Ye(()=>{let c,u=!1;const d=t/a,h=r/o,p=(i+t)/a,g=(s+r)/o,v=[d,h,p,g],b=[];e.rank===3?(u=!0,c=Ec([e])):c=e;for(let M=0;M<c.shape[0];M++)b.push(v);const x=Zd(b,[b.length,4]),C=m1(0,b.length,1,"int32"),_=wFe(c,x,C,[i,s],"nearest");return ph(u?Yn(Yu(_)):_,l)})}upsize(e,t,r,i){return Ye(()=>{const s=SFe(e,[t,r]);return ph(s,i)})}call(e,t){return Ye(()=>{const r=Yn(e),i=r.dtype,s=r.shape,a=s[s.length-3],o=s[s.length-2];let l=0;a!==this.height&&(l=Math.floor((a-this.height)/2));let c=0;return o!==this.width&&(c=Math.floor((o-this.width)/2),c===0&&(c=1)),l>=0&&c>=0?this.centerCrop(r,l,c,this.height,this.width,a,o,i):this.upsize(e,this.height,this.width,i)})}getConfig(){const e={height:this.height,width:this.width},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){e=si(e);const t=e.length-3,r=e.length-2;return e[t]=this.height,e[r]=this.width,e}}pre.className="CenterCrop";Gt(pre);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function CFe(n,e,t,r){let i=Yn(n);if(i.dtype!=="int32"&&(i=ph(i,"int32")),e==="int")return i;const s=i.shape;if(i.rank===0&&(i=Qa(i,-1)),e==="oneHot"&&i.shape[i.shape.length-1]!==1&&(i=Qa(i,-1)),i.rank>2)throw new Ve(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${s} which would result in output rank ${i.rank}.`);const a=["multiHot","oneHot"].includes(e),o=i;let l;if(typeof r<"u"&&e==="count"?l=qL(o,r,t,a):l=qL(o,[],t,a),e!=="tfIdf")return l;if(r)return ke(l,r);throw new Ve("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class mre extends Dr{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){return e=si(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,t){return Ye(()=>{e=Yn(e),e.dtype!=="int32"&&(e=ph(e,"int32"));let r;if(typeof t.countWeights<"u"){if(this.outputMode!=="count")throw new Ve(`countWeights is not used when outputMode !== count.
              Received countWeights=${t.countWeights}`);r=Yn(t.countWeights)}const i=Wu(e),s=KC(e),a=Nc(this.numTokens,i).bufferSync().get(0),o=Xg(s,0).bufferSync().get(0);if(!(a&&o))throw new Ve(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return CFe(e,this.outputMode,this.numTokens,r)})}}mre.className="CategoryEncoding";Gt(mre);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const _Fe=["bilinear","nearest"],JW=new Set(_Fe);class gre extends Dr{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(JW.has(e.interpolation))this.interpolation=e.interpolation;else throw new Ve(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=si(e);const t=e[2];return[this.height,this.width,t]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return Ye(()=>{const r=[this.height,this.width];if(this.interpolation==="bilinear")return Zc.resizeBilinear(e,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return Zc.resizeNearestNeighbor(e,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...JW]} are supported`)})}}gre.className="Resizing";Gt(gre);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class yre{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}yre.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class vre extends Dr{constructor(e){super(e),this.randomGenerator=new yre(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},t=super.getConfig();return Object.assign(e,t),e}}vre.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const EFe=["bilinear","nearest"],ZW=new Set(EFe);class bre extends vre{constructor(e){super(e);const{factor:t,interpolation:r="bilinear"}=e;if(this.factor=t,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new Ve(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new Ve(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new Ve(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(ZW.has(r))this.interpolation=r;else throw new Ve(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){e=si(e);const t=e[2];return[this.imgHeight,-1,t]}call(e,t){return Ye(()=>{const r=Yn(e);this.imgHeight=r.shape[r.shape.length-3];const i=r.shape[r.shape.length-2];this.widthFactor=Rv([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let s=this.widthFactor.dataSync()[0]*i;s=Math.round(s);const a=[this.imgHeight,s];switch(this.interpolation){case"bilinear":return Zc.resizeBilinear(e,a);case"nearest":return Zc.resizeNearestNeighbor(e,a);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...ZW]} are supported`)}})}}bre.className="RandomWidth";Gt(bre);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AFe=it();AFe.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,n=>{n&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var cc;(function(n){n[n.DT_INVALID=0]="DT_INVALID",n[n.DT_FLOAT=1]="DT_FLOAT",n[n.DT_DOUBLE=2]="DT_DOUBLE",n[n.DT_INT32=3]="DT_INT32",n[n.DT_UINT8=4]="DT_UINT8",n[n.DT_INT16=5]="DT_INT16",n[n.DT_INT8=6]="DT_INT8",n[n.DT_STRING=7]="DT_STRING",n[n.DT_COMPLEX64=8]="DT_COMPLEX64",n[n.DT_INT64=9]="DT_INT64",n[n.DT_BOOL=10]="DT_BOOL",n[n.DT_QINT8=11]="DT_QINT8",n[n.DT_QUINT8=12]="DT_QUINT8",n[n.DT_QINT32=13]="DT_QINT32",n[n.DT_BFLOAT16=14]="DT_BFLOAT16",n[n.DT_QINT16=15]="DT_QINT16",n[n.DT_QUINT16=16]="DT_QUINT16",n[n.DT_UINT16=17]="DT_UINT16",n[n.DT_COMPLEX128=18]="DT_COMPLEX128",n[n.DT_HALF=19]="DT_HALF",n[n.DT_RESOURCE=20]="DT_RESOURCE",n[n.DT_VARIANT=21]="DT_VARIANT",n[n.DT_UINT32=22]="DT_UINT32",n[n.DT_UINT64=23]="DT_UINT64",n[n.DT_FLOAT_REF=101]="DT_FLOAT_REF",n[n.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",n[n.DT_INT32_REF=103]="DT_INT32_REF",n[n.DT_UINT8_REF=104]="DT_UINT8_REF",n[n.DT_INT16_REF=105]="DT_INT16_REF",n[n.DT_INT8_REF=106]="DT_INT8_REF",n[n.DT_STRING_REF=107]="DT_STRING_REF",n[n.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",n[n.DT_INT64_REF=109]="DT_INT64_REF",n[n.DT_BOOL_REF=110]="DT_BOOL_REF",n[n.DT_QINT8_REF=111]="DT_QINT8_REF",n[n.DT_QUINT8_REF=112]="DT_QUINT8_REF",n[n.DT_QINT32_REF=113]="DT_QINT32_REF",n[n.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",n[n.DT_QINT16_REF=115]="DT_QINT16_REF",n[n.DT_QUINT16_REF=116]="DT_QUINT16_REF",n[n.DT_UINT16_REF=117]="DT_UINT16_REF",n[n.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",n[n.DT_HALF_REF=119]="DT_HALF_REF",n[n.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",n[n.DT_VARIANT_REF=121]="DT_VARIANT_REF",n[n.DT_UINT32_REF=122]="DT_UINT32_REF",n[n.DT_UINT64_REF=123]="DT_UINT64_REF"})(cc||(cc={}));var QW;(function(n){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(n.CheckpointFormatVersion||(n.CheckpointFormatVersion={}))})(QW||(QW={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TFe={};function xre(n){return TFe[n]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z(n,e,t,r,i){const s=e.inputParams[n];if(s&&s.inputIndexStart!==void 0){const o=s.inputIndexStart,l=s.inputIndexEnd===0?void 0:s.inputIndexEnd===void 0?o+1:s.inputIndexEnd,c=o<0?e.inputNames.length+o:o;if(s.type==="tensor")return eo(e.inputNames[c],t,r,i);if(s.type==="tensors"){const h=e.inputs.slice(o,l);return e.inputNames.slice(o,l).filter((g,v)=>{var b;return((b=h[v])===null||b===void 0?void 0:b.op)!=="NoOp"}).map(g=>eo(g,t,r,i))}const u=eo(e.inputNames[c],t,r,i),d=u.dataSync();return s.type==="number"?d[0]:Gu(u.shape,d)}const a=e.attrParams[n];return a&&a.value}function eo(n,e,t,r){const[i,s]=dc(n,t);if(r!=null){const o=r.getHashTableHandleByName(i);if(o!=null)return o}const a=t.currentContextIds.find(o=>!!e[mN(i,o)]);return a!==void 0?e[mN(i,a)][s]:void 0}function e7(n,e,t){return e[mN(n,t.currentContextId)]}function wp(n,e){const[t,r,i]=dc(n,e);return[mN(t,e&&e.currentContextId),r,i]}function mN(n,e){return e?`${n}-${e}`:n}function dc(n,e){if(n==="")return["",0,void 0];const t=e!=null&&e.parseNodeNameCache!=null;if(t){const s=e.parseNodeNameCache.get(n);if(s!=null)return s}const r=n.split(":");let i;if(r.length===1)i=[n,0,void 0];else{const s=r[0],a=r.length===3?r[1]:void 0,o=Number(r[r.length-1]);i=[s,o,a]}return t&&e.parseNodeNameCache.set(n,i),i}function TM(n,e,t){let r=Z("pad",n,e,t);if(r==="explicit"){r=Z("explicitPaddings",n,e,t);const i=[[0,0],[0,0],[0,0],[0,0]];for(let s=0;s<4;s++)i[s][0]=r[s*2],i[s][1]=r[s*2+1];return i}return r}function Cp(n){return n.kept?n:Bp(n)}/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MFe=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],RFe=Object.freeze(Object.defineProperty({__proto__:null,json:MFe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NFe=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],IFe=Object.freeze(Object.defineProperty({__proto__:null,json:NFe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DFe=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],kFe=Object.freeze(Object.defineProperty({__proto__:null,json:DFe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OFe=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],BFe=Object.freeze(Object.defineProperty({__proto__:null,json:OFe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Fe=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],LFe=Object.freeze(Object.defineProperty({__proto__:null,json:$Fe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FFe=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],PFe=Object.freeze(Object.defineProperty({__proto__:null,json:FFe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UFe=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],zFe=Object.freeze(Object.defineProperty({__proto__:null,json:UFe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HFe=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],VFe=Object.freeze(Object.defineProperty({__proto__:null,json:HFe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GFe=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],WFe=Object.freeze(Object.defineProperty({__proto__:null,json:GFe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jFe=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],qFe=Object.freeze(Object.defineProperty({__proto__:null,json:jFe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XFe=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],KFe=Object.freeze(Object.defineProperty({__proto__:null,json:XFe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YFe=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],JFe=Object.freeze(Object.defineProperty({__proto__:null,json:YFe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZFe=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],QFe=Object.freeze(Object.defineProperty({__proto__:null,json:ZFe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ePe=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],tPe=Object.freeze(Object.defineProperty({__proto__:null,json:ePe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nPe=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],rPe=Object.freeze(Object.defineProperty({__proto__:null,json:nPe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iPe=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],sPe=Object.freeze(Object.defineProperty({__proto__:null,json:iPe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aPe=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],oPe=Object.freeze(Object.defineProperty({__proto__:null,json:aPe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lPe=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],cPe=Object.freeze(Object.defineProperty({__proto__:null,json:lPe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uPe=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],dPe=Object.freeze(Object.defineProperty({__proto__:null,json:uPe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class t7{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[RFe,IFe,kFe,BFe,LFe,PFe,zFe,VFe,WFe,qFe,KFe,JFe,QFe,tPe,rPe,sPe,oPe,cPe,dPe],t=[].concat(...e.map(r=>r.json));this.opMappers=t.reduce((r,i)=>(r[i.tfOpName]=i,r),{})}transformGraph(e,t={}){const r=e.node,i=[],s=[],a=[],o=r.reduce((v,b)=>(v[b.name]=this.mapNode(b),b.op.startsWith("Placeholder")?i.push(v[b.name]):b.op==="Const"?s.push(v[b.name]):(b.input==null||b.input.length===0)&&a.push(v[b.name]),v),{});let l=[];const c=[];let u={},d={};t!=null&&(u=this.mapSignatureEntries(t.inputs),d=this.mapSignatureEntries(t.outputs));const h=Object.keys(o);h.forEach(v=>{const b=o[v];b.inputNames.forEach((x,C)=>{const[E,,_]=wp(x),M=o[E];if(M.outputs!=null){const R=M.outputs.indexOf(_);if(R!==-1){const L=`${E}:${R}`;b.inputNames[C]=L}}b.inputs.push(M),M.children.push(b)})}),Object.keys(d).length===0?h.forEach(v=>{const b=o[v];b.children.length===0&&c.push(b)}):Object.keys(d).forEach(v=>{const[b]=wp(v),x=o[b];x!=null&&(x.signatureKey=d[v],c.push(x))}),Object.keys(u).length>0?Object.keys(u).forEach(v=>{const[b]=wp(v),x=o[b];x&&(x.signatureKey=u[v],l.push(x))}):l=i;let p={};e.library!=null&&e.library.function!=null&&(p=e.library.function.reduce((v,b)=>(v[b.signature.name]=this.mapFunction(b),v),{}));const g={nodes:o,inputs:l,outputs:c,weights:s,placeholders:i,signature:t,functions:p};return a.length>0&&(g.initNodes=a),g}mapSignatureEntries(e){return Object.keys(e||{}).reduce((t,r)=>(t[e[r].name]=r,t),{})}mapNode(e){const t=xre(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});const r={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map(i=>i.startsWith("^")?i.slice(1):i),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return t.inputs!=null&&(r.inputParams=t.inputs.reduce((i,s)=>(i[s.name]={type:s.type,inputIndexStart:s.start,inputIndexEnd:s.end},i),{})),t.attrs!=null&&(r.attrParams=t.attrs.reduce((i,s)=>{const a=s.type;let o;switch(s.type){case"string":o=lF(e.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=lF(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"string[]":o=mF(e.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=mF(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"number":o=uF(e.attr,s.tfName,s.defaultValue||0),o===void 0&&s.tfDeprecatedName&&(o=uF(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"number[]":o=pF(e.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=pF(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"bool":o=cF(e.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=cF(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"bool[]":o=yF(e.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=yF(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"shape":o=hF(e.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=hF(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"shape[]":o=gF(e.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=gF(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"dtype":o=dF(e.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=dF(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"dtype[]":o=fF(e.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=fF(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"func":o=n7(e.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=n7(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${s.type} for op: ${e.op}`)}return i[s.name]={value:o,type:a},i},{})),r}mapFunction(e){const t=e.nodeDef,r=[],i=[];let s={};t!=null&&(s=t.reduce((d,h)=>(d[h.name]=this.mapNode(h),h.op==="Const"&&i.push(d[h.name]),d),{}));const a=[],o=[];e.signature.inputArg.forEach(d=>{const[h]=wp(d.name),p={name:h,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:w5(d.type),type:"dtype"}},children:[]};p.signatureKey=d.name,a.push(p),s[h]=p}),Object.keys(s).forEach(d=>{const h=s[d];h.inputNames.forEach((p,g)=>{const[v,,b]=wp(p),x=s[v];if(x.outputs!=null){const C=x.outputs.indexOf(b);if(C!==-1){const E=`${v}:${C}`;h.inputNames[g]=E}}h.inputs.push(x),x.children.push(h)})});const c=e.ret;e.signature.outputArg.forEach(d=>{const[h,p]=wp(c[d.name]),g=s[h];g!=null&&(g.defaultOutput=p,o.push(g))});const u=this.mapArgsToSignature(e);return{nodes:s,inputs:a,outputs:o,weights:i,placeholders:r,signature:u}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((t,r)=>(t[r.name]=this.mapArgToTensorInfo(r),t),{}),outputs:e.signature.outputArg.reduce((t,r)=>(t[r.name]=this.mapArgToTensorInfo(r,e.ret),t),{})}}mapArgToTensorInfo(e,t){let r=e.name;return t!=null&&(r=t[r]),{name:r,dtype:e.type}}}function fPe(n){const e=it().global;if(typeof e.atob<"u")return e.atob(n);if(typeof Buffer<"u")return new Buffer(n,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function Sre(n,e){const t=Array.isArray(n)?String.fromCharCode.apply(null,n):fPe(n);return e?t:t.toLowerCase()}function lF(n,e,t,r=!1){const i=n[e];return i!=null?Sre(i.s,r):t}function cF(n,e,t){const r=n[e];return r?r.b:t}function uF(n,e,t){const r=n[e]||{},i=r.i!=null?r.i:r.f!=null?r.f:t;return typeof i=="number"?i:parseInt(i,10)}function w5(n){switch(typeof n=="string"&&(n=cc[n]),n){case cc.DT_FLOAT:case cc.DT_HALF:return"float32";case cc.DT_INT32:case cc.DT_INT64:case cc.DT_INT8:case cc.DT_UINT8:return"int32";case cc.DT_BOOL:return"bool";case cc.DT_DOUBLE:return"float32";case cc.DT_STRING:return"string";case cc.DT_COMPLEX64:case cc.DT_COMPLEX128:return"complex64";default:return null}}function n7(n,e,t){const r=n[e];return r&&r.func?r.func.name:t}function dF(n,e,t){const r=n[e];return r&&r.type?w5(r.type):t}function fF(n,e,t){const r=n[e];return r&&r.list&&r.list.type?r.list.type.map(i=>w5(i)):t}function wre(n){if(!n.unknownRank)return n.dim!=null?n.dim.map(e=>typeof e.size=="number"?e.size:parseInt(e.size,10)):[]}function hF(n,e,t){const r=n[e];return r&&r.shape?wre(r.shape):t}function pF(n,e,t){const r=n[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(i=>typeof i=="number"?i:parseInt(i,10)):t}function mF(n,e,t,r=!1){const i=n[e];return i&&i.list&&i.list.s?i.list.s.map(s=>Sre(s,r)):t}function gF(n,e,t){const r=n[e];return r&&r.list&&r.list.shape?r.list.shape.map(i=>wre(i)):t}function yF(n,e,t){const r=n[e];return r&&r.list&&r.list.b?r.list.b:t}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hPe{constructor(e,t,r){this.node=e,this.tensorMap=t,this.context=r,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(i=>this.getInput(i)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((i,s)=>(i[s]=this.getAttr(s),i),{}))}getInput(e){return eo(e,this.tensorMap,this.context)}getAttr(e,t){const r=this.node.rawAttrs[e];if(r.tensor!=null)return eo(e,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return uF(this.node.rawAttrs,e,t);if(r.s!=null)return lF(this.node.rawAttrs,e,t);if(r.b!=null)return cF(this.node.rawAttrs,e,t);if(r.shape!=null)return hF(this.node.rawAttrs,e,t);if(r.type!=null)return dF(this.node.rawAttrs,e,t);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return pF(this.node.rawAttrs,e,t);if(r.list.s!=null)return mF(this.node.rawAttrs,e,t);if(r.list.shape!=null)return gF(this.node.rawAttrs,e,t);if(r.list.b!=null)return yF(this.node.rawAttrs,e,t);if(r.list.type!=null)return fF(this.node.rawAttrs,e,t)}return t}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const co=Object.freeze(Object.defineProperty({__proto__:null,OP_SCOPE_SUFFIX:zZ,abs:va,acos:aQ,acosh:oQ,add:Bt,addN:MMe,all:GU,any:iN,argMax:f1,argMin:lQ,asin:cQ,asinh:uQ,atan:dQ,atan2:fQ,atanh:hQ,avgPool:zD,avgPool3d:pQ,basicLSTMCell:JMe,batchNorm:HE,batchNorm2d:mQ,batchNorm3d:gQ,batchNorm4d:yQ,batchToSpaceND:HD,bincount:vQ,bitwiseAnd:aRe,booleanMaskAsync:GDe,broadcastArgs:lRe,broadcastTo:Ux,buffer:Ar,cast:nn,ceil:bQ,clipByValue:zl,clone:Bp,complex:Ag,concat:Os,concat1d:xQ,concat2d:SQ,concat3d:wQ,concat4d:CQ,conv1d:jU,conv2d:Rg,conv2dTranspose:XU,conv3d:_Q,conv3dTranspose:AQ,cos:VD,cosh:KU,cosineWindow:xz,cumprod:sN,cumsum:YU,denseBincount:qL,depthToSpace:TQ,depthwiseConv2d:VE,diag:IRe,dilation2d:MQ,div:mn,divNoNan:RQ,dot:NQ,dropout:nee,einsum:_x,elu:GE,enclosingPowerOfTwo:ree,ensureShape:zRe,equal:sf,erf:JU,euclideanNorm:kQ,exp:nl,expandDims:Qa,expm1:OQ,eye:QU,fft:r3,fill:G1,floor:jE,floorDiv:VU,fused:f3e,gather:qE,gatherND:e3e,greater:Nc,greaterEqual:Xg,ifft:QC,imag:GD,image:Zc,inTopKAsync:i3e,irfft:pz,isFinite:BQ,isInf:$Q,isNaN:LQ,leakyRelu:WD,less:YC,lessEqual:Mv,linalg:dee,linspace:hNe,localResponseNormalization:FQ,log:nu,log1p:jD,logSigmoid:PQ,logSoftmax:ez,logSumExp:qD,logicalAnd:Eh,logicalNot:XD,logicalOr:tz,logicalXor:UQ,losses:Vke,lowerBound:RNe,matMul:Br,max:Wu,maxPool:KD,maxPool3d:zQ,maxPoolWithArgmax:kNe,maximum:tm,mean:Is,meshgrid:$Ne,min:KC,minimum:hv,mirrorPad:HQ,mod:VQ,moments:YD,movingAverage:qDe,mul:ke,multiRNNCell:HNe,multinomial:GNe,neg:is,norm:WE,notEqual:p1,oneHot:rz,ones:vc,onesLike:ru,op:Ie,outerProduct:KNe,pad:Kg,pad1d:ZNe,pad2d:eIe,pad3d:nIe,pad4d:iIe,pool:GQ,pow:Up,prelu:ZD,print:sQ,prod:WQ,raggedGather:fIe,raggedRange:pIe,raggedTensorToTensor:gIe,rand:vIe,randomGamma:UIe,randomNormal:sz,randomStandardNormal:VIe,randomUniform:Rv,randomUniformInt:jIe,range:m1,real:JC,reciprocal:jQ,relu:Ih,relu6:az,reshape:Fe,reverse:Ku,reverse1d:QIe,reverse2d:tDe,reverse3d:rDe,reverse4d:sDe,rfft:i3,round:oz,rsqrt:lz,scalar:$n,scatterND:KDe,searchSorted:nz,selu:cz,separableConv2d:uz,setdiff1dAsync:dDe,sigmoid:Qd,sign:qQ,signal:Hke,sin:dz,sinh:fz,slice:Kn,slice1d:e3,slice2d:hz,slice3d:t3,slice4d:ZC,softmax:n3,softplus:W1,spaceToBatchND:JD,sparse:Gke,sparseToDense:ZDe,spectral:zke,split:bc,sqrt:ao,square:qi,squaredDifference:mz,squeeze:Gs,stack:Ec,step:j1,stridedSlice:XQ,string:Wke,sub:vn,sum:wn,tan:KQ,tanh:fv,tensor:Zd,tensor1d:ca,tensor2d:Wy,tensor3d:YQ,tensor4d:IDe,tensor5d:DDe,tensor6d:kDe,tensorScatterUpdate:BDe,tile:zu,topk:ZQ,transpose:qr,truncatedNormal:yz,unique:QQ,unsortedSegmentSum:vz,unstack:Yu,upperBound:zDe,variable:eee,where:Ro,whereAsync:tee,zeros:xa,zerosLike:Xr},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pPe=(n,e,t,r=co)=>{switch(n.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(Z("a",n,e,t),Z("b",n,e,t))];case"AddN":return[r.addN(Z("tensors",n,e,t))];case"FloorMod":case"Mod":return[r.mod(Z("a",n,e,t),Z("b",n,e,t))];case"Mul":return[r.mul(Z("a",n,e,t),Z("b",n,e,t))];case"RealDiv":case"Div":return[r.div(Z("a",n,e,t),Z("b",n,e,t))];case"DivNoNan":return[r.divNoNan(Z("a",n,e,t),Z("b",n,e,t))];case"FloorDiv":return[r.floorDiv(Z("a",n,e,t),Z("b",n,e,t))];case"Sub":return[r.sub(Z("a",n,e,t),Z("b",n,e,t))];case"Minimum":return[r.minimum(Z("a",n,e,t),Z("b",n,e,t))];case"Maximum":return[r.maximum(Z("a",n,e,t),Z("b",n,e,t))];case"Pow":return[r.pow(Z("a",n,e,t),Z("b",n,e,t))];case"SquaredDifference":return[r.squaredDifference(Z("a",n,e,t),Z("b",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mPe=(n,e,t,r=co)=>{switch(n.op){case"Abs":case"ComplexAbs":return[r.abs(Z("x",n,e,t))];case"Acos":return[r.acos(Z("x",n,e,t))];case"Acosh":return[r.acosh(Z("x",n,e,t))];case"Asin":return[r.asin(Z("x",n,e,t))];case"Asinh":return[r.asinh(Z("x",n,e,t))];case"Atan":return[r.atan(Z("x",n,e,t))];case"Atan2":return[r.atan2(Z("x",n,e,t),Z("y",n,e,t))];case"Atanh":return[r.atanh(Z("x",n,e,t))];case"Ceil":return[r.ceil(Z("x",n,e,t))];case"Complex":return[r.complex(Z("real",n,e,t),Z("imag",n,e,t))];case"Cos":return[r.cos(Z("x",n,e,t))];case"Cosh":return[r.cosh(Z("x",n,e,t))];case"Elu":return[r.elu(Z("x",n,e,t))];case"Erf":return[r.erf(Z("x",n,e,t))];case"Exp":return[r.exp(Z("x",n,e,t))];case"Expm1":return[r.expm1(Z("x",n,e,t))];case"Floor":return[r.floor(Z("x",n,e,t))];case"Log":return[r.log(Z("x",n,e,t))];case"Log1p":return[r.log1p(Z("x",n,e,t))];case"Imag":return[r.imag(Z("x",n,e,t))];case"Neg":return[r.neg(Z("x",n,e,t))];case"Reciprocal":return[r.reciprocal(Z("x",n,e,t))];case"Real":return[r.real(Z("x",n,e,t))];case"Relu":return[r.relu(Z("x",n,e,t))];case"Round":return[r.round(Z("x",n,e,t))];case"Selu":return[r.selu(Z("x",n,e,t))];case"Sigmoid":return[r.sigmoid(Z("x",n,e,t))];case"Sin":return[r.sin(Z("x",n,e,t))];case"Sign":return[r.sign(Z("x",n,e,t))];case"Sinh":return[r.sinh(Z("x",n,e,t))];case"Softplus":return[r.softplus(Z("x",n,e,t))];case"Sqrt":return[r.sqrt(Z("x",n,e,t))];case"Square":return[r.square(Z("x",n,e,t))];case"Tanh":return[r.tanh(Z("x",n,e,t))];case"Tan":return[r.tan(Z("x",n,e,t))];case"ClipByValue":return[r.clipByValue(Z("x",n,e,t),Z("clipValueMin",n,e,t),Z("clipValueMax",n,e,t))];case"Relu6":return[r.relu6(Z("x",n,e,t))];case"Rsqrt":return[r.rsqrt(eo(n.inputNames[0],e,t))];case"LeakyRelu":return[r.leakyRelu(Z("x",n,e,t),Z("alpha",n,e,t))];case"Prelu":return[r.prelu(Z("x",n,e,t),Z("alpha",n,e,t))];case"IsNan":return[r.isNaN(eo(n.inputNames[0],e,t))];case"IsInf":return[r.isInf(eo(n.inputNames[0],e,t))];case"IsFinite":return[r.isFinite(eo(n.inputNames[0],e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iu(n,e,t=""){if(!(typeof n=="number"||typeof e=="number")){de(n.length===e.length,()=>t+` Shapes ${n} and ${e} must match`);for(let r=0;r<n.length;r++){const i=n[r],s=e[r];de(i<0||s<0||i===s,()=>t+` Shapes ${n} and ${e} must match`)}}}function r7(n){return!(typeof n=="number"||n.some(e=>e<0))}function Uw(n,e,t){let r=vF(n,t);const i=!r7(r);if(i&&e.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(i&&e.forEach(s=>{r=vF(s.shape,r)}),!r7(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function vF(n,e){if(typeof n=="number")return e;if(typeof e=="number")return n;if(n.length!==e.length)throw new Error(`Incompatible ranks during merge: ${n} vs. ${e}`);const t=[];for(let r=0;r<n.length;++r){const i=n[r],s=e[r];if(i>=0&&s>=0&&i!==s)throw new Error(`Incompatible shape during merge: ${n} vs. ${e}`);t[r]=i>=0?i:s}return t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gPe{constructor(e,t,r,i,s,a,o){this.name=e,this.dtype=t,this.maxSize=r,this.elementShape=i,this.identicalElementShapes=s,this.dynamicSize=a,this.clearAfterRead=o,this.tensors=[],this.closed_=!1,this.idTensor=$n(0),Fa(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(t=>{(e==null||!e.has(t.tensor.id))&&t.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const t=this.tensors[e];if(t.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}readMany(e){return e.map(t=>this.read(t))}write(e,t){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const r=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${t.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=t.shape),Iu(this.elementShape,t.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);r.tensor=t,Fa(t),r.written=!0,this.tensors[e]=r}writeMany(e,t){if(e.length!==t.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${t.length}.`);e.forEach((r,i)=>this.write(r,t[i]))}gather(e,t){if(t&&t!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${t}`);if(e)e=e.slice(0,this.size());else{e=[];for(let i=0;i<this.size();i++)e.push(i)}if(e.length===0)return Zd([],[0].concat(this.elementShape));const r=this.readMany(e);return Iu(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),Ec(r,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return Zd([],[0].concat(this.elementShape));const t=[];for(let i=0;i<this.size();i++)t.push(i);const r=this.readMany(t);return Iu(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),Os(r,0)}scatter(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const r=Math.max(...e);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(e,Yu(t,0))}split(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);let r=0;const i=e.map(l=>(r+=l,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${t.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const s=r===0?0:t.size/r,a=[];Ye(()=>{t=Fe(t,[1,r,s]);for(let l=0;l<e.length;++l){const u=[0,l===0?0:i[l-1],0],d=[1,e[l],s];a[l]=Fe(Kn(t,u,d),this.elementShape)}return a});const o=[];for(let l=0;l<e.length;l++)o[l]=l;this.writeMany(o,a)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gv{get id(){return this.idTensor.id}constructor(e,t,r,i=-1){this.tensors=e,this.elementShape=t,this.elementDtype=r,e!=null&&e.forEach(s=>{if(r!==s.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${s.dtype}`);Iu(t,s.shape,"TensorList shape mismatch: "),Fa(s)}),this.idTensor=$n(0),this.maxNumElements=i,Fa(this.idTensor)}copy(){return new gv([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(t=>{(e==null||!e.has(t.id))&&t.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,t,r=-1){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);Iu(e,this.elementShape,"TensorList shape mismatch: ");const i=Uw(this.elementShape,this.tensors,e);return Ye(()=>{const s=this.tensors.map(a=>Fe(a,i));return Ec(s,0)})}popBack(e,t){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const r=Uw(this.elementShape,this.tensors,e),i=this.tensors.pop();return i.kept=!1,Iu(i.shape,e,"TensorList shape mismatch: "),Fe(i,r)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(Iu(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Fa(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const t=new gv([],this.elementShape,this.elementDtype,this.maxNumElements);t.tensors.length=e;for(let r=0;r<Math.min(this.tensors.length,e);++r)t.tensors[r]=this.tensors[r];return t}getItem(e,t,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(this.tensors[e]==null)throw new Error(`element at index ${e} is null.`);Iu(this.tensors[e].shape,t,"TensorList shape mismatch: ");const i=Uw(this.elementShape,this.tensors,t);return Fe(this.tensors[e],i)}setItem(e,t){if(t.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);Iu(this.elementShape,t.shape,"TensorList shape mismatch: "),Fa(t),this.tensors[e]!=null&&(this.tensors[e].kept=!1),this.tensors[e]=t}gather(e,t,r){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);Iu(this.elementShape,r,"TensorList shape mismatch: "),e=e.slice(0,this.size());const i=Uw(this.elementShape,this.tensors,r);return e.length===0?Zd([],[0].concat(i)):Ye(()=>{const s=e.map(a=>Fe(this.tensors[a],i));return Ec(s,0)})}concat(e,t){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);Iu(this.elementShape,t,"TensorList shape mismatch: ");const r=Uw(this.elementShape,this.tensors,t);return this.size()===0?Zd([],[0].concat(r)):Ye(()=>{const i=this.tensors.map(s=>Fe(s,r));return Os(i,0)})}}function yPe(n,e,t){const r=n.dtype;if(n.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${n.shape}`);if(n.dtype!==t)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${t}`);const i=n.shape.slice(1);Iu(i,e,"TensorList shape mismatch: ");const s=Yu(n);return new gv(s,e,r)}function vPe(n,e,t,r){return new gv([],n,e,r)}function bPe(n,e,t,r){if(e.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${n.shape[0]}`);const i=Math.max(...e);if(r!=null&&r!==-1&&i>=r)throw new Error(`Max index must be < array size (${i}  vs. ${r})`);const s=new gv([],t,n.dtype,r),a=Yu(n,0);return e.forEach((o,l)=>{s.setItem(o,a[l])}),s}function xPe(n,e,t){let r=0;const i=e.map(u=>(r+=u,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);const s=n.shape.slice(1),a=vF(s,t),o=r===0?0:n.size/r,l=Ye(()=>{const u=[];n=Fe(n,[1,r,o]);for(let d=0;d<e.length;++d){const p=[0,d===0?0:i[d-1],0],g=[1,e[d],o];u[d]=Fe(Kn(n,p,g),a)}return n.dispose(),u}),c=new gv([],t,n.dtype,e.length);for(let u=0;u<l.length;u++)c.setItem(u,l[u]);return c}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SPe=async(n,e,t)=>{switch(n.op){case"If":case"StatelessIf":{const r=Z("thenBranch",n,e,t),i=Z("elseBranch",n,e,t),s=Z("cond",n,e,t),a=Z("args",n,e,t);return(await s.data())[0]?t.functionMap[r].executeFunctionAsync(a,t.tensorArrayMap,t.tensorListMap):t.functionMap[i].executeFunctionAsync(a,t.tensorArrayMap,t.tensorListMap)}case"While":case"StatelessWhile":{const r=Z("body",n,e,t),i=Z("cond",n,e,t),s=Z("args",n,e,t),a=await t.functionMap[i].executeFunctionAsync(s,t.tensorArrayMap,t.tensorListMap),o=s.map(u=>u.id);let l=await a[0].data();a.forEach(u=>{!u.kept&&o.indexOf(u.id)===-1&&u.dispose()});let c=s;for(;l[0];){const u=c;c=await t.functionMap[r].executeFunctionAsync(c,t.tensorArrayMap,t.tensorListMap);const d=c.map(p=>p.id);u.forEach(p=>{!p.kept&&o.indexOf(p.id)===-1&&d.indexOf(p.id)===-1&&p.dispose()});const h=await t.functionMap[i].executeFunctionAsync(c,t.tensorArrayMap,t.tensorListMap);l=await h[0].data(),h.forEach(p=>{!p.kept&&o.indexOf(p.id)===-1&&d.indexOf(p.id)===-1&&p.dispose()})}return c}case"LoopCond":{const r=Z("pred",n,e,t);return[Cp(r)]}case"Switch":{const r=Z("pred",n,e,t);let i=Z("data",n,e,t);return i.kept||(i=Cp(i)),(await r.data())[0]?[void 0,i]:[i,void 0]}case"Merge":{const r=n.inputNames.find(i=>eo(i,e,t)!==void 0);if(r){const i=eo(r,e,t);return[Cp(i)]}return}case"Enter":{const r=Z("frameName",n,e,t),i=Z("tensor",n,e,t);return t.enterFrame(r),[Cp(i)]}case"Exit":{const r=Z("tensor",n,e,t);return t.exitFrame(),[Cp(r)]}case"NextIteration":{const r=Z("tensor",n,e,t);return t.nextIteration(),[Cp(r)]}case"TensorArrayV3":{const r=Z("size",n,e,t),i=Z("dtype",n,e,t),s=Z("elementShape",n,e,t),a=Z("dynamicSize",n,e,t),o=Z("clearAfterRead",n,e,t),l=Z("identicalElementShapes",n,e,t),c=Z("name",n,e,t),u=new gPe(c,i,r,s,l,a,o);return t.addTensorArray(u),[u.idTensor,$n(1)]}case"TensorArrayWriteV3":{const r=Z("tensorArrayId",n,e,t),i=Z("index",n,e,t),s=Z("tensor",n,e,t),a=t.getTensorArray(r.id);return a.write(i,s),[a.idTensor]}case"TensorArrayReadV3":{const r=Z("tensorArrayId",n,e,t),i=Z("index",n,e,t);return[t.getTensorArray(r.id).read(i)]}case"TensorArrayGatherV3":{const r=Z("tensorArrayId",n,e,t),i=Z("indices",n,e,t),s=Z("dtype",n,e,t);return[t.getTensorArray(r.id).gather(i,s)]}case"TensorArrayScatterV3":{const r=Z("tensorArrayId",n,e,t),i=Z("indices",n,e,t),s=Z("tensor",n,e,t),a=t.getTensorArray(r.id);return a.scatter(i,s),[a.idTensor]}case"TensorArrayConcatV3":{const r=Z("tensorArrayId",n,e,t),i=t.getTensorArray(r.id),s=Z("dtype",n,e,t);return[i.concat(s)]}case"TensorArraySplitV3":{const r=Z("tensorArrayId",n,e,t),i=Z("tensor",n,e,t),s=Z("lengths",n,e,t),a=t.getTensorArray(r.id);return a.split(s,i),[a.idTensor]}case"TensorArraySizeV3":{const r=Z("tensorArrayId",n,e,t),i=t.getTensorArray(r.id);return[$n(i.size(),"int32")]}case"TensorArrayCloseV3":{const r=Z("tensorArrayId",n,e,t),i=t.getTensorArray(r.id);return i.clearAndClose(),[i.idTensor]}case"TensorListSetItem":{const r=Z("tensorListId",n,e,t),i=Z("index",n,e,t),s=Z("tensor",n,e,t),a=t.getTensorList(r.id);return a.setItem(i,s),[a.idTensor]}case"TensorListGetItem":{const r=Z("tensorListId",n,e,t),i=Z("index",n,e,t),s=Z("elementShape",n,e,t),a=Z("elementDType",n,e,t);return[t.getTensorList(r.id).getItem(i,s,a)]}case"TensorListScatterV2":case"TensorListScatter":{const r=Z("indices",n,e,t),i=Z("tensor",n,e,t),s=Z("elementShape",n,e,t),a=Z("numElements",n,e,t),o=bPe(i,r,s,a);return t.addTensorList(o),[o.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=Z("elementShape",n,e,t),i=Z("elementDType",n,e,t);let s;n.op==="TensorListReserve"?s="numElements":s="maxNumElements";const a=Z(s,n,e,t),o=n.op==="TensorListReserve"?-1:a,l=vPe(r,i,a,o);return t.addTensorList(l),[l.idTensor]}case"TensorListGather":{const r=Z("tensorListId",n,e,t),i=Z("indices",n,e,t),s=Z("elementShape",n,e,t),a=Z("elementDType",n,e,t);return[t.getTensorList(r.id).gather(i,a,s)]}case"TensorListStack":{const r=Z("tensorListId",n,e,t),i=Z("elementShape",n,e,t),s=Z("elementDType",n,e,t),a=Z("numElements",n,e,t);return[t.getTensorList(r.id).stack(i,s,a)]}case"TensorListFromTensor":{const r=Z("tensor",n,e,t),i=Z("elementShape",n,e,t),s=Z("elementDType",n,e,t),a=yPe(r,i,s);return t.addTensorList(a),[a.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=Z("tensorListId",n,e,t),i=t.getTensorList(r.id),s=Z("dtype",n,e,t),a=Z("elementShape",n,e,t);return[i.concat(s,a)]}case"TensorListPushBack":{const r=Z("tensorListId",n,e,t),i=Z("tensor",n,e,t),s=t.getTensorList(r.id);return s.pushBack(i),[s.idTensor]}case"TensorListPopBack":{const r=Z("tensorListId",n,e,t),i=Z("elementShape",n,e,t),s=Z("elementDType",n,e,t);return[t.getTensorList(r.id).popBack(i,s)]}case"TensorListSplit":{const r=Z("tensor",n,e,t),i=Z("elementShape",n,e,t),s=Z("lengths",n,e,t),a=xPe(r,s,i);return t.addTensorList(a),[a.idTensor]}case"TensorListLength":{const r=Z("tensorListId",n,e,t),i=t.getTensorList(r.id);return[$n(i.size(),"int32")]}case"TensorListResize":{const r=Z("tensorListId",n,e,t),i=Z("size",n,e,t),a=t.getTensorList(r.id).resize(i);return t.addTensorList(a),[a.idTensor]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i7(n,e,t){const[r,i]=Z("fusedOps",n,e,t),s=r==="biasadd",a=!s,o=i==="prelu",l=r==="fusedbatchnorm",c=Z("numArgs",n,e,t);if(s){if(o&&c!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&s&&c!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const u=Z("strides",n,e,t),d=TM(n,e,t),h=Z("dataFormat",n,e,t).toUpperCase(),p=Z("dilations",n,e,t);let[g,v]=Z("args",n,e,t);a&&(v=g,g=void 0);const b=Z("leakyreluAlpha",n,e,t);return{stride:u,pad:d,dataFormat:h,dilations:p,biasArg:g,preluArg:v,activationFunc:i,leakyreluAlpha:b}}const wPe=(n,e,t,r=co)=>{switch(n.op){case"Conv1D":{const i=Z("stride",n,e,t),s=Z("pad",n,e,t),a=Z("dataFormat",n,e,t).toUpperCase(),o=Z("dilation",n,e,t);return[r.conv1d(Z("x",n,e,t),Z("filter",n,e,t),i,s,a,o)]}case"Conv2D":{const i=Z("strides",n,e,t),s=TM(n,e,t),a=Z("dataFormat",n,e,t).toUpperCase(),o=Z("dilations",n,e,t);return[r.conv2d(Z("x",n,e,t),Z("filter",n,e,t),[i[1],i[2]],s,a,[o[1],o[2]])]}case"_FusedConv2D":{const{stride:i,pad:s,dataFormat:a,dilations:o,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:d}=i7(n,e,t);return[r.fused.conv2d({x:Z("x",n,e,t),filter:Z("filter",n,e,t),strides:[i[1],i[2]],pad:s,dataFormat:a,dilations:[o[1],o[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:d})]}case"FusedDepthwiseConv2dNative":{const{stride:i,pad:s,dataFormat:a,dilations:o,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:d}=i7(n,e,t);return[r.fused.depthwiseConv2d({x:Z("x",n,e,t),filter:Z("filter",n,e,t),strides:[i[1],i[2]],pad:s,dataFormat:a,dilations:[o[1],o[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:d})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const i=Z("outputShape",n,e,t),s=Z("strides",n,e,t),a=TM(n,e,t);return[r.conv2dTranspose(Z("x",n,e,t),Z("filter",n,e,t),i,[s[1],s[2]],a)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const i=Z("strides",n,e,t),s=TM(n,e,t),a=Z("dilations",n,e,t),o=Z("dataFormat",n,e,t).toUpperCase();return[r.depthwiseConv2d(Z("input",n,e,t),Z("filter",n,e,t),[i[1],i[2]],s,o,[a[1],a[2]])]}case"Conv3D":{const i=Z("strides",n,e,t),s=Z("pad",n,e,t),a=Z("dataFormat",n,e,t).toUpperCase(),o=Z("dilations",n,e,t);return[r.conv3d(Z("x",n,e,t),Z("filter",n,e,t),[i[1],i[2],i[3]],s,a,[o[1],o[2],o[3]])]}case"AvgPool":{const i=Z("strides",n,e,t),s=Z("pad",n,e,t),a=Z("kernelSize",n,e,t);return[r.avgPool(Z("x",n,e,t),[a[1],a[2]],[i[1],i[2]],s)]}case"MaxPool":{const i=Z("strides",n,e,t),s=Z("pad",n,e,t),a=Z("kernelSize",n,e,t);return[r.maxPool(Z("x",n,e,t),[a[1],a[2]],[i[1],i[2]],s)]}case"MaxPoolWithArgmax":{const i=Z("strides",n,e,t),s=Z("pad",n,e,t),a=Z("kernelSize",n,e,t),o=Z("includeBatchInIndex",n,e,t),{result:l,indexes:c}=r.maxPoolWithArgmax(Z("x",n,e,t),[a[1],a[2]],[i[1],i[2]],s,o);return[l,c]}case"AvgPool3D":{const i=Z("strides",n,e,t),s=Z("pad",n,e,t),a=Z("kernelSize",n,e,t);return[r.avgPool3d(Z("x",n,e,t),[a[1],a[2],a[3]],[i[1],i[2],i[3]],s)]}case"MaxPool3D":{const i=Z("strides",n,e,t),s=Z("pad",n,e,t),a=Z("kernelSize",n,e,t);return[r.maxPool3d(Z("x",n,e,t),[a[1],a[2],a[3]],[i[1],i[2],i[3]],s)]}case"Dilation2D":{const i=Z("strides",n,e,t),s=Z("pad",n,e,t),a=Z("dilations",n,e,t),o=i[1],l=i[2],c=a[1],u=a[2];return[r.dilation2d(Z("x",n,e,t),Z("filter",n,e,t),[o,l],s,[c,u],"NHWC")]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CPe=(n,e,t,r=co)=>{switch(n.op){case"Fill":{const i=Z("shape",n,e,t),s=Z("dtype",n,e,t),a=Z("value",n,e,t);return[r.fill(i,a,s)]}case"LinSpace":{const i=Z("start",n,e,t),s=Z("stop",n,e,t),a=Z("num",n,e,t);return[r.linspace(i,s,a)]}case"Multinomial":{const i=Z("logits",n,e,t),s=Z("numSamples",n,e,t),a=Z("seed",n,e,t);return[r.multinomial(i,s,a)]}case"OneHot":{const i=Z("indices",n,e,t),s=Z("depth",n,e,t),a=Z("onValue",n,e,t),o=Z("offValue",n,e,t),l=Z("dtype",n,e,t);return[r.oneHot(i,s,a,o,l)]}case"Ones":return[r.ones(Z("shape",n,e,t),Z("dtype",n,e,t))];case"OnesLike":return[r.onesLike(Z("x",n,e,t))];case"RandomStandardNormal":return[r.randomStandardNormal(Z("shape",n,e,t),Z("dtype",n,e,t),Z("seed",n,e,t))];case"RandomUniform":return[r.randomUniform(Z("shape",n,e,t),Z("minval",n,e,t),Z("maxval",n,e,t),Z("dtype",n,e,t))];case"RandomUniformInt":return[r.randomUniformInt(Z("shape",n,e,t),Z("minval",n,e,t),Z("maxval",n,e,t),Z("seed",n,e,t))];case"Range":{const i=Z("start",n,e,t),s=Z("stop",n,e,t),a=Z("step",n,e,t);return[r.range(i,s,a,Z("dtype",n,e,t))]}case"TruncatedNormal":{const i=Z("shape",n,e,t),s=Z("mean",n,e,t),a=Z("stdDev",n,e,t),o=Z("seed",n,e,t);return[r.truncatedNormal(i,s,a,Z("dtype",n,e,t),o)]}case"Zeros":return[r.zeros(Z("shape",n,e,t),Z("dtype",n,e,t))];case"ZerosLike":return[r.zerosLike(Z("x",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XB(n,e,t){const r=Z("boxes",n,e,t),i=Z("scores",n,e,t),s=Z("maxOutputSize",n,e,t),a=Z("iouThreshold",n,e,t),o=Z("scoreThreshold",n,e,t),l=Z("softNmsSigma",n,e,t);return{boxes:r,scores:i,maxOutputSize:s,iouThreshold:a,scoreThreshold:o,softNmsSigma:l}}const _Pe=async(n,e,t,r,i=co)=>{switch(n.op){case"NonMaxSuppressionV5":{const{boxes:s,scores:a,maxOutputSize:o,iouThreshold:l,scoreThreshold:c,softNmsSigma:u}=XB(n,e,t),d=await i.image.nonMaxSuppressionWithScoreAsync(s,a,o,l,c,u);return[d.selectedIndices,d.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:s,scores:a,maxOutputSize:o,iouThreshold:l,scoreThreshold:c}=XB(n,e,t),u=Z("padToMaxOutputSize",n,e,t),d=await i.image.nonMaxSuppressionPaddedAsync(s,a,o,l,c,u);return[d.selectedIndices,d.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:s,scores:a,maxOutputSize:o,iouThreshold:l,scoreThreshold:c}=XB(n,e,t);return[await i.image.nonMaxSuppressionAsync(s,a,o,l,c)]}case"Where":{const s=i.cast(Z("condition",n,e,t),"bool"),a=[await i.whereAsync(s)];return s.dispose(),a}case"ListDiff":return i.setdiff1dAsync(Z("x",n,e,t),Z("y",n,e,t));default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EPe=(n,e,t,r=co)=>{switch(n.op){case"LowerBound":{const i=Z("sortedSequence",n,e,t),s=Z("values",n,e,t);return[r.lowerBound(i,s)]}case"TopKV2":{const i=Z("x",n,e,t),s=Z("k",n,e,t),a=Z("sorted",n,e,t),o=r.topk(i,s,a);return[o.values,o.indices]}case"UpperBound":{const i=Z("sortedSequence",n,e,t),s=Z("values",n,e,t);return[r.upperBound(i,s)]}case"Unique":{const i=Z("x",n,e,t),s=r.unique(i);return[s.values,s.indices]}case"UniqueV2":{const i=Z("x",n,e,t),s=Z("axis",n,e,t),a=r.unique(i,s);return[a.values,a.indices]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const APe=(n,e,t,r=co)=>{switch(n.op){case"Const":return e[n.name];case"PlaceholderWithDefault":const i=Z("default",n,e,t);return[eo(n.name,e,t)||i];case"Placeholder":return[eo(n.name,e,t)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const u=Z("x",n,e,t);return[Cp(u)]}case"IdentityN":return Z("x",n,e,t).map(u=>Cp(u));case"Snapshot":const s=Z("x",n,e,t);return[Cp(s)];case"Shape":return[r.tensor1d(Z("x",n,e,t).shape,"int32")];case"ShapeN":return Z("x",n,e,t).map(u=>r.tensor1d(u.shape));case"Size":return[r.scalar(Z("x",n,e,t).size,"int32")];case"Rank":return[r.scalar(Z("x",n,e,t).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const a=Z("x",n,e,t),o=Z("data",n,e,t),l=Z("message",n,e,t),c=Z("summarize",n,e,t);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(l);for(let u=0;u<o.length;u++)console.log(Array.prototype.slice.call(o[u].dataSync()).slice(0,c));return[a];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TPe{get id(){return this.handle.id}constructor(e,t){this.keyDType=e,this.valueDType=t,this.handle=$n(0),this.tensorMap=new Map,Fa(this.handle)}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return $n(this.size(),"int32")}async import(e,t){this.checkKeyAndValueTensor(e,t);const r=await e.data();return this.tensorMap.forEach(i=>i.dispose()),this.tensorMap.clear(),Ye(()=>{const i=Yu(t),s=r.length,a=i.length;de(s===a,()=>`The number of elements doesn't match, keys has ${s} elements, the values has ${a} elements.`);for(let o=0;o<s;o++){const l=r[o],c=i[o];Fa(c),this.tensorMap.set(l,c)}return this.handle})}async find(e,t){this.checkKeyAndValueTensor(e,t);const r=await e.data();return Ye(()=>{const i=[];for(let s=0;s<r.length;s++){const a=r[s],o=this.findWithDefault(a,t);i.push(o)}return Ec(i)})}findWithDefault(e,t){const r=this.tensorMap.get(e);return r??t}checkKeyAndValueTensor(e,t){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(t.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${t.dtype}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MPe=async(n,e,t,r)=>{switch(n.op){case"HashTable":case"HashTableV2":{const i=r.getHashTableHandleByName(n.name);if(i!=null)return[i];{const s=Z("keyDType",n,e,t),a=Z("valueDType",n,e,t),o=new TPe(s,a);return r.addHashTable(n.name,o),[o.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const i=Z("tableHandle",n,e,t,r),s=Z("keys",n,e,t),a=Z("values",n,e,t);return[await r.getHashTableById(i.id).import(s,a)]}case"LookupTableFind":case"LookupTableFindV2":{const i=Z("tableHandle",n,e,t,r),s=Z("keys",n,e,t),a=Z("defaultValue",n,e,t);return[await r.getHashTableById(i.id).find(s,a)]}case"LookupTableSize":case"LookupTableSizeV2":{const i=Z("tableHandle",n,e,t,r);return[r.getHashTableById(i.id).tensorSize()]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RPe=(n,e,t,r=co)=>{switch(n.op){case"ResizeBilinear":{const i=Z("images",n,e,t),s=Z("size",n,e,t),a=Z("alignCorners",n,e,t),o=Z("halfPixelCenters",n,e,t);return[r.image.resizeBilinear(i,[s[0],s[1]],a,o)]}case"ResizeNearestNeighbor":{const i=Z("images",n,e,t),s=Z("size",n,e,t),a=Z("alignCorners",n,e,t),o=Z("halfPixelCenters",n,e,t);return[r.image.resizeNearestNeighbor(i,[s[0],s[1]],a,o)]}case"CropAndResize":{const i=Z("image",n,e,t),s=Z("boxes",n,e,t),a=Z("boxInd",n,e,t),o=Z("cropSize",n,e,t),l=Z("method",n,e,t),c=Z("extrapolationValue",n,e,t);return[r.image.cropAndResize(i,s,a,o,l,c)]}case"ImageProjectiveTransformV3":{const i=Z("images",n,e,t),s=Z("transforms",n,e,t),a=Z("outputShape",n,e,t),o=Z("fillValue",n,e,t),l=Z("interpolation",n,e,t),c=Z("fillMode",n,e,t);return[r.image.transform(i,s,l.toLowerCase(),c.toLowerCase(),o,a)]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NPe=(n,e,t,r=co)=>{switch(n.op){case"Equal":return[r.equal(Z("a",n,e,t),Z("b",n,e,t))];case"NotEqual":return[r.notEqual(Z("a",n,e,t),Z("b",n,e,t))];case"Greater":return[r.greater(Z("a",n,e,t),Z("b",n,e,t))];case"GreaterEqual":return[r.greaterEqual(Z("a",n,e,t),Z("b",n,e,t))];case"Less":return[r.less(Z("a",n,e,t),Z("b",n,e,t))];case"LessEqual":return[r.lessEqual(Z("a",n,e,t),Z("b",n,e,t))];case"LogicalAnd":return[r.logicalAnd(Z("a",n,e,t),Z("b",n,e,t))];case"LogicalNot":return[r.logicalNot(Z("a",n,e,t))];case"LogicalOr":return[r.logicalOr(Z("a",n,e,t),Z("b",n,e,t))];case"Select":case"SelectV2":return[r.where(Z("condition",n,e,t),Z("a",n,e,t),Z("b",n,e,t))];case"BitwiseAnd":return[r.bitwiseAnd(Z("a",n,e,t),Z("b",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IPe=(n,e,t,r=co)=>{switch(n.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(Z("a",n,e,t),Z("b",n,e,t),Z("transposeA",n,e,t),Z("transposeB",n,e,t))];case"Einsum":return[r.einsum(Z("equation",n,e,t),...Z("tensors",n,e,t))];case"Transpose":return[r.transpose(Z("x",n,e,t),Z("perm",n,e,t))];case"_FusedMatMul":const[i,s]=Z("fusedOps",n,e,t),a=i==="biasadd",o=s==="prelu",l=Z("numArgs",n,e,t),c=Z("leakyreluAlpha",n,e,t);if(a){if(o&&l!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&l!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[u,d]=Z("args",n,e,t);return[r.fused.matMul({a:Z("a",n,e,t),b:Z("b",n,e,t),transposeA:Z("transposeA",n,e,t),transposeB:Z("transposeB",n,e,t),bias:u,activation:s,preluActivationWeights:d,leakyreluAlpha:c})];case"MatrixBandPart":return[r.linalg.bandPart(Z("a",n,e,t),Z("numLower",n,e,t),Z("numUpper",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DPe=(n,e,t,r=co)=>{switch(n.op){case"EuclideanNorm":return[r.euclideanNorm(Z("x",n,e,t),Z("axis",n,e,t),Z("keepDims",n,e,t))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(Z("x",n,e,t),Z("mean",n,e,t),Z("variance",n,e,t),Z("offset",n,e,t),Z("scale",n,e,t),Z("epsilon",n,e,t))];case"FusedBatchNormV3":return[r.batchNorm(Z("x",n,e,t),Z("mean",n,e,t),Z("variance",n,e,t),Z("offset",n,e,t),Z("scale",n,e,t),Z("epsilon",n,e,t))];case"LRN":return[r.localResponseNormalization(Z("x",n,e,t),Z("radius",n,e,t),Z("bias",n,e,t),Z("alpha",n,e,t),Z("beta",n,e,t))];case"Softmax":return[r.softmax(Z("x",n,e,t))];case"LogSoftmax":return[r.logSoftmax(Z("x",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kPe=(n,e,t,r=co)=>{switch(n.op){case"RaggedGather":{const{outputNestedSplits:i,outputDenseValues:s}=r.raggedGather(Z("paramsNestedSplits",n,e,t),Z("paramsDenseValues",n,e,t),Z("indices",n,e,t),Z("outputRaggedRank",n,e,t));return i.concat(s)}case"RaggedRange":{const{rtNestedSplits:i,rtDenseValues:s}=r.raggedRange(Z("starts",n,e,t),Z("limits",n,e,t),Z("splits",n,e,t));return[i,s]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(Z("shape",n,e,t),Z("values",n,e,t),Z("defaultValue",n,e,t),Z("rowPartitionTensors",n,e,t),Z("rowPartitionTypes",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OPe=(n,e,t,r=co)=>{switch(n.op){case"Max":{const o=Z("axis",n,e,t),l=Z("keepDims",n,e,t);return[r.max(Z("x",n,e,t),o,l)]}case"Mean":{const o=Z("axis",n,e,t),l=Z("keepDims",n,e,t);return[r.mean(Z("x",n,e,t),o,l)]}case"Min":{const o=Z("axis",n,e,t),l=Z("keepDims",n,e,t);return[r.min(Z("x",n,e,t),o,l)]}case"Sum":{const o=Z("axis",n,e,t),l=Z("keepDims",n,e,t);return[r.sum(Z("x",n,e,t),o,l)]}case"All":{const o=Z("axis",n,e,t),l=Z("keepDims",n,e,t);return[r.all(Z("x",n,e,t),o,l)]}case"Any":{const o=Z("axis",n,e,t),l=Z("keepDims",n,e,t);return[r.any(Z("x",n,e,t),o,l)]}case"ArgMax":{const o=Z("axis",n,e,t);return[r.argMax(Z("x",n,e,t),o)]}case"ArgMin":{const o=Z("axis",n,e,t);return[r.argMin(Z("x",n,e,t),o)]}case"Prod":{const o=Z("axis",n,e,t),l=Z("keepDims",n,e,t);return[r.prod(Z("x",n,e,t),o,l)]}case"Cumprod":{const o=Z("axis",n,e,t),l=Z("exclusive",n,e,t),c=Z("reverse",n,e,t);return[r.cumprod(Z("x",n,e,t),o,l,c)]}case"Cumsum":{const o=Z("axis",n,e,t),l=Z("exclusive",n,e,t),c=Z("reverse",n,e,t);return[r.cumsum(Z("x",n,e,t),o,l,c)]}case"Bincount":const i=Z("x",n,e,t),s=Z("weights",n,e,t),a=Z("size",n,e,t);return[r.bincount(i,s,a)];case"DenseBincount":{const o=Z("x",n,e,t),l=Z("weights",n,e,t),c=Z("size",n,e,t),u=Z("binaryOutput",n,e,t);return[r.denseBincount(o,l,c,u)]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BPe=(n,e,t,r=co)=>{switch(n.op){case"ConcatV2":case"Concat":{const i=Z("n",n,e,t),s=Z("axis",n,e,t);let a=Z("tensors",n,e,t);return a=a.slice(0,i),[r.concat(a,s)]}case"Gather":{const i=Z("x",n,e,t),s=Z("indices",n,e,t);return[r.gather(i,r.cast(s,"int32"),0)]}case"GatherV2":{const i=Z("axis",n,e,t),s=Z("batchDims",n,e,t),a=Z("x",n,e,t),o=Z("indices",n,e,t);return[r.gather(a,r.cast(o,"int32"),i,s)]}case"Reverse":{const i=Z("dims",n,e,t),s=[];for(let o=0;o<i.length;o++)i[o]&&s.push(o);const a=Z("x",n,e,t);return[r.reverse(a,s)]}case"ReverseV2":{const i=Z("axis",n,e,t),s=Z("x",n,e,t);return[r.reverse(s,i)]}case"Slice":{const i=Z("begin",n,e,t),s=Z("size",n,e,t);return[r.slice(Z("x",n,e,t),i,s)]}case"StridedSlice":{const i=Z("begin",n,e,t),s=Z("end",n,e,t),a=Z("strides",n,e,t),o=Z("beginMask",n,e,t),l=Z("endMask",n,e,t),c=Z("ellipsisMask",n,e,t),u=Z("newAxisMask",n,e,t),d=Z("shrinkAxisMask",n,e,t),h=Z("x",n,e,t);return[r.stridedSlice(h,i,s,a,o,l,c,u,d)]}case"Pack":return Ye(()=>{const i=Z("axis",n,e,t),s=Z("tensors",n,e,t),a=s[0].shape,o=r.squeeze(s[0]).shape,l=s.map(c=>{const u=Vr(c.shape,a);if(!u&&!Vr(r.squeeze(c).shape,o))throw new Error("the input tensors shape does not match");return u?c:r.reshape(c,a)});return[r.stack(l,i)]});case"Unpack":{const i=Z("axis",n,e,t),s=Z("tensor",n,e,t);return r.unstack(s,i)}case"Tile":{const i=Z("reps",n,e,t);return[r.tile(Z("x",n,e,t),i)]}case"Split":case"SplitV":{const i=Z("axis",n,e,t),s=Z("numOrSizeSplits",n,e,t),a=Z("x",n,e,t);return r.split(a,s,i)}case"ScatterNd":{const i=Z("indices",n,e,t),s=Z("values",n,e,t),a=Z("shape",n,e,t);return[r.scatterND(i,s,a)]}case"GatherNd":{const i=Z("x",n,e,t),s=Z("indices",n,e,t);return[r.gatherND(i,s)]}case"SparseToDense":{const i=Z("sparseIndices",n,e,t),s=Z("outputShape",n,e,t),a=Z("sparseValues",n,e,t),o=Z("defaultValue",n,e,t);return[r.sparseToDense(i,a,s,a.dtype===o.dtype?o:r.cast(o,a.dtype))]}case"TensorScatterUpdate":{const i=Z("indices",n,e,t),s=Z("values",n,e,t),a=Z("tensor",n,e,t);return[r.tensorScatterUpdate(a,i,s)]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Pe=(n,e,t,r=co)=>{switch(n.op){case"SparseFillEmptyRows":{const{outputIndices:i,outputValues:s,emptyRowIndicator:a,reverseIndexMap:o}=r.sparse.sparseFillEmptyRows(Z("indices",n,e,t),Z("values",n,e,t),Z("denseShape",n,e,t),Z("defaultValue",n,e,t));return[i,s,a,o]}case"SparseReshape":{const{outputIndices:i,outputShape:s}=r.sparse.sparseReshape(Z("inputIndices",n,e,t),Z("inputShape",n,e,t),Z("newShape",n,e,t));return[i,s]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(Z("data",n,e,t),Z("indices",n,e,t),Z("segmentIds",n,e,t))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(Z("data",n,e,t),Z("indices",n,e,t),Z("segmentIds",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LPe=(n,e,t,r=co)=>{switch(n.op){case"FFT":return[r.fft(Z("x",n,e,t))];case"IFFT":return[r.ifft(Z("x",n,e,t))];case"RFFT":return[r.rfft(Z("x",n,e,t))];case"IRFFT":return[r.irfft(Z("x",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FPe=(n,e,t,r=co)=>{switch(n.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(Z("input",n,e,t),Z("pattern",n,e,t),Z("rewrite",n,e,t),Z("replaceGlobal",n,e,t))];case"StringNGrams":{const{nGrams:i,nGramsSplits:s}=r.string.stringNGrams(Z("data",n,e,t),Z("dataSplits",n,e,t),Z("separator",n,e,t),Z("nGramWidths",n,e,t),Z("leftPad",n,e,t),Z("rightPad",n,e,t),Z("padWidth",n,e,t),Z("preserveShortSequences",n,e,t));return[i,s]}case"StringSplit":{const{indices:i,values:s,shape:a}=r.string.stringSplit(Z("input",n,e,t),Z("delimiter",n,e,t),Z("skipEmpty",n,e,t));return[i,s,a]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(Z("input",n,e,t),Z("numBuckets",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PPe=(n,e,t,r=co)=>{switch(n.op){case"Cast":return[r.cast(Z("x",n,e,t),Z("dtype",n,e,t))];case"ExpandDims":{const i=Z("axis",n,e,t);return[r.expandDims(Z("x",n,e,t),i)]}case"Squeeze":{const i=Z("axis",n,e,t);return[r.squeeze(Z("x",n,e,t),i)]}case"Reshape":return[r.reshape(Z("x",n,e,t),Z("shape",n,e,t))];case"EnsureShape":return[r.ensureShape(Z("x",n,e,t),Z("shape",n,e,t))];case"MirrorPad":return[r.mirrorPad(Z("x",n,e,t),Z("padding",n,e,t),Z("mode",n,e,t))];case"PadV2":case"Pad":return[r.pad(Z("x",n,e,t),Z("padding",n,e,t),Z("constantValue",n,e,t))];case"SpaceToBatchND":{const i=Z("blockShape",n,e,t),s=Z("paddings",n,e,t);return[r.spaceToBatchND(Z("x",n,e,t),i,s)]}case"BatchToSpaceND":{const i=Z("blockShape",n,e,t),s=Z("crops",n,e,t);return[r.batchToSpaceND(Z("x",n,e,t),i,s)]}case"DepthToSpace":{const i=Z("blockSize",n,e,t),s=Z("dataFormat",n,e,t).toUpperCase();return[r.depthToSpace(Z("x",n,e,t),i,s)]}case"BroadcastTo":return[r.broadcastTo(Z("x",n,e,t),Z("shape",n,e,t))];case"BroadcastArgs":return[r.broadcastArgs(Z("s0",n,e,t),Z("s1",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s7(n,e,t,r,i=Ye){const s=((a,o,l)=>{switch(a.category){case"arithmetic":return i(()=>pPe(a,o,l));case"basic_math":return i(()=>mPe(a,o,l));case"control":return SPe(a,o,l);case"convolution":return i(()=>wPe(a,o,l));case"creation":return i(()=>CPe(a,o,l));case"dynamic":return _Pe(a,o,l);case"evaluation":return i(()=>EPe(a,o,l));case"image":return i(()=>RPe(a,o,l));case"graph":return i(()=>APe(a,o,l));case"logical":return i(()=>NPe(a,o,l));case"matrices":return i(()=>IPe(a,o,l));case"normalization":return i(()=>DPe(a,o,l));case"ragged":return i(()=>kPe(a,o,l));case"reduction":return i(()=>OPe(a,o,l));case"slice_join":return i(()=>BPe(a,o,l));case"sparse":return i(()=>$Pe(a,o,l));case"spectral":return i(()=>LPe(a,o,l));case"string":return i(()=>FPe(a,o,l));case"transformation":return i(()=>PPe(a,o,l));case"hash_table":return MPe(a,o,l,r);case"custom":const c=xre(a.op);if(c&&c.customExecutor)return c.customExecutor(new hPe(a,o,l));throw TypeError(`Custom op ${a.op} is not registered.`);default:throw TypeError(`Unknown op '${a.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(n,e,t);return av(s)?s.then(a=>[].concat(a)):[].concat(s)}class a7{constructor(e={},t={},r={},i={},s){this.weightMap=e,this.tensorArrayMap=t,this.tensorListMap=r,this.functionMap=i,this.parseNodeNameCache=s,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,t){return{id:e,frameName:t,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let t=0;t<this.contexts.length-1;t++){const r=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(r))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(t=>t.id===0&&t.iterationId===0?"":`${t.frameName}-${t.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(const t in this.tensorListMap)this.tensorListMap[t].clearAndClose(e)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o7(n,e,t,r){const i=new Set,s=[];let a=null,o=null;const l=new Set,c=new Set(Object.keys(n).map(h=>dc(h)[0]));r=r||[];const u=new Set(r.map(h=>dc(h.name)[0])),d=[...e];for(;d.length>0;){const h=d.pop();if((_y(h)||qPe(h)||XPe(h))&&a==null&&(a=h,o=a.children.map(p=>p.name).filter(p=>i.has(p))),i.add(h.name),t[h.name]==null&&!c.has(h.name)&&!u.has(h.name)){if(h.inputs.length===0){s.push(h.name);continue}h.inputs.forEach(p=>{l.has(p.name)||(l.add(p.name),d.push(p))})}}return{inputs:n,outputs:e,usedNodes:i,missingInputs:s,dynamicNode:a,syncInputs:o}}function UPe(n,e){const{usedNodes:t,inputs:r}=e,i=Object.keys(r).map(b=>dc(b)[0]).map(b=>n.nodes[b]),s=n.initNodes||[],a=b=>t.has(typeof b=="string"?b:b.name);function o(b){return[...new Map(b.map(x=>[x.name,x])).values()]}const l=o([...i,...n.weights,...s]).filter(a),c=o([...l,...Object.values(n.nodes)]).filter(a),u=new Map(c.map(b=>[b.name,b])),d={};for(const b of c){d[b.name]=d[b.name]||0;for(const x of b.children)a(x)||(d[x.name]=Number.POSITIVE_INFINITY),d[x.name]=(d[x.name]||0)+1}const h=Object.entries(d).filter(([,b])=>b===0).map(([b])=>b),p=[...h];for(;h.length>0;){const b=h.pop(),x=u.get(b);for(const C of x.children.filter(a))--d[C.name]===0&&(p.push(C.name),h.push(C.name))}const g=p.map(b=>u.get(b)),v=zPe(g,l);return HPe(v,l),v}function zPe(n,e){const t=new Map(n.map(a=>[a.name,a])),r=e.map(a=>a.name),i=new Set(r);for(;r.length>0;){const a=r.pop(),o=t.get(a);for(const l of o.children)!t.has(l.name)||i.has(l.name)||(i.add(l.name),r.push(l.name))}return n.filter(a=>i.has(a.name))}class jT extends Error{constructor(e){super(`NodesExecutionOrderError: ${e}`)}}function HPe(n,e){const t=new Map(n.map((o,l)=>[o.name,l])),r=new Set(e.map(o=>o.name)),i=o=>r.has(typeof o=="string"?o:o.name),s=new Set(n.map(o=>o.name)),a=o=>s.has(typeof o=="string"?o:o.name);for(const o of n){for(const l of o.children.filter(a)){if(!t.has(l.name))throw new jT(`Child ${l.name} of node ${o.name} is unreachable.`);if(t.get(o.name)>t.get(l.name))throw new jT(`Node ${o.name} is scheduled to run after its child ${l.name}.`)}if(!i(o))for(const l of o.inputs){if(!t.has(l.name))throw new jT(`Input ${l.name} of node ${o.name} is unreachable.`);if(t.get(l.name)>t.get(o.name))throw new jT(`Node ${o.name} is scheduled to run before its input ${l.name}.`)}}}function VPe(n){const e=new Map(n.map((o,l)=>[o.name,l])),t=Number.MAX_SAFE_INTEGER,r=n.map((o,l)=>_y(o)?t:l),i=o=>{const l=r[e.get(o.name)];return l??-1},s=n.map((o,l)=>o.children.map(i).reduce((c,u)=>Math.max(c,u),r[l])),a=new Map;for(let o=0;o<n.length;++o){const l=s[o];if(l===t)continue;const c=n[o],u=n[l];a.has(u.name)||a.set(u.name,[]),a.get(u.name).push(c)}return a}const GPe=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),WPe=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),jPe=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function _y(n){return GPe.has(n.op)}function qPe(n){return WPe.has(n.op)}function XPe(n){return jPe.has(n.op)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gN{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const t=Object.keys(e).map(r=>e[r].map(i=>i.id));this._weightIds=[].concat(...t),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const t=e.signatureKey||e.name;return e.defaultOutput?`${t}:${e.defaultOutput}`:t})}get functions(){return Object.keys(this._functions).reduce((e,t)=>(e[t]=this._functions[t].signature,e),{})}constructor(e,t){this.graph=e,this.parent=t,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(r=>{this._functionExecutorMap[r]=new gN(e.functions[r],this)})}getCompilationKey(e,t){const r=e.map(s=>s.name).sort(),i=t.map(s=>s.name).sort();return r.join(this.SEPARATOR)+"--"+i.join(this.SEPARATOR)}compile(e,t){const r=o7(e,t,this.weightMap,this._initNodes),{missingInputs:i,dynamicNode:s,syncInputs:a}=r;if(s!=null)throw new Error(`This execution contains the node '${s.name}', which has the dynamic op '${s.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${a}]`);if(i.length>0){const c=t.map(d=>d.name),u=Object.keys(e);throw new Error(`Cannot compute the outputs [${c}] from the provided inputs [${u}]. Missing the following inputs: [${i}]`)}const o=UPe(this.graph,r),l=VPe(o);return{orderedNodes:o,nodeLiveUntilMap:l}}cloneAndKeepTensor(e){if(e==null)return null;const t=e.clone();return Fa(t),t}cloneTensorList(e){return e?e.map(r=>this.cloneAndKeepTensor(r)):null}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map(([t,r])=>[t,this.cloneTensorList(r)]))}execute(e,t){this.disposeIntermediateTensors(),e=this.mapInputs(e);const r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);const i=r.map(h=>this.graph.nodes[dc(h)[0]]),s=t.map(h=>dc(h)[0]),a=new Set(s);let o=s.map(h=>this.graph.nodes[h]);o.length===0&&(o=this._outputs);const l=this.getCompilationKey(i,o);let c=this.compiledMap.get(l);c==null&&(c=this.compile(e,o),this.compiledMap.set(l,c));try{this.keepIntermediateTensors=it().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(h){this.keepIntermediateTensors=!1,console.warn(h.message)}const u={},d={};return Ye(()=>{const h=new a7(this.weightMap,u,d,this.functionExecutorMap,this.parseNodeNameCache),p=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach(x=>{const[C,E]=dc(x,h),_=[];_[E]=e[x],p[C]=_,this.keepIntermediateTensors&&(this.clonedTensorsMap[C]=this.cloneTensorList(_))});const g=this.getFrozenTensorIds(p),{orderedNodes:v,nodeLiveUntilMap:b}=c;for(const x of v){if(p[x.name])continue;const C=s7(x,p,h,this._resourceManager);if(av(C))throw new Error(`The execution of the op '${x.op}' returned a promise. Please use model.executeAsync() instead.`);p[x.name]=C,this.keepIntermediateTensors&&(this.clonedTensorsMap[x.name]=this.cloneTensorList(C)),this.checkTensorForDisposalWithNodeLiveUntilInfo(x,p,h,g,a,b.get(x.name))}return this.parent==null&&h.dispose(g),t.map(x=>eo(x,p,h))})}getFrozenTensorIds(e){const t=[].concat.apply([],Object.keys(e).map(r=>e[r]).map(r=>r.map(i=>i.id)));return new Set(t)}checkTensorForDisposal(e,t,r,i,s,a,o){if(!(_y(t)||a.has(e))){for(const l of r[e])l!=null&&(o[l.id]=(o[l.id]||0)+t.children.length);for(const l of t.inputs){if(_y(l))continue;const c=e7(l.name,r,i);if(c!=null)for(const u of c){if(!u||u.kept||s.has(u.id))continue;const d=o[u.id];d===1?(u.dispose(),delete o[u.id]):d!=null&&o[u.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,t,r,i,s,a){function o(l){return _y(l)||s.has(l.name)}if(!(_y(e)||a==null))for(const l of a){if(o(l))continue;const c=e7(l.name,t,r);for(const u of c)!u||u.kept||i.has(u.id)||u.dispose()}}async executeAsync(e,t){return this._executeAsync(e,t)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(e=>{for(const t of e)t&&!t.isDisposed&&t.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,t,r=!1,i={},s={}){this.disposeIntermediateTensors(),r||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t));try{this.keepIntermediateTensors=it().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(h){this.keepIntermediateTensors=!1,console.warn(h.message)}const a=new a7(this.weightMap,i,s,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const o=await this.executeWithControlFlow(e,a,t,r),l=t.map(h=>eo(h,o,a)),c=l.map(h=>h.id),u=Object.keys(e).map(h=>e[h].id),d=new Set([...c,...u,...this.weightIds]);return Object.values(o).forEach(h=>{h.forEach(p=>{p&&!p.isDisposed&&!d.has(p.id)&&p.dispose()})}),this.parent==null&&a.dispose(d),l}async executeFunctionAsync(e,t,r){const i=e.reduce((s,a,o)=>(s[this.inputs[o].name]=a,s),{});return this._executeAsync(i,this.outputNodes,!0,t,r)}async executeWithControlFlow(e,t,r,i){const s=Object.keys(e),a=s.map(_=>this.graph.nodes[dc(_)[0]]),o=r.map(_=>dc(_)[0]),l=new Set(o);let c=o.map(_=>this.graph.nodes[_]);c.length===0&&(c=this._outputs);const{usedNodes:u,missingInputs:d,dynamicNode:h,syncInputs:p}=o7(e,c,this.weightMap,this._initNodes),g=[...a,...this.graph.weights,...this._initNodes||[]].map(_=>({node:_,contexts:t.currentContext})),v=Object.assign({},this.weightMap);Object.keys(e).forEach(_=>{const[M,R]=dc(_),L=[];L[R]=e[_],v[M]=L});const b={},x=this.getFrozenTensorIds(v),C={};for(;g.length>0;){const _=this.processStack(a,g,t,v,C,x,l,b,u);await Promise.all(_)}h==null&&!i&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const E=c.filter(_=>!_y(_)&&!eo(_.name,v,t)).map(_=>_.name);if(E.length>0){let _="";throw h!=null&&(_=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${p}]`),new Error(`Cannot compute the outputs [${E}] from the provided inputs [${s}]. Consider providing the following inputs: [${d}]. ${_}`)}return v}processStack(e,t,r,i,s,a,o,l,c){const u=[];for(;t.length>0;){const d=t.pop();r.currentContext=d.contexts;let h="";if(d.node.op==="Enter"&&Z("isConstant",d.node,i,r)&&([h]=wp(d.node.name,r)),i[d.node.name]==null){const p=s7(d.node,i,r,this._resourceManager);h||([h]=wp(d.node.name,r));const g=r.currentContext;av(p)?u.push(p.then(v=>(i[h]=v,this.keepIntermediateTensors&&(this.clonedTensorsMap[h]=this.cloneTensorList(v)),r.currentContext=g,this.checkTensorForDisposal(h,d.node,i,r,a,o,l),this.processChildNodes(d.node,t,r,i,s,c),v))):(i[h]=p,this.keepIntermediateTensors&&(this.clonedTensorsMap[h]=this.cloneTensorList(p)),this.checkTensorForDisposal(h,d.node,i,r,a,o,l),this.processChildNodes(d.node,t,r,i,s,c))}else this.processChildNodes(d.node,t,r,i,s,c)}return u}processChildNodes(e,t,r,i,s,a){e.children.forEach(o=>{const[l]=wp(o.name,r);s[l]||!a.has(o.name)||(o.op==="Merge"?o.inputNames.some(c=>!!eo(c,i,r))&&(s[l]=!0,t.push({contexts:r.currentContext,node:o})):o.inputNames.every(c=>!!eo(c,i,r))&&(s[l]=!0,t.push({contexts:r.currentContext,node:o})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(t=>t.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(t=>{const r=e[t],[i]=dc(t),s=this.graph.nodes[i];if(s.attrParams.shape&&s.attrParams.shape.value){const a=s.attrParams.shape.value,o=a.length===r.shape.length&&r.shape.every((l,c)=>a[c]===-1||a[c]===l);de(o,()=>`The shape of dict['${s.name}'] provided in model.execute(dict) must be [${a}], but was [${r.shape}]`)}s.attrParams.dtype&&s.attrParams.dtype.value&&de(r.dtype===s.attrParams.dtype.value,()=>`The dtype of dict['${s.name}'] provided in model.execute(dict) must be ${s.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(e){var t,r;const i={};for(const s in e){const a=(r=(t=this._signature)===null||t===void 0?void 0:t.inputs)===null||r===void 0?void 0:r[s];a!=null?i[a.name]=e[s]:i[s]=e[s]}return i}checkInputs(e){const t=Object.keys(e).filter(r=>{const[i]=dc(r);return this.graph.nodes[i]==null});if(t.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${t}] that are not part of graph`)}mapOutputs(e){return e.map(t=>{var r,i;const s=(i=(r=this._signature)===null||r===void 0?void 0:r.outputs)===null||i===void 0?void 0:i[t];return s!=null?s.name:t},{})}checkOutputs(e){e.forEach(t=>{const[r]=dc(t);if(!this.graph.nodes[r])throw new Error(`The output '${t}' is not found in the graph`)})}}class KPe{constructor(e={},t={}){this.hashTableNameToHandle=e,this.hashTableMap=t}addHashTable(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YPe="?tfjs-format=file",JPe="model.json";class ZPe{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(e,t={},r=Cee){this.modelUrl=e,this.loadOptions=t,this.version="n/a",this.io=r,t==null&&(this.loadOptions={}),this.resourceManager=new KPe}findIOHandler(){const e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const t=this.io.getLoadHandlers(e,this.loadOptions);if(t.length===0)t.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error(`Found more than one (${t.length}) load handlers for URL '${[e]}'`);this.handler=t[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return av(e)?e.then(t=>t.getWeightStream==null?this.loadSync(t):this.loadStreaming(t)):this.loadSync(e)}loadSync(e){const t=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,t)}async loadStreaming(e){if(e.getWeightStream==null)throw new Error("Model artifacts missing streamWeights function");const t=await qZ(e.getWeightStream(),e.weightSpecs);return this.loadWithWeightMap(e,t)}loadWithWeightMap(e,t){this.artifacts=e;const r=this.artifacts.modelTopology;let i=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){const s=this.artifacts.userDefinedMetadata;s.signature!=null&&(i=s.signature),s.structuredOutputKeys!=null&&(this.structuredOutputKeys=s.structuredOutputKeys)}if(this.signature=i,this.version=`${r.versions.producer}.${r.versions.minConsumer}`,this.executor=new gN(t7.Instance.transformGraph(r,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(t),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){const s=t7.Instance.transformGraph(e.modelInitializer);this.initializer=new gN(s),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,t){if(typeof e=="string"){const r=this.io.getSaveHandlers(e);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${e}'`);e=r[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){const t=e instanceof ji?[e]:e,r={};return t.forEach((i,s)=>r[this.structuredOutputKeys[s]]=i),r}return e}predict(e,t){const r=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(r)}async predictAsync(e,t){const r=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(r)}normalizeInputs(e){var t;if(!(e instanceof ji)&&!Array.isArray(e)){const s=(t=this.signature)===null||t===void 0?void 0:t.inputs;if(s!=null)for(const a in s){const o=s[a];o.resourceId!=null&&(e[a]=this.resourceIdToCapturedInput[o.resourceId])}return e}e=Array.isArray(e)?e:[e];const r=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+r!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-r} non-resource placeholders, while there are ${e.length} input tensors provided.`);let i=0;return this.inputNodes.reduce((s,a)=>{var o,l,c;const u=(c=(l=(o=this.signature)===null||o===void 0?void 0:o.inputs)===null||l===void 0?void 0:l[a])===null||c===void 0?void 0:c.resourceId;return u!=null?s[a]=this.resourceIdToCapturedInput[u]:s[a]=e[i++],s},{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){const t=this.initializerSignature.outputs,r=Object.keys(t);for(let i=0;i<r.length;i++){const s=r[i],a=t[s];this.resourceIdToCapturedInput[a.resourceId]=e[i]}}}execute(e,t){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const r=this.executor.execute(e,t);return r.length>1?r:r[0]}async executeAsync(e,t){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const r=await this.executor.executeAsync(e,t);return r.length>1?r:r[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((t,r)=>(t[r]=[e[r]],t),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&rr(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function l7(n,e={},t=Cee){if(n==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");e==null&&(e={}),e.fromTFHub&&typeof n=="string"&&(n=QPe(n));const r=new ZPe(n,e,t);return await r.load(),r}function QPe(n){return n.endsWith("/")||(n=n+"/"),`${n}${JPe}${YPe}`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var c7;(function(n){n[n.FAIL=0]="FAIL",n[n.SHORTEST=1]="SHORTEST",n[n.LONGEST=2]="LONGEST"})(c7||(c7={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cn(n,e){Array.isArray(n)||(n=[n]),n.forEach(t=>{t!=null&&de(t.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e4e=bz;class C3 extends D4{nextDataId(){return C3.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new vZ(this,Qf())}write(e,t,r){this.firstUse&&(this.firstUse=!1,it().get("IS_NODE")&&Kc(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const i={id:this.nextDataId()};return this.data.set(i,{values:e,dtype:r,refCount:1}),i}makeTensorInfo(e,t,r){let i;if(t==="string"&&r!=null&&r.length>0&&G_(r[0])){const s=r.map(a=>pg(a));i=this.write(s,e,t)}else i=this.write(r,e,t);return{dataId:i,shape:e,dtype:t}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const t=this.data.get(e);t.refCount++}decRef(e){if(this.data.has(e)){const t=this.data.get(e);t.refCount--}}move(e,t,r,i,s){this.data.set(e,{values:t,dtype:i,refCount:s})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:t,complexTensorInfos:r}=this.data.get(e);if(t==="complex64"){const i=this.readSync(r.real.dataId),s=this.readSync(r.imag.dataId);return Hp(i,s)}return rTe(this.data.get(e).values,t)}bufferSync(e){const t=this.readSync(e.dataId);if(e.dtype==="string")try{const r=t.map(i=>Eg(i));return Ar(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Ar(e.shape,e.dtype,t)}makeOutput(e,t,r){return Qf().makeTensorFromTensorInfo(this.makeTensorInfo(t,r,e),this)}disposeData(e,t=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const t=Dl();return e(),{kernelMs:Dl()-t}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){Cn([e],"where");const t=this.readSync(e.dataId);return e4e(e.shape,t)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}C3.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cre(n){const e=new Float32Array(n.length);for(let t=0;t<n.length;++t)e[t]=Math.abs(n[t]);return e}const t4e=n=>{const{x:e}=n.inputs,t=n.backend;Cn(e,"abs");let r=new Float32Array(xt(e.shape));const i=t.data.get(e.dataId).values;return r=Cre(i),t.makeOutput(r,e.shape,e.dtype)},n4e={kernelName:LI,backendName:"cpu",kernelFunc:t4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zs(n){return(e,t,r,i,s)=>{const a=hr(e,t),o=a.length,l=kn(a),c=xt(a),u=so(s,c),d=e.length,h=t.length,p=kn(e),g=kn(t),v=h1(e,a),b=h1(t,a);if(v.length+b.length===0)for(let x=0;x<u.length;++x)u[x]=n(r[x%r.length],i[x%i.length]);else for(let x=0;x<u.length;++x){const C=H1(x,o,l),E=C.slice(-d);v.forEach(L=>E[L]=0);const _=fh(E,d,p),M=C.slice(-h);b.forEach(L=>M[L]=0);const R=fh(M,h,g);u[x]=n(r[_],i[R])}return[u,a]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mc(n){const{inputs:e,backend:t}=n,{real:r,imag:i}=e,s=t.data.get(r.dataId).values,a=t.data.get(i.dataId).values,o=t.makeTensorInfo(r.shape,"complex64"),l=t.data.get(o.dataId);return l.complexTensorInfos={real:t.makeTensorInfo(r.shape,"float32",s),imag:t.makeTensorInfo(i.shape,"float32",a)},o}const r4e={kernelName:H4,backendName:"cpu",kernelFunc:mc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yN(n,e,t="float32"){if(t==="complex64"){const i=yN(n,e,"float32"),s=yN(n,e,"float32");return mc({inputs:{real:i,imag:s},backend:n})}const r=Io(xt(e),t);return n.makeTensorInfo(e,t,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Th(n){const{inputs:e,backend:t}=n,{x:r}=e;return t.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const i4e={kernelName:dE,backendName:"cpu",kernelFunc:Th};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yv(n){const{inputs:e,backend:t}=n,{input:r}=e,i=t.data.get(r.dataId).complexTensorInfos.real,s=t.data.get(i.dataId).values;return t.makeTensorInfo(i.shape,i.dtype,s)}const s4e={kernelName:xU,backendName:"cpu",kernelFunc:yv};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _re(n,e,t,r){if(r==="int32"){const i=Int32Array.from(n);return[e,"int32",i]}if(r==="bool"){const i=Tv([0],t),[s,a]=Zs((o,l)=>o!==l?1:0)(e,[],n,i,"bool");return[a,"bool",s]}throw new Error(`Error in Cast: failed to cast ${t} to ${r}`)}function Og(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{dtype:s}=r;if(s==="complex64"){if(i.dtype==="complex64")return Th({inputs:{x:i},backend:t});const u=yN(t,i.shape,i.dtype),d=Og({inputs:{x:i},backend:t,attrs:{dtype:"float32"}}),h=mc({inputs:{real:d,imag:u},backend:t});return t.disposeIntermediateTensorInfo(u),t.disposeIntermediateTensorInfo(d),h}if(i.dtype==="complex64"){const u=yv({inputs:{input:i},backend:t}),d=Og({inputs:{x:u},backend:t,attrs:{dtype:s}});return t.disposeIntermediateTensorInfo(u),d}if(!xZ(i.dtype,s)){const u=Th({inputs:{x:i},backend:t});return{dataId:u.dataId,shape:u.shape,dtype:s}}const a=t.data.get(i.dataId).values,[o,l,c]=_re(a,i.shape,i.dtype,s);return t.makeTensorInfo(o,l,c)}const a4e={kernelName:Z_,backendName:"cpu",kernelFunc:Og};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ta(n,e,t,r){return t==null?({inputs:i,backend:s})=>{const{a,b:o}=i,l=s;Cn([a,o],n);const c=l.data.get(a.dataId).values,u=l.data.get(o.dataId).values,d=a.dtype==="string"?Vp(c):c,h=a.dtype==="string"?Vp(u):u,p=r||a.dtype,[g,v]=e(a.shape,o.shape,d,h,p);return l.makeTensorInfo(v,p,g)}:({inputs:i,backend:s})=>{const{a,b:o}=i,l=s;if(a.dtype==="complex64"||o.dtype==="complex64"){const c=Og({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),u=l.data.get(c.dataId),d=u.complexTensorInfos.real,h=u.complexTensorInfos.imag,p=l.data.get(d.dataId).values,g=l.data.get(h.dataId).values,v=Og({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),b=l.data.get(v.dataId),x=b.complexTensorInfos.real,C=b.complexTensorInfos.imag,E=l.data.get(x.dataId).values,_=l.data.get(C.dataId).values,[M,R,L]=t(a.shape,o.shape,p,g,E,_),$=l.makeTensorInfo(L,"float32",M),N=l.makeTensorInfo(L,"float32",R),I=mc({inputs:{real:$,imag:N},backend:l});return l.disposeIntermediateTensorInfo(c),l.disposeIntermediateTensorInfo(v),l.disposeIntermediateTensorInfo($),l.disposeIntermediateTensorInfo(N),I}else{const c=l.data.get(a.dataId).values,u=l.data.get(o.dataId).values,d=r||a.dtype,[h,p]=e(a.shape,o.shape,c,u,d);return l.makeTensorInfo(p,d,h)}}}function C5(n){return(e,t,r,i,s,a)=>{const o=hr(e,t),l=xt(o),c=o.length,u=kn(o),d=so("float32",l),h=so("float32",l),p=h1(e,o),g=h1(t,o),v=Hp(r,i),b=Hp(s,a),x=e.length,C=kn(e),E=t.length,_=kn(t);if(p.length+g.length===0)for(let M=0;M<d.length;M++){const R=M%v.length,L=M%b.length,$=n(v[R*2],v[R*2+1],b[L*2],b[L*2+1]);d[M]=$.real,h[M]=$.imag}else for(let M=0;M<d.length;M++){const R=H1(M,c,u),L=R.slice(-x);p.forEach(P=>L[P]=0);const $=fh(L,x,C),N=R.slice(-E);g.forEach(P=>N[P]=0);const I=fh(N,E,_),k=n(v[$*2],v[$*2+1],b[I*2],b[I*2+1]);d[M]=k.real,h[M]=k.imag}return[d,h,o]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ere=Zs((n,e)=>n+e),o4e=C5((n,e,t,r)=>({real:n+t,imag:e+r})),y1=Ta(V1,Ere,o4e),l4e={kernelName:V1,backendName:"cpu",kernelFunc:y1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _5(n,e,t,r,i){const s=xt(r),a=Io(i,t);for(let o=0;o<n.length;o++){const l=n[o];if(l<0)throw new Error("Input x must be non-negative!");l>=i||(s>0?a[l]+=e[o]:a[l]+=1)}return a}function Are(n,e,t,r=!1){const i=n.shape[0],s=n.shape[1],a=Ar([i,t],e.dtype);for(let o=0;o<i;o++)for(let l=0;l<s;l++){const c=n.get(o,l);if(c<0)throw new Error("Input x must be non-negative!");c>=t||(r?a.set(1,o,c):e.size>0?a.set(a.get(o,c)+e.get(o,l),o,c):a.set(a.get(o,c)+1,o,c))}return a}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tre=Zs((n,e)=>n&e),c4e=Ta(WI,Tre),u4e={kernelName:WI,backendName:"cpu",kernelFunc:c4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dh(n){return(e,t,r)=>{const i=js(t,e.length);for(let s=0;s<e.length;++s)i[s]=n(e[s],r);return i}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mi(n,e,t){const r=Dh(e);return Zg(n,r,t)}function Zg(n,e,t){return({inputs:r,attrs:i,backend:s})=>{const{x:a}=r;Cn(a,n);const o=s,l=o.data.get(a.dataId).values;let c;if(a.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");c=Vp(l)}else c=l;const u=t||a.dtype,d=e(c,u,i);return o.makeTensorInfo(a.shape,u,d)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mre=Dh(n=>Math.ceil(n)),d4e=Zg(Q_,Mre),f4e={kernelName:Q_,backendName:"cpu",kernelFunc:d4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rre(n,e,t,r){const i=js(t,xt(e));if(r&&t!=="string"){let s=0;n.forEach(a=>{const o=xt(a.shape);i.set(a.vals,s),s+=o})}else{let s=0;n.forEach(a=>{const o=t==="string"?Vp(a.vals):a.vals;let l=0;for(let c=0;c<a.shape[0];++c){const u=c*e[1]+s;for(let d=0;d<a.shape[1];++d)i[u+d]=o[l++]}s+=a.shape[1]})}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nre=Zs((n,e)=>n===e?1:0),Ire=Ta(eD,Nre,null,"bool"),h4e={kernelName:eD,backendName:"cpu",kernelFunc:Ire};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dre=Dh(n=>Math.exp(n)),kre=Zg(aE,Dre,"float32"),p4e={kernelName:aE,backendName:"cpu",kernelFunc:kre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ore=Dh(n=>Math.expm1(n)),m4e=Zg(oE,Ore),g4e={kernelName:oE,backendName:"cpu",kernelFunc:m4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bre=Dh(n=>Math.floor(n)),y4e=Zg(lE,Bre),v4e={kernelName:lE,backendName:"cpu",kernelFunc:y4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $re=Zs((n,e)=>Math.floor(n/e)),b4e=Ta(cE,$re,null,"int32"),x4e={kernelName:cE,backendName:"cpu",kernelFunc:b4e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lre(n,e,t,r,i,s,a,o,l){const c=Ar([r,s],t);for(let u=0;u<r;u++){const d=[];let h=0;for(let p=0;p<i;p++){const g=n[u*i+p];h+=g*a[p],d.push(g)}if(h<0||h>=l/s)throw new Error(`Invalid indices: ${d} does not index into ${o}`);for(let p=0;p<s;p++)c.values[u*s+p]=e.get(...e.indexToLoc(h*s+p))}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fre(n,e,t){const r=Ar(t,n.dtype);for(let i=0;i<r.size;++i){const a=r.indexToLoc(i).slice(),o=a[0],l=a[2],c=e.locToIndex([o,l]);a[2]=e.values[c];const u=n.locToIndex(a);0<=u&&u<n.values.length&&(r.values[i]=n.values[u])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pre=Zs((n,e)=>n>e?1:0),S4e=Ta(iD,Pre,null,"bool"),w4e={kernelName:iD,backendName:"cpu",kernelFunc:S4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ure=Zs((n,e)=>n>=e?1:0),C4e=Ta(uE,Ure,null,"bool"),_4e={kernelName:uE,backendName:"cpu",kernelFunc:C4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zre=Zs((n,e)=>n<e?1:0),E4e=Ta(aD,zre,null,"bool"),A4e={kernelName:aD,backendName:"cpu",kernelFunc:E4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hre=Zs((n,e)=>n<=e?1:0),T4e=Ta(oD,Hre,null,"bool"),M4e={kernelName:oD,backendName:"cpu",kernelFunc:T4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vre(n,e,t){const r=(e-n)/(t-1),i=Io(t,"float32");i[0]=n;for(let s=1;s<i.length;s++)i[s]=i[s-1]+r;return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gre=Dh(n=>Math.log(n)),R4e=Zg(mE,Gre),N4e={kernelName:mE,backendName:"cpu",kernelFunc:R4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wre(n,e,t,r){const i=so(r,xt(t));for(let s=0;s<i.length;++s){const a=s*e;let o=n[a];for(let l=0;l<e;++l){const c=n[a+l];(Number.isNaN(c)||c>o)&&(o=c)}i[s]=o}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jre=Zs((n,e)=>Math.max(n,e)),I4e=Ta(yE,jre),D4e={kernelName:yE,backendName:"cpu",kernelFunc:I4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qre=Zs((n,e)=>Math.min(n,e)),k4e=Ta(vE,qre),O4e={kernelName:vE,backendName:"cpu",kernelFunc:k4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E5=Zs((n,e)=>n*e),B4e=C5((n,e,t,r)=>({real:n*t-e*r,imag:n*r+e*t})),_3=Ta(xE,E5,B4e),$4e={kernelName:xE,backendName:"cpu",kernelFunc:_3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xre(n,e,t){const r=Vg(-1,t);return E5([],e,r,n,t)}function L4e(n){const{inputs:e,backend:t}=n,{x:r}=e;Cn(r,"neg");const i=t.data.get(r.dataId).values,[s,a]=Xre(i,r.shape,r.dtype);return t.makeTensorInfo(a,r.dtype,s)}const F4e={kernelName:vD,backendName:"cpu",kernelFunc:L4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kre=Zs((n,e)=>n!==e?1:0),P4e=Ta(bD,Kre,null,"bool"),U4e={kernelName:bD,backendName:"cpu",kernelFunc:P4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A5(n,e,t,r,i){const s=e.length,a=xt(e),o=kn(e),l=kn(i),c=so(t,xt(i));for(let u=0;u<a;++u){const d=H1(u,s,o),h=new Array(d.length);for(let g=0;g<h.length;g++)h[g]=d[r[g]];const p=fh(h,s,l);c[p]=n[u]}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hl(n){const{inputs:e,attrs:t,backend:r}=n,{x:i}=e,{perm:s}=t;Cn(i,"transpose");const a=i.shape.length,o=new Array(a);for(let d=0;d<o.length;d++)o[d]=i.shape[s[d]];const l=r.data.get(i.dataId).values,c=A5(l,i.shape,i.dtype,s,o);return{dataId:r.write(c,o,i.dtype),shape:o,dtype:i.dtype}}const z4e={kernelName:Lx,backendName:"cpu",kernelFunc:Hl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yre(n,e,t,r){const[i,s]=Ga(n,r),a=_c(e,"int32"),o=Io(xt(i),a),l=xt(s);for(let c=0;c<o.length;++c){const u=c*l;let d=1;for(let h=0;h<l;++h)d*=t[u+h];o[c]=d}return{outVals:o,outShape:i,outDtype:a}}function H4e(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{axis:s,keepDims:a}=r;Cn(i,"prod");const o=i.shape.length,l=Ir(s,i.shape),c=ws(l,o);let u=l,d=i;const h=[];c!=null&&(d=Hl({inputs:{x:i},backend:t,attrs:{perm:c}}),h.push(d),u=Ys(u.length,o));const p=t.data.get(d.dataId).values,{outVals:g,outShape:v,outDtype:b}=Yre(d.shape,d.dtype,p,u);let x=v;return a&&(x=Xs(v,l)),h.forEach(C=>t.disposeIntermediateTensorInfo(C)),t.makeTensorInfo(x,b,g)}const V4e={kernelName:ED,backendName:"cpu",kernelFunc:H4e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G4e(n,e,t){n.forEach((r,i)=>{if(r<0||r>=t){const s=H1(i,e.length,kn(e)).join(",");throw new Error(`indices[${s}] = ${r} is not in [0, ${t})`)}})}function W4e(n,e){for(let t=0;t<n.length;++t){const r=n[t],i=t===n.length-1?e:n[t+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>i)throw new Error("Ragged splits must not point past values");for(let s=1;s<r.length;++s)if(r[s-1]>r[s])throw new Error("Ragged splits must be sorted in ascending order")}}function j4e(n,e,t,r){const i=[];let s=0;const a=e.length-1+t.length,o=new Array(a).fill(null).map(()=>[0]);W4e(t,r);let l=1;for(let c=0;c<e.length-1;++c){l*=e[c];const u=e[c+1];for(let d=1;d<l+1;++d)o[c].push(d*u)}for(let c=0;c<n.length;++c){let u=n[c],d=n[c]+1;for(let h=0;h<t.length;++h){const p=t[h],g=h+e.length-1;if(g>=0){const v=o[g],b=v[v.length-1]-p[u];for(let x=u;x<d;++x)o[g].push(p[x+1]+b)}u=p[u],d=p[d]}d!==u&&(i.push([u,d]),s+=d-u)}return{outSplits:o,valueSlices:i,numValues:s}}function q4e(n){const e=[];for(let t=0;t<n.length;++t){const r=n[t].length,i=js("int32",r);e.push(i),n[t].forEach((s,a)=>i[a]=s)}return e}function u7(n,e){const t=n.slice(0,e);for(;t.length<e;)t.push(1);for(let r=e;r<n.length;r++)t[e-1]*=n[r];return t}function X4e(n,e,t,r,i,s){const a=u7(e,2)[1],o=u7(s,2)[1];let l=0;for(const c of t)for(let u=c[0];u<c[1];++u){for(let d=0;d<r;++d)i[l*o+d]=n[u*a+d];++l}}function K4e(n,e,t,r,i){const s=e.slice();s[0]=i;const a=js(t,xt(s)),o=n.length,l=o===0?0:o/e[0];return X4e(n,e,r,l,a,s),[a,s]}function Jre(n,e,t,r,i,s,a,o){if(n.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if(G4e(s,a,l),r.length===0)throw new Error("params.rank must be nonzero");const c=r[0],{outSplits:u,valueSlices:d,numValues:h}=j4e(s,a,n,c),p=q4e(u),g=K4e(t,r,i,d,h);return[p,g[0],g[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d7=2147483647;function Zre(n,e,t,r,i,s,a){if(e.length>1)throw new Error("starts must be a scalar or vector");if(i.length>1)throw new Error("limits must be a scalar or vector");if(a.length>1)throw new Error("deltas must be a scalar or vector");const o=e.length===0,l=i.length===0,c=a.length===0,u=[];o||u.push(e[0]),l||u.push(i[0]),c||u.push(a[0]);for(let b=1;b<u.length;++b)if(u[b]!==u[b-1])throw new Error("starts, limits, and deltas must have the same shape");const d=u.length===0?1:u[0],h=js("int32",d+1);h[0]=0;for(let b=0;b<d;++b){const x=o?n[0]:n[b],C=l?r[0]:r[b],E=c?s[0]:s[b];if(E===0)throw new Error("Requires delta != 0");let _;if(E>0&&C<x||E<0&&C>x)_=0;else if(_=Math.ceil(Math.abs((C-x)/E)),_>d7)throw new Error(`Requires ((limit - start) / delta) <= ${d7}`);h[b+1]=h[b]+_}const p=h[d],g=js(t,p);let v=0;for(let b=0;b<d;++b){const x=h[b+1]-h[b];let C=o?n[0]:n[b];const E=c?s[0]:s[b];for(let _=0;_<x;++_)g[v++]=C,C+=E}return[h,g]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Mu=jd;class vN{constructor(e,t,r,i,s,a,o,l,c,u){this.shape=e,this.shapeShape=t,this.values=r,this.valuesShape=i,this.valuesDType=s,this.defaultValue=a,this.defaultValueShape=o,this.rowPartitionValues=l,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=Oee(u),this.raggedRank=Bee(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===Mu.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===Mu.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const t=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case Mu.VALUE_ROWIDS:return vN.getMaxWidthValueRowID(t);case Mu.ROW_SPLITS:return vN.getMaxWidthRowSplit(t);default:throw new Error(`Cannot handle partition type ${Mu[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const t=e.length;if(t===0||t===1)return 0;let r=0;for(let i=0;i<t-1;++i){const s=e[i+1]-e[i];s>r&&(r=s)}return r}static getMaxWidthValueRowID(e){const t=e.length;if(t===0)return 0;let r=0,i=e[0],s=0;for(let a=1;a<t;++a){const o=e[a];o!==i&&(i=o,s=Math.max(a-r,s),r=a)}return Math.max(t-r,s)}tensorShapeFromTensor(e,t,r=!0){if(t.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return h7(e,r)}calculateOutputSize(e){const t=this.valuesShape,r=this.defaultValueShape;$ee(r,t);const i=this.tensorShapeFromTensor(this.shape,this.shapeShape),a=kee(this.raggedRank,i,t);a[0]<0&&(a[0]=e);for(let o=1;o<=this.raggedRank;++o)a[o]<0&&(a[o]=this.getMaxWidth(o));return a}calculateFirstParentOutputIndex(e,t,r){const i=Math.min(e,r),s=[];let a=0;for(let o=0;o<i;++o,a+=t)s.push(a);for(let o=i;o<e;++o)s.push(-1);return de(s.length===e,()=>"Final length of result must be equal to firstDimension."),s}calculateOutputIndexRowSplit(e,t,r,i){const s=e.length,a=[];for(let o=0;o<s-1;++o){const l=e[o+1]-e[o];let c=Math.min(i,l),u=t[o];u===-1&&(c=0);for(let d=0;d<c;++d)a.push(u),u+=r;for(let d=0;d<l-c;++d)a.push(-1)}if(s>0&&a.length!==e[s-1])throw new Error("Invalid row split size.");return a}calculateOutputIndexValueRowID(e,t,r,i){const s=e.length,a=[];if(s===0)return[];let o=0,l=e[0];if(l>=t.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${t.length}`);let c=t[l];a.push(c);for(let u=1;u<s;++u){const d=e[u];if(d===l)c>=0&&(++o,o<i?c+=r:c=-1);else{if(o=0,l=d,d>=t.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${t.length}`);c=t[d]}a.push(c)}if(a.length!==e.length)throw new Error("Invalid row ids.");return a}calculateOutputIndex(e,t,r,i){const s=this.getRowPartitionTensor(e),a=this.getRowPartitionTypeByDimension(e);switch(a){case Mu.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(s,t,r,i);case Mu.ROW_SPLITS:if(s.length-1>t.length)throw new Error(`Row partition size is greater than output size: ${s.length-1} > ${t.length}`);return this.calculateOutputIndexRowSplit(s,t,r,i);default:throw new Error(`Unsupported partition type: ${Mu[a]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const t=this.rowPartitionTypes[0];switch(t){case Mu.FIRST_DIM_SIZE:return e[0];case Mu.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Mu.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${Mu[t]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const t=this.getFirstDimensionSize(),r=this.calculateOutputSize(t),i=new Array(this.raggedRank+1);i[i.length-1]=1;for(let l=i.length-2;l>=0;--l)i[l]=i[l+1]*r[l+1];const s=h7(r,!1),a=js(this.valuesDType,xt(s));if(i[0]*r[0]>0){let l=this.calculateFirstParentOutputIndex(t,i[0],r[0]);for(let c=1;c<=this.raggedRank;++c)l=this.calculateOutputIndex(c-1,l,i[c],r[c]);this.setOutput(this.raggedRank,l,a,s)}return[s,a]}setOutput(e,t,r,i){if(r.length===0)return;const s=this.values,a=r;let o=i.slice();o=o.slice(e+1);const l=xt(o),c=t.length;let u=this.defaultValue;if(u.length!==l&&u.length!==1){const g=this.defaultValueShape;Ye(()=>{const v=Fe(u,g);u=Ux(v,o).dataSync()})}let d=0,h=0,p=0;for(let g=0;g<=c;++g){let v=g<c?t[g]:-1;if(v===p){++p;continue}if(h<p){const b=s.subarray(d*l),x=a.subarray(h*l),C=(p-h)*l;f7(x,b,C)}if(g>=c){const b=r.length;v=Math.floor(b/l)}if(v>p)if(this.defaultValue.length===1)a.subarray(p*l,v*l).fill(this.defaultValue[0]),p=v;else for(;v>p;){const b=a.slice(p*l);f7(b,u,l),++p}v<0?(d=g+1,h=p):(d=g,h=p,p=h+1)}}}function f7(n,e,t){for(let r=0;r<t;r++)n[r]=e[r]}function h7(n,e){const t=[];for(let r of n){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}t.push(r)}return t}function Qre(n,e,t,r,i,s,a,o,l,c){return new vN(n,e,t,r,i,s,a,o,l,c).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eie(n,e,t,r){const i=n===e,s=n<e&&t<0,a=e<n&&t>1;if(i||s||a)return Io(0,r);const o=Math.abs(Math.ceil((e-n)/t)),l=Io(o,r);e<n&&t===1&&(t=-1),l[0]=n;for(let c=1;c<l.length;c++)l[c]=l[c-1]+t;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tie=Dh(n=>1/Math.sqrt(n)),Y4e=Zg(AE,tie),J4e={kernelName:AE,backendName:"cpu",kernelFunc:Y4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function By(n,e,t,r,i,s,a,o,l,c){const u=[r/i,i],d=n.values,h=e.values;if(r===0)return Ar(t,e.dtype);const p=l instanceof Ca?l:Ar(u,e.dtype);typeof l=="string"||typeof l=="number"?p.values.fill(l):typeof l=="boolean"&&p.values.fill(+l);for(let g=0;g<s;g++){const v=[];let b=0;for(let x=0;x<a;x++){const C=d[g*a+x];v.push(C),b+=C*o[x]}if(b<0||b>=r/i)throw new Error(`Invalid indices: ${v} does not index into ${t}`);for(let x=0;x<i;x++)c?p.values[b*i+x]+=h[g*i+x]:p.values[b*i+x]=e.rank===0?h[0]:h[g*i+x]}return p}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z4e=Dh(n=>1/(1+Math.exp(-n))),nie=Mi(IE,n=>1/(1+Math.exp(-n))),Q4e={kernelName:IE,backendName:"cpu",kernelFunc:nie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rie(n,e,t,r,i){const s=Dz(r,e,t),a=xt(t),o=kn(r);if(s){const d=kz(e,o);return i==="string"?n.slice(d,d+a):n.subarray(d,d+a)}const l=i==="string"?Vp(n):n,c=Ar(r,i,l),u=Ar(t,i);for(let d=0;d<u.size;++d){const h=u.indexToLoc(d),p=h.map((g,v)=>g+e[v]);u.set(c.get(...p),...h)}return i==="string"?nte(u.values):u.values}function vv(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{begin:s,size:a}=r;Cn(i,"slice");const[o,l]=c3(i,s,a);Nz(i,o,l);const c=t.data.get(i.dataId).values,u=rie(c,o,l,i.shape,i.dtype);return t.makeTensorInfo(l,i.dtype,u)}const eUe={kernelName:ID,backendName:"cpu",kernelFunc:vv};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iie(n,e,t,r,i,s,a){const o=e[0],l=s[0],c=new Array(l),u=new Array(o),d=e[1];if(l===0){if(o!==0)throw new Error(Vee(o));const b=js(t,0),x=js(i,0);return[b,[0,d],x,c,u]}let h=!0,p=0;const g=new Array(l).fill(0);for(let b=0;b<o;++b){const x=n[b*d];if(x<0)throw new Error(Gee(b,x));if(x>=l)throw new Error(Wee(b,x,l));++g[x],h=h&&x>=p,p=x}let v=!0;for(let b=0;b<l;++b){const x=g[b]===0;c[b]=x,v=v&&!x,g[b]=Math.max(g[b],1),b>0&&(g[b]+=g[b-1])}if(v&&h){const b=n,x=r;for(let C=0;C<o;++C)u[C]=C;return[b,[o,d],x,c,u]}else{const b=g[l-1],x=js(t,b*d),C=js(i,b),E=new Array(l).fill(0);for(let _=0;_<o;++_){const M=n[_*d],R=E[M],L=(M===0?0:g[M-1])+R;E[M]++;for(let $=0;$<d;++$)x[L*d+$]=n[_*d+$];C[L]=r[_],u[_]=L}for(let _=0;_<l;++_)if(E[_]===0){const R=_===0?0:g[_-1];x[R*d+0]=_;for(let L=1;L<d;++L)x[R*d+L]=0;C[R]=a}return[x,[b,d],C,c,u]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sie(n,e,t,r,i){const s=xt(r),a=e[0],o=i.length,l=[];let c=1,u=-1;for(let b=0;b<o;++b){const x=i[b];if(x===-1){if(u!==-1)throw new Error(jee(u,b));u=b,l.push(1)}else{if(x<0)throw new Error(qee(b,x));c*=x,l.push(x)}}if(u!==-1){if(c<=0)throw new Error(Xee());const b=Math.trunc(s/c);if(c*b!==s)throw new Error(Kee(r,l));l[u]=b}if(xt(l)!==s)throw new Error(Yee(r,l));const h=r.length,p=[];if(h>0){p[h-1]=1;for(let b=h-2;b>=0;--b)p[b]=p[b+1]*r[b+1]}const g=[];if(o>0){g[o-1]=1;for(let b=o-2;b>=0;--b)g[b]=g[b+1]*l[b+1]}const v=js(t,a*o);for(let b=0;b<a;++b){let x=0;for(let C=0;C<h;++C)x+=n[b*h+C]*p[C];for(let C=0;C<o;++C)v[b*o+C]=Math.trunc(x/g[C]),x%=g[C]}return[v,[a,o],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T5(n,e,t,r,i,s=!1,a=0){const o=r.length,l=[e[0],n.length/e[0]],c=l[1],d=o>0?i[o-1]+1:0;if(d<0)throw new Error(JL());const h=e.slice();h[0]=d;const p=h.reduce((E,_)=>E*_,1),g=js(t,p);if(o===0)return d>0&&g.fill(a),[g,h];if(d<=0)throw new Error(JL());let v=0,b=1,x=0,C=i[v];for(;;){let E=0;if(b<o){if(E=i[b],C===E){++b;continue}if(C>=E)throw new Error(Jee())}if(C<0||C>=d)throw new Error(Zee(C,d));C>x&&g.fill(a,x*c,C*c);for(let _=v;_<b;++_){const M=r[_];if(M<0||M>=l[0])throw new Error(Qee(_,r[_],l[0]));for(let R=0;R<c;R++)g[C*c+R]+=n[M*c+R]}if(s)for(let _=0;_<c;_++)g[C*c+_]/=b-v;if(v=b,++b,x=C+1,C=E,b>o)break}return x<d&&g.fill(a,x*c,d*c),[g,h]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tUe=Dh(n=>Math.sqrt(n)),nUe=Mi(kE,n=>Math.sqrt(n)),rUe={kernelName:kE,backendName:"cpu",kernelFunc:nUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aie=Zs((n,e)=>{const t=n-e;return t*t}),iUe=Ta(OE,aie),sUe={kernelName:OE,backendName:"cpu",kernelFunc:iUe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oie=Dh((n,e)=>{const{pattern:t,replaceGlobal:r,rewrite:i}=e;return n.replace(new RegExp(t,r?"g":""),i)}),aUe=Zg($D,oie),oUe={kernelName:$D,backendName:"cpu",kernelFunc:aUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lie(n,e,t,r){const i=Ar(n,e.dtype);for(let s=0;s<i.size;s++){const a=i.indexToLoc(s),o=new Array(a.length);for(let l=0;l<o.length;l++)o[l]=a[l]*t[l]+r[l];i.set(e.get(...o),...a)}return i}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lUe{constructor(e,t,r,i,s,a){this.separator=pg(e),this.nGramWidths=t,this.leftPad=pg(r),this.rightPad=pg(i),this.padWidth=s,this.preserveShort=a}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,t){const r=this.getPadWidth(t);return Math.max(0,e+2*r-t+1)}createNGrams(e,t,r,i,s,a){for(let o=0;o<s;++o){const l=this.getPadWidth(a),c=Math.max(0,l-o),u=Math.max(0,l-(s-(o+1))),d=a-(c+u),h=t+(c>0?0:o-l);let p=0;p+=c*this.leftPad.length;for(let C=0;C<d;++C)p+=e[h+C].length;p+=u*this.rightPad.length;const g=c+u+d-1;p+=g*this.separator.length,r[i+o]=new Uint8Array(p);const v=r[i+o];let b=0;const x=C=>C.forEach(E=>v[b++]=E);for(let C=0;C<c;++C)x(this.leftPad),x(this.separator);for(let C=0;C<d-1;++C)x(e[h+C]),x(this.separator);if(d>0){x(e[h+d-1]);for(let C=0;C<u;++C)x(this.separator),x(this.rightPad)}else{for(let C=0;C<u-1;++C)x(this.rightPad),x(this.separator);x(this.rightPad)}}}compute(e,t){const r=e.length,i=t.length;if(i>0){let l=t[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let c=1;c<i;++c){let u=t[c]>=l;if(u=u&&t[c]<=r,!u)throw new Error(`Invalid split value ${t[c]}, must be in [${l}, ${r}]`);l=t[c]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const s=i-1,a=js("int32",i);if(r===0||i===0){const l=new Array(r);for(let c=0;c<=s;++c)a[c]=0;return[l,a]}a[0]=0;for(let l=1;l<=s;++l){const c=t[l]-t[l-1];let u=0;this.nGramWidths.forEach(d=>{u+=this.getNumNGrams(c,d)}),this.preserveShort&&c>0&&u===0&&(u=1),a[l]=a[l-1]+u}const o=new Array(a[s]);for(let l=0;l<s;++l){const c=t[l];let u=a[l];if(this.nGramWidths.forEach(d=>{const h=t[l+1]-t[l],p=this.getNumNGrams(h,d);this.createNGrams(e,c,o,u,p,d),u+=p}),this.preserveShort&&u===a[l]){const d=t[l+1]-t[l];if(d===0)continue;const h=d+2*this.padWidth;this.createNGrams(e,c,o,u,1,h)}}return[o,a]}}function cie(n,e,t,r,i,s,a,o){return new lUe(t,r,i,s,a,o).compute(n,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cUe(n,e,t,r){if(!n.length)return;if(e.length===0){for(let s=0;s<n.length;++s)r.push(n.subarray(s,s+1));return}if(e.length===1){const s=e[0];let a=n.indexOf(s);for(;a!==-1;){const o=n.subarray(0,a);(!t||o.length!==0)&&r.push(o),n=n.subarray(a+1),a=n.indexOf(s)}(!t||n.length!==0)&&r.push(n);return}let i=0;for(let s=0;s<n.length+1;s++)if(s===n.length||e.indexOf(n[s])!==-1){const a=n.subarray(i,s);(!t||a.length!==0)&&r.push(a),i=s+1}}function uie(n,e,t){const r=n.length,i=[];let s=0,a=0;const o=new Array(r);for(let h=0;h<r;++h){const p=i.length;cUe(n[h],e,t,i);const g=i.length-p;o[h]=g,s+=g,a=Math.max(a,g)}const l=js("int32",s*2),c=new Array(s),u=[r,a];let d=0;for(let h=0;h<r;++h)for(let p=0;p<o[h];++p)l[d*2]=h,l[d*2+1]=p,c[d]=i[d],++d;return[l,c,u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function die(n,e){const t=js("int32",n.length);for(let r=0;r<n.length;++r)t[r]=STe(n[r]).modulo(e).getLowBitsUnsigned();return t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fie=Zs((n,e)=>n-e),uUe=C5((n,e,t,r)=>({real:n-t,imag:e-r})),M5=Ta(BE,fie,uUe),dUe={kernelName:BE,backendName:"cpu",kernelFunc:M5};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hie(n,e){const t=new Array(n.rank);for(let i=0;i<t.length;i++)t[i]=n.shape[i]*e[i];const r=Ar(t,n.dtype);for(let i=0;i<r.values.length;++i){const s=r.indexToLoc(i),a=new Array(n.rank);for(let l=0;l<a.length;l++)a[l]=s[l]%n.shape[l];const o=n.locToIndex(a);r.values[i]=n.values[o]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tC=(n,e)=>{const t=e.value-n.value;return t===0?n.index-e.index:t};function pie(n,e,t=0,r=n.length-1){for(;r>t;){if(r-t>600){const o=r-t+1,l=e-t+1,c=Math.log(o),u=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*u*(o-u)/o)*Math.sign(l-o/2),h=Math.max(t,Math.floor(e-l*u/o+d)),p=Math.min(r,Math.floor(e+(o-l)*u/o+d));pie(n,e,h,p)}const i=n[e];let s=t,a=r;for(Sx(n,t,e),tC(n[r],i)>0&&Sx(n,t,r);s<a;){for(Sx(n,s,a),s++,a--;tC(n[s],i)<0;)s=s+1;for(;tC(n[a],i)>0;)a=a-1}tC(n[t],i)===0?Sx(n,t,a):(a=a+1,Sx(n,a,r)),a<=e&&(t=a+1),e<=a&&(r=a-1)}}function mie(n,e,t,r,i){const s=e[e.length-1],[a,o]=[n.length/s,s],l=so(t,a*r),c=so("int32",a*r);for(let d=0;d<a;d++){const h=d*o,p=n.subarray(h,h+o);let g=new Array(p.length);p.forEach((C,E)=>g[E]={value:C,index:E}),r<g.length&&(pie(g,r),g=g.slice(0,r)),i&&g.sort(tC);const v=d*r,b=l.subarray(v,v+r),x=c.subarray(v,v+r);for(let C=0;C<r;C++)b[C]=g[C].value,x[C]=g[C].index}const u=e.slice();return u[u.length-1]=r,[Ar(u,t,l),Ar(u,"int32",c)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gie(n,e,t,r){const i=Ir(e,t)[0],s=[1,t[0],1];for(let g=0;g<i;g++)s[0]*=t[g];s[1]=t[i];for(let g=i+1;g<t.length;g++)s[2]*=t[g];const a=new Map,o=new Int32Array(t[i]),l=new Ca(s,r,n),c=[],u=s[0]===1&&s[2]===1;for(let g=0;g<t[i];g++){let v;if(u)v=n[g].toString();else{const x=[];for(let C=0;C<s[0];C++)for(let E=0;E<s[2];E++)x.push(l.get(C,g,E));v=x.join(",")}const b=a.get(v);if(b!=null)o[g]=b;else{const x=a.size;a.set(v,x),o[g]=x,c.push(g)}}const d=s.slice();d[1]=a.size;const h=new Ca(d,r);c.forEach((g,v)=>{for(let b=0;b<s[0];b++)for(let x=0;x<s[2];x++)h.set(l.get(b,g,x),b,v,x)});const p=t.slice();return p[i]=d[1],{outputValues:h.values,outputShape:p,indices:o}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fUe=Object.freeze(Object.defineProperty({__proto__:null,addImpl:Ere,bincountImpl:_5,bincountReduceImpl:Are,bitwiseAndImpl:Tre,castImpl:_re,ceilImpl:Mre,concatImpl:Rre,equalImpl:Nre,expImpl:Dre,expm1Impl:Ore,floorDivImpl:$re,floorImpl:Bre,gatherNdImpl:Lre,gatherV2Impl:Fre,greaterEqualImpl:Ure,greaterImpl:Pre,lessEqualImpl:Hre,lessImpl:zre,linSpaceImpl:Vre,logImpl:Gre,maxImpl:Wre,maximumImpl:jre,minimumImpl:qre,multiplyImpl:E5,negImpl:Xre,notEqualImpl:Kre,prodImpl:Yre,raggedGatherImpl:Jre,raggedRangeImpl:Zre,raggedTensorToTensorImpl:Qre,rangeImpl:eie,rsqrtImpl:tie,scatterImpl:By,sigmoidImpl:Z4e,simpleAbsImpl:Cre,sliceImpl:rie,sparseFillEmptyRowsImpl:iie,sparseReshapeImpl:sie,sparseSegmentReductionImpl:T5,sqrtImpl:tUe,squaredDifferenceImpl:aie,staticRegexReplaceImpl:oie,stridedSliceImpl:lie,stringNGramsImpl:cie,stringSplitImpl:uie,stringToHashBucketFastImpl:die,subImpl:fie,tileImpl:hie,topKImpl:mie,transposeImpl:A5,uniqueImpl:gie},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */VZ("cpu",()=>new C3,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yie=Mi(iE,n=>n>=0?n:Math.exp(n)-1),hUe={kernelName:iE,backendName:"cpu",kernelFunc:yie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vie(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{alpha:s}=r;Cn([i],"leakyRelu");const a=xt(i.shape),o=t.data.get(i.dataId).values,l=so("float32",a);for(let c=0;c<o.length;c++)l[c]=o[c]<0?s*o[c]:o[c];return t.makeTensorInfo(i.shape,"float32",l)}const pUe={kernelName:sD,backendName:"cpu",kernelFunc:vie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mUe=Zs((n,e)=>n<0?e*n:n);function bie(n){const{inputs:e,backend:t}=n,{x:r,alpha:i}=e;Cn([r,i],"prelu");const s=t.data.get(r.dataId).values,a=t.data.get(i.dataId).values,[o,l]=mUe(r.shape,i.shape,s,a,"float32");return t.makeTensorInfo(l,"float32",o)}const gUe={kernelName:_D,backendName:"cpu",kernelFunc:bie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xie=Mi(CE,n=>Math.max(0,n)),yUe={kernelName:CE,backendName:"cpu",kernelFunc:xie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sie=Mi(_E,n=>Math.min(Math.max(0,n),6)),vUe={kernelName:_E,backendName:"cpu",kernelFunc:Sie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bN(n,e,t,r,i){if(t==="linear")return Th({inputs:{x:e},backend:n});if(t==="relu")return xie({inputs:{x:e},backend:n});if(t==="elu")return yie({inputs:{x:e},backend:n});if(t==="relu6")return Sie({inputs:{x:e},backend:n});if(t==="prelu")return bie({inputs:{x:e,alpha:r},backend:n});if(t==="leakyrelu")return vie({inputs:{x:e},backend:n,attrs:{alpha:i}});if(t==="sigmoid")return nie({inputs:{x:e},backend:n});throw new Error(`Activation ${t} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qi(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{shape:s}=r,a=xt(i.shape),o=bZ(s,a),l=xt(o);de(a===l,()=>`The new shape (${o}) has ${l} elements and the old shape (${i.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`),t.incRef(i.dataId);const c=t.data.get(i.dataId);if(c.complexTensorInfos!=null){const u=c.complexTensorInfos.real,d=c.complexTensorInfos.imag;u.shape=o,d.shape=o}return{dataId:i.dataId,shape:o,dtype:i.dtype}}const bUe={kernelName:AD,backendName:"cpu",kernelFunc:Qi};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wie(n){const{inputs:e,backend:t,attrs:r}=n,{a:i,b:s}=e,{transposeA:a,transposeB:o}=r;Cn([i,s],"matMul");const l=i.shape.length,c=s.shape.length,u=a?i.shape[l-2]:i.shape[l-1],d=o?s.shape[c-1]:s.shape[c-2],h=a?i.shape[l-1]:i.shape[l-2],p=o?s.shape[c-2]:s.shape[c-1],g=i.shape.slice(0,-2),v=s.shape.slice(0,-2),b=xt(g),x=xt(v),E=hr(i.shape.slice(0,-2),s.shape.slice(0,-2)).concat([h,p]);de(u===d,()=>`Error in matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${i.shape} and ${s.shape} and transposeA=${a} and transposeB=${o} must match.`);const _=a?[b,u,h]:[b,h,u],M=o?[x,p,d]:[x,d,p],R=Qi({inputs:{x:i},backend:t,attrs:{shape:_}}),L=Qi({inputs:{x:s},backend:t,attrs:{shape:M}}),$=a?R.shape[1]:R.shape[2],N=a?R.shape[2]:R.shape[1],I=o?L.shape[1]:L.shape[2],k=Math.max(b,x),P=t.data.get(R.dataId).values,G=t.data.get(L.dataId).values,W=kn(R.shape),X=kn(L.shape),[z,J,Q]=a?[W[0],1,W[1]]:[W[0],W[1],1],[Y,q,te]=o?[1,X[1],X[0]]:[X[1],1,X[0]],ne=N*I,le=Ar([k,N,I],R.dtype),ye=le.values,ue=t.blockSize;for(let ve=0;ve<k;ve++){const xe=ve%b,Pe=ve%x;for(let ze=0;ze<N;ze+=ue){const Ke=Math.min(ze+ue,N);for(let pt=0;pt<I;pt+=ue){const dt=Math.min(pt+ue,I);for(let pe=0;pe<$;pe+=ue){const Le=Math.min(pe+ue,$);for(let Ue=ze;Ue<Ke;Ue++)for(let Ze=pt;Ze<dt;Ze++){let je=0;for(let lt=pe;lt<Le;lt++){const st=P[xe*z+Ue*J+lt*Q],ot=G[lt*Y+Ze*q+Pe*te];je+=st*ot}ye[ve*ne+(Ue*I+Ze)]+=je}}}}}return t.disposeIntermediateTensorInfo(R),t.disposeIntermediateTensorInfo(L),t.makeTensorInfo(E,le.dtype,le.values)}const xUe={kernelName:VI,backendName:"cpu",kernelFunc:wie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SUe(n){const{inputs:e,backend:t,attrs:r}=n,{a:i,b:s,bias:a,preluActivationWeights:o}=e,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=r;let h,p,g;const v=[];h=wie({inputs:{a:i,b:s},attrs:{transposeA:l,transposeB:c},backend:t}),a&&(p=y1({inputs:{a:h,b:a},backend:t}),v.push(h),h=p),u&&(g=bN(t,h,u,o,d),v.push(h),h=g);for(const x of v)t.disposeIntermediateTensorInfo(x);return h}const wUe={kernelName:ZR,backendName:"cpu",kernelFunc:SUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CUe=Mi(W_,n=>Math.acos(n)),_Ue={kernelName:W_,backendName:"cpu",kernelFunc:CUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EUe=Mi(j_,n=>Math.acosh(n)),AUe={kernelName:j_,backendName:"cpu",kernelFunc:EUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TUe(n){const{inputs:e,backend:t}=n,r=e;Cn(e,"addN");const i=r.map(o=>t.data.get(o.dataId).values),s=Ar(r[0].shape,r[0].dtype),a=s.values;for(let o=0;o<r.length;o++){const l=i[o];for(let c=0;c<a.length;c++)a[c]+=l[c]}return t.makeTensorInfo(s.shape,s.dtype,s.values)}const MUe={kernelName:FI,backendName:"cpu",kernelFunc:TUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RUe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{axis:s,keepDims:a}=r;Cn(i,"all");const o=Ir(s,i.shape);let l=o;const c=ws(l,i.shape.length);let u=i;c!=null&&(u=Hl({inputs:{x:i},backend:t,attrs:{perm:c}}),l=Ys(l.length,i.shape.length)),lo("all",l,u.shape.length);const[d,h]=Ga(u.shape,l),p=xt(h),g=Io(xt(d),u.dtype),v=t.data.get(u.dataId).values;for(let x=0;x<g.length;++x){const C=x*p;let E=v[C];for(let _=0;_<p;++_){const M=v[C+_];E=E&&M}g[x]=E}c!=null&&t.disposeIntermediateTensorInfo(u);const b=t.makeTensorInfo(d,u.dtype,g);if(a){const x=Xs(d,o),C=Qi({inputs:{x:b},backend:t,attrs:{shape:x}});return t.disposeIntermediateTensorInfo(b),C}return b}const NUe={kernelName:$4,backendName:"cpu",kernelFunc:RUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IUe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{axis:s,keepDims:a}=r;Cn(i,"any");const o=Ir(s,i.shape);let l=o;const c=ws(l,i.shape.length);let u=i;c!=null&&(u=Hl({inputs:{x:i},backend:t,attrs:{perm:c}}),l=Ys(l.length,i.shape.length)),lo("any",l,u.shape.length);const[d,h]=Ga(u.shape,l),p=xt(h),g=Io(xt(d),u.dtype),v=t.data.get(u.dataId).values;for(let x=0;x<g.length;++x){const C=x*p;let E=v[C];for(let _=0;_<p;++_){const M=v[C+_];E=E||M}g[x]=E}c!=null&&t.disposeIntermediateTensorInfo(u);const b=t.makeTensorInfo(d,u.dtype,g);if(a){const x=Xs(d,o),C=Qi({inputs:{x:b},backend:t,attrs:{shape:x}});return t.disposeIntermediateTensorInfo(b),C}return b}const DUe={kernelName:L4,backendName:"cpu",kernelFunc:IUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kUe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{axis:s}=r;Cn(i,"argMax");let a=Ir(s,i.shape);const o=ws(a,i.shape.length);let l=i;const c=[];o!=null&&(l=Hl({inputs:{x:i},backend:t,attrs:{perm:o}}),c.push(l),a=Ys(a.length,l.shape.length)),a=[a[0]],lo("argMax",a,l.shape.length);const[u,d]=Ga(l.shape,a),h=xt(u),p=Io(h,"int32"),g=xt(d),v=t.data.get(l.dataId).values;for(let b=0;b<p.length;++b){const x=b*g;let C=v[x],E=0;for(let _=0;_<g;++_){const M=v[x+_];M>C&&(C=M,E=_)}p[b]=E}return c.forEach(b=>t.disposeIntermediateTensorInfo(b)),t.makeTensorInfo(u,"int32",p)}const OUe={kernelName:PI,backendName:"cpu",kernelFunc:kUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BUe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{axis:s}=r;Cn(i,"argMin");let a=Ir(s,i.shape);const o=ws(a,i.shape.length);let l=i;const c=[];o!=null&&(l=Hl({inputs:{x:i},backend:t,attrs:{perm:o}}),c.push(l),a=Ys(a.length,l.shape.length)),a=[a[0]],lo("argMin",a,l.shape.length);const[u,d]=Ga(l.shape,a),h=xt(u),p=Io(h,"int32"),g=xt(d),v=t.data.get(l.dataId).values;for(let b=0;b<p.length;++b){const x=b*g;let C=v[x],E=0;for(let _=0;_<g;++_){const M=v[x+_];M<C&&(C=M,E=_)}p[b]=E}return c.forEach(b=>t.disposeIntermediateTensorInfo(b)),t.makeTensorInfo(u,"int32",p)}const $Ue={kernelName:UI,backendName:"cpu",kernelFunc:BUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LUe=Mi(q_,n=>Math.asin(n)),FUe={kernelName:q_,backendName:"cpu",kernelFunc:LUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PUe=Mi(X_,n=>Math.asinh(n)),UUe={kernelName:X_,backendName:"cpu",kernelFunc:PUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zUe=Mi(K_,n=>Math.atan(n)),HUe={kernelName:K_,backendName:"cpu",kernelFunc:zUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VUe=Zs((n,e)=>Math.atan2(n,e)),GUe=Ta(J_,VUe),WUe={kernelName:J_,backendName:"cpu",kernelFunc:GUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jUe=Mi(Y_,n=>Math.atanh(n)),qUe={kernelName:Y_,backendName:"cpu",kernelFunc:jUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R5(n,e,t,r,i,s){const a=i.strideHeight,o=i.strideWidth,l=i.dilationHeight,c=i.dilationWidth,u=i.effectiveFilterHeight,d=i.effectiveFilterWidth,h=i.padInfo.top,p=i.padInfo.left,g=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=Ar(i.outShape,t),b=v.values,x=i.outShape[1]*i.outShape[2]*i.outShape[3],C=i.outShape[2]*i.outShape[3],E=i.outShape[3];for(let _=0;_<i.batchSize;++_){const M=_*x,R=_*r[0];for(let L=0;L<i.inChannels;++L)for(let $=0;$<i.outHeight;++$){const N=$*a-h,I=Math.max(0,N),k=Math.min(i.inHeight,u+N),P=M+$*C;for(let G=0;G<i.outWidth;++G){const W=G*o-p,X=Math.max(0,W),z=Math.min(i.inWidth,d+W);let J=g,Q=0,Y=0;for(let te=I;te<k;te+=l){const ne=R+te*r[1];for(let le=X;le<z;le+=c){const ye=ne+le*r[2],ue=n[ye+L];s==="max"&&ue>J?J=ue:s==="avg"&&(Q+=ue,Y++)}if(isNaN(J))break}const q=P+G*E+L;b[q]=s==="avg"?Q/Y:J}}}return v}function Cie(n,e,t,r,i=!1,s=!1){const a=Ar(r.outShape,"int32"),o=r.strideHeight,l=r.strideWidth,c=r.dilationHeight,u=r.dilationWidth,d=r.effectiveFilterHeight,h=r.effectiveFilterWidth,p=r.padInfo.top,g=r.padInfo.left,v=Ar(e,t,n);for(let b=0;b<r.batchSize;++b)for(let x=0;x<r.inChannels;++x)for(let C=0;C<r.outHeight;++C){const E=C*o-p;let _=E;for(;_<0;)_+=c;const M=Math.min(r.inHeight,d+E);for(let R=0;R<r.outWidth;++R){const L=R*l-g;let $=L;for(;$<0;)$+=u;const N=Math.min(r.inWidth,h+L);let I=Number.NEGATIVE_INFINITY,k=-1;for(let P=_;P<M;P+=c){const G=P-E;for(let W=$;W<N;W+=u){const X=W-L,z=v.get(b,P,W,x);z>I&&(I=z,i?k=s?((b*r.inHeight+P)*r.inWidth+W)*r.inChannels+x:(P*r.inWidth+W)*r.inChannels+x:k=G*h+X)}}a.set(k,b,C,R,x)}}return a}function _ie(n,e,t,r,i,s){const a=i.strideDepth,o=i.strideHeight,l=i.strideWidth,c=i.dilationDepth,u=i.dilationHeight,d=i.dilationWidth,h=i.effectiveFilterDepth,p=i.effectiveFilterHeight,g=i.effectiveFilterWidth,v=i.padInfo.front,b=i.padInfo.top,x=i.padInfo.left,C=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,E=Ar(i.outShape,t),_=E.values,M=i.outShape[1]*i.outShape[2]*i.outShape[3]*i.outShape[4],R=i.outShape[2]*i.outShape[3]*i.outShape[4],L=i.outShape[3]*i.outShape[4],$=i.outShape[4];for(let N=0;N<i.batchSize;++N){const I=N*M,k=N*r[0];for(let P=0;P<i.inChannels;++P)for(let G=0;G<i.outDepth;++G){const W=G*a-v;let X=W;for(;X<0;)X+=c;const z=Math.min(i.inDepth,h+W),J=I+G*R;for(let Q=0;Q<i.outHeight;++Q){const Y=Q*o-b;let q=Y;for(;q<0;)q+=u;const te=Math.min(i.inHeight,p+Y),ne=J+Q*L;for(let le=0;le<i.outWidth;++le){const ye=le*l-x;let ue=ye;for(;ue<0;)ue+=d;const ve=Math.min(i.inWidth,g+ye),xe=ne+le*$;let Pe=C,ze=0,Ke=0;for(let dt=X;dt<z;dt+=c){const pe=k+dt*r[1];for(let Le=q;Le<te;Le+=u){const Ue=pe+Le*r[2];for(let Ze=ue;Ze<ve;Ze+=d){const je=Ue+Ze*r[3],lt=n[je+P];if(s==="max"&&lt>Pe?Pe=lt:s==="avg"&&(ze+=lt,Ke++),isNaN(Pe))break}if(isNaN(Pe))break}if(isNaN(Pe))break}const pt=xe+P;_[pt]=s==="avg"?ze/Math.max(Ke,1):Pe}}}}return E}function XUe(n,e){const t=Ar(e.outShape,"int32"),r=e.strideDepth,i=e.strideHeight,s=e.strideWidth,a=e.dilationDepth,o=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,u=e.effectiveFilterHeight,d=e.effectiveFilterWidth,h=e.padInfo.front,p=e.padInfo.top,g=e.padInfo.left;for(let v=0;v<e.batchSize;++v)for(let b=0;b<e.inChannels;++b)for(let x=0;x<e.outDepth;++x){const C=x*r-h;let E=C;for(;E<0;)E+=a;const _=Math.min(e.inDepth,c+C);for(let M=0;M<e.outHeight;++M){const R=M*i-p;let L=R;for(;L<0;)L+=o;const $=Math.min(e.inHeight,u+R);for(let N=0;N<e.outWidth;++N){const I=N*s-g;let k=I;for(;k<0;)k+=l;const P=Math.min(e.inWidth,d+I);let G=Number.NEGATIVE_INFINITY,W=-1;for(let X=E;X<_;X+=a){const z=X-C;for(let J=L;J<$;J+=o){const Q=J-R;for(let Y=k;Y<P;Y+=l){const q=Y-I,te=n.get(v,X,J,Y,b);te>=G&&(G=te,W=z*u*d+Q*u+q)}}}t.set(W,v,x,M,N,b)}}}return t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KUe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e;Cn(i,"avgPool");const{filterSize:s,strides:a,pad:o,dimRoundingMode:l}=r,c=1;de(oo(a,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);const u=ed(i.shape,s,a,c,o,l);let d;if(u.filterWidth===1&&u.filterHeight===1&&Vr(u.inShape,u.outShape))d=Th({inputs:{x:i},backend:t});else{const h=t.data.get(i.dataId).values,p=kn(i.shape),g=R5(h,i.shape,i.dtype,p,u,"avg");d=t.makeTensorInfo(u.outShape,i.dtype,g.values)}return d}const YUe={kernelName:zI,backendName:"cpu",kernelFunc:KUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JUe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{filterSize:s,strides:a,pad:o,dimRoundingMode:l,dataFormat:c}=r;Cn(i,"avgPool3d");const u=Qp(i.shape,s,a,1,o,l,c),d=t.data.get(i.dataId).values,h=_ie(d,i.shape,i.dtype,kn(i.shape),u,"avg");return t.makeTensorInfo(h.shape,"float32",h.values)}const ZUe={kernelName:HI,backendName:"cpu",kernelFunc:JUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QUe(n){const{inputs:e,backend:t,attrs:r}=n,{dy:i,input:s}=e,{filterSize:a,strides:o,pad:l,dimRoundingMode:c}=r;Cn([i,s],"avgPool3DGrad");const u=Qp(s.shape,a,o,1,l,c),d=u.strideDepth,h=u.strideHeight,p=u.strideWidth,g=u.filterDepth,v=u.filterHeight,b=u.filterWidth,x=u.dilationDepth,C=u.dilationHeight,E=u.dilationWidth,_=u.effectiveFilterDepth,M=u.effectiveFilterHeight,R=u.effectiveFilterWidth,L=_-1-u.padInfo.front,$=R-1-u.padInfo.left,N=M-1-u.padInfo.top,I=Ar(s.shape,"float32"),k=1/(g*v*b),P=t.bufferSync(i);for(let G=0;G<u.batchSize;++G)for(let W=0;W<u.inChannels;++W)for(let X=0;X<u.inDepth;++X)for(let z=0;z<u.inHeight;++z)for(let J=0;J<u.inWidth;++J){const Q=X-L,Y=z-N,q=J-$;let te=0;for(let ne=0;ne<_;ne+=x){const le=(Q+ne)/d;if(!(le<0||le>=u.outDepth||Math.floor(le)!==le))for(let ye=0;ye<M;ye+=C){const ue=(Y+ye)/h;if(!(ue<0||ue>=u.outHeight||Math.floor(ue)!==ue))for(let ve=0;ve<R;ve+=E){const xe=(q+ve)/p;if(xe<0||xe>=u.outWidth||Math.floor(xe)!==xe)continue;const Pe=P.get(G,le,ue,xe,W);te+=Pe}}}I.set(te*k,G,X,z,J,W)}return t.makeTensorInfo(I.shape,I.dtype,I.values)}const eze={kernelName:P4,backendName:"cpu",kernelFunc:QUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tze(n){const{inputs:e,backend:t,attrs:r}=n,{dy:i,input:s}=e,a=s;Cn([i,s],"avgPoolGrad");const{filterSize:o,strides:l,pad:c}=r,u=ed(a.shape,o,l,1,c),d=u.strideHeight,h=u.strideWidth,p=u.filterHeight,g=u.filterWidth,v=u.dilationHeight,b=u.dilationWidth,x=u.effectiveFilterHeight,C=u.effectiveFilterWidth,E=C-1-u.padInfo.left,_=x-1-u.padInfo.top,M=Ar(a.shape,"float32"),R=1/(p*g),L=t.data.get(i.dataId).values,$=Ar(i.shape,"float32",L);for(let N=0;N<u.batchSize;++N)for(let I=0;I<u.inChannels;++I)for(let k=0;k<u.inHeight;++k)for(let P=0;P<u.inWidth;++P){const G=k-_,W=P-E;let X=0;for(let z=0;z<x;z+=v){const J=(G+z)/d;if(!(J<0||J>=u.outHeight||Math.floor(J)!==J))for(let Q=0;Q<C;Q+=b){const Y=(W+Q)/h;if(Y<0||Y>=u.outWidth||Math.floor(Y)!==Y)continue;const q=$.get(N,J,Y,I);X+=q}}M.set(X*R,N,k,P,I)}return t.makeTensorInfo(M.shape,M.dtype,M.values)}const nze={kernelName:F4,backendName:"cpu",kernelFunc:tze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rze(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,scale:s,offset:a,mean:o,variance:l}=e;de(o.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),de(a==null||o.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),de(s==null||o.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),Cn([i,o,l,s,a],"batchNorm");let{varianceEpsilon:c}=r;c==null&&(c=.001);const u=t.data.get(i.dataId).values,d=t.data.get(o.dataId).values,h=t.data.get(l.dataId).values,p=s?t.data.get(s.dataId).values:new Float32Array([1]),g=a?t.data.get(a.dataId).values:new Float32Array([0]),v=new Float32Array(u.length),b=g.length,x=p.length,C=h.length,E=d.length;let _=0,M=0,R=0,L=0;for(let $=0;$<u.length;++$)v[$]=g[_++]+(u[$]-d[M++])*p[R++]/Math.sqrt(h[L++]+c),_>=b&&(_=0),M>=E&&(M=0),R>=x&&(R=0),L>=C&&(L=0);return t.makeTensorInfo(i.shape,i.dtype,v)}const ize={kernelName:nD,backendName:"cpu",kernelFunc:rze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sze(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{blockShape:s,crops:a}=r;Cn([i],"batchToSpaceND");const o=s.reduce((x,C)=>x*C),l=XE(i.shape,s,o),c=KE(l.length,s.length),u=YE(i.shape,s,o),d=Fz(a,s.length),h=Pz(u,a,s.length),p=Qi({inputs:{x:i},backend:t,attrs:{shape:l}}),g=Hl({inputs:{x:p},backend:t,attrs:{perm:c}}),v=Qi({inputs:{x:g},backend:t,attrs:{shape:u}}),b=vv({inputs:{x:v},backend:t,attrs:{begin:d,size:h}});return t.disposeIntermediateTensorInfo(p),t.disposeIntermediateTensorInfo(g),t.disposeIntermediateTensorInfo(v),b}const aze={kernelName:GI,backendName:"cpu",kernelFunc:sze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oze(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,weights:s}=e,{size:a}=r,o=t.data.get(i.dataId).values,l=t.data.get(s.dataId).values,c=_5(o,l,s.dtype,s.shape,a);return t.makeTensorInfo([a],s.dtype,c)}const lze={kernelName:U4,backendName:"cpu",kernelFunc:oze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cze(n){const{inputs:e,backend:t}=n,{s0:r,s1:i}=e,s=t.data.get(r.dataId).values,a=t.data.get(i.dataId).values,o=hr(Array.from(s),Array.from(a));return t.makeTensorInfo([o.length],"int32",Int32Array.from(o))}const uze={kernelName:z4,backendName:"cpu",kernelFunc:cze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dze=Mi(eE,(n,e)=>{const t=e;return n>t.clipValueMax?t.clipValueMax:n<t.clipValueMin?t.clipValueMin:n}),fze={kernelName:eE,backendName:"cpu",kernelFunc:dze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hze=n=>{const{x:e}=n.inputs,t=n.backend,r=new Float32Array(xt(e.shape)),i=t.data.get(e.dataId),s=i.complexTensorInfos.real,a=i.complexTensorInfos.imag,o=t.data.get(s.dataId).values,l=t.data.get(a.dataId).values;for(let c=0;c<o.length;c++){const u=o[c],d=l[c];r[c]=Math.hypot(u,d)}return t.makeOutput(r,e.shape,"float32")},pze={kernelName:jI,backendName:"cpu",kernelFunc:hze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v1(n){const{inputs:e,backend:t}=n,{input:r}=e,i=t.data.get(r.dataId).complexTensorInfos.imag,s=t.data.get(i.dataId).values;return t.makeTensorInfo(i.shape,i.dtype,s)}const mze={kernelName:aU,backendName:"cpu",kernelFunc:v1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b1(n){const{inputs:e,backend:t,attrs:r}=n,{axis:i}=r,s=Ir(i,e[0].shape)[0],a=e.map(v=>v.shape);Bz(a,s);let o=hh(e.map(v=>v.shape),s);if(xt(o)===0)return t.makeTensorInfo(o,e[0].dtype,[]);const l=e.filter(v=>xt(v.shape)>0);if(l.length===1)return Th({inputs:{x:l[0]},backend:t});if(l[0].dtype==="complex64"){const v=l.map(_=>yv({inputs:{input:_},backend:t})),b=l.map(_=>v1({inputs:{input:_},backend:t})),x=b1({inputs:v,backend:t,attrs:{axis:s}}),C=b1({inputs:b,backend:t,attrs:{axis:s}}),E=mc({inputs:{real:x,imag:C},backend:t});return v.forEach(_=>t.disposeIntermediateTensorInfo(_)),b.forEach(_=>t.disposeIntermediateTensorInfo(_)),t.disposeIntermediateTensorInfo(x),t.disposeIntermediateTensorInfo(C),E}const c=l.map(v=>{const x=[-1,xt(v.shape.slice(s))];return Qi({inputs:{x:v},backend:t,attrs:{shape:x}})}),u=c.map(v=>({vals:t.data.get(v.dataId).values,shape:v.shape}));o=hh(c.map(v=>v.shape),1);const d=c[0].shape[0]===1,h=Rre(u,o,e[0].dtype,d),p=hh(l.map(v=>v.shape),s),g=t.makeTensorInfo(p,e[0].dtype,h);return c.forEach(v=>t.disposeIntermediateTensorInfo(v)),g}const gze={kernelName:qI,backendName:"cpu",kernelFunc:b1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eie(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,filter:s}=e,{strides:a,pad:o,dataFormat:l,dilations:c,dimRoundingMode:u}=r;Cn([i,s],"conv2d");const d=em(l),h=Va(i.shape,s.shape,a,c,o,u,!1,d),p=h.filterHeight,g=h.filterWidth,v=h.dilationHeight,b=h.dilationWidth,x=h.padInfo.left,C=h.padInfo.top,E=h.dataFormat==="channelsLast",_=new Ca(h.outShape,i.dtype),M=kn(i.shape),R=kn(s.shape),L=M[0],$=E?M[1]:M[2],N=E?M[2]:1,I=E?1:M[1],k=_.strides[0],P=E?_.strides[1]:_.strides[2],G=E?_.strides[2]:1,W=E?1:_.strides[1],X=t.data.get(i.dataId).values,z=t.data.get(s.dataId).values,J=_.values;for(let Q=0;Q<h.batchSize;++Q){const Y=Q*L,q=Q*k;for(let te=0;te<h.outHeight;++te){const ne=q+te*P,le=te*h.strideHeight-C;for(let ye=0;ye<p;++ye){const ue=le+ye*v;if(ue<0||ue>=h.inHeight)continue;const ve=ye*R[0],xe=Y+ue*$;for(let Pe=0;Pe<h.outWidth;++Pe){const ze=ne+Pe*G,Ke=Pe*h.strideWidth-x;for(let pt=0;pt<g;++pt){const dt=Ke+pt*b;if(dt<0||dt>=h.inWidth)continue;const pe=ve+pt*R[1],Le=xe+dt*N;let Ue=pe;for(let Ze=0;Ze<h.inChannels;++Ze){const je=X[Le+Ze*I];for(let lt=0;lt<h.outChannels;++lt)J[ze+lt*W]+=je*z[Ue+lt];Ue+=h.outChannels}}}}}}return t.makeTensorInfo(_.shape,_.dtype,J)}const yze={kernelName:XI,backendName:"cpu",kernelFunc:Eie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vze(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,dy:s}=e,{strides:a,pad:o,dataFormat:l,dimRoundingMode:c,filterShape:u}=r;Cn([i,s],"conv2dBackpropFilter");const d=em(l),h=Va(i.shape,u,a,1,o,c,!1,d),{strideHeight:p,strideWidth:g,filterHeight:v,filterWidth:b}=h,x=h.dataFormat==="channelsLast",C=new Ca(h.filterShape,"float32"),E=h.padInfo.left,_=h.padInfo.top,M=t.data.get(i.dataId).values,R=t.data.get(s.dataId).values,L=new Ca(i.shape,i.dtype,M),$=new Ca(s.shape,s.dtype,R);for(let N=0;N<v;++N){const I=Math.max(0,Math.ceil((_-N)/p)),k=Math.min(h.outHeight,(h.inHeight+_-N)/p);for(let P=0;P<b;++P){const G=Math.max(0,Math.ceil((E-P)/g)),W=Math.min(h.outWidth,(h.inWidth+E-P)/g);for(let X=0;X<h.inChannels;++X)for(let z=0;z<h.outChannels;++z){let J=0;for(let Q=0;Q<h.batchSize;++Q)for(let Y=I;Y<k;++Y){const q=N+Y*p-_;for(let te=G;te<W;++te){const ne=P+te*g-E;x?J+=L.get(Q,q,ne,X)*$.get(Q,Y,te,z):J+=L.get(Q,X,q,ne)*$.get(Q,z,Y,te)}}C.set(J,N,P,X,z)}}}return t.makeTensorInfo(C.shape,C.dtype,C.values)}const bze={kernelName:V4,backendName:"cpu",kernelFunc:vze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xze(n){const{inputs:e,backend:t,attrs:r}=n,{dy:i,filter:s}=e,{inputShape:a,strides:o,pad:l,dataFormat:c,dimRoundingMode:u}=r;Cn([i,s],"conv2dBackpropInput");const d=kn(s.shape),h=kn(i.shape);let p=em(c);const g=Va(a,s.shape,o,1,l,u,!1,p),v=new Ca(g.inShape,"float32"),b=v.values,x=t.data.get(i.dataId).values,C=t.data.get(s.dataId).values,[E,_,M]=d,{batchSize:R,filterHeight:L,filterWidth:$,inChannels:N,inHeight:I,inWidth:k,outChannels:P,outHeight:G,outWidth:W,strideHeight:X,strideWidth:z}=g;p=g.dataFormat;const J=L-1-g.padInfo.top,Q=$-1-g.padInfo.left,Y=p==="channelsLast",q=v.strides[0],te=Y?v.strides[1]:v.strides[2],ne=Y?v.strides[2]:1,le=Y?1:v.strides[1],ye=h[0],ue=Y?h[1]:h[2],ve=Y?h[2]:1,xe=Y?1:h[1];for(let Pe=0;Pe<R;++Pe)for(let ze=0;ze<N;++ze)for(let Ke=0;Ke<I;++Ke){const pt=Ke-J,dt=Math.max(0,Math.ceil(pt/X)),pe=Math.min(G,(L+pt)/X);for(let Le=0;Le<k;++Le){const Ue=Le-Q,Ze=Math.max(0,Math.ceil(Ue/z)),je=Math.min(W,($+Ue)/z);let lt=0;for(let ot=dt;ot<pe;++ot){const Ut=ot*X-pt;for(let mt=Ze;mt<je;++mt){const ce=mt*z-Ue,re=ye*Pe+ue*ot+ve*mt,$e=E*(L-1-Ut)+_*($-1-ce)+M*ze;for(let Xe=0;Xe<P;++Xe){const at=x[re+xe*Xe],et=C[$e+Xe];lt+=at*et}}}const st=q*Pe+te*Ke+ne*Le+le*ze;b[st]=lt}}return t.makeTensorInfo(v.shape,v.dtype,v.values)}const Sze={kernelName:KI,backendName:"cpu",kernelFunc:xze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wze(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,filter:s}=e,{strides:a,pad:o,dilations:l}=r;Cn([i,s],"conv3d");const c=jg(i.shape,s.shape,a,l,o),{filterDepth:u,filterHeight:d,filterWidth:h,dilationDepth:p,dilationHeight:g,dilationWidth:v,padInfo:b}=c,x=b.front,C=b.left,E=b.top,_=new Ca(c.outShape,i.dtype),M=t.data.get(i.dataId).values,R=t.data.get(s.dataId).values,L=_.values,$=kn(i.shape),N=kn(s.shape);for(let I=0;I<c.batchSize;++I){const k=I*$[0],P=I*_.strides[0];for(let G=0;G<c.outDepth;++G){const W=P+G*_.strides[1],X=G*c.strideDepth-x;for(let z=0;z<u;++z){const J=X+z*p;if(J<0||J>=c.inDepth)continue;const Q=z*N[0],Y=k+J*$[1];for(let q=0;q<c.outHeight;++q){const te=W+q*_.strides[2],ne=q*c.strideHeight-E;for(let le=0;le<d;++le){const ye=ne+le*g;if(ye<0||ye>=c.inHeight)continue;const ue=Q+le*N[1],ve=Y+ye*$[2];for(let xe=0;xe<c.outWidth;++xe){const Pe=te+xe*c.outChannels,ze=xe*c.strideWidth-C;for(let Ke=0;Ke<h;++Ke){const pt=ze+Ke*v;if(pt<0||pt>=c.inWidth)continue;const dt=ue+Ke*N[2],pe=ve+pt*c.inChannels;let Le=dt;for(let Ue=0;Ue<c.inChannels;++Ue){const Ze=M[pe+Ue];for(let je=0;je<c.outChannels;++je)L[Pe+je]+=Ze*R[Le+je];Le+=c.outChannels}}}}}}}}return t.makeTensorInfo(_.shape,_.dtype,_.values)}const Cze={kernelName:YI,backendName:"cpu",kernelFunc:wze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ze(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,dy:s}=e,{strides:a,pad:o,filterShape:l}=r;Cn([i,s],"conv3dBackpropFilterV2");const c=kn(i.shape),u=kn(s.shape),d=jg(i.shape,l,a,1,o),h=d.strideDepth,p=d.strideHeight,g=d.strideWidth,v=d.filterDepth,b=d.filterHeight,x=d.filterWidth,C=new Ca(d.filterShape,"float32"),E=C.values,[_,M,R,L]=C.strides,$=t.data.get(s.dataId).values,[N,I,k,P]=u,G=t.data.get(i.dataId).values,[W,X,z,J]=c,Q=d.padInfo.front,Y=d.padInfo.left,q=d.padInfo.top;for(let te=0;te<v;++te){const ne=Math.max(0,Math.ceil((Q-te)/h)),le=Math.min(d.outDepth,(d.inDepth+Q-te)/h),ye=te*_;for(let ue=0;ue<b;++ue){const ve=Math.max(0,Math.ceil((q-ue)/p)),xe=Math.min(d.outHeight,(d.inHeight+q-ue)/p),Pe=ue*M+ye;for(let ze=0;ze<x;++ze){const Ke=Math.max(0,Math.ceil((Y-ze)/g)),pt=Math.min(d.outWidth,(d.inWidth+Y-ze)/g),dt=ze*R+Pe;for(let pe=0;pe<d.inChannels;++pe){const Le=pe*L+dt;for(let Ue=0;Ue<d.outChannels;++Ue){let Ze=0;for(let je=0;je<d.batchSize;++je){const lt=je*W,st=je*N;for(let ot=ne;ot<le;++ot){const mt=(te+ot*h-Q)*X+lt,ce=ot*I+st;for(let re=ve;re<xe;++re){const Xe=(ue+re*p-q)*z+mt,at=re*k+ce;for(let et=Ke;et<pt;++et){const At=(ze+et*g-Y)*J+Xe,_t=et*P+at;Ze+=G[At+pe]*$[_t+Ue]}}}}E[Le+Ue]=Ze}}}}}return t.makeTensorInfo(C.shape,C.dtype,C.values)}const Eze={kernelName:G4,backendName:"cpu",kernelFunc:_ze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aze(n){const{inputs:e,backend:t,attrs:r}=n,{dy:i,filter:s}=e,{pad:a,strides:o,inputShape:l}=r;Cn([i],"conv3dBackpropInputV2");const c=kn(i.shape),u=kn(s.shape),d=jg(l,s.shape,o,1,a),h=new Ca(d.inShape,"float32"),p=h.values,[g,v,b,x]=h.strides,C=t.data.get(i.dataId).values,[E,_,M,R]=c,L=t.data.get(s.dataId).values,[$,N,I,k]=u,{batchSize:P,filterDepth:G,filterHeight:W,filterWidth:X,inChannels:z,inDepth:J,inHeight:Q,inWidth:Y,outChannels:q,outDepth:te,outHeight:ne,outWidth:le,strideDepth:ye,strideHeight:ue,strideWidth:ve}=d,xe=G-1-d.padInfo.front,Pe=W-1-d.padInfo.top,ze=X-1-d.padInfo.left;for(let Ke=0;Ke<P;++Ke)for(let pt=0;pt<z;++pt)for(let dt=0;dt<J;++dt){const pe=dt-xe,Le=Math.max(0,Math.ceil(pe/ye)),Ue=Math.min(te,(G+pe)/ye);for(let Ze=0;Ze<Q;++Ze){const je=Ze-Pe,lt=Math.max(0,Math.ceil(je/ue)),st=Math.min(ne,(W+je)/ue);for(let ot=0;ot<Y;++ot){const Ut=ot-ze,mt=Math.max(0,Math.ceil(Ut/ve)),ce=Math.min(le,(X+Ut)/ve);let re=0;for(let $e=Le;$e<Ue;++$e){const Xe=$e*ye-pe;for(let at=lt;at<st;++at){const et=at*ue-je;for(let Ft=mt;Ft<ce;++Ft){const At=Ft*ve-Ut,_t=E*Ke+_*$e+M*at+R*Ft,Xt=$*(G-1-Xe)+N*(W-1-et)+I*(X-1-At)+k*pt;for(let yt=0;yt<q;++yt){const Mt=C[_t+yt],an=L[Xt+yt];re+=Mt*an}}}}p[g*Ke+v*dt+b*Ze+x*ot+pt]=re}}}return t.makeTensorInfo(h.shape,h.dtype,h.values)}const Tze={kernelName:W4,backendName:"cpu",kernelFunc:Aze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mze=Mi(tE,n=>Math.cos(n)),Rze={kernelName:tE,backendName:"cpu",kernelFunc:Mze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nze=Mi(nE,n=>Math.cosh(n)),Ize={kernelName:nE,backendName:"cpu",kernelFunc:Nze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dze(n){const{inputs:e,backend:t,attrs:r}=n,{image:i,boxes:s,boxInd:a}=e,{cropSize:o,method:l,extrapolationValue:c}=r,[u,d,h,p]=i.shape,g=s.shape[0],[v,b]=o,x=Ar([g,v,b,p],"float32"),C=t.data.get(s.dataId).values,E=t.data.get(a.dataId).values,_=t.data.get(i.dataId).values,M=kn(i.shape),R=kn(x.shape);for(let L=0;L<g;L++){const $=L*4,N=C[$],I=C[$+1],k=C[$+2],P=C[$+3],G=E[L];if(G>=u)continue;const W=v>1?(k-N)*(d-1)/(v-1):0,X=b>1?(P-I)*(h-1)/(b-1):0;for(let z=0;z<v;z++){const J=v>1?N*(d-1)+z*W:.5*(N+k)*(d-1);if(J<0||J>d-1){for(let Q=0;Q<b;Q++)for(let Y=0;Y<p;Y++){const q=Y+Q*R[2]+z*R[1]+L*R[0];x.values[q]=c}continue}if(l==="bilinear"){const Q=Math.floor(J),Y=Math.ceil(J),q=J-Q;for(let te=0;te<b;te++){const ne=b>1?I*(h-1)+te*X:.5*(I+P)*(h-1);if(ne<0||ne>h-1){for(let ve=0;ve<p;ve++){const xe=ve+te*R[2]+z*R[1]+L*R[0];x.values[xe]=c}continue}const le=Math.floor(ne),ye=Math.ceil(ne),ue=ne-le;for(let ve=0;ve<p;ve++){let xe=ve+le*M[2]+Q*M[1]+G*M[0];const Pe=_[xe];xe=ve+ye*M[2]+Q*M[1]+G*M[0];const ze=_[xe];xe=ve+le*M[2]+Y*M[1]+G*M[0];const Ke=_[xe];xe=ve+ye*M[2]+Y*M[1]+G*M[0];const pt=_[xe],dt=Pe+(ze-Pe)*ue,pe=Ke+(pt-Ke)*ue;xe=ve+te*R[2]+z*R[1]+L*R[0],x.values[xe]=dt+(pe-dt)*q}}}else for(let Q=0;Q<b;++Q){const Y=b>1?I*(h-1)+Q*X:.5*(I+P)*(h-1);if(Y<0||Y>h-1){for(let ne=0;ne<p;ne++){const le=ne+Q*R[2]+z*R[1]+L*R[0];x.values[le]=c}continue}const q=Math.round(Y),te=Math.round(J);for(let ne=0;ne<p;ne++){const le=ne+q*M[2]+te*M[1]+G*M[0],ye=ne+Q*R[2]+z*R[1]+L*R[0];x.values[ye]=_[le]}}}}return t.makeTensorInfo(x.shape,x.dtype,x.values)}const kze={kernelName:q4,backendName:"cpu",kernelFunc:Dze};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oze(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{axis:s,exclusive:a,reverse:o}=r;Cn(i,"cumprod");const l=ws([s],i.shape.length);let c=i;l!=null&&(c=Hl({inputs:{x:i},backend:t,attrs:{perm:l}}));const u=Ys(1,i.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);const d=_c(c.dtype,"int32"),h=O4(xt(c.shape),d),p=t.data.get(c.dataId).values,g=c.shape[c.shape.length-1],v=o?(x,C)=>x+g-C-1:(x,C)=>x+C;for(let x=0;x<p.length;x+=g)for(let C=0;C<g;C++){const E=v(x,C);if(C===0)h[E]=a?1:p[E];else{const _=v(x,C-1);h[E]=a?p[_]*h[_]:p[E]*h[_]}}const b=t.makeTensorInfo(c.shape,d,h);if(l!=null){const x=qg(l),C=Hl({inputs:{x:b},backend:t,attrs:{perm:x}});return t.disposeIntermediateTensorInfo(b),t.disposeIntermediateTensorInfo(c),C}return b}const Bze={kernelName:j4,backendName:"cpu",kernelFunc:Oze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ze(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{axis:s,exclusive:a,reverse:o}=r;Cn(i,"cumsum");const l=ws([s],i.shape.length);let c=i;l!=null&&(c=Hl({inputs:{x:i},backend:t,attrs:{perm:l}}));const u=Ys(1,i.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);const d=_c(c.dtype,"int32"),h=Io(xt(c.shape),d),p=t.data.get(c.dataId).values,g=c.shape[c.shape.length-1],v=o?(x,C)=>x+g-C-1:(x,C)=>x+C;for(let x=0;x<p.length;x+=g)for(let C=0;C<g;C++){const E=v(x,C);if(C===0)h[E]=a?0:p[E];else{const _=v(x,C-1);h[E]=a?p[_]+h[_]:p[E]+h[_]}}const b=t.makeTensorInfo(c.shape,d,h);if(l!=null){const x=qg(l),C=Hl({inputs:{x:b},backend:t,attrs:{perm:x}});return t.disposeIntermediateTensorInfo(b),t.disposeIntermediateTensorInfo(c),C}return b}const Lze={kernelName:JI,backendName:"cpu",kernelFunc:$ze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fze(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,weights:s}=e,{size:a,binaryOutput:o}=r;if(i.shape.length===1){const l=t.data.get(i.dataId).values,c=t.data.get(s.dataId).values,u=_5(l,c,s.dtype,s.shape,a);return t.makeTensorInfo([a],s.dtype,u)}else if(i.shape.length===2){const l=t.bufferSync(i),c=t.bufferSync(s),u=Are(l,c,a,o);return t.makeTensorInfo(u.shape,s.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}const Pze={kernelName:X4,backendName:"cpu",kernelFunc:Fze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uze(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{blockSize:s,dataFormat:a}=r;de(a==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${a}`);const o=i.shape[0],l=i.shape[1],c=i.shape[2],u=i.shape[3],d=l*s,h=c*s,p=u/(s*s),g=t.data.get(i.dataId).values,v=new Float32Array(o*d*h*p);let b=0;for(let x=0;x<o;++x)for(let C=0;C<d;++C){const E=Math.floor(C/s),_=C%s;for(let M=0;M<h;++M){const R=Math.floor(M/s),L=M%s,$=(_*s+L)*p;for(let N=0;N<p;++N){const k=N+$+u*(R+c*(E+l*x));v[b++]=g[k]}}}return t.makeTensorInfo([o,d,h,p],i.dtype,v)}const zze={kernelName:K4,backendName:"cpu",kernelFunc:Uze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aie(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,filter:s}=e,{strides:a,pad:o,dilations:l,dimRoundingMode:c}=r;Cn([i,s],"depthwiseConv2DNative");const u=kn(i.shape),d=kn(s.shape);let h=l;h==null&&(h=[1,1]),de(oo(a,h),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${a} and dilations '${h}'`);const p=Va(i.shape,s.shape,a,h,o,c,!0),{filterHeight:g,filterWidth:v,dilationHeight:b,dilationWidth:x,padInfo:C}=p,E=C.left,_=C.top,M=p.outChannels/p.inChannels,R=new Ca(p.outShape,i.dtype),L=t.data.get(i.dataId).values,$=t.data.get(s.dataId).values,N=R.values;for(let I=0;I<p.batchSize;++I){const k=I*u[0],P=I*R.strides[0];for(let G=0;G<p.outHeight;++G){const W=P+G*R.strides[1],X=G*p.strideHeight-_;for(let z=0;z<g;++z){const J=X+z*b;if(J<0||J>=p.inHeight)continue;const Q=z*d[0],Y=k+J*u[1];for(let q=0;q<p.outWidth;++q){const te=W+q*R.strides[2],ne=q*p.strideWidth-E;for(let le=0;le<v;++le){const ye=ne+le*x;if(ye<0||ye>=p.inWidth)continue;const ue=Q+le*d[1],ve=Y+ye*p.inChannels;let xe=te,Pe=ue;for(let ze=0;ze<p.inChannels;++ze){const Ke=L[ve+ze];for(let pt=0;pt<M;++pt)N[xe+pt]+=Ke*$[Pe+pt];xe+=M,Pe+=M}}}}}}return t.makeTensorInfo(R.shape,R.dtype,R.values)}const Hze={kernelName:ZI,backendName:"cpu",kernelFunc:Aie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vze(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,dy:s}=e,{strides:a,dilations:o,pad:l,dimRoundingMode:c,filterShape:u}=r;Cn([i,s],"depthwiseConv2dNativeBackpropFilter");const d=Va(i.shape,u,a,o,l,c,!0),{strideHeight:h,strideWidth:p,filterHeight:g,filterWidth:v}=d,b=new Ca(d.filterShape,"float32"),x=d.padInfo.left,C=d.padInfo.top,E=d.outChannels/d.inChannels,_=t.data.get(i.dataId).values,M=new Ca(i.shape,i.dtype,_),R=t.data.get(s.dataId).values,L=new Ca(s.shape,s.dtype,R);for(let $=0;$<g;++$){const N=Math.max(0,Math.ceil((C-$)/h)),I=Math.min(d.outHeight,(d.inHeight+C-$)/h);for(let k=0;k<v;++k){const P=Math.max(0,Math.ceil((x-k)/p)),G=Math.min(d.outWidth,(d.inWidth+x-k)/p);for(let W=0;W<d.outChannels;++W){const X=Math.trunc(W/E),z=W%E;let J=0;for(let Q=0;Q<d.batchSize;++Q)for(let Y=N;Y<I;++Y){const q=$+Y*h-C;for(let te=P;te<G;++te){const ne=k+te*p-x;J+=M.get(Q,q,ne,X)*L.get(Q,Y,te,W)}}b.set(J,$,k,X,z)}}}return t.makeTensorInfo(b.shape,b.dtype,b.values)}const Gze={kernelName:Y4,backendName:"cpu",kernelFunc:Vze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wze(n){const{inputs:e,backend:t,attrs:r}=n,{dy:i,filter:s}=e,{strides:a,dilations:o,pad:l,dimRoundingMode:c,inputShape:u}=r;Cn([i,s],"depthwiseConv2DNativeBackpropInput");const d=kn(i.shape),h=kn(s.shape),p=Va(u,s.shape,a,o,l,c,!0),g=new Ca(p.inShape,"float32"),v=g.values,[b,x,C]=g.strides,E=t.data.get(i.dataId).values,[_,M,R]=d,L=t.data.get(s.dataId).values,[$,N,I]=h,{batchSize:k,filterHeight:P,filterWidth:G,inChannels:W,inHeight:X,inWidth:z,outChannels:J,outHeight:Q,outWidth:Y,strideHeight:q,strideWidth:te}=p,ne=P-1-p.padInfo.top,le=G-1-p.padInfo.left,ye=J/W;for(let ue=0;ue<k;++ue)for(let ve=0;ve<W;++ve)for(let xe=0;xe<X;++xe){const Pe=xe-ne,ze=Math.max(0,Math.ceil(Pe/q)),Ke=Math.min(Q,(P+Pe)/q);for(let pt=0;pt<z;++pt){const dt=pt-le,pe=Math.max(0,Math.ceil(dt/te)),Le=Math.min(Y,(G+dt)/te);let Ue=0;for(let Ze=ze;Ze<Ke;++Ze){const je=Ze*q-Pe;for(let lt=pe;lt<Le;++lt){const st=lt*te-dt,ot=_*ue+M*Ze+R*lt,Ut=$*(P-1-je)+N*(G-1-st)+I*ve;for(let mt=0;mt<ye;++mt){const ce=ve*ye+mt,re=E[ot+ce],$e=L[Ut+mt];Ue+=re*$e}}}v[b*ue+x*xe+C*pt+ve]=Ue}}return t.makeTensorInfo(g.shape,g.dtype,g.values)}const jze={kernelName:J4,backendName:"cpu",kernelFunc:Wze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qze(n){const{inputs:e,backend:t}=n,{x:r}=e,i=xt(r.shape),s=t.data.get(r.dataId).values,a=Ar([i,i],r.dtype),o=a.values;for(let c=0;c<s.length;c++)o[c*i+c]=s[c];const l=[...r.shape,...r.shape];return t.makeTensorInfo(l,a.dtype,a.values)}const Xze={kernelName:Z4,backendName:"cpu",kernelFunc:qze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kze={kernelName:QI,backendName:"cpu",kernelFunc:({inputs:n,backend:e,attrs:t})=>{const{x:r,filter:i}=n,{strides:s,pad:a,dilations:o}=t,l=e,c=l.data.get(r.dataId).values,u=r.shape.length,d=l.data.get(i.dataId).values,h=i.shape.length,{batchSize:p,inHeight:g,inWidth:v,inChannels:b,outHeight:x,outWidth:C,padInfo:E,strideHeight:_,strideWidth:M,filterHeight:R,filterWidth:L,dilationHeight:$,dilationWidth:N,outShape:I}=zE(r.shape,i.shape,s,a,"NHWC",o),k=xt(I),P=I.length,G=js(r.dtype,k);for(let X=0;X<p;++X)for(let z=0;z<x;++z){const J=z*_-E.top;for(let Q=0;Q<C;++Q){const Y=Q*M-E.left;for(let q=0;q<b;++q){let te=Number.MIN_SAFE_INTEGER;for(let le=0;le<R;++le){const ye=J+le*$;if(ye>=0&&ye<g)for(let ue=0;ue<L;++ue){const ve=Y+ue*N;if(ve>=0&&ve<v){const xe=fh([X,ye,ve,q],u,kn(r.shape)),Pe=fh([le,ue,q],h,kn(i.shape)),ze=c[xe]+d[Pe];ze>te&&(te=ze)}}}const ne=fh([X,z,Q,q],P,kn(I));G[ne]=te}}}return{dataId:l.write(Tv(G,r.dtype),I,r.dtype),shape:I,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yze={kernelName:DL,backendName:"cpu",kernelFunc:({inputs:n,backend:e,attrs:t})=>{const{x:r,filter:i,dy:s}=n,{strides:a,pad:o,dilations:l}=t,c=e,u=Gu(r.shape,c.data.get(r.dataId).values),d=Gu(i.shape,c.data.get(i.dataId).values),{batchSize:h,inHeight:p,inWidth:g,inChannels:v,outHeight:b,outWidth:x,padInfo:C,strideHeight:E,strideWidth:_,filterHeight:M,filterWidth:R,dilationHeight:L,dilationWidth:$,outShape:N}=zE(r.shape,i.shape,a,o,"NHWC",l);de(s.rank===N.length,()=>`Error in ${DL}, dy must have the same rank as output ${N.length}, but got ${s.rank}`);const I=Gu(N,c.data.get(s.dataId).values),k=wZ(i.shape,i.dtype);for(let G=0;G<h;++G)for(let W=0;W<b;++W){const X=W*E-C.top;for(let z=0;z<x;++z){const J=z*_-C.left;for(let Q=0;Q<v;++Q){let Y=Number.MIN_SAFE_INTEGER,q=0,te=0;for(let ne=0;ne<M;++ne){const le=X+ne*L;if(le>=0&&le<p)for(let ye=0;ye<R;++ye){const ue=J+ye*$;if(ue>=0&&ue<g){const ve=u[G][le][ue][Q]+d[ne][ye][Q];ve>Y&&(Y=ve,q=ne,te=ye)}}}k[q][te][Q]+=I[G][W][z][Q]}}}return{dataId:c.write(Tv(k,r.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jze={kernelName:IL,backendName:"cpu",kernelFunc:({inputs:n,backend:e,attrs:t})=>{const{x:r,filter:i,dy:s}=n,{strides:a,pad:o,dilations:l}=t,c=e,u=Gu(r.shape,c.data.get(r.dataId).values),d=Gu(i.shape,c.data.get(i.dataId).values),{batchSize:h,inHeight:p,inWidth:g,inChannels:v,outHeight:b,outWidth:x,padInfo:C,strideHeight:E,strideWidth:_,filterHeight:M,filterWidth:R,dilationHeight:L,dilationWidth:$,outShape:N}=zE(r.shape,i.shape,a,o,"NHWC",l);de(s.rank===N.length,()=>`Error in ${IL}, dy must have the same rank as output ${N.length}, but got ${s.rank}`);const I=Gu(N,c.data.get(s.dataId).values),k=wZ(r.shape,r.dtype);for(let G=0;G<h;++G)for(let W=0;W<b;++W){const X=W*E-C.top;for(let z=0;z<x;++z){const J=z*_-C.left;for(let Q=0;Q<v;++Q){let Y=Number.MIN_SAFE_INTEGER,q=X<0?0:X,te=J<0?0:J;for(let ne=0;ne<M;++ne){const le=X+ne*L;if(le>=0&&le<p)for(let ye=0;ye<R;++ye){const ue=J+ye*$;if(ue>=0&&ue<g){const ve=u[G][le][ue][Q]+d[ne][ye][Q];ve>Y&&(Y=ve,q=le,te=ue)}}}k[G][q][te][Q]+=I[G][W][z][Q]}}}return{dataId:c.write(Tv(k,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zze(n){const{inputs:e,backend:t,attrs:r}=n,{image:i}=e,{canvas:s,options:a}=r,{contextOptions:o,imageOptions:l}=a||{},c=(l==null?void 0:l.alpha)||1,u=(o==null?void 0:o.contextType)||"2d";if(u!=="2d")throw new Error(`Context type ${o.contextType} is not supported by the CPU backend.`);const d=s.getContext(u,(o==null?void 0:o.contextAttributes)||{});if(d==null)throw new Error(`Could not get the context with ${u} type.`);const[h,p]=i.shape.slice(0,2),g=i.shape.length===2?1:i.shape[2],v=t.data.get(i.dataId).values,b=i.dtype==="float32"?255:1,x=new Uint8ClampedArray(p*h*4);for(let E=0;E<h*p;++E){const _=[0,0,0,255*c];for(let R=0;R<g;R++){const L=v[E*g+R];if(i.dtype==="float32"){if(L<0||L>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${L}.`)}else if(i.dtype==="int32"&&(L<0||L>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${L}.`);g===1?(_[0]=L*b,_[1]=L*b,_[2]=L*b):_[R]=L*b}const M=E*4;x[M+0]=Math.round(_[0]),x[M+1]=Math.round(_[1]),x[M+2]=Math.round(_[2]),x[M+3]=Math.round(_[3])}s.width=p,s.height=h;const C=new ImageData(x,p,h);return d.putImageData(C,0,0),i}const Qze={kernelName:dTe,backendName:"cpu",kernelFunc:Zze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s2(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{axis:s,keepDims:a}=r;Cn(i,"sum");let o;i.dtype==="bool"?o=Og({inputs:{x:i},backend:t,attrs:{dtype:"int32"}}):o=Th({inputs:{x:i},backend:t});const l=o.shape.length,c=Ir(s,o.shape),u=ws(c,l);let d=c,h=o;u!=null&&(h=Hl({inputs:{x:o},backend:t,attrs:{perm:u}}),d=Ys(d.length,l)),lo("sum",d,h.shape.length);const[p,g]=Ga(h.shape,d),v=_c(h.dtype,"int32");let b=yN(t,p,v);const x=xt(g),C=t.data.get(b.dataId).values,E=t.data.get(h.dataId).values;for(let _=0;_<C.length;++_){const M=_*x;let R=0;for(let L=0;L<x;++L)R+=E[M+L];C[_]=R}if(a){const _=Xs(b.shape,c),M=b;b=Qi({inputs:{x:b},backend:t,attrs:{shape:_}}),t.disposeIntermediateTensorInfo(M)}return t.disposeIntermediateTensorInfo(o),u!=null&&t.disposeIntermediateTensorInfo(h),b}const e5e={kernelName:DD,backendName:"cpu",kernelFunc:s2};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t5e(n){const{inputs:e,backend:t,attrs:r}=n,{equation:i}=r,s=e,{allDims:a,summedDims:o,idDims:l}=qz(i,s.length);Kz(a.length,l,s);const{path:c,steps:u}=Yz(o,l),d=u.length;let h=null,p=a.length;const g=[];for(let v=0;v<d;++v){for(const b of u[v]){const{permutationIndices:x,expandDims:C}=Xz(p,l[b]);let E;Jz(x)?E=s[b]:(E=Hl({inputs:{x:s[b]},backend:t,attrs:{perm:x}}),g.push(E));const _=E.shape.slice();for(let M=0;M<C.length;++M)_.splice(C[M],0,1);Vr(E.shape,_)||(E=Qi({inputs:{x:E},backend:t,attrs:{shape:_}}),g.push(E)),h===null?h=E:(h=_3({inputs:{a:E,b:h},backend:t}),g.push(h))}v<d-1&&(c[v]>=0&&(h=s2({inputs:{x:h},backend:t,attrs:{axis:c[v]-(a.length-p),keepDims:!1}}),g.push(h)),p--)}for(const v of g)v!==h&&t.disposeIntermediateTensorInfo(v);return h}const n5e={kernelName:Q4,backendName:"cpu",kernelFunc:t5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r5e(n){const{inputs:e,backend:t}=n,{dy:r,y:i}=e;Cn([r,i],"eluGrad");const s=new Float32Array(xt(i.shape)),a=t.data.get(i.dataId).values,o=t.data.get(r.dataId).values;for(let l=0;l<a.length;++l){const c=a[l];c>=0?s[l]=o[l]:s[l]=o[l]*(c+1)}return t.makeTensorInfo(i.shape,"float32",s)}const i5e={kernelName:eU,backendName:"cpu",kernelFunc:r5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s5e=Uz,a5e=zz,o5e=Hz,l5e=Vz,c5e=Gz,u5e=Wz,d5e=Mi(sE,n=>{const e=Math.sign(n),t=Math.abs(n),r=1/(1+s5e*t);return e*(1-((((u5e*r+c5e)*r+l5e)*r+o5e)*r+a5e)*r*Math.exp(-t*t))}),f5e={kernelName:sE,backendName:"cpu",kernelFunc:d5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xN(n){const{inputs:e,backend:t,attrs:r}=n,{input:i}=e,{dim:s}=r,a=i.shape.length,o=i.shape.slice();let l=s;return s<0&&(de(-(a+1)<=s,()=>`Axis must be in the interval [${-(a+1)}, ${a}]`),l=a+s+1),o.splice(l,0,1),Qi({inputs:{x:i},backend:t,attrs:{shape:o}})}const h5e={kernelName:tD,backendName:"cpu",kernelFunc:xN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p5e=Zs((n,e)=>n/e),N5=Ta(rE,p5e),bF={kernelName:rE,backendName:"cpu",kernelFunc:N5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tie(n,e,t){const r=n.shape,i=r[0],s=r[1],a=t.data.get(n.dataId),o=a.complexTensorInfos.real,l=a.complexTensorInfos.imag,c=[i,s],u=xt(c),d=so("float32",u),h=so("float32",u);for(let b=0;b<i;b++){const x=vv({inputs:{x:o},backend:t,attrs:{begin:[b,0],size:[1,s]}}),C=vv({inputs:{x:l},backend:t,attrs:{begin:[b,0],size:[1,s]}}),E=mc({inputs:{real:x,imag:C},backend:t}),{real:_,imag:M}=m5e(E,e,t),R=Hp(_,M);for(let L=0;L<s;L++){const $=jz(R,L);d[b*s+L]=$.real,h[b*s+L]=$.imag}t.disposeIntermediateTensorInfo(x),t.disposeIntermediateTensorInfo(C),t.disposeIntermediateTensorInfo(E)}const p=t.makeTensorInfo(c,"float32",d),g=t.makeTensorInfo(c,"float32",h),v=mc({inputs:{real:p,imag:g},backend:t});return t.disposeIntermediateTensorInfo(p),t.disposeIntermediateTensorInfo(g),v}function m5e(n,e,t){const r=xt(n.shape),i=t.data.get(n.dataId),s=t.data.get(i.complexTensorInfos.real.dataId).values,a=t.data.get(i.complexTensorInfos.imag.dataId).values;if(g5e(r)){const o=xF(s,a,r,e,t),l=[n.shape[0],n.shape[1]];if(e){const c=t.makeTensorInfo(l,"float32",o.real),u=t.makeTensorInfo(l,"float32",o.imag),d=t.makeTensorInfo([],"float32",Vg(r,"float32")),h=Th({inputs:{x:d},backend:t}),p=bF.kernelFunc({inputs:{a:c,b:d},backend:t}),g=bF.kernelFunc({inputs:{a:u,b:h},backend:t}),v=t.data.get(p.dataId).values,b=t.data.get(g.dataId).values;return t.disposeIntermediateTensorInfo(c),t.disposeIntermediateTensorInfo(u),t.disposeIntermediateTensorInfo(d),t.disposeIntermediateTensorInfo(h),t.disposeIntermediateTensorInfo(p),t.disposeIntermediateTensorInfo(g),{real:v,imag:b}}return o}else{const o=Hp(s,a),l=y5e(o,r,e);return Lee(l)}}function g5e(n){return(n&n-1)===0}function xF(n,e,t,r,i){if(t===1)return{real:n,imag:e};const s=Hp(n,e),a=t/2,o=Fee(s),l=o.real,c=o.imag,u=[l.length],d=i.makeTensorInfo(u,"float32",l),h=i.makeTensorInfo(u,"float32",c),p=mc({inputs:{real:d,imag:h},backend:i}),g=Pee(s),v=g.real,b=g.imag,x=[v.length],C=i.makeTensorInfo(x,"float32",v),E=i.makeTensorInfo(x,"float32",b),_=mc({inputs:{real:C,imag:E},backend:i}),M=xF(l,c,a,r,i),R=M.real,L=M.imag,$=[R.length],N=i.makeTensorInfo($,"float32",R),I=i.makeTensorInfo($,"float32",L),k=mc({inputs:{real:N,imag:I},backend:i}),P=xF(v,b,a,r,i),G=P.real,W=P.imag,X=[G.length],z=i.makeTensorInfo(X,"float32",G),J=i.makeTensorInfo(X,"float32",W),Q=mc({inputs:{real:z,imag:J},backend:i}),Y=zee(t,r),q=[Y.real.length],te=i.makeTensorInfo(q,"float32",Y.real),ne=i.makeTensorInfo(q,"float32",Y.imag),le=mc({inputs:{real:te,imag:ne},backend:i}),ye=_3({inputs:{a:le,b:Q},backend:i}),ue=y1({inputs:{a:k,b:ye},backend:i}),ve=M5({inputs:{a:k,b:ye},backend:i}),xe=yv({inputs:{input:ue},backend:i}),Pe=yv({inputs:{input:ve},backend:i}),ze=v1({inputs:{input:ue},backend:i}),Ke=v1({inputs:{input:ve},backend:i}),pt=b1({inputs:[xe,Pe],backend:i,attrs:{axis:0}}),dt=b1({inputs:[ze,Ke],backend:i,attrs:{axis:0}}),pe=i.data.get(pt.dataId).values,Le=i.data.get(dt.dataId).values;return i.disposeIntermediateTensorInfo(d),i.disposeIntermediateTensorInfo(h),i.disposeIntermediateTensorInfo(p),i.disposeIntermediateTensorInfo(C),i.disposeIntermediateTensorInfo(E),i.disposeIntermediateTensorInfo(_),i.disposeIntermediateTensorInfo(N),i.disposeIntermediateTensorInfo(I),i.disposeIntermediateTensorInfo(k),i.disposeIntermediateTensorInfo(z),i.disposeIntermediateTensorInfo(J),i.disposeIntermediateTensorInfo(Q),i.disposeIntermediateTensorInfo(te),i.disposeIntermediateTensorInfo(ne),i.disposeIntermediateTensorInfo(le),i.disposeIntermediateTensorInfo(ye),i.disposeIntermediateTensorInfo(ue),i.disposeIntermediateTensorInfo(ve),i.disposeIntermediateTensorInfo(xe),i.disposeIntermediateTensorInfo(ze),i.disposeIntermediateTensorInfo(Pe),i.disposeIntermediateTensorInfo(Ke),i.disposeIntermediateTensorInfo(pt),i.disposeIntermediateTensorInfo(dt),{real:pe,imag:Le}}function y5e(n,e,t){const r=new Float32Array(e*2);for(let i=0;i<e;i++){let s=0,a=0;for(let o=0;o<e;o++){const l=Hee(i*o,e,t),c=jz(n,o);s+=c.real*l.real-c.imag*l.imag,a+=c.real*l.imag+c.imag*l.real}t&&(s/=e,a/=e),Uee(r,s,a,i)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v5e(n){const{inputs:e,backend:t}=n,{input:r}=e,i=xt(r.shape),s=r.shape[r.shape.length-1],a=i/s,o=Qi({inputs:{x:r},backend:t,attrs:{shape:[a,s]}}),l=Tie(o,!1,t),c=Qi({inputs:{x:l},backend:t,attrs:{shape:r.shape}});return t.disposeIntermediateTensorInfo(o),t.disposeIntermediateTensorInfo(l),c}const b5e={kernelName:tU,backendName:"cpu",kernelFunc:v5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I5(n){const{backend:e,attrs:t}=n,{shape:r,value:i,dtype:s}=t,a=s||z1(i),o=js(a,xt(r));return S5e(o,i,a),e.makeTensorInfo(r,a,o)}const x5e={kernelName:nU,backendName:"cpu",kernelFunc:I5};function S5e(n,e,t){n.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w5e={kernelName:rU,backendName:"cpu",kernelFunc:({inputs:n,attrs:e,backend:t})=>{const{image:r}=n,i=t,s=so(r.dtype,xt(r.shape)),[a,o,l,c]=r.shape,u=i.data.get(r.dataId).values;for(let h=0;h<a;h++){const p=h*l*o*c;for(let g=0;g<o;g++){const v=g*(l*c);for(let b=0;b<l;b++){const x=b*c;for(let C=0;C<c;C++){const E=Math.round(l-b-1),_=p+v+x+C;let M=u[_];if(E>=0&&E<l){const R=E*c,L=p+v+R+C;M=u[L]}s[_]=M}}}}return{dataId:i.write(s,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C5e(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,filter:s,bias:a,preluActivationWeights:o}=e,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h,activation:p,leakyreluAlpha:g}=r;let v=Eie({inputs:{x:i,filter:s},backend:t,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h}});if(a){const b=v;if(u==="NCHW"&&a.shape.length===1&&a.shape[0]!==1){const x=Qi({inputs:{x:a},backend:t,attrs:{shape:[a.shape[0],1,1]}});v=y1({inputs:{a:v,b:x},backend:t}),t.disposeIntermediateTensorInfo(x)}else v=y1({inputs:{a:v,b:a},backend:t});t.disposeIntermediateTensorInfo(b)}if(p){const b=v;if(u==="NCHW"&&p==="prelu"&&o.shape.length===1&&o.shape[0]!==1){const x=Qi({inputs:{x:o},backend:t,attrs:{shape:[o.shape[0],1,1]}});v=bN(t,v,p,x,g),t.disposeIntermediateTensorInfo(x)}else v=bN(t,v,p,o,g);t.disposeIntermediateTensorInfo(b)}return v}const _5e={kernelName:QR,backendName:"cpu",kernelFunc:C5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E5e(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,filter:s,bias:a,preluActivationWeights:o}=e,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h,activation:p,leakyreluAlpha:g}=r;let v=Aie({inputs:{x:i,filter:s},backend:t,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h}});if(a){const b=v;v=y1({inputs:{a:v,b:a},backend:t}),t.disposeIntermediateTensorInfo(b)}if(p){const b=v;v=bN(t,v,p,o,g),t.disposeIntermediateTensorInfo(b)}return v}const A5e={kernelName:eN,backendName:"cpu",kernelFunc:E5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T5e(n){const{inputs:e,backend:t}=n,{params:r,indices:i}=e,s=xt(r.shape),a=i.shape,o=a[a.length-1],[l,c,u,d]=Rz(r,i);if(c===0)return t.makeTensorInfo(l,r.dtype,[]);const h=t.data.get(i.dataId).values,p=t.bufferSync(r),g=Lre(h,p,r.dtype,c,o,u,d,r.shape,s);return t.makeTensorInfo(l,r.dtype,g.values)}const M5e={kernelName:iU,backendName:"cpu",kernelFunc:T5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R5e(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,indices:s}=e,{axis:a,batchDims:o}=r;Cn([i,s],"gatherV2");const l=Ir(a,i.shape)[0],c=t.data.get(s.dataId).values,u=i.shape[l];for(let _=0;_<c.length;++_){const M=c[_];de(M<=u-1&&M>=0,()=>`GatherV2: the index value ${M} is not in [0, ${u-1}]`)}let d=o;o==null&&(d=0);const h=xt(s.shape),p=Qz(i,s,l,d),g=Qi({inputs:{x:i},backend:t,attrs:{shape:[p.batchSize,p.outerSize,p.dimSize,p.sliceSize]}}),v=Qi({inputs:{x:s},backend:t,attrs:{shape:[p.batchSize,h/p.batchSize]}}),b=[p.batchSize,p.outerSize,h/p.batchSize,p.sliceSize],x=t.bufferSync(v),C=t.bufferSync(g),E=Fre(C,x,b);return t.disposeIntermediateTensorInfo(g),t.disposeIntermediateTensorInfo(v),t.makeTensorInfo(p.outputShape,E.dtype,E.values)}const N5e={kernelName:rD,backendName:"cpu",kernelFunc:R5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I5e(n){const{inputs:e,backend:t}=n,{input:r}=e,i=xt(r.shape),s=r.shape[r.shape.length-1],a=i/s,o=Qi({inputs:{x:r},backend:t,attrs:{shape:[a,s]}}),l=Tie(o,!0,t),c=Qi({inputs:{x:l},backend:t,attrs:{shape:r.shape}});return t.disposeIntermediateTensorInfo(o),t.disposeIntermediateTensorInfo(l),c}const D5e={kernelName:sU,backendName:"cpu",kernelFunc:I5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k5e=Mi(fE,n=>Number.isFinite(n)?1:0,"bool"),O5e={kernelName:fE,backendName:"cpu",kernelFunc:k5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B5e=Mi(hE,n=>Math.abs(n)===1/0?1:0,"bool"),$5e={kernelName:hE,backendName:"cpu",kernelFunc:B5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L5e=Mi(pE,n=>Number.isNaN(n)?1:0,"bool"),F5e={kernelName:pE,backendName:"cpu",kernelFunc:L5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P5e(n){const{backend:e,attrs:t}=n,{start:r,stop:i,num:s}=t,a=Vre(r,i,s);return e.makeTensorInfo([a.length],"float32",a)}const U5e={kernelName:oU,backendName:"cpu",kernelFunc:P5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z5e=Mi(gE,n=>Math.log1p(n)),H5e={kernelName:gE,backendName:"cpu",kernelFunc:z5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V5e=Zs((n,e)=>n&&e),G5e=Ta(lD,V5e,null,"bool"),W5e={kernelName:lD,backendName:"cpu",kernelFunc:G5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j5e=Mi(cD,n=>n?0:1,"bool"),q5e={kernelName:cD,backendName:"cpu",kernelFunc:j5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X5e=Zs((n,e)=>n||e),K5e=Ta(uD,X5e,null,"bool"),Y5e={kernelName:uD,backendName:"cpu",kernelFunc:K5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J5e(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{depthRadius:s,bias:a,alpha:o,beta:l}=r;Cn(i,"LRN");const c=i.shape[3],u=c-1,d=t.data.get(i.dataId).values,h=xt(i.shape),p=new Float32Array(h);function g(v){const b=v%c;let x=v-b+Math.max(0,b-s);const C=v-b+Math.min(b+s,u);let E=0;for(;x<=C;x++){const _=d[x];E+=_*_}return E}for(let v=0;v<h;v++){const b=g(v),x=d[v]*Math.pow(a+o*b,-l);p[v]=x}return t.makeTensorInfo(i.shape,i.dtype,p)}const Z5e={kernelName:dD,backendName:"cpu",kernelFunc:J5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q5e(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,y:s,dy:a}=e,{depthRadius:o,bias:l,alpha:c,beta:u}=r;Cn(a,"LRNGrad");const d=xt(a.shape),h=a.shape[3],p=t.data.get(a.dataId).values,g=t.data.get(i.dataId).values,v=t.data.get(s.dataId).values,b=new Float32Array(d),x=d;for(let C=0;C<x;C++){const E=C%h,_=C-E+Math.max(0,E-o),M=C-E+Math.min(h,E+o+1);let R=0;for(let L=_;L<M;L++)R+=Math.pow(g[L],2);R=c*R+l;for(let L=_;L<M;L++){let $=-2*c*u*g[L]*v[C]/R;C===L&&($+=Math.pow(R,-u)),$*=p[C],b[L]+=$}}return t.makeTensorInfo(a.shape,i.dtype,b)}const e6e={kernelName:lU,backendName:"cpu",kernelFunc:Q5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mie(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{reductionIndices:s,keepDims:a}=r,o=t;let l=i.shape;const c=l.length,u=Ir(s,l);let d=u;const h=ws(d,c);let p=o.data.get(i.dataId).values;if(h!=null){const _=new Array(c);for(let M=0;M<_.length;M++)_[M]=l[h[M]];p=A5(p,l,i.dtype,h,_),d=Ys(d.length,c),l=_}Cn(i,"max"),lo("max",d,c);const[g,v]=Ga(l,d),b=xt(v),x=Wre(p,b,g,i.dtype),C=o.write(x,g,i.dtype);let E=g;return a&&(E=Xs(g,u)),{dataId:C,shape:E,dtype:i.dtype}}const t6e={kernelName:fD,backendName:"cpu",kernelFunc:Mie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n6e(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e;Cn(i,"maxPool");const{filterSize:s,strides:a,pad:o,dimRoundingMode:l}=r,c=1;de(oo(a,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);const u=ed(i.shape,s,a,c,o,l);let d;if(u.filterWidth===1&&u.filterHeight===1&&Vr(u.inShape,u.outShape))d=Th({inputs:{x:i},backend:t});else{const h=t.data.get(i.dataId).values,p=kn(i.shape),g=R5(h,i.shape,i.dtype,p,u,"max");d=t.makeTensorInfo(u.outShape,i.dtype,g.values)}return d}const r6e={kernelName:hD,backendName:"cpu",kernelFunc:n6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i6e(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{filterSize:s,strides:a,pad:o,dimRoundingMode:l,dataFormat:c}=r;Cn(i,"maxPool3d");const u=Qp(i.shape,s,a,1,o,l,c),d=t.data.get(i.dataId).values,h=_ie(d,i.shape,i.dtype,kn(i.shape),u,"max");return t.makeTensorInfo(h.shape,"float32",h.values)}const s6e={kernelName:pD,backendName:"cpu",kernelFunc:i6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a6e(n){const{inputs:e,backend:t,attrs:r}=n,{dy:i,input:s}=e,{filterSize:a,strides:o,pad:l,dimRoundingMode:c}=r;Cn([i,s],"maxPool3DGrad");const u=Qp(s.shape,a,o,1,l,c),d=t.bufferSync(s),h=XUe(d,u),p=u.strideDepth,g=u.strideHeight,v=u.strideWidth,b=u.dilationDepth,x=u.dilationHeight,C=u.dilationWidth,E=u.effectiveFilterDepth,_=u.effectiveFilterHeight,M=u.effectiveFilterWidth,R=E-1-u.padInfo.front,L=M-1-u.padInfo.left,$=_-1-u.padInfo.top,N=Ar(s.shape,"float32"),I=t.bufferSync(i);for(let k=0;k<u.batchSize;++k)for(let P=0;P<u.inChannels;++P)for(let G=0;G<u.inDepth;++G)for(let W=0;W<u.inHeight;++W)for(let X=0;X<u.inWidth;++X){const z=G-R,J=W-$,Q=X-L;let Y=0;for(let q=0;q<E;q+=b){const te=(z+q)/p;if(!(te<0||te>=u.outDepth||Math.floor(te)!==te))for(let ne=0;ne<_;ne+=x){const le=(J+ne)/g;if(!(le<0||le>=u.outHeight||Math.floor(le)!==le))for(let ye=0;ye<M;ye+=C){const ue=(Q+ye)/v;if(ue<0||ue>=u.outWidth||Math.floor(ue)!==ue)continue;const ve=E*_*M-1-h.get(k,te,le,ue,P),xe=q*_*M+ne*M+ye,Pe=ve===xe?1:0;if(Pe===0)continue;const ze=I.get(k,te,le,ue,P);Y+=ze*Pe}}}N.set(Y,k,G,W,X,P)}return t.makeTensorInfo(N.shape,N.dtype,N.values)}const o6e={kernelName:uU,backendName:"cpu",kernelFunc:a6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l6e(n){const{inputs:e,backend:t,attrs:r}=n,{dy:i,input:s,output:a}=e,o=s;Cn([s,a],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=r,h=ed(o.shape,l,c,1,u,d),p=t.data.get(o.dataId).values,g=Ar(h.outShape,o.dtype,Cie(p,o.shape,o.dtype,h).values),v=h.strideHeight,b=h.strideWidth,x=h.dilationHeight,C=h.dilationWidth,E=h.effectiveFilterHeight,_=h.effectiveFilterWidth,M=_-1-h.padInfo.left,R=E-1-h.padInfo.top,L=Ar(o.shape,"float32"),$=t.data.get(i.dataId).values,N=Ar(i.shape,"float32",$);for(let I=0;I<h.batchSize;++I)for(let k=0;k<h.inChannels;++k)for(let P=0;P<h.inHeight;++P)for(let G=0;G<h.inWidth;++G){const W=P-R,X=G-M;let z=0;for(let J=0;J<E;J+=x){const Q=(W+J)/v;if(!(Q<0||Q>=h.outHeight||Math.floor(Q)!==Q))for(let Y=0;Y<_;Y+=C){const q=(X+Y)/b;if(q<0||q>=h.outWidth||Math.floor(q)!==q)continue;const te=E*_-1-g.get(I,Q,q,k),ne=J*_+Y,le=te===ne?1:0;if(le===0)continue;const ye=N.get(I,Q,q,k);z+=ye*le}}L.set(z,I,P,G,k)}return t.makeTensorInfo(L.shape,L.dtype,L.values)}const c6e={kernelName:cU,backendName:"cpu",kernelFunc:l6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u6e(n,e,t,r,i){const s=kn(e),a=R5(n,e,t,s,i,"max"),o=Cie(n,e,t,i,!0,r);return[a.values,o.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d6e={kernelName:dU,backendName:"cpu",kernelFunc:({inputs:n,attrs:e,backend:t})=>{const{x:r}=n,{filterSize:i,strides:s,pad:a,includeBatchInIndex:o}=e,l=t;Cn(r,"MaxPoolWithArgmax");const c=l.data.get(r.dataId).values,u=ed(r.shape,i,s,[1,1],a),[d,h]=u6e(c,r.shape,r.dtype,o,u),p=l.write(d,u.outShape,r.dtype),g=l.write(h,u.outShape,r.dtype);return[{dataId:p,shape:u.outShape,dtype:r.dtype},{dataId:g,shape:u.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f6e(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{axis:s,keepDims:a}=r,o=Ir(s,i.shape),c=Ga(i.shape,o)[1],u=xt(c),d=[],h=t.makeTensorInfo([],"float32",new Float32Array([u]));d.push(h);const p=Og({inputs:{x:i},backend:t,attrs:{dtype:"float32"}});d.push(p);const g=N5({inputs:{a:p,b:h},backend:t});d.push(g);const v=s2({inputs:{x:g},backend:t,attrs:{axis:s,keepDims:a}});return d.forEach(b=>t.disposeIntermediateTensorInfo(b)),v}const h6e={kernelName:mD,backendName:"cpu",kernelFunc:f6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p6e(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{axis:s,keepDims:a}=r;Cn(i,"min");const o=Ir(s,i.shape);let l=o;const c=ws(l,i.shape.length);let u=i;c!=null&&(u=Hl({inputs:{x:i},backend:t,attrs:{perm:c}}),l=Ys(l.length,i.shape.length)),lo("min",l,u.shape.length);const[d,h]=Ga(u.shape,l),p=xt(h),g=Io(xt(d),u.dtype),v=t.data.get(u.dataId).values;for(let x=0;x<g.length;++x){const C=x*p;let E=v[C];for(let _=0;_<p;++_){const M=v[C+_];(Number.isNaN(M)||M<E)&&(E=M)}g[x]=E}c!=null&&t.disposeIntermediateTensorInfo(u);const b=t.makeTensorInfo(d,u.dtype,g);if(a){const x=Xs(d,o),C=Qi({inputs:{x:b},backend:t,attrs:{shape:x}});return t.disposeIntermediateTensorInfo(b),C}return b}const m6e={kernelName:gD,backendName:"cpu",kernelFunc:p6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g6e(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{paddings:s,mode:a}=r;Cn(i,"mirrorPad");const o=s.map((E,_)=>E[0]+i.shape[_]+E[1]),l=s.map(E=>E[0]),c=s.map((E,_)=>E[0]+i.shape[_]),u=a==="reflect"?0:1,d=t.data.get(i.dataId).values,h=i.shape.length,p=kn(i.shape),g=xt(o),v=o.length,b=kn(o),x=so(i.dtype,g);for(let E=0;E<g;E++){let _=H1(E,v,b);for(let R=0;R<v;R++)_[R]<l[R]?_[R]=l[R]*2-_[R]-u:_[R]>=c[R]&&(_[R]=(c[R]-1)*2-_[R]+u);_=_.map((R,L)=>R-l[L]);const M=fh(_,h,p);x[E]=d[M]}return{dataId:t.write(x,o,i.dtype),shape:o,dtype:i.dtype}}const y6e={kernelName:yD,backendName:"cpu",kernelFunc:g6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v6e=Zs((n,e)=>{const t=n%e;return n<0&&e<0||n>=0&&e>=0?t:(t+e)%e}),b6e=Ta(bE,v6e),x6e={kernelName:bE,backendName:"cpu",kernelFunc:b6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rie(n){const{inputs:e,backend:t,attrs:r}=n,{logits:i}=e,{dim:s}=r,a=i.shape.length;let o=s;if(o===-1&&(o=a-1),o!==a-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${a} and dim was ${o}`);const l=Ir([o],i.shape),c=Mie({inputs:{x:i},backend:t,attrs:{reductionIndices:l,keepDims:!1}}),u=Xs(c.shape,l),d=Qi({inputs:{x:c},backend:t,attrs:{shape:u}}),h=M5({inputs:{a:i,b:d},backend:t}),p=kre({inputs:{x:h},backend:t}),g=s2({inputs:{x:p},backend:t,attrs:{axis:l,keepDims:!1}}),v=Qi({inputs:{x:g},backend:t,attrs:{shape:u}}),b=N5({inputs:{a:p,b:v},backend:t});return t.disposeIntermediateTensorInfo(c),t.disposeIntermediateTensorInfo(d),t.disposeIntermediateTensorInfo(h),t.disposeIntermediateTensorInfo(p),t.disposeIntermediateTensorInfo(g),t.disposeIntermediateTensorInfo(v),b}const S6e={kernelName:BD,backendName:"cpu",kernelFunc:Rie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w6e(n){const{inputs:e,backend:t,attrs:r}=n,{logits:i}=e,{numSamples:s,seed:a,normalized:o}=r;Cn(i,"multinomial");const l=o?i:Rie({inputs:{logits:i},backend:t,attrs:{dim:-1}}),c=l.shape[0],u=l.shape[1],d=t.data.get(l.dataId).values,h=[c,s],p=Io(xt(h),"int32");for(let g=0;g<c;++g){const v=g*u,b=new Float32Array(u-1);b[0]=d[v];for(let E=1;E<b.length;++E)b[E]=b[E-1]+d[v+E];const x=QD.alea(a.toString()),C=g*s;for(let E=0;E<s;++E){const _=x();p[C+E]=b.length;for(let M=0;M<b.length;M++)if(_<b[M]){p[C+E]=M;break}}}return o||t.disposeIntermediateTensorInfo(l),t.makeTensorInfo(h,"int32",p)}const C6e={kernelName:fU,backendName:"cpu",kernelFunc:w6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _6e=wz;function E6e(n){const{inputs:e,backend:t,attrs:r}=n,{boxes:i,scores:s}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l}=r;Cn(i,"NonMaxSuppression");const c=t.data.get(i.dataId).values,u=t.data.get(s.dataId).values,{selectedIndices:d}=_6e(c,u,a,o,l);return t.makeTensorInfo([d.length],"int32",new Int32Array(d))}const A6e={kernelName:hU,backendName:"cpu",kernelFunc:E6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T6e=Cz;function M6e(n){const{inputs:e,backend:t,attrs:r}=n,{boxes:i,scores:s}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:c}=r;Cn(i,"NonMaxSuppressionPadded");const u=t.data.get(i.dataId).values,d=t.data.get(s.dataId).values,{selectedIndices:h,validOutputs:p}=T6e(u,d,a,o,l,c);return[t.makeTensorInfo([h.length],"int32",new Int32Array(h)),t.makeTensorInfo([],"int32",new Int32Array([p]))]}const R6e={kernelName:pU,backendName:"cpu",kernelFunc:M6e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N6e=_z;function I6e(n){const{inputs:e,backend:t,attrs:r}=n,{boxes:i,scores:s}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l,softNmsSigma:c}=r;Cn(i,"NonMaxSuppressionWithScore");const u=t.data.get(i.dataId).values,d=t.data.get(s.dataId).values,h=a,p=o,g=l,v=c,{selectedIndices:b,selectedScores:x}=N6e(u,d,h,p,g,v);return[t.makeTensorInfo([b.length],"int32",new Int32Array(b)),t.makeTensorInfo([x.length],"float32",new Float32Array(x))]}const D6e={kernelName:mU,backendName:"cpu",kernelFunc:I6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k6e(n){const{inputs:e,backend:t,attrs:r}=n,{indices:i}=e,{dtype:s,depth:a,onValue:o,offValue:l}=r;Cn(i,"oneHot");const c=xt(i.shape),u=new Float32Array(c*a);u.fill(l);const d=t.data.get(i.dataId).values;for(let h=0;h<c;++h)d[h]>=0&&d[h]<a&&(u[h*a+d[h]]=o);return t.makeTensorInfo([...i.shape,a],s,u)}const O6e={kernelName:SD,backendName:"cpu",kernelFunc:k6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SN(n){const{inputs:e,backend:t}=n,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const i=yv({inputs:{input:r},backend:t}),s=SN({inputs:{x:i},backend:t}),a=v1({inputs:{input:r},backend:t}),o=SN({inputs:{x:a},backend:t}),l=mc({inputs:{real:s,imag:o},backend:t});return t.disposeIntermediateTensorInfo(i),t.disposeIntermediateTensorInfo(s),t.disposeIntermediateTensorInfo(a),t.disposeIntermediateTensorInfo(o),l}else return I5({backend:t,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const B6e={kernelName:PD,backendName:"cpu",kernelFunc:SN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nie(n){const{inputs:e,backend:t}=n,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const i=yv({inputs:{input:r},backend:t}),s=Nie({inputs:{x:i},backend:t}),a=v1({inputs:{input:r},backend:t}),o=SN({inputs:{x:a},backend:t}),l=mc({inputs:{real:s,imag:o},backend:t});return t.disposeIntermediateTensorInfo(i),t.disposeIntermediateTensorInfo(s),t.disposeIntermediateTensorInfo(a),t.disposeIntermediateTensorInfo(o),l}else return I5({backend:t,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const $6e={kernelName:xD,backendName:"cpu",kernelFunc:Nie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iie(n){const{inputs:e,backend:t,attrs:r}=n,{axis:i}=r;if(e.length===1)return xN({inputs:{input:e[0]},backend:t,attrs:{dim:i}});const s=e[0].shape,a=e[0].dtype;e.forEach(u=>{Rc(s,u.shape,"All tensors passed to stack must have matching shapes"),de(a===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],l=e.map(u=>{const d=xN({inputs:{input:u},backend:t,attrs:{dim:i}});return o.push(d),d}),c=b1({inputs:l,backend:t,attrs:{axis:i}});return o.forEach(u=>t.disposeIntermediateTensorInfo(u)),c}const L6e={kernelName:wD,backendName:"cpu",kernelFunc:Iie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F6e(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{paddings:s,constantValue:a}=r;Cn(i,"pad");const o=s.map((C,E)=>C[0]+i.shape[E]+C[1]),l=s.map(C=>C[0]),c=t.data.get(i.dataId).values,u=xt(i.shape),d=i.shape.length,h=kn(i.shape),p=xt(o),g=o.length,v=kn(o),b=so(i.dtype,p);a!==0&&b.fill(a);for(let C=0;C<u;C++){const _=H1(C,d,h).map((R,L)=>R+l[L]),M=fh(_,g,v);b[M]=c[C]}return{dataId:t.write(b,o,i.dtype),shape:o,dtype:i.dtype}}const Die={kernelName:CD,backendName:"cpu",kernelFunc:F6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P6e=Zs((n,e)=>Math.pow(n,e)),U6e=Ta(SE,P6e),z6e={kernelName:SE,backendName:"cpu",kernelFunc:U6e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H6e(n){const{inputs:e,backend:t,attrs:r}=n,{paramsNestedSplits:i,paramsDenseValues:s,indices:a}=e,{outputRaggedRank:o}=r,l=i.map(x=>t.data.get(x.dataId).values),c=i.map(x=>x.shape),u=t.data.get(s.dataId).values,d=t.data.get(a.dataId).values,[h,p,g]=Jre(l,c,u,s.shape,s.dtype,d,a.shape),v=h.map(x=>t.makeTensorInfo([x.length],"int32",x)),b=t.makeTensorInfo(g,s.dtype,p);return v.concat([b])}const V6e={kernelName:gU,backendName:"cpu",kernelFunc:H6e};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G6e(n){const{inputs:e,backend:t}=n,{starts:r,limits:i,deltas:s}=e,a=t.data.get(r.dataId).values,o=t.data.get(i.dataId).values,l=t.data.get(s.dataId).values,[c,u]=Zre(a,r.shape,r.dtype,o,i.shape,l,s.shape),d=t.makeTensorInfo([c.length],"int32",c),h=t.makeTensorInfo([u.length],r.dtype,u);return[d,h]}const W6e={kernelName:yU,backendName:"cpu",kernelFunc:G6e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j6e(n){const{inputs:e,backend:t,attrs:r}=n,{shape:i,values:s,defaultValue:a,rowPartitionTensors:o}=e,{rowPartitionTypes:l}=r,c=t.data.get(i.dataId).values,u=t.data.get(s.dataId).values,d=t.data.get(a.dataId).values,h=o.map(b=>t.data.get(b.dataId).values),p=o.map(b=>b.shape),[g,v]=Qre(c,i.shape,u,s.shape,s.dtype,d,a.shape,h,p,l);return t.makeTensorInfo(g,s.dtype,v)}const q6e={kernelName:vU,backendName:"cpu",kernelFunc:j6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X6e(n){const{backend:e,attrs:t}=n,{start:r,stop:i,dtype:s,step:a}=t,o=eie(r,i,a,s);return e.makeTensorInfo([o.length],s,o)}const K6e={kernelName:bU,backendName:"cpu",kernelFunc:X6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y6e=Mi(wE,n=>1/n),J6e={kernelName:wE,backendName:"cpu",kernelFunc:Y6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z6e(n){const{inputs:e,backend:t,attrs:r}=n,{images:i}=e,{alignCorners:s,halfPixelCenters:a,size:o}=r;Cn(i,"resizeBilinear");const l=kn(i.shape),[c,u]=o,[d,h,p,g]=i.shape,v=t.data.get(i.dataId).values,b=new Float32Array(xt([d,c,u,g])),x=[s&&c>1?h-1:h,s&&u>1?p-1:p],C=[s&&c>1?c-1:c,s&&u>1?u-1:u];let E=0;const _=x[0]/C[0],M=x[1]/C[1];for(let R=0;R<d;R++)for(let L=0;L<c;L++){let $;a?$=_*(L+.5)-.5:$=_*L;const N=Math.max(0,Math.floor($)),I=$-N,k=Math.min(h-1,Math.ceil($)),P=R*l[0]+N*l[1],G=R*l[0]+k*l[1];for(let W=0;W<u;W++){let X;a?X=M*(W+.5)-.5:X=M*W;const z=Math.max(0,Math.floor(X)),J=X-z,Q=Math.min(p-1,Math.ceil(X)),Y=P+z*l[2],q=G+z*l[2],te=P+Q*l[2],ne=G+Q*l[2];for(let le=0;le<g;le++){const ye=v[Y+le],ue=v[q+le],ve=v[te+le],xe=v[ne+le],Pe=ye+(ve-ye)*J,ze=ue+(xe-ue)*J,Ke=Pe+(ze-Pe)*I;b[E++]=Ke}}}return t.makeTensorInfo([d,c,u,g],"float32",b)}const Q6e={kernelName:MD,backendName:"cpu",kernelFunc:Z6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eHe(n){const{inputs:e,backend:t,attrs:r}=n,{images:i,dy:s}=e,{alignCorners:a}=r;Cn([s,i],"resizeBilinearGrad");const o=kn(i.shape),[l,c,u,d]=i.shape,[,h,p]=s.shape,g=new Float32Array(l*c*u*d),v=[a&&h>1?c-1:c,a&&p>1?u-1:u],b=[a&&h>1?h-1:h,a&&p>1?p-1:p],x=v[0]/b[0],C=v[1]/b[1],E=t.data.get(s.dataId).values;let _=0;for(let M=0;M<l;M++){const R=M*o[0];for(let L=0;L<h;L++){const $=L*x,N=Math.floor($),I=Math.min(Math.ceil($),c-1),k=R+N*o[1],P=R+I*o[1],G=$-N,W=1-G;for(let X=0;X<p;X++){const z=X*C,J=Math.floor(z),Q=Math.min(Math.ceil(z),u-1),Y=z-J,q=1-Y,te=k+J*o[2],ne=k+Q*o[2],le=P+J*o[2],ye=P+Q*o[2],ue=W*q,ve=W*Y,xe=G*q,Pe=G*Y;for(let ze=0;ze<d;ze++){const Ke=E[_++];g[te+ze]+=Ke*ue,g[ne+ze]+=Ke*ve,g[le+ze]+=Ke*xe,g[ye+ze]+=Ke*Pe}}}}return t.makeTensorInfo([l,u,c,d],"float32",g)}const tHe={kernelName:wU,backendName:"cpu",kernelFunc:eHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nHe(n){const{inputs:e,backend:t,attrs:r}=n,{images:i}=e,{alignCorners:s,halfPixelCenters:a,size:o}=r;Cn(i,"resizeNearestNeighbor");const l=kn(i.shape),[c,u]=o,[d,h,p,g]=i.shape,v=t.data.get(i.dataId).values,b=new Float32Array(d*c*u*g),x=[s&&c>1?h-1:h,s&&u>1?p-1:p],C=[s&&c>1?c-1:c,s&&u>1?u-1:u],E=x[0]/C[0],_=x[1]/C[1];let M=0;for(let R=0;R<d;R++){const L=R*l[0];for(let $=0;$<c;$++){const N=a?E*($+.5):E*$;let I=Math.min(h-1,s?Math.round(N):Math.floor(N));a&&(I=Math.max(0,I));const k=L+I*l[1];for(let P=0;P<u;P++){const G=a?_*(P+.5):_*P;let W=Math.min(p-1,s?Math.round(G):Math.floor(G));a&&(W=Math.max(0,W));const X=k+W*l[2];for(let z=0;z<g;z++){const J=v[X+z];b[M++]=J}}}}return t.makeTensorInfo([d,c,u,g],i.dtype,b)}const rHe={kernelName:TD,backendName:"cpu",kernelFunc:nHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iHe(n){const{inputs:e,backend:t,attrs:r}=n,{images:i,dy:s}=e,{alignCorners:a}=r;Cn([s,i],"resizeNearestNeighborGrad");const o=kn(i.shape),l=kn(s.shape),[c,u,d,h]=i.shape,[,p,g]=s.shape,v=new Float32Array(c*u*d*h),b=t.data.get(s.dataId).values,x=[a&&p>1?u-1:u,a&&g>1?d-1:d],C=[a&&p>1?p-1:p,a&&g>1?g-1:g],E=x[0]/C[0],_=x[1]/C[1],M=1/E,R=1/_,L=Math.ceil(M)*2+2,$=Math.ceil(R)*2+2;for(let N=0;N<c;N++){const I=N*o[0];for(let k=0;k<u;k++){const P=I+k*o[1],G=Math.floor(k*M),W=Math.floor(G-L/2);for(let X=0;X<d;X++){const z=P+X*o[2],J=Math.floor(X*R),Q=Math.floor(J-$/2);for(let Y=0;Y<h;Y++){let q=0;for(let te=0;te<L;te++){const ne=te+W;if(ne<0||ne>=p)continue;const le=I+ne*l[1],ye=ne*E,ue=Math.min(u-1,a?Math.round(ye):Math.floor(ye));if(k===ue)for(let ve=0;ve<$;ve++){const xe=ve+Q;if(xe<0||xe>=g)continue;const Pe=le+xe*l[2],ze=xe*_,Ke=Math.min(d-1,a?Math.round(ze):Math.floor(ze));X===Ke&&(q+=b[Pe+Y])}}v[z+Y]=q}}}}return t.makeTensorInfo(i.shape,i.dtype,v)}const sHe={kernelName:SU,backendName:"cpu",kernelFunc:iHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aHe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{dims:s}=r;Cn(i,"reverse");const a=i.shape.length,o=Ir(s,i.shape);if(a===0)return Th({inputs:{x:i},backend:t});const l=new Ca(i.shape,i.dtype),c=t.bufferSync(i);for(let u=0;u<l.size;u++){const d=l.indexToLoc(u),h=d.slice();o.forEach(p=>h[p]=i.shape[p]-1-h[p]),l.set(c.get(...h),...d)}return t.makeTensorInfo(l.shape,l.dtype,l.values)}const oHe={kernelName:RD,backendName:"cpu",kernelFunc:aHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lHe={kernelName:PU,backendName:"cpu",kernelFunc:({inputs:n,attrs:e,backend:t})=>{const{image:r}=n,{radians:i,fillValue:s,center:a}=e,o=t,l=so(r.dtype,xt(r.shape)),[c,u,d,h]=r.shape,[p,g]=Lz(a,u,d),v=255,b=Math.sin(i),x=Math.cos(i),C=o.data.get(r.dataId).values;for(let _=0;_<c;_++){const M=_*d*u*h;for(let R=0;R<u;R++){const L=R*(d*h);for(let $=0;$<d;$++){const N=$*h;for(let I=0;I<h;I++){const k=[c,R,$,I],P=k[2],G=k[1];let W=(P-p)*x-(G-g)*b,X=(P-p)*b+(G-g)*x;W=Math.round(W+p),X=Math.round(X+g);let z=s;if(typeof s!="number"&&(I===3?z=v:z=s[I]),W>=0&&W<d&&X>=0&&X<u){const Q=X*(d*h),Y=W*h,q=M+Q+Y+I;z=C[q]}const J=M+L+N+I;l[J]=z}}}}return{dataId:o.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cHe=Mi(EE,n=>{const e=Math.floor(n);return n-e<.5?Math.floor(n):n-e>.5?Math.ceil(n):e%2===0?e:e+1}),uHe={kernelName:EE,backendName:"cpu",kernelFunc:cHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dHe(n){const{inputs:e,backend:t,attrs:r}=n,{indices:i,updates:s}=e,{shape:a}=r,{sliceRank:o,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=Nv(s,i,a),h=!0,p=t.bufferSync(i),g=t.bufferSync(s),v=By(p,g,a,d,c,l,o,u,0,h);return t.makeTensorInfo(a,v.dtype,v.values)}const fHe={kernelName:CU,backendName:"cpu",kernelFunc:dHe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hHe(n,e){let t=0,r=n.length,i=0;for(;t<r;)i=Math.floor((t+r)/2),n[i]<e?t=i+1:r=i;return r}function pHe(n,e){let t=0,r=n.length,i=0;for(;t<r;)i=Math.floor((t+r)/2),n[i]<=e?t=i+1:r=i;return r}function mHe(n,e,t,r,i,s){const a=js("int32",t*i);for(let o=0;o<t;++o){const l=n.slice(o*r,(o+1)*r),c=o*i;for(let u=0;u<i;++u)a[c+u]=s==="left"?hHe(l,e[u+c]):pHe(l,e[u+c])}return a}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gHe(n){const{inputs:e,backend:t,attrs:r}=n,{sortedSequence:i,values:s}=e,{side:a}=r,o=t.data.get(i.dataId).values,l=t.data.get(s.dataId).values,c=mHe(o,l,i.shape[0],i.shape[1],s.shape[1],a);return t.makeTensorInfo(s.shape,"int32",c)}const yHe={kernelName:EU,backendName:"cpu",kernelFunc:gHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vHe(n){const{inputs:e,backend:t}=n,{condition:r,t:i,e:s}=e;Cn([r,i,s],"select");const a=r.shape.length,o=t.data.get(r.dataId).values,l=t.data.get(i.dataId).values,c=t.data.get(s.dataId).values,u=_c(i.dtype,s.dtype),d=Io(xt(i.shape),u);let h=0;const p=a===0||a>1||i.shape.length===1?1:xt(i.shape.slice(1));for(let g=0;g<o.length;g++)for(let v=0;v<p;v++)o[g]===1?d[h++]=l[g]:d[h++]=c[g];return t.makeTensorInfo(i.shape,u,d)}const bHe={kernelName:ND,backendName:"cpu",kernelFunc:vHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xHe=d3,SHe=f3,wHe=Mi(TE,n=>n>=0?SHe*n:xHe*(Math.exp(n)-1)),CHe={kernelName:TE,backendName:"cpu",kernelFunc:wHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _He=Mi(NE,n=>n<0?-1:n>0?1:0),EHe={kernelName:NE,backendName:"cpu",kernelFunc:_He};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AHe=Mi(ME,n=>Math.sin(n)),THe={kernelName:ME,backendName:"cpu",kernelFunc:AHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MHe=Mi(RE,n=>Math.sinh(n)),RHe={kernelName:RE,backendName:"cpu",kernelFunc:MHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NHe=11920928955078125e-23,p7=Math.log(NHe)+2,IHe=Mi(DE,n=>{const e=n>-p7,t=n<p7,r=Math.exp(n);let i;return t?i=r:e?i=n:i=Math.log(1+r),i}),DHe={kernelName:DE,backendName:"cpu",kernelFunc:IHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kHe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{blockShape:s,paddings:a}=r;Cn([i],"spaceToBatchND");const o=xt(s),l=[[0,0]];l.push(...a);for(let R=1+s.length;R<i.shape.length;++R)l.push([0,0]);const c=Die.kernelFunc({inputs:{x:i},backend:t,attrs:{paddings:l,constantValue:0}}),u=XE(c.shape,s,o,!1),d=KE(u.length,s.length,!1),h=YE(c.shape,s,o,!1),v=Qi({inputs:{x:c},backend:t,attrs:{shape:u}}),C=Hl({inputs:{x:v},backend:t,attrs:{perm:d}}),M=Qi({inputs:{x:C},backend:t,attrs:{shape:h}});return t.disposeIntermediateTensorInfo(c),t.disposeIntermediateTensorInfo(v),t.disposeIntermediateTensorInfo(C),M}const OHe={kernelName:kD,backendName:"cpu",kernelFunc:kHe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BHe(n){const{inputs:e,backend:t}=n,{indices:r,values:i,denseShape:s,defaultValue:a}=e;if(s.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${s.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${i.shape}`);if(a.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${a.shape}`);const o=t.data.get(r.dataId).values,l=t.data.get(i.dataId).values,c=t.data.get(s.dataId).values,u=t.data.get(a.dataId).values[0],[d,h,p,g,v]=iie(o,r.shape,r.dtype,l,i.dtype,c,u);return[t.makeTensorInfo(h,r.dtype,d),t.makeTensorInfo([h[0]],i.dtype,p),t.makeTensorInfo([g.length],"bool",new Uint8Array(g.map(b=>Number(b)))),t.makeTensorInfo([v.length],r.dtype,new Int32Array(v))]}const $He={kernelName:AU,backendName:"cpu",kernelFunc:BHe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LHe(n){const{inputs:e,backend:t}=n,{inputIndices:r,inputShape:i,newShape:s}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${i.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);const a=Array.from(t.data.get(i.dataId).values),o=t.data.get(r.dataId).values,l=Array.from(t.data.get(s.dataId).values),[c,u,d]=sie(o,r.shape,r.dtype,a,l);return[t.makeTensorInfo(u,r.dtype,c),t.makeTensorInfo([d.length],s.dtype,new Int32Array(d))]}const FHe={kernelName:TU,backendName:"cpu",kernelFunc:LHe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PHe(n){const{inputs:e,backend:t}=n,{data:r,indices:i,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${s.shape}`);if(i.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");const a=t.data.get(r.dataId).values,o=t.data.get(i.dataId).values,l=t.data.get(s.dataId).values,[c,u]=T5(a,r.shape,r.dtype,o,l,!0);return t.makeTensorInfo(u,r.dtype,c)}const UHe={kernelName:MU,backendName:"cpu",kernelFunc:PHe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zHe(n){const{inputs:e,backend:t}=n,{data:r,indices:i,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${s.shape}`);if(i.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");const a=t.data.get(r.dataId).values,o=t.data.get(i.dataId).values,l=t.data.get(s.dataId).values,[c,u]=T5(a,r.shape,r.dtype,o,l);return t.makeTensorInfo(u,r.dtype,c)}const HHe={kernelName:RU,backendName:"cpu",kernelFunc:zHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VHe(n){const{inputs:e,backend:t,attrs:r}=n,{sparseIndices:i,sparseValues:s,defaultValue:a}=e,{outputShape:o}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:h}=Nv(s,i,o),p=!1,g=t.bufferSync(i);let v;switch(s.dtype){case"bool":{const b=t.bufferSync(s),x=!!t.data.get(a.dataId).values[0];v=By(g,b,o,h,u,c,l,d,x,p);break}case"float32":{const b=t.bufferSync(s),x=t.data.get(a.dataId).values[0];v=By(g,b,o,h,u,c,l,d,x,p);break}case"int32":{const b=t.bufferSync(s),x=t.data.get(a.dataId).values[0];v=By(g,b,o,h,u,c,l,d,x,p);break}case"string":{const b=t.bufferSync(s),x=Eg(t.data.get(a.dataId).values[0]);v=By(g,b,o,h,u,c,l,d,x,p);break}default:throw new Error(`Unsupported type ${s.dtype}`)}return t.makeTensorInfo(o,v.dtype,v.values)}const GHe={kernelName:NU,backendName:"cpu",kernelFunc:VHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WHe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{numOrSizeSplits:s,axis:a}=r,o=Ir(a,i.shape)[0],l=Zz(i,s,o),c=new Array(i.shape.length).fill(0),u=i.shape.slice();return l.map(d=>{const h=[...u];h[o]=d;const p=vv({inputs:{x:i},backend:t,attrs:{begin:c,size:h}});return c[o]+=d,p})}const jHe={kernelName:OD,backendName:"cpu",kernelFunc:WHe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qHe={kernelName:IU,backendName:"cpu",kernelFunc:({inputs:n,backend:e})=>{const{x:t}=n,r=e;Cn(t,"square");const i=r.data.get(t.dataId).values,s=new Float32Array(i.length);for(let o=0;o<i.length;++o){const l=i[o];s[o]=l*l}return{dataId:r.write(s,t.shape,t.dtype),shape:t.shape,dtype:t.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XHe=Mi(PE,(n,e)=>{const t=e;return isNaN(n)?NaN:n>0?1:t.alpha}),KHe={kernelName:PE,backendName:"cpu",kernelFunc:XHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YHe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{begin:s,end:a,strides:o,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:h}=r;Cn(i,"stridedSlice");const{finalShapeSparse:p,finalShape:g,isIdentity:v,sliceDim0:b,isSimpleSlice:x,begin:C,end:E,strides:_}=Oz(i.shape,s,a,o,l,c,u,d,h);let M;if(v)M=Qi({inputs:{x:i},backend:t,attrs:{shape:g}});else if(b||x){de(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);const R=Iz(C,E,_),L=vv({inputs:{x:i},backend:t,attrs:{begin:C,size:R}});M=Qi({inputs:{x:L},backend:t,attrs:{shape:g}}),t.disposeIntermediateTensorInfo(L)}else{const R=t.bufferSync(i),L=lie(p,R,_,C);M=t.makeTensorInfo(g,L.dtype,L.values)}return M}const JHe={kernelName:DU,backendName:"cpu",kernelFunc:YHe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZHe(n){const{inputs:e,backend:t,attrs:r}=n,{separator:i,nGramWidths:s,leftPad:a,rightPad:o,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:d}=e,h=t.data.get(u.dataId).values,p=t.data.get(d.dataId).values,[g,v]=cie(h,p,i,s,a,o,l,c);return[t.makeTensorInfo([g.length],"string",g),t.makeTensorInfo(d.shape,"int32",v)]}const QHe={kernelName:kU,backendName:"cpu",kernelFunc:ZHe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e8e(n){const{inputs:e,backend:t,attrs:r}=n,{skipEmpty:i}=r,{input:s,delimiter:a}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(s.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(a.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${a.shape}`);const o=t.data.get(s.dataId).values,l=t.data.get(a.dataId).values[0],[c,u,d]=uie(o,l,i),h=u.length;return[t.makeTensorInfo([h,2],"int32",c),t.makeTensorInfo([h],"string",u),t.makeTensorInfo([2],"int32",new Int32Array(d))]}const t8e={kernelName:OU,backendName:"cpu",kernelFunc:e8e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n8e(n){const{inputs:e,backend:t,attrs:r}=n,{numBuckets:i}=r,{input:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const a=t.data.get(s.dataId).values,o=die(a,i);return t.makeTensorInfo(s.shape,"int32",o)}const r8e={kernelName:BU,backendName:"cpu",kernelFunc:n8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i8e=Mi($E,n=>Math.tan(n)),s8e={kernelName:$E,backendName:"cpu",kernelFunc:i8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a8e=Mi(LE,n=>Math.tanh(n)),o8e={kernelName:LE,backendName:"cpu",kernelFunc:a8e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l8e(n){const{inputs:e,backend:t}=n,{tensor:r,indices:i,updates:s}=e,{sliceRank:a,numUpdates:o,sliceSize:l,strides:c,outputSize:u}=Nv(s,i,r.shape),d=!1,h=t.bufferSync(i),p=t.bufferSync(s),g=t.bufferSync(r),v=By(h,p,r.shape,u,l,o,a,c,g,d);return t.makeTensorInfo(r.shape,v.dtype,v.values)}const c8e={kernelName:_U,backendName:"cpu",kernelFunc:l8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u8e(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{reps:s}=r;Cn(i,"tile");const a=hie(t.bufferSync(i),s);return t.makeTensorInfo(a.shape,a.dtype,a.values)}const d8e={kernelName:FE,backendName:"cpu",kernelFunc:u8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f8e(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{k:s,sorted:a}=r;Cn(i,"topk");const o=t.data.get(i.dataId).values,[l,c]=mie(o,i.shape,i.dtype,s,a);return[t.makeTensorInfo(l.shape,l.dtype,l.values),t.makeTensorInfo(c.shape,c.dtype,c.values)]}const h8e={kernelName:$U,backendName:"cpu",kernelFunc:f8e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p8e(n){const{inputs:e,attrs:t,backend:r}=n,{image:i,transforms:s}=e,{interpolation:a,fillMode:o,fillValue:l,outputShape:c}=t,[u,d,h,p]=i.shape,[g,v]=c??[d,h],b=[u,g,v,p],x=kn(i.shape),C=x[0],E=x[1],_=x[2],M=kn(b),R=M[0],L=M[1],$=M[2],N=so(i.dtype,xt(b));N.fill(l);const I=r.data.get(i.dataId).values,k=r.data.get(s.dataId).values;for(let G=0;G<u;++G){const W=s.shape[0]===1?k:k.subarray(G*8,G*8+8);for(let X=0;X<g;++X)for(let z=0;z<v;++z)for(let J=0;J<p;++J){let Q;const Y=W[6]*z+W[7]*X+1;if(Y===0)continue;const q=(W[0]*z+W[1]*X+W[2])/Y,te=(W[3]*z+W[4]*X+W[5])/Y,ne=m7(q,h,o),le=m7(te,d,o);switch(a){case"nearest":Q=x8e(I,d,h,C,E,_,G,le,ne,J,l);break;case"bilinear":Q=S8e(I,d,h,C,E,_,G,le,ne,J,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${a}`)}const ye=G*R+X*L+z*$+J;N[ye]=Q}return r.makeTensorInfo(b,i.dtype,N)}return{dataId:r.write(N,b,i.dtype),shape:i.shape,dtype:i.dtype}}const m8e={kernelName:LU,backendName:"cpu",kernelFunc:p8e};function m7(n,e,t){switch(t){case"reflect":return g8e(n,e);case"wrap":return y8e(n,e);case"nearest":return b8e(n,e);case"constant":default:return v8e(n)}}function g8e(n,e){let t=n;if(t<0)if(e<=1)t=0;else{const r=2*e;t<r&&(t=r*Math.trunc(-t/r)+t),t=t<-e?t+r:-t-1}else if(t>e-1)if(e<=1)t=0;else{const r=2*e;t-=r*Math.trunc(t/r),t>=e&&(t=r-t-1)}return sv(0,t,e-1)}function y8e(n,e){let t=n;if(t<0)if(e<=1)t=0;else{const r=e-1;t+=e*(Math.trunc(-t/r)+1)}else if(t>e-1)if(e<=1)t=0;else{const r=e-1;t-=e*Math.trunc(t/r)}return sv(0,t,e-1)}function v8e(n,e){return n}function b8e(n,e){return sv(0,n,e-1)}function nC(n,e,t,r,i,s,a,o,l,c,u){const d=a*r+o*i+l*s+c;return 0<=o&&o<e&&0<=l&&l<t?n[d]:u}function x8e(n,e,t,r,i,s,a,o,l,c,u){const d=Math.round(o),h=Math.round(l);return nC(n,e,t,r,i,s,a,d,h,c,u)}function S8e(n,e,t,r,i,s,a,o,l,c,u){const d=Math.floor(o),h=Math.floor(l),p=d+1,g=h+1,v=(g-l)*nC(n,e,t,r,i,s,a,d,h,c,u)+(l-h)*nC(n,e,t,r,i,s,a,d,g,c,u),b=(g-l)*nC(n,e,t,r,i,s,a,p,h,c,u)+(l-h)*nC(n,e,t,r,i,s,a,p,g,c,u);return(p-o)*v+(o-d)*b}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w8e(n){const{inputs:e,attrs:t,backend:r}=n,{axis:i}=t,{x:s}=e;Cn(s,"unique");const a=r.data.get(s.dataId).values,{outputValues:o,outputShape:l,indices:c}=gie(a,i,s.shape,s.dtype);return[r.makeTensorInfo(l,s.dtype,o),r.makeTensorInfo([c.length],"int32",c)]}const C8e={kernelName:FU,backendName:"cpu",kernelFunc:w8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _8e(n){const{inputs:e,backend:t,attrs:r}=n,{value:i}=e;let{axis:s}=r;s<0&&(s+=i.shape.length);const a=i.shape.length,o=i.shape[s],l=new Array(a-1);let c=0;for(let p=0;p<a;p++)p!==s&&(l[c++]=i.shape[p]);const u=new Array(a).fill(0),d=i.shape.slice();d[s]=1;const h=new Array(o);for(let p=0;p<h.length;p++){u[s]=p;const g=vv({inputs:{x:i},backend:t,attrs:{begin:u,size:d}});h[p]=Qi({inputs:{x:g},backend:t,attrs:{shape:l}}),t.disposeIntermediateTensorInfo(g)}return h}const E8e={kernelName:LD,backendName:"cpu",kernelFunc:_8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A8e(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,segmentIds:s}=e,{numSegments:a}=r;Cn(i,"unsortedSegmentSum");const o=i.shape.length,l=s.shape.length,c=[],u=[],d=o-l;let h=s;for(let g=0;g<d;++g){const v=xN({inputs:{input:h},backend:t,attrs:{dim:g+1}});h=v,u.push(v)}for(let g=0;g<a;++g){const v=Vg(g,"int32"),b=t.makeTensorInfo([],"int32",v),x=Ire({inputs:{a:b,b:h},backend:t}),C=Og({inputs:{x},backend:t,attrs:{dtype:"float32"}}),E=_3({inputs:{a:C,b:i},backend:t}),_=s2({inputs:{x:E},backend:t,attrs:{axis:0,keepDims:!1}});c.push(_),u.push(b),u.push(x),u.push(C),u.push(E),u.push(_)}const p=Iie({inputs:c,backend:t,attrs:{axis:0}});return u.forEach(g=>t.disposeIntermediateTensorInfo(g)),p}const T8e={kernelName:FD,backendName:"cpu",kernelFunc:A8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M8e=[wUe,n4e,_Ue,AUe,l4e,MUe,NUe,DUe,OUe,$Ue,FUe,UUe,HUe,WUe,qUe,YUe,ZUe,eze,nze,xUe,ize,aze,lze,u4e,uze,a4e,f4e,fze,r4e,pze,gze,yze,bze,Sze,Cze,Eze,Tze,Rze,Ize,kze,Bze,Lze,Pze,zze,Hze,Gze,jze,Xze,Kze,Yze,Jze,Qze,n5e,hUe,i5e,h4e,f5e,p4e,h5e,g4e,b5e,x5e,w5e,v4e,x4e,_5e,A5e,M5e,N5e,w4e,_4e,i4e,D5e,mze,O5e,$5e,F5e,pUe,A4e,M4e,U5e,N4e,H5e,W5e,q5e,Y5e,Z5e,e6e,t6e,D4e,r6e,s6e,o6e,c6e,d6e,h6e,m6e,O4e,y6e,x6e,C6e,$4e,F4e,A6e,R6e,D6e,U4e,O6e,$6e,L6e,Die,z6e,gUe,V4e,V6e,W6e,q6e,K6e,s4e,bF,J6e,yUe,vUe,bUe,Q6e,tHe,rHe,sHe,oHe,lHe,uHe,J4e,fHe,yHe,bHe,CHe,Q4e,EHe,THe,RHe,eUe,S6e,DHe,OHe,$He,FHe,UHe,HHe,GHe,jHe,rUe,qHe,sUe,oUe,KHe,JHe,QHe,t8e,r8e,dUe,e5e,s8e,o8e,c8e,d8e,h8e,m8e,z4e,C8e,E8e,T8e,B6e];for(const n of M8e)EZ(n);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ey={},qT={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function R8e(n,e){Ey[n]=e}function lf(n,e){if(!(n in Ey)||e!=null){const r=I8e(n,e);if(r!==null)Ey[n]=r;else return console.log("Could not get context for WebGL version",n),null}const t=Ey[n];return t==null||t.isContextLost()?(delete Ey[n],lf(n)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),Ey[n])}function N8e(n){if(!it().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&n===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function I8e(n,e){if(n!==1&&n!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const t=e??N8e(n);return t.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete Ey[n]},!1),it().getBool("SOFTWARE_WEBGL_ENABLED")&&(qT.failIfMajorPerformanceCaveat=!1),n===1?t.getContext("webgl",qT)||t.getContext("experimental-webgl",qT):t.getContext("webgl2",qT)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var i_;(function(n){n[n.DENSE=0]="DENSE",n[n.SHARED_BATCH=1]="SHARED_BATCH"})(i_||(i_={}));var Qc;(function(n){n[n.RENDER=0]="RENDER",n[n.UPLOAD=1]="UPLOAD",n[n.PIXELS=2]="PIXELS",n[n.DOWNLOAD=3]="DOWNLOAD"})(Qc||(Qc={}));var to;(function(n){n[n.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",n[n.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",n[n.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",n[n.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",n[n.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(to||(to={}));function a2(n,e){return[e,n]}function D8e(n,e){return n*e}function XT(n){const e=xt(n),t=Math.ceil(e/4);return TL(t)}function Y1(n,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(n/2))]}function k8e(n,e){const[t,r]=Y1(n,e);return t*r*4}function D5(n,e){const t=n;let r,i,s,a,o,l,c,u,d,h;return it().getNumber("WEBGL_VERSION")===2?(r=t.R32F,i=t.R16F,s=t.RGBA16F,a=t.RGBA32F,o=t.RED,c=4,u=1,d=t.HALF_FLOAT,h=t.FLOAT,l=t.RGBA8):(r=n.RGBA,i=n.RGBA,s=n.RGBA,a=t.RGBA,o=n.RGBA,c=4,u=4,d=e!=null?e.HALF_FLOAT_OES:null,h=n.FLOAT,l=n.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:i,internalFormatPackedHalfFloat:s,internalFormatPackedFloat:a,textureFormatFloat:o,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:u,textureTypeHalfFloat:d,textureTypeFloat:h}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pn(n,e){const t=e();return it().getBool("DEBUG")&&O8e(n),t}function O8e(n){const e=n.getError();if(e!==n.NO_ERROR)throw new Error("WebGL Error: "+F8e(n,e))}const B8e=596e-10,$8e=65504;function L8e(n){return!!(it().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||n===0||B8e<Math.abs(n)&&Math.abs(n)<$8e)}function F8e(n,e){switch(e){case n.NO_ERROR:return"NO_ERROR";case n.INVALID_ENUM:return"INVALID_ENUM";case n.INVALID_VALUE:return"INVALID_VALUE";case n.INVALID_OPERATION:return"INVALID_OPERATION";case n.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case n.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case n.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function KT(n,e){return rm(n,()=>n.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function P8e(n,e){const t=rm(n,()=>n.createShader(n.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(pn(n,()=>n.shaderSource(t,e)),pn(n,()=>n.compileShader(t)),n.getShaderParameter(t,n.COMPILE_STATUS)===!1)throw console.log(n.getShaderInfoLog(t)),new Error("Failed to compile vertex shader.");return t}function U8e(n,e){const t=rm(n,()=>n.createShader(n.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(pn(n,()=>n.shaderSource(t,e)),pn(n,()=>n.compileShader(t)),it().get("ENGINE_COMPILE_ONLY"))return t;if(n.getShaderParameter(t,n.COMPILE_STATUS)===!1)throw kie(e,n.getShaderInfoLog(t)),new Error("Failed to compile fragment shader.");return t}const z8e=/ERROR: [0-9]+:([0-9]+):/g;function kie(n,e){const t=z8e.exec(e);if(t==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(n);return}const r=+t[1],i=n.split(`
`),s=i.length.toString().length+2,a=i.map((d,h)=>$x((h+1).toString(),s)+d);let o=0;for(let d=0;d<a.length;d++)o=Math.max(a[d].length,o);const l=a.slice(0,r-1),c=a.slice(r-1,r),u=a.slice(r);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${$x(c[0],o)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join(`
`))}function H8e(n){return rm(n,()=>n.createProgram(),"Unable to create WebGLProgram.")}function V8e(n,e){if(pn(n,()=>n.linkProgram(e)),!it().get("ENGINE_COMPILE_ONLY")&&n.getProgramParameter(e,n.LINK_STATUS)===!1)throw console.log(n.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function KB(n,e){if(pn(n,()=>n.validateProgram(e)),n.getProgramParameter(e,n.VALIDATE_STATUS)===!1)throw console.log(n.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function G8e(n,e){const t=rm(n,()=>n.createBuffer(),"Unable to create WebGLBuffer");return pn(n,()=>n.bindBuffer(n.ARRAY_BUFFER,t)),pn(n,()=>n.bufferData(n.ARRAY_BUFFER,e,n.STATIC_DRAW)),t}function W8e(n,e){const t=rm(n,()=>n.createBuffer(),"Unable to create WebGLBuffer");return pn(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t)),pn(n,()=>n.bufferData(n.ELEMENT_ARRAY_BUFFER,e,n.STATIC_DRAW)),t}function j8e(n){return rm(n,()=>n.createTexture(),"Unable to create WebGLTexture.")}function q8e(n,e){const t=it().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(n<=0||e<=0){const r=`[${n}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(n>t||e>t){const r=`[${n}x${e}]`,i=`[${t}x${t}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+i+".")}}function X8e(n){return rm(n,()=>n.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function g7(n,e,t,r,i,s,a){const o=n.getAttribLocation(e,t);return o===-1?!1:(pn(n,()=>n.bindBuffer(n.ARRAY_BUFFER,r)),pn(n,()=>n.vertexAttribPointer(o,i,n.FLOAT,!1,s,a)),pn(n,()=>n.enableVertexAttribArray(o)),!0)}function K8e(n,e,t){eVe(n,t),pn(n,()=>n.activeTexture(n.TEXTURE0+t)),pn(n,()=>n.bindTexture(n.TEXTURE_2D,e))}function Y8e(n,e,t){return rm(n,()=>n.getUniformLocation(e,t),'uniform "'+t+'" not present in program.')}function J8e(n,e,t){return n.getUniformLocation(e,t)}function Z8e(n,e,t,r){pn(n,()=>K8e(n,e,r)),pn(n,()=>n.uniform1i(t,r))}function YB(n,e,t){pn(n,()=>n.bindFramebuffer(n.FRAMEBUFFER,t)),pn(n,()=>n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0))}function y7(n,e){pn(n,()=>n.bindFramebuffer(n.FRAMEBUFFER,e)),pn(n,()=>n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,null,0))}function YT(n){const e=n.checkFramebufferStatus(n.FRAMEBUFFER);if(e!==n.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Q8e(n,e))}function Q8e(n,e){switch(e){case n.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case n.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case n.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case n.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function rm(n,e,t){const r=pn(n,()=>e());if(r==null)throw new Error(t);return r}function eVe(n,e){const t=n.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+n.TEXTURE0;if(r<n.TEXTURE0||r>t){const i=`[gl.TEXTURE0, gl.TEXTURE${t}]`;throw new Error(`textureUnit must be in ${i}.`)}}function x1(n,e=2){return xt(n.slice(0,n.length-e))}function S1(n){if(n.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[n.length>1?n[n.length-2]:1,n[n.length-1]]}function JT(n){let e=[1,1,1];return n.length===0||n.length===1&&n[0]===1||(e=[x1(n),...S1(n)]),e}function tVe(n,e=!1){let t=it().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=it().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&it().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=t/2),e&&(t=t*2,r=r*2,n=n.map((o,l)=>l>=n.length-2?k4(n[l]):n[l]),n.length===1&&(n=[2,n[0]])),n.length!==2&&(n=Hg(n).newShape);let i=xt(n),s=null;n.length<=1&&i<=t?s=[1,i]:n.length===2&&n[0]<=t&&n[1]<=t?s=n:n.length===3&&n[0]*n[1]<=t&&n[2]<=t?s=[n[0]*n[1],n[2]]:n.length===3&&n[0]<=t&&n[1]*n[2]<=t?s=[n[0],n[1]*n[2]]:n.length===4&&n[0]*n[1]*n[2]<=t&&n[3]<=t?s=[n[0]*n[1]*n[2],n[3]]:n.length===4&&n[0]<=t&&n[1]*n[2]*n[3]<=t&&(s=[n[0],n[1]*n[2]*n[3]]);const a=s!=null&&Math.max(...s)>r&&Math.min(...s)<=(e?2:1)&&Math.min(...s)>0;if(s==null||a)if(e){const o=x1(n);let l=2,c=2;n.length&&([l,c]=S1(n)),i=o*(l/2)*(c/2),s=TL(i).map(u=>u*2)}else s=TL(i);return s}function ZT(n){return n%2===0}function wN(n,e){if(n=n.slice(-2),e=e.slice(-2),Vr(n,e)||!n.length||!e.length||n[0]===0||n[1]===0||e[0]===0||e[1]===0)return!0;if(n.length!==e.length){const t=n[n.length-1],r=e[e.length-1];if(t===r||ZT(t)&&ZT(r)&&(n[0]===1||e[0]===1))return!0}return n[1]===e[1]&&ZT(n[0])&&ZT(e[0])}let JB,ZB;function nVe(n){if(JB==null){const e=lf(n);JB=e.getParameter(e.MAX_TEXTURE_SIZE)}return JB}function rVe(n){if(ZB==null){const e=lf(n);ZB=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,ZB)}function iVe(n){if(n===0)return 0;let e;const t=lf(n);return Vu(t,"EXT_disjoint_timer_query_webgl2")&&n===2?e=2:Vu(t,"EXT_disjoint_timer_query")?e=1:e=0,e}function Vu(n,e){return n.getExtension(e)!=null}function v7(n){try{if(lf(n)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function sVe(n){if(n===0)return!1;const e=lf(n);if(n===1){if(!Vu(e,"OES_texture_float"))return!1}else if(!Vu(e,"EXT_color_buffer_float"))return!1;return SF(e)}function aVe(n){if(n===0)return!1;const e=lf(n);if(n===1){if(!Vu(e,"OES_texture_float")||!Vu(e,"WEBGL_color_buffer_float"))return!1}else{if(Vu(e,"EXT_color_buffer_float"))return SF(e);const r="EXT_color_buffer_half_float";if(Vu(e,r)){const i=e.getExtension(r);return oVe(e,i)}return!1}return SF(e)}function SF(n){const e=D5(n),t=n.createTexture();n.bindTexture(n.TEXTURE_2D,t),n.texImage2D(n.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const s=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,s),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0);const a=n.checkFramebufferStatus(n.FRAMEBUFFER)===n.FRAMEBUFFER_COMPLETE;return n.bindTexture(n.TEXTURE_2D,null),n.bindFramebuffer(n.FRAMEBUFFER,null),n.deleteTexture(t),n.deleteFramebuffer(s),a}function oVe(n,e){const t=D5(n,e),r=n.createTexture();n.bindTexture(n.TEXTURE_2D,r),n.texImage2D(n.TEXTURE_2D,0,t.internalFormatHalfFloat,1,1,0,t.textureFormatFloat,t.textureTypeHalfFloat,null);const a=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,a),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,r,0);const o=n.checkFramebufferStatus(n.FRAMEBUFFER)===n.FRAMEBUFFER_COMPLETE;return n.bindTexture(n.TEXTURE_2D,null),n.bindFramebuffer(n.FRAMEBUFFER,null),n.deleteTexture(r),n.deleteFramebuffer(a),o}function lVe(n){return n!==2?!1:lf(n).fenceSync!=null}function o2(n,e){Array.isArray(n)||(n=[n]),n.forEach(t=>{t!=null&&de(t.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tn=it();Tn.registerFlag("HAS_WEBGL",()=>Tn.getNumber("WEBGL_VERSION")>0);Tn.registerFlag("WEBGL_VERSION",()=>v7(2)?2:v7(1)?1:0);Tn.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);Tn.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Tn.get("WEBGL_VERSION")===2);Tn.registerFlag("WEBGL_CPU_FORWARD",()=>!0);Tn.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);Tn.registerFlag("WEBGL_PACK",()=>Tn.getBool("HAS_WEBGL"));Tn.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Tn.getBool("WEBGL_PACK"));Tn.registerFlag("WEBGL_PACK_CLIP",()=>Tn.getBool("WEBGL_PACK"));Tn.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Tn.getBool("WEBGL_PACK"));Tn.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Tn.getBool("WEBGL_PACK"));Tn.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Tn.getBool("WEBGL_PACK"));Tn.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Tn.getBool("WEBGL_PACK"));Tn.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Tn.getBool("WEBGL_PACK"));Tn.registerFlag("WEBGL_PACK_REDUCE",()=>Tn.getBool("WEBGL_PACK"));Tn.registerFlag("WEBGL_LAZILY_UNPACK",()=>Tn.getBool("WEBGL_PACK"));Tn.registerFlag("WEBGL_CONV_IM2COL",()=>Tn.getBool("WEBGL_PACK"));Tn.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>Tn.getBool("WEBGL_PACK"));Tn.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>nVe(Tn.getNumber("WEBGL_VERSION")));Tn.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>rVe(Tn.getNumber("WEBGL_VERSION")));Tn.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const n=Tn.getNumber("WEBGL_VERSION");return n===0?0:iVe(n)});Tn.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Tn.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!FZ());Tn.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>sVe(Tn.getNumber("WEBGL_VERSION")));Tn.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>Tn.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:Tn.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));Tn.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>aVe(Tn.getNumber("WEBGL_VERSION")));Tn.registerFlag("WEBGL_FENCE_API_ENABLED",()=>lVe(Tn.getNumber("WEBGL_VERSION")));Tn.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Tn.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);Tn.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,n=>{if(typeof n!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${n}.`);if(n<0&&n!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${n}.`)});Tn.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>FZ()?1:-1,n=>{if(typeof n!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${n}.`);if(n<0&&n!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${n}.`)});Tn.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);Tn.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);Tn.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);Tn.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);Tn.registerFlag("WEBGL_EXP_CONV",()=>!1);Tn.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>Tn.getBool("IS_TEST"));Tn.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);Tn.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);Tn.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);Tn.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ol(){let n,e,t,r,i,s,a,o,l,c;return it().getNumber("WEBGL_VERSION")===2?(n="#version 300 es",e="in",t="out",r="in",i="texture",s="outputColor",a="out vec4 outputColor;",o=it().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(n="",e="attribute",t="varying",r="varying",i="texture2D",s="gl_FragColor",a="",o=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:n,attribute:e,varyingVs:t,varyingFs:r,texture2D:i,output:s,defineOutput:a,defineSpecialNaN:o,defineSpecialInf:l,defineRound:c}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kv(n,e,t="index"){const r=kn(e);return r.map((i,s)=>{const a=`int ${n[s]} = ${t} / ${i}`,o=s===r.length-1?`int ${n[s+1]} = ${t} - ${n[s]} * ${i}`:`index -= ${n[s]} * ${i}`;return`${a}; ${o};`}).join("")}function E3(n,e,t="index"){const r=kn(e);return r.map((i,s)=>{const a=`int ${n[s]} = ${t} / outShapeStrides[${s}]`,o=s===r.length-1?`int ${n[s+1]} = ${t} - ${n[s]} * outShapeStrides[${s}]`:`index -= ${n[s]} * outShapeStrides[${s}]`;return`${a}; ${o};`}).join("")}function cVe(n,e){const t=n.length,r=n.map(s=>`${e}[${s}]`),i=new Array(t-1);i[t-2]=r[t-1];for(let s=t-3;s>=0;--s)i[s]=`(${i[s+1]} * ${r[s+1]})`;return i}function uVe(n,e,t="index"){const r=n.map((s,a)=>a),i=cVe(r,e);return i.map((s,a)=>{const o=`int ${n[a]} = ${t} / ${i[a]}`,l=a===i.length-1?`int ${n[a+1]} = ${t} - ${n[a]} * ${i[a]}`:`index -= ${n[a]} * ${i[a]}`;return`${o}; ${l};`}).join("")}function k5(n){const e=kn(n).map(t=>t.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function O5(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const Oie=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:Bie}=TOe;function dVe(n,e,t){const r=[];if(n.forEach(p=>{const g=xt(p.shapeInfo.logicalShape);if(p.shapeInfo.isUniform?r.push(`uniform float ${p.name}${g>1?`[${g}]`:""};`):(r.push(`uniform sampler2D ${p.name};`),r.push(`uniform int offset${p.name};`)),t.enableShapeUniforms){const{uniformShape:v}=B5(t.packedInputs,p.shapeInfo.logicalShape,p.shapeInfo.texShape);switch(v.length){case 1:r.push(`uniform int ${p.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${p.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${p.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${p.name}Shape;`);break}r.push(`uniform ivec2 ${p.name}TexShape;`)}}),t.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}t.customUniforms&&t.customUniforms.forEach(p=>{r.push(`uniform ${p.type} ${p.name}${p.arrayIndex?`[${p.arrayIndex}]`:""};`)});const i=r.join(`
`),s=n.map(p=>fVe(p,e,t.packedInputs,t.enableShapeUniforms)).join(`
`),a=e.texShape,o=ol(),l=mVe(o);let c,u,d=vVe(o);return e.isPacked?(c=hVe(e.logicalShape,a,t.enableShapeUniforms),u=yVe(o)):(c=pVe(e.logicalShape,a,t.enableShapeUniforms),u=gVe(o)),t.packedInputs&&(d+=wVe),[d,l,u,i,c,s,t.userCode].join(`
`)}function J1(n,e=!1){const t=n.shapeInfo.logicalShape;switch(t.length){case 0:return OVe(n,e);case 1:return $Ve(n,e);case 2:return FVe(n,e);case 3:return UVe(n,e);case 4:return HVe(n,e);case 5:return VVe(n);case 6:return GVe(n);default:throw new Error(`${t.length}-D input sampling is not yet supported`)}}function $ie(n,e){switch(n.shapeInfo.logicalShape.length){case 0:return kVe(n);case 1:return BVe(n,e);case 2:return LVe(n,e);case 3:return PVe(n,e);default:return zVe(n,e)}}function fVe(n,e,t=!1,r){let i="";t?i+=$ie(n,r):i+=J1(n,r);const s=n.shapeInfo.logicalShape,a=e.logicalShape;return s.length<=a.length&&(t?i+=WVe(n,e):i+=jVe(n,e)),i}function hVe(n,e,t){switch(n.length){case 0:return Lie();case 1:return CVe(n,e,t);case 2:return IVe(n,e,t);case 3:return EVe(n,e,t);default:return TVe(n,e,t)}}function pVe(n,e,t){switch(n.length){case 0:return Lie();case 1:return _Ve(n,e,t);case 2:return DVe(n,e,t);case 3:return AVe(n,e,t);case 4:return MVe(n,e,t);case 5:return RVe(n,e);case 6:return NVe(n,e);default:throw new Error(`${n.length}-D output sampling is not yet supported`)}}function mVe(n){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${n.texture2D}(textureSampler, uv).r;
    }
  `}function gVe(n){return`
    void setOutput(float val) {
      ${n.output} = vec4(val, 0, 0, 0);
    }
  `}function yVe(n){return`
    void setOutput(vec4 val) {
      ${n.output} = val;
    }
  `}function vVe(n){return`${n.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${n.varyingFs} vec2 resultUV;
    ${n.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${n.defineSpecialNaN}
    ${n.defineSpecialInf}
    ${n.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${bVe}
    ${xVe}
    ${SVe}
  `}const bVe=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,xVe=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,SVe=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,wVe=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function Lie(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function CVe(n,e,t){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?t?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?t?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:t?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function _Ve(n,e,t){return e[0]===1?t?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?t?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:t?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function EVe(n,e,t){if(t)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],i=Math.ceil(n[2]/2),s=i*Math.ceil(n[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${s};
      index -= b * ${s};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec3(b, r, c);
    }
  `}function AVe(n,e,t){if(t)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${E3(["r","c","d"],n)}
    return ivec3(r, c, d);
  }
`;const r=kv(["r","c","d"],n);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function TVe(n,e,t){if(t)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],i=Math.ceil(n[n.length-1]/2),s=i*Math.ceil(n[n.length-2]/2);let a=s,o="",l="b, r, c";for(let c=2;c<n.length-1;c++)a*=n[n.length-c-1],o=`
      int b${c} = index / ${a};
      index -= b${c} * ${a};
    `+o,l=`b${c}, `+l;return`
    ivec${n.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${o}

      int b = index / ${s};
      index -= b * ${s};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec${n.length}(${l});
    }
  `}function MVe(n,e,t){if(t)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${E3(["r","c","d","d2"],n)}
      return ivec4(r, c, d, d2);
    }
  `;const r=kv(["r","c","d","d2"],n);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function RVe(n,e){const t=kv(["r","c","d","d2","d3"],n);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${t}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function NVe(n,e){const t=kv(["r","c","d","d2","d3","d4"],n);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${t}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function IVe(n,e,t){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(Vr(n,e))return t?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const i=Math.ceil(n[1]/2);return t?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec2(r, c);
    }
  `}function DVe(n,e,t){return Vr(n,e)?t?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:n[1]===1?t?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:n[0]===1?t?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:t?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${n[1]};
      int c = index - r * ${n[1]};
      return ivec2(r, c);
    }
  `}function Ov(n){return`offset${n}`}function kVe(n){const e=n.name,t="get"+e.charAt(0).toUpperCase()+e.slice(1),r=ol();return`
    vec4 ${t}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function OVe(n,e){const t=n.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1);if(n.shapeInfo.isUniform)return`float ${r}() {return ${t};}`;const[i,s]=n.shapeInfo.texShape;if(i===1&&s===1)return`
      float ${r}() {
        return sampleTexture(${t}, halfCR);
      }
    `;const a=Ov(t);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${t}TexShape[0], ${t}TexShape[1], ${a});
      return sampleTexture(${t}, uv);
    }
  `;const[o,l]=n.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${o}, ${l}, ${a});
      return sampleTexture(${t}, uv);
    }
  `}function BVe(n,e){const t=n.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1),i=n.shapeInfo.texShape,s=ol();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${t}TexShape[0]) / 2.0), ceil(float(${t}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${s.texture2D}(${t}, uv);
    }
  `;const a=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${a[0]}, ${a[1]}, index);
      return ${s.texture2D}(${t}, uv);
    }
  `}function $Ve(n,e){const t=n.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1);if(n.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${Z1(n)}
      }
    `;const i=n.shapeInfo.texShape,s=i[0],a=i[1];if(a===1&&s===1)return`
      float ${r}(int index) {
        return sampleTexture(${t}, halfCR);
      }
    `;const o=Ov(t);return a===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / float(${t}TexShape[0]));
        return sampleTexture(${t}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / ${s}.0);
        return sampleTexture(${t}, uv);
      }
    `:s===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${o}) + 0.5) / float(${t}TexShape[1]), 0.5);
        return sampleTexture(${t}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${o}) + 0.5) / ${a}.0, 0.5);
        return sampleTexture(${t}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${t}TexShape[0], ${t}TexShape[1], index + ${o});
      return sampleTexture(${t}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${s}, ${a}, index + ${o});
      return sampleTexture(${t}, uv);
    }
  `}function LVe(n,e){const t=n.shapeInfo.logicalShape,r=n.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n.shapeInfo.texShape,a=s[0],o=s[1],l=ol();if(s!=null&&Vr(t,s))return e?`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${o}.0, ${a}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${i}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const c=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],u=Math.ceil(t[1]/2);return`
    vec4 ${i}(int row, int col) {
      vec2 uv = packedUVfrom2D(${u}, ${c[0]}, ${c[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function FVe(n,e){const t=n.shapeInfo.logicalShape,r=n.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n.shapeInfo.texShape;if(s!=null&&Vr(t,s)){if(e)return`
      float ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const h=s[0],p=s[1];return`
    float ${i}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${p}.0, ${h}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:a,keptDims:o}=Hg(t),l=a;if(l.length<t.length){const h=Q1(n,l),p=["row","col"];return`
      ${J1(h,e)}
      float ${i}(int row, int col) {
        return ${i}(${eS(p,o)});
      }
    `}if(n.shapeInfo.isUniform)return`
      float ${i}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${t[1]}, 1)));
        ${Z1(n)}
      }
    `;const c=s[0],u=s[1],d=Ov(r);return u===1?e?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${t[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);
      return sampleTexture(${r}, uv);
    }
  `:c===1?e?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${t[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${u}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${i}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${i}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${t[1]} + col + ${d};
    vec2 uv = uvFromFlat(${c}, ${u}, index);
    return sampleTexture(${r}, uv);
  }
`}function PVe(n,e){const t=n.shapeInfo.logicalShape,r=n.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n.shapeInfo.texShape,a=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];if(t[0]===1){const h=t.slice(1),p=[1,2],g=Q1(n,h),v=["b","row","col"];return`
        ${$ie(g,e)}
        vec4 ${i}(int b, int row, int col) {
          return ${i}(${eS(v,p)});
        }
      `}const o=ol();if(e)return`
    vec4 ${i}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${o.texture2D}(${r}, uv);
    }
  `;const l=a[0],c=a[1],u=Math.ceil(t[2]/2),d=u*Math.ceil(t[1]/2);return`
    vec4 ${i}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${c}, ${d}, ${u}, b, row, col);
      return ${o.texture2D}(${r}, uv);
    }
  `}function UVe(n,e){const t=n.shapeInfo.logicalShape,r=n.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t[1]*t[2],a=t[2],{newShape:o,keptDims:l}=Hg(t),c=o;if(c.length<t.length){const v=Q1(n,c),b=["row","col","depth"];return`
        ${J1(v,e)}
        float ${i}(int row, int col, int depth) {
          return ${i}(${eS(b,l)});
        }
      `}if(n.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${s}, ${a}, 1)));
        ${Z1(n)}
      }
    `;const u=n.shapeInfo.texShape,d=u[0],h=u[1],p=n.shapeInfo.flatOffset;if(h===s&&p==null)return e?`
      float ${i}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${i}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${a}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${h}.0, ${d}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(h===a&&p==null)return e?`
      float ${i}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${t[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${h}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `;const g=Ov(r);return e?`
    float ${i}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${g};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${i}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${s} + col * ${a} + depth + ${g};
        vec2 uv = uvFromFlat(${d}, ${h}, index);
        return sampleTexture(${r}, uv);
      }
  `}function zVe(n,e){const t=n.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1),i=ol();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${t}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${t}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${t}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${t}TexShape[0]) / 2.0), ceil(float(${t}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${i.texture2D}(${t}, uv);
    }
  `;const s=n.shapeInfo.logicalShape,a=s.length,o=n.shapeInfo.texShape,l=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],c=l[0],u=l[1],d=Math.ceil(s[a-1]/2);let h=d*Math.ceil(s[a-2]/2),p="int b, int row, int col",g=`b * ${h} + (row / 2) * ${d} + (col / 2)`;for(let v=2;v<a-1;v++)p=`int b${v}, `+p,h*=s[a-v-1],g=`b${v} * ${h} + `+g;return`
    vec4 ${r}(${p}) {
      int index = ${g};
      int texR = index / ${u};
      int texC = index - texR * ${u};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${u}, ${c});
      return ${i.texture2D}(${t}, uv);
    }
  `}function HVe(n,e){const t=n.shapeInfo.logicalShape,r=n.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t[3],a=t[2]*s,o=t[1]*a,{newShape:l,keptDims:c}=Hg(t);if(l.length<t.length){const C=Q1(n,l),E=["row","col","depth","depth2"];return`
      ${J1(C,e)}
      float ${i}(int row, int col, int depth, int depth2) {
        return ${i}(${eS(E,c)});
      }
    `}if(n.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${o}, ${a}, ${s}, 1)));
        ${Z1(n)}
      }
    `;const u=n.shapeInfo.flatOffset,d=n.shapeInfo.texShape,h=d[0],p=d[1],g=`int stride2 = ${r}Shape[3];`,v=`int stride1 = ${r}Shape[2] * stride2;`,b=`int stride0 = ${r}Shape[1] * stride1;`;if(p===o&&u==null)return e?`
      float ${i}(int row, int col, int depth, int depth2) {
        ${g}
        ${v}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${a}, ${s}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${p}.0, ${h}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(p===s&&u==null)return e?`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${t[1]*t[2]}, ${t[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${p}.0, ${h}.0);
        return sampleTexture(${r}, uv);
      }
    `;const x=Ov(r);return e?`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${g}
      ${v}
      ${b}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${x});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${o} + col * ${a} +
          depth * ${s} + depth2;
      vec2 uv = uvFromFlat(${h}, ${p}, index + ${x});
      return sampleTexture(${r}, uv);
    }
  `}function VVe(n){const e=n.shapeInfo.logicalShape,t=n.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1),i=e[4],s=e[3]*i,a=e[2]*s,o=e[1]*a,{newShape:l,keptDims:c}=Hg(e);if(l.length<e.length){const v=Q1(n,l),b=["row","col","depth","depth2","depth3"];return`
      ${J1(v)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${eS(b,c)});
      }
    `}if(n.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${o}, ${a}, ${s}, ${i})) +
          depth3;
        ${Z1(n)}
      }
    `;const u=n.shapeInfo.flatOffset,d=n.shapeInfo.texShape,h=d[0],p=d[1];if(p===o&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${a}, ${s}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${p}.0, ${h}.0);
        return sampleTexture(${t}, uv);
      }
    `;if(p===i&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${p}.0, ${h}.0);
        return sampleTexture(${t}, uv);
      }
    `;const g=Ov(t);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${o} + col * ${a} + depth * ${s} +
          depth2 * ${i} + depth3 + ${g};
      vec2 uv = uvFromFlat(${h}, ${p}, index);
      return sampleTexture(${t}, uv);
    }
  `}function GVe(n){const e=n.shapeInfo.logicalShape,t=n.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1),{newShape:i,keptDims:s}=Hg(e);if(i.length<e.length){const b=Q1(n,i),x=["row","col","depth","depth2","depth3","depth4"];return`
      ${J1(b)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${eS(x,s)});
      }
    `}const a=e[5],o=e[4]*a,l=e[3]*o,c=e[2]*l,u=e[1]*c;if(n.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${u}, ${c}, ${l}, ${o})) +
          dot(
            vec2(depth3, depth4),
            vec2(${a}, 1)));
        ${Z1(n)}
      }
    `;const d=n.shapeInfo.flatOffset,h=n.shapeInfo.texShape,p=h[0],g=h[1];if(g===u&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${c}, ${l}, ${o}, ${a})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${g}.0, ${p}.0);
        return sampleTexture(${t}, uv);
      }
    `;if(g===a&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${g}.0, ${p}.0);
        return sampleTexture(${t}, uv);
      }
    `;const v=Ov(t);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${u} + col * ${c} + depth * ${l} +
          depth2 * ${o} + depth3 * ${a} + depth4 + ${v};
      vec2 uv = uvFromFlat(${p}, ${g}, index);
      return sampleTexture(${t}, uv);
    }
  `}function Z1(n){const e=n.name,t=xt(n.shapeInfo.logicalShape);return t<2?`return ${e};`:`
    for (int i = 0; i < ${t}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function WVe(n,e){const t=n.name,r=t.charAt(0).toUpperCase()+t.slice(1),i="get"+r+"AtOutCoords",s=n.shapeInfo.logicalShape.length,a=e.logicalShape.length,o=Bie(n.shapeInfo.logicalShape,e.logicalShape),l=Li(a),c=a-s;let u;const d=["x","y","z","w","u","v"];s===0?u="":a<2&&o.length>=1?u="coords = 0;":u=o.map(C=>`coords.${d[C+c]} = 0;`).join(`
`);let h="";a<2&&s>0?h="coords":h=n.shapeInfo.logicalShape.map((C,E)=>`coords.${d[E+c]}`).join(", ");let p="return outputValue;";const v=xt(n.shapeInfo.logicalShape)===1,x=xt(e.logicalShape)===1;if(s===1&&!v&&!x)p=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(v&&!x)a===1?p=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:p=`
        return vec4(outputValue.x);
      `;else if(o.length){const C=s-2,E=s-1;o.indexOf(C)>-1&&o.indexOf(E)>-1?p="return vec4(outputValue.x);":o.indexOf(C)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":o.indexOf(E)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${i}() {
      ${l} coords = getOutputCoords();
      ${u}
      vec4 outputValue = get${r}(${h});
      ${p}
    }
  `}function jVe(n,e){const t=n.name,r=t.charAt(0).toUpperCase()+t.slice(1),i="get"+r+"AtOutCoords",s=e.texShape,a=n.shapeInfo.texShape,o=n.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!n.shapeInfo.isUniform&&o===l&&n.shapeInfo.flatOffset==null&&Vr(a,s))return`
      float ${i}() {
        return sampleTexture(${t}, resultUV);
      }
    `;const c=Li(l),u=Bie(n.shapeInfo.logicalShape,e.logicalShape),d=l-o;let h;const p=["x","y","z","w","u","v"];o===0?h="":l<2&&u.length>=1?h="coords = 0;":h=u.map(v=>`coords.${p[v+d]} = 0;`).join(`
`);let g="";return l<2&&o>0?g="coords":g=n.shapeInfo.logicalShape.map((v,b)=>`coords.${p[b+d]}`).join(", "),`
    float ${i}() {
      ${c} coords = getOutputCoords();
      ${h}
      return get${r}(${g});
    }
  `}function Li(n){if(n<=1)return"int";if(n===2)return"ivec2";if(n===3)return"ivec3";if(n===4)return"ivec4";if(n===5)return"ivec5";if(n===6)return"ivec6";throw Error(`GPU for rank ${n} is not yet supported`)}function B5(n,e,t){const{newShape:r,keptDims:i}=Hg(e),s=e.length,a=n&&s===3&&e[0]===1,o=a?e.slice(1):r,l=!n&&s>1&&!Vr(e,t)&&r.length<s||a;return{useSqueezeShape:l,uniformShape:l?o:e,keptDims:i}}function Q1(n,e){const t=JSON.parse(JSON.stringify(n));return t.shapeInfo.logicalShape=e,t}function eS(n,e){return e.map(t=>n[t]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qVe(n,e,t,r){const i=t.map((u,d)=>{const h={logicalShape:u.shape,texShape:u.isUniform?null:u.texData.texShape,isUniform:u.isUniform,isPacked:u.isUniform?!1:u.texData.isPacked,flatOffset:null};return u.texData!=null&&u.texData.slice!=null&&u.texData.slice.flatOffset>0&&(h.flatOffset=u.texData.slice.flatOffset),{name:e.variableNames[d],shapeInfo:h}}),s=i.map(u=>u.shapeInfo),a={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},o=dVe(i,a,e),l=U8e(n.gl,o),c=n.createProgram(l);return it().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:o,webGLProgram:c,inShapeInfos:s,outShapeInfo:a,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(n.buildVao(c),Object.assign({program:e,fragmentShader:l,source:o,webGLProgram:c,inShapeInfos:s,outShapeInfo:a},Fie(n,e,c)))}function Fie(n,e,t){const r=[],i=[];let s,a,o,l=null,c=null;c=n.getUniformLocation(t,"NAN",!1),it().getNumber("WEBGL_VERSION")===1&&(l=n.getUniformLocation(t,"INFINITY",!1));const u=!1;for(const d of e.variableNames){const h={name:d,uniform:n.getUniformLocation(t,d,u),offset:n.getUniformLocation(t,`offset${d}`,u)};e.enableShapeUniforms&&(h.shape=n.getUniformLocation(t,`${d}Shape`,u),h.texShape=n.getUniformLocation(t,`${d}TexShape`,u)),r.push(h)}if(e.enableShapeUniforms&&(s=n.getUniformLocation(t,"outShape",u),o=n.getUniformLocation(t,"outShapeStrides",u),a=n.getUniformLocation(t,"outTexShape",u)),e.customUniforms)for(const d of e.customUniforms)i.push(n.getUniformLocation(t,d.name,u));return{variablesLocations:r,customUniformLocations:i,infLoc:l,nanLoc:c,outShapeLocation:s,outShapeStridesLocation:o,outTexShapeLocation:a}}function b7(n,e){if(n.length!==e.length)throw Error(`Binary was compiled with ${n.length} inputs, but was executed with ${e.length} inputs`);n.forEach((t,r)=>{const i=t.logicalShape,s=e[r],a=s.shape;if(!Vr(i,a))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${i} and ${a} must match`);if(t.isUniform&&s.isUniform)return;const o=t.texShape,l=s.isUniform?null:s.texData.texShape;if(!Vr(o,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${o} and ${l} must match`)})}function XVe(n,e,t,r,i){e.program.enableShapeUniforms||(b7(e.inShapeInfos,t),b7([e.outShapeInfo],[r]));const s=r.texData.texture,a=r.texData.texShape;r.texData.isPacked?n.setOutputPackedMatrixTexture(s.texture,a[0],a[1]):n.setOutputMatrixTexture(s.texture,a[0],a[1]),n.setProgram(e.webGLProgram),n.bindVertexArray(e.webGLProgram.vao),it().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&n.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&n.gl.uniform1f(e.nanLoc,NaN);for(let l=0;l<t.length;++l){const c=t[l],{uniform:u,offset:d,shape:h,texShape:p}=e.variablesLocations[l];if(h){const{uniformShape:g}=B5(e.program.packedInputs,c.shape,c.texData.texShape);switch(g.length){case 1:n.gl.uniform1iv(h,new Int32Array(g));break;case 2:n.gl.uniform2iv(h,new Int32Array(g));break;case 3:n.gl.uniform3iv(h,new Int32Array(g));break;case 4:n.gl.uniform4iv(h,new Int32Array(g));break}}if(p&&n.gl.uniform2i(p,c.texData.texShape[0],c.texData.texShape[1]),u!=null){if(c.isUniform){if(xt(c.shape)<2)n.gl.uniform1f(u,c.uniformValues[0]);else{let g=c.uniformValues;g instanceof Float32Array||(g=new Float32Array(g)),n.gl.uniform1fv(u,g)}continue}c.texData.slice!=null&&d!=null&&n.gl.uniform1i(d,c.texData.slice.flatOffset),n.setInputMatrixTexture(c.texData.texture.texture,u,l)}}const o=e.outShapeLocation;if(o)switch(r.shape.length){case 1:n.gl.uniform1iv(o,new Int32Array(r.shape));break;case 2:n.gl.uniform2iv(o,new Int32Array(r.shape));break;case 3:n.gl.uniform3iv(o,new Int32Array(r.shape));break;case 4:n.gl.uniform4iv(o,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const l=kn(r.shape);switch(r.shape.length){case 2:n.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:n.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:n.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}if(e.outTexShapeLocation&&n.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&i)for(let l=0;l<e.program.customUniforms.length;++l){const c=e.program.customUniforms[l],u=e.customUniformLocations[l],d=i[l];if(c.type==="float")n.gl.uniform1fv(u,d);else if(c.type==="vec2")n.gl.uniform2fv(u,d);else if(c.type==="vec3")n.gl.uniform3fv(u,d);else if(c.type==="vec4")n.gl.uniform4fv(u,d);else if(c.type==="int")n.gl.uniform1iv(u,d);else if(c.type==="ivec2")n.gl.uniform2iv(u,d);else if(c.type==="ivec3")n.gl.uniform3iv(u,d);else if(c.type==="ivec4")n.gl.uniform4iv(u,d);else throw Error(`uniform type ${c.type} is not supported yet.`)}n.executeProgram()}function KVe(n,e,t){let r="";e.concat(t).forEach(a=>{const o=a.texData!=null&&a.texData.slice!=null&&a.texData.slice.flatOffset>0;if(n.enableShapeUniforms&&!a.isUniform){const l=a.texData.texShape,{useSqueezeShape:c,uniformShape:u,keptDims:d}=B5(n.packedInputs,a.shape,l);let h="",p="",g="";if(u.length===1&&n.packedInputs){const M=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];h=`${M[0]>1}_${M[1]>1}`}else if(u.length===2&&!n.packedInputs)p=`${u[0]>1}_${u[1]>1}`;else if(u.length>2&&!n.packedInputs){const M=kn(u);g=`${M[0]===l[1]}_${M[M.length-1]===l[1]}`}const v=a.shape.length,b=u.length===2&&Vr(a.shape,l),x=xt(a.shape)===1,C=h1(a.shape,t.shape),E=!n.packedInputs&&v===t.shape.length&&Vr(l,t.texData.texShape),_=n.packedInputs||u.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${v}_${E}_${c?d:""}_${u.length}_${x}_${C}_${b}_${h}_${p}_${g}_${_}_${o}`}else{const l=a.isUniform?"uniform":a.texData.texShape;r+=`${a.shape}_${l}_${o}`}});const i=n.userCode;let s=n.constructor.name;return s+="_"+r+"_"+i+`${it().getNumber("WEBGL_VERSION")}`,s}function Oo(n){return it().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&n<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YVe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=i_.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=ol();this.outputShape=e,this.enableShapeUniforms=Oo(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?E3(["r","c","d"],e):kv(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${t.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JVe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=i_.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=ol();this.outputShape=e,this.enableShapeUniforms=Oo(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?E3(["r","c","d"],e):kv(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${t.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZVe{constructor(e){this.variableNames=["A"],this.outTexUsage=Qc.DOWNLOAD;const t=ol();this.outputShape=e,this.userCode=`
      ${Oie}

      void main() {
        float x = getAAtOutCoords();
        ${t.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QVe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Qc.DOWNLOAD;const t=ol();this.outputShape=e,this.userCode=`
      ${Oie}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${t.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eGe={R:0,G:1,B:2,A:3};class x7{constructor(e,t=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const i=ol();this.outputShape=e,this.enableShapeUniforms=Oo(this.outputShape.length);let s="result";t&&(s="floor(result * 255. + 0.5)");let a="";for(let o=0;o<r.length;o++){const l=r[o];a+=`
          if(offset == ${o}) {
            result = values[${eGe[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?O5():k5(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${i.texture2D}(A, uv);
          ${a}
        }
        ${i.output} = vec4(${s}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tGe{constructor(e,t=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=ol();this.outputShape=e,this.enableShapeUniforms=Oo(this.outputShape.length);let i="",s="result";t&&(s="floor(result * 255. + 0.5)");for(let a=0;a<=1;a++)for(let o=0;o<=1;o++){const l=a*2+o;i+=`
          localCoords = coords;
          if(localCoords[2] + ${o} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${o};
          if (localCoords[1] + ${a} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${a};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?O5():k5(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${i}

          ${r.output} = ${s};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nGe(n){const e=ol(),t=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return P8e(n,t)}function rGe(n){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return G8e(n,e)}function iGe(n){const e=new Uint16Array([0,1,2,2,1,3]);return W8e(n,e)}function l2(n,e,t,r,i,s){q8e(e,t);const a=j8e(n),o=n.TEXTURE_2D;return pn(n,()=>n.bindTexture(o,a)),pn(n,()=>n.texParameteri(o,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE)),pn(n,()=>n.texParameteri(o,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE)),pn(n,()=>n.texParameteri(o,n.TEXTURE_MIN_FILTER,n.NEAREST)),pn(n,()=>n.texParameteri(o,n.TEXTURE_MAG_FILTER,n.NEAREST)),it().getNumber("WEBGL_VERSION")===1?pn(n,()=>n.texImage2D(o,0,r,e,t,0,i,s,null)):pn(n,()=>n.texStorage2D(o,1,r,e,t)),pn(n,()=>n.bindTexture(n.TEXTURE_2D,null)),{texture:a,texShape:[t,e]}}function Pie(n){return n.internalFormatFloat}function sGe(n,e,t,r){const[i,s]=a2(e,t);return l2(n,i,s,Pie(r),r.textureFormatFloat,n.FLOAT)}function Uie(n){return n.internalFormatHalfFloat}function aGe(n,e,t,r){const[i,s]=a2(e,t);return l2(n,i,s,Uie(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function zie(n){return n.downloadTextureFormat}function oGe(n,e,t,r){const[i,s]=a2(e,t);return l2(n,i,s,zie(r),n.RGBA,n.UNSIGNED_BYTE)}function Hie(n){return n.internalFormatPackedFloat}function lGe(n,e,t,r){const[i,s]=Y1(e,t);return l2(n,i,s,Hie(r),n.RGBA,n.FLOAT)}function Vie(n){return n.internalFormatPackedHalfFloat}function cGe(n,e,t,r){const[i,s]=Y1(e,t);return l2(n,i,s,Vie(r),n.RGBA,r.textureTypeHalfFloat)}function uGe(n,e,t){return pn(n,()=>n.bindBuffer(n.ARRAY_BUFFER,t)),g7(n,e,"clipSpacePos",t,3,20,0)&&g7(n,e,"uv",t,2,20,12)}function dGe(n,e,t,r,i,s){pn(n,()=>n.bindTexture(n.TEXTURE_2D,e));let a,o,l;i instanceof Uint8Array?(a=new Uint8Array(t*r*4),o=n.UNSIGNED_BYTE,l=n.RGBA):(a=new Float32Array(t*r*4),o=n.FLOAT,l=s.internalFormatPackedFloat),a.set(i),it().getNumber("WEBGL_VERSION")===2?pn(n,()=>n.texSubImage2D(n.TEXTURE_2D,0,0,0,t,r,n.RGBA,o,a)):pn(n,()=>n.texImage2D(n.TEXTURE_2D,0,l,t,r,0,n.RGBA,o,a)),pn(n,()=>n.bindTexture(n.TEXTURE_2D,null))}function fGe(n,e,t){pn(n,()=>n.bindTexture(n.TEXTURE_2D,e)),t.data instanceof Uint8Array?it().getNumber("WEBGL_VERSION")===2?pn(n,()=>n.texSubImage2D(n.TEXTURE_2D,0,0,0,t.width,t.height,n.RGBA,n.UNSIGNED_BYTE,t.data)):pn(n,()=>n.texImage2D(n.TEXTURE_2D,0,n.RGBA,t.width,t.height,0,n.RGBA,n.UNSIGNED_BYTE,t.data)):it().getNumber("WEBGL_VERSION")===2?pn(n,()=>n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,t)):pn(n,()=>n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t)),pn(n,()=>n.bindTexture(n.TEXTURE_2D,null))}function hGe(n,e,t,r){const i=n.createBuffer();pn(n,()=>n.bindBuffer(n.PIXEL_PACK_BUFFER,i));const o=4*4*e*t;return pn(n,()=>n.bufferData(n.PIXEL_PACK_BUFFER,o,n.STREAM_READ)),pn(n,()=>n.readPixels(0,0,t,e,n.RGBA,n.FLOAT,0)),pn(n,()=>n.bindBuffer(n.PIXEL_PACK_BUFFER,null)),i}function pGe(n,e,t){const r=n,i=new Float32Array(t);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function mGe(n,e,t,r){const[i,s]=a2(e,t),a=4,o=new Uint8Array(D8e(e*t,a));return pn(n,()=>n.readPixels(0,0,i,s,r.downloadTextureFormat,n.UNSIGNED_BYTE,o)),new Float32Array(o.buffer)}function gGe(n,e,t,r,i,s,a,o){const l=n,c=new Float32Array(k8e(s,a));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function yGe(n,e,t){const r=new Float32Array(e*t*4);return pn(n,()=>n.readPixels(0,0,t,e,n.RGBA,n.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QB{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const t=it().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,R8e(t,e)):this.gl=lf(t),e=this.gl,it().getNumber("WEBGL_VERSION")===2){const s=e;this.createVertexArray=()=>pn(s,()=>s.createVertexArray()),this.bindVertexArray=a=>pn(s,()=>s.bindVertexArray(a)),this.deleteVertexArray=a=>pn(s,()=>s.deleteVertexArray(a)),this.getVertexArray=()=>pn(s,()=>s.getParameter(s.VERTEX_ARRAY_BINDING))}else if(e!=null){const s=e.getExtension("OES_vertex_array_object");if(s==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>pn(e,()=>s.createVertexArrayOES()),this.bindVertexArray=a=>pn(e,()=>s.bindVertexArrayOES(a)),this.deleteVertexArray=a=>pn(e,()=>s.deleteVertexArrayOES(a)),this.getVertexArray=()=>pn(e,()=>e.getParameter(s.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const i="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),it().getNumber("WEBGL_VERSION")===1){const s="OES_texture_float",a="OES_texture_half_float";if(this.textureFloatExtension=KT(this.gl,s),Vu(this.gl,a))this.textureHalfFloatExtension=KT(this.gl,a);else if(it().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Vu(this.gl,i))this.colorBufferHalfFloatExtension=KT(this.gl,i);else if(it().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Vu(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(Vu(this.gl,i))this.colorBufferHalfFloatExtension=this.gl.getExtension(i);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=rGe(this.gl),this.indexBuffer=iGe(this.gl),this.framebuffer=X8e(this.gl),this.textureConfig=D5(this.gl,this.textureHalfFloatExtension)}get debug(){return it().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;pn(e,()=>e.finish()),pn(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),pn(e,()=>e.deleteFramebuffer(this.framebuffer)),pn(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),pn(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),pn(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),sGe(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),aGe(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),oGe(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),fGe(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,r,i){this.throwIfDisposed(),dGe(this.gl,e,t,r,i,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),cGe(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),lGe(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(y7(this.gl,this.framebuffer),this.outputTexture=null),pn(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,r){return this.downloadMatrixDriver(e,()=>mGe(this.gl,t,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,t,r,i,s,a){return gGe(this.gl,e,t,r,i,s,a,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,t){return pGe(this.gl,e,t)}createBufferFromTexture(e,t,r){this.bindTextureToFrameBuffer(e);const i=hGe(this.gl,t,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),i}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,r;if(it().getBool("WEBGL_FENCE_API_ENABLED")){const i=e,s=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const a=i.clientWaitSync(s,0,0);return a===i.ALREADY_SIGNALED||a===i.CONDITION_SATISFIED},t=s}else it().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(t,it().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:t,isFencePassed:r}}downloadMatrixFromPackedTexture(e,t,r){return this.downloadMatrixDriver(e,()=>yGe(this.gl,t,r))}createProgram(e){this.throwIfDisposed();const t=this.gl;this.vertexShader==null&&(this.vertexShader=nGe(t));const r=H8e(t);pn(t,()=>t.attachShader(r,this.vertexShader)),pn(t,()=>t.attachShader(r,e)),V8e(t,r);const i=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&KB(t,i),i}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const t=this.gl;pn(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),uGe(t,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(pn(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&KB(this.gl,this.program),pn(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,t,r=!0){return this.throwIfDisposed(),r?Y8e(this.gl,e,t):J8e(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),pn(this.gl,()=>this.gl.getAttribLocation(e,t))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,r){this.throwIfDisposed(),this.throwIfNoProgram(),Z8e(this.gl,e,t,r)}setOutputMatrixTexture(e,t,r){this.setOutputMatrixTextureDriver(e,r,t)}setOutputPackedMatrixTexture(e,t,r){this.throwIfDisposed();const[i,s]=Y1(t,r);this.setOutputMatrixTextureDriver(e,i,s)}setOutputMatrixWriteRegion(e,t,r,i){this.setOutputMatrixWriteRegionDriver(r,e,i,t)}setOutputPackedMatrixWriteRegion(e,t,r,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&KB(this.gl,this.program),YT(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const t=this.getVertexArray();console.assert(t===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}pn(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),pn(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=KT(this.gl,it().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(it().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,i=this.getQueryTimerExtensionWebGL2(),s=r.createQuery();return r.beginQuery(i.TIME_ELAPSED_EXT,s),s}const e=this.getQueryTimerExtensionWebGL1(),t=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,t),t}endQuery(){if(it().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const t=this.gl,r=this.getQueryTimerExtensionWebGL2();t.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await Y9(()=>this.disposed||this.isQueryAvailable(e,it().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,it().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(t===0)return null;if(t===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,t){if(t===0)return!0;if(t===2){const r=this.gl,i=this.getQueryTimerExtensionWebGL2(),s=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),s&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),i=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint}}pollFence(e){return new Promise(t=>{this.addItemToPoll(()=>e.isFencePassed(),()=>t())})}pollItems(){const e=vGe(this.itemsToPoll.map(t=>t.isDoneFn));for(let t=0;t<=e;++t){const{resolveFn:r}=this.itemsToPoll[t];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,t){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in it().platform&&(r=it().platform.setTimeoutCustom.bind(it().platform)),Y9(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),YB(this.gl,e,this.framebuffer),this.debug&&YT(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(YB(this.gl,this.outputTexture,this.framebuffer),this.debug&&YT(this.gl)):y7(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);const r=t();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,t,r){this.throwIfDisposed();const i=this.gl;YB(i,e,this.framebuffer),this.debug&&YT(i),this.outputTexture=e,pn(i,()=>i.viewport(0,0,t,r)),pn(i,()=>i.scissor(0,0,t,r))}setOutputMatrixWriteRegionDriver(e,t,r,i){this.throwIfDisposed(),pn(this.gl,()=>this.gl.scissor(e,t,r,i))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function vGe(n){let e=0;for(;e<n.length&&n[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:bGe,bincountImpl:Gie,bincountReduceImpl:xGe,bitwiseAndImpl:SGe,castImpl:wGe,ceilImpl:CGe,concatImpl:_Ge,equalImpl:EGe,expImpl:AGe,expm1Impl:TGe,floorImpl:MGe,gatherNdImpl:RGe,gatherV2Impl:NGe,greaterImpl:IGe,greaterEqualImpl:DGe,lessImpl:kGe,lessEqualImpl:OGe,linSpaceImpl:BGe,logImpl:$Ge,maxImpl:LGe,maximumImpl:FGe,minimumImpl:PGe,multiplyImpl:UGe,negImpl:zGe,notEqualImpl:HGe,prodImpl:VGe,raggedGatherImpl:GGe,raggedRangeImpl:WGe,raggedTensorToTensorImpl:jGe,rangeImpl:qGe,rsqrtImpl:XGe,scatterImpl:KGe,sigmoidImpl:YGe,simpleAbsImpl:Wie,sliceImpl:JGe,sparseFillEmptyRowsImpl:ZGe,sparseReshapeImpl:QGe,sparseSegmentReductionImpl:jie,sqrtImpl:e9e,staticRegexReplaceImpl:t9e,stridedSliceImpl:n9e,stringNGramsImpl:r9e,stringSplitImpl:i9e,stringToHashBucketFastImpl:s9e,subImpl:a9e,tileImpl:o9e,topKImpl:l9e,transposeImpl:$5,uniqueImpl:c9e}=fUe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qie(n,e){return["x","y","z","w","u","v"].slice(0,e).map(t=>`${n}.${t}`)}function Qo(n,e){return e===1?[n]:qie(n,e)}function u9e(n,e){if(n===1)return"rc";let t="";for(let r=0;r<n;r++)t+=e[r],r<n-1&&(t+=",");return t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class d9e{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=Oo(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const t=Qo("rc",this.rank),r=Li(this.rank),i=this.getOutOfBoundsCondition(t),s=this.getSetup(t),a=this.getOutput(t);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${i}) {
            setOutput(vec4(0));
          } else {
            ${s}

            setOutput(vec4(${a}));
          }
        }
      `}}getSourceCoordsArr(e){const t=[];for(let r=0;r<=1;r++)for(let i=0;i<=1;i++){let s=`${r===0?"r":"rp1"}, ${i===0?"c":"cp1"}`;for(let a=2;a<this.rank;a++)s=`${e[e.length-1-a]},`+s;t.push(s)}return t}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let t="";for(let r=this.rank-2;r<this.rank;r++)t+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(t+="||");return t}getSetup(e){if(this.rank===1)return"";const t=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],i=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${t[0]};
      int c = ${t[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${i};
    `}getOutput(e){const t=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${t[0]}),
            cEdge ? 0. : getA(${t[1]}),
            rEdge ? 0. : getA(${t[2]}),
            rEdge || cEdge ? 0. : getA(${t[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Xie{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=Oo(this.outputShape.length);let r="";for(let i=0;i<4;i++){let s="thisRC = rc;";i%2===1&&(s+="thisRC.z += 1;"),i>1&&(s+="thisRC.y += 1;"),r+=`
        ${s}
        ${i>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${i}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${i>0?"}":""}
      `}this.userCode=`
      ${f9e(t,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?O5():k5(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function f9e(n,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?uVe(["r","c","d"],"inputShape"):kv(["r","c","d"],n)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class h9e{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,t,r){const i=w7(t,r),s=C7(e,i,r);s in this.freeTextures||(this.freeTextures[s]=[]),s in this.usedTextures||(this.usedTextures[s]=[]);const a=S7(e,i,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[s].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=a,this.log();const l=this.freeTextures[s].pop();return this.usedTextures[s].push(l),l}let o;return i===to.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):i===to.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):i===to.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):i===to.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):i===to.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[s].push(o),this.numUsedTextures++,this._numBytesAllocated+=a,this.log(),o}releaseTexture(e,t,r,i){if(this.freeTextures==null)return;const s=w7(r,i),a=C7(t,s,i);a in this.freeTextures||(this.freeTextures[a]=[]);const o=S7(t,s,this.gpgpu.gl,this.gpgpu.textureConfig,i),l=it().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=o):(this.freeTextures[a].push(e),this.numFreeTextures++,this._numBytesFree+=o),this.numUsedTextures--;const c=this.usedTextures[a],u=c&&c.indexOf(e);if(u==null||u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[u]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const t=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*t)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(t=>{this.gpgpu.deleteMatrixTexture(t.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(t=>{this.gpgpu.deleteMatrixTexture(t.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function p9e(n,e){const t=n;if(e===t.R32F)return 4;if(e===t.R16F)return 2;if(e===t.RGBA32F)return 16;if(e===n.RGBA)return 16;if(e===t.RGBA16F)return 8;if(e===t.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function S7(n,e,t,r,i){const s=m9e(e,r);let a;if(i){const[l,c]=Y1(n[0],n[1]);a=l*c}else{const[l,c]=a2(n[0],n[1]);a=l*c}const o=p9e(t,s);return a*o}function m9e(n,e){switch(n){case to.PACKED_2X2_FLOAT32:return Hie(e);case to.PACKED_2X2_FLOAT16:return Vie(e);case to.UNPACKED_FLOAT32:return Pie(e);case to.UNPACKED_FLOAT16:return Uie(e);case to.PACKED_4X1_UNSIGNED_BYTE:return zie(e);default:throw new Error(`Unknown physical texture type ${n}`)}}function g9e(n){return it().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?n?to.PACKED_2X2_FLOAT32:to.UNPACKED_FLOAT32:n?to.PACKED_2X2_FLOAT16:to.UNPACKED_FLOAT16}function w7(n,e){if(n===Qc.UPLOAD)return to.PACKED_2X2_FLOAT32;if(n===Qc.RENDER||n==null)return g9e(e);if(n===Qc.DOWNLOAD||n===Qc.PIXELS)return to.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${n}`)}function C7(n,e,t){return`${n[0]}_${n[1]}_${e}_${t}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ch{constructor(e,t){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=Oo(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${t}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const nd="if (isnan(x)) return x;",y9e="return x;",_7="return abs(x);",v9e="return (x >= 0.0) ? x : (exp(x) - 1.0);",b9e=nd+`
  return (x < 0.0) ? 0.0 : x;
`,x9e=nd+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,tg="return x;",S9e="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w9e="return x;",C9e=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,_9e=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,E9e=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,A9e="return 1.0 / (1.0 + exp(-1.0 * x));";class ug{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=Oo(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${t}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class T9e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=Oo(this.outputShape.length);const t=e.length,r=Qo("rc",t),i=Li(t),s=u9e(t,r),a=r.slice(-2),o=t<=1?"rc":`vec2(${a.join(",")})`;this.userCode=`
      void main() {
        ${i} rc = getOutputCoords();
        vec4 packedInput = getA(${s});

        setOutput(getChannel(packedInput, ${o}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M9e=bz,R9e=1e-7,N9e=1e-4,QT={};function I9e(n){return n in QT||(QT[n]={}),QT[n]}const D9e=it().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),k9e=600;function O9e(){return it().global.screen==null?1024:it().global.screen.height*it().global.screen.width*window.devicePixelRatio*k9e/1024/1024}class A3 extends D4{nextDataId(){return A3.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!it().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let t;if(e!=null){if(e instanceof QB)t=e;else{const r=lf(it().getNumber("WEBGL_VERSION"),e);t=new QB(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=lf(it().getNumber("WEBGL_VERSION"));t=new QB(r),this.binaryCache=I9e(it().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=t,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new h9e(this.gpgpu),this.numMBBeforeWarning=O9e(),this.texData=new vZ(this,Qf())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,t,r,i,s,a){const o=this.makeTensorInfo(t,r),l=this.texData.get(o.dataId);l.isPacked=!1,l.texture={texture:e,texShape:[i,s]},l.texShape=[i,s];const c=JT(t),u=new x7(c,!1,a),d=this.runWebGLProgram(u,[o],r,[[i,s]]);return d.shape=t,l.texture=null,this.disposeIntermediateTensorInfo(o),d.dataId}write(e,t,r){if((it().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||it().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const i={id:this.nextDataId()};return this.texData.set(i,{shape:t,dtype:r,values:e,usage:Qc.UPLOAD,refCount:1}),i}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const t=this.texData.get(e);t.refCount++}decRef(e){if(this.texData.has(e)){const t=this.texData.get(e);t.refCount--}}move(e,t,r,i,s){if(it().getBool("DEBUG")&&this.checkNumericalProblems(t),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:i,values:t,usage:Qc.UPLOAD,refCount:s})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const t=this.texData.get(e),{values:r,dtype:i,complexTensorInfos:s,slice:a,shape:o,isPacked:l}=t;if(a!=null){let h;l?h=new ug(o,tg):h=new ch(o,tg);const p=this.runWebGLProgram(h,[{dataId:e,shape:o,dtype:i}],i),g=this.readSync(p.dataId);return this.disposeIntermediateTensorInfo(p),g}if(r!=null)return this.convertAndCacheOnCPU(e);if(i==="string")return r;const c=this.activeTimers!=null;let u;c&&(u=Dl());let d;if(i==="complex64"){const h=this.readSync(s.real.dataId),p=this.readSync(s.imag.dataId);d=Hp(h,p)}else d=this.getValuesFromTexture(e);return c&&(this.downloadWaitMs+=Dl()-u),this.convertAndCacheOnCPU(e,d)}async read(e){if(this.pendingRead.has(e)){const g=this.pendingRead.get(e);return new Promise(v=>g.push(v))}const t=this.texData.get(e),{values:r,shape:i,slice:s,dtype:a,complexTensorInfos:o,isPacked:l}=t;if(s!=null){let g;l?g=new ug(i,tg):g=new ch(i,tg);const v=this.runWebGLProgram(g,[{dataId:e,shape:i,dtype:a}],a),b=this.read(v.dataId);return this.disposeIntermediateTensorInfo(v),b}if(r!=null)return this.convertAndCacheOnCPU(e);if(it().getBool("DEBUG")&&!it().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&it().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let c=null,u;if(a!=="complex64"&&it().get("WEBGL_BUFFER_SUPPORTED")){u=this.decode(e);const g=this.texData.get(u.dataId);c=this.gpgpu.createBufferFromTexture(g.texture.texture,...XT(i))}this.pendingRead.set(e,[]),a!=="complex64"&&await this.gpgpu.createAndWaitForFence();let d;if(a==="complex64"){const g=await Promise.all([this.read(o.real.dataId),this.read(o.imag.dataId)]),v=g[0],b=g[1];d=Hp(v,b)}else if(c==null)d=this.getValuesFromTexture(e);else{const g=xt(i);d=this.gpgpu.downloadFloat32MatrixFromBuffer(c,g)}if(u!=null&&this.disposeIntermediateTensorInfo(u),c!=null){const g=this.gpgpu.gl;pn(g,()=>g.deleteBuffer(c))}const h=this.convertAndCacheOnCPU(e,d),p=this.pendingRead.get(e);return this.pendingRead.delete(e),p.forEach(g=>g(h)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&Qf().removeDataId(e,this),this.pendingDeletes--),h}readToGPU(e,t={}){const r=this.texData.get(e),{values:i,shape:s,slice:a,dtype:o,isPacked:l,texture:c}=r;if(o==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(a!=null){let p;l?p=new ug(s,tg):p=new ch(s,tg);const g=this.runWebGLProgram(p,[{dataId:e,shape:s,dtype:o}],o),v=this.readToGPU(g,t);return this.disposeIntermediateTensorInfo(g),v}if(c==null)throw i!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const u=this.decode(e,t.customTexShape),d=Qf().makeTensorFromTensorInfo(u),h=this.texData.get(u.dataId);return Object.assign({tensorRef:d},h.texture)}bufferSync(e){const t=this.readSync(e.dataId);if(e.dtype==="string")try{const r=t.map(i=>Eg(i));return Ar(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Ar(e.shape,e.dtype,t)}checkNumericalProblems(e){if(e!=null)for(let t=0;t<e.length;t++){const r=e[t];if(!L8e(r))throw it().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:t,dtype:r,isPacked:i}=this.texData.get(e),s=xt(t);if(it().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const h=this.decode(e),p=this.texData.get(h.dataId),g=this.gpgpu.downloadMatrixFromPackedTexture(p.texture.texture,...XT(t)).subarray(0,s);return this.disposeIntermediateTensorInfo(h),g}const a=it().getBool("WEBGL_PACK")&&i===!0,o=a?JT(t):t,l=a?new QVe(o):new ZVe(o),c=this.runWebGLProgram(l,[{shape:o,dtype:r,dataId:e}],"float32"),u=this.texData.get(c.dataId),d=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(u.texture.texture,u.texShape[0],u.texShape[1]).subarray(0,s);return this.disposeIntermediateTensorInfo(c),d}timerAvailable(){return it().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const t=this.activeTimers,r=[];let i=!1;this.programTimersStack==null?(this.programTimersStack=r,i=!0):this.activeTimers.push(r),this.activeTimers=r,e();const s=ov(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),a=ov(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=t,i&&(this.programTimersStack=null);const o={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(it().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(s);o.kernelMs=JAe(l),o.getExtraProfileInfo=()=>l.map((c,u)=>({name:a[u],ms:c})).map(c=>`${c.name}: ${c.ms}`).join(", ")}else o.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,o})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return it().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Dl(),endMs:null}}endTimer(e){return it().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Dl(),e)}async getQueryTime(e){if(it().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const t=e;return t.endMs-t.startMs}disposeData(e,t=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,t),this.disposeData(r.imag.dataId,t)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:t,dtype:r,texShape:i,usage:s,isPacked:a,slice:o}=this.texData.get(e),l=o&&o.origDataId||e,c=this.dataRefCount.get(l);c>1?this.dataRefCount.set(l,c-1):(this.dataRefCount.delete(l),t!=null&&(this.numBytesInGPU-=this.computeBytes(i,r),this.textureManager.releaseTexture(t,i,s,a)));const u=this.texData.get(e);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,t=D9e){return it().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&xt(r.shape)<t)}getGPGPUContext(){return this.gpgpu}where(e){Kc("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const t=e.dataSync();return M9e(e.shape,t)}packedUnaryOp(e,t,r){const i=new ug(e.shape,t),s=this.compileAndRun(i,[e],r);return Qf().makeTensorFromTensorInfo(s)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const i=Wie(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,i)}if(it().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,_7,e.dtype);const t=new ch(e.shape,_7),r=this.compileAndRun(t,[e]);return Qf().makeTensorFromTensorInfo(r)}makeTensorInfo(e,t,r){let i;if(t==="string"&&r!=null&&r.length>0&&G_(r[0])){const s=r.map(a=>pg(a));i=this.write(s,e,t)}else i=this.write(r,e,t);return this.texData.get(i).usage=null,{dataId:i,shape:e,dtype:t}}makeOutput(e,t,r){return Qf().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,r),this)}unpackTensor(e){const t=new T9e(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){const t=new d9e(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}packedReshape(e,t){const r=[x1(e.shape),...S1(e.shape)],i={dtype:e.dtype,shape:r,dataId:e.dataId},s=[x1(t),...S1(t)],a=new Xie(s,r),o=!0,l=[r],c=this.runWebGLProgram(a,[i],e.dtype,l,o);return{dataId:c.dataId,shape:t,dtype:c.dtype}}decode(e,t){const r=this.texData.get(e),{isPacked:i,shape:s,dtype:a}=r;if(t!=null){const h=xt(s),p=t[0]*t[1]*4;de(h<=p,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const o=JT(s);let l;i?l=new JVe(o):l=new YVe(o);const c=!0,u=[t??XT(o)],d=this.runWebGLProgram(l,[{shape:o,dtype:a,dataId:e}],a,u,c,t);return{dtype:a,shape:s,dataId:d.dataId}}runWebGLProgram(e,t,r,i,s=!1,a){const o=this.makeTensorInfo(e.outputShape,r),l=this.texData.get(o.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===i_.DENSE){const x=a??XT(e.outputShape);l.texShape=x.map(C=>C*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),xt(o.shape)===0)return l.values=so(o.dtype,0),o;const c=[],u=t.map(x=>{if(x.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let C=this.texData.get(x.dataId);if(C.texture==null){if(!e.packedInputs&&xt(x.shape)<=it().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:x.shape,texData:null,isUniform:!0,uniformValues:C.values};e.packedInputs&&(C.isPacked=!0,C.shape=x.shape)}if(this.uploadToGPU(x.dataId),!!C.isPacked!=!!e.packedInputs)x=C.isPacked?this.unpackTensor(x):this.packTensor(x),c.push(x),C=this.texData.get(x.dataId);else if(C.isPacked&&!wN(C.shape,x.shape)){const E=x,_=x.shape;x.shape=C.shape,x=this.packedReshape(x,_),c.push(x),C=this.texData.get(x.dataId),E.shape=_}return{shape:x.shape,texData:C,isUniform:!1}});this.uploadToGPU(o.dataId);const d={shape:o.shape,texData:l,isUniform:!1},h=KVe(e,u,d),p=this.getAndSaveBinary(h,()=>qVe(this.gpgpu,e,u,d)),g=this.activeTimers!=null;let v;g&&(v=this.startTimer()),it().get("ENGINE_COMPILE_ONLY")||XVe(this.gpgpu,p,u,d,i),c.forEach(x=>this.disposeIntermediateTensorInfo(x)),g&&(v=this.endTimer(v),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(v)}));const b=it().getNumber("WEBGL_FLUSH_THRESHOLD");if(b>0){const x=Dl();x-this.lastGlFlushTime>b&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=x)}if(!it().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&s===!1){const x=this.unpackTensor(o);return this.disposeIntermediateTensorInfo(o),x}return o}compileAndRun(e,t,r,i,s=!1){return r=r||t[0].dtype,this.runWebGLProgram(e,t,r,i,s)}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(it().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(t=>{this.gpgpu.deleteProgram(this.binaryCache[t].webGLProgram),delete this.binaryCache[t]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Ye(()=>{if(!it().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=it().getBool("DEBUG");it().set("DEBUG",!1);const t=this.abs($n(1e-8)).dataSync()[0];if(it().set("DEBUG",e),t>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?R9e:N9e}uploadToGPU(e){const t=this.texData.get(e),{shape:r,dtype:i,values:s,texture:a,usage:o,isPacked:l}=t;if(a!=null)return;const c=this.activeTimers!=null;let u;c&&(u=Dl());let d=t.texShape;if(d==null&&(d=tVe(r,l),t.texShape=d),s!=null){const h=JT(r);let p,g=d[1],v=d[0];const b=s instanceof Uint8Array||s instanceof Uint8ClampedArray;(l||!b)&&([g,v]=Y1(d[0],d[1])),l?p=new tGe(h,b):p=new x7(h,b);const x=b?[v,g]:d,C=this.makeTensorInfo(x,i),E=this.texData.get(C.dataId);b?E.usage=Qc.PIXELS:E.usage=Qc.UPLOAD,E.texShape=x,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(C.dataId),g,v,s);const _=[[v,g]],R=this.runWebGLProgram(p,[C],i,_,!0),L=this.texData.get(R.dataId);t.texShape=L.texShape,t.isPacked=L.isPacked,t.usage=L.usage,it().get("ENGINE_COMPILE_ONLY")?this.disposeData(R.dataId):(t.texture=L.texture,t.values=null,this.texData.delete(R.dataId)),this.disposeIntermediateTensorInfo(C),c&&(this.uploadWaitMs+=Dl()-u)}else{const h=this.acquireTexture(d,o,i,l);t.texture=h}}convertAndCacheOnCPU(e,t){const r=this.texData.get(e),{dtype:i}=r;return t!=null&&(r.values=B9e(t,i)),r.values}acquireTexture(e,t,r,i){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const s=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${s} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,t,i)}computeBytes(e,t){return e[0]*e[1]*JR(t)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,t]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(t));return Promise.all(e)}else{for(const[,t]of Object.entries(this.binaryCache)){const r=new Promise(i=>{try{this.checkCompletion_(t),i(!0)}catch(s){throw s}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await Dee(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(kie(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:t,customUniformLocations:r,infLoc:i,nanLoc:s,outShapeLocation:a,outShapeStridesLocation:o,outTexShapeLocation:l}=Fie(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=t,e.customUniformLocations=r,e.infLoc=i,e.nanLoc=s,e.outShapeLocation=a,e.outShapeStridesLocation=o,e.outTexShapeLocation=l}}createTensorFromGPUData(e,t,r){e.channels=e.channels||"RGBA";const{texture:i,height:s,width:a,channels:o}=e,l=Qf().backend;if(!l.gpgpu.gl.isTexture(i))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const c=l.writeTexture(i,t,r,s,a,o);return Qf().makeTensorFromDataId(c,t,r,l)}}A3.nextDataId=0;function B9e(n,e){if(e==="float32"||e==="complex64")return n;if(e==="int32"||e==="bool"){const t=e==="int32"?new Int32Array(n.length):new Uint8Array(n.length);for(let r=0;r<t.length;++r)t[r]=Math.round(n[r]);return t}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */PZ()&&VZ("webgl",()=>new A3,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L5=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class bv{constructor(e,t,r){this.variableNames=["A","B"],this.outputShape=hr(t,r),this.enableShapeUniforms=Oo(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bv=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class tS{constructor(e,t,r,i=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=hr(t,r);const s=this.outputShape.length;this.enableShapeUniforms=Oo(s);let a="";if(i)if(s===0||xt(this.outputShape)===1)a=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(a=`
          ${Li(s)} coords = getOutputCoords();
        `,s===1)this.enableShapeUniforms?a+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:a+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=Qo("coords",s);this.enableShapeUniforms?a+=`
            bool nextRowOutOfBounds =
              (${l[s-2]} + 1) >= outShape[${s} - 2];
            bool nextColOutOfBounds =
              (${l[s-1]} + 1) >= outShape[${s} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:a+=`
            bool nextRowOutOfBounds =
              (${l[s-2]} + 1) >= ${this.outputShape[s-2]};
            bool nextColOutOfBounds =
              (${l[s-1]} + 1) >= ${this.outputShape[s-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${a}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tc(n){const{inputs:e,backend:t}=n,{x:r}=e;return t.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const $9e={kernelName:dE,backendName:"webgl",kernelFunc:Tc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qg(n){const{inputs:e,backend:t}=n,{real:r,imag:i}=e,s=t.makeTensorInfo(r.shape,"complex64"),a=t.texData.get(s.dataId),o=Tc({inputs:{x:r},backend:t}),l=Tc({inputs:{x:i},backend:t});return a.complexTensorInfos={real:o,imag:l},s}const L9e={kernelName:H4,backendName:"webgl",kernelFunc:Qg};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kie="return (a < 0.) ? b * a : a;",Yie=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function F9e(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{alpha:s}=r,a=t.makeTensorInfo([],"float32",Vg(s,"float32")),o=it().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new tS(Yie,i.shape,a.shape):new bv(Kie,i.shape,a.shape),l=t.runWebGLProgram(o,[i,a],"float32");return t.disposeIntermediateTensorInfo(a),l}const P9e={kernelName:sD,backendName:"webgl",kernelFunc:F9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jie="return (a < 0.) ? b * a : a;",Zie=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function U9e(n){const{inputs:e,backend:t}=n,{x:r,alpha:i}=e,s=it().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new tS(Zie,r.shape,i.shape):new bv(Jie,r.shape,i.shape);return t.runWebGLProgram(s,[r,i],"float32")}const z9e={kernelName:_D,backendName:"webgl",kernelFunc:U9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nS="if (isnan(x)) return x;";function ti({opSnippet:n,packedOpSnippet:e,cpuKernelImpl:t,dtype:r}){return({inputs:i,backend:s})=>{const{x:a}=i,o=s,l=r||a.dtype;if(o.shouldExecuteOnCPU([a])&&t!=null){const d=o.texData.get(a.dataId),h=t(d.values,l);return o.makeTensorInfo(a.shape,l,h)}const c=it().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let u;return c?u=new ug(a.shape,e):u=new ch(a.shape,n),o.runWebGLProgram(u,[a],l)}}function uo({opSnippet:n,packedOpSnippet:e,checkOutOfBounds:t=!1,supportsComplex:r=!1,cpuKernelImpl:i,dtype:s}){return({inputs:a,backend:o})=>{const{a:l,b:c}=a,u=o;if(r&&l.dtype==="complex64"){const g=u.texData.get(l.dataId),v=u.texData.get(c.dataId),[b,x]=[[g.complexTensorInfos.real,v.complexTensorInfos.real],[g.complexTensorInfos.imag,v.complexTensorInfos.imag]].map(E=>{const[_,M]=E,R={dataId:_.dataId,dtype:_.dtype,shape:l.shape},L={dataId:M.dataId,dtype:M.dtype,shape:c.shape},$=new bv(n,l.shape,c.shape);return u.runWebGLProgram($,[R,L],_c(_.dtype,M.dtype))}),C=Qg({inputs:{real:b,imag:x},backend:u});return u.disposeIntermediateTensorInfo(b),u.disposeIntermediateTensorInfo(x),C}const d=s||_c(l.dtype,c.dtype);if((l.dtype==="string"||c.dtype==="string"||u.shouldExecuteOnCPU([l,c]))&&i!=null){const g=u.texData.get(l.dataId).values,v=u.texData.get(c.dataId).values,b=l.dtype==="string"?Vp(g):g,x=l.dtype==="string"?Vp(v):v,[C,E]=i(l.shape,c.shape,b,x,d),_=u.makeTensorInfo(E,d),M=u.texData.get(_.dataId);return M.values=C,_}const h=it().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let p;return h?p=new tS(e,l.shape,c.shape,t):p=new bv(n,l.shape,c.shape),u.runWebGLProgram(p,[l,c],d)}}function s_(n,e=!1){if(n==="linear")return e?w9e:y9e;if(n==="relu")return e?_9e:b9e;if(n==="elu")return e?C9e:v9e;if(n==="relu6")return e?E9e:x9e;if(n==="prelu")return e?Zie:Jie;if(n==="leakyrelu")return e?Yie:Kie;if(n==="sigmoid")return e?A9e:S9e;throw new Error(`Activation ${n} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Qie{constructor(e,t,r,i=!1,s=!1,a=!1,o=null,l=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=Oo(this.outputShape.length);const u=i?e[1]:e[2],d=Math.ceil(u/2),h=i?"i * 2, rc.y":"rc.y, i * 2",p=s?"rc.z, i * 2":"i * 2, rc.z",g=i?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],v=s?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let b="",x="";o&&(l?b=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${o}
        }`:c?b=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${o}
        }`:b=`vec4 activation(vec4 x) {
          ${o}
        }`,x="result = activation(result);");const C=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let E="rc.x",_="rc.x";e[0]<t[0]?E=`imod(rc.x, ${e[0]})`:t[0]<e[0]&&(_=`imod(rc.x, ${t[0]})`),this.userCode=`
      ${b}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${E};
        int batchB = ${_};
        for (int i = 0; i < ${d}; i++) {
          vec4 a = getMatrixA(batchA, ${h});
          vec4 b = getMatrixB(batchB, ${p});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${g[0]} * ${v[0]});
          result += (${g[1]} * ${v[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${C}

        ${x}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E7={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class A7{constructor(e,t,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=hr(t,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T7="return a * b;";function F5(n){const{inputs:e,backend:t}=n,{a:r,b:i}=e,s=_c(r.dtype,i.dtype);if(r.dtype==="complex64"){const o=t.texData.get(r.dataId),l=t.texData.get(i.dataId),c=new A7(E7.REAL,r.shape,i.shape),u=new A7(E7.IMAG,r.shape,i.shape),d=[{dataId:o.complexTensorInfos.real.dataId,dtype:o.complexTensorInfos.real.dtype,shape:r.shape},{dataId:o.complexTensorInfos.imag.dataId,dtype:o.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:i.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:i.shape}],h=t.runWebGLProgram(c,d,"float32"),p=t.runWebGLProgram(u,d,"float32"),g=Qg({inputs:{real:h,imag:p},backend:t});return t.disposeIntermediateTensorInfo(h),t.disposeIntermediateTensorInfo(p),g}if(t.shouldExecuteOnCPU([r,i])){const o=t.texData.get(r.dataId),l=t.texData.get(i.dataId),[c,u]=UGe(r.shape,i.shape,o.values,l.values,s),d=t.makeTensorInfo(u,s),h=t.texData.get(d.dataId);return h.values=c,d}let a;return it().getBool("WEBGL_PACK_BINARY_OPERATIONS")?a=new tS(T7,r.shape,i.shape):a=new bv(T7,r.shape,i.shape),t.runWebGLProgram(a,[r,i],s)}const H9e={kernelName:xE,backendName:"webgl",kernelFunc:F5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V9e(n,e,t){const r=[x1(n.shape),...S1(n.shape)],i={dtype:n.dtype,shape:r,dataId:n.dataId},s=[x1(e),...S1(e)],a=new Xie(s,r),o=!0,l=[r],c=t.runWebGLProgram(a,[i],n.dtype,l,o);return{dataId:c.dataId,shape:e,dtype:c.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rn(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{shape:s}=r,a=t,o=xt(i.shape),l=bZ(s,o),c=xt(l);de(o===c,()=>`The new shape (${l}) has ${c} elements and the old shape (${i.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`);const u=a.texData.get(i.dataId);return u.isPacked&&!wN(i.shape,l)&&!(u.texture!==null&&wN(u.shape,l))?V9e(i,l,a):(a.incRef(i.dataId),{dataId:i.dataId,shape:l,dtype:i.dtype})}const G9e={kernelName:AD,backendName:"webgl",kernelFunc:rn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class M7{constructor(e,t){this.variableNames=["x"];const{windowSize:r,batchSize:i,inSize:s,outSize:a}=e;this.outputShape=[i,a];const o=Math.floor(r/4)*4,l=r%4;let c="sumValue += dot(values, ones);";if(t!=null){const d=1/t;c=`sumValue += dot(values * ${u1(d)?d.toPrecision(2):d}, ones);`}let u="";s%r>0&&(u=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${u}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${o}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${c}
        }

        int inIdx = inOffset + ${o};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${c}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${c}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${c}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class W9e{constructor(e,t){this.variableNames=["x"];const{windowSize:r,batchSize:i,inSize:s,outSize:a}=e;this.outputShape=[i,a];let o="0.0",l="";t==="prod"?o="1.0":t==="min"?(o="1.0 / 1e-20",l="min"):t==="max"&&(o="-1.0 / 1e-20",l="max");let c=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;t==="sum"?c="sumValue":t==="prod"?c="prodValue":t==="all"?c="allValue":t==="any"&&(c="anyValue");const u=Math.floor(r/4)*4,d=r%4;let h=`
      if (${t==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${t==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${t==="min"} || ${t==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,p="vec4";t==="all"?(o="1.0",h=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,p="bvec4"):t==="any"&&(o="0.0",h=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,p="bvec4");let g="";s%r>0&&(g=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${o};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${g}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${o});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          ${p} values = ${p}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${h}
        }

        int inIdx = inOffset + ${u};
        if (${d===1}) {
          ${p} values = ${p}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${h}
        } else if (${d===2}) {
          ${p} values = ${p}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${h}
        } else if (${d===3}) {
          ${p} values = ${p}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${h}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j9e(n){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const t=e.length?e[e.length-1].outSize:n[1],r=u3(t);e.push({inSize:t,windowSize:r,outSize:Math.ceil(t/r)})}return e}function $v(n,e,t,r){const i=j9e(n.shape);let s=n;for(let a=0;a<i.length;a++){const{inSize:o,windowSize:l,outSize:c}=i[a];let u,d;t==="mean"?u=a===0?new M7({windowSize:l,inSize:o,batchSize:n.shape[0],outSize:c},o):new M7({windowSize:l,inSize:o,batchSize:n.shape[0],outSize:c}):u=new W9e({windowSize:l,inSize:o,batchSize:n.shape[0],outSize:c},t),d=s,s=r.runWebGLProgram(u,[s],e),d.dataId!==n.dataId&&r.disposeIntermediateTensorInfo(d)}return s}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class q9e{constructor(e,t){this.variableNames=["A"];const r=new Array(e.length);for(let a=0;a<r.length;a++)r[a]=e[t[a]];this.outputShape=r,this.rank=r.length;const i=Li(this.rank),s=X9e(t);this.userCode=`
    void main() {
      ${i} resRC = getOutputCoords();
      setOutput(getA(${s}));
    }
    `}}function X9e(n){const e=n.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const t=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let i=0;i<n.length;i++)r[n[i]]=t[i];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class K9e{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let u=0;u<r.length;u++)r[u]=e[t[u]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const i=Li(this.rank),s=qie("rc",this.rank),a=new Array(this.rank);for(let u=0;u<t.length;u++)a[t[u]]=s[u];const o=`vec2(${a.slice(-2).join()})`,l=`++${s[this.rank-1]} < ${r[this.rank-1]}`,c=`getChannel(getA(${a.join()}), ${o})`;this.userCode=`
    void main() {
      ${i} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${c};
      if(${l}) {
        result[1] = ${c};
      }
      --${s[this.rank-1]};
      if(++${s[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${c};
        if(${l}) {
          result[3] = ${c};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T3(n,e,t){const r=it().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new K9e(n.shape,e):new q9e(n.shape,e);return t.runWebGLProgram(r,[n],n.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y9e(n,e,t,r){const i=e,s=n.shape.length,a=Ir(i,n.shape);let o=a;const l=ws(o,s),c=l!=null;let u=n;c&&(u=T3(n,l,r),o=Ys(o.length,s)),lo("sum",o,s);const[d,h]=Ga(u.shape,o);let p=d;t&&(p=Xs(d,a));const g=xt(h),b=xt(n.shape)/g,x=rn({inputs:{x:u},attrs:{shape:[b,g]},backend:r}),C=UU(n.dtype),E=$v(x,C,"sum",r),_=rn({inputs:{x:E},attrs:{shape:p},backend:r});return r.disposeIntermediateTensorInfo(x),r.disposeIntermediateTensorInfo(E),c&&r.disposeIntermediateTensorInfo(u),_}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M3(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{axis:s,keepDims:a}=r;return Y9e(i,s,a,t)}const J9e={kernelName:DD,backendName:"webgl",kernelFunc:M3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rl(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{perm:s}=r,a=t,o=i.shape.length,l=new Array(o);for(let u=0;u<l.length;u++)l[u]=i.shape[s[u]];let c;if(a.shouldExecuteOnCPU([i])){const d=a.texData.get(i.dataId).values,h=$5(d,i.shape,i.dtype,s,l);c=a.makeTensorInfo(l,i.dtype);const p=a.texData.get(c.dataId);p.values=h}else c=T3(i,s,a);return c}const Z9e={kernelName:Lx,backendName:"webgl",kernelFunc:rl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ese=1e3;function CN({a:n,b:e,transposeA:t,transposeB:r,backend:i,bias:s=null,preluActivationWeights:a=null,leakyreluAlpha:o=0,activation:l=null}){const c=n.shape.length,u=e.shape.length,d=t?n.shape[c-2]:n.shape[c-1],h=r?e.shape[u-1]:e.shape[u-2],p=t?n.shape[c-1]:n.shape[c-2],g=r?e.shape[u-2]:e.shape[u-1],v=n.shape.slice(0,-2),b=e.shape.slice(0,-2),x=xt(v),C=xt(b),_=hr(n.shape.slice(0,-2),e.shape.slice(0,-2)).concat([p,g]);de(d===h,()=>`Error in matMul: inner shapes (${d}) and (${h}) of Tensors with shapes ${n.shape} and ${e.shape} and transposeA=${t} and transposeB=${r} must match.`);const M=t?[x,d,p]:[x,p,d],R=r?[C,g,h]:[C,h,g],L=rn({inputs:{x:n},backend:i,attrs:{shape:M}}),$=rn({inputs:{x:e},backend:i,attrs:{shape:R}}),N=[L,$],I=Math.max(x,C),k=t?L.shape[1]:L.shape[2],P=s!=null,G=a!=null,W=l==="leakyrelu",X=l!=null?s_(l,!0):null,z=P||G||W||X!=null;let J;if((p===1||g===1)&&k>ese&&z===!1){let Y=L,q=$;t&&(Y=rl({inputs:{x:L},backend:i,attrs:{perm:[0,2,1]}}),N.push(Y)),r&&(q=rl({inputs:{x:$},backend:i,attrs:{perm:[0,2,1]}}),N.push(q));const te=g!==1,ne=g===1;let le=Y;te&&(le=rn({inputs:{x:Y},backend:i,attrs:{shape:[I,k,1]}}),N.push(le));const ye=g===1?2:1;let ue=q;ne&&(ue=rn({inputs:{x:q},backend:i,attrs:{shape:[I,1,k]}}),N.push(ue));const ve=F5({inputs:{a:le,b:ue},backend:i});J=M3({inputs:{x:ve},backend:i,attrs:{axis:ye,keepDims:!0}}),N.push(ve)}else{const Y=_c(n.dtype,e.dtype),q=new Qie(M,R,[I,p,g],t,r,P,X,G,W),te=[L,$];if(s!=null&&te.push(s),G&&te.push(a),W){const ne=i.makeTensorInfo([],"float32",Vg(o,"float32"));te.push(ne),N.push(ne)}J=i.runWebGLProgram(q,te,Y)}const Q=rn({inputs:{x:J},backend:i,attrs:{shape:_}});N.push(J);for(const Y of N)i.disposeIntermediateTensorInfo(Y);return Q}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q9e(n){const{inputs:e,backend:t,attrs:r}=n,{a:i,b:s,bias:a,preluActivationWeights:o}=e,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=r;return CN({a:i,b:s,transposeA:l,transposeB:c,backend:t,bias:a,preluActivationWeights:o,leakyreluAlpha:d,activation:u})}const eWe={kernelName:ZR,backendName:"webgl",kernelFunc:Q9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R7="return abs(x);";function tWe(n){const{inputs:e,backend:t}=n,{x:r}=e;if(t.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const s=t.texData.get(r.dataId),a=Wie(s.values);return t.makeTensorInfo(r.shape,r.dtype,a)}let i;return it().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new ug(r.shape,R7):i=new ch(r.shape,R7),t.runWebGLProgram(i,[r],r.dtype)}const nWe={kernelName:LI,backendName:"webgl",kernelFunc:tWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rWe=nd+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,iWe=ti({opSnippet:rWe}),sWe={kernelName:W_,backendName:"webgl",kernelFunc:iWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aWe=nd+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,oWe=ti({opSnippet:aWe}),lWe={kernelName:j_,backendName:"webgl",kernelFunc:oWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N7="return a + b;",cWe=uo({opSnippet:N7,packedOpSnippet:N7,supportsComplex:!0,cpuKernelImpl:bGe}),uWe={kernelName:V1,backendName:"webgl",kernelFunc:cWe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dWe{constructor(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map((s,a)=>`T${a}`);const r=[];this.variableNames.forEach(s=>{r.push(`float v${s} = get${s}AtOutCoords();`)});const i=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${i};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fWe{constructor(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map((s,a)=>`T${a}`);const r=[];this.variableNames.forEach(s=>{r.push(`vec4 v${s} = get${s}AtOutCoords();`)});const i=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${i};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MM(n){const{inputs:e,backend:t}=n,r=e;if(r.length===1)return Tc({inputs:{x:r[0]},backend:t});if(r.length>it().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(r.length/2),c=MM({inputs:r.slice(0,l),backend:t}),u=MM({inputs:r.slice(l),backend:t});return MM({inputs:[c,u],backend:t})}const i=r.map(l=>l.dtype).reduce((l,c)=>_c(l,c)),s=r.map(l=>l.shape),o=it().getBool("WEBGL_PACK")?new fWe(r[0].shape,s):new dWe(r[0].shape,s);return t.runWebGLProgram(o,r,i)}const hWe={kernelName:FI,backendName:"webgl",kernelFunc:MM};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pWe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{axis:s,keepDims:a}=r,o=i.shape.length,l=Ir(s,i.shape);let c=l;const u=ws(c,o);let d=i;u!=null&&(d=rl({inputs:{x:i},backend:t,attrs:{perm:u}}),c=Ys(c.length,o)),lo("all",c,o);const[h,p]=Ga(d.shape,c),g=xt(p),v=rn({inputs:{x:d},backend:t,attrs:{shape:[-1,g]}}),b=$v(v,v.dtype,"all",t);let x;if(a){const C=Xs(h,l);x=rn({inputs:{x:b},backend:t,attrs:{shape:C}})}else x=rn({inputs:{x:b},backend:t,attrs:{shape:h}});return t.disposeIntermediateTensorInfo(v),t.disposeIntermediateTensorInfo(b),u!=null&&t.disposeIntermediateTensorInfo(d),x}const mWe={kernelName:$4,backendName:"webgl",kernelFunc:pWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gWe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{axis:s,keepDims:a}=r,o=i.shape.length,l=Ir(s,i.shape);let c=l;const u=ws(c,o);let d=i;u!=null&&(d=rl({inputs:{x:i},backend:t,attrs:{perm:u}}),c=Ys(c.length,o)),lo("any",c,o);const[h,p]=Ga(d.shape,c),g=xt(p),v=rn({inputs:{x:d},backend:t,attrs:{shape:[-1,g]}}),b=$v(v,v.dtype,"any",t);let x;if(a){const C=Xs(h,l);x=rn({inputs:{x:b},backend:t,attrs:{shape:C}})}else x=rn({inputs:{x:b},backend:t,attrs:{shape:h}});return t.disposeIntermediateTensorInfo(v),t.disposeIntermediateTensorInfo(b),u!=null&&t.disposeIntermediateTensorInfo(d),x}const yWe={kernelName:L4,backendName:"webgl",kernelFunc:gWe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vWe{constructor(e,t,r){this.variableNames=["A"];const{windowSize:i,batchSize:s,outSize:a}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[s,a];const o=t==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${i};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${i}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${o} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bWe{constructor(e,t,r,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,de(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const s=e[e.length-1],a=Math.ceil(s/t);this.outputShape=e.slice(0,-1),a>1&&this.outputShape.push(a),i||this.variableNames.push("bestIndicesA");const o=this.outputShape,l=o.length,c=Li(l),u=Qo("coords",l);let d,h;if(a===1){h=l+1;const $=Li(h);d=`
        ${$} sourceLocR = ${$}(${u.join()}, 0);
        ++${u[l-1]};
        ${$} sourceLocG = ${$}(${u.join()}, 0);
        ++${u[l-2]};
        ${$} sourceLocA = ${$}(${u.join()}, 0);
        --${u[l-1]};
        ${$} sourceLocB = ${$}(${u.join()}, 0);
        --${u[l-2]};`}else h=l,d=`
        ${c} sourceLocR = coords;
        ++${u[l-1]};
        ${c} sourceLocG = coords;
        ++${u[l-2]};
        ${c} sourceLocA = coords;
        --${u[l-1]};
        ${c} sourceLocB = coords;
        --${u[l-2]};`;const p=["x","y","z","w","u","v"].slice(0,h),g="."+p[h-1],v=p.map($=>"int "+$),b=Qo("sourceLocR",h-1).concat("inIdx.r"),x=Qo("sourceLocG",h-1).concat("inIdx.g"),C=Qo("sourceLocB",h-1).concat("inIdx.b"),E=Qo("sourceLocA",h-1).concat("inIdx.a"),_=r==="max"?"greaterThan":"lessThan",M=i?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${b.join()}),
                             getBestIndicesAChannel(${x.join()}),
                             getBestIndicesAChannel(${C.join()}),
                             getBestIndicesAChannel(${E.join()})));`,R=`vec4(
            getAChannel(${b.join()}),
            hasNextCol ? getAChannel(${x.join()}) : 0.,
            hasNextRow ? getAChannel(${C.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${E.join()}) : 0.)`,L=i?"":`
      float getBestIndicesAChannel(${v.join()}) {
        return getChannel(getBestIndicesA(${p.join()}),
                                          vec2(${p.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${v.join()}) {
        return getChannel(getA(${p.join()}),
                               vec2(${p.slice(-2).join()}));
      }
      ${L}
      void main() {
        ${c} coords = getOutputCoords();
        bool hasNextCol = ${u[l-1]} < ${o[l-1]-1};
        bool hasNextRow = ${u[l-2]} < ${o[l-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${g}, sourceLocG${g},
          sourceLocB${g}, sourceLocA${g}) * ${t};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${R};

        for (int i = 0; i < ${t}; i++) {
          inIdx = srcIdx;
          ${M}
          vec4 candidate = ${R};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${_}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tse(n,e,t,r=null){let i=e.shape[0],s=e.shape[1];r!=null&&(i=r.shape[0],s=r.shape[1]);const a=u3(s),o={windowSize:a,inSize:s,batchSize:i,outSize:Math.ceil(s/a)},l=new vWe(o,t,r==null),c=[e];r!=null&&c.push(r);const u=n.runWebGLProgram(l,c,"int32");if(u.shape[1]===1)return u;const d=tse(n,e,t,u);return n.disposeIntermediateTensorInfo(u),d}function nse(n,e,t,r=null){const i=r!=null?r.shape:e.shape,s=i[i.length-1],a=u3(s),o=new bWe(i,a,t,r==null),l=r==null?[e]:[e,r],c=n.runWebGLProgram(o,l,"int32");if(c.shape.length===e.shape.length){const u=nse(n,e,t,c);return n.disposeIntermediateTensorInfo(c),u}return c}function rse(n,e,t,r){const i=[t];if(lo("arg"+r.charAt(0).toUpperCase()+r.slice(1),i,e.shape.length),!it().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const s=[],a=n.texData.get(e.dataId),o=a!==null&&a.isPacked;let l=e;o&&(l=n.unpackTensor(e),s.push(l));const[c,u]=Ga(l.shape,i),d=xt(u),h=rn({inputs:{x:l},backend:n,attrs:{shape:[-1,d]}});s.push(h);const p=tse(n,h,r);s.push(p);const g=rn({inputs:{x:p},backend:n,attrs:{shape:c}});return s.forEach(v=>n.disposeIntermediateTensorInfo(v)),g}return nse(n,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xWe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{axis:s}=r;let a=Ir(s,i.shape);const o=ws(a,i.shape.length);let l=i;const c=[];o!=null&&(l=rl({inputs:{x:i},backend:t,attrs:{perm:o}}),c.push(l),a=Ys(a.length,l.shape.length)),lo("argMax",[a[0]],l.shape.length);const u=rse(t,l,a[0],"max");return c.forEach(d=>t.disposeIntermediateTensorInfo(d)),u}const SWe={kernelName:PI,backendName:"webgl",kernelFunc:xWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wWe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{axis:s}=r;let a=Ir(s,i.shape);const o=ws(a,i.shape.length);let l=i;const c=[];o!=null&&(l=rl({inputs:{x:i},backend:t,attrs:{perm:o}}),c.push(l),a=Ys(a.length,l.shape.length)),lo("argMin",[a[0]],l.shape.length);const u=rse(t,l,a[0],"min");return c.forEach(d=>t.disposeIntermediateTensorInfo(d)),u}const CWe={kernelName:UI,backendName:"webgl",kernelFunc:wWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _We=nd+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,EWe=ti({opSnippet:_We}),AWe={kernelName:q_,backendName:"webgl",kernelFunc:EWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TWe=nd+"return log(x + sqrt(x * x + 1.0));",MWe=ti({opSnippet:TWe}),RWe={kernelName:X_,backendName:"webgl",kernelFunc:MWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NWe=nd+`
  return atan(x);
`,IWe=ti({opSnippet:NWe}),DWe={kernelName:K_,backendName:"webgl",kernelFunc:IWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kWe=L5+`
  return atan(a, b);
`,OWe=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Bv+`
  return result;
`,BWe=uo({opSnippet:kWe,packedOpSnippet:OWe}),$We={kernelName:J_,backendName:"webgl",kernelFunc:BWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LWe=nd+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,FWe=ti({opSnippet:LWe}),PWe={kernelName:Y_,backendName:"webgl",kernelFunc:FWe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class a_{constructor(e,t,r,i=!1,s=!1){if(this.variableNames=["x"],t==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const a=e.filterWidth,o=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,u=e.dilationWidth,d=e.effectiveFilterHeight,h=e.effectiveFilterWidth,p=e.padInfo.top,g=e.padInfo.left;this.outputShape=e.outShape;const v=t==="avg",b=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,x=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let C="0.0";if(v||(C="-1.0 / 1e-20"),r){this.userCode=`
        const ivec2 strides = ivec2(${o}, ${l});
        const ivec2 pads = ivec2(${p}, ${g});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h};
                wC += ${u}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${i?s?b:x:`wR * ${h} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const E="max";let _=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;t==="avg"&&(_="avgValue / max(count, 1.0)");const M=Math.floor(a/4)*4,R=a%4,L=`
      if (${v}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${E}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${o}, ${l});
      const ivec2 pads = ivec2(${p}, ${g});
      const float initializationValue = ${C};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${C});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${c}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${M}; wC += 4) {
            int xC = xCCorner + wC * ${u};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              getValue(batch, xR, xC + 3 * ${u}, d)
            );

            ${L}
          }

          int xC = xCCorner + ${M};
          if (${R===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${L}
          } else if (${R===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              initializationValue,
              initializationValue
            );

            ${L}
          } else if (${R===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              initializationValue
            );

            ${L}
          }
        }
        setOutput(${_});
      }
    `}}class P5{constructor(e,t,r,i=!1,s=!1){if(this.variableNames=["x"],t==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const a=e.filterWidth,o=e.strideDepth,l=e.strideHeight,c=e.strideWidth,u=e.dilationDepth,d=e.dilationHeight,h=e.dilationWidth,p=e.effectiveFilterDepth,g=e.effectiveFilterHeight,v=e.effectiveFilterWidth,b=e.padInfo.front,x=e.padInfo.top,C=e.padInfo.left;this.outputShape=e.outShape;const E=t==="avg";let _="0.0";if(E||(_="-1.0 / 1e-20"),r){this.userCode=`
        const ivec3 strides =
            ivec3(${o}, ${l}, ${c});
        const ivec3 pads = ivec3(${b}, ${x}, ${C});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${p};
              wD += ${u}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${g};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${v};
                  wC += ${h}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${i?s?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${g} * ${v} +
                      wR * ${v} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const M="max";let R=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;t==="avg"&&(R="avgValue / max(count, 1.0)");const L=Math.floor(a/4)*4,$=a%4,N=`
      if (${E}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${M}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${o}, ${l}, ${c});
      const ivec3 pads = ivec3(${b}, ${x}, ${C});
      const float initializationValue = ${_};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${_});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${p};
            wD += ${u}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${g};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${L}; wC += 4) {
              int xC = xCCorner + wC * ${h};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                getValue(batch, xD, xR, xC + 2 * ${h}, ch),
                getValue(batch, xD, xR, xC + 3 * ${h}, ch)
              );

              ${N}
            }

            int xC = xCCorner + ${L};
            if (${$===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${N}
            } else if (${$===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                initializationValue,
                initializationValue
              );

              ${N}
            } else if (${$===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                getValue(batch, xD, xR, xC + 2 * ${h}, ch),
                initializationValue
              );

              ${N}
            }
          }
        }
        setOutput(${R});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UWe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e;o2(i,"avgPool");const{filterSize:s,strides:a,pad:o,dimRoundingMode:l}=r,c=1;de(oo(a,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);const u=ed(i.shape,s,a,c,o,l);if(u.filterWidth===1&&u.filterHeight===1&&Vr(u.inShape,u.outShape))return Tc({inputs:{x:i},backend:t});const d=new a_(u,"avg",!1);return t.runWebGLProgram(d,[i],"float32")}const zWe={kernelName:zI,backendName:"webgl",kernelFunc:UWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HWe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{filterSize:s,strides:a,pad:o,dimRoundingMode:l,dataFormat:c}=r,u=[1,1,1],d=Qp(i.shape,s,a,u,o,l,c),h=new P5(d,"avg",!1);return t.runWebGLProgram(h,[i],"float32")}const VWe={kernelName:HI,backendName:"webgl",kernelFunc:HWe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GWe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterHeight,r=e.filterWidth,i=e.strideHeight,s=e.strideWidth,a=e.dilationHeight,o=e.dilationWidth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,u=l-1-e.padInfo.top,d=c-1-e.padInfo.left,h=1/(t*r);this.userCode=`
      const ivec2 pads = ivec2(${u}, ${d});
      const float avgMultiplier = float(${h});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${a}) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${c};
            wC+= ${o}) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class WWe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterDepth,r=e.filterHeight,i=e.filterWidth,s=e.strideDepth,a=e.strideHeight,o=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,d=e.effectiveFilterDepth,h=e.effectiveFilterHeight,p=e.effectiveFilterWidth,g=d-1-e.padInfo.front,v=h-1-e.padInfo.top,b=p-1-e.padInfo.left,x=1/(t*r*i);this.userCode=`
      const ivec3 pads = ivec3(${g}, ${v}, ${b});
      const float avgMultiplier = float(${x});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${s}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${h};
              wR += ${c}) {
            float dyR = float(dyRCorner + wR) / ${a}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${p};
                wC += ${u}) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jWe(n){const{inputs:e,backend:t,attrs:r}=n,{dy:i,input:s}=e,a=s,{filterSize:o,strides:l,pad:c,dimRoundingMode:u}=r,d=[1,1,1],h=Qp(a.shape,o,l,d,c,u),p=new WWe(h);return t.runWebGLProgram(p,[i],a.dtype)}const qWe={kernelName:P4,backendName:"webgl",kernelFunc:jWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XWe(n){const{inputs:e,backend:t,attrs:r}=n,{dy:i,input:s}=e,a=s;o2([i,s],"avgPoolGrad");const{filterSize:o,strides:l,pad:c}=r,u=ed(a.shape,o,l,1,c),d=new GWe(u);return t.runWebGLProgram(d,[i],a.dtype)}const KWe={kernelName:F4,backendName:"webgl",kernelFunc:XWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YWe(n){const{inputs:e,backend:t,attrs:r}=n,{a:i,b:s}=e,{transposeA:a,transposeB:o}=r;return CN({a:i,b:s,transposeA:a,transposeB:o,backend:t})}const JWe={kernelName:VI,backendName:"webgl",kernelFunc:YWe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZWe{constructor(e,t,r,i,s,a){this.outputShape=[],this.variableNames=["x","mean","variance"],hr(e,t),hr(e,r);let o="0.0";i!=null&&(hr(e,i),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let l="1.0";s!=null&&(hr(e,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${o};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${a}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QWe{constructor(e,t,r,i,s,a){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],hr(e,t),hr(e,r);let o="vec4(0.0)";i!=null&&(hr(e,i),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let l="vec4(1.0)";s!=null&&(hr(e,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${o};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${a}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e7e=({inputs:n,backend:e,attrs:t})=>{const{x:r,mean:i,variance:s,offset:a,scale:o}=n;de(i.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),de(a==null||i.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),de(o==null||i.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=t;l==null&&(l=.001);const c=[r,i,s];let u=null;a!=null&&(u=a.shape,c.push(a));let d=null;o!=null&&(d=o.shape,c.push(o));const h=it().getBool("WEBGL_PACK_NORMALIZATION")?new QWe(r.shape,i.shape,s.shape,u,d,l):new ZWe(r.shape,i.shape,s.shape,u,d,l);return e.runWebGLProgram(h,c,c[0].dtype)},t7e={kernelName:nD,backendName:"webgl",kernelFunc:e7e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class n7e{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const t=Li(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=r7e(this.rank);let i;const s=e.map((a,o)=>`sourceLoc.${wF[o]} = start[${o}] + coords.${wF[o]};`);i=`
        ${t} sourceLoc;
        ${t} coords = getOutputCoords();
        ${s.join(`
`)}
      `,this.userCode=`
      void main() {
        ${i}
        setOutput(getSource(${r}));
      }
    `}}const wF=["x","y","z","w","u","v"];function r7e(n){if(n===1)return"sourceLoc";if(n<=6)return wF.slice(0,n).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${n} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class i7e{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const t=Li(this.rank),r=Qo("coords",this.rank),i=Qo("sourceLoc",this.rank),s=this.rank===1?"sourceLoc":`vec2(${i.slice(-2).join()})`,a=`getChannel(getSource(${i.join()}), ${s})`,o=`
      result.x = ${a};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${i[this.rank-1]};
        result.y = ${a};
        --${i[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${i[this.rank-2]};
        result.z = ${a};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${i[this.rank-1]};
          result.w = ${a};
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            ${t}(${e.map((u,d)=>`start[${d}]`).join()});`:e.map((u,d)=>`${i[d]} = ${r[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${t} coords = getOutputCoords();
        ${t} sourceLoc;
        ${c}
        vec4 result = vec4(0.);
        ${o}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s7e(n,e,t,r){const i=r.texData.get(n.dataId),s=r.makeTensorInfo(t,n.dtype),a=r.texData.get(s.dataId);Object.assign(a,i),a.refCount=1,a.shape=t,a.dtype=n.dtype;let o=kz(e,kn(n.shape));i.slice&&(o+=i.slice.flatOffset),a.slice={flatOffset:o,origDataId:i.slice&&i.slice.origDataId||n.dataId};const l=r.dataRefCount.get(a.slice.origDataId)||1;return r.dataRefCount.set(a.slice.origDataId,l+1),s}function rS(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{begin:s,size:a}=r,[o,l]=c3(i,s,a);if(Nz(i,o,l),xt(l)===0)return t.makeTensorInfo(l,i.dtype,[]);if(t.shouldExecuteOnCPU([i])||i.dtype==="string"){const d=t.texData.get(i.dataId),h=JGe(d.values,o,l,i.shape,i.dtype);return t.makeTensorInfo(l,i.dtype,h)}const{isPacked:c}=t.texData.get(i.dataId),u=Dz(i.shape,o,l);if(c||!u){const d=it().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new i7e(l):new n7e(l),h=[o];return t.runWebGLProgram(d,[i],i.dtype,h)}return t.uploadToGPU(i.dataId),s7e(i,o,l,t)}const a7e={kernelName:ID,backendName:"webgl",kernelFunc:rS};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o7e=n=>{const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{blockShape:s,crops:a}=r;de(i.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const o=s.reduce((C,E)=>C*E),l=XE(i.shape,s,o),c=KE(l.length,s.length),u=YE(i.shape,s,o),d=Fz(a,s.length),h=Pz(u,a,s.length),p=[],g=rn({inputs:{x:i},backend:t,attrs:{shape:l}}),v=rl({inputs:{x:g},backend:t,attrs:{perm:c}}),b=rn({inputs:{x:v},backend:t,attrs:{shape:u}}),x=rS({inputs:{x:b},backend:t,attrs:{begin:d,size:h}});return p.push(g),p.push(v),p.push(b),p.forEach(C=>t.disposeIntermediateTensorInfo(C)),x},l7e={kernelName:GI,backendName:"webgl",kernelFunc:o7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c7e(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,weights:s}=e,{size:a}=r,o=t.readSync(i.dataId),l=t.readSync(s.dataId),c=Gie(o,l,s.dtype,s.shape,a);return t.makeTensorInfo([a],s.dtype,c)}const u7e={kernelName:U4,backendName:"webgl",kernelFunc:c7e};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d7e=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,f7e=`
  return float(int(a.r) & int(b.r));
`;function h7e(n){const{inputs:e,backend:t}=n,{a:r,b:i}=e,s=it().getBool("WEBGL_PACK_BINARY_OPERATIONS"),a=it().getNumber("WEBGL_VERSION");if(t.shouldExecuteOnCPU([r,i])||a===1){const l=t.texData.get(r.dataId).values,c=t.texData.get(i.dataId).values,[u,d]=SGe(r.shape,i.shape,l,c,r.dtype),h=t.makeTensorInfo(d,r.dtype),p=t.texData.get(h.dataId);return p.values=u,h}let o;return s?o=new tS(d7e,r.shape,i.shape,!1):o=new bv(f7e,r.shape,i.shape),t.runWebGLProgram(o,[r,i],r.dtype)}const p7e={kernelName:WI,backendName:"webgl",kernelFunc:h7e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m7e(n){const{inputs:e,backend:t}=n,{s0:r,s1:i}=e,s=t.readSync(r.dataId),a=t.readSync(i.dataId),o=hr(Array.from(s),Array.from(a));return t.makeTensorInfo([o.length],"int32",Int32Array.from(o))}const g7e={kernelName:z4,backendName:"webgl",kernelFunc:m7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y7e="return float(a != b);",ise=uo({opSnippet:y7e,cpuKernelImpl:HGe,dtype:"bool"}),v7e={kernelName:bD,backendName:"webgl",kernelFunc:ise};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c2(n){const{inputs:e,backend:t}=n,{input:r}=e,i=t.texData.get(r.dataId);return Tc({inputs:{x:i.complexTensorInfos.real},backend:t})}const b7e={kernelName:xU,backendName:"webgl",kernelFunc:c2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x7e="return float(int(x));";function S7e(n,e){const t=new ch(n.shape,x7e),r=e.runWebGLProgram(t,[n],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CF(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{dtype:s}=r;if(s==="complex64"){if(i.dtype==="complex64")return Tc({inputs:{x:i},backend:t});const a=xa(i.shape),o=CF({inputs:{x:i},backend:t,attrs:{dtype:"float32"}}),l=Qg({inputs:{real:o,imag:a},backend:t});return a.dispose(),t.disposeIntermediateTensorInfo(o),l}if(i.dtype==="complex64"){const a=c2({inputs:{input:i},backend:t}),o=CF({inputs:{x:a},backend:t,attrs:{dtype:s}});return t.disposeIntermediateTensorInfo(a),o}if(!xZ(i.dtype,s)){const a=Tc({inputs:{x:i},backend:t});return{dataId:a.dataId,shape:a.shape,dtype:s}}if(t.shouldExecuteOnCPU([i])){const a=t.texData.get(i.dataId).values,[o,l,c]=wGe(a,i.shape,i.dtype,s);return t.makeTensorInfo(o,l,c)}if(s==="int32")return S7e(i,t);if(s==="bool"){const a=t.makeTensorInfo([],"bool",so("bool",1)),l=ise({inputs:{a:i,b:a},backend:t});return t.disposeIntermediateTensorInfo(a),l}throw new Error(`Error in Cast: failed to cast ${i.dtype} to ${s}`)}const w7e={kernelName:Z_,backendName:"webgl",kernelFunc:CF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I7="return ceil(x);",C7e=ti({opSnippet:I7,packedOpSnippet:I7,cpuKernelImpl:CGe}),_7e={kernelName:Q_,backendName:"webgl",kernelFunc:C7e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class E7e{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class A7e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T7e(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{clipValueMin:s,clipValueMax:a}=r;let o;it().getBool("WEBGL_PACK_CLIP")?o=new A7e(i.shape):o=new E7e(i.shape);const l=[[s],[a]];return t.runWebGLProgram(o,[i],i.dtype,l)}const M7e={kernelName:eE,backendName:"webgl",kernelFunc:T7e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class R7e{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D7(n,e){return{dataId:e.dataId,dtype:e.dtype,shape:n.shape}}function N7e(n){const{inputs:e,backend:t}=n,{x:r}=e,i=t.texData.get(r.dataId),s=new R7e(r.shape),a=[D7(r,i.complexTensorInfos.real),D7(r,i.complexTensorInfos.imag)];return t.runWebGLProgram(s,a,a[0].dtype)}const I7e={kernelName:jI,backendName:"webgl",kernelFunc:N7e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class D7e{constructor(e){this.outputShape=[],this.outputShape=hh(e,1),this.variableNames=e.map((a,o)=>`T${o}`);const t=new Array(e.length-1);t[0]=e[0][1];for(let a=1;a<t.length;a++)t[a]=t[a-1]+e[a][1];const r=[`if (yC < ${t[0]}) setOutput(getT0(yR, yC));`];for(let a=1;a<t.length;a++){const o=t[a-1];r.push(`else if (yC < ${t[a]}) setOutput(getT${a}(yR, yC-${o}));`)}const i=t.length,s=t[t.length-1];r.push(`else setOutput(getT${i}(yR, yC-${s}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class k7e{constructor(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=hh(e,t);const r=this.outputShape,i=r.length,s=Li(i),a=Qo("coords",i),o=["x","y","z","w","u","v"].slice(0,i);this.variableNames=e.map((v,b)=>`T${b}`);const l=new Array(e.length-1);l[0]=e[0][t];for(let v=1;v<l.length;v++)l[v]=l[v-1]+e[v][t];const c=o[t],u=o.slice(-2),d=o.join();let h=`if (${c} < ${l[0]}) {
        return getChannel(
            getT0(${d}), vec2(${u.join()}));
        }`;for(let v=1;v<l.length;v++){const b=l[v-1];h+=`
        if (${c} < ${l[v]}  && ${c} >= ${l[v-1]}) {
          return getChannel(
            getT${v}(${eM(o,c,b)}),
            vec2(${eM(u,c,b)}));
        }`}const p=l.length,g=l[l.length-1];h+=`
        return getChannel(
          getT${p}(${eM(o,c,g)}),
          vec2(${eM(u,c,g)}));`,this.userCode=`
      float getValue(${o.map(v=>"int "+v)}) {
        ${h}
      }

      void main() {
        ${s} coords = getOutputCoords();
        vec4 result = vec4(getValue(${a}), 0., 0., 0.);

        ${a[i-1]} = ${a[i-1]} + 1;
        if (${a[i-1]} < ${r[i-1]}) {
          result.g = getValue(${a});
        }

        ${a[i-2]} = ${a[i-2]} + 1;
        if (${a[i-2]} < ${r[i-2]}) {
          result.a = getValue(${a});
        }

        ${a[i-1]} = ${a[i-1]} - 1;
        if (${a[i-2]} < ${r[i-2]} &&
            ${a[i-1]} < ${r[i-1]}) {
          result.b = getValue(${a});
        }
        setOutput(result);
      }
    `}}function eM(n,e,t){const r=n.indexOf(e);return n.map((s,a)=>a===r?`${s} - ${t}`:s).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R3(n){const{inputs:e,backend:t}=n,{input:r}=e,i=t.texData.get(r.dataId);return Tc({inputs:{x:i.complexTensorInfos.imag},backend:t})}const O7e={kernelName:aU,backendName:"webgl",kernelFunc:R3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rC(n,e,t){const r=n[0].dtype;if(r==="complex64"){const p=n.map(C=>c2({inputs:{input:C},backend:t})),g=n.map(C=>R3({inputs:{input:C},backend:t})),v=rC(p,e,t),b=rC(g,e,t),x=Qg({inputs:{real:v,imag:b},backend:t});return p.forEach(C=>t.disposeIntermediateTensorInfo(C)),g.forEach(C=>t.disposeIntermediateTensorInfo(C)),t.disposeIntermediateTensorInfo(v),t.disposeIntermediateTensorInfo(b),x}let i=t.shouldExecuteOnCPU(n);if(r==="string"&&(i=!0),i){const p=n.map(_=>{const R=[-1,xt(_.shape.slice(e))];return rn({inputs:{x:_},backend:t,attrs:{shape:R}})}),g=p.map(_=>({vals:t.readSync(_.dataId),shape:_.shape})),v=hh(p.map(_=>_.shape),1),b=p[0].shape[0]===1,x=_Ge(g,v,r,b),C=hh(n.map(_=>_.shape),e),E=t.makeTensorInfo(C,r,x);return p.forEach(_=>t.disposeIntermediateTensorInfo(_)),E}const s=n.filter(p=>xt(p.shape)>0),a=it().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&s[0].shape.length>1;if(s.length===1){const p=a?new ch(n[0].shape,tg):new ug(n[0].shape,tg);return t.runWebGLProgram(p,n,r)}const o=it().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(s.length>o){const p=[];for(let v=0;v<s.length;v+=o){const b=s.slice(v,v+o);p.push(rC(b,e,t))}const g=rC(p,e,t);for(const v of p)t.disposeIntermediateTensorInfo(v);return g}if(a){const p=new k7e(s.map(g=>g.shape),e);return t.runWebGLProgram(p,s,r)}const{tensors2D:l,outShape:c}=B7e(s,e,t),u=new D7e(l.map(p=>p.shape)),d=t.runWebGLProgram(u,l,r);l.forEach(p=>t.disposeIntermediateTensorInfo(p));const h=rn({inputs:{x:d},attrs:{shape:c},backend:t});return t.disposeIntermediateTensorInfo(d),h}function B7e(n,e,t){const r=hh(n.map(s=>s.shape),e);return{tensors2D:n.map(s=>rn({inputs:{x:s},attrs:{shape:[-1,xt(s.shape.slice(e))]},backend:t})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sse(n){const{inputs:e,backend:t,attrs:r}=n,{axis:i}=r,s=Ir(i,e[0].shape)[0],a=e.map(c=>c.shape);Bz(a,s);const o=hh(e.map(c=>c.shape),s);if(xt(o)===0)return t.makeTensorInfo(o,e[0].dtype,[]);const l=e.filter(c=>xt(c.shape)>0);return l.length===1?Tc({inputs:{x:l[0]},backend:t}):rC(l,s,t)}const $7e={kernelName:qI,backendName:"webgl",kernelFunc:sse};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ase{constructor(e,t=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const a=e.padInfo.top,o=e.padInfo.left,l=e.strideHeight,c=e.strideWidth,u=e.dilationHeight,d=e.dilationWidth,h=e.filterHeight,p=e.filterWidth,g=Math.floor(e.inChannels/4)*4,v=e.inChannels%4,b=e.dataFormat==="channelsLast",x=b?1:2,C=b?2:3,E=b?3:1;let _="",M="";r&&(i?_=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?_=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:_=`
          float activation(float x) {
            ${r}
          }
        `,M="result = activation(result);");const R=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${_}

      const ivec2 strides = ivec2(${l}, ${c});
      const ivec2 pads = ivec2(${a}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${E}];

        ivec2 xRCCorner =
            ivec2(coords[${x}], coords[${C}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${h}; wR++) {
          int xR = xRCorner + wR * ${u};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${p}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${g}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${b}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${v===1}) {

              if (${b}) {
                dotProd +=
                    getX(batch, xR, xC, ${g}) *
                    getW(wR, wC, ${g}, d2);
              } else {
                dotProd +=
                    getX(batch, ${g}, xR, xC) *
                    getW(wR, wC, ${g}, d2);
              }

            } else if (${v===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${g}, d2),
                getW(wR, wC, ${g} + 1, d2)
              );

              if (${b}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${g}),
                  getX(batch, xR, xC, ${g} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${g}, xR, xC),
                  getX(batch, ${g} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${v===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${g}, d2),
                getW(wR, wC, ${g} + 1, d2),
                getW(wR, wC, ${g} + 2, d2)
              );

              if (${b}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${g}),
                  getX(batch, xR, xC, ${g} + 1),
                  getX(batch, xR, xC, ${g} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${g}, xR, xC),
                  getX(batch, ${g} + 1, xR, xC),
                  getX(batch, ${g} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${R}
        ${M}
        setOutput(result);
      }
    `}}class L7e{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const t=e.padInfo.front,r=e.padInfo.top,i=e.padInfo.left,s=e.strideDepth,a=e.strideHeight,o=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,d=e.filterDepth,h=e.filterHeight,p=e.filterWidth,g=Math.floor(e.inChannels/4)*4,v=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${s}, ${a}, ${o});
      const ivec3 pads = ivec3(${t}, ${r}, ${i});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${h}; wR++) {
            int xR = xRCorner + wR * ${c};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${p}; wC++) {
              int xC = xCCorner + wC * ${u};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${g}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${v===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${g}) *
                  getW(wF, wR, wC, ${g}, d2);
              } else if (${v===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${g}),
                  getX(batch, xF, xR, xC, ${g} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${g}, d2),
                  getW(wF, wR, wC, ${g} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${v===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${g}),
                  getX(batch, xF, xR, xC, ${g} + 1),
                  getX(batch, xF, xR, xC, ${g} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${g}, d2),
                  getW(wF, wR, wC, ${g} + 1, d2),
                  getW(wF, wR, wC, ${g} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ose{constructor(e,t=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Oo(this.outputShape.length);const a=e.padInfo.left,o=e.strideWidth,l=e.dilationWidth,c=e.filterHeight,u=e.filterWidth,d=u;let h=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let b=0;b<u;b++)h+=`
           vec4 xTexelC${b*2};
           int xTexelC${b*2}Ready;
           vec4 xTexelC${b*2+1};
           int xTexelC${b*2+1}Ready;
           vec4 xC${b};`;h+=`
     for (int r = 0; r < ${c}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let b=0;b<u;b++)h+=`
           xTexelC${b*2} = vec4(0.0);
           xTexelC${b*2}Ready = 0;
           xTexelC${b*2+1} = vec4(0.0);
           xTexelC${b*2+1}Ready = 0;
           xC${b} = vec4(0.0);`;h+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let b=0;b<(d+1)/2;b++){const x=b*2;if(h+=`
           xC = xCCorner + ${x*l};
           `,o===1){if(x<u&&(a%2===1?(h+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {
                   xTexelC${x} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${x}.zw = vec2(0.0);
                   }
                   xTexelC${x}Ready = 1;
                 }
               `,l===1&&x>0?h+=`
                 xC${x} = vec4(xTexelC${x-2}.zw, xTexelC${x}.xy);
                 `:h+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${x} = vec4(previous.zw, xTexelC${x}.xy);
                   } else {
                     xC${x} = vec4(0.0, 0.0, xTexelC${x}.xy);
                   }
                   `):h+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {
                   xTexelC${x} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${x}.zw = vec2(0.0);
                   }
                   xTexelC${x}Ready = 1;
                 }

                 xC${x} = xTexelC${x};
                 `,x+1<u)){const C=a%2===0?k4(l):l;l%2===0&&a%2===1||l%2!==0&&a%2!==1?(h+=`
                   xCOffset = xC + imod(pads[1], 2) + ${C};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                     xTexelC${x+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${x+1}.zw = vec2(0.0);
                     }
                     xTexelC${x+1}Ready = 1;
                   }
                   `,l>1?h+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${x+1} = vec4(previous.zw, xTexelC${x+1}.xy);
                     } else {
                      xC${x+1} = vec4(0.0, 0.0, xTexelC${x+1}.xy);
                     }
                     `:h+=`
                     xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.xy);
                     `):C===1?h+=`
                     xC${x+1} = xTexelC${x};
                     `:h+=`
                     xCOffset = xC + ${C};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                       xTexelC${x+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${x+1}.zw = vec2(0.0);
                       }
                       xTexelC${x+1}Ready = 1;
                     }

                     xC${x+1} = xTexelC${x+1};
                     `}}else x<u&&(a%2===1?(h+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {
                   xTexelC${x} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${x}.zw = vec2(0.0);
                   }
                   xTexelC${x}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${x+1}Ready == 0) {
                   xTexelC${x+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${x+1}.zw = vec2(0.0);
                   }
                   xTexelC${x+1}Ready = 1;
                 }

                 xC${x} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);
               `,x+1<u&&(h+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${x+1} = vec4(xTexelC${x+1}.xy, final.xy);
                 `)):(h+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {
                   xTexelC${x} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${x}.zw = vec2(0.0);
                   }
                   xTexelC${x}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                   xTexelC${x+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${x+1}.zw = vec2(0.);
                   }
                   xTexelC${x+1}Ready = 1;
                 }

                 xC${x} = vec4(
                   xTexelC${x}.xy, xTexelC${x+1}.xy);
               `,x+1<u&&(h+=`
                   xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);
                 `)));x<u&&(h+=`
             wTexel = getW(r, ${x}, d1, d2);
             dotProd += xC${x}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${x}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,x+1<u&&(h+=`
               wTexel = getW(r, ${x+1}, d1, d2);
               dotProd += xC${x+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${x+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}h+=`
     }
   `,h+=`
     }
   `,h+=`
     }
   `;let p="",g="";r&&(i?p=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:s?p=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:p=`vec4 activation(vec4 x) {
           ${r}
         }`,g="result = activation(result);");const v=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${p}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${h}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${v}
         ${g}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class F7e{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=Oo(this.outputShape.length);const{dataFormat:r}=t,i=ol(),s=r==="channelsLast",a=s?1:2,o=s?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let c="";for(let u=0;u<=1;u++)for(let d=0;d<=1;d++)c+=`
          blockIndex = rc.z + ${d};
          pos = rc.y + ${u};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${a}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${o}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${s}) {
                  innerDims = vec2(d1, ch);
                  result[${u*2+d}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${u*2+d}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${c}

        ${i.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _N(n,e){const t=n.length;return t>=3?e?[...n.slice(0,-3),n[t-3]*n[t-2],n[t-1]]:[...n.slice(0,-3),n[t-3],n[t-2]*n[t-1]]:!e&&t===1&&n[0]>1?[n[0],1]:null}function lse({x:n,filter:e,convInfo:t,backend:r,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:a=0,activation:o=null}){const l=n.shape,c=r.texData.get(n.dataId),u=t.inChannels,d=l[0]*l[1]*l[2],h=t.outChannels,p=t.dataFormat==="channelsLast",g=!1,v=!1;let b;const x=[];if(s!=null){const _=_N(s.shape,p);_!=null&&(s=rn({inputs:{x:s},backend:r,attrs:{shape:_}}),x.push(s))}if(i!=null){const _=_N(i.shape,p);_!=null&&(i=rn({inputs:{x:i},backend:r,attrs:{shape:_}}),x.push(i))}if(!((d===1||h===1)&&u>ese)&&c.isPacked&&p&&c.texture!=null&&l[2]%2!==0&&Vr(c.shape.slice(-3),l.slice(-3))){const _=l[0]*l[1]*(l[2]+1),M={dataId:n.dataId,shape:[1,_,t.inChannels],dtype:n.dtype},R=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,de(wN(c.shape,M.shape),()=>`packed reshape ${c.shape} to ${M.shape} isn't free`);const L=rn({inputs:{x:e},backend:r,attrs:{shape:[1,t.inChannels,t.outChannels]}});x.push(L);const $=CN({a:M,b:L,backend:r,transposeA:g,transposeB:v,bias:i,activation:o,preluActivationWeights:s,leakyreluAlpha:a}),N=r.texData.get($.dataId);de(N.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=R,N.shape=t.outShape,b=Tc({inputs:{x:$},backend:r}),b.shape=t.outShape,x.push($)}else{const _=t.outHeight*t.outWidth,M=rn({inputs:{x:n},backend:r,attrs:{shape:p?[t.batchSize,_,t.inChannels]:[t.batchSize,t.inChannels,_]}}),R=rn({inputs:{x:e},backend:r,attrs:{shape:[1,t.inChannels,t.outChannels]}}),L=CN({a:p?M:R,b:p?R:M,transposeA:!p,transposeB:v,backend:r,bias:i,activation:o,preluActivationWeights:s,leakyreluAlpha:a});b=rn({inputs:{x:L},backend:r,attrs:{shape:t.outShape}}),x.push(M),x.push(R),x.push(L)}for(const _ of x)r.disposeIntermediateTensorInfo(_);return b}function cse({x:n,filter:e,convInfo:t,backend:r,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:a=0,activation:o=null}){const{filterWidth:l,filterHeight:c,inChannels:u,outWidth:d,outHeight:h,dataFormat:p}=t,g=p==="channelsLast",v=l*c*u,b=h*d,x=[t.batchSize,v,b],C=!0,E=!1,_=[];if(s!=null){const Q=_N(s.shape,g);Q!=null&&(s=rn({inputs:{x:s},backend:r,attrs:{shape:Q}}),_.push(s))}if(i!=null){const Q=_N(i.shape,g);Q!=null&&(i=rn({inputs:{x:i},backend:r,attrs:{shape:Q}}),_.push(i))}const M=rn({inputs:{x:e},backend:r,attrs:{shape:[1,v,xt(e.shape)/v]}});_.push(M);const R=new F7e(x,t),L=[n.shape,[t.padInfo.top,t.padInfo.left],[t.strideHeight,t.strideWidth],[t.dilationHeight,t.dilationWidth],[t.inChannels],[t.filterWidth*t.inChannels],[t.outWidth]],$=r.runWebGLProgram(R,[n],"float32",L),N=rn({inputs:{x:$},backend:r,attrs:{shape:x}});_.push($),_.push(N);const I=i!=null,k=s!=null,P=o==="leakyrelu",G=o?s_(o,!0):null,W=new Qie(g?N.shape:M.shape,g?M.shape:N.shape,g?[t.batchSize,b,t.outChannels]:[t.batchSize,t.outChannels,b],C,E,I,G,k,P),X=g?[N,M]:[M,N];if(i&&X.push(i),k&&X.push(s),P){const Q=r.makeTensorInfo([],"float32",Vg(a,"float32"));X.push(Q),_.push(Q)}const z=r.runWebGLProgram(W,X,"float32"),J=rn({inputs:{x:z},backend:r,attrs:{shape:t.outShape}});_.push(z);for(const Q of _)r.disposeIntermediateTensorInfo(Q);return J}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P7e(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,filter:s}=e,{strides:a,pad:o,dataFormat:l,dilations:c,dimRoundingMode:u}=r,d=em(l),h=Va(i.shape,s.shape,a,c,o,u,!1,d);let p;if(h.filterHeight===1&&h.filterWidth===1&&h.dilationHeight===1&&h.dilationWidth===1&&h.strideHeight===1&&h.strideWidth===1&&(h.padInfo.type==="SAME"||h.padInfo.type==="VALID"))p=lse({x:i,filter:s,convInfo:h,backend:t});else if(h.strideWidth<=2&&d==="channelsLast"&&it().getBool("WEBGL_EXP_CONV")){const v=new ose(h),b=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];p=t.runWebGLProgram(v,[i,s],"float32",b)}else if(it().getBool("WEBGL_CONV_IM2COL"))p=cse({x:i,filter:s,convInfo:h,backend:t});else{const v=new ase(h);p=t.runWebGLProgram(v,[i,s],"float32")}const g=rn({inputs:{x:p},backend:t,attrs:{shape:h.outShape}});return t.disposeIntermediateTensorInfo(p),g}const U7e={kernelName:XI,backendName:"webgl",kernelFunc:P7e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class z7e{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,r=e.strideWidth,i=e.padInfo.top,s=e.padInfo.left,a=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${t} - ${i};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${s};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${a?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class H7e{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,r=e.filterWidth,i=e.strideHeight,s=e.strideWidth,a=e.dataFormat==="channelsLast",o=t-1-e.padInfo.top,l=r-1-e.padInfo.left,c=a?1:2,u=a?2:3,d=a?3:1;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${c}], coords[${u}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${t}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${t} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${a}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class V7e{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideDepth,r=e.strideHeight,i=e.strideWidth,s=e.padInfo.front,a=e.padInfo.top,o=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${t} - ${s};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${a};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${i} - ${o};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class G7e{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterDepth,r=e.filterHeight,i=e.filterWidth,s=e.strideDepth,a=e.strideHeight,o=e.strideWidth,l=t-1-e.padInfo.front,c=r-1-e.padInfo.top,u=i-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${c}, ${u});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${t}; wF++) {
          float dyF = float(dyFCorner + wF) / ${s}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${t} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${a}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${i}; wC++) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${i} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W7e(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,dy:s}=e,{strides:a,pad:o,dataFormat:l,dimRoundingMode:c,filterShape:u}=r,d=em(l),h=Va(i.shape,u,a,1,o,c,!1,d),p=new z7e(h);return t.runWebGLProgram(p,[i,s],"float32")}const j7e={kernelName:V4,backendName:"webgl",kernelFunc:W7e};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class q7e{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=Oo(this.outputShape.length);const t=e.filterHeight,r=e.filterWidth,i=t-1-e.padInfo.top,s=r-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${t}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${t} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X7e(n){const{inputs:e,backend:t,attrs:r}=n,{dy:i,filter:s}=e,{inputShape:a,strides:o,pad:l,dataFormat:c,dimRoundingMode:u}=r,d=em(c),h=Va(a,s.shape,o,1,l,u,!1,d);if(it().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&d==="channelsLast"){const p=[[h.strideHeight,h.strideWidth]],g=new q7e(h);return t.runWebGLProgram(g,[i,s],"float32",p)}else{const p=new H7e(h);return t.runWebGLProgram(p,[i,s],"float32")}}const K7e={kernelName:KI,backendName:"webgl",kernelFunc:X7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y7e(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,filter:s}=e,{strides:a,pad:o,dilations:l}=r,c=jg(i.shape,s.shape,a,l,o),u=new L7e(c);return t.runWebGLProgram(u,[i,s],"float32")}const J7e={kernelName:YI,backendName:"webgl",kernelFunc:Y7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z7e(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,dy:s}=e,{strides:a,pad:o,filterShape:l}=r,c=jg(i.shape,l,a,1,o),u=new V7e(c);return t.runWebGLProgram(u,[i,s],"float32")}const Q7e={kernelName:G4,backendName:"webgl",kernelFunc:Z7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eje(n){const{inputs:e,backend:t,attrs:r}=n,{dy:i,filter:s}=e,{pad:a,strides:o,inputShape:l}=r,c=jg(l,s.shape,o,1,a),u=new G7e(c);return t.runWebGLProgram(u,[i,s],"float32")}const tje={kernelName:W4,backendName:"webgl",kernelFunc:eje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nje=nS+`
  return cos(x);
`,rje=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${Bv}
  return result;
`,ije=ti({opSnippet:nje,packedOpSnippet:rje}),sje={kernelName:tE,backendName:"webgl",kernelFunc:ije};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aje=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,oje=ti({opSnippet:aje}),lje={kernelName:nE,backendName:"webgl",kernelFunc:oje};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cje{constructor(e,t,r,i,s){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[a,o,l,c]=e,[u]=t,[d,h]=r;this.outputShape=[u,d,h,c];const p=i==="bilinear"?1:0,[g,v]=[`${o-1}.0`,`${l-1}.0`],[b,x,C]=d>1?[`${(o-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${g} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${g}`],[E,_,M]=h>1?[`${(l-1)/(h-1)}`,"(x2-x1) * width_ratio",`x1*${v} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${v}`];this.userCode=`
      const float height_ratio = float(${b});
      const float width_ratio = float(${E});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${a}) {
          return;
        }

        float height_scale = ${x};
        float width_scale = ${_};

        float in_y = ${C};
        if( in_y < 0.0 || in_y > ${g} ) {
          setOutput(float(${s}));
          return;
        }
        float in_x = ${M};
        if( in_x < 0.0 || in_x > ${v} ) {
          setOutput(float(${s}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${p} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uje=n=>{const{inputs:e,backend:t,attrs:r}=n,{image:i,boxes:s,boxInd:a}=e,{cropSize:o,method:l,extrapolationValue:c}=r,u=new cje(i.shape,s.shape,o,l,c);return t.runWebGLProgram(u,[i,s,a],"float32")},dje={kernelName:q4,backendName:"webgl",kernelFunc:uje};var o_;(function(n){n.Prod="*",n.Sum="+"})(o_||(o_={}));class k7{constructor(e,t,r,i){this.op=e,this.outputShape=t,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const s=this.outputShape.length,a=this.op===o_.Prod?"1.0":"0.0",o=r?a:`getX(${O7(s,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let c="",u="";r?(c=i?`end != ${l-1}`:"end != 0",u=i?"end + 1":"end - 1"):(c=i?`end + pow2 < ${l}`:"end >= pow2",u=i?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${Li(s)} coords = getOutputCoords();
        int end = ${B7(s,"coords",this.op)};
        float val = ${o};
        int pow2 = int(pow(2.0, index));
        if (${c}) {
          int idx = ${u};
          ${B7(s,"coords",this.op)} = idx;
          val ${this.op}= getX(${O7(s,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function O7(n,e,t){if(n===1)return`${e}`;if(n===2)return`${e}.x, ${e}.y`;if(n===3)return`${e}.x, ${e}.y, ${e}.z`;if(n===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${t} for rank ${n} is not yet supported`)}function B7(n,e,t){if(n===1)return`${e}`;if(n===2)return`${e}.y`;if(n===3)return`${e}.z`;if(n===4)return`${e}.w`;throw new Error(`Cumulative ${t} for rank ${n} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function use(n,e,t,r,i,s){const a=e.shape.length,o=ws([r],a);let l=e;o!=null&&(l=rl({inputs:{x:e},backend:t,attrs:{perm:o}}));const c=Ys(1,a)[0];if(c!==a-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const u=l.shape[c];let d=Tc({inputs:{x:l},backend:t});for(let h=0;h<=Math.ceil(Math.log2(u))-1;h++){const p=new k7(n,l.shape,!1,s),g=[[h]],v=d;d=t.runWebGLProgram(p,[d],d.dtype,g),t.disposeIntermediateTensorInfo(v)}if(i){const h=new k7(n,l.shape,i,s),p=d;d=t.runWebGLProgram(h,[d],d.dtype),t.disposeIntermediateTensorInfo(p)}if(o!=null){const h=qg(o),p=rl({inputs:{x:d},backend:t,attrs:{perm:h}});return t.disposeIntermediateTensorInfo(d),t.disposeIntermediateTensorInfo(l),p}return d}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fje(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{axis:s,exclusive:a,reverse:o}=r;return use(o_.Prod,i,t,s,a,o)}const hje={kernelName:j4,backendName:"webgl",kernelFunc:fje};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pje(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{axis:s,exclusive:a,reverse:o}=r;return use(o_.Sum,i,t,s,a,o)}const mje={kernelName:JI,backendName:"webgl",kernelFunc:pje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gje(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,weights:s}=e,{size:a,binaryOutput:o}=r;if(i.shape.length===1){const l=t.readSync(i.dataId),c=t.readSync(s.dataId),u=Gie(l,c,s.dtype,s.shape,a);return t.makeTensorInfo([a],s.dtype,u)}else if(i.shape.length===2){const l=t.bufferSync(i),c=t.bufferSync(s),u=xGe(l,c,a,o);return t.makeTensorInfo(u.shape,s.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}const yje={kernelName:X4,backendName:"webgl",kernelFunc:gje};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vje{constructor(e,t,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${t};
      int offset_h = imod(h, ${t});
      int in_w = w / ${t};
      int offset_w = imod(w, ${t});
      int offset_d = (offset_h * ${t} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bje(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{blockSize:s,dataFormat:a}=r,o=i.shape[0],l=a==="NHWC"?i.shape[1]:i.shape[2],c=a==="NHWC"?i.shape[2]:i.shape[3],u=a==="NHWC"?i.shape[3]:i.shape[1],d=l*s,h=c*s,p=u/(s*s),g=a==="NHWC"?[o,d,h,p]:[o,p,d,h],v=new vje(g,s,a);return t.runWebGLProgram(v,[i],i.dtype)}const xje={kernelName:K4,backendName:"webgl",kernelFunc:bje};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dse{constructor(e,t=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Oo(this.outputShape.length);const a=e.filterHeight,o=e.filterWidth,l=e.outChannels/e.inChannels;let c="",u="";r&&(i?c=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?c=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:c=`
          float activation(float x) {
            ${r}
          }
        `,u="result = activation(result);");const d=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${c}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${a}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${o}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${u}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fse{constructor(e,t=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Oo(this.outputShape.length);const a=e.outChannels/e.inChannels,o=e.padInfo.left,l=e.strideWidth,c=e.dilationWidth,u=e.filterHeight,d=e.filterWidth,h=d;let p=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let x=0;x<d;x++)p+=`
          vec4 xTexelC${x*2};
          int xTexelC${x*2}Ready;
          vec4 xTexelC${x*2+1};
          int xTexelC${x*2+1}Ready;
          vec4 xC${x};`;p+=`
    for (int r = 0; r < ${u}; r++) {
      `;for(let x=0;x<d;x++)p+=`
          xTexelC${x*2} = vec4(0.0);
          xTexelC${x*2}Ready = 0;
          xTexelC${x*2+1} = vec4(0.0);
          xTexelC${x*2+1}Ready = 0;
          xC${x} = vec4(0.0);`;p+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let x=0;x<(h+1)/2;x++){const C=x*2;if(p+=`
          xC = xCCorner + ${C*c};
          `,l===1){if(C<d&&(o%2===1?(p+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${C}Ready == 0) {
                  xTexelC${C} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${C}.zw = vec2(0.0);
                  }
                  xTexelC${C}Ready = 1;
                }
              `,c===1&&C>0?p+=`
                xC${C} = vec4(xTexelC${C-2}.zw, xTexelC${C}.xy);
                `:p+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${C} = vec4(previous.zw, xTexelC${C}.xy);
                  } else {
                    xC${C} = vec4(0.0, 0.0, xTexelC${C}.xy);
                  }
                  `):p+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${C}Ready == 0) {
                  xTexelC${C} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${C}.zw = vec2(0.0);
                  }
                  xTexelC${C}Ready = 1;
                }

                xC${C} = xTexelC${C};
                `,C+1<d)){const E=o%2===0?k4(c):c;c%2===0&&o%2===1||c%2!==0&&o%2!==1?(p+=`
                  xCOffset = xC + imod(pads[1], 2) + ${E};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${C+1}Ready == 0) {
                    xTexelC${C+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${C+1}.zw = vec2(0.0);
                    }
                    xTexelC${C+1}Ready = 1;
                  }
                  `,c>1?p+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${C+1} = vec4(previous.zw, xTexelC${C+1}.xy);
                    } else {
                     xC${C+1} = vec4(0.0, 0.0, xTexelC${C+1}.xy);
                    }
                    `:p+=`
                    xC${C+1} = vec4(xTexelC${C}.zw, xTexelC${C+1}.xy);
                    `):E===1?p+=`
                    xC${C+1} = xTexelC${C};
                    `:p+=`
                    xCOffset = xC + ${E};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${C+1}Ready == 0) {
                      xTexelC${C+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${C+1}.zw = vec2(0.0);
                      }
                      xTexelC${C+1}Ready = 1;
                    }

                    xC${C+1} = xTexelC${C+1};
                    `}}else C<d&&(o%2===1?(p+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${C}Ready == 0) {
                  xTexelC${C} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${C}.zw = vec2(0.0);
                  }
                  xTexelC${C}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${C+1}Ready == 0) {
                  xTexelC${C+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${C+1}.zw = vec2(0.0);
                  }
                  xTexelC${C+1}Ready = 1;
                }

                xC${C} = vec4(xTexelC${C}.zw, xTexelC${C+1}.zw);
              `,C+1<d&&(p+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${C+1} = vec4(xTexelC${C+1}.xy, final.xy);
                `)):(p+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${C}Ready == 0) {
                  xTexelC${C} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${C}.zw = vec2(0.0);
                  }
                  xTexelC${C}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${C+1}Ready == 0) {
                  xTexelC${C+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${C+1}.zw = vec2(0.);
                  }
                  xTexelC${C+1}Ready = 1;
                }

                xC${C} = vec4(
                  xTexelC${C}.xy, xTexelC${C+1}.xy);
              `,C+1<d&&(p+=`
                  xC${C+1} = vec4(xTexelC${C}.zw, xTexelC${C+1}.zw);
                `)));C<d&&(p+=`
            wTexel = getW(r, ${C}, d1, q);
            dotProd += xC${C} * vec4(wTexel.xz, wTexel.xz);
          `,C+1<d&&(p+=`
              wTexel = getW(r, ${C+1}, d1, q);
              dotProd += xC${C+1} * vec4(wTexel.xz, wTexel.xz);
            `))}p+=`
    }
  `,p+=`
      }
    `;let g="",v="";r&&(i?g=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?g=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:g=`vec4 activation(vec4 x) {
          ${r}
        }`,v="result = activation(result);");const b=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${g}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${a};
        int q = d2 - d1 * ${a};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${p}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${b}
        ${v}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sje(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,filter:s}=e,{strides:a,pad:o,dilations:l,dimRoundingMode:c}=r;let u=l;u==null&&(u=[1,1]),de(oo(a,u),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${a} and dilations '${u}'`);const d=Va(i.shape,s.shape,a,u,o,c,!0);let h;it().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?h=new fse(d):h=new dse(d);const p=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return t.runWebGLProgram(h,[i,s],"float32",p)}const wje={kernelName:ZI,backendName:"webgl",kernelFunc:Sje};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Cje{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,r=e.strideWidth,i=e.padInfo.top,s=e.padInfo.left,a=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${a} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${t} - ${i};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${s};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class _je{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,r=e.filterWidth,i=e.strideHeight,s=e.strideWidth,a=t-1-e.padInfo.top,o=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${t}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${t} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eje(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,dy:s}=e,{strides:a,dilations:o,pad:l,dimRoundingMode:c,filterShape:u}=r,d=Va(i.shape,u,a,o,l,c,!0),h=new Cje(d);return t.runWebGLProgram(h,[i,s],"float32")}const Aje={kernelName:Y4,backendName:"webgl",kernelFunc:Eje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tje(n){const{inputs:e,backend:t,attrs:r}=n,{dy:i,filter:s}=e,{strides:a,dilations:o,pad:l,dimRoundingMode:c,inputShape:u}=r,d=Va(u,s.shape,a,o,l,c,!0),h=new _je(d);return t.runWebGLProgram(h,[i,s],"float32")}const Mje={kernelName:J4,backendName:"webgl",kernelFunc:Tje};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Rje{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nje(n){const{inputs:e,backend:t}=n,{x:r}=e,i=[...r.shape,...r.shape],s=xt(r.shape),a=rn({inputs:{x:r},backend:t,attrs:{shape:[s]}}),o=new Rje(s),l=t.runWebGLProgram(o,[a],a.dtype),c=rn({inputs:{x:l},backend:t,attrs:{shape:i}});return t.disposeIntermediateTensorInfo(a),t.disposeIntermediateTensorInfo(l),c}const Ije={kernelName:Z4,backendName:"webgl",kernelFunc:Nje};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Dje{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:t,inWidth:r,padInfo:i,strideHeight:s,strideWidth:a,filterHeight:o,filterWidth:l,dilationHeight:c,dilationWidth:u}=e,{top:d,left:h}=i;this.userCode=`
      const ivec2 strides = ivec2(${s}, ${a});
      const ivec2 pads = ivec2(${d}, ${h});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${o}; h++) {
          int hIn = hBeg + h * ${c};

          if (hIn >= 0 && hIn < ${t}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${u};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kje(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,filter:s}=e,{strides:a,pad:o,dilations:l}=r,c=zE(i.shape,s.shape,a,o,"NHWC",l);let u;const d=new Dje(c);u=t.runWebGLProgram(d,[i,s],"float32");const h=rn({inputs:{x:u},backend:t,attrs:{shape:c.outShape}});return t.disposeIntermediateTensorInfo(u),h}const Oje={kernelName:QI,backendName:"webgl",kernelFunc:kje};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bje(n){const{inputs:e,backend:t,attrs:r}=n,{equation:i}=r,s=e,{allDims:a,summedDims:o,idDims:l}=qz(i,s.length);Kz(a.length,l,s);const{path:c,steps:u}=Yz(o,l),d=u.length;let h=null,p=a.length;const g=[];for(let v=0;v<d;++v){for(const b of u[v]){const{permutationIndices:x,expandDims:C}=Xz(p,l[b]);let E;Jz(x)?E=s[b]:(E=rl({inputs:{x:s[b]},backend:t,attrs:{perm:x}}),g.push(E));const _=E.shape.slice();for(let M=0;M<C.length;++M)_.splice(C[M],0,1);Vr(E.shape,_)||(E=rn({inputs:{x:E},backend:t,attrs:{shape:_}}),g.push(E)),h===null?h=E:(h=F5({inputs:{a:E,b:h},backend:t}),g.push(h))}v<d-1&&(c[v]>=0&&(h=M3({inputs:{x:h},backend:t,attrs:{axis:c[v]-(a.length-p),keepDims:!1}}),g.push(h)),p--)}for(const v of g)v!==h&&t.disposeIntermediateTensorInfo(v);return h}const $je={kernelName:Q4,backendName:"webgl",kernelFunc:Bje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lje="return (x >= 0.0) ? x : (exp(x) - 1.0);",Fje=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Pje=ti({opSnippet:Lje,packedOpSnippet:Fje}),Uje={kernelName:iE,backendName:"webgl",kernelFunc:Pje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zje="return (b >= 0.0) ? a : a * (b + 1.0);",Hje=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,Vje=n=>{const{inputs:e,backend:t}=n,{dy:r,y:i}=e,s=it().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new tS(Hje,r.shape,i.shape):new bv(zje,r.shape,i.shape);return t.runWebGLProgram(s,[r,i],r.dtype)},Gje={kernelName:eU,backendName:"webgl",kernelFunc:Vje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wje=`
  return vec4(equal(a, b));
`,jje="return float(a == b);",qje=uo({opSnippet:jje,packedOpSnippet:Wje,dtype:"bool",cpuKernelImpl:EGe}),Xje={kernelName:eD,backendName:"webgl",kernelFunc:qje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kje=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${Uz};
  float a1 = ${zz};
  float a2 = ${Hz};
  float a3 = ${Vz};
  float a4 = ${Gz};
  float a5 = ${Wz};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,Yje=ti({opSnippet:Kje}),Jje={kernelName:sE,backendName:"webgl",kernelFunc:Yje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zje=nS+`
  return exp(x);
`,Qje=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,hse=ti({opSnippet:Zje,packedOpSnippet:Qje,cpuKernelImpl:AGe,dtype:"float32"}),eqe={kernelName:aE,backendName:"webgl",kernelFunc:hse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _F(n){const{inputs:e,attrs:t,backend:r}=n,{dim:i}=t,{input:s}=e,a=s.shape.length,o=s.shape.slice();let l=i;return i<0&&(de(-(a+1)<=i,()=>`Axis must be in the interval [${-(a+1)}, ${a}]`),l=a+i+1),o.splice(l,0,1),rn({inputs:{x:s},backend:r,attrs:{shape:o}})}const tqe={kernelName:tD,backendName:"webgl",kernelFunc:_F};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $7="return exp(x) - 1.0;",nqe=ti({opSnippet:$7,packedOpSnippet:$7,cpuKernelImpl:TGe}),rqe={kernelName:oE,backendName:"webgl",kernelFunc:nqe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class L7{constructor(e,t,r){this.variableNames=["real","imag"];const i=t[1];this.outputShape=t;const s=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,a=r?`${i}.0`:"1.0";let o;if(e==="real")o="return real * expR - imag * expI;";else if(e==="imag")o="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${s};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${o}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${i});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${i}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${a};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pse(n,e,t){const r=t.texData.get(n.dataId),i=xt(n.shape),s=n.shape[n.shape.length-1],a=i/s,o=rn({inputs:{x:n},backend:t,attrs:{shape:[a,s]}}),l=o.shape,c=new L7("real",l,e),u=new L7("imag",l,e),d=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],h=t.runWebGLProgram(c,d,"float32"),p=t.runWebGLProgram(u,d,"float32"),g=Qg({inputs:{real:h,imag:p},backend:t});t.disposeIntermediateTensorInfo(h),t.disposeIntermediateTensorInfo(p);const v=rn({inputs:{x:g},backend:t,attrs:{shape:n.shape}});return t.disposeIntermediateTensorInfo(o),t.disposeIntermediateTensorInfo(g),v}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iqe(n){const{inputs:e,backend:t}=n,{input:r}=e;return pse(r,!1,t)}const sqe={kernelName:tU,backendName:"webgl",kernelFunc:iqe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aqe{constructor(e,t){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u2(n){const{backend:e,attrs:t}=n,{shape:r,value:i}=t;let{dtype:s}=t;if(s=s||z1(i),s==="string"){const a=js(s,xt(r));return a.fill(i),e.makeTensorInfo(r,s,a)}else{const a=new aqe(r,i),o=[[i]];return e.runWebGLProgram(a,[],s,o)}}const oqe={kernelName:nU,backendName:"webgl",kernelFunc:u2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lqe{constructor(e){this.variableNames=["Image"],this.outputShape=[];const t=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${t} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${t}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cqe={kernelName:rU,backendName:"webgl",kernelFunc:({inputs:n,backend:e})=>{const{image:t}=n,r=e,i=new lqe(t.shape);return r.runWebGLProgram(i,[t],t.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F7="return floor(x);",uqe=ti({opSnippet:F7,packedOpSnippet:F7,cpuKernelImpl:MGe}),dqe={kernelName:lE,backendName:"webgl",kernelFunc:uqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fqe=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,hqe=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,pqe=uo({opSnippet:fqe,packedOpSnippet:hqe,dtype:"int32"}),mqe={kernelName:cE,backendName:"webgl",kernelFunc:pqe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gqe{constructor(e){this.variableNames=["A"];const t=ol(),[r,i]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${i}.0, ${r}.0);

        vec4 values = ${t.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yqe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const t=ol(),[r,i]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${i}.0, ${r}.0);
            vec4 values = ${t.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${t.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vqe={kernelName:kL,backendName:"webgl",kernelFunc:bqe};let px,e$=it().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function bqe(n){const{inputs:e,backend:t,attrs:r}=n;let{pixels:i}=e;const{numChannels:s}=r,a=typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement,o=typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement,[l,c]=a?[i.videoWidth,i.videoHeight]:[i.width,i.height],u=[c,l],d=[c,l,s];if(o||a){const v=it().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(px==null||v!==e$)&&(e$=v,px=document.createElement("canvas").getContext("2d",{willReadFrequently:e$})),px.canvas.width=l,px.canvas.height=c,px.drawImage(i,0,0,l,c),i=px.canvas}const h=t.makeTensorInfo(u,"int32");t.texData.get(h.dataId).usage=Qc.PIXELS,t.gpgpu.uploadPixelDataToTexture(t.getTexture(h.dataId),i);const p=it().getBool("WEBGL_PACK")?new yqe(d):new gqe(d),g=t.runWebGLProgram(p,[h],"int32");return t.disposeData(h.dataId),g}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xqe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,filter:s,bias:a,preluActivationWeights:o}=e,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h,activation:p,leakyreluAlpha:g}=r,v=em(u),b=Va(i.shape,s.shape,l,d,c,h,!1,v);let x;const C=[],E=a!=null,_=o!=null,M=p==="leakyrelu",R=()=>{const $=[i,s],N=(I,k)=>{if(k==="NCHW"&&I.shape.length===1&&I.shape[0]!==1){const P=rn({inputs:{x:I},backend:t,attrs:{shape:[I.shape[0],1,1]}});return C.push(P),P}return I};if(E&&$.push(N(a,u)),_&&$.push(N(o,u)),M){const I=t.makeTensorInfo([],"float32",Vg(g,"float32"));$.push(I),C.push(I)}return $};if(b.filterHeight===1&&b.filterWidth===1&&b.dilationHeight===1&&b.dilationWidth===1&&b.strideHeight===1&&b.strideWidth===1&&(b.padInfo.type==="SAME"||b.padInfo.type==="VALID"))x=lse({x:i,filter:s,convInfo:b,backend:t,bias:a,activation:p,preluActivationWeights:o,leakyreluAlpha:g});else if(b.strideWidth<=2&&v==="channelsLast"&&it().getBool("WEBGL_EXP_CONV")){const $=p?s_(p,!0):null,N=new ose(b,E,$,_,M),I=[[b.padInfo.top,b.padInfo.left],[b.strideHeight,b.strideWidth],[b.dilationHeight,b.dilationWidth],[b.inHeight,b.inWidth]],k=R();x=t.runWebGLProgram(N,k,"float32",I)}else if(it().getBool("WEBGL_CONV_IM2COL"))x=cse({x:i,filter:s,convInfo:b,backend:t,bias:a,activation:p,preluActivationWeights:o,leakyreluAlpha:g});else{const $=p?s_(p,!1):null,N=new ase(b,E,$,_,M),I=R();x=t.runWebGLProgram(N,I,"float32")}const L=rn({inputs:{x},backend:t,attrs:{shape:b.outShape}});return C.push(x),C.forEach($=>t.disposeIntermediateTensorInfo($)),L}const Sqe={kernelName:QR,backendName:"webgl",kernelFunc:xqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wqe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,filter:s,bias:a,preluActivationWeights:o}=e,{strides:l,pad:c,dilations:u,dimRoundingMode:d,activation:h,leakyreluAlpha:p}=r,g=[];let v=u;v==null&&(v=[1,1]),de(oo(l,v),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${v}'`);const b=Va(i.shape,s.shape,l,v,c,d,!0),x=it().getBool("WEBGL_PACK_DEPTHWISECONV")&&b.strideWidth<=2&&b.outChannels/b.inChannels===1,C=h?s_(h,x):null,E=[i,s],_=a!=null,M=o!=null,R=h==="leakyrelu";if(_&&E.push(a),M&&E.push(o),R){const I=t.makeTensorInfo([],"float32",Vg(p,"float32"));E.push(I),g.push(I)}let L;x?L=new fse(b,_,C,M,R):L=new dse(b,_,C,M,R);const $=[[b.padInfo.top,b.padInfo.left],[b.strideHeight,b.strideWidth],[b.dilationHeight,b.dilationWidth],[b.inHeight,b.inWidth]],N=t.runWebGLProgram(L,E,"float32",$);return g.forEach(I=>t.disposeIntermediateTensorInfo(I)),N}const Cqe={kernelName:eN,backendName:"webgl",kernelFunc:wqe};class _qe{constructor(e,t,r,i){this.sliceDim=e,this.strides=t,this.paramsShape=i,this.variableNames=["x","indices"],this.outputShape=r;const s=Li(r.length);let a=`
    int index;`;for(let o=0;o<this.sliceDim;o++)a+=`
          index = round(getIndices(coords[0], ${o}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[o]};
          flattenIndex += index * ${this.strides[o]};`;this.userCode=`
         void main() {
          ${s} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${a}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eqe(n){const{inputs:e,backend:t}=n,{params:r,indices:i}=e,s=i.shape,a=s[s.length-1],o=xt(r.shape),[l,c,u,d]=Rz(r,i),h=rn({inputs:{x:i},backend:t,attrs:{shape:[c,a]}}),p=rn({inputs:{x:r},backend:t,attrs:{shape:[xt(r.shape)/u,u]}});if(t.shouldExecuteOnCPU([r,i])||r.dtype==="string"){const x=t.readSync(i.dataId),C=t.bufferSync(r),E=RGe(x,C,r.dtype,c,a,u,d,r.shape,o);return t.makeTensorInfo(l,r.dtype,E.values)}const g=new _qe(a,d,[c,u],r.shape),v=t.runWebGLProgram(g,[p,h],p.dtype),b=rn({inputs:{x:v},backend:t,attrs:{shape:l}});return t.disposeIntermediateTensorInfo(h),t.disposeIntermediateTensorInfo(p),t.disposeIntermediateTensorInfo(v),b}const Aqe={kernelName:iU,backendName:"webgl",kernelFunc:Eqe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Tqe{constructor(e,t){this.variableNames=["A","indices"],this.outputShape=t,this.rank=t.length;const r=Li(this.rank),i=Mqe(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${i}));
      }
    `}}function Mqe(n,e){const t=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let i=0;i<n.length;i++)i===2?r.push("index"):r.push(`${t[i]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mse(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,indices:s}=e,{axis:a,batchDims:o}=r,l=Ir(a,i.shape)[0];if(it().get("DEBUG")){const C=t.readSync(s.dataId),E=i.shape[l];for(let _=0;_<C.length;++_){const M=C[_];de(M<=E-1&&M>=0,()=>`GatherV2: the index value ${M} is not in [0, ${E-1}]`)}}const c=Qz(i,s,l,o),u=xt(s.shape),d=[],h=rn({inputs:{x:i},backend:t,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),p=rn({inputs:{x:s},backend:t,attrs:{shape:[c.batchSize,u/c.batchSize]}});d.push(h),d.push(p);const g=[c.batchSize,c.outerSize,u/c.batchSize,c.sliceSize];if(t.shouldExecuteOnCPU([i,s])||i.dtype==="string"){const C=t.bufferSync(p),E=t.bufferSync(h),_=NGe(E,C,g);return d.forEach(M=>t.disposeIntermediateTensorInfo(M)),t.makeTensorInfo(c.outputShape,_.dtype,_.values)}const v=new Tqe(h.shape,g),b=t.runWebGLProgram(v,[h,p],h.dtype);d.push(b);const x=rn({inputs:{x:b},backend:t,attrs:{shape:c.outputShape}});return d.forEach(C=>t.disposeIntermediateTensorInfo(C)),x}const Rqe={kernelName:rD,backendName:"webgl",kernelFunc:mse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nqe="return float(a > b);",Iqe=`
  return vec4(greaterThan(a, b));
`,Dqe=uo({opSnippet:Nqe,packedOpSnippet:Iqe,cpuKernelImpl:IGe,dtype:"bool"}),kqe={kernelName:iD,backendName:"webgl",kernelFunc:Dqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oqe="return float(a >= b);",Bqe=`
  return vec4(greaterThanEqual(a, b));
`,$qe=uo({opSnippet:Oqe,packedOpSnippet:Bqe,dtype:"bool",cpuKernelImpl:DGe}),Lqe={kernelName:uE,backendName:"webgl",kernelFunc:$qe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fqe(n){const{inputs:e,backend:t}=n,{input:r}=e;return pse(r,!0,t)}const Pqe={kernelName:sU,backendName:"webgl",kernelFunc:Fqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uqe="return float(!isnan(x) && !isinf(x));",zqe=ti({opSnippet:Uqe,dtype:"bool"}),Hqe={kernelName:fE,backendName:"webgl",kernelFunc:zqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vqe="return float(isinf(x));",Gqe=ti({opSnippet:Vqe,dtype:"bool"}),Wqe={kernelName:hE,backendName:"webgl",kernelFunc:Gqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jqe="return float(isnan(x));",qqe=ti({opSnippet:jqe,dtype:"bool"}),Xqe={kernelName:pE,backendName:"webgl",kernelFunc:qqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kqe="return float(a < b);",Yqe=`
  return vec4(lessThan(a, b));
`,Jqe=uo({opSnippet:Kqe,packedOpSnippet:Yqe,cpuKernelImpl:kGe,dtype:"bool"}),Zqe={kernelName:aD,backendName:"webgl",kernelFunc:Jqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qqe="return float(a <= b);",eXe=`
  return vec4(lessThanEqual(a, b));
`,tXe=uo({opSnippet:Qqe,packedOpSnippet:eXe,cpuKernelImpl:OGe,dtype:"bool"}),nXe={kernelName:oD,backendName:"webgl",kernelFunc:tXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rXe(n){const{backend:e,attrs:t}=n,{start:r,stop:i,num:s}=t,a=BGe(r,i,s);return e.makeTensorInfo([a.length],"float32",a)}const iXe={kernelName:oU,backendName:"webgl",kernelFunc:rXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sXe=nS+`
  return x < 0.0 ? 0./0. : log(x);
`,aXe=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,oXe=ti({opSnippet:sXe,packedOpSnippet:aXe,cpuKernelImpl:$Ge}),lXe={kernelName:mE,backendName:"webgl",kernelFunc:oXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cXe=nS+`
  return log(1.0 + x);
`,uXe=ti({opSnippet:cXe}),dXe={kernelName:gE,backendName:"webgl",kernelFunc:uXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fXe="return float(a >= 1.0 && b >= 1.0);",hXe=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,pXe=uo({opSnippet:fXe,packedOpSnippet:hXe,dtype:"bool"}),mXe={kernelName:lD,backendName:"webgl",kernelFunc:pXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gXe="return float(!(x >= 1.0));",yXe=ti({opSnippet:gXe}),vXe={kernelName:cD,backendName:"webgl",kernelFunc:yXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bXe="return float(a >= 1.0 || b >= 1.0);",xXe=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,SXe=uo({opSnippet:bXe,packedOpSnippet:xXe,dtype:"bool"}),wXe={kernelName:uD,backendName:"webgl",kernelFunc:SXe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CXe{constructor(e,t,r,i,s){this.variableNames=["x"],this.outputShape=[];const a=t,o=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${i}) * sum`;s===.5?l=`inversesqrt(${c})`:s===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${a}; j <= ${a}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${o}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _Xe{constructor(e,t,r,i,s){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const a=t,o=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${i}) * sum`;s===.5?l=`inversesqrt(${c})`:s===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${a};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${a}; j <= ${a}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${o}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EXe=n=>{const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{depthRadius:s,bias:a,alpha:o,beta:l}=r,c=it().getBool("WEBGL_PACK_NORMALIZATION")?new _Xe(i.shape,s,a,o,l):new CXe(i.shape,s,a,o,l);return t.runWebGLProgram(c,[i],i.dtype)},AXe={kernelName:dD,backendName:"webgl",kernelFunc:EXe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TXe{constructor(e,t,r,i,s){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=r,this.alpha=i,this.beta=s,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${t})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${t} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${i}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${i})
                * float(${s})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${s});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MXe=n=>{const{inputs:e,backend:t,attrs:r}=n,{x:i,y:s,dy:a}=e,{depthRadius:o,bias:l,alpha:c,beta:u}=r,d=new TXe(i.shape,o,l,c,u);return t.runWebGLProgram(d,[i,s,a],i.dtype)},RXe={kernelName:lU,backendName:"webgl",kernelFunc:MXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NXe(n,e,t,r){const i=xt(e),a=xt(n.shape)/i,o=rn({inputs:{x:n},attrs:{shape:[a,i]},backend:r}),l=$v(o,n.dtype,"max",r),c=rn({inputs:{x:l},attrs:{shape:t},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gse(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{reductionIndices:s,keepDims:a}=r,o=i.shape.length,l=Ir(s,i.shape);let c=l;const u=ws(c,o),d=u!=null,h=t.shouldExecuteOnCPU([i]);let p=i;if(d){if(h){const E=t.texData.get(p.dataId).values,_=new Array(o);for(let L=0;L<_.length;L++)_[L]=i.shape[u[L]];const M=$5(E,i.shape,i.dtype,u,_);p=t.makeTensorInfo(_,i.dtype);const R=t.texData.get(p.dataId);R.values=M}else p=T3(i,u,t);c=Ys(c.length,o)}lo("max",c,o);const[g,v]=Ga(p.shape,c);let b=g;a&&(b=Xs(g,l));let x;if(h){const E=t.texData.get(p.dataId).values,_=LGe(E,xt(v),b,i.dtype);x=t.makeTensorInfo(b,i.dtype);const M=t.texData.get(x.dataId);M.values=_}else x=NXe(p,v,b,t);return d&&t.disposeIntermediateTensorInfo(p),x}const IXe={kernelName:fD,backendName:"webgl",kernelFunc:gse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DXe=L5+`
  return max(a, b);
`,kXe=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Bv+`
  return result;
`,OXe=uo({opSnippet:DXe,packedOpSnippet:kXe,cpuKernelImpl:FGe}),BXe={kernelName:yE,backendName:"webgl",kernelFunc:OXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Xe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e;o2(i,"maxPool");const{filterSize:s,strides:a,pad:o,dimRoundingMode:l}=r,c=1;de(oo(a,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);const u=ed(i.shape,s,a,c,o,l);if(u.filterWidth===1&&u.filterHeight===1&&Vr(u.inShape,u.outShape))return Tc({inputs:{x:i},backend:t});const d=new a_(u,"max",!1);return t.runWebGLProgram(d,[i],i.dtype)}const LXe={kernelName:hD,backendName:"webgl",kernelFunc:$Xe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FXe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{filterSize:s,strides:a,pad:o,dataFormat:l,dimRoundingMode:c}=r,u=[1,1,1],d=Qp(i.shape,s,a,u,o,c,l),h=new P5(d,"max",!1);return t.runWebGLProgram(h,[i],i.dtype)}const PXe={kernelName:pD,backendName:"webgl",kernelFunc:FXe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UXe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideHeight,r=e.strideWidth,i=e.dilationHeight,s=e.effectiveFilterHeight,a=e.effectiveFilterWidth,o=s-1-e.padInfo.top,l=a-1-e.padInfo.left,c=s*a-1;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${s};
          wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${t}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${a}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${c} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${a} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class zXe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideDepth,r=e.strideHeight,i=e.strideWidth,s=e.dilationDepth,a=e.dilationHeight,o=e.dilationWidth,l=e.effectiveFilterDepth,c=e.effectiveFilterHeight,u=e.effectiveFilterWidth,d=l-1-e.padInfo.front,h=c-1-e.padInfo.top,p=u-1-e.padInfo.left,g=l*c*u-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${h}, ${p});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${s}) {
          float dyD = float(dyDCorner + wD) / ${t}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${c};
              wR += ${a}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${u};
                wC += ${o}) {
              float dyC = float(dyCCorner + wC) / ${i}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${g} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${c} * ${u} +
                  wR * ${u} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HXe(n){const{inputs:e,backend:t,attrs:r}=n,{dy:i,input:s}=e,a=s,{filterSize:o,strides:l,pad:c,dimRoundingMode:u}=r,d=[1,1,1],h=Qp(a.shape,o,l,d,c,u),p=new P5(h,"max",!0),g=t.runWebGLProgram(p,[a],a.dtype),v=new zXe(h),b=t.runWebGLProgram(v,[i,g],a.dtype);return t.disposeIntermediateTensorInfo(g),b}const VXe={kernelName:uU,backendName:"webgl",kernelFunc:HXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GXe(n){const{inputs:e,backend:t,attrs:r}=n,{dy:i,input:s,output:a}=e,o=s;o2([s,a],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=r,h=ed(o.shape,l,c,1,u,d),p=!0,g=new a_(h,"max",p),v=t.runWebGLProgram(g,[o],o.dtype),b=new UXe(h),x=t.runWebGLProgram(b,[i,v],o.dtype);return t.disposeIntermediateTensorInfo(v),x}const WXe={kernelName:cU,backendName:"webgl",kernelFunc:GXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jXe(n,e,t,r){let i=new a_(t,"max",!1);const s=r.runWebGLProgram(i,[n],"float32");i=new a_(t,"max",!0,!0,e);const a=r.runWebGLProgram(i,[n],"float32");return[s,a]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qXe={kernelName:dU,backendName:"webgl",kernelFunc:({inputs:n,attrs:e,backend:t})=>{const{x:r}=n,{filterSize:i,strides:s,pad:a,includeBatchInIndex:o}=e,l=t;de(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const c=[1,1];de(oo(s,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);const u=ed(r.shape,i,s,c,a),[d,h]=jXe(r,o,u,l);return[d,h]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XXe(n,e,t,r){const i=xt(e),a=xt(n.shape)/i,o=rn({inputs:{x:n},attrs:{shape:[a,i]},backend:r}),l=$v(o,"float32","mean",r),c=rn({inputs:{x:l},attrs:{shape:t},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KXe={kernelName:mD,backendName:"webgl",kernelFunc:({inputs:n,attrs:e,backend:t})=>{const{x:r}=n,{keepDims:i,axis:s}=e,a=t,o=r.shape.length,l=Ir(s,r.shape);let c=l;const u=ws(c,o),d=u!=null,h=a.shouldExecuteOnCPU([r]),p=[];let g=r;if(d){if(h){const _=a.texData.get(g.dataId).values,M=new Array(o);for(let $=0;$<M.length;$++)M[$]=r.shape[u[$]];const R=$5(_,r.shape,r.dtype,u,M);g=a.makeTensorInfo(M,r.dtype);const L=a.texData.get(g.dataId);L.values=R}else g=T3(r,u,a);p.push(g),c=Ys(c.length,o)}lo("sum",c,o);const[v,b]=Ga(g.shape,c);let x=v;i&&(x=Xs(v,l));const C=XXe(g,b,x,a);for(const E of p)a.disposeIntermediateTensorInfo(E);return C}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YXe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{axis:s,keepDims:a}=r,o=i.shape.length,l=Ir(s,i.shape);let c=l;const u=ws(c,o);let d=i;u!=null&&(d=rl({inputs:{x:i},backend:t,attrs:{perm:u}}),c=Ys(c.length,i.shape.length)),lo("min",c,o);const[h,p]=Ga(d.shape,c),g=xt(p),v=rn({inputs:{x:d},backend:t,attrs:{shape:[-1,g]}}),b=$v(v,v.dtype,"min",t);let x;if(a){const C=Xs(h,l);x=rn({inputs:{x:b},backend:t,attrs:{shape:C}})}else x=rn({inputs:{x:b},backend:t,attrs:{shape:h}});return t.disposeIntermediateTensorInfo(v),t.disposeIntermediateTensorInfo(b),u!=null&&t.disposeIntermediateTensorInfo(d),x}const JXe={kernelName:gD,backendName:"webgl",kernelFunc:YXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZXe=L5+`
  return min(a, b);
`,QXe=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Bv+`
  return result;
`,eKe=uo({opSnippet:ZXe,packedOpSnippet:QXe,cpuKernelImpl:PGe}),tKe={kernelName:vE,backendName:"webgl",kernelFunc:eKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nKe{constructor(e,t,r){this.variableNames=["x"],this.outputShape=t.map((u,d)=>u[0]+e[d]+u[1]);const i=e.length,s=Li(i),a=t.map(u=>u[0]).join(","),o=t.map((u,d)=>u[0]+e[d]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i),c=r==="reflect"?0:1;if(i===1){this.userCode=`
        int start = ${a};
        int end = ${o};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${c};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${c};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${a});
      ${s} end = ${s}(${o});

      void main() {
        ${s} outC = getOutputCoords();
        for (int i = 0; i < ${i}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${c};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};
          }
        }
        ${s} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rKe{constructor(e,t,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map((g,v)=>g[0]+e[v]+g[1]);const i=e.length,s=Li(i),a=t.map(g=>g[0]).join(","),o=t.map((g,v)=>g[0]+e[v]).join(","),l=Qo("rc",i),c=Qo("source",i),u=`${l[i-1]} < ${this.outputShape[i-1]}`,d=i===1?"source":`vec2(${c.slice(-2).join()})`,h=r==="reflect"?0:1;let p="";if(i===1){const g=`
        ${s} source = rc;
        if (source < start) {
          source = start * 2 - source - ${h};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${h};
        }
        source -= start;
      `;p=`
        ${s} rc = outputLoc;
        ${g}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[i-1]} += 1;
        if(${u}) {
          ${g}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
      `}else{const g=`
        ${s} source = rc;
        ${s} lt = ${s}(lessThan(source, start));
        ${s} gte = ${s}(greaterThanEqual(source, end));
        ${s} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${h}) +
                gte * ((end - 1) * 2 - source + ${h});
        source -= start;
      `;p=`
        ${s} rc = outputLoc;
        ${g}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[i-1]} += 1;
        if(${u}) {
          ${g}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
        rc = outputLoc;
        ${l[i-2]} += 1;
        if(${l[i-2]} < ${this.outputShape[i-2]}) {
          ${g}
          result[2] = getChannel(getX(${c.join()}), ${d});
          ${l[i-1]} += 1;
          if(${u}) {
            ${g}
            result[3] = getChannel(getX(${c.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${s} start = ${s}(${a});
      const ${s} end = ${s}(${o});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${p}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iKe=({inputs:n,backend:e,attrs:t})=>{const{x:r}=n,{paddings:i,mode:s}=t,a=it().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new rKe(r.shape,i,s):new nKe(r.shape,i,s);return e.runWebGLProgram(a,[r],r.dtype)},sKe={kernelName:yD,backendName:"webgl",kernelFunc:iKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aKe=`if (b == 0.0) return NAN;
  return mod(a, b);`,oKe=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+Bv+`
  return result;
`,lKe=uo({opSnippet:aKe,packedOpSnippet:oKe}),cKe={kernelName:bE,backendName:"webgl",kernelFunc:lKe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uKe{constructor(e,t,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${t-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${t-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dKe=`
if (a == b) {
  return 1.0;
};
return a / b;`,fKe=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,yse=uo({opSnippet:dKe,packedOpSnippet:fKe,checkOutOfBounds:!0}),hKe={kernelName:rE,backendName:"webgl",kernelFunc:yse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P7="return a - b;",vse=uo({opSnippet:P7,packedOpSnippet:P7,supportsComplex:!0,cpuKernelImpl:a9e}),pKe={kernelName:BE,backendName:"webgl",kernelFunc:vse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bse(n){const{inputs:e,backend:t,attrs:r}=n,{logits:i}=e,{dim:s}=r,a=Ir([s],i.shape),o=gse({inputs:{x:i},backend:t,attrs:{reductionIndices:a,keepDims:!1}}),l=Xs(o.shape,a),c=rn({inputs:{x:o},backend:t,attrs:{shape:l}}),u=vse({inputs:{a:i,b:c},backend:t}),d=hse({inputs:{x:u},backend:t}),h=M3({inputs:{x:d},backend:t,attrs:{axis:a,keepDims:!1}}),p=rn({inputs:{x:h},backend:t,attrs:{shape:l}}),g=yse({inputs:{a:d,b:p},backend:t});return t.disposeIntermediateTensorInfo(o),t.disposeIntermediateTensorInfo(c),t.disposeIntermediateTensorInfo(u),t.disposeIntermediateTensorInfo(d),t.disposeIntermediateTensorInfo(h),t.disposeIntermediateTensorInfo(p),g}const mKe={kernelName:BD,backendName:"webgl",kernelFunc:bse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gKe(n){const{inputs:e,backend:t,attrs:r}=n,{logits:i}=e,{numSamples:s,seed:a,normalized:o}=r,l=o?i:bse({inputs:{logits:i},backend:t,attrs:{dim:i.shape.length-1}}),c=l.shape[0],u=l.shape[1],d=new uKe(c,u,s),h=[[a]],p=t.runWebGLProgram(d,[l],"int32",h);return o||t.disposeIntermediateTensorInfo(l),p}const yKe={kernelName:fU,backendName:"webgl",kernelFunc:gKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vKe=nd+`
  return -x;
`,bKe=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function xKe(n){const{inputs:e,backend:t}=n,{x:r}=e;if(t.shouldExecuteOnCPU([r])){const s=t.texData.get(r.dataId),[a,o]=zGe(s.values,r.shape,r.dtype);return t.makeTensorInfo(o,r.dtype,a)}let i;return it().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new ug(r.shape,bKe):i=new ch(r.shape,vKe),t.runWebGLProgram(i,[r],r.dtype)}const SKe={kernelName:vD,backendName:"webgl",kernelFunc:xKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wKe=wz;function CKe(n){Kc("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:t,attrs:r}=n,{boxes:i,scores:s}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l}=r,c=t.readSync(i.dataId),u=t.readSync(s.dataId),{selectedIndices:d}=wKe(c,u,a,o,l);return t.makeTensorInfo([d.length],"int32",new Int32Array(d))}const _Ke={kernelName:hU,backendName:"webgl",kernelFunc:CKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EKe=Cz;function AKe(n){Kc("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:t,attrs:r}=n,{boxes:i,scores:s}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:c}=r,u=t.readSync(i.dataId),d=t.readSync(s.dataId),{selectedIndices:h,validOutputs:p}=EKe(u,d,a,o,l,c);return[t.makeTensorInfo([h.length],"int32",new Int32Array(h)),t.makeTensorInfo([],"int32",new Int32Array([p]))]}const TKe={kernelName:pU,backendName:"webgl",kernelFunc:AKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MKe=_z;function RKe(n){Kc("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:t,attrs:r}=n,{boxes:i,scores:s}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l,softNmsSigma:c}=r,u=t.readSync(i.dataId),d=t.readSync(s.dataId),h=a,p=o,g=l,v=c,{selectedIndices:b,selectedScores:x}=MKe(u,d,h,p,g,v);return[t.makeTensorInfo([b.length],"int32",new Int32Array(b)),t.makeTensorInfo([x.length],"float32",new Float32Array(x))]}const NKe={kernelName:mU,backendName:"webgl",kernelFunc:RKe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IKe{constructor(e,t,r,i){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${i}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DKe=n=>{const{inputs:e,backend:t,attrs:r}=n,{indices:i}=e,{dtype:s,depth:a,onValue:o,offValue:l}=r,c=xt(i.shape),u=new IKe(c,a,o,l),d=rn({inputs:{x:i},backend:t,attrs:{shape:[c]}}),h=t.runWebGLProgram(u,[d],s);t.disposeIntermediateTensorInfo(d);const p=[...i.shape,a],g=rn({inputs:{x:h},backend:t,attrs:{shape:p}});return t.disposeIntermediateTensorInfo(h),g},kKe={kernelName:SD,backendName:"webgl",kernelFunc:DKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EN(n){const{inputs:e,backend:t}=n,{x:r}=e;if(r.dtype==="complex64"){const i=c2({inputs:{input:r},backend:t}),s=EN({inputs:{x:i},backend:t}),a=R3({inputs:{input:r},backend:t}),o=EN({inputs:{x:a},backend:t}),l=Qg({inputs:{real:s,imag:o},backend:t});return t.disposeIntermediateTensorInfo(i),t.disposeIntermediateTensorInfo(s),t.disposeIntermediateTensorInfo(a),t.disposeIntermediateTensorInfo(o),l}else return u2({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:t})}const OKe={kernelName:PD,backendName:"webgl",kernelFunc:EN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xse(n){const{inputs:e,backend:t}=n,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const i=c2({inputs:{input:r},backend:t}),s=xse({inputs:{x:i},backend:t}),a=R3({inputs:{input:r},backend:t}),o=EN({inputs:{x:a},backend:t}),l=Qg({inputs:{real:s,imag:o},backend:t});return t.disposeIntermediateTensorInfo(i),t.disposeIntermediateTensorInfo(s),t.disposeIntermediateTensorInfo(a),t.disposeIntermediateTensorInfo(o),l}else return u2({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:t})}const BKe={kernelName:xD,backendName:"webgl",kernelFunc:xse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ke(n){const{inputs:e,backend:t,attrs:r}=n,{axis:i}=r;if(e.length===1)return _F({inputs:{input:e[0]},backend:t,attrs:{dim:i}});const s=e[0].shape,a=e[0].dtype;e.forEach(u=>{Rc(s,u.shape,"All tensors passed to stack must have matching shapes"),de(a===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],l=e.map(u=>{const d=_F({inputs:{input:u},backend:t,attrs:{dim:i}});return o.push(d),d}),c=sse({inputs:l,backend:t,attrs:{axis:i}});return o.forEach(u=>t.disposeIntermediateTensorInfo(u)),c}const LKe={kernelName:wD,backendName:"webgl",kernelFunc:$Ke};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FKe{constructor(e,t,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map((c,u)=>c[0]+e[u]+c[1]);const i=e.length,s=Li(i),a=t.map(c=>c[0]).join(","),o=t.map((c,u)=>c[0]+e[u]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i);if(i===1){this.userCode=`
        int start = ${a};
        int end = ${o};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${a});
      ${s} end = ${s}(${o});

      void main() {
        ${s} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${s} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PKe{constructor(e,t,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map((v,b)=>v[0]+e[b]+v[1]);const i=e.length,s=Li(i),a=t.map(v=>v[0]).join(","),o=t.map((v,b)=>v[0]+e[b]).join(","),l=Qo("rc",i),c=Qo("source",i),u=`${l[i-1]} < ${this.outputShape[i-1]}`,d=i===1?"source":`vec2(${c.slice(-2).join()})`,h=[`${s} rc = outputLoc;`,`${l[i-1]} += 1;
       if(${u}) {
      `,i===1?"":`}
       rc = outputLoc;
       ${l[i-2]} += 1;
       if(${l[i-2]} < ${this.outputShape[i-2]}) {`,i===1?"":`  ${l[i-1]} += 1;
         if(${u}) {`],p=i===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let g="";for(let v=0,b=i===1?2:4;v<b;v++)g+=`
        ${h[v]}
        if (${p}) {
          result[${v}] = float(value);
        } else {
          ${s} source = rc - start;
          result[${v}] = getChannel(getX(${c.join()}), ${d});
        }
      `;g+=i===1?"} ":"}}",this.userCode=`
      const ${s} start = ${s}(${a});
      const ${s} end = ${s}(${o});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${g}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sse=n=>{const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{paddings:s,constantValue:a}=r;if(xt(i.shape)===0){const c=s.map((u,d)=>u[0]+i.shape[d]+u[1]);return u2({backend:t,attrs:{shape:c,value:a,dtype:i.dtype}})}const o=it().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new PKe(i.shape,s,a):new FKe(i.shape,s,a),l=[[a]];return t.runWebGLProgram(o,[i],i.dtype,l)},UKe={kernelName:CD,backendName:"webgl",kernelFunc:Sse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zKe=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,HKe=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+Bv+`
  return result;
`,VKe=uo({opSnippet:zKe,packedOpSnippet:HKe}),GKe={kernelName:SE,backendName:"webgl",kernelFunc:VKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WKe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{axis:s,keepDims:a}=r,o=i.shape.length,l=[],c=Ir(s,i.shape);let u=c;const d=ws(u,o);let h=i;d!=null&&(h=rl({inputs:{x:i},backend:t,attrs:{perm:d}}),u=Ys(u.length,o),l.push(h)),lo("prod",u,o);let p;if(t.shouldExecuteOnCPU([h])){const g=t.texData.get(h.dataId).values,{outVals:v,outShape:b,outDtype:x}=VGe(h.shape,h.dtype,g,u);p=t.makeTensorInfo(b,x,v)}else{const[g,v]=Ga(h.shape,u),b=xt(v),x=rn({inputs:{x:h},backend:t,attrs:{shape:[-1,b]}}),C=UU(i.dtype),E=$v(x,C,"prod",t);p=rn({inputs:{x:E},backend:t,attrs:{shape:g}}),l.push(x),l.push(E)}if(a){l.push(p);const g=Xs(p.shape,c);p=rn({inputs:{x:p},backend:t,attrs:{shape:g}})}return l.forEach(g=>t.disposeIntermediateTensorInfo(g)),p}const jKe={kernelName:ED,backendName:"webgl",kernelFunc:WKe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qKe(n){const{inputs:e,backend:t,attrs:r}=n,{paramsNestedSplits:i,paramsDenseValues:s,indices:a}=e,{outputRaggedRank:o}=r,l=i.map(x=>t.readSync(x.dataId)),c=i.map(x=>x.shape),u=t.readSync(s.dataId),d=t.readSync(a.dataId),[h,p,g]=GGe(l,c,u,s.shape,s.dtype,d,a.shape,o),v=h.map(x=>t.makeTensorInfo([x.length],"int32",x)),b=t.makeTensorInfo(g,s.dtype,p);return v.concat([b])}const XKe={kernelName:gU,backendName:"webgl",kernelFunc:qKe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KKe(n){const{inputs:e,backend:t}=n,{starts:r,limits:i,deltas:s}=e,a=t.readSync(r.dataId),o=t.readSync(i.dataId),l=t.readSync(s.dataId),[c,u]=WGe(a,r.shape,r.dtype,o,i.shape,l,s.shape),d=t.makeTensorInfo([c.length],"int32",c),h=t.makeTensorInfo([u.length],r.dtype,u);return[d,h]}const YKe={kernelName:yU,backendName:"webgl",kernelFunc:KKe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JKe(n){const{inputs:e,backend:t,attrs:r}=n,{shape:i,values:s,defaultValue:a,rowPartitionTensors:o}=e,{rowPartitionTypes:l}=r,c=t.readSync(i.dataId),u=t.readSync(s.dataId),d=t.readSync(a.dataId),h=o.map(b=>t.readSync(b.dataId)),p=o.map(b=>b.shape),[g,v]=jGe(c,i.shape,u,s.shape,s.dtype,d,a.shape,h,p,l);return t.makeTensorInfo(g,s.dtype,v)}const ZKe={kernelName:vU,backendName:"webgl",kernelFunc:JKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wse=n=>{const{backend:e,attrs:t}=n,{start:r,stop:i,step:s,dtype:a}=t,o=qGe(r,i,s,a);return e.makeTensorInfo([o.length],a,o)},QKe={kernelName:bU,backendName:"webgl",kernelFunc:wse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eYe="return 1.0 / x;",tYe=ti({opSnippet:eYe}),nYe={kernelName:wE,backendName:"webgl",kernelFunc:tYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rYe=nd+`
  return (x < 0.0) ? 0.0 : x;
`,iYe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,sYe=ti({opSnippet:rYe,packedOpSnippet:iYe}),aYe={kernelName:CE,backendName:"webgl",kernelFunc:sYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oYe=nd+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,lYe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,cYe=ti({opSnippet:oYe,packedOpSnippet:lYe}),uYe={kernelName:_E,backendName:"webgl",kernelFunc:cYe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dYe{constructor(e,t,r,i,s){this.variableNames=["A"],this.outputShape=[];const[a,o,l,c]=e;this.outputShape=[a,t,r,c];const u=[i&&t>1?o-1:o,i&&r>1?l-1:l],d=[i&&t>1?t-1:t,i&&r>1?r-1:r];let h;s?h="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/d[0]},
          ${u[1]/d[1]});
      const vec2 inputShapeRC = vec2(${o}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fYe{constructor(e,t,r,i,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[a,o,l,c]=e;this.outputShape=[a,t,r,c];const u=[i&&t>1?o-1:o,i&&r>1?l-1:l],d=[i&&t>1?t-1:t,i&&r>1?r-1:r];let h;s?h="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/d[0]},
          ${u[1]/d[1]},
          ${u[1]/d[1]});
      const vec3 inputShapeRC = vec3(${o}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${h};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hYe(n){const{inputs:e,backend:t,attrs:r}=n,{images:i}=e,{alignCorners:s,halfPixelCenters:a,size:o}=r,[l,c]=o,u=it().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new fYe(i.shape,l,c,s,a):new dYe(i.shape,l,c,s,a);return t.runWebGLProgram(u,[i],"float32")}const pYe={kernelName:MD,backendName:"webgl",kernelFunc:hYe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mYe{constructor(e,t,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,i,s]=t,[,a,o]=e,l=[r&&a>1?i-1:i,r&&o>1?s-1:s],c=[r&&a>1?a-1:a,r&&o>1?o-1:o],u=l[0]/c[0],d=l[1]/c[1],h=1/u,p=1/d,g=Math.ceil(h)*2+2,v=Math.ceil(p)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${d});

        const float invHeightScale = float(${h});
        const float invWidthScale = float(${p});

        const int winHeight = int(${g});
        const int winWidth = int(${v});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${a}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${o}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${i-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${s-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gYe(n){const{inputs:e,backend:t,attrs:r}=n,{images:i,dy:s}=e,{alignCorners:a}=r,o=new mYe(s.shape,i.shape,a);return t.runWebGLProgram(o,[s],s.dtype)}const yYe={kernelName:wU,backendName:"webgl",kernelFunc:gYe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vYe{constructor(e,t,r,i,s){this.variableNames=["A"],this.outputShape=[];const[a,o,l,c]=e;this.outputShape=[a,t,r,c];const u=[i&&t>1?o-1:o,i&&r>1?l-1:l],d=[i&&t>1?t-1:t,i&&r>1?r-1:r],h=i?"0.5":"0.0";let p;s?p="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":p="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/d[0]},
          ${u[1]/d[1]});
      const vec2 inputShapeRC = vec2(${o}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${p};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${h})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bYe{constructor(e,t,r,i,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[a,o,l,c]=e;this.outputShape=[a,t,r,c];const u=[i&&t>1?o-1:o,i&&r>1?l-1:l],d=[i&&t>1?t-1:t,i&&r>1?r-1:r],h=i?"0.5":"0.0";let p;s?p="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":p="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/d[0]},
          ${u[1]/d[1]},
          ${u[1]/d[1]});
      const vec3 inputShapeRC = vec3(${o}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${p};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${h})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xYe(n){const{inputs:e,backend:t,attrs:r}=n,{images:i}=e,{alignCorners:s,halfPixelCenters:a,size:o}=r,[l,c]=o,u=it().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new bYe(i.shape,l,c,s,a):new vYe(i.shape,l,c,s,a);return t.runWebGLProgram(u,[i],i.dtype)}const SYe={kernelName:TD,backendName:"webgl",kernelFunc:xYe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wYe{constructor(e,t,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,i,s]=t,[,a,o]=e,l=[r&&a>1?i-1:i,r&&o>1?s-1:s],c=[r&&a>1?a-1:a,r&&o>1?o-1:o],u=l[0]/c[0],d=l[1]/c[1],h=1/u,p=1/d,g=Math.ceil(h)*2+2,v=Math.ceil(p)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${d});

        const float invHeightScale = float(${h});
        const float invWidthScale = float(${p});

        const int winHeight = int(${g});
        const int winWidth = int(${v});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${a}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${o}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${c[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${c[1]}));

            int sourceNearestRow = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${s}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CYe(n){const{inputs:e,backend:t,attrs:r}=n,{images:i,dy:s}=e,{alignCorners:a}=r,o=new wYe(s.shape,i.shape,a);return t.runWebGLProgram(o,[s],s.dtype)}const _Ye={kernelName:SU,backendName:"webgl",kernelFunc:CYe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EYe{constructor(e,t){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const i=o=>t.indexOf(o)!==-1&&e[o]!==1?`${e[o]} - coords[${o}] - 1`:`coords[${o}]`,s=e.map((o,l)=>i(l)).join(","),a=Li(r);this.userCode=`
      void main() {
        ${a} coords = getOutputCoords();
        setOutput(getX(${s}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AYe{constructor(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const i=Qo("rc",r),s=`${i[r-1]} + 1 < ${this.outputShape[r-1]}`,a=`${i[r-2]} + 1 < ${this.outputShape[r-2]}`,o=Li(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${s}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${o} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(i.slice())};
          if(${s}){
            result.g = ${c(i.slice())};
          }
          if(${a}) {
            result.b = ${u(i.slice())};
            if(${s}) {
              result.a = ${d(i.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(g){return h(g)}function c(g){return g[r-1]="("+g[r-1]+" + 1)",h(g)}function u(g){return g[r-2]="("+g[r-2]+" + 1)",h(g)}function d(g){return g[r-1]="("+g[r-1]+" + 1)",g[r-2]="("+g[r-2]+" + 1)",h(g)}function h(g){const v=e.map((C,E)=>p(E,g)),b=v.join(","),x=v.slice(-2).join(",");return`getChannel(getX(${b}), vec2(${x}))`}function p(g,v){return t.indexOf(g)!==-1&&e[g]!==1?`${e[g]} - ${v[g]} - 1`:`${v[g]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TYe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{dims:s}=r,a=i.shape.length,o=Ir(s,i.shape);if(a===0)return Tc({inputs:{x:i},backend:t});const l=it().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new AYe(i.shape,o):new EYe(i.shape,o);return t.runWebGLProgram(l,[i],i.dtype)}const MYe={kernelName:RD,backendName:"webgl",kernelFunc:TYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RYe{constructor(e,t){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],i=e[2];this.outputShape=e;let s="";typeof t=="number"?s=`float outputValue = ${t.toFixed(2)};`:s=`
        vec3 fill = vec3(${t.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${s}
          if(coordX >= 0 && coordX < ${i} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NYe={kernelName:PU,backendName:"webgl",kernelFunc:({inputs:n,attrs:e,backend:t})=>{const{image:r}=n,{radians:i,fillValue:s,center:a}=e,o=t,l=new RYe(r.shape,s),[c,u]=Lz(a,r.shape[1],r.shape[2]),d=[[c,u,Math.sin(i),Math.cos(i)]];return o.runWebGLProgram(l,[r],r.dtype,d)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IYe=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,DYe=ti({opSnippet:IYe}),kYe={kernelName:EE,backendName:"webgl",kernelFunc:DYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OYe="return inversesqrt(x);",BYe=ti({opSnippet:OYe,cpuKernelImpl:XGe}),$Ye={kernelName:AE,backendName:"webgl",kernelFunc:BYe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class U5{constructor(e,t,r,i,s,a,o=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;const c=Li(s.length),u=Li(a.length);let d="";r===1?d="i":r===2&&(d="i, j");const h=`getIndices(${d})`;let p="";i===1?p="i":i===2&&(p="i, coords[1]");const g=`getUpdates(${p})`;let v="";l&&(v="coords[0], coords[1]");const b=`getDefaultValue(${v})`,x=t>1?"strides[j]":"strides";this.userCode=`
        ${c} strides = ${c}(${s});

        void main() {
          ${u} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${t}; j++) {
              int index = round(${h});
              flattenedIndex += index * ${x};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${g};
              found = true;
            }
          }
          setOutput(mix(${b}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LYe{constructor(e,t,r,i,s,a,o=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=a;const c=Li(s.length),u=Li(a.length);let d="";r===1?d="i":r===2&&(d="i, j");const h=`getIndices(${d})`;let p="";i===1?p="i":i===2&&(p="i, coords[1]");const g=`getUpdates(${p})`;let v="";l&&(v="coords[0], coords[1]");const b=`getDefaultValue(${v})`,x=t>1?"strides[j]":"strides",C=t>1?"strides[j + 1]":"strides";this.userCode=`
        ${c} strides = ${c}(${s});

        void main() {
          ${u} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${t}; j+=2) {
              ivec4 index = round(${h});
              flattenedIndex += index.xz * ${x};
              if (j + 1 < ${t}) {
                flattenedIndex += index.yw * ${C};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${g};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${b}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FYe(n){const{inputs:e,backend:t,attrs:r}=n,{indices:i,updates:s}=e,{shape:a}=r,{sliceRank:o,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=Nv(s,i,a),h=[d/c,c];if(d===0)return t.makeTensorInfo(a,i.dtype);const p=rn({inputs:{x:i},backend:t,attrs:{shape:[l,o]}}),g=rn({inputs:{x:s},backend:t,attrs:{shape:[l,c]}}),v=t.makeTensorInfo([],"float32",new Float32Array([0]));let b;it().getBool("WEBGL_PACK")?b=new LYe(l,o,p.shape.length,g.shape.length,u,h):b=new U5(l,o,p.shape.length,g.shape.length,u,h);const x=t.runWebGLProgram(b,[g,p,v],g.dtype),C=rn({inputs:{x},backend:t,attrs:{shape:a}});return t.disposeIntermediateTensorInfo(p),t.disposeIntermediateTensorInfo(g),t.disposeIntermediateTensorInfo(x),t.disposeIntermediateTensorInfo(v),C}const PYe={kernelName:CU,backendName:"webgl",kernelFunc:FYe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UYe{constructor(e,t,r,i){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const s="while (left < right) {",a=`for (int i = 0; i < ${Math.ceil(Math.log2(t+1))}; ++i) { if (left >= right) break;`,o=it().getNumber("WEBGL_VERSION")===2?s:a,l=i==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${o}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zYe(n){const{inputs:e,backend:t,attrs:r}=n,{sortedSequence:i,values:s}=e,{side:a}=r,o=new UYe(i.shape[0],i.shape[1],s.shape[1],a),l=[[i.shape[1]]];return t.runWebGLProgram(o,[i,s],"int32",l)}const HYe={kernelName:EU,backendName:"webgl",kernelFunc:zYe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VYe{constructor(e,t,r){this.variableNames=["c","a","b"],this.outputShape=t;let i,s;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)s="resRC",i="resRC";else{const o=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],c=[];for(let u=0;u<t.length;u++)c.push(`${o[u]}`),u<e&&l.push(`${o[u]}`);i=l.join(),s=c.join()}const a=Li(r);this.userCode=`
      void main() {
        ${a} resRC = getOutputCoords();
        float cVal = getC(${i});
        if (cVal >= 1.0) {
          setOutput(getA(${s}));
        } else {
          setOutput(getB(${s}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GYe(n){const{inputs:e,backend:t}=n,{condition:r,t:i,e:s}=e,a=new VYe(r.shape.length,i.shape,i.shape.length);return t.runWebGLProgram(a,[r,i,s],_c(i.dtype,s.dtype))}const WYe={kernelName:ND,backendName:"webgl",kernelFunc:GYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jYe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${d3};
  float scale = ${f3};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,qYe=ti({opSnippet:jYe}),XYe={kernelName:TE,backendName:"webgl",kernelFunc:qYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KYe=nS+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,YYe=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,JYe=ti({opSnippet:KYe,packedOpSnippet:YYe,cpuKernelImpl:YGe}),ZYe={kernelName:IE,backendName:"webgl",kernelFunc:JYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QYe=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,eJe=ti({opSnippet:QYe}),tJe={kernelName:NE,backendName:"webgl",kernelFunc:eJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nJe=nS+`
  return sin(x);
`,rJe=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${Bv}
  return result;
`,iJe=ti({opSnippet:nJe,packedOpSnippet:rJe}),sJe={kernelName:ME,backendName:"webgl",kernelFunc:iJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aJe=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,oJe=ti({opSnippet:aJe}),lJe={kernelName:RE,backendName:"webgl",kernelFunc:oJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cJe=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,uJe=ti({opSnippet:cJe}),dJe={kernelName:DE,backendName:"webgl",kernelFunc:uJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fJe=n=>{const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{blockShape:s,paddings:a}=r;de(i.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const o=s.reduce((x,C)=>x*C),l=[[0,0]];l.push(...a);for(let x=1+s.length;x<i.shape.length;++x)l.push([0,0]);const c=[],u=Sse({inputs:{x:i},backend:t,attrs:{paddings:l,constantValue:0}}),d=XE(u.shape,s,o,!1),h=KE(d.length,s.length,!1),p=YE(u.shape,s,o,!1),g=rn({inputs:{x:u},backend:t,attrs:{shape:d}}),v=rl({inputs:{x:g},backend:t,attrs:{perm:h}}),b=rn({inputs:{x:v},backend:t,attrs:{shape:p}});return c.push(u),c.push(g),c.push(v),c.forEach(x=>t.disposeIntermediateTensorInfo(x)),b},hJe={kernelName:kD,backendName:"webgl",kernelFunc:fJe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pJe(n){const{inputs:e,backend:t}=n,{indices:r,values:i,denseShape:s,defaultValue:a}=e;if(s.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${s.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${i.shape}`);if(a.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${a.shape}`);const o=t.readSync(r.dataId),l=t.readSync(i.dataId),c=t.readSync(s.dataId),u=t.readSync(a.dataId)[0],[d,h,p,g,v]=ZGe(o,r.shape,r.dtype,l,i.dtype,c,u);return[t.makeTensorInfo(h,r.dtype,d),t.makeTensorInfo([h[0]],i.dtype,p),t.makeTensorInfo([g.length],"bool",new Uint8Array(g.map(b=>Number(b)))),t.makeTensorInfo([v.length],r.dtype,new Int32Array(v))]}const mJe={kernelName:AU,backendName:"webgl",kernelFunc:pJe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gJe(n){const{inputs:e,backend:t}=n,{inputIndices:r,inputShape:i,newShape:s}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${i.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);const a=Array.from(t.readSync(i.dataId)),o=t.readSync(r.dataId),l=Array.from(t.readSync(s.dataId)),[c,u,d]=QGe(o,r.shape,r.dtype,a,l);return[t.makeTensorInfo(u,r.dtype,c),t.makeTensorInfo([d.length],s.dtype,new Int32Array(d))]}const yJe={kernelName:TU,backendName:"webgl",kernelFunc:gJe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vJe(n){const{inputs:e,backend:t}=n,{data:r,indices:i,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${s.shape}`);const a=t.readSync(r.dataId),o=t.readSync(i.dataId),l=t.readSync(s.dataId),[c,u]=jie(a,r.shape,r.dtype,o,l,!0);return t.makeTensorInfo(u,r.dtype,c)}const bJe={kernelName:MU,backendName:"webgl",kernelFunc:vJe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xJe(n){const{inputs:e,backend:t}=n,{data:r,indices:i,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${s.shape}`);const a=t.readSync(r.dataId),o=t.readSync(i.dataId),l=t.readSync(s.dataId),[c,u]=jie(a,r.shape,r.dtype,o,l);return t.makeTensorInfo(u,r.dtype,c)}const SJe={kernelName:RU,backendName:"webgl",kernelFunc:xJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wJe(n){const{inputs:e,backend:t,attrs:r}=n,{sparseIndices:i,sparseValues:s,defaultValue:a}=e,{outputShape:o}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:h}=Nv(s,i,o),p=!1;if(s.dtype==="string"){const x=t.bufferSync(i),C=t.bufferSync(s),E=Eg(t.readSync(a.dataId)[0]),_=KGe(x,C,o,h,u,c,l,d,E,p);return t.makeTensorInfo(o,_.dtype,_.values)}const g=new U5(c,l,i.shape.length,s.shape.length,d,[h,1],p),v=t.runWebGLProgram(g,[s,i,a],s.dtype),b=rn({inputs:{x:v},backend:t,attrs:{shape:o}});return t.disposeIntermediateTensorInfo(v),b}const CJe={kernelName:NU,backendName:"webgl",kernelFunc:wJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Je(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{numOrSizeSplits:s,axis:a}=r,o=Ir(a,i.shape)[0],l=Zz(i,s,o),c=i.shape.length,u=new Array(c).fill(0),d=i.shape.slice();return l.map(h=>{const p=[...d];p[o]=h;const g=rS({inputs:{x:i},backend:t,attrs:{begin:u,size:p}});return u[o]+=h,g})}const EJe={kernelName:OD,backendName:"webgl",kernelFunc:_Je};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U7="return sqrt(x);",AJe=ti({opSnippet:U7,packedOpSnippet:U7,cpuKernelImpl:e9e}),TJe={kernelName:kE,backendName:"webgl",kernelFunc:AJe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MJe="return x * x;",RJe=ti({opSnippet:MJe}),NJe={kernelName:IU,backendName:"webgl",kernelFunc:RJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z7="return (a - b) * (a - b);",IJe=uo({opSnippet:z7,packedOpSnippet:z7}),DJe={kernelName:OE,backendName:"webgl",kernelFunc:IJe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kJe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");const s=t.readSync(i.dataId),a=Vp(s),o=t9e(a,"string",r);return t.makeTensorInfo(i.shape,"string",o)}const OJe={kernelName:$D,backendName:"webgl",kernelFunc:kJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BJe({inputs:n,attrs:e,backend:t}){const{x:r}=n,i=nd+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,s=new ch(r.shape,i);return t.runWebGLProgram(s,[r],r.dtype)}const $Je={kernelName:PE,backendName:"webgl",kernelFunc:BJe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LJe{constructor(e,t,r){this.variableNames=["x"],this.outputShape=r;const i=r.length,s=Li(r.length),a=Li(r.length);let o="";if(i===1)o="coords * strides + begin";else{let l=0;o=r.map((c,u)=>(l++,r.length===1?`coords * strides[${u}] + begin[${u}]`:`coords[${l-1}] * strides[${u}] + begin[${u}]`)).join(",")}this.userCode=`
      ${s} begin = ${s}(${e});
      ${s} strides = ${s}(${t});

      void main() {
        ${a} coords = getOutputCoords();
        setOutput(getX(${o}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FJe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{begin:s,end:a,strides:o,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:h}=r,{finalShapeSparse:p,finalShape:g,isIdentity:v,sliceDim0:b,isSimpleSlice:x,begin:C,end:E,strides:_}=Oz(i.shape,s,a,o,l,c,u,d,h);let M;if(v)M=rn({inputs:{x:i},backend:t,attrs:{shape:g}});else if(b||x){de(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);const L=Iz(C,E,_),$=rS({inputs:{x:i},backend:t,attrs:{begin:C,size:L}});M=rn({inputs:{x:$},backend:t,attrs:{shape:g}}),t.disposeIntermediateTensorInfo($)}else if(t.shouldExecuteOnCPU([i])){const $=t.readSync(i.dataId),N=Ar(i.shape,i.dtype,$),I=n9e(p,N,_,C);M=t.makeTensorInfo(g,i.dtype,I.values)}else{const $=new LJe(C,_,p);M=t.runWebGLProgram($,[i],i.dtype)}const R=rn({inputs:{x:M},backend:t,attrs:{shape:g}});return t.disposeIntermediateTensorInfo(M),R}const PJe={kernelName:DU,backendName:"webgl",kernelFunc:FJe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UJe(n){const{inputs:e,backend:t,attrs:r}=n,{separator:i,nGramWidths:s,leftPad:a,rightPad:o,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:d}=e,h=t.readSync(u.dataId),p=t.readSync(d.dataId),[g,v]=r9e(h,p,i,s,a,o,l,c);return[t.makeTensorInfo([g.length],"string",g),t.makeTensorInfo(d.shape,"int32",v)]}const zJe={kernelName:kU,backendName:"webgl",kernelFunc:UJe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HJe(n){const{inputs:e,backend:t,attrs:r}=n,{skipEmpty:i}=r,{input:s,delimiter:a}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(s.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(a.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${a.shape}`);const o=t.readSync(s.dataId),l=t.readSync(a.dataId)[0],[c,u,d]=i9e(o,l,i),h=u.length;return[t.makeTensorInfo([h,2],"int32",c),t.makeTensorInfo([h],"string",u),t.makeTensorInfo([2],"int32",new Int32Array(d))]}const VJe={kernelName:OU,backendName:"webgl",kernelFunc:HJe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GJe(n){const{inputs:e,backend:t,attrs:r}=n,{numBuckets:i}=r,{input:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const a=t.readSync(s.dataId),o=s9e(a,i);return t.makeTensorInfo(s.shape,"int32",o)}const WJe={kernelName:BU,backendName:"webgl",kernelFunc:GJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jJe="return tan(x);",qJe=ti({opSnippet:jJe}),XJe={kernelName:$E,backendName:"webgl",kernelFunc:qJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KJe=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,YJe=ti({opSnippet:KJe}),JJe={kernelName:LE,backendName:"webgl",kernelFunc:YJe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZJe(n){const{inputs:e,backend:t,attrs:r}=n,{tensor:i,indices:s,updates:a}=e,{sliceRank:o,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=Nv(a,s,i.shape),h=[d/c,c];if(d===0)return t.makeTensorInfo(i.shape,s.dtype);const p=rn({inputs:{x:s},backend:t,attrs:{shape:[l,o]}}),g=rn({inputs:{x:a},backend:t,attrs:{shape:[l,c]}}),v=rn({inputs:{x:i},backend:t,attrs:{shape:h}}),b=new U5(l,o,p.shape.length,g.shape.length,u,h,!1,!0),x=t.runWebGLProgram(b,[g,p,v],v.dtype),C=rn({inputs:{x},backend:t,attrs:{shape:i.shape}});return t.disposeIntermediateTensorInfo(p),t.disposeIntermediateTensorInfo(g),t.disposeIntermediateTensorInfo(v),t.disposeIntermediateTensorInfo(x),C}const QJe={kernelName:_U,backendName:"webgl",kernelFunc:ZJe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eZe{constructor(e,t){this.variableNames=["A"];const r=new Array(e.length);for(let a=0;a<r.length;a++)r[a]=e[a]*t[a];this.outputShape=r,this.rank=r.length;const i=Li(this.rank),s=tZe(e);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        setOutput(getA(${s}));
      }
    `}}function tZe(n){const e=n.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${n[0]})`;const t=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let i=0;i<n.length;i++)r.push(`imod(${t[i]}, ${n[i]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cse(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{reps:s}=r;if(i.dtype==="string"||i.shape.length>5){const l=t.readSync(i.dataId),c=i.dtype==="string"?l.map(h=>Eg(h)):l,u=Ar(i.shape,i.dtype,c),d=o9e(u,s);return t.makeTensorInfo(d.shape,d.dtype,d.values)}const a=new eZe(i.shape,s);return t.runWebGLProgram(a,[i],i.dtype)}const nZe={kernelName:FE,backendName:"webgl",kernelFunc:Cse};class rZe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class iZe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uy(n,e){e!==null&&n.disposeIntermediateTensorInfo(e)}function H7(n){let e=1;for(;e<n;)e*=2;return e}function sZe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{k:s,sorted:a}=r,o=it().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=it().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=i.shape,u=c[c.length-1];if(t.shouldExecuteOnCPU([i])||u<o||s>l){const I=t.readSync(i.dataId),[k,P]=l9e(I,c,i.dtype,s,a);return[t.makeTensorInfo(k.shape,k.dtype,k.values),t.makeTensorInfo(P.shape,P.dtype,P.values)]}if(s===0)return c[c.length-1]=0,[t.makeTensorInfo(c,i.dtype,[]),t.makeTensorInfo(c,"int32",[])];if(u===1)return[i,u2({attrs:{shape:c,dtype:"int32",value:0},backend:t})];const d=t.texData.get(i.dataId),h=d!==null&&d.isPacked,p=h?t.unpackTensor(i):i,v=xt(c)/u,b=rn({inputs:{x:p},attrs:{shape:[v,u]},backend:t});h&&uy(t,p);const x=H7(s),C=H7(u);let E=null;const _=()=>E===null?[b,b]:[b,E],M=(I,k,P)=>{const G=_(),W=new rZe(P),z=[[u],[E===null?1:0],[Number.NEGATIVE_INFINITY],[I],[k]],J=E;E=t.runWebGLProgram(W,G,"int32",z),uy(t,J)};for(let I=1;I<x;I*=2){const k=I*2;for(let P=I;P>=1;P/=2)M(k,P,[v,C])}for(let I=C;I>x;I/=2){const k=_(),P=new iZe([v,I/2]),W=[[u],[E===null?1:0],[x]],X=E;E=t.runWebGLProgram(P,k,"int32",W),uy(t,X);const z=x/2,J=z*2;for(let Q=z;Q>=1;Q/=2)M(J,Q,E.shape)}let R=E;E=rS({inputs:{x:E},backend:t,attrs:{begin:0,size:[v,s]}}),uy(t,R);let L=mse({inputs:{x:b,indices:E},backend:t,attrs:{axis:1,batchDims:1}});uy(t,b);const $=c.slice(0,-1);$.push(s),R=E,E=rn({inputs:{x:E},attrs:{shape:$},backend:t}),uy(t,R);const N=L;return L=rn({inputs:{x:L},attrs:{shape:$},backend:t}),uy(t,N),[L,E]}const aZe={kernelName:$U,backendName:"webgl",kernelFunc:sZe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oZe{constructor(e,t,r,i,s,a){this.variableNames=["Image","Transforms"],this.outputShape=a;const o=r==="nearest"?1:2;let l;switch(i){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${t}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${s});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${s});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${t}));
                float mapY = mapCoord(inY, float(${e}));

                if (${o} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lZe(n){const{inputs:e,backend:t,attrs:r}=n,{image:i,transforms:s}=e,{interpolation:a,fillMode:o,fillValue:l,outputShape:c}=r,[u,d,h,p]=i.shape,[g,v]=c??[d,h],b=[u,g,v,p],x=new oZe(d,h,a,o,l,b);return t.runWebGLProgram(x,[i,s],"float32")}const cZe={kernelName:LU,backendName:"webgl",kernelFunc:lZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uZe(n){const{inputs:e,attrs:t,backend:r}=n,{axis:i}=t,{x:s}=e;o2(s,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const a=r.readSync(s.dataId),{outputValues:o,outputShape:l,indices:c}=c9e(a,i,s.shape,s.dtype);return[r.makeTensorInfo(l,s.dtype,o),r.makeTensorInfo([c.length],"int32",c)]}const dZe={kernelName:FU,backendName:"webgl",kernelFunc:uZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fZe(n){const{inputs:e,backend:t,attrs:r}=n,{value:i}=e;let{axis:s}=r;s<0&&(s+=i.shape.length);const a=i,o=a.shape.length,l=i.shape[s],c=new Array(o-1);let u=0;for(let v=0;v<o;v++)v!==s&&(c[u++]=a.shape[v]);const d=[],h=new Array(o).fill(0),p=a.shape.slice();p[s]=1;const g=new Array(l);for(let v=0;v<g.length;v++){h[s]=v;const b=rS({inputs:{x:a},backend:t,attrs:{begin:h,size:p}}),x=rn({inputs:{x:b},backend:t,attrs:{shape:c}});g[v]=x,d.push(b)}return d.forEach(v=>t.disposeIntermediateTensorInfo(v)),g}const hZe={kernelName:LD,backendName:"webgl",kernelFunc:fZe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pZe{constructor(e,t){this.variableNames=["x","segmentIds"];const r=e.windowSize,i=e.batchSize,s=e.inSize,a=e.numSegments,o=a*Math.ceil(s/r);this.outputShape=[i,o];const l="0.0",c="sumValue",u=Math.floor(r/4)*4,d=r%4,h=`
        sumValue += dot(values, segFilter);
    `;let p="";s%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `);let g="";s%r>0&&(g=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${p}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${g}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${a})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${a})));

        float sumValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${h}
        }

        int inIdx = inOffset + ${u};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${h}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${h}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${h}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mZe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,segmentIds:s}=e,{numSegments:a}=r,o=i.shape.length,l=[];let c=0;const u=ws([c],o);let d=i;u!=null&&(d=rl({inputs:{x:i},backend:t,attrs:{perm:u}}),l.push(d),c=Ys(1,o)[0]);const h=tte(d.shape,c,a),p=xt([d.shape[c]]),g=rn({inputs:{x:d},backend:t,attrs:{shape:[-1,p]}});l.push(g);const v=UU(i.dtype),b=(_,M,R,L,$)=>{const N=_.shape[0],I=_.shape[1],k=ete(I,$),P={windowSize:k,inSize:I,batchSize:N,numSegments:$},G=new pZe(P,M),W=t.compileAndRun(G,[_,R],L);if(l.push(W),W.shape[1]===$)return W;const X=wse({backend:t,attrs:{start:0,stop:$,step:1,dtype:"float32"}}),z=Cse({inputs:{x:X},backend:t,attrs:{reps:[I/k]}});return l.push(X),l.push(z),b(W,M,z,L,$)},x=b(g,"unsortedSegmentSum",s,v,a),C=rn({inputs:{x},backend:t,attrs:{shape:h}});let E=C;if(u!=null){l.push(C);const _=qg(u);E=rl({inputs:{x:E},backend:t,attrs:{perm:_}})}return l.forEach(_=>t.disposeIntermediateTensorInfo(_)),E}const gZe={kernelName:FD,backendName:"webgl",kernelFunc:mZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yZe=[eWe,nWe,sWe,lWe,uWe,hWe,mWe,yWe,SWe,CWe,AWe,RWe,DWe,$We,PWe,zWe,VWe,qWe,KWe,JWe,t7e,l7e,u7e,p7e,g7e,w7e,_7e,M7e,L9e,I7e,$7e,U7e,j7e,K7e,J7e,Q7e,tje,sje,lje,dje,hje,mje,yje,xje,wje,Aje,Mje,Ije,Oje,$je,Uje,Gje,Xje,Jje,eqe,tqe,rqe,sqe,oqe,cqe,dqe,mqe,vqe,Sqe,Cqe,Aqe,Rqe,kqe,Lqe,$9e,Pqe,O7e,Hqe,Wqe,Xqe,P9e,Zqe,nXe,iXe,lXe,dXe,mXe,vXe,wXe,AXe,RXe,IXe,BXe,LXe,PXe,VXe,WXe,qXe,KXe,JXe,tKe,sKe,cKe,yKe,H9e,SKe,_Ke,TKe,NKe,v7e,kKe,BKe,LKe,UKe,GKe,z9e,jKe,XKe,YKe,ZKe,QKe,b7e,hKe,nYe,aYe,uYe,G9e,pYe,yYe,SYe,_Ye,MYe,NYe,kYe,$Ye,PYe,HYe,WYe,XYe,ZYe,tJe,sJe,lJe,a7e,mKe,dJe,hJe,mJe,yJe,bJe,SJe,CJe,EJe,TJe,NJe,DJe,OJe,$Je,PJe,zJe,VJe,WJe,pKe,J9e,XJe,JJe,QJe,nZe,aZe,cZe,Z9e,dZe,hZe,gZe,OKe];for(const n of yZe)EZ(n);var t$={},V7;function vZe(){return V7||(V7=1,(function(){var n;function e(O){var j=0;return function(){return j<O.length?{done:!1,value:O[j++]}:{done:!0}}}var t=typeof Object.defineProperties=="function"?Object.defineProperty:function(O,j,ee){return O==Array.prototype||O==Object.prototype||(O[j]=ee.value),O};function r(O){O=[typeof globalThis=="object"&&globalThis,O,typeof window=="object"&&window,typeof self=="object"&&self,typeof aH=="object"&&aH];for(var j=0;j<O.length;++j){var ee=O[j];if(ee&&ee.Math==Math)return ee}throw Error("Cannot find global object")}var i=r(this);function s(O,j){if(j)e:{var ee=i;O=O.split(".");for(var oe=0;oe<O.length-1;oe++){var we=O[oe];if(!(we in ee))break e;ee=ee[we]}O=O[O.length-1],oe=ee[O],j=j(oe),j!=oe&&j!=null&&t(ee,O,{configurable:!0,writable:!0,value:j})}}s("Symbol",function(O){function j(Ee){if(this instanceof j)throw new TypeError("Symbol is not a constructor");return new ee(oe+(Ee||"")+"_"+we++,Ee)}function ee(Ee,Ce){this.h=Ee,t(this,"description",{configurable:!0,writable:!0,value:Ce})}if(O)return O;ee.prototype.toString=function(){return this.h};var oe="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",we=0;return j}),s("Symbol.iterator",function(O){if(O)return O;O=Symbol("Symbol.iterator");for(var j="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),ee=0;ee<j.length;ee++){var oe=i[j[ee]];typeof oe=="function"&&typeof oe.prototype[O]!="function"&&t(oe.prototype,O,{configurable:!0,writable:!0,value:function(){return a(e(this))}})}return O});function a(O){return O={next:O},O[Symbol.iterator]=function(){return this},O}function o(O){var j=typeof Symbol<"u"&&Symbol.iterator&&O[Symbol.iterator];return j?j.call(O):{next:e(O)}}function l(O){if(!(O instanceof Array)){O=o(O);for(var j,ee=[];!(j=O.next()).done;)ee.push(j.value);O=ee}return O}var c=typeof Object.assign=="function"?Object.assign:function(O,j){for(var ee=1;ee<arguments.length;ee++){var oe=arguments[ee];if(oe)for(var we in oe)Object.prototype.hasOwnProperty.call(oe,we)&&(O[we]=oe[we])}return O};s("Object.assign",function(O){return O||c});var u=typeof Object.create=="function"?Object.create:function(O){function j(){}return j.prototype=O,new j},d;if(typeof Object.setPrototypeOf=="function")d=Object.setPrototypeOf;else{var h;e:{var p={a:!0},g={};try{g.__proto__=p,h=g.a;break e}catch{}h=!1}d=h?function(O,j){if(O.__proto__=j,O.__proto__!==j)throw new TypeError(O+" is not extensible");return O}:null}var v=d;function b(O,j){if(O.prototype=u(j.prototype),O.prototype.constructor=O,v)v(O,j);else for(var ee in j)if(ee!="prototype")if(Object.defineProperties){var oe=Object.getOwnPropertyDescriptor(j,ee);oe&&Object.defineProperty(O,ee,oe)}else O[ee]=j[ee];O.ya=j.prototype}function x(){this.m=!1,this.j=null,this.i=void 0,this.h=1,this.v=this.s=0,this.l=null}function C(O){if(O.m)throw new TypeError("Generator is already running");O.m=!0}x.prototype.u=function(O){this.i=O};function E(O,j){O.l={ma:j,na:!0},O.h=O.s||O.v}x.prototype.return=function(O){this.l={return:O},this.h=this.v};function _(O,j,ee){return O.h=ee,{value:j}}function M(O){this.h=new x,this.i=O}function R(O,j){C(O.h);var ee=O.h.j;return ee?L(O,"return"in ee?ee.return:function(oe){return{value:oe,done:!0}},j,O.h.return):(O.h.return(j),$(O))}function L(O,j,ee,oe){try{var we=j.call(O.h.j,ee);if(!(we instanceof Object))throw new TypeError("Iterator result "+we+" is not an object");if(!we.done)return O.h.m=!1,we;var Ee=we.value}catch(Ce){return O.h.j=null,E(O.h,Ce),$(O)}return O.h.j=null,oe.call(O.h,Ee),$(O)}function $(O){for(;O.h.h;)try{var j=O.i(O.h);if(j)return O.h.m=!1,{value:j.value,done:!1}}catch(ee){O.h.i=void 0,E(O.h,ee)}if(O.h.m=!1,O.h.l){if(j=O.h.l,O.h.l=null,j.na)throw j.ma;return{value:j.return,done:!0}}return{value:void 0,done:!0}}function N(O){this.next=function(j){return C(O.h),O.h.j?j=L(O,O.h.j.next,j,O.h.u):(O.h.u(j),j=$(O)),j},this.throw=function(j){return C(O.h),O.h.j?j=L(O,O.h.j.throw,j,O.h.u):(E(O.h,j),j=$(O)),j},this.return=function(j){return R(O,j)},this[Symbol.iterator]=function(){return this}}function I(O){function j(oe){return O.next(oe)}function ee(oe){return O.throw(oe)}return new Promise(function(oe,we){function Ee(Ce){Ce.done?oe(Ce.value):Promise.resolve(Ce.value).then(j,ee).then(Ee,we)}Ee(O.next())})}function k(O){return I(new N(new M(O)))}s("Promise",function(O){function j(Ce){this.i=0,this.j=void 0,this.h=[],this.u=!1;var He=this.l();try{Ce(He.resolve,He.reject)}catch(ht){He.reject(ht)}}function ee(){this.h=null}function oe(Ce){return Ce instanceof j?Ce:new j(function(He){He(Ce)})}if(O)return O;ee.prototype.i=function(Ce){if(this.h==null){this.h=[];var He=this;this.j(function(){He.m()})}this.h.push(Ce)};var we=i.setTimeout;ee.prototype.j=function(Ce){we(Ce,0)},ee.prototype.m=function(){for(;this.h&&this.h.length;){var Ce=this.h;this.h=[];for(var He=0;He<Ce.length;++He){var ht=Ce[He];Ce[He]=null;try{ht()}catch(Ht){this.l(Ht)}}}this.h=null},ee.prototype.l=function(Ce){this.j(function(){throw Ce})},j.prototype.l=function(){function Ce(Ht){return function(Zt){ht||(ht=!0,Ht.call(He,Zt))}}var He=this,ht=!1;return{resolve:Ce(this.I),reject:Ce(this.m)}},j.prototype.I=function(Ce){if(Ce===this)this.m(new TypeError("A Promise cannot resolve to itself"));else if(Ce instanceof j)this.L(Ce);else{e:switch(typeof Ce){case"object":var He=Ce!=null;break e;case"function":He=!0;break e;default:He=!1}He?this.F(Ce):this.s(Ce)}},j.prototype.F=function(Ce){var He=void 0;try{He=Ce.then}catch(ht){this.m(ht);return}typeof He=="function"?this.M(He,Ce):this.s(Ce)},j.prototype.m=function(Ce){this.v(2,Ce)},j.prototype.s=function(Ce){this.v(1,Ce)},j.prototype.v=function(Ce,He){if(this.i!=0)throw Error("Cannot settle("+Ce+", "+He+"): Promise already settled in state"+this.i);this.i=Ce,this.j=He,this.i===2&&this.K(),this.H()},j.prototype.K=function(){var Ce=this;we(function(){if(Ce.D()){var He=i.console;typeof He<"u"&&He.error(Ce.j)}},1)},j.prototype.D=function(){if(this.u)return!1;var Ce=i.CustomEvent,He=i.Event,ht=i.dispatchEvent;return typeof ht>"u"?!0:(typeof Ce=="function"?Ce=new Ce("unhandledrejection",{cancelable:!0}):typeof He=="function"?Ce=new He("unhandledrejection",{cancelable:!0}):(Ce=i.document.createEvent("CustomEvent"),Ce.initCustomEvent("unhandledrejection",!1,!0,Ce)),Ce.promise=this,Ce.reason=this.j,ht(Ce))},j.prototype.H=function(){if(this.h!=null){for(var Ce=0;Ce<this.h.length;++Ce)Ee.i(this.h[Ce]);this.h=null}};var Ee=new ee;return j.prototype.L=function(Ce){var He=this.l();Ce.T(He.resolve,He.reject)},j.prototype.M=function(Ce,He){var ht=this.l();try{Ce.call(He,ht.resolve,ht.reject)}catch(Ht){ht.reject(Ht)}},j.prototype.then=function(Ce,He){function ht(_n,cn){return typeof _n=="function"?function(xn){try{Ht(_n(xn))}catch(ir){Zt(ir)}}:cn}var Ht,Zt,Un=new j(function(_n,cn){Ht=_n,Zt=cn});return this.T(ht(Ce,Ht),ht(He,Zt)),Un},j.prototype.catch=function(Ce){return this.then(void 0,Ce)},j.prototype.T=function(Ce,He){function ht(){switch(Ht.i){case 1:Ce(Ht.j);break;case 2:He(Ht.j);break;default:throw Error("Unexpected state: "+Ht.i)}}var Ht=this;this.h==null?Ee.i(ht):this.h.push(ht),this.u=!0},j.resolve=oe,j.reject=function(Ce){return new j(function(He,ht){ht(Ce)})},j.race=function(Ce){return new j(function(He,ht){for(var Ht=o(Ce),Zt=Ht.next();!Zt.done;Zt=Ht.next())oe(Zt.value).T(He,ht)})},j.all=function(Ce){var He=o(Ce),ht=He.next();return ht.done?oe([]):new j(function(Ht,Zt){function Un(xn){return function(ir){_n[xn]=ir,cn--,cn==0&&Ht(_n)}}var _n=[],cn=0;do _n.push(void 0),cn++,oe(ht.value).T(Un(_n.length-1),Zt),ht=He.next();while(!ht.done)})},j});function P(O,j){O instanceof String&&(O+="");var ee=0,oe=!1,we={next:function(){if(!oe&&ee<O.length){var Ee=ee++;return{value:j(Ee,O[Ee]),done:!1}}return oe=!0,{done:!0,value:void 0}}};return we[Symbol.iterator]=function(){return we},we}s("Array.prototype.keys",function(O){return O||function(){return P(this,function(j){return j})}}),s("Array.prototype.fill",function(O){return O||function(j,ee,oe){var we=this.length||0;for(0>ee&&(ee=Math.max(0,we+ee)),(oe==null||oe>we)&&(oe=we),oe=Number(oe),0>oe&&(oe=Math.max(0,we+oe)),ee=Number(ee||0);ee<oe;ee++)this[ee]=j;return this}});function G(O){return O||Array.prototype.fill}s("Int8Array.prototype.fill",G),s("Uint8Array.prototype.fill",G),s("Uint8ClampedArray.prototype.fill",G),s("Int16Array.prototype.fill",G),s("Uint16Array.prototype.fill",G),s("Int32Array.prototype.fill",G),s("Uint32Array.prototype.fill",G),s("Float32Array.prototype.fill",G),s("Float64Array.prototype.fill",G),s("Object.is",function(O){return O||function(j,ee){return j===ee?j!==0||1/j===1/ee:j!==j&&ee!==ee}}),s("Array.prototype.includes",function(O){return O||function(j,ee){var oe=this;oe instanceof String&&(oe=String(oe));var we=oe.length;for(ee=ee||0,0>ee&&(ee=Math.max(ee+we,0));ee<we;ee++){var Ee=oe[ee];if(Ee===j||Object.is(Ee,j))return!0}return!1}}),s("String.prototype.includes",function(O){return O||function(j,ee){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(j instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(j,ee||0)!==-1}});var W=this||self;function X(O,j){O=O.split(".");var ee=W;O[0]in ee||typeof ee.execScript>"u"||ee.execScript("var "+O[0]);for(var oe;O.length&&(oe=O.shift());)O.length||j===void 0?ee[oe]&&ee[oe]!==Object.prototype[oe]?ee=ee[oe]:ee=ee[oe]={}:ee[oe]=j}function z(O){var j;e:{if((j=W.navigator)&&(j=j.userAgent))break e;j=""}return j.indexOf(O)!=-1}var J=Array.prototype.map?function(O,j){return Array.prototype.map.call(O,j,void 0)}:function(O,j){for(var ee=O.length,oe=Array(ee),we=typeof O=="string"?O.split(""):O,Ee=0;Ee<ee;Ee++)Ee in we&&(oe[Ee]=j.call(void 0,we[Ee],Ee,O));return oe},Q={},Y=null;function q(O){var j=O.length,ee=3*j/4;ee%3?ee=Math.floor(ee):"=.".indexOf(O[j-1])!=-1&&(ee="=.".indexOf(O[j-2])!=-1?ee-2:ee-1);var oe=new Uint8Array(ee),we=0;return te(O,function(Ee){oe[we++]=Ee}),we!==ee?oe.subarray(0,we):oe}function te(O,j){function ee(ht){for(;oe<O.length;){var Ht=O.charAt(oe++),Zt=Y[Ht];if(Zt!=null)return Zt;if(!/^[\s\xa0]*$/.test(Ht))throw Error("Unknown base64 encoding at char: "+Ht)}return ht}ne();for(var oe=0;;){var we=ee(-1),Ee=ee(0),Ce=ee(64),He=ee(64);if(He===64&&we===-1)break;j(we<<2|Ee>>4),Ce!=64&&(j(Ee<<4&240|Ce>>2),He!=64&&j(Ce<<6&192|He))}}function ne(){if(!Y){Y={};for(var O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),j=["+/=","+/","-_=","-_.","-_"],ee=0;5>ee;ee++){var oe=O.concat(j[ee].split(""));Q[ee]=oe;for(var we=0;we<oe.length;we++){var Ee=oe[we];Y[Ee]===void 0&&(Y[Ee]=we)}}}}var le=typeof Uint8Array<"u",ye=!(z("Trident")||z("MSIE"))&&typeof W.btoa=="function";function ue(O){if(!ye){var j;j===void 0&&(j=0),ne(),j=Q[j];for(var ee=Array(Math.floor(O.length/3)),oe=j[64]||"",we=0,Ee=0;we<O.length-2;we+=3){var Ce=O[we],He=O[we+1],ht=O[we+2],Ht=j[Ce>>2];Ce=j[(Ce&3)<<4|He>>4],He=j[(He&15)<<2|ht>>6],ht=j[ht&63],ee[Ee++]=Ht+Ce+He+ht}switch(Ht=0,ht=oe,O.length-we){case 2:Ht=O[we+1],ht=j[(Ht&15)<<2]||oe;case 1:O=O[we],ee[Ee]=j[O>>2]+j[(O&3)<<4|Ht>>4]+ht+oe}return ee.join("")}for(j="";10240<O.length;)j+=String.fromCharCode.apply(null,O.subarray(0,10240)),O=O.subarray(10240);return j+=String.fromCharCode.apply(null,O),btoa(j)}var ve=RegExp("[-_.]","g");function xe(O){switch(O){case"-":return"+";case"_":return"/";case".":return"=";default:return""}}function Pe(O){if(!ye)return q(O);ve.test(O)&&(O=O.replace(ve,xe)),O=atob(O);for(var j=new Uint8Array(O.length),ee=0;ee<O.length;ee++)j[ee]=O.charCodeAt(ee);return j}var ze;function Ke(){return ze||(ze=new Uint8Array(0))}var pt={},dt=typeof Uint8Array.prototype.slice=="function",pe=0,Le=0;function Ue(O){var j=0>O;O=Math.abs(O);var ee=O>>>0;O=Math.floor((O-ee)/4294967296),j&&(ee=o(je(ee,O)),j=ee.next().value,O=ee.next().value,ee=j),pe=ee>>>0,Le=O>>>0}var Ze=typeof BigInt=="function";function je(O,j){return j=~j,O?O=~O+1:j+=1,[O,j]}function lt(O,j){this.i=O>>>0,this.h=j>>>0}function st(O){if(!O)return ot||(ot=new lt(0,0));if(!/^-?\d+$/.test(O))return null;if(16>O.length)Ue(Number(O));else if(Ze)O=BigInt(O),pe=Number(O&BigInt(4294967295))>>>0,Le=Number(O>>BigInt(32)&BigInt(4294967295));else{var j=+(O[0]==="-");Le=pe=0;for(var ee=O.length,oe=j,we=(ee-j)%6+j;we<=ee;oe=we,we+=6)oe=Number(O.slice(oe,we)),Le*=1e6,pe=1e6*pe+oe,4294967296<=pe&&(Le+=pe/4294967296|0,pe%=4294967296);j&&(j=o(je(pe,Le)),O=j.next().value,j=j.next().value,pe=O,Le=j)}return new lt(pe,Le)}var ot;function Ut(O,j){return Error("Invalid wire type: "+O+" (at position "+j+")")}function mt(){return Error("Failed to read varint, encoding is invalid.")}function ce(O,j){return Error("Tried to read past the end of the data "+j+" > "+O)}function re(){throw Error("Invalid UTF8")}function $e(O,j){return j=String.fromCharCode.apply(null,j),O==null?j:O+j}var Xe=void 0,at,et=typeof TextDecoder<"u",Ft,At=typeof TextEncoder<"u",_t;function Xt(O){if(O!==pt)throw Error("illegal external caller")}function yt(O,j){if(Xt(j),this.V=O,O!=null&&O.length===0)throw Error("ByteString should be constructed with non-empty values")}function Mt(){return _t||(_t=new yt(null,pt))}function an(O){Xt(pt);var j=O.V;return j=j==null||le&&j!=null&&j instanceof Uint8Array?j:typeof j=="string"?Pe(j):null,j==null?j:O.V=j}function tn(O){if(typeof O=="string")return{buffer:Pe(O),C:!1};if(Array.isArray(O))return{buffer:new Uint8Array(O),C:!1};if(O.constructor===Uint8Array)return{buffer:O,C:!1};if(O.constructor===ArrayBuffer)return{buffer:new Uint8Array(O),C:!1};if(O.constructor===yt)return{buffer:an(O)||Ke(),C:!0};if(O instanceof Uint8Array)return{buffer:new Uint8Array(O.buffer,O.byteOffset,O.byteLength),C:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function zt(O,j){this.i=null,this.m=!1,this.h=this.j=this.l=0,hn(this,O,j)}function hn(O,j,ee){ee=ee===void 0?{}:ee,O.S=ee.S===void 0?!1:ee.S,j&&(j=tn(j),O.i=j.buffer,O.m=j.C,O.l=0,O.j=O.i.length,O.h=O.l)}zt.prototype.reset=function(){this.h=this.l};function Te(O,j){if(O.h=j,j>O.j)throw ce(O.j,j)}function qe(O){var j=O.i,ee=O.h,oe=j[ee++],we=oe&127;if(oe&128&&(oe=j[ee++],we|=(oe&127)<<7,oe&128&&(oe=j[ee++],we|=(oe&127)<<14,oe&128&&(oe=j[ee++],we|=(oe&127)<<21,oe&128&&(oe=j[ee++],we|=oe<<28,oe&128&&j[ee++]&128&&j[ee++]&128&&j[ee++]&128&&j[ee++]&128&&j[ee++]&128)))))throw mt();return Te(O,ee),we}function $t(O,j){if(0>j)throw Error("Tried to read a negative byte length: "+j);var ee=O.h,oe=ee+j;if(oe>O.j)throw ce(j,O.j-ee);return O.h=oe,ee}var en=[];function Vt(){this.h=[]}Vt.prototype.length=function(){return this.h.length},Vt.prototype.end=function(){var O=this.h;return this.h=[],O};function kt(O,j,ee){for(;0<ee||127<j;)O.h.push(j&127|128),j=(j>>>7|ee<<25)>>>0,ee>>>=7;O.h.push(j)}function un(O,j){for(;127<j;)O.h.push(j&127|128),j>>>=7;O.h.push(j)}function In(O,j){if(en.length){var ee=en.pop();hn(ee,O,j),O=ee}else O=new zt(O,j);this.h=O,this.j=this.h.h,this.i=this.l=-1,this.setOptions(j)}In.prototype.setOptions=function(O){O=O===void 0?{}:O,this.ca=O.ca===void 0?!1:O.ca},In.prototype.reset=function(){this.h.reset(),this.j=this.h.h,this.i=this.l=-1};function Tr(O){var j=O.h;if(j.h==j.j)return!1;O.j=O.h.h;var ee=qe(O.h)>>>0;if(j=ee>>>3,ee&=7,!(0<=ee&&5>=ee))throw Ut(ee,O.j);if(1>j)throw Error("Invalid field number: "+j+" (at position "+O.j+")");return O.l=j,O.i=ee,!0}function lr(O){switch(O.i){case 0:if(O.i!=0)lr(O);else e:{O=O.h;for(var j=O.h,ee=j+10,oe=O.i;j<ee;)if((oe[j++]&128)===0){Te(O,j);break e}throw mt()}break;case 1:O=O.h,Te(O,O.h+8);break;case 2:O.i!=2?lr(O):(j=qe(O.h)>>>0,O=O.h,Te(O,O.h+j));break;case 5:O=O.h,Te(O,O.h+4);break;case 3:j=O.l;do{if(!Tr(O))throw Error("Unmatched start-group tag: stream EOF");if(O.i==4){if(O.l!=j)throw Error("Unmatched end-group tag");break}lr(O)}while(!0);break;default:throw Ut(O.i,O.j)}}var Qs=[];function es(){this.j=[],this.i=0,this.h=new Vt}function pi(O,j){j.length!==0&&(O.j.push(j),O.i+=j.length)}function Si(O,j){if(j=j.R){pi(O,O.h.end());for(var ee=0;ee<j.length;ee++)pi(O,an(j[ee])||Ke())}}var Ri=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol():void 0;function as(O,j){return Ri?O[Ri]|=j:O.A!==void 0?O.A|=j:(Object.defineProperties(O,{A:{value:j,configurable:!0,writable:!0,enumerable:!1}}),j)}function $o(O,j){Ri?O[Ri]&&(O[Ri]&=~j):O.A!==void 0&&(O.A&=~j)}function vr(O){var j;return Ri?j=O[Ri]:j=O.A,j??0}function Nn(O,j){Ri?O[Ri]=j:O.A!==void 0?O.A=j:Object.defineProperties(O,{A:{value:j,configurable:!0,writable:!0,enumerable:!1}})}function $s(O){return as(O,1),O}function ci(O,j){Nn(j,(O|0)&-51)}function ae(O,j){Nn(j,(O|18)&-41)}var me={};function Oe(O){return O!==null&&typeof O=="object"&&!Array.isArray(O)&&O.constructor===Object}var nt,ct=[];Nn(ct,23),nt=Object.freeze(ct);function St(O){if(vr(O.o)&2)throw Error("Cannot mutate an immutable Message")}function jt(O){var j=O.length;(j=j?O[j-1]:void 0)&&Oe(j)?j.g=1:(j={},O.push((j.g=1,j)))}function se(O){var j=O.i+O.G;return O.B||(O.B=O.o[j]={})}function Se(O,j){return j===-1?null:j>=O.i?O.B?O.B[j]:void 0:O.o[j+O.G]}function Ae(O,j,ee,oe){St(O),Me(O,j,ee,oe)}function Me(O,j,ee,oe){O.j&&(O.j=void 0),j>=O.i||oe?se(O)[j]=ee:(O.o[j+O.G]=ee,(O=O.B)&&j in O&&delete O[j])}function _e(O,j,ee,oe){var we=Se(O,j);Array.isArray(we)||(we=nt);var Ee=vr(we);if(Ee&1||$s(we),oe)Ee&2||as(we,2),ee&1||Object.freeze(we);else{oe=!(ee&2);var Ce=Ee&2;ee&1||!Ce?oe&&Ee&16&&!Ce&&$o(we,16):(we=$s(Array.prototype.slice.call(we)),Me(O,j,we))}return we}function Nt(O,j){var ee=Se(O,j),oe=ee==null?ee:typeof ee=="number"||ee==="NaN"||ee==="Infinity"||ee==="-Infinity"?Number(ee):void 0;return oe!=null&&oe!==ee&&Me(O,j,oe),oe}function vt(O,j,ee,oe,we){O.h||(O.h={});var Ee=O.h[ee],Ce=_e(O,ee,3,we);if(!Ee){var He=Ce;Ee=[];var ht=!!(vr(O.o)&16);Ce=!!(vr(He)&2);var Ht=He;!we&&Ce&&(He=Array.prototype.slice.call(He));for(var Zt=Ce,Un=0;Un<He.length;Un++){var _n=He[Un],cn=j,xn=!1;if(xn=xn===void 0?!1:xn,_n=Array.isArray(_n)?new cn(_n):xn?new cn:void 0,_n!==void 0){cn=_n.o;var ir=xn=vr(cn);Ce&&(ir|=2),ht&&(ir|=16),ir!=xn&&Nn(cn,ir),cn=ir,Zt=Zt||!!(2&cn),Ee.push(_n)}}return O.h[ee]=Ee,ht=vr(He),j=ht|33,j=Zt?j&-9:j|8,ht!=j&&(Zt=He,Object.isFrozen(Zt)&&(Zt=Array.prototype.slice.call(Zt)),Nn(Zt,j),He=Zt),Ht!==He&&Me(O,ee,He),(we||oe&&Ce)&&as(Ee,2),oe&&Object.freeze(Ee),Ee}return we||(we=Object.isFrozen(Ee),oe&&!we?Object.freeze(Ee):!oe&&we&&(Ee=Array.prototype.slice.call(Ee),O.h[ee]=Ee)),Ee}function Tt(O,j,ee){var oe=!!(vr(O.o)&2);if(j=vt(O,j,ee,oe,oe),O=_e(O,ee,3,oe),!(oe||vr(O)&8)){for(oe=0;oe<j.length;oe++){if(ee=j[oe],vr(ee.o)&2){var we=cr(ee,!1);we.j=ee}else we=ee;ee!==we&&(j[oe]=we,O[oe]=we.o)}as(O,8)}return j}function Et(O,j,ee){if(ee!=null&&typeof ee!="number")throw Error("Value of float/double field must be a number|null|undefined, found "+typeof ee+": "+ee);Ae(O,j,ee)}function qt(O,j,ee,oe,we){St(O);var Ee=vt(O,ee,j,!1,!1);return ee=oe??new ee,O=_e(O,j,2,!1),we!=null?(Ee.splice(we,0,ee),O.splice(we,0,ee.o)):(Ee.push(ee),O.push(ee.o)),ee.C()&&$o(O,8),ee}function Qt(O,j){return O??j}function Wt(O,j,ee){return ee=ee===void 0?0:ee,Qt(Nt(O,j),ee)}var bn;function Hn(O){switch(typeof O){case"number":return isFinite(O)?O:String(O);case"object":if(O)if(Array.isArray(O)){if((vr(O)&128)!==0)return O=Array.prototype.slice.call(O),jt(O),O}else{if(le&&O!=null&&O instanceof Uint8Array)return ue(O);if(O instanceof yt){var j=O.V;return j==null?"":typeof j=="string"?j:O.V=ue(j)}}}return O}function On(O,j,ee,oe){if(O!=null){if(Array.isArray(O))O=or(O,j,ee,oe!==void 0);else if(Oe(O)){var we={},Ee;for(Ee in O)we[Ee]=On(O[Ee],j,ee,oe);O=we}else O=j(O,oe);return O}}function or(O,j,ee,oe){var we=vr(O);oe=oe?!!(we&16):void 0,O=Array.prototype.slice.call(O);for(var Ee=0;Ee<O.length;Ee++)O[Ee]=On(O[Ee],j,ee,oe);return ee(we,O),O}function yn(O){return O.ja===me?O.toJSON():Hn(O)}function ln(O,j){O&128&&jt(j)}function Rr(O,j,ee){if(ee=ee===void 0?ae:ee,O!=null){if(le&&O instanceof Uint8Array)return O.length?new yt(new Uint8Array(O),pt):Mt();if(Array.isArray(O)){var oe=vr(O);return oe&2?O:j&&!(oe&32)&&(oe&16||oe===0)?(Nn(O,oe|2),O):(O=or(O,Rr,oe&4?ae:ee,!0),j=vr(O),j&4&&j&2&&Object.freeze(O),O)}return O.ja===me?Kr(O):O}}function Jn(O,j,ee,oe,we,Ee,Ce){if(O=O.h&&O.h[ee]){if(oe=vr(O),oe&2?oe=O:(Ee=J(O,Kr),ae(oe,Ee),Object.freeze(Ee),oe=Ee),St(j),Ce=oe==null?nt:$s([]),oe!=null){for(Ee=!!oe.length,O=0;O<oe.length;O++){var He=oe[O];Ee=Ee&&!(vr(He.o)&2),Ce[O]=He.o}Ee=(Ee?8:0)|1,O=vr(Ce),(O&Ee)!==Ee&&(Object.isFrozen(Ce)&&(Ce=Array.prototype.slice.call(Ce)),Nn(Ce,O|Ee)),j.h||(j.h={}),j.h[ee]=oe}else j.h&&(j.h[ee]=void 0);Me(j,ee,Ce,we)}else Ae(j,ee,Rr(oe,Ee,Ce),we)}function Kr(O){return vr(O.o)&2||(O=cr(O,!0),as(O.o,2)),O}function cr(O,j){var ee=O.o,oe=[];as(oe,16);var we=O.constructor.h;if(we&&oe.push(we),we=O.B,we){oe.length=ee.length,oe.fill(void 0,oe.length,ee.length);var Ee={};oe[oe.length-1]=Ee}(vr(ee)&128)!==0&&jt(oe),j=j||O.C()?ae:ci,Ee=O.constructor,bn=oe,oe=new Ee(oe),bn=void 0,O.R&&(oe.R=O.R.slice()),Ee=!!(vr(ee)&16);for(var Ce=we?ee.length-1:ee.length,He=0;He<Ce;He++)Jn(O,oe,He-O.G,ee[He],!1,Ee,j);if(we)for(var ht in we)Jn(O,oe,+ht,we[ht],!0,Ee,j);return oe}function jn(O,j,ee){O==null&&(O=bn),bn=void 0;var oe=this.constructor.i||0,we=0<oe,Ee=this.constructor.h,Ce=!1;if(O==null){O=Ee?[Ee]:[];var He=48,ht=!0;we&&(oe=0,He|=128),Nn(O,He)}else{if(!Array.isArray(O)||Ee&&Ee!==O[0])throw Error();var Ht=He=as(O,0);if((ht=(16&Ht)!==0)&&((Ce=(32&Ht)!==0)||(Ht|=32)),we){if(128&Ht)oe=0;else if(0<O.length){var Zt=O[O.length-1];if(Oe(Zt)&&"g"in Zt){oe=0,Ht|=128,delete Zt.g;var Un=!0,_n;for(_n in Zt){Un=!1;break}Un&&O.pop()}}}else if(128&Ht)throw Error();He!==Ht&&Nn(O,Ht)}this.G=(Ee?0:-1)-oe,this.h=void 0,this.o=O;e:{if(Ee=this.o.length,oe=Ee-1,Ee&&(Ee=this.o[oe],Oe(Ee))){this.B=Ee,this.i=oe-this.G;break e}j!==void 0&&-1<j?(this.i=Math.max(j,oe+1-this.G),this.B=void 0):this.i=Number.MAX_VALUE}if(!we&&this.B&&"g"in this.B)throw Error('Unexpected "g" flag in sparse object of message that is not a group type.');if(ee){j=ht&&!Ce&&!0,we=this.i;var cn;for(ht=0;ht<ee.length;ht++)Ce=ee[ht],Ce<we?(Ce+=this.G,(oe=O[Ce])?Zn(oe,j):O[Ce]=nt):(cn||(cn=se(this)),(oe=cn[Ce])?Zn(oe,j):cn[Ce]=nt)}}jn.prototype.toJSON=function(){return or(this.o,yn,ln)},jn.prototype.C=function(){return!!(vr(this.o)&2)};function Zn(O,j){if(Array.isArray(O)){var ee=vr(O),oe=1;!j||ee&2||(oe|=16),(ee&oe)!==oe&&Nn(O,ee|oe)}}jn.prototype.ja=me,jn.prototype.toString=function(){return this.o.toString()};function Mn(O,j,ee){if(ee){var oe={},we;for(we in ee){var Ee=ee[we],Ce=Ee.qa;Ce||(oe.J=Ee.wa||Ee.oa.W,Ee.ia?(oe.aa=yf(Ee.ia),Ce=function(He){return function(ht,Ht,Zt){return He.J(ht,Ht,Zt,He.aa)}}(oe)):Ee.ka?(oe.Z=Oh(Ee.da.P,Ee.ka),Ce=function(He){return function(ht,Ht,Zt){return He.J(ht,Ht,Zt,He.Z)}}(oe)):Ce=oe.J,Ee.qa=Ce),Ce(j,O,Ee.da),oe={J:oe.J,aa:oe.aa,Z:oe.Z}}}Si(j,O)}var Wr=Symbol();function wi(O,j,ee){return O[Wr]||(O[Wr]=function(oe,we){return j(oe,we,ee)})}function Sr(O){var j=O[Wr];if(!j){var ee=Lo(O);j=function(oe,we){return bf(oe,we,ee)},O[Wr]=j}return j}function Ci(O){var j=O.ia;if(j)return Sr(j);if(j=O.va)return wi(O.da.P,j,O.ka)}function id(O){var j=Ci(O),ee=O.da,oe=O.oa.U;return j?function(we,Ee){return oe(we,Ee,ee,j)}:function(we,Ee){return oe(we,Ee,ee)}}function hs(O,j){var ee=O[j];return typeof ee=="function"&&ee.length===0&&(ee=ee(),O[j]=ee),Array.isArray(ee)&&(ll in ee||sd in ee||0<ee.length&&typeof ee[0]=="function")?ee:void 0}function t0(O,j,ee,oe,we,Ee){j.P=O[0];var Ce=1;if(O.length>Ce&&typeof O[Ce]!="number"){var He=O[Ce++];ee(j,He)}for(;Ce<O.length;){ee=O[Ce++];for(var ht=Ce+1;ht<O.length&&typeof O[ht]!="number";)ht++;switch(He=O[Ce++],ht-=Ce,ht){case 0:oe(j,ee,He);break;case 1:(ht=hs(O,Ce))?(Ce++,we(j,ee,He,ht)):oe(j,ee,He,O[Ce++]);break;case 2:ht=Ce++,ht=hs(O,ht),we(j,ee,He,ht,O[Ce++]);break;case 3:Ee(j,ee,He,O[Ce++],O[Ce++],O[Ce++]);break;case 4:Ee(j,ee,He,O[Ce++],O[Ce++],O[Ce++],O[Ce++]);break;default:throw Error("unexpected number of binary field arguments: "+ht)}}return j}var au=Symbol();function yf(O){var j=O[au];if(!j){var ee=Wl(O);j=function(oe,we){return ad(oe,we,ee)},O[au]=j}return j}function Oh(O,j){var ee=O[au];return ee||(ee=function(oe,we){return Mn(oe,we,j)},O[au]=ee),ee}var sd=Symbol();function Fv(O,j){O.push(j)}function Bh(O,j,ee){O.push(j,ee.W)}function im(O,j,ee,oe){var we=yf(oe),Ee=Wl(oe).P,Ce=ee.W;O.push(j,function(He,ht,Ht){return Ce(He,ht,Ht,Ee,we)})}function sm(O,j,ee,oe,we,Ee){var Ce=Oh(oe,Ee),He=ee.W;O.push(j,function(ht,Ht,Zt){return He(ht,Ht,Zt,oe,Ce)})}function Wl(O){var j=O[sd];return j||(j=t0(O,O[sd]=[],Fv,Bh,im,sm),ll in O&&sd in O&&(O.length=0),j)}var ll=Symbol();function n0(O,j){O[0]=j}function $h(O,j,ee,oe){var we=ee.U;O[j]=oe?function(Ee,Ce,He){return we(Ee,Ce,He,oe)}:we}function r0(O,j,ee,oe,we){var Ee=ee.U,Ce=Sr(oe),He=Lo(oe).P;O[j]=function(ht,Ht,Zt){return Ee(ht,Ht,Zt,He,Ce,we)}}function vf(O,j,ee,oe,we,Ee,Ce){var He=ee.U,ht=wi(oe,we,Ee);O[j]=function(Ht,Zt,Un){return He(Ht,Zt,Un,oe,ht,Ce)}}function Lo(O){var j=O[ll];return j||(j=t0(O,O[ll]={},n0,$h,r0,vf),ll in O&&sd in O&&(O.length=0),j)}function bf(O,j,ee){for(;Tr(j)&&j.i!=4;){var oe=j.l,we=ee[oe];if(!we){var Ee=ee[0];Ee&&(Ee=Ee[oe])&&(we=ee[oe]=id(Ee))}if(!we||!we(j,O,oe)){we=j,oe=O,Ee=we.j,lr(we);var Ce=we;if(!Ce.ca){if(we=Ce.h.h-Ee,Ce.h.h=Ee,Ce=Ce.h,we==0)we=Mt();else{if(Ee=$t(Ce,we),Ce.S&&Ce.m)we=Ce.i.subarray(Ee,Ee+we);else{Ce=Ce.i;var He=Ee;we=Ee+we,we=He===we?Ke():dt?Ce.slice(He,we):new Uint8Array(Ce.subarray(He,we))}we=we.length==0?Mt():new yt(we,pt)}(Ee=oe.R)?Ee.push(we):oe.R=[we]}}}return O}function ad(O,j,ee){for(var oe=ee.length,we=oe%2==1,Ee=we?1:0;Ee<oe;Ee+=2)(0,ee[Ee+1])(j,O,ee[Ee]);Mn(O,j,we?ee[0]:void 0)}function fo(O,j){return{U:O,W:j}}var ho=fo(function(O,j,ee){if(O.i!==5)return!1;O=O.h;var oe=O.i,we=O.h,Ee=oe[we],Ce=oe[we+1],He=oe[we+2];return oe=oe[we+3],Te(O,O.h+4),Ce=(Ee<<0|Ce<<8|He<<16|oe<<24)>>>0,O=2*(Ce>>31)+1,Ee=Ce>>>23&255,Ce&=8388607,Ae(j,ee,Ee==255?Ce?NaN:1/0*O:Ee==0?O*Math.pow(2,-149)*Ce:O*Math.pow(2,Ee-150)*(Ce+Math.pow(2,23))),!0},function(O,j,ee){if(j=Nt(j,ee),j!=null){un(O.h,8*ee+5),O=O.h;var oe=+j;oe===0?0<1/oe?pe=Le=0:(Le=0,pe=2147483648):isNaN(oe)?(Le=0,pe=2147483647):(oe=(ee=0>oe?-2147483648:0)?-oe:oe,34028234663852886e22<oe?(Le=0,pe=(ee|2139095040)>>>0):11754943508222875e-54>oe?(oe=Math.round(oe/Math.pow(2,-149)),Le=0,pe=(ee|oe)>>>0):(j=Math.floor(Math.log(oe)/Math.LN2),oe*=Math.pow(2,-j),oe=Math.round(8388608*oe),16777216<=oe&&++j,Le=0,pe=(ee|j+127<<23|oe&8388607)>>>0)),ee=pe,O.h.push(ee>>>0&255),O.h.push(ee>>>8&255),O.h.push(ee>>>16&255),O.h.push(ee>>>24&255)}}),am=fo(function(O,j,ee){if(O.i!==0)return!1;var oe=O.h,we=0,Ee=O=0,Ce=oe.i,He=oe.h;do{var ht=Ce[He++];we|=(ht&127)<<Ee,Ee+=7}while(32>Ee&&ht&128);for(32<Ee&&(O|=(ht&127)>>4),Ee=3;32>Ee&&ht&128;Ee+=7)ht=Ce[He++],O|=(ht&127)<<Ee;if(Te(oe,He),128>ht)oe=we>>>0,ht=O>>>0,(O=ht&2147483648)&&(oe=~oe+1>>>0,ht=~ht>>>0,oe==0&&(ht=ht+1>>>0)),oe=4294967296*ht+(oe>>>0);else throw mt();return Ae(j,ee,O?-oe:oe),!0},function(O,j,ee){j=Se(j,ee),j!=null&&(typeof j=="string"&&st(j),j!=null&&(un(O.h,8*ee),typeof j=="number"?(O=O.h,Ue(j),kt(O,pe,Le)):(ee=st(j),kt(O.h,ee.i,ee.h))))}),i0=fo(function(O,j,ee){return O.i!==0?!1:(Ae(j,ee,qe(O.h)),!0)},function(O,j,ee){if(j=Se(j,ee),j!=null&&j!=null)if(un(O.h,8*ee),O=O.h,ee=j,0<=ee)un(O,ee);else{for(j=0;9>j;j++)O.h.push(ee&127|128),ee>>=7;O.h.push(1)}}),Ic=fo(function(O,j,ee){if(O.i!==2)return!1;var oe=qe(O.h)>>>0;O=O.h;var we=$t(O,oe);if(O=O.i,et){var Ee=O,Ce;(Ce=at)||(Ce=at=new TextDecoder("utf-8",{fatal:!0})),O=we+oe,Ee=we===0&&O===Ee.length?Ee:Ee.subarray(we,O);try{var He=Ce.decode(Ee)}catch(Un){if(Xe===void 0){try{Ce.decode(new Uint8Array([128]))}catch{}try{Ce.decode(new Uint8Array([97])),Xe=!0}catch{Xe=!1}}throw!Xe&&(at=void 0),Un}}else{He=we,oe=He+oe,we=[];for(var ht=null,Ht,Zt;He<oe;)Ht=O[He++],128>Ht?we.push(Ht):224>Ht?He>=oe?re():(Zt=O[He++],194>Ht||(Zt&192)!==128?(He--,re()):we.push((Ht&31)<<6|Zt&63)):240>Ht?He>=oe-1?re():(Zt=O[He++],(Zt&192)!==128||Ht===224&&160>Zt||Ht===237&&160<=Zt||((Ee=O[He++])&192)!==128?(He--,re()):we.push((Ht&15)<<12|(Zt&63)<<6|Ee&63)):244>=Ht?He>=oe-2?re():(Zt=O[He++],(Zt&192)!==128||(Ht<<28)+(Zt-144)>>30!==0||((Ee=O[He++])&192)!==128||((Ce=O[He++])&192)!==128?(He--,re()):(Ht=(Ht&7)<<18|(Zt&63)<<12|(Ee&63)<<6|Ce&63,Ht-=65536,we.push((Ht>>10&1023)+55296,(Ht&1023)+56320))):re(),8192<=we.length&&(ht=$e(ht,we),we.length=0);He=$e(ht,we)}return Ae(j,ee,He),!0},function(O,j,ee){if(j=Se(j,ee),j!=null){var oe=!1;if(oe=oe===void 0?!1:oe,At){if(oe&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(j))throw Error("Found an unpaired surrogate");j=(Ft||(Ft=new TextEncoder)).encode(j)}else{for(var we=0,Ee=new Uint8Array(3*j.length),Ce=0;Ce<j.length;Ce++){var He=j.charCodeAt(Ce);if(128>He)Ee[we++]=He;else{if(2048>He)Ee[we++]=He>>6|192;else{if(55296<=He&&57343>=He){if(56319>=He&&Ce<j.length){var ht=j.charCodeAt(++Ce);if(56320<=ht&&57343>=ht){He=1024*(He-55296)+ht-56320+65536,Ee[we++]=He>>18|240,Ee[we++]=He>>12&63|128,Ee[we++]=He>>6&63|128,Ee[we++]=He&63|128;continue}else Ce--}if(oe)throw Error("Found an unpaired surrogate");He=65533}Ee[we++]=He>>12|224,Ee[we++]=He>>6&63|128}Ee[we++]=He&63|128}}j=we===Ee.length?Ee:Ee.subarray(0,we)}un(O.h,8*ee+2),un(O.h,j.length),pi(O,O.h.end()),pi(O,j)}}),od=fo(function(O,j,ee,oe,we){if(O.i!==2)return!1;j=qt(j,ee,oe),ee=O.h.j,oe=qe(O.h)>>>0;var Ee=O.h.h+oe,Ce=Ee-ee;if(0>=Ce&&(O.h.j=Ee,we(j,O,void 0,void 0,void 0),Ce=Ee-O.h.h),Ce)throw Error("Message parsing ended unexpectedly. Expected to read "+(oe+" bytes, instead read "+(oe-Ce)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return O.h.h=Ee,O.h.j=ee,!0},function(O,j,ee,oe,we){if(j=Tt(j,oe,ee),j!=null)for(oe=0;oe<j.length;oe++){var Ee=O;un(Ee.h,8*ee+2);var Ce=Ee.h.end();pi(Ee,Ce),Ce.push(Ee.i),Ee=Ce,we(j[oe],O),Ce=O;var He=Ee.pop();for(He=Ce.i+Ce.h.length()-He;127<He;)Ee.push(He&127|128),He>>>=7,Ce.i++;Ee.push(He),Ce.i++}});function ld(O){return function(j,ee){e:{if(Qs.length){var oe=Qs.pop();oe.setOptions(ee),hn(oe.h,j,ee),j=oe}else j=new In(j,ee);try{var we=Lo(O),Ee=bf(new we.P,j,we);break e}finally{we=j.h,we.i=null,we.m=!1,we.l=0,we.j=0,we.h=0,we.S=!1,j.l=-1,j.i=-1,100>Qs.length&&Qs.push(j)}Ee=void 0}return Ee}}function ea(O){return function(){var j=new es;ad(this,j,Wl(O)),pi(j,j.h.end());for(var ee=new Uint8Array(j.i),oe=j.j,we=oe.length,Ee=0,Ce=0;Ce<we;Ce++){var He=oe[Ce];ee.set(He,Ee),Ee+=He.length}return j.j=[ee],ee}}function po(O){jn.call(this,O)}b(po,jn);var cd=[po,1,i0,2,ho,3,Ic,4,Ic];po.prototype.l=ea(cd);function ou(O){jn.call(this,O,-1,Pv)}b(ou,jn),ou.prototype.addClassification=function(O,j){return qt(this,1,po,O,j),this};var Pv=[1],jl=ld([ou,1,od,cd]);function cl(O){jn.call(this,O)}b(cl,jn);var ud=[cl,1,ho,2,ho,3,ho,4,ho,5,ho];cl.prototype.l=ea(ud);function dd(O){jn.call(this,O,-1,s0)}b(dd,jn);var s0=[1],a0=ld([dd,1,od,ud]);function om(O){jn.call(this,O)}b(om,jn);var Ls=[om,1,ho,2,ho,3,ho,4,ho,5,ho,6,am],lm=ld(Ls);om.prototype.l=ea(Ls);function o0(O,j,ee){if(ee=O.createShader(ee===0?O.VERTEX_SHADER:O.FRAGMENT_SHADER),O.shaderSource(ee,j),O.compileShader(ee),!O.getShaderParameter(ee,O.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+O.getShaderInfoLog(ee));return ee}function l0(O){return Tt(O,po,1).map(function(j){var ee=Se(j,1);return{index:ee??0,score:Wt(j,2),label:Se(j,3)!=null?Qt(Se(j,3),""):void 0,displayName:Se(j,4)!=null?Qt(Se(j,4),""):void 0}})}function c0(O){return{x:Wt(O,1),y:Wt(O,2),z:Wt(O,3),visibility:Nt(O,4)!=null?Wt(O,4):void 0}}function u0(O){return O.map(function(j){return Tt(a0(j),cl,1).map(c0)})}function fd(O,j){this.i=O,this.h=j,this.m=0}function Lh(O,j,ee){return Uv(O,j),typeof O.h.canvas.transferToImageBitmap=="function"?Promise.resolve(O.h.canvas.transferToImageBitmap()):ee?Promise.resolve(O.h.canvas):typeof createImageBitmap=="function"?createImageBitmap(O.h.canvas):(O.j===void 0&&(O.j=document.createElement("canvas")),new Promise(function(oe){O.j.height=O.h.canvas.height,O.j.width=O.h.canvas.width,O.j.getContext("2d",{}).drawImage(O.h.canvas,0,0,O.h.canvas.width,O.h.canvas.height),oe(O.j)}))}function Uv(O,j){var ee=O.h;if(O.s===void 0){var oe=o0(ee,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),we=o0(ee,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),Ee=ee.createProgram();if(ee.attachShader(Ee,oe),ee.attachShader(Ee,we),ee.linkProgram(Ee),!ee.getProgramParameter(Ee,ee.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+ee.getProgramInfoLog(Ee));oe=O.s=Ee,ee.useProgram(oe),we=ee.getUniformLocation(oe,"sampler0"),O.l={O:ee.getAttribLocation(oe,"aVertex"),N:ee.getAttribLocation(oe,"aTex"),xa:we},O.v=ee.createBuffer(),ee.bindBuffer(ee.ARRAY_BUFFER,O.v),ee.enableVertexAttribArray(O.l.O),ee.vertexAttribPointer(O.l.O,2,ee.FLOAT,!1,0,0),ee.bufferData(ee.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),ee.STATIC_DRAW),ee.bindBuffer(ee.ARRAY_BUFFER,null),O.u=ee.createBuffer(),ee.bindBuffer(ee.ARRAY_BUFFER,O.u),ee.enableVertexAttribArray(O.l.N),ee.vertexAttribPointer(O.l.N,2,ee.FLOAT,!1,0,0),ee.bufferData(ee.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),ee.STATIC_DRAW),ee.bindBuffer(ee.ARRAY_BUFFER,null),ee.uniform1i(we,0)}oe=O.l,ee.useProgram(O.s),ee.canvas.width=j.width,ee.canvas.height=j.height,ee.viewport(0,0,j.width,j.height),ee.activeTexture(ee.TEXTURE0),O.i.bindTexture2d(j.glName),ee.enableVertexAttribArray(oe.O),ee.bindBuffer(ee.ARRAY_BUFFER,O.v),ee.vertexAttribPointer(oe.O,2,ee.FLOAT,!1,0,0),ee.enableVertexAttribArray(oe.N),ee.bindBuffer(ee.ARRAY_BUFFER,O.u),ee.vertexAttribPointer(oe.N,2,ee.FLOAT,!1,0,0),ee.bindFramebuffer(ee.DRAW_FRAMEBUFFER?ee.DRAW_FRAMEBUFFER:ee.FRAMEBUFFER,null),ee.clearColor(0,0,0,0),ee.clear(ee.COLOR_BUFFER_BIT),ee.colorMask(!0,!0,!0,!0),ee.drawArrays(ee.TRIANGLE_FAN,0,4),ee.disableVertexAttribArray(oe.O),ee.disableVertexAttribArray(oe.N),ee.bindBuffer(ee.ARRAY_BUFFER,null),O.i.bindTexture2d(0)}function zv(O){this.h=O}var Hv=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function d0(O,j){return j+O}function xf(O,j){window[O]=j}function Vv(O){var j=document.createElement("script");return j.setAttribute("src",O),j.setAttribute("crossorigin","anonymous"),new Promise(function(ee){j.addEventListener("load",function(){ee()},!1),j.addEventListener("error",function(){ee()},!1),document.body.appendChild(j)})}function f0(){return k(function(O){switch(O.h){case 1:return O.s=2,_(O,WebAssembly.instantiate(Hv),4);case 4:O.h=3,O.s=0;break;case 2:return O.s=0,O.l=null,O.return(!1);case 3:return O.return(!0)}})}function Fh(O){if(this.h=O,this.listeners={},this.l={},this.L={},this.s={},this.v={},this.M=this.u=this.ga=!0,this.I=Promise.resolve(),this.fa="",this.D={},this.locateFile=O&&O.locateFile||d0,typeof window=="object")var j=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")j=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.ha=j,O.options){j=o(Object.keys(O.options));for(var ee=j.next();!ee.done;ee=j.next()){ee=ee.value;var oe=O.options[ee].default;oe!==void 0&&(this.l[ee]=typeof oe=="function"?oe():oe)}}}n=Fh.prototype,n.close=function(){return this.j&&this.j.delete(),Promise.resolve()};function cm(O){var j,ee,oe,we,Ee,Ce,He,ht,Ht,Zt,Un;return k(function(_n){switch(_n.h){case 1:return O.ga?(j=O.h.files===void 0?[]:typeof O.h.files=="function"?O.h.files(O.l):O.h.files,_(_n,f0(),2)):_n.return();case 2:if(ee=_n.i,typeof window=="object")return xf("createMediapipeSolutionsWasm",{locateFile:O.locateFile}),xf("createMediapipeSolutionsPackedAssets",{locateFile:O.locateFile}),Ce=j.filter(function(cn){return cn.data!==void 0}),He=j.filter(function(cn){return cn.data===void 0}),ht=Promise.all(Ce.map(function(cn){var xn=Ph(O,cn.url);if(cn.path!==void 0){var ir=cn.path;xn=xn.then(function(Yr){return O.overrideFile(ir,Yr),Promise.resolve(Yr)})}return xn})),Ht=Promise.all(He.map(function(cn){return cn.simd===void 0||cn.simd&&ee||!cn.simd&&!ee?Vv(O.locateFile(cn.url,O.ha)):Promise.resolve()})).then(function(){var cn,xn,ir;return k(function(Yr){if(Yr.h==1)return cn=window.createMediapipeSolutionsWasm,xn=window.createMediapipeSolutionsPackedAssets,ir=O,_(Yr,cn(xn),2);ir.i=Yr.i,Yr.h=0})}),Zt=function(){return k(function(cn){return O.h.graph&&O.h.graph.url?cn=_(cn,Ph(O,O.h.graph.url),0):(cn.h=0,cn=void 0),cn})}(),_(_n,Promise.all([Ht,ht,Zt]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return oe=j.filter(function(cn){return cn.simd===void 0||cn.simd&&ee||!cn.simd&&!ee}).map(function(cn){return O.locateFile(cn.url,O.ha)}),importScripts.apply(null,l(oe)),we=O,_(_n,createMediapipeSolutionsWasm(Module),6);case 6:we.i=_n.i,O.m=new OffscreenCanvas(1,1),O.i.canvas=O.m,Ee=O.i.GL.createContext(O.m,{antialias:!1,alpha:!1,ua:typeof WebGL2RenderingContext<"u"?2:1}),O.i.GL.makeContextCurrent(Ee),_n.h=4;break;case 7:if(O.m=document.createElement("canvas"),Un=O.m.getContext("webgl2",{}),!Un&&(Un=O.m.getContext("webgl",{}),!Un))return alert("Failed to create WebGL canvas context when passing video frame."),_n.return();O.K=Un,O.i.canvas=O.m,O.i.createContext(O.m,!0,!0,{});case 4:O.j=new O.i.SolutionWasm,O.ga=!1,_n.h=0}})}function Gv(O){var j,ee,oe,we,Ee,Ce,He,ht;return k(function(Ht){if(Ht.h==1){if(O.h.graph&&O.h.graph.url&&O.fa===O.h.graph.url)return Ht.return();if(O.u=!0,!O.h.graph||!O.h.graph.url){Ht.h=2;return}return O.fa=O.h.graph.url,_(Ht,Ph(O,O.h.graph.url),3)}for(Ht.h!=2&&(j=Ht.i,O.j.loadGraph(j)),ee=o(Object.keys(O.D)),oe=ee.next();!oe.done;oe=ee.next())we=oe.value,O.j.overrideFile(we,O.D[we]);if(O.D={},O.h.listeners)for(Ee=o(O.h.listeners),Ce=Ee.next();!Ce.done;Ce=Ee.next())He=Ce.value,lS(O,He);ht=O.l,O.l={},O.setOptions(ht),Ht.h=0})}n.reset=function(){var O=this;return k(function(j){O.j&&(O.j.reset(),O.s={},O.v={}),j.h=0})},n.setOptions=function(O,j){var ee=this;if(j=j||this.h.options){for(var oe=[],we=[],Ee={},Ce=o(Object.keys(O)),He=Ce.next();!He.done;Ee={X:Ee.X,Y:Ee.Y},He=Ce.next())if(He=He.value,!(He in this.l&&this.l[He]===O[He])){this.l[He]=O[He];var ht=j[He];ht!==void 0&&(ht.onChange&&(Ee.X=ht.onChange,Ee.Y=O[He],oe.push(function(Ht){return function(){var Zt;return k(function(Un){if(Un.h==1)return _(Un,Ht.X(Ht.Y),2);Zt=Un.i,Zt===!0&&(ee.u=!0),Un.h=0})}}(Ee))),ht.graphOptionXref&&(He=Object.assign({},{calculatorName:"",calculatorIndex:0},ht.graphOptionXref,{valueNumber:ht.type===1?O[He]:0,valueBoolean:ht.type===0?O[He]:!1,valueString:ht.type===2?O[He]:""}),we.push(He)))}(oe.length!==0||we.length!==0)&&(this.u=!0,this.H=(this.H===void 0?[]:this.H).concat(we),this.F=(this.F===void 0?[]:this.F).concat(oe))}};function h0(O){var j,ee,oe,we,Ee,Ce,He;return k(function(ht){switch(ht.h){case 1:if(!O.u)return ht.return();if(!O.F){ht.h=2;break}j=o(O.F),ee=j.next();case 3:if(ee.done){ht.h=5;break}return oe=ee.value,_(ht,oe(),4);case 4:ee=j.next(),ht.h=3;break;case 5:O.F=void 0;case 2:if(O.H){for(we=new O.i.GraphOptionChangeRequestList,Ee=o(O.H),Ce=Ee.next();!Ce.done;Ce=Ee.next())He=Ce.value,we.push_back(He);O.j.changeOptions(we),we.delete(),O.H=void 0}O.u=!1,ht.h=0}})}n.initialize=function(){var O=this;return k(function(j){return j.h==1?_(j,cm(O),2):j.h!=3?_(j,Gv(O),3):_(j,h0(O),0)})};function Ph(O,j){var ee,oe;return k(function(we){return j in O.L?we.return(O.L[j]):(ee=O.locateFile(j,""),oe=fetch(ee).then(function(Ee){return Ee.arrayBuffer()}),O.L[j]=oe,we.return(oe))})}n.overrideFile=function(O,j){this.j?this.j.overrideFile(O,j):this.D[O]=j},n.clearOverriddenFiles=function(){this.D={},this.j&&this.j.clearOverriddenFiles()},n.send=function(O,j){var ee=this,oe,we,Ee,Ce,He,ht,Ht,Zt,Un;return k(function(_n){switch(_n.h){case 1:return ee.h.inputs?(oe=1e3*(j??performance.now()),_(_n,ee.I,2)):_n.return();case 2:return _(_n,ee.initialize(),3);case 3:for(we=new ee.i.PacketDataList,Ee=o(Object.keys(O)),Ce=Ee.next();!Ce.done;Ce=Ee.next())if(He=Ce.value,ht=ee.h.inputs[He]){e:{var cn=O[He];switch(ht.type){case"video":var xn=ee.s[ht.stream];if(xn||(xn=new fd(ee.i,ee.K),ee.s[ht.stream]=xn),xn.m===0&&(xn.m=xn.i.createTexture()),typeof HTMLVideoElement<"u"&&cn instanceof HTMLVideoElement)var ir=cn.videoWidth,Yr=cn.videoHeight;else typeof HTMLImageElement<"u"&&cn instanceof HTMLImageElement?(ir=cn.naturalWidth,Yr=cn.naturalHeight):(ir=cn.width,Yr=cn.height);Yr={glName:xn.m,width:ir,height:Yr},ir=xn.h,ir.canvas.width=Yr.width,ir.canvas.height=Yr.height,ir.activeTexture(ir.TEXTURE0),xn.i.bindTexture2d(xn.m),ir.texImage2D(ir.TEXTURE_2D,0,ir.RGBA,ir.RGBA,ir.UNSIGNED_BYTE,cn),xn.i.bindTexture2d(0),xn=Yr;break e;case"detections":for(xn=ee.s[ht.stream],xn||(xn=new zv(ee.i),ee.s[ht.stream]=xn),xn.data||(xn.data=new xn.h.DetectionListData),xn.data.reset(cn.length),Yr=0;Yr<cn.length;++Yr){ir=cn[Yr];var mi=xn.data,os=mi.setBoundingBox,Ma=Yr,ta=ir.la,kr=new om;if(Et(kr,1,ta.ra),Et(kr,2,ta.sa),Et(kr,3,ta.height),Et(kr,4,ta.width),Et(kr,5,ta.rotation),Ae(kr,6,ta.pa),ta=kr.l(),os.call(mi,Ma,ta),ir.ea)for(mi=0;mi<ir.ea.length;++mi){kr=ir.ea[mi],os=xn.data,Ma=os.addNormalizedLandmark,ta=Yr,kr=Object.assign({},kr,{visibility:kr.visibility?kr.visibility:0});var ts=new cl;Et(ts,1,kr.x),Et(ts,2,kr.y),Et(ts,3,kr.z),kr.visibility&&Et(ts,4,kr.visibility),kr=ts.l(),Ma.call(os,ta,kr)}if(ir.ba)for(mi=0;mi<ir.ba.length;++mi)os=xn.data,Ma=os.addClassification,ta=Yr,kr=ir.ba[mi],ts=new po,Et(ts,2,kr.score),kr.index&&Ae(ts,1,kr.index),kr.label&&Ae(ts,3,kr.label),kr.displayName&&Ae(ts,4,kr.displayName),kr=ts.l(),Ma.call(os,ta,kr)}xn=xn.data;break e;default:xn={}}}switch(Ht=xn,Zt=ht.stream,ht.type){case"video":we.pushTexture2d(Object.assign({},Ht,{stream:Zt,timestamp:oe}));break;case"detections":Un=Ht,Un.stream=Zt,Un.timestamp=oe,we.pushDetectionList(Un);break;default:throw Error("Unknown input config type: '"+ht.type+"'")}}return ee.j.send(we),_(_n,ee.I,4);case 4:we.delete(),_n.h=0}})};function Dc(O,j,ee){var oe,we,Ee,Ce,He,ht,Ht,Zt,Un,_n,cn,xn,ir,Yr;return k(function(mi){switch(mi.h){case 1:if(!ee)return mi.return(j);for(oe={},we=0,Ee=o(Object.keys(ee)),Ce=Ee.next();!Ce.done;Ce=Ee.next())He=Ce.value,ht=ee[He],typeof ht!="string"&&ht.type==="texture"&&j[ht.stream]!==void 0&&++we;1<we&&(O.M=!1),Ht=o(Object.keys(ee)),Ce=Ht.next();case 2:if(Ce.done){mi.h=4;break}if(Zt=Ce.value,Un=ee[Zt],typeof Un=="string")return ir=oe,Yr=Zt,_(mi,p0(O,Zt,j[Un]),14);if(_n=j[Un.stream],Un.type==="detection_list"){if(_n){for(var os=_n.getRectList(),Ma=_n.getLandmarksList(),ta=_n.getClassificationsList(),kr=[],ts=0;ts<os.size();++ts){var mo=lm(os.get(ts)),Fi=Wt(mo,1),Wv=Wt(mo,2),cS=Wt(mo,3),jv=Wt(mo,4),Uh=Wt(mo,5,0),ul=void 0;ul=ul===void 0?0:ul,mo={la:{ra:Fi,sa:Wv,height:cS,width:jv,rotation:Uh,pa:Qt(Se(mo,6),ul)},ea:Tt(a0(Ma.get(ts)),cl,1).map(c0),ba:l0(jl(ta.get(ts)))},kr.push(mo)}os=kr}else os=[];oe[Zt]=os,mi.h=7;break}if(Un.type==="proto_list"){if(_n){for(os=Array(_n.size()),Ma=0;Ma<_n.size();Ma++)os[Ma]=_n.get(Ma);_n.delete()}else os=[];oe[Zt]=os,mi.h=7;break}if(_n===void 0){mi.h=3;break}if(Un.type==="float_list"){oe[Zt]=_n,mi.h=7;break}if(Un.type==="proto"){oe[Zt]=_n,mi.h=7;break}if(Un.type!=="texture")throw Error("Unknown output config type: '"+Un.type+"'");return cn=O.v[Zt],cn||(cn=new fd(O.i,O.K),O.v[Zt]=cn),_(mi,Lh(cn,_n,O.M),13);case 13:xn=mi.i,oe[Zt]=xn;case 7:Un.transform&&oe[Zt]&&(oe[Zt]=Un.transform(oe[Zt])),mi.h=3;break;case 14:ir[Yr]=mi.i;case 3:Ce=Ht.next(),mi.h=2;break;case 4:return mi.return(oe)}})}function p0(O,j,ee){var oe;return k(function(we){return typeof ee=="number"||ee instanceof Uint8Array||ee instanceof O.i.Uint8BlobList?we.return(ee):ee instanceof O.i.Texture2dDataOut?(oe=O.v[j],oe||(oe=new fd(O.i,O.K),O.v[j]=oe),we.return(Lh(oe,ee,O.M))):we.return(void 0)})}function lS(O,j){for(var ee=j.name||"$",oe=[].concat(l(j.wants)),we=new O.i.StringList,Ee=o(j.wants),Ce=Ee.next();!Ce.done;Ce=Ee.next())we.push_back(Ce.value);Ee=O.i.PacketListener.implement({onResults:function(He){for(var ht={},Ht=0;Ht<j.wants.length;++Ht)ht[oe[Ht]]=He.get(Ht);var Zt=O.listeners[ee];Zt&&(O.I=Dc(O,ht,j.outs).then(function(Un){Un=Zt(Un);for(var _n=0;_n<j.wants.length;++_n){var cn=ht[oe[_n]];typeof cn=="object"&&cn.hasOwnProperty&&cn.hasOwnProperty("delete")&&cn.delete()}Un&&(O.I=Un)}))}}),O.j.attachMultiListener(we,Ee),we.delete()}n.onResults=function(O,j){this.listeners[j||"$"]=O},X("Solution",Fh),X("OptionType",{BOOL:0,NUMBER:1,ta:2,0:"BOOL",1:"NUMBER",2:"STRING"});function m0(O){return O===void 0&&(O=0),O===1?"hand_landmark_full.tflite":"hand_landmark_lite.tflite"}function kc(O){var j=this;O=O||{},this.h=new Fh({locateFile:O.locateFile,files:function(ee){return[{url:"hands_solution_packed_assets_loader.js"},{simd:!1,url:"hands_solution_wasm_bin.js"},{simd:!0,url:"hands_solution_simd_wasm_bin.js"},{data:!0,url:m0(ee.modelComplexity)}]},graph:{url:"hands.binarypb"},inputs:{image:{type:"video",stream:"input_frames_gpu"}},listeners:[{wants:["multi_hand_landmarks","multi_hand_world_landmarks","image_transformed","multi_handedness"],outs:{image:"image_transformed",multiHandLandmarks:{type:"proto_list",stream:"multi_hand_landmarks",transform:u0},multiHandWorldLandmarks:{type:"proto_list",stream:"multi_hand_world_landmarks",transform:u0},multiHandedness:{type:"proto_list",stream:"multi_handedness",transform:function(ee){return ee.map(function(oe){return l0(jl(oe))[0]})}}}}],options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumHands:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculator",fieldName:"int_value"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(ee){var oe,we,Ee;return k(function(Ce){return Ce.h==1?(oe=m0(ee),we="third_party/mediapipe/modules/hand_landmark/"+oe,_(Ce,Ph(j.h,oe),2)):(Ee=Ce.i,j.h.overrideFile(we,Ee),Ce.return(!0))})}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"handlandmarktrackinggpu__palmdetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"handlandmarktrackinggpu__handlandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}}}})}n=kc.prototype,n.close=function(){return this.h.close(),Promise.resolve()},n.onResults=function(O){this.h.onResults(O)},n.initialize=function(){var O=this;return k(function(j){return _(j,O.h.initialize(),0)})},n.reset=function(){this.h.reset()},n.send=function(O){var j=this;return k(function(ee){return _(ee,j.h.send(O),0)})},n.setOptions=function(O){this.h.setOptions(O)},X("Hands",kc),X("HAND_CONNECTIONS",[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]]),X("VERSION","0.4.1675469240")}).call(t$)),t$}var bZe=vZe();/**
    * @license
    * Copyright 2023 Google LLC. All Rights Reserved.
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    * http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    * =============================================================================
    */var Zo=function(){return Zo=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},Zo.apply(this,arguments)};function tf(n,e,t,r){return new(t||(t=Promise))(function(i,s){function a(c){try{l(r.next(c))}catch(u){s(u)}}function o(c){try{l(r.throw(c))}catch(u){s(u)}}function l(c){var u;c.done?i(c.value):(u=c.value,u instanceof t?u:new t(function(d){d(u)})).then(a,o)}l((r=r.apply(n,[])).next())})}function nf(n,e){var t,r,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(l){return function(c){return function(u){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(a=0)),a;)try{if(t=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||u[0]!==6&&u[0]!==2)){a=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(u[0]===6&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(n,a)}catch(d){u=[6,d],r=0}finally{t=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([l,c])}}}var AN=["wrist","thumb_cmc","thumb_mcp","thumb_ip","thumb_tip","index_finger_mcp","index_finger_pip","index_finger_dip","index_finger_tip","middle_finger_mcp","middle_finger_pip","middle_finger_dip","middle_finger_tip","ring_finger_mcp","ring_finger_pip","ring_finger_dip","ring_finger_tip","pinky_finger_mcp","pinky_finger_pip","pinky_finger_dip","pinky_finger_tip"],n$={runtime:"mediapipe",maxHands:2,modelType:"full"},xZe=function(){function n(e){var t,r=this;this.width=0,this.height=0,this.selfieMode=!1,this.handsSolution=new bZe.Hands({locateFile:function(i,s){return e.solutionPath?e.solutionPath.replace(/\/+$/,"")+"/"+i:s+"/"+i}}),e.modelType==="lite"?t=0:t=1,this.handsSolution.setOptions({modelComplexity:t,selfieMode:this.selfieMode,maxNumHands:e.maxHands}),this.handsSolution.onResults(function(i){if(r.height=i.image.height,r.width=i.image.width,r.hands=[],i.multiHandLandmarks!==null)for(var s=i.multiHandedness,a=i.multiHandLandmarks,o=i.multiHandWorldLandmarks,l=0;l<s.length;l++)r.hands.push(Zo(Zo({},r.translateOutput(a[l],o[l])),{score:s[l].score,handedness:s[l].label}))})}return n.prototype.translateOutput=function(e,t){var r=this;return{keypoints:e.map(function(i,s){return{x:i.x*r.width,y:i.y*r.height,score:i.visibility,name:AN[s]}}),keypoints3D:t.map(function(i,s){return{x:i.x,y:i.y,z:i.z,score:i.visibility,name:AN[s]}})}},n.prototype.estimateHands=function(e,t){return tf(this,void 0,void 0,function(){var r,i;return nf(this,function(s){switch(s.label){case 0:return t&&t.flipHorizontal&&t.flipHorizontal!==this.selfieMode&&(this.selfieMode=t.flipHorizontal,this.handsSolution.setOptions({selfieMode:this.selfieMode})),e instanceof ji?(i=ImageData.bind,[4,mOe(e)]):[3,2];case 1:return r=new(i.apply(ImageData,[void 0,s.sent(),e.shape[1],e.shape[0]])),[3,3];case 2:r=e,s.label=3;case 3:return e=r,[4,this.handsSolution.send({image:e})];case 4:return s.sent(),[2,this.hands]}})})},n.prototype.dispose=function(){this.handsSolution.close()},n.prototype.reset=function(){this.handsSolution.reset(),this.width=0,this.height=0,this.hands=null,this.selfieMode=!1},n.prototype.initialize=function(){return this.handsSolution.initialize()},n}();function SZe(n){return tf(this,void 0,void 0,function(){var e,t;return nf(this,function(r){switch(r.label){case 0:return e=function(i){if(i==null)return Zo({},n$);var s=Zo({},i);return s.runtime="mediapipe",s.maxHands==null&&(s.maxHands=n$.maxHands),s.modelType==null&&(s.modelType=n$.modelType),s}(n),[4,(t=new xZe(e)).initialize()];case 1:return r.sent(),[2,t]}})})}function r$(n){return n.width*n.height}function G7(n){var e=n.xCenter-n.width/2,t=e+n.width,r=n.yCenter-n.height/2;return{xMin:e,xMax:t,yMin:r,yMax:r+n.height,width:n.width,height:n.height}}function wZe(n,e){var t=G7(n),r=G7(e);if(!function(a,o){return!(a.xMax<o.xMin||o.xMax<a.xMin||a.yMax<o.yMin||o.yMax<a.yMin)}(t,r))return 0;var i=r$(function(a,o){var l=Math.max(a.xMin,o.xMin),c=Math.min(a.xMax,o.xMax),u=Math.max(a.yMin,o.yMin),d=Math.min(a.yMax,o.yMax);return{xMin:l,xMax:c,yMin:u,yMax:d,width:Math.max(c-l,0),height:Math.max(d-u,0)}}(t,r)),s=r$(t)+r$(r)-i;return s>0?i/s:0}function CZe(n,e,t,r){var i=n.width,s=n.height,a=1,o=Math.cos(n.rotation),l=Math.sin(n.rotation),c=n.xCenter,u=n.yCenter,d=1/e,h=1/t,p=new Array(16);return p[0]=i*o*a*d,p[1]=-s*l*d,p[2]=0,p[3]=(-.5*i*o*a+.5*s*l+c)*d,p[4]=i*l*a*h,p[5]=s*o*h,p[6]=0,p[7]=(-.5*s*o-.5*i*l*a+u)*h,p[8]=0,p[9]=0,p[10]=i*d,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,function(g){if(g.length!==16)throw new Error("Array length must be 16 but got "+g.length);return[[g[0],g[1],g[2],g[3]],[g[4],g[5],g[6],g[7]],[g[8],g[9],g[10],g[11]],[g[12],g[13],g[14],g[15]]]}(p)}function _se(n){return n instanceof ji?{height:n.shape[0],width:n.shape[1]}:{height:n.height,width:n.width}}function TN(n){return n-2*Math.PI*Math.floor((n+Math.PI)/(2*Math.PI))}function Ese(n){return n instanceof ji?n:gOe(n)}function i$(n,e){de(n.width!==0,function(){return e+" width cannot be 0."}),de(n.height!==0,function(){return e+" height cannot be 0."})}function _Ze(n,e){var t=function(r,i,s,a){var o=i-r,l=a-s,c=l/o;return{scale:c,offset:s-r*c}}(0,255,e[0],e[1]);return Ye(function(){return Bt(ke(n,t.scale),t.offset)})}function W7(n,e,t){var r=e.outputTensorSize,i=e.keepAspectRatio,s=e.borderMode,a=e.outputTensorFloatRange,o=_se(n),l=function(h,p){return p?{xCenter:p.xCenter*h.width,yCenter:p.yCenter*h.height,width:p.width*h.width,height:p.height*h.height,rotation:p.rotation}:{xCenter:.5*h.width,yCenter:.5*h.height,width:h.width,height:h.height,rotation:0}}(o,t),c=function(h,p,g){if(g===void 0&&(g=!1),!g)return{top:0,left:0,right:0,bottom:0};var v=p.height,b=p.width;i$(p,"targetSize"),i$(h,"roi");var x,C,E=v/b,_=h.height/h.width,M=0,R=0;return E>_?(x=h.width,C=h.width*E,R=(1-_/E)/2):(x=h.height/E,C=h.height,M=(1-E/_)/2),h.width=x,h.height=C,{top:R,left:M,right:M,bottom:R}}(l,r,i),u=CZe(l,o.width,o.height),d=Ye(function(){var h=Ese(n),p=Wy(function(b,x,C){return i$(C,"inputResolution"),[1/C.width*b[0][0]*x.width,1/C.height*b[0][1]*x.width,b[0][3]*x.width,1/C.width*b[1][0]*x.height,1/C.height*b[1][1]*x.height,b[1][3]*x.height,0,0]}(u,o,r),[1,8]),g=s==="zero"?"constant":"nearest",v=Zc.transform(Qa(nn(h,"float32")),p,"bilinear",g,0,[r.height,r.width]);return a!=null?_Ze(v,a):v});return{imageTensor:d,padding:c,transformationMatrix:u}}function j7(n,e,t,r){return r===1?.5*(n+e):n+(e-n)*t/(r-1)}function q7(n){return{xCenter:n.xMin+n.width/2,yCenter:n.yMin+n.height/2,width:n.width,height:n.height}}function EZe(n){var e=n.relativeKeypoints;if(e.length<=1)throw new Error("2 or more keypoints required to calculate a rect.");var t=Number.MAX_VALUE,r=Number.MAX_VALUE,i=Number.MIN_VALUE,s=Number.MIN_VALUE;return e.forEach(function(a){t=Math.min(t,a.x),i=Math.max(i,a.x),r=Math.min(r,a.y),s=Math.max(s,a.y)}),{xCenter:(t+i)/2,yCenter:(r+s)/2,width:i-t,height:s-r}}function AZe(n,e,t,r,i){var s=t==="rect"?function(a,o,l){var c,u=a.locationData;return c=q7(u.boundingBox),c}(n):function(a,o){var l=a.locationData;return o==="boundingbox"?q7(l.relativeBoundingBox):EZe(l)}(n,e);return i&&(s.rotation=function(a,o,l){var c,u=a.locationData,d=l.rotationVectorStartKeypointIndex,h=l.rotationVectorEndKeypointIndex;c=l.rotationVectorTargetAngle?l.rotationVectorTargetAngle:Math.PI*l.rotationVectorTargetAngleDegree/180;var p=u.relativeKeypoints[d].x*o.width,g=u.relativeKeypoints[d].y*o.height,v=u.relativeKeypoints[h].x*o.width,b=u.relativeKeypoints[h].y*o.height;return TN(c-Math.atan2(-(b-g),v-p))}(n,r,i)),s}function TZe(n){return Ye(function(){var e=function(i){return Ye(function(){return[Kn(i,[0,0,0],[1,-1,1]),Kn(i,[0,0,1],[1,-1,-1])]})}(n),t=e[0],r=e[1];return{boxes:Gs(r),logits:Gs(t)}})}function MZe(n,e,t,r){return tf(this,void 0,void 0,function(){var i,s,a,o,l;return nf(this,function(c){switch(c.label){case 0:return n.sort(function(u,d){return Math.max.apply(Math,d.score)-Math.max.apply(Math,u.score)}),i=Wy(n.map(function(u){return[u.locationData.relativeBoundingBox.yMin,u.locationData.relativeBoundingBox.xMin,u.locationData.relativeBoundingBox.yMax,u.locationData.relativeBoundingBox.xMax]})),s=ca(n.map(function(u){return u.score[0]})),[4,Zc.nonMaxSuppressionAsync(i,s,e,t)];case 1:return[4,(a=c.sent()).array()];case 2:return o=c.sent(),l=n.filter(function(u,d){return o.indexOf(d)>-1}),rr([i,s,a]),[2,l]}})})}function RZe(n,e){return n.map(function(t){var r=Zo(Zo({},t),{x:t.x*e.width,y:t.y*e.height});return t.z!=null&&(r.z=t.z*e.width),r})}function NZe(n,e,t){return tf(this,void 0,void 0,function(){var r,i,s,a,o;return nf(this,function(l){switch(l.label){case 0:return r=n[0],i=n[1],s=function(c,u,d){return Ye(function(){var h,p,g,v;d.reverseOutputOrder?(p=Gs(Kn(c,[0,d.boxCoordOffset+0],[-1,1])),h=Gs(Kn(c,[0,d.boxCoordOffset+1],[-1,1])),v=Gs(Kn(c,[0,d.boxCoordOffset+2],[-1,1])),g=Gs(Kn(c,[0,d.boxCoordOffset+3],[-1,1]))):(h=Gs(Kn(c,[0,d.boxCoordOffset+0],[-1,1])),p=Gs(Kn(c,[0,d.boxCoordOffset+1],[-1,1])),g=Gs(Kn(c,[0,d.boxCoordOffset+2],[-1,1])),v=Gs(Kn(c,[0,d.boxCoordOffset+3],[-1,1]))),p=Bt(ke(mn(p,d.xScale),u.w),u.x),h=Bt(ke(mn(h,d.yScale),u.h),u.y),d.applyExponentialOnBoxSize?(g=ke(nl(mn(g,d.hScale)),u.h),v=ke(nl(mn(v,d.wScale)),u.w)):(g=ke(mn(g,d.hScale),u.h),v=ke(mn(v,d.wScale),u.h));var b=vn(h,mn(g,2)),x=vn(p,mn(v,2)),C=Bt(h,mn(g,2)),E=Bt(p,mn(v,2)),_=Os([Fe(b,[d.numBoxes,1]),Fe(x,[d.numBoxes,1]),Fe(C,[d.numBoxes,1]),Fe(E,[d.numBoxes,1])],1);if(d.numKeypoints)for(var M=0;M<d.numKeypoints;++M){var R=d.keypointCoordOffset+M*d.numValuesPerKeypoint,L=void 0,$=void 0;d.reverseOutputOrder?(L=Gs(Kn(c,[0,R],[-1,1])),$=Gs(Kn(c,[0,R+1],[-1,1]))):($=Gs(Kn(c,[0,R],[-1,1])),L=Gs(Kn(c,[0,R+1],[-1,1])));var N=Bt(ke(mn(L,d.xScale),u.w),u.x),I=Bt(ke(mn($,d.yScale),u.h),u.y);_=Os([_,Fe(N,[d.numBoxes,1]),Fe(I,[d.numBoxes,1])],1)}return _})}(i,e,t),a=Ye(function(){var c=r;return t.sigmoidScore?(t.scoreClippingThresh!=null&&(c=zl(r,-t.scoreClippingThresh,t.scoreClippingThresh)),c=Qd(c)):c}),[4,IZe(s,a,t)];case 1:return o=l.sent(),rr([s,a]),[2,o]}})})}function IZe(n,e,t){return tf(this,void 0,void 0,function(){var r,i,s,a,o,l,c,u,d,h,p,g;return nf(this,function(v){switch(v.label){case 0:return r=[],[4,n.data()];case 1:return i=v.sent(),[4,e.data()];case 2:for(s=v.sent(),a=0;a<t.numBoxes;++a)if(!(t.minScoreThresh!=null&&s[a]<t.minScoreThresh||(o=a*t.numCoords,l=DZe(i[o+0],i[o+1],i[o+2],i[o+3],s[a],t.flipVertically,a),(c=l.locationData.relativeBoundingBox).width<0||c.height<0))){if(t.numKeypoints>0)for((u=l.locationData).relativeKeypoints=[],d=t.numKeypoints*t.numValuesPerKeypoint,h=0;h<d;h+=t.numValuesPerKeypoint)p=o+t.keypointCoordOffset+h,g={x:i[p+0],y:t.flipVertically?1-i[p+1]:i[p+1]},u.relativeKeypoints.push(g);r.push(l)}return[2,r]}})})}function DZe(n,e,t,r,i,s,a){return{score:[i],ind:a,locationData:{relativeBoundingBox:{xMin:e,yMin:s?1-t:n,xMax:r,yMax:s?1-n:t,width:r-e,height:t-n}}}}function kZe(n,e){return n==="none"?e:function(t){return 1/(1+Math.exp(-t))}(e)}function X7(n,e,t,r){return tf(this,void 0,void 0,function(){var i,s,a,o,l,c,u,d;return nf(this,function(h){switch(h.label){case 0:return t=t||e.flipHorizontally||!1,r=r||e.flipVertically||!1,i=n.size,s=i/e.numLandmarks,[4,n.data()];case 1:for(a=h.sent(),o=[],l=0;l<e.numLandmarks;++l)c=l*s,(d={x:0,y:0}).x=t?e.inputImageWidth-a[c]:a[c],s>1&&(d.y=r?e.inputImageHeight-a[c+1]:a[c+1]),s>2&&(d.z=a[c+2]),s>3&&(d.score=kZe(e.visibilityActivation,a[c+3])),o.push(d);for(u=0;u<o.length;++u)(d=o[u]).x=d.x/e.inputImageWidth,d.y=d.y/e.inputImageHeight,d.z=d.z/e.inputImageWidth/(e.normalizeZ||1);return[2,o]}})})}function K7(n,e,t){var r=n.width,i=n.height,s=n.rotation;if(t.rotation==null&&t.rotationDegree==null||(s=function(u,d){return d.rotation!=null?u+=d.rotation:d.rotationDegree!=null&&(u+=Math.PI*d.rotationDegree/180),TN(u)}(s,t)),s===0)n.xCenter=n.xCenter+r*t.shiftX,n.yCenter=n.yCenter+i*t.shiftY;else{var a=(e.width*r*t.shiftX*Math.cos(s)-e.height*i*t.shiftY*Math.sin(s))/e.width,o=(e.width*r*t.shiftX*Math.sin(s)+e.height*i*t.shiftY*Math.cos(s))/e.height;n.xCenter=n.xCenter+a,n.yCenter=n.yCenter+o}if(t.squareLong){var l=Math.max(r*e.width,i*e.height);r=l/e.width,i=l/e.height}else if(t.squareShort){var c=Math.min(r*e.width,i*e.height);r=c/e.width,i=c/e.height}return n.width=r*t.scaleX,n.height=i*t.scaleY,n}function OZe(n,e){for(var t=function(k,P){var G=k[0].x*P.width,W=k[0].y*P.height,X=(k[4].x+k[8].x)/2,z=(k[4].y+k[8].y)/2;return X=(X+k[6].x)/2*P.width,z=(z+k[6].y)/2*P.height,TN(Math.PI/2-Math.atan2(-(z-W),X-G))}(n,e),r=TN(-t),i=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,l=0,c=n;l<c.length;l++){var u=(b=c[l]).x,d=b.y;i=Math.min(i,u),s=Math.max(s,u),a=Math.min(a,d),o=Math.max(o,d)}var h=(s+i)/2,p=(o+a)/2;i=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY;for(var g=0,v=n;g<v.length;g++){var b,x=((b=v[g]).x-h)*e.width,C=(b.y-p)*e.height,E=x*Math.cos(r)-C*Math.sin(r),_=x*Math.sin(r)+C*Math.cos(r);i=Math.min(i,E),s=Math.max(s,E),a=Math.min(a,_),o=Math.max(o,_)}var M=(s+i)/2,R=(o+a)/2,L=M*Math.cos(t)-R*Math.sin(t)+e.width*h,$=M*Math.sin(t)+R*Math.cos(t)+e.height*p,N=(s-i)/e.width,I=(o-a)/e.height;return{xCenter:L/e.width,yCenter:$/e.height,width:N,height:I,rotation:t}}var BZe={reduceBoxesInLowestLayer:!1,interpolatedScaleAspectRatio:1,featureMapHeight:[],featureMapWidth:[],numLayers:4,minScale:.1484375,maxScale:.75,inputSizeHeight:192,inputSizeWidth:192,anchorOffsetX:.5,anchorOffsetY:.5,strides:[8,16,16,16],aspectRatios:[1],fixedAnchorSize:!0},s$={runtime:"tfjs",modelType:"full",maxHands:2,detectorModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/detector/full/1",landmarkModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/landmark/full/1"},a$={flipHorizontal:!1,staticImageMode:!1},$Ze={applyExponentialOnBoxSize:!1,flipVertically:!1,numBoxes:2016,numCoords:18,boxCoordOffset:0,keypointCoordOffset:4,numKeypoints:7,numValuesPerKeypoint:2,sigmoidScore:!0,scoreClippingThresh:100,reverseOutputOrder:!0,xScale:192,yScale:192,hScale:192,wScale:192,minScoreThresh:.5},LZe=.3,FZe={shiftX:0,shiftY:-.5,scaleX:2.6,scaleY:2.6,squareLong:!0},PZe={shiftX:0,shiftY:-.1,scaleX:2,scaleY:2,squareLong:!0},UZe={outputTensorSize:{width:192,height:192},keepAspectRatio:!0,outputTensorFloatRange:[0,1],borderMode:"zero"},zZe={outputTensorSize:{width:224,height:224},keepAspectRatio:!0,outputTensorFloatRange:[0,1],borderMode:"zero"},HZe={numLandmarks:21,inputImageWidth:224,inputImageHeight:224,normalizeZ:.4,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},VZe={numLandmarks:21,inputImageWidth:1,inputImageHeight:1,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},MN,GZe=function(){function n(e,t,r){this.detectorModel=e,this.landmarkModel=t,this.maxHands=r,this.prevHandRectsFromLandmarks=null,this.anchors=function(l){l.reduceBoxesInLowestLayer==null&&(l.reduceBoxesInLowestLayer=!1),l.interpolatedScaleAspectRatio==null&&(l.interpolatedScaleAspectRatio=1),l.fixedAnchorSize==null&&(l.fixedAnchorSize=!1);for(var c=[],u=0;u<l.numLayers;){for(var d=[],h=[],p=[],g=[],v=u;v<l.strides.length&&l.strides[v]===l.strides[u];){var b=j7(l.minScale,l.maxScale,v,l.strides.length);if(v===0&&l.reduceBoxesInLowestLayer)p.push(1),p.push(2),p.push(.5),g.push(.1),g.push(b),g.push(b);else{for(var x=0;x<l.aspectRatios.length;++x)p.push(l.aspectRatios[x]),g.push(b);if(l.interpolatedScaleAspectRatio>0){var C=v===l.strides.length-1?1:j7(l.minScale,l.maxScale,v+1,l.strides.length);g.push(Math.sqrt(b*C)),p.push(l.interpolatedScaleAspectRatio)}}v++}for(var E=0;E<p.length;++E){var _=Math.sqrt(p[E]);d.push(g[E]/_),h.push(g[E]*_)}var M=0,R=0;if(l.featureMapHeight.length>0)M=l.featureMapHeight[u],R=l.featureMapWidth[u];else{var L=l.strides[u];M=Math.ceil(l.inputSizeHeight/L),R=Math.ceil(l.inputSizeWidth/L)}for(var $=0;$<M;++$)for(var N=0;N<R;++N)for(var I=0;I<d.length;++I){var k={xCenter:(N+l.anchorOffsetX)/R,yCenter:($+l.anchorOffsetY)/M,width:0,height:0};l.fixedAnchorSize?(k.width=1,k.height=1):(k.width=h[I],k.height=d[I]),c.push(k)}u=v}return c}(BZe);var i=ca(this.anchors.map(function(l){return l.width})),s=ca(this.anchors.map(function(l){return l.height})),a=ca(this.anchors.map(function(l){return l.xCenter})),o=ca(this.anchors.map(function(l){return l.yCenter}));this.anchorTensor={x:a,y:o,w:i,h:s}}return n.prototype.estimateHands=function(e,t){return tf(this,void 0,void 0,function(){var r,i,s,a,o,l,c,u,d,h,p,g,v,b,x,C,E,_,M=this;return nf(this,function(R){switch(R.label){case 0:return r=function(N){if(N==null)return Zo({},a$);var I=Zo({},N);return I.flipHorizontal==null&&(I.flipHorizontal=a$.flipHorizontal),I.staticImageMode==null&&(I.staticImageMode=a$.staticImageMode),I}(t),e==null?(this.reset(),[2,[]]):(i=_se(e),s=Ye(function(){var N=nn(Ese(e),"float32");return r.flipHorizontal&&(N=Gs(Zc.flipLeftRight(Qa(N,0)),[0])),N}),a=this.prevHandRectsFromLandmarks,r.staticImageMode||a==null||a.length<this.maxHands?[4,this.detectPalm(s)]:[3,2]);case 1:return(l=R.sent()).length===0?(this.reset(),s.dispose(),[2,[]]):(c=l.map(function(N){return M.palmDetectionToRoi(N,i)}),o=c,[3,3]);case 2:o=a,R.label=3;case 3:return L=.5,$=[],[o].forEach(function(N){return N.forEach(function(I){($=$.filter(function(k){return wZe(I,k)<=L})).push(I)})}),o=$,[4,Promise.all(o.map(function(N){return M.handLandmarks(N,s)}))];case 4:for(u=R.sent(),d=[],this.prevHandRectsFromLandmarks=[],h=0,p=u;h<p.length;h++)(g=p[h])!=null&&(v=g.landmarks,b=g.worldLandmarks,x=g.handScore,C=g.handedness,this.prevHandRectsFromLandmarks.push(this.handLandmarksToRoi(v,i)),(E=RZe(v,i))!=null&&E.forEach(function(N,I){delete N.z,N.name=AN[I]}),(_=b)!=null&&_.forEach(function(N,I){N.name=AN[I]}),d.push({keypoints:E,keypoints3D:_,handedness:C,score:x}));return s.dispose(),[2,d]}var L,$})})},n.prototype.dispose=function(){this.detectorModel.dispose(),this.landmarkModel.dispose(),rr([this.anchorTensor.x,this.anchorTensor.y,this.anchorTensor.w,this.anchorTensor.h])},n.prototype.reset=function(){this.prevHandRectsFromLandmarks=null},n.prototype.detectPalm=function(e){return tf(this,void 0,void 0,function(){var t,r,i,s,a,o,l,c,u,d;return nf(this,function(h){switch(h.label){case 0:return t=W7(e,UZe),r=t.imageTensor,i=t.padding,s=this.detectorModel.predict(r),a=TZe(s),o=a.boxes,[4,NZe([l=a.logits,o],this.anchorTensor,$Ze)];case 1:return(c=h.sent()).length===0?(rr([r,s,l,o]),[2,c]):[4,MZe(c,this.maxHands,LZe)];case 2:return u=h.sent(),d=function(p,g){p===void 0&&(p=[]);for(var v=g.left,b=g.top,x=g.left+g.right,C=g.top+g.bottom,E=0;E<p.length;E++){var _=p[E],M=_.locationData.relativeBoundingBox,R=(M.xMin-v)/(1-x),L=(M.yMin-b)/(1-C),$=M.width/(1-x),N=M.height/(1-C);M.xMin=R,M.yMin=L,M.width=$,M.height=N,M.xMax=R+$,M.yMax=L+N;var I=_.locationData.relativeKeypoints;I&&I.forEach(function(k){var P=(k.x-v)/(1-x),G=(k.y-b)/(1-C);k.x=P,k.y=G})}return p}(u,i),rr([r,s,l,o]),[2,d]}})})},n.prototype.palmDetectionToRoi=function(e,t){return K7(AZe(e,"boundingbox","normRect",t,{rotationVectorStartKeypointIndex:0,rotationVectorEndKeypointIndex:2,rotationVectorTargetAngleDegree:90}),t,FZe)},n.prototype.handLandmarks=function(e,t){return tf(this,void 0,void 0,function(){var r,i,s,a,o,l,c,u,d,h,p,g,v,b,x,C;return nf(this,function(E){switch(E.label){case 0:return r=W7(t,zZe,e),i=r.imageTensor,s=r.padding,a=this.landmarkModel.execute(i,["Identity_2:0","Identity_1:0","Identity:0","Identity_3:0"]),o=a[0],l=a[1],c=a[2],u=a[3],[4,l.data()];case 1:return(d=E.sent()[0])<.5?(rr(a),rr(i),[2,null]):[4,c.data()];case 2:return h=E.sent()[0],p=h>=.5?"Left":"Right",[4,X7(o,HZe)];case 3:return g=E.sent(),[4,X7(u,VZe)];case 4:return v=E.sent(),b=function(_,M){var R=M.left,L=M.top,$=M.left+M.right,N=M.top+M.bottom;return _.map(function(I){return Zo(Zo({},I),{x:(I.x-R)/(1-$),y:(I.y-L)/(1-N),z:I.z/(1-$)})})}(g,s),x=function(_,M,R){R===void 0&&(R={ignoreRotation:!1});for(var L=[],$=0,N=_;$<N.length;$++){var I=N[$],k=I.x-.5,P=I.y-.5,G=R.ignoreRotation?0:M.rotation,W=Math.cos(G)*k-Math.sin(G)*P,X=Math.sin(G)*k+Math.cos(G)*P;W=W*M.width+M.xCenter,X=X*M.height+M.yCenter;var z=I.z*M.width,J=Zo({},I);J.x=W,J.y=X,J.z=z,L.push(J)}return L}(b,e),C=function(_,M){for(var R=[],L=0,$=_;L<$.length;L++){var N=$[L],I=N.x,k=N.y,P=M.rotation,G=Math.cos(P)*I-Math.sin(P)*k,W=Math.sin(P)*I+Math.cos(P)*k,X=Zo({},N);X.x=G,X.y=W,R.push(X)}return R}(v,e),rr(a),rr(i),[2,{landmarks:x,worldLandmarks:C,handScore:d,handedness:p}]}})})},n.prototype.handLandmarksToRoi=function(e,t){return K7(OZe([].concat(e.slice(0,4),e.slice(5,7),e.slice(9,11),e.slice(13,15),e.slice(17,19)),t),t,PZe)},n}();function WZe(n){return tf(this,void 0,void 0,function(){var e,t,r,i,s,a;return nf(this,function(o){switch(o.label){case 0:return e=function(l){if(l==null)return Zo({},s$);var c=Zo({},l);if(c.runtime="tfjs",c.maxHands==null&&(c.maxHands=s$.maxHands),c.modelType==null&&(c.modelType=s$.modelType),c.modelType!=="lite"&&c.modelType!=="full")throw new Error("Model type must be one of lite or full, but got "+c.modelType);return c.detectorModelUrl==null&&(c.modelType==="lite"?c.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/detector/lite/1":c.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/detector/full/1"),c.landmarkModelUrl==null&&(c.modelType==="lite"?c.landmarkModelUrl="https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/landmark/lite/1":c.landmarkModelUrl="https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/landmark/full/1"),c}(n),t=e.detectorModelUrl.indexOf("https://tfhub.dev")>-1,r=e.landmarkModelUrl.indexOf("https://tfhub.dev")>-1,[4,Promise.all([l7(e.detectorModelUrl,{fromTFHub:t}),l7(e.landmarkModelUrl,{fromTFHub:r})])];case 1:return i=o.sent(),s=i[0],a=i[1],[2,new GZe(s,a,e.maxHands)]}})})}function jZe(n,e){return tf(this,void 0,void 0,function(){var t,r;return nf(this,function(i){if(n===MN.MediaPipeHands){if(r=void 0,(t=e)!=null){if(t.runtime==="tfjs")return[2,WZe(t)];if(t.runtime==="mediapipe")return[2,SZe(t)];r=t.runtime}throw new Error("Expect modelConfig.runtime to be either 'tfjs' or 'mediapipe', but got "+r)}throw new Error(n+" is not a supported model name.")})})}(function(n){n.MediaPipeHands="MediaPipeHands"})(MN||(MN={}));var RM={exports:{}},qZe=RM.exports,Y7;function XZe(){return Y7||(Y7=1,function(n,e){(function(t,r){n.exports=r()})(typeof self<"u"?self:qZe,function(){return function(t){var r={};function i(s){if(r[s])return r[s].exports;var a=r[s]={i:s,l:!1,exports:{}};return t[s].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=t,i.c=r,i.d=function(s,a,o){i.o(s,a)||Object.defineProperty(s,a,{enumerable:!0,get:o})},i.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},i.t=function(s,a){if(1&a&&(s=i(s)),8&a||4&a&&typeof s=="object"&&s&&s.__esModule)return s;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:s}),2&a&&typeof s!="string")for(var l in s)i.d(o,l,(function(c){return s[c]}).bind(null,l));return o},i.n=function(s){var a=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(a,"a",a),a},i.o=function(s,a){return Object.prototype.hasOwnProperty.call(s,a)},i.p="",i(i.s=0)}([function(t,r,i){i.r(r);var s={};function a(Y){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(q){return typeof q}:function(q){return q&&typeof Symbol=="function"&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q})(Y)}i.r(s),i.d(s,"VictoryGesture",function(){return G}),i.d(s,"ThumbsUpGesture",function(){return Q});var o={Thumb:0,Index:1,Middle:2,Ring:3,Pinky:4,all:[0,1,2,3,4],nameMapping:{0:"Thumb",1:"Index",2:"Middle",3:"Ring",4:"Pinky"},pointsMapping:{0:[[0,1],[1,2],[2,3],[3,4]],1:[[0,5],[5,6],[6,7],[7,8]],2:[[0,9],[9,10],[10,11],[11,12]],3:[[0,13],[13,14],[14,15],[15,16]],4:[[0,17],[17,18],[18,19],[19,20]]},getName:function(Y){return a(this.nameMapping[Y])!==void 0&&this.nameMapping[Y]},getPoints:function(Y){return a(this.pointsMapping[Y])!==void 0&&this.pointsMapping[Y]}},l={NoCurl:0,HalfCurl:1,FullCurl:2,nameMapping:{0:"No Curl",1:"Half Curl",2:"Full Curl"},getName:function(Y){return a(this.nameMapping[Y])!==void 0&&this.nameMapping[Y]}},c={VerticalUp:0,VerticalDown:1,HorizontalLeft:2,HorizontalRight:3,DiagonalUpRight:4,DiagonalUpLeft:5,DiagonalDownRight:6,DiagonalDownLeft:7,nameMapping:{0:"Vertical Up",1:"Vertical Down",2:"Horizontal Left",3:"Horizontal Right",4:"Diagonal Up Right",5:"Diagonal Up Left",6:"Diagonal Down Right",7:"Diagonal Down Left"},getName:function(Y){return a(this.nameMapping[Y])!==void 0&&this.nameMapping[Y]}};function u(Y,q){var te=typeof Symbol<"u"&&Y[Symbol.iterator]||Y["@@iterator"];if(!te){if(Array.isArray(Y)||(te=function(xe,Pe){if(xe){if(typeof xe=="string")return d(xe,Pe);var ze=Object.prototype.toString.call(xe).slice(8,-1);if(ze==="Object"&&xe.constructor&&(ze=xe.constructor.name),ze==="Map"||ze==="Set")return Array.from(xe);if(ze==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ze))return d(xe,Pe)}}(Y))||q){te&&(Y=te);var ne=0,le=function(){};return{s:le,n:function(){return ne>=Y.length?{done:!0}:{done:!1,value:Y[ne++]}},e:function(xe){throw xe},f:le}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ye,ue=!0,ve=!1;return{s:function(){te=te.call(Y)},n:function(){var xe=te.next();return ue=xe.done,xe},e:function(xe){ve=!0,ye=xe},f:function(){try{ue||te.return==null||te.return()}finally{if(ve)throw ye}}}}function d(Y,q){(q==null||q>Y.length)&&(q=Y.length);for(var te=0,ne=new Array(q);te<q;te++)ne[te]=Y[te];return ne}function h(Y,q){var te=Object.keys(Y);if(Object.getOwnPropertySymbols){var ne=Object.getOwnPropertySymbols(Y);q&&(ne=ne.filter(function(le){return Object.getOwnPropertyDescriptor(Y,le).enumerable})),te.push.apply(te,ne)}return te}function p(Y){for(var q=1;q<arguments.length;q++){var te=arguments[q]!=null?arguments[q]:{};q%2?h(Object(te),!0).forEach(function(ne){g(Y,ne,te[ne])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Y,Object.getOwnPropertyDescriptors(te)):h(Object(te)).forEach(function(ne){Object.defineProperty(Y,ne,Object.getOwnPropertyDescriptor(te,ne))})}return Y}function g(Y,q,te){return q in Y?Object.defineProperty(Y,q,{value:te,enumerable:!0,configurable:!0,writable:!0}):Y[q]=te,Y}function v(Y,q){for(var te=0;te<q.length;te++){var ne=q[te];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(Y,ne.key,ne)}}var b=function(){function Y(ne){(function(le,ye){if(!(le instanceof ye))throw new TypeError("Cannot call a class as a function")})(this,Y),this.options=p(p({},{HALF_CURL_START_LIMIT:60,NO_CURL_START_LIMIT:130,DISTANCE_VOTE_POWER:1.1,SINGLE_ANGLE_VOTE_POWER:.9,TOTAL_ANGLE_VOTE_POWER:1.6}),ne)}var q,te;return q=Y,(te=[{key:"estimate",value:function(ne){var le,ye=[],ue=[],ve=u(o.all);try{for(ve.s();!(le=ve.n()).done;){var xe,Pe=le.value,ze=o.getPoints(Pe),Ke=[],pt=[],dt=u(ze);try{for(dt.s();!(xe=dt.n()).done;){var pe=xe.value,Le=ne[pe[0]],Ue=ne[pe[1]],Ze=this.getSlopes(Le,Ue),je=Ze[0],lt=Ze[1];Ke.push(je),pt.push(lt)}}catch(_t){dt.e(_t)}finally{dt.f()}ye.push(Ke),ue.push(pt)}}catch(_t){ve.e(_t)}finally{ve.f()}var st,ot=[],Ut=[],mt=u(o.all);try{for(mt.s();!(st=mt.n()).done;){var ce=st.value,re=ce==o.Thumb?1:0,$e=o.getPoints(ce),Xe=ne[$e[re][0]],at=ne[$e[re+1][1]],et=ne[$e[3][1]],Ft=this.estimateFingerCurl(Xe,at,et),At=this.calculateFingerDirection(Xe,at,et,ye[ce].slice(re));ot[ce]=Ft,Ut[ce]=At}}catch(_t){mt.e(_t)}finally{mt.f()}return{curls:ot,directions:Ut}}},{key:"getSlopes",value:function(ne,le){var ye=this.calculateSlope(ne[0],ne[1],le[0],le[1]);return ne.length==2?ye:[ye,this.calculateSlope(ne[1],ne[2],le[1],le[2])]}},{key:"angleOrientationAt",value:function(ne){var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,ye=0,ue=0,ve=0;return ne>=75&&ne<=105?ye=1*le:ne>=25&&ne<=155?ue=1*le:ve=1*le,[ye,ue,ve]}},{key:"estimateFingerCurl",value:function(ne,le,ye){var ue=ne[0]-le[0],ve=ne[0]-ye[0],xe=le[0]-ye[0],Pe=ne[1]-le[1],ze=ne[1]-ye[1],Ke=le[1]-ye[1],pt=ne[2]-le[2],dt=ne[2]-ye[2],pe=le[2]-ye[2],Le=Math.sqrt(ue*ue+Pe*Pe+pt*pt),Ue=Math.sqrt(ve*ve+ze*ze+dt*dt),Ze=Math.sqrt(xe*xe+Ke*Ke+pe*pe),je=(Ze*Ze+Le*Le-Ue*Ue)/(2*Ze*Le);je>1?je=1:je<-1&&(je=-1);var lt=Math.acos(je);return(lt=57.2958*lt%180)>this.options.NO_CURL_START_LIMIT?l.NoCurl:lt>this.options.HALF_CURL_START_LIMIT?l.HalfCurl:l.FullCurl}},{key:"estimateHorizontalDirection",value:function(ne,le,ye,ue){return ue==Math.abs(ne)?ne>0?c.HorizontalLeft:c.HorizontalRight:ue==Math.abs(le)?le>0?c.HorizontalLeft:c.HorizontalRight:ye>0?c.HorizontalLeft:c.HorizontalRight}},{key:"estimateVerticalDirection",value:function(ne,le,ye,ue){return ue==Math.abs(ne)?ne<0?c.VerticalDown:c.VerticalUp:ue==Math.abs(le)?le<0?c.VerticalDown:c.VerticalUp:ye<0?c.VerticalDown:c.VerticalUp}},{key:"estimateDiagonalDirection",value:function(ne,le,ye,ue,ve,xe,Pe,ze){var Ke=this.estimateVerticalDirection(ne,le,ye,ue),pt=this.estimateHorizontalDirection(ve,xe,Pe,ze);return Ke==c.VerticalUp?pt==c.HorizontalLeft?c.DiagonalUpLeft:c.DiagonalUpRight:pt==c.HorizontalLeft?c.DiagonalDownLeft:c.DiagonalDownRight}},{key:"calculateFingerDirection",value:function(ne,le,ye,ue){var ve=ne[0]-le[0],xe=ne[0]-ye[0],Pe=le[0]-ye[0],ze=ne[1]-le[1],Ke=ne[1]-ye[1],pt=le[1]-ye[1],dt=Math.max(Math.abs(ve),Math.abs(xe),Math.abs(Pe)),pe=Math.max(Math.abs(ze),Math.abs(Ke),Math.abs(pt)),Le=0,Ue=0,Ze=0,je=pe/(dt+1e-5);je>1.5?Le+=this.options.DISTANCE_VOTE_POWER:je>.66?Ue+=this.options.DISTANCE_VOTE_POWER:Ze+=this.options.DISTANCE_VOTE_POWER;var lt=Math.sqrt(ve*ve+ze*ze),st=Math.sqrt(xe*xe+Ke*Ke),ot=Math.sqrt(Pe*Pe+pt*pt),Ut=Math.max(lt,st,ot),mt=ne[0],ce=ne[1],re=ye[0],$e=ye[1];Ut==lt?(re=ye[0],$e=ye[1]):Ut==ot&&(mt=le[0],ce=le[1]);var Xe=[mt,ce],at=[re,$e],et=this.getSlopes(Xe,at),Ft=this.angleOrientationAt(et,this.options.TOTAL_ANGLE_VOTE_POWER);Le+=Ft[0],Ue+=Ft[1],Ze+=Ft[2];var At,_t=u(ue);try{for(_t.s();!(At=_t.n()).done;){var Xt=At.value,yt=this.angleOrientationAt(Xt,this.options.SINGLE_ANGLE_VOTE_POWER);Le+=yt[0],Ue+=yt[1],Ze+=yt[2]}}catch(Mt){_t.e(Mt)}finally{_t.f()}return Le==Math.max(Le,Ue,Ze)?this.estimateVerticalDirection(Ke,ze,pt,pe):Ze==Math.max(Ue,Ze)?this.estimateHorizontalDirection(xe,ve,Pe,dt):this.estimateDiagonalDirection(Ke,ze,pt,pe,xe,ve,Pe,dt)}},{key:"calculateSlope",value:function(ne,le,ye,ue){var ve=(le-ue)/(ne-ye),xe=180*Math.atan(ve)/Math.PI;return xe<=0?xe=-xe:xe>0&&(xe=180-xe),xe}}])&&v(q.prototype,te),Y}();function x(Y,q){var te=typeof Symbol<"u"&&Y[Symbol.iterator]||Y["@@iterator"];if(!te){if(Array.isArray(Y)||(te=function(xe,Pe){if(xe){if(typeof xe=="string")return C(xe,Pe);var ze=Object.prototype.toString.call(xe).slice(8,-1);if(ze==="Object"&&xe.constructor&&(ze=xe.constructor.name),ze==="Map"||ze==="Set")return Array.from(xe);if(ze==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ze))return C(xe,Pe)}}(Y))||q){te&&(Y=te);var ne=0,le=function(){};return{s:le,n:function(){return ne>=Y.length?{done:!0}:{done:!1,value:Y[ne++]}},e:function(xe){throw xe},f:le}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ye,ue=!0,ve=!1;return{s:function(){te=te.call(Y)},n:function(){var xe=te.next();return ue=xe.done,xe},e:function(xe){ve=!0,ye=xe},f:function(){try{ue||te.return==null||te.return()}finally{if(ve)throw ye}}}}function C(Y,q){(q==null||q>Y.length)&&(q=Y.length);for(var te=0,ne=new Array(q);te<q;te++)ne[te]=Y[te];return ne}function E(Y,q){if(!(Y instanceof q))throw new TypeError("Cannot call a class as a function")}function _(Y,q){for(var te=0;te<q.length;te++){var ne=q[te];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(Y,ne.key,ne)}}var M=function(){function Y(ne){var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};E(this,Y),this.estimator=new b(le),this.gestures=ne}var q,te;return q=Y,(te=[{key:"estimate",value:function(ne,le){var ye,ue=[],ve=this.estimator.estimate(ne),xe=[],Pe=x(o.all);try{for(Pe.s();!(ye=Pe.n()).done;){var ze=ye.value;xe.push([o.getName(ze),l.getName(ve.curls[ze]),c.getName(ve.directions[ze])])}}catch(Le){Pe.e(Le)}finally{Pe.f()}var Ke,pt=x(this.gestures);try{for(pt.s();!(Ke=pt.n()).done;){var dt=Ke.value,pe=dt.matchAgainst(ve.curls,ve.directions);pe>=le&&ue.push({name:dt.name,score:pe})}}catch(Le){pt.e(Le)}finally{pt.f()}return{poseData:xe,gestures:ue}}}])&&_(q.prototype,te),Y}();function R(Y,q){return function(te){if(Array.isArray(te))return te}(Y)||function(te,ne){var le=te==null?null:typeof Symbol<"u"&&te[Symbol.iterator]||te["@@iterator"];if(le!=null){var ye,ue,ve=[],xe=!0,Pe=!1;try{for(le=le.call(te);!(xe=(ye=le.next()).done)&&(ve.push(ye.value),!ne||ve.length!==ne);xe=!0);}catch(ze){Pe=!0,ue=ze}finally{try{xe||le.return==null||le.return()}finally{if(Pe)throw ue}}return ve}}(Y,q)||$(Y,q)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function L(Y,q){var te=typeof Symbol<"u"&&Y[Symbol.iterator]||Y["@@iterator"];if(!te){if(Array.isArray(Y)||(te=$(Y))||q){te&&(Y=te);var ne=0,le=function(){};return{s:le,n:function(){return ne>=Y.length?{done:!0}:{done:!1,value:Y[ne++]}},e:function(xe){throw xe},f:le}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ye,ue=!0,ve=!1;return{s:function(){te=te.call(Y)},n:function(){var xe=te.next();return ue=xe.done,xe},e:function(xe){ve=!0,ye=xe},f:function(){try{ue||te.return==null||te.return()}finally{if(ve)throw ye}}}}function $(Y,q){if(Y){if(typeof Y=="string")return N(Y,q);var te=Object.prototype.toString.call(Y).slice(8,-1);return te==="Object"&&Y.constructor&&(te=Y.constructor.name),te==="Map"||te==="Set"?Array.from(Y):te==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(te)?N(Y,q):void 0}}function N(Y,q){(q==null||q>Y.length)&&(q=Y.length);for(var te=0,ne=new Array(q);te<q;te++)ne[te]=Y[te];return ne}function I(Y,q){for(var te=0;te<q.length;te++){var ne=q[te];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(Y,ne.key,ne)}}var k=function(){function Y(ne){(function(le,ye){if(!(le instanceof ye))throw new TypeError("Cannot call a class as a function")})(this,Y),this.name=ne,this.curls={},this.directions={}}var q,te;return q=Y,(te=[{key:"addCurl",value:function(ne,le){var ye=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;this.curls[ne]===void 0&&(this.curls[ne]=[]),this.curls[ne].push([le,ye])}},{key:"addDirection",value:function(ne,le){var ye=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;this.directions[ne]===void 0&&(this.directions[ne]=[]),this.directions[ne].push([le,ye])}},{key:"matchAgainst",value:function(ne,le){var ye=0,ue=0;for(var ve in ne){var xe=ne[ve],Pe=this.curls[ve];if(Pe!==void 0){ue++;var ze,Ke=!1,pt=0,dt=L(Pe);try{for(dt.s();!(ze=dt.n()).done;){var pe=R(ze.value,2),Le=pe[0],Ue=pe[1];if(xe==Le){ye+=Ue,pt=Math.max(pt,Ue),Ke=!0;break}}}catch(Xe){dt.e(Xe)}finally{dt.f()}Ke||(ye-=pt)}}for(var Ze in le){var je=le[Ze],lt=this.directions[Ze];if(lt!==void 0){ue++;var st,ot=!1,Ut=0,mt=L(lt);try{for(mt.s();!(st=mt.n()).done;){var ce=R(st.value,2),re=ce[0],$e=ce[1];if(je==re){ye+=$e,Ut=Math.max(Ut,$e),ot=!0;break}}}catch(Xe){mt.e(Xe)}finally{mt.f()}ot||(ye-=Ut)}}return ye/ue*10}}])&&I(q.prototype,te),Y}(),P=new k("victory");P.addDirection(o.Thumb,c.VerticalUp,1),P.addDirection(o.Thumb,c.DiagonalUpLeft,1),P.addDirection(o.Thumb,c.DiagonalUpRight,1),P.addCurl(o.Index,l.NoCurl,1),P.addDirection(o.Index,c.VerticalUp,1),P.addDirection(o.Index,c.DiagonalUpLeft,1),P.addDirection(o.Index,c.DiagonalUpRight,1),P.addDirection(o.Index,c.HorizontalLeft,1),P.addDirection(o.Index,c.HorizontalRight,1),P.addCurl(o.Middle,l.NoCurl,1),P.addDirection(o.Middle,c.VerticalUp,1),P.addDirection(o.Middle,c.DiagonalUpLeft,1),P.addDirection(o.Middle,c.DiagonalUpRight,1),P.addDirection(o.Middle,c.HorizontalLeft,1),P.addDirection(o.Middle,c.HorizontalRight,1),P.addCurl(o.Ring,l.FullCurl,1),P.addCurl(o.Ring,l.HalfCurl,.9),P.addCurl(o.Pinky,l.FullCurl,1),P.addCurl(o.Pinky,l.HalfCurl,.9);var G=P,W=new k("thumbs_up");W.addCurl(o.Thumb,l.NoCurl,1),W.addDirection(o.Thumb,c.VerticalUp,1),W.addDirection(o.Thumb,c.DiagonalUpLeft,.9),W.addDirection(o.Thumb,c.DiagonalUpRight,.9);for(var X=0,z=[o.Index,o.Middle,o.Ring,o.Pinky];X<z.length;X++){var J=z[X];W.addCurl(J,l.FullCurl,1),W.addCurl(J,l.HalfCurl,.9)}W.addDirection(o.Index,c.DiagonalUpLeft,1),W.addDirection(o.Index,c.HorizontalLeft,1),W.addDirection(o.Index,c.HorizontalRight,1),W.addDirection(o.Index,c.DiagonalUpRight,1);var Q=W;r.default={GestureEstimator:M,GestureDescription:k,Finger:o,FingerCurl:l,FingerDirection:c,Gestures:s}}]).default})}(RM)),RM.exports}var Ja=XZe(),NM={exports:{}},KZe=NM.exports,J7;function YZe(){return J7||(J7=1,function(n,e){(function(r,i){n.exports=i(wv())})(KZe,function(t){return function(r){var i={};function s(a){if(i[a])return i[a].exports;var o=i[a]={i:a,l:!1,exports:{}};return r[a].call(o.exports,o,o.exports,s),o.l=!0,o.exports}return s.m=r,s.c=i,s.d=function(a,o,l){s.o(a,o)||Object.defineProperty(a,o,{enumerable:!0,get:l})},s.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},s.t=function(a,o){if(o&1&&(a=s(a)),o&8||o&4&&typeof a=="object"&&a&&a.__esModule)return a;var l=Object.create(null);if(s.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:a}),o&2&&typeof a!="string")for(var c in a)s.d(l,c,(function(u){return a[u]}).bind(null,c));return l},s.n=function(a){var o=a&&a.__esModule?function(){return a.default}:function(){return a};return s.d(o,"a",o),o},s.o=function(a,o){return Object.prototype.hasOwnProperty.call(a,o)},s.p="",s(s.s="./src/react-webcam.tsx")}({"./src/react-webcam.tsx":function(r,i,s){s.r(i);var a=s("react"),o=function(){var h=function(p,g){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,b){v.__proto__=b}||function(v,b){for(var x in b)b.hasOwnProperty(x)&&(v[x]=b[x])},h(p,g)};return function(p,g){h(p,g);function v(){this.constructor=p}p.prototype=g===null?Object.create(g):(v.prototype=g.prototype,new v)}}(),l=function(){return l=Object.assign||function(h){for(var p,g=1,v=arguments.length;g<v;g++){p=arguments[g];for(var b in p)Object.prototype.hasOwnProperty.call(p,b)&&(h[b]=p[b])}return h},l.apply(this,arguments)},c=function(h,p){var g={};for(var v in h)Object.prototype.hasOwnProperty.call(h,v)&&p.indexOf(v)<0&&(g[v]=h[v]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function")for(var b=0,v=Object.getOwnPropertySymbols(h);b<v.length;b++)p.indexOf(v[b])<0&&Object.prototype.propertyIsEnumerable.call(h,v[b])&&(g[v[b]]=h[v[b]]);return g};(function(){typeof window>"u"||(navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(p){var g=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return g?new Promise(function(v,b){g.call(navigator,p,v,b)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}))})();function u(){return!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)}var d=function(h){o(p,h);function p(g){var v=h.call(this,g)||this;return v.canvas=null,v.ctx=null,v.requestUserMediaId=0,v.unmounted=!1,v.state={hasUserMedia:!1},v}return p.prototype.componentDidMount=function(){var g=this,v=g.state,b=g.props;if(this.unmounted=!1,!u()){b.onUserMediaError("getUserMedia not supported");return}v.hasUserMedia||this.requestUserMedia(),b.children&&typeof b.children!="function"&&console.warn("children must be a function")},p.prototype.componentDidUpdate=function(g){var v=this.props;if(!u()){v.onUserMediaError("getUserMedia not supported");return}var b=JSON.stringify(g.audioConstraints)!==JSON.stringify(v.audioConstraints),x=JSON.stringify(g.videoConstraints)!==JSON.stringify(v.videoConstraints),C=g.minScreenshotWidth!==v.minScreenshotWidth,E=g.minScreenshotHeight!==v.minScreenshotHeight;(x||C||E)&&(this.canvas=null,this.ctx=null),(b||x)&&(this.stopAndCleanup(),this.requestUserMedia())},p.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},p.stopMediaStream=function(g){g&&(g.getVideoTracks&&g.getAudioTracks?(g.getVideoTracks().map(function(v){g.removeTrack(v),v.stop()}),g.getAudioTracks().map(function(v){g.removeTrack(v),v.stop()})):g.stop())},p.prototype.stopAndCleanup=function(){var g=this.state;g.hasUserMedia&&(p.stopMediaStream(this.stream),g.src&&window.URL.revokeObjectURL(g.src))},p.prototype.getScreenshot=function(g){var v=this,b=v.state,x=v.props;if(!b.hasUserMedia)return null;var C=this.getCanvas(g);return C&&C.toDataURL(x.screenshotFormat,x.screenshotQuality)},p.prototype.getCanvas=function(g){var v=this,b=v.state,x=v.props;if(!this.video||!b.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var C=this.video.videoWidth,E=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var _=C/E;C=x.minScreenshotWidth||this.video.clientWidth,E=C/_,x.minScreenshotHeight&&E<x.minScreenshotHeight&&(E=x.minScreenshotHeight,C=E*_)}this.canvas=document.createElement("canvas"),this.canvas.width=(g==null?void 0:g.width)||C,this.canvas.height=(g==null?void 0:g.height)||E,this.ctx=this.canvas.getContext("2d")}var M=this,R=M.ctx,L=M.canvas;return R&&L&&(L.width=(g==null?void 0:g.width)||L.width,L.height=(g==null?void 0:g.height)||L.height,x.mirrored&&(R.translate(L.width,0),R.scale(-1,1)),R.imageSmoothingEnabled=x.imageSmoothing,R.drawImage(this.video,0,0,(g==null?void 0:g.width)||L.width,(g==null?void 0:g.height)||L.height),x.mirrored&&(R.scale(-1,1),R.translate(-L.width,0))),L},p.prototype.requestUserMedia=function(){var g=this,v=this.props,b=function(E,_){var M={video:typeof _<"u"?_:!0};v.audio&&(M.audio=typeof E<"u"?E:!0),g.requestUserMediaId++;var R=g.requestUserMediaId;navigator.mediaDevices.getUserMedia(M).then(function(L){g.unmounted||R!==g.requestUserMediaId?p.stopMediaStream(L):g.handleUserMedia(null,L)}).catch(function(L){g.handleUserMedia(L)})};if("mediaDevices"in navigator)b(v.audioConstraints,v.videoConstraints);else{var x=function(E){return{optional:[{sourceId:E}]}},C=function(E){var _=E.deviceId;return typeof _=="string"?_:Array.isArray(_)&&_.length>0?_[0]:typeof _=="object"&&_.ideal?_.ideal:null};MediaStreamTrack.getSources(function(E){var _=null,M=null;E.forEach(function($){$.kind==="audio"?_=$.id:$.kind==="video"&&(M=$.id)});var R=C(v.audioConstraints);R&&(_=R);var L=C(v.videoConstraints);L&&(M=L),b(x(_),x(M))})}},p.prototype.handleUserMedia=function(g,v){var b=this.props;if(g||!v){this.setState({hasUserMedia:!1}),b.onUserMediaError(g);return}this.stream=v;try{this.video&&(this.video.srcObject=v),this.setState({hasUserMedia:!0})}catch{this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(v)})}b.onUserMedia(v)},p.prototype.render=function(){var g=this,v=this,b=v.state,x=v.props,C=x.audio;x.forceScreenshotSourceSize;var E=x.disablePictureInPicture;x.onUserMedia,x.onUserMediaError,x.screenshotFormat,x.screenshotQuality,x.minScreenshotWidth,x.minScreenshotHeight,x.audioConstraints,x.videoConstraints,x.imageSmoothing;var _=x.mirrored,M=x.style,R=M===void 0?{}:M,L=x.children,$=c(x,["audio","forceScreenshotSourceSize","disablePictureInPicture","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style","children"]),N=_?l(l({},R),{transform:(R.transform||"")+" scaleX(-1)"}):R,I={getScreenshot:this.getScreenshot.bind(this)};return a.createElement(a.Fragment,null,a.createElement("video",l({autoPlay:!0,disablePictureInPicture:E,src:b.src,muted:!C,playsInline:!0,ref:function(k){g.video=k},style:N},$)),L&&L(I))},p.defaultProps={audio:!1,disablePictureInPicture:!1,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},p}(a.Component);i.default=d},react:function(r,i){r.exports=t}}).default})}(NM)),NM.exports}var JZe=YZe();const ZZe=qp(JZe),Z7={thumb:[0,1,2,3,4],indexFinger:[0,5,6,7,8],middleFinger:[0,9,10,11,12],ringFinger:[0,13,14,15,16],pinky:[0,17,18,19,20]},QZe={thumb:"red",indexFinger:"blue",middleFinger:"green",ringFinger:"orange",pinky:"purple"},eQe=[Ja.Gestures.ThumbsUpGesture,Ja.Gestures.VictoryGesture,nQe()],tQe={thumbs_up:"",victory:"",middle_finger:""};function nQe(){const n=new Ja.GestureDescription("middle_finger");return n.addCurl(Ja.Finger.Middle,Ja.FingerCurl.NoCurl),n.addDirection(Ja.Finger.Middle,Ja.FingerDirection.VerticalUp,1),n.addDirection(Ja.Finger.Middle,Ja.FingerDirection.DiagonalUpLeft,.9),n.addDirection(Ja.Finger.Middle,Ja.FingerDirection.DiagonalUpRight,.9),[Ja.Finger.Thumb,Ja.Finger.Index,Ja.Finger.Ring,Ja.Finger.Pinky].forEach(e=>{n.addCurl(e,Ja.FingerCurl.FullCurl,1),n.addCurl(e,Ja.FingerCurl.HalfCurl,.9)}),n}const rQe=(n,e)=>{e.clearRect(0,0,e.canvas.width,e.canvas.height),n.length>0&&n.forEach(t=>{const r=t.keypoints;for(let i in Z7){const s=Z7[i];for(let a=0;a<s.length-1;a++){const o=r[s[a]],l=r[s[a+1]];e.beginPath(),e.moveTo(o.x,o.y),e.lineTo(l.x,l.y),e.strokeStyle=QZe[i],e.lineWidth=3,e.stroke()}}for(let i=0;i<r.length;i++){const s=r[i].x,a=r[i].y;e.beginPath(),e.arc(s,a,5,0,2*Math.PI),e.fillStyle="white",e.fill()}})},iQe=async(n,e)=>{const t=[];if(n.length>0){const r=new Ja.GestureEstimator(e);n.forEach((i,s)=>{if(i.keypoints3D){const a=i.keypoints3D.map(l=>[l.x,l.y,l.z]),o=r.estimate(a,7.5);if(o.gestures.length>0){let l=o.gestures.reduce((c,u)=>c.score>u.score?c:u);l.score>9&&t.push({name:l.name,emoji:tQe[l.name]||"",confidence:l.score,handedness:i.handedness||"Unknown",handIndex:s})}}})}return t.length>0?t:null};function sQe(){const n=F.useRef(null),e=F.useRef(null),[t,r]=F.useState("Initializing..."),[i,s]=F.useState(null),[a,o]=F.useState([]),l=async c=>{if(typeof n.current<"u"&&n.current!==null&&n.current.video.readyState===4){const u=n.current.video,d=n.current.video.videoWidth,h=n.current.video.videoHeight;n.current.video.width=d,n.current.video.height=h,e.current.width=d,e.current.height=h;try{const p=await c.estimateHands(u,{flipHorizontal:!1});if(p.length>0){console.log(`Detected ${p.length} hand(s)`);const v=await iQe(p,eQe);v?(console.log("Detected gestures:",v),o(v)):o([])}else o([]);const g=e.current.getContext("2d");rQe(p,g)}catch(p){console.error("Detection error:",p)}}};return F.useEffect(()=>{(async()=>{try{r("Initializing TensorFlow..."),await UTe(),console.log("TensorFlow backend:",HZ()),r("Loading MediaPipe Hands model...");const u=MN.MediaPipeHands,h=await jZe(u,{runtime:"mediapipe",solutionPath:"https://cdn.jsdelivr.net/npm/@mediapipe/hands",maxHands:2,modelType:"full"});console.log("Hand pose model loaded with multi-hand detection."),r("Model loaded - show your hands to the camera!");const p=setInterval(()=>{l(h)},100);return()=>clearInterval(p)}catch(u){console.error("Error loading model:",u),s(`Failed to load hand pose model: ${u.message}`),r("Error")}})().then(u=>{})},[]),V.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100 p-4",children:V.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 w-full max-w-4xl",children:[V.jsx("h1",{className:"text-3xl font-bold mb-6 text-center",children:"Hand Pose Detection with Gestures"}),V.jsx("div",{className:"mb-6",children:V.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[V.jsx("div",{className:`w-3 h-3 rounded-full ${i?"bg-red-500":"bg-green-500 animate-pulse"}`}),V.jsx("span",{className:"text-base text-gray-600",children:t})]})}),a.length>0&&V.jsx("div",{className:"mb-4 flex gap-4 justify-center flex-wrap",children:a.map((c,u)=>V.jsxs("div",{className:"p-4 bg-blue-100 border-2 border-blue-500 rounded-lg text-center min-w-[200px]",children:[V.jsxs("div",{className:"text-sm font-semibold text-blue-600 mb-1",children:[c.handedness," Hand"]}),V.jsx("div",{className:"text-5xl mb-2",children:c.emoji}),V.jsx("div",{className:"text-lg font-bold text-blue-800",children:c.name.replace("_"," ").toUpperCase()}),V.jsxs("div",{className:"text-xs text-blue-600",children:["Confidence: ",c.confidence.toFixed(2)]})]},u))}),V.jsxs("div",{className:"relative w-full mx-auto",style:{maxWidth:"960px",height:"720px"},children:[V.jsx(ZZe,{ref:n,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",transform:"scaleX(-1)",zIndex:1}}),V.jsx("canvas",{ref:e,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:2,transform:"scaleX(-1)"}})]}),V.jsxs("div",{className:"mt-6 space-y-3",children:[V.jsx("p",{className:"text-base text-gray-600 text-center",children:"Show gestures with either or both hands:  Thumbs Up or  Victory/Peace Sign"}),i&&V.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:V.jsx("p",{className:"text-sm",children:i})}),V.jsxs("div",{className:"flex flex-wrap gap-3 justify-center mt-6",children:[V.jsxs("div",{className:"flex items-center space-x-2",children:[V.jsx("div",{className:"w-4 h-4 bg-red-500 rounded"}),V.jsx("span",{className:"text-sm",children:"Thumb"})]}),V.jsxs("div",{className:"flex items-center space-x-2",children:[V.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded"}),V.jsx("span",{className:"text-sm",children:"Index"})]}),V.jsxs("div",{className:"flex items-center space-x-2",children:[V.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),V.jsx("span",{className:"text-sm",children:"Middle"})]}),V.jsxs("div",{className:"flex items-center space-x-2",children:[V.jsx("div",{className:"w-4 h-4 bg-orange-500 rounded"}),V.jsx("span",{className:"text-sm",children:"Ring"})]}),V.jsxs("div",{className:"flex items-center space-x-2",children:[V.jsx("div",{className:"w-4 h-4 bg-purple-500 rounded"}),V.jsx("span",{className:"text-sm",children:"Pinky"})]})]})]})]})})}function Ase({audioData:n,autoPlay:e=!0,onPlayingStateChange:t}){const r=F.useRef(null),i=F.useRef(null);return F.useEffect(()=>{if(!(!n||n.length===0)){if(n===i.current){console.log("Audio already processed, skipping...");return}console.log("Processing new audio data..."),i.current=n;try{let s;if(typeof n=="string"){const c=atob(n);s=new Uint8Array(c.length);for(let u=0;u<c.length;u++)s[u]=c.charCodeAt(u)}else s=new Uint8Array(n);console.log("Creating audio blob, size:",s.length,"bytes");const a=new Blob([s],{type:"audio/mpeg"}),o=URL.createObjectURL(a);console.log("Audio URL created:",o),r.current&&(console.log("Cleaning up previous audio"),r.current.pause(),r.current.onplay=null,r.current.onended=null,r.current.onpause=null,r.current.onerror=null,URL.revokeObjectURL(r.current.src));const l=new Audio(o);r.current=l,l.onloadeddata=()=>{console.log("Audio loaded successfully, duration:",l.duration)},l.onplay=()=>{console.log("Audio started playing"),t&&t(!0)},l.onended=()=>{console.log("Audio playback finished"),URL.revokeObjectURL(o),t&&t(!1)},l.onpause=()=>{l.currentTime>0&&l.currentTime<l.duration&&(console.log("Audio paused at",l.currentTime),t&&t(!1))},l.onerror=c=>{console.error("Error playing audio:",c),console.error("Audio error details:",l.error),URL.revokeObjectURL(o),t&&t(!1)},e&&setTimeout(()=>{l.play().then(()=>{console.log("Audio playing...")}).catch(c=>{console.error("Failed to auto-play audio:",c),t&&t(!1)})},100)}catch(s){console.error("Error processing audio data:",s),t&&t(!1)}}},[n]),F.useEffect(()=>()=>{console.log("TTSControls unmounting, cleaning up audio"),r.current&&(r.current.pause(),r.current.onplay=null,r.current.onended=null,r.current.onpause=null,r.current.onerror=null,r.current.src&&URL.revokeObjectURL(r.current.src)),t&&t(!1)},[]),null}class aQe extends bI{constructor(e){super(e),this.type=Ws}parse(e){const a=function($,N){switch($){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(N||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(N||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(N||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(N||""))}},d=function($,N,I){N=N||1024;let P=$.pos,G=-1,W=0,X="",z=String.fromCharCode.apply(null,new Uint16Array($.subarray(P,P+128)));for(;0>(G=z.indexOf(`
`))&&W<N&&P<$.byteLength;)X+=z,W+=z.length,P+=128,z+=String.fromCharCode.apply(null,new Uint16Array($.subarray(P,P+128)));return-1<G?($.pos+=W+G+1,X+z.slice(0,G)):!1},h=function($){const N=/^#\?(\S+)/,I=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,k=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,P=/^\s*FORMAT=(\S+)\s*$/,G=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,W={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let X,z;for(($.pos>=$.byteLength||!(X=d($)))&&a(1,"no header found"),(z=X.match(N))||a(3,"bad initial token"),W.valid|=1,W.programtype=z[1],W.string+=X+`
`;X=d($),X!==!1;){if(W.string+=X+`
`,X.charAt(0)==="#"){W.comments+=X+`
`;continue}if((z=X.match(I))&&(W.gamma=parseFloat(z[1])),(z=X.match(k))&&(W.exposure=parseFloat(z[1])),(z=X.match(P))&&(W.valid|=2,W.format=z[1]),(z=X.match(G))&&(W.valid|=4,W.height=parseInt(z[1],10),W.width=parseInt(z[2],10)),W.valid&2&&W.valid&4)break}return W.valid&2||a(3,"missing format specifier"),W.valid&4||a(3,"missing image size specifier"),W},p=function($,N,I){const k=N;if(k<8||k>32767||$[0]!==2||$[1]!==2||$[2]&128)return new Uint8Array($);k!==($[2]<<8|$[3])&&a(3,"wrong scanline width");const P=new Uint8Array(4*N*I);P.length||a(4,"unable to allocate buffer space");let G=0,W=0;const X=4*k,z=new Uint8Array(4),J=new Uint8Array(X);let Q=I;for(;Q>0&&W<$.byteLength;){W+4>$.byteLength&&a(1),z[0]=$[W++],z[1]=$[W++],z[2]=$[W++],z[3]=$[W++],(z[0]!=2||z[1]!=2||(z[2]<<8|z[3])!=k)&&a(3,"bad rgbe scanline format");let Y=0,q;for(;Y<X&&W<$.byteLength;){q=$[W++];const ne=q>128;if(ne&&(q-=128),(q===0||Y+q>X)&&a(3,"bad scanline data"),ne){const le=$[W++];for(let ye=0;ye<q;ye++)J[Y++]=le}else J.set($.subarray(W,W+q),Y),Y+=q,W+=q}const te=k;for(let ne=0;ne<te;ne++){let le=0;P[G]=J[ne+le],le+=k,P[G+1]=J[ne+le],le+=k,P[G+2]=J[ne+le],le+=k,P[G+3]=J[ne+le],G+=4}Q--}return P},g=function($,N,I,k){const P=$[N+3],G=Math.pow(2,P-128)/255;I[k+0]=$[N+0]*G,I[k+1]=$[N+1]*G,I[k+2]=$[N+2]*G,I[k+3]=1},v=function($,N,I,k){const P=$[N+3],G=Math.pow(2,P-128)/255;I[k+0]=qd.toHalfFloat(Math.min($[N+0]*G,65504)),I[k+1]=qd.toHalfFloat(Math.min($[N+1]*G,65504)),I[k+2]=qd.toHalfFloat(Math.min($[N+2]*G,65504)),I[k+3]=qd.toHalfFloat(1)},b=new Uint8Array(e);b.pos=0;const x=h(b),C=x.width,E=x.height,_=p(b.subarray(b.pos),C,E);let M,R,L;switch(this.type){case ns:L=_.length/4;const $=new Float32Array(L*4);for(let I=0;I<L;I++)g(_,I*4,$,I*4);M=$,R=ns;break;case Ws:L=_.length/4;const N=new Uint16Array(L*4);for(let I=0;I<L;I++)v(_,I*4,N,I*4);M=N,R=Ws;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:C,height:E,data:M,header:x.string,gamma:x.gamma,exposure:x.exposure,type:R}}setDataType(e){return this.type=e,this}load(e,t,r,i){function s(a,o){switch(a.type){case ns:case Ws:a.colorSpace=qu,a.minFilter=ai,a.magFilter=ai,a.generateMipmaps=!1,a.flipY=!0;break}t&&t(a,o)}return super.load(e,s,r,i)}}const Tse="/models/lapwing/character3.glb";function oQe({isSpeaking:n=!1,poseFromChat:e=null,morphsFromChat:t=null,...r}){const i=F.useRef(null),{nodes:s,materials:a,scene:o,animations:l}=zg(Tse),c=F.useRef(null),u=F.useRef({}),d=F.useRef(null),h=F.useRef(null),p=F.useRef(null),g=F.useRef(null),v=F.useRef(null),b=F.useRef(new be),x=F.useRef(new be),C=F.useRef(new be),E=F.useRef(null),_=F.useRef(0),M=F.useRef(Math.random()*3+2),R=F.useRef(!1),L=F.useRef(0),$=F.useRef(0);F.useEffect(()=>{if(!(!o||!l.length))return c.current=new mK(o),l.forEach(Q=>{const Y=c.current.clipAction(Q);Q.name.endsWith("_A")?(Y.setLoop(sP,1),Y.clampWhenFinished=!0):Y.setLoop(aP,2),u.current[Q.name]=Y}),u.current.Neutral_A&&(d.current=u.current.Neutral_A,d.current.play()),h.current=s["DEF-breastL"],p.current=s["DEF-breastR"],g.current=s["DEF-shoulderL"],v.current=s["DEF-shoulderR"],h.current&&p.current&&b.current.copy(h.current.scale),g.current&&x.current.copy(g.current.scale),v.current&&C.current.copy(v.current.scale),E.current=s.Head,()=>{var Q;return(Q=c.current)==null?void 0:Q.stopAllAction()}},[o,l]);const{debugMode:N}=Sy("Debug",{debugMode:{value:!1,label:"Enable GUI Control (Override Props)"}}),{pose:I}=Sy("Poses",{pose:{value:"Neutral_A",options:{Neutral:"Neutral_A",Thinking:"Thinking_A",FlippingOff:"FlippingOff_A",HandsOnHips:"HandsOnHips_A",ThumbsUp:"ThumbsUp_A"}}},{collapsed:!N}),{breathing:k,breathStrength:P,breathSpeed:G}=Sy("Breathing",{breathing:!0,breathStrength:{value:.02,min:0,max:.05,step:.001},breathSpeed:{value:1.5,min:.5,max:3,step:.1}}),{enableBlinking:W,blinkSpeed:X,blinkFrequency:z}=Sy("Blinking",{enableBlinking:!0,blinkSpeed:{value:.15,min:.05,max:.5,step:.01,label:"Blink Speed (s)"},blinkFrequency:{value:3,min:1,max:10,step:.5,label:"Avg Time Between Blinks (s)"}}),J=Sy("Shape Keys",{"Eyebrows - Angry":{value:0,min:0,max:1,step:.01},"Eyebrows - Sad":{value:0,min:0,max:1,step:.01},"Right Eye - Closed":{value:0,min:0,max:1,step:.01},"Left Eye - Closed":{value:0,min:0,max:1,step:.01},"Both Eyes - Closed":{value:0,min:0,max:1,step:.01},"Mouth - Happy":{value:0,min:0,max:1,step:.01},"Mouth - Sad":{value:0,min:0,max:1,step:.01},"Mouth - A":{value:0,min:0,max:1,step:.01}},{collapsed:!N});return F.useEffect(()=>{let Q=N?I:e||"Neutral_A";console.log("Pose transition triggered:",{debugMode:N,guiPose:I,poseFromChat:e,targetPose:Q});const Y=u.current[Q];!Y||Y===d.current||(Y.reset().fadeIn(.35).play(),d.current&&d.current!==Y&&d.current.fadeOut(.35),d.current=Y)},[I,e,N]),N_((Q,Y)=>{var q;if((q=c.current)==null||q.update(Y),k&&h.current){const te=Q.clock.getElapsedTime(),ne=Math.sin(te*G)*P;h.current.scale.set(b.current.x*(1+ne*.05),b.current.y*(1+ne),b.current.z),p.current.scale.set(b.current.x*(1+ne*.05),b.current.y*(1+ne),b.current.z),g.current.scale.set(x.current.x*(1+ne*.8),x.current.y*(1+ne),x.current.z),v.current.scale.set(C.current.x*(1+ne*.8),C.current.y*(1+ne),C.current.z)}if(W&&E.current&&(_.current+=Y,!R.current&&_.current>=M.current&&(R.current=!0,L.current=0,_.current=0),R.current&&(L.current+=Y/X,L.current>=1&&(R.current=!1,L.current=0,_.current=0,M.current=Math.random()*z+z/2))),n&&($.current+=Y),E.current&&E.current.morphTargetInfluences){const te=E.current.morphTargetDictionary,ne=N?J:t||{};Object.keys(J).forEach(le=>{const ye=te[le];if(ye!==void 0){let ue=ne[le]||0;if(W&&le==="Both Eyes - Closed"&&R.current){const ve=L.current,xe=ve<.5?2*ve*ve:1-Math.pow(-2*ve+2,2)/2;ue=Math.max(ue,xe)}if(n&&le==="Mouth - A"){const ve=Math.sin($.current*8)*.5+.5,xe=Math.sin($.current*15.7)*.2;ue=Math.max(ue,(ve+xe)*.7)}E.current.morphTargetInfluences[ye]=ue}})}}),V.jsx("group",{ref:i,...r,scale:5,position:[1,-.2,4],rotation:[0,Math.PI/6,0],castShadow:!0,receiveShadow:!0,children:V.jsx("primitive",{object:o})})}zg.preload(Tse);const lQe="/models/modern_room.glb";function cQe(n){const e=F.useRef(null),{nodes:t,materials:r,scene:i}=zg(lQe);return V.jsx("group",{ref:e,...n,dispose:null,scale:7,position:[0,0,0],rotation:[0,Math.PI/2,0],children:V.jsx("primitive",{object:i})})}const Mse=new Map([["night_street","/hdris/cobblestone_street_night_4k.hdr"],["outdoors","/hdris/lilienstein_4k.hdr"]]);function uQe({y:n=-1.2,hdri:e}){const t=Sh(aQe,Mse.get(e));return V.jsxs("mesh",{position:[0,n,0],children:[V.jsx("sphereGeometry",{args:[60,64,64]}),V.jsx("meshBasicMaterial",{map:t,side:Ao,toneMapped:!1})]})}function dQe({fov:n,position:e,rotation:t}){const{camera:r}=Yd();return F.useEffect(()=>{r.fov=n,r.updateProjectionMatrix()},[n,r]),F.useEffect(()=>{r.position.set(e[0],e[1],e[2])},[e,r]),F.useEffect(()=>{r.rotation.set(t[0],t[1],t[2])},[t,r]),null}function z5({isSpeaking:n=!1,pose:e=null,expressions:t=null}){const{hdri:r,envIntensity:i,envBlur:s,sphereY:a,shadowOpacity:o,shadowBlur:l,shadowScale:c,camFov:u,camX:d,camY:h,camZ:p,camRotX:g,camRotY:v,camRotZ:b}=Sy("Scene Controls",{hdri:{value:"outdoors",options:{Outdoors:"outdoors",NightStreet:"night_street"}},envIntensity:{value:1,min:0,max:5,step:.1},envBlur:{value:.4,min:0,max:1,step:.01},sphereY:{value:-2,min:-5,max:0,step:.1},shadowOpacity:{value:.35,min:0,max:1,step:.01},shadowBlur:{value:2.5,min:0,max:10,step:.1},shadowScale:{value:10,min:1,max:30,step:1},camFov:{value:35,min:30,max:90,step:1},camX:{value:4.5,min:-20,max:20,step:.5},camY:{value:7.5,min:-20,max:20,step:.5},camZ:{value:10,min:-20,max:20,step:.5},camRotX:{value:0,min:-Math.PI,max:Math.PI,step:.01},camRotY:{value:.5,min:-Math.PI,max:Math.PI,step:.01},camRotZ:{value:0,min:-Math.PI,max:Math.PI,step:.01}});return V.jsxs("div",{className:"scene-container",children:[V.jsx(A4,{collapsed:!0}),V.jsxs(jK,{shadows:!0,dpr:[1,2],camera:{position:[8,10,16],fov:u.value},children:[V.jsx(Ube,{files:Mse.get(r),intensity:i,blur:s.value}),V.jsx(uQe,{hdri:r,y:a.value},r),V.jsx(zbe,{position:[0,.01,0],opacity:o.value,scale:c.value,blur:l.value,far:4}),V.jsx(dQe,{fov:u,position:[d,h,p],rotation:[g,v,b]}),V.jsx(oQe,{isSpeaking:n,poseFromChat:e,morphsFromChat:t}),V.jsx(cQe,{})]})]})}function fQe(n,e){n.terminate=function(){const t=()=>{};this.onerror=t,this.onmessage=t,this.onopen=t;const r=new Date,i=Math.random().toString().substring(2,8),s=this.onclose;this.onclose=a=>{const o=new Date().getTime()-r.getTime();e(`Discarded socket (#${i})  closed after ${o}ms, with code/reason: ${a.code}/${a.reason}`)},this.close(),s==null||s.call(n,{code:4001,reason:`Quick discarding socket (#${i}) without waiting for the shutdown sequence.`,wasClean:!1})}}const iC={LF:`
`,NULL:"\0"};class rg{get body(){return!this._body&&this.isBinaryBody&&(this._body=new TextDecoder().decode(this._binaryBody)),this._body||""}get binaryBody(){return!this._binaryBody&&!this.isBinaryBody&&(this._binaryBody=new TextEncoder().encode(this._body)),this._binaryBody}constructor(e){const{command:t,headers:r,body:i,binaryBody:s,escapeHeaderValues:a,skipContentLengthHeader:o}=e;this.command=t,this.headers=Object.assign({},r||{}),s?(this._binaryBody=s,this.isBinaryBody=!0):(this._body=i||"",this.isBinaryBody=!1),this.escapeHeaderValues=a||!1,this.skipContentLengthHeader=o||!1}static fromRawFrame(e,t){const r={},i=s=>s.replace(/^\s+|\s+$/g,"");for(const s of e.headers.reverse()){s.indexOf(":");const a=i(s[0]);let o=i(s[1]);t&&e.command!=="CONNECT"&&e.command!=="CONNECTED"&&(o=rg.hdrValueUnEscape(o)),r[a]=o}return new rg({command:e.command,headers:r,binaryBody:e.binaryBody,escapeHeaderValues:t})}toString(){return this.serializeCmdAndHeaders()}serialize(){const e=this.serializeCmdAndHeaders();return this.isBinaryBody?rg.toUnit8Array(e,this._binaryBody).buffer:e+this._body+iC.NULL}serializeCmdAndHeaders(){const e=[this.command];this.skipContentLengthHeader&&delete this.headers["content-length"];for(const t of Object.keys(this.headers||{})){const r=this.headers[t];this.escapeHeaderValues&&this.command!=="CONNECT"&&this.command!=="CONNECTED"?e.push(`${t}:${rg.hdrValueEscape(`${r}`)}`):e.push(`${t}:${r}`)}return(this.isBinaryBody||!this.isBodyEmpty()&&!this.skipContentLengthHeader)&&e.push(`content-length:${this.bodyLength()}`),e.join(iC.LF)+iC.LF+iC.LF}isBodyEmpty(){return this.bodyLength()===0}bodyLength(){const e=this.binaryBody;return e?e.length:0}static sizeOfUTF8(e){return e?new TextEncoder().encode(e).length:0}static toUnit8Array(e,t){const r=new TextEncoder().encode(e),i=new Uint8Array([0]),s=new Uint8Array(r.length+t.length+i.length);return s.set(r),s.set(t,r.length),s.set(i,r.length+t.length),s}static marshall(e){return new rg(e).serialize()}static hdrValueEscape(e){return e.replace(/\\/g,"\\\\").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/:/g,"\\c")}static hdrValueUnEscape(e){return e.replace(/\\r/g,"\r").replace(/\\n/g,`
`).replace(/\\c/g,":").replace(/\\\\/g,"\\")}}const Q7=0,tM=10,nM=13,hQe=58;class pQe{constructor(e,t){this.onFrame=e,this.onIncomingPing=t,this._encoder=new TextEncoder,this._decoder=new TextDecoder,this._token=[],this._initState()}parseChunk(e,t=!1){let r;if(typeof e=="string"?r=this._encoder.encode(e):r=new Uint8Array(e),t&&r[r.length-1]!==0){const i=new Uint8Array(r.length+1);i.set(r,0),i[r.length]=0,r=i}for(let i=0;i<r.length;i++){const s=r[i];this._onByte(s)}}_collectFrame(e){if(e!==Q7&&e!==nM){if(e===tM){this.onIncomingPing();return}this._onByte=this._collectCommand,this._reinjectByte(e)}}_collectCommand(e){if(e!==nM){if(e===tM){this._results.command=this._consumeTokenAsUTF8(),this._onByte=this._collectHeaders;return}this._consumeByte(e)}}_collectHeaders(e){if(e!==nM){if(e===tM){this._setupCollectBody();return}this._onByte=this._collectHeaderKey,this._reinjectByte(e)}}_reinjectByte(e){this._onByte(e)}_collectHeaderKey(e){if(e===hQe){this._headerKey=this._consumeTokenAsUTF8(),this._onByte=this._collectHeaderValue;return}this._consumeByte(e)}_collectHeaderValue(e){if(e!==nM){if(e===tM){this._results.headers.push([this._headerKey,this._consumeTokenAsUTF8()]),this._headerKey=void 0,this._onByte=this._collectHeaders;return}this._consumeByte(e)}}_setupCollectBody(){const e=this._results.headers.filter(t=>t[0]==="content-length")[0];e?(this._bodyBytesRemaining=parseInt(e[1],10),this._onByte=this._collectBodyFixedSize):this._onByte=this._collectBodyNullTerminated}_collectBodyNullTerminated(e){if(e===Q7){this._retrievedBody();return}this._consumeByte(e)}_collectBodyFixedSize(e){if(this._bodyBytesRemaining--===0){this._retrievedBody();return}this._consumeByte(e)}_retrievedBody(){this._results.binaryBody=this._consumeTokenAsRaw();try{this.onFrame(this._results)}catch(e){console.log("Ignoring an exception thrown by a frame handler. Original exception: ",e)}this._initState()}_consumeByte(e){this._token.push(e)}_consumeTokenAsUTF8(){return this._decoder.decode(this._consumeTokenAsRaw())}_consumeTokenAsRaw(){const e=new Uint8Array(this._token);return this._token=[],e}_initState(){this._results={command:void 0,headers:[],binaryBody:void 0},this._token=[],this._headerKey=void 0,this._onByte=this._collectFrame}}var ig;(function(n){n[n.CONNECTING=0]="CONNECTING",n[n.OPEN=1]="OPEN",n[n.CLOSING=2]="CLOSING",n[n.CLOSED=3]="CLOSED"})(ig||(ig={}));var Hd;(function(n){n[n.ACTIVE=0]="ACTIVE",n[n.DEACTIVATING=1]="DEACTIVATING",n[n.INACTIVE=2]="INACTIVE"})(Hd||(Hd={}));var RN;(function(n){n[n.LINEAR=0]="LINEAR",n[n.EXPONENTIAL=1]="EXPONENTIAL"})(RN||(RN={}));var l_;(function(n){n.Interval="interval",n.Worker="worker"})(l_||(l_={}));class mQe{constructor(e,t=l_.Interval,r){this._interval=e,this._strategy=t,this._debug=r,this._workerScript=`
    var startTime = Date.now();
    setInterval(function() {
        self.postMessage(Date.now() - startTime);
    }, ${this._interval});
  `}start(e){this.stop(),this.shouldUseWorker()?this.runWorker(e):this.runInterval(e)}stop(){this.disposeWorker(),this.disposeInterval()}shouldUseWorker(){return typeof Worker<"u"&&this._strategy===l_.Worker}runWorker(e){this._debug("Using runWorker for outgoing pings"),this._worker||(this._worker=new Worker(URL.createObjectURL(new Blob([this._workerScript],{type:"text/javascript"}))),this._worker.onmessage=t=>e(t.data))}runInterval(e){if(this._debug("Using runInterval for outgoing pings"),!this._timer){const t=Date.now();this._timer=setInterval(()=>{e(Date.now()-t)},this._interval)}}disposeWorker(){this._worker&&(this._worker.terminate(),delete this._worker,this._debug("Outgoing ping disposeWorker"))}disposeInterval(){this._timer&&(clearInterval(this._timer),delete this._timer,this._debug("Outgoing ping disposeInterval"))}}class Ol{constructor(e){this.versions=e}supportedVersions(){return this.versions.join(",")}protocolVersions(){return this.versions.map(e=>`v${e.replace(".","")}.stomp`)}}Ol.V1_0="1.0";Ol.V1_1="1.1";Ol.V1_2="1.2";Ol.default=new Ol([Ol.V1_2,Ol.V1_1,Ol.V1_0]);class gQe{get connectedVersion(){return this._connectedVersion}get connected(){return this._connected}constructor(e,t,r){this._client=e,this._webSocket=t,this._connected=!1,this._serverFrameHandlers={CONNECTED:i=>{this.debug(`connected to server ${i.headers.server}`),this._connected=!0,this._connectedVersion=i.headers.version,this._connectedVersion===Ol.V1_2&&(this._escapeHeaderValues=!0),this._setupHeartbeat(i.headers),this.onConnect(i)},MESSAGE:i=>{const s=i.headers.subscription,a=this._subscriptions[s]||this.onUnhandledMessage,o=i,l=this,c=this._connectedVersion===Ol.V1_2?o.headers.ack:o.headers["message-id"];o.ack=(u={})=>l.ack(c,s,u),o.nack=(u={})=>l.nack(c,s,u),a(o)},RECEIPT:i=>{const s=this._receiptWatchers[i.headers["receipt-id"]];s?(s(i),delete this._receiptWatchers[i.headers["receipt-id"]]):this.onUnhandledReceipt(i)},ERROR:i=>{this.onStompError(i)}},this._counter=0,this._subscriptions={},this._receiptWatchers={},this._partialData="",this._escapeHeaderValues=!1,this._lastServerActivityTS=Date.now(),this.debug=r.debug,this.stompVersions=r.stompVersions,this.connectHeaders=r.connectHeaders,this.disconnectHeaders=r.disconnectHeaders,this.heartbeatIncoming=r.heartbeatIncoming,this.heartbeatToleranceMultiplier=r.heartbeatGracePeriods,this.heartbeatOutgoing=r.heartbeatOutgoing,this.splitLargeFrames=r.splitLargeFrames,this.maxWebSocketChunkSize=r.maxWebSocketChunkSize,this.forceBinaryWSFrames=r.forceBinaryWSFrames,this.logRawCommunication=r.logRawCommunication,this.appendMissingNULLonIncoming=r.appendMissingNULLonIncoming,this.discardWebsocketOnCommFailure=r.discardWebsocketOnCommFailure,this.onConnect=r.onConnect,this.onDisconnect=r.onDisconnect,this.onStompError=r.onStompError,this.onWebSocketClose=r.onWebSocketClose,this.onWebSocketError=r.onWebSocketError,this.onUnhandledMessage=r.onUnhandledMessage,this.onUnhandledReceipt=r.onUnhandledReceipt,this.onUnhandledFrame=r.onUnhandledFrame,this.onHeartbeatReceived=r.onHeartbeatReceived,this.onHeartbeatLost=r.onHeartbeatLost}start(){const e=new pQe(t=>{const r=rg.fromRawFrame(t,this._escapeHeaderValues);this.logRawCommunication||this.debug(`<<< ${r}`),(this._serverFrameHandlers[r.command]||this.onUnhandledFrame)(r)},()=>{this.debug("<<< PONG"),this.onHeartbeatReceived()});this._webSocket.onmessage=t=>{if(this.debug("Received data"),this._lastServerActivityTS=Date.now(),this.logRawCommunication){const r=t.data instanceof ArrayBuffer?new TextDecoder().decode(t.data):t.data;this.debug(`<<< ${r}`)}e.parseChunk(t.data,this.appendMissingNULLonIncoming)},this._webSocket.onclose=t=>{this.debug(`Connection closed to ${this._webSocket.url}`),this._cleanUp(),this.onWebSocketClose(t)},this._webSocket.onerror=t=>{this.onWebSocketError(t)},this._webSocket.onopen=()=>{const t=Object.assign({},this.connectHeaders);this.debug("Web Socket Opened..."),t["accept-version"]=this.stompVersions.supportedVersions(),t["heart-beat"]=[this.heartbeatOutgoing,this.heartbeatIncoming].join(","),this._transmit({command:"CONNECT",headers:t})}}_setupHeartbeat(e){if(e.version!==Ol.V1_1&&e.version!==Ol.V1_2||!e["heart-beat"])return;const[t,r]=e["heart-beat"].split(",").map(i=>parseInt(i,10));if(this.heartbeatOutgoing!==0&&r!==0){const i=Math.max(this.heartbeatOutgoing,r);this.debug(`send PING every ${i}ms`),this._pinger=new mQe(i,this._client.heartbeatStrategy,this.debug),this._pinger.start(()=>{this._webSocket.readyState===ig.OPEN&&(this._webSocket.send(iC.LF),this.debug(">>> PING"))})}if(this.heartbeatIncoming!==0&&t!==0){const i=Math.max(this.heartbeatIncoming,t);this.debug(`check PONG every ${i}ms`),this._ponger=setInterval(()=>{const s=Date.now()-this._lastServerActivityTS;s>i*this.heartbeatToleranceMultiplier&&(this.debug(`did not receive server activity for the last ${s}ms`),this.onHeartbeatLost(),this._closeOrDiscardWebsocket())},i)}}_closeOrDiscardWebsocket(){this.discardWebsocketOnCommFailure?(this.debug("Discarding websocket, the underlying socket may linger for a while"),this.discardWebsocket()):(this.debug("Issuing close on the websocket"),this._closeWebsocket())}forceDisconnect(){this._webSocket&&(this._webSocket.readyState===ig.CONNECTING||this._webSocket.readyState===ig.OPEN)&&this._closeOrDiscardWebsocket()}_closeWebsocket(){this._webSocket.onmessage=()=>{},this._webSocket.close()}discardWebsocket(){typeof this._webSocket.terminate!="function"&&fQe(this._webSocket,e=>this.debug(e)),this._webSocket.terminate()}_transmit(e){const{command:t,headers:r,body:i,binaryBody:s,skipContentLengthHeader:a}=e,o=new rg({command:t,headers:r,body:i,binaryBody:s,escapeHeaderValues:this._escapeHeaderValues,skipContentLengthHeader:a});let l=o.serialize();if(this.logRawCommunication?this.debug(`>>> ${l}`):this.debug(`>>> ${o}`),this.forceBinaryWSFrames&&typeof l=="string"&&(l=new TextEncoder().encode(l)),typeof l!="string"||!this.splitLargeFrames)this._webSocket.send(l);else{let c=l;for(;c.length>0;){const u=c.substring(0,this.maxWebSocketChunkSize);c=c.substring(this.maxWebSocketChunkSize),this._webSocket.send(u),this.debug(`chunk sent = ${u.length}, remaining = ${c.length}`)}}}dispose(){if(this.connected)try{const e=Object.assign({},this.disconnectHeaders);e.receipt||(e.receipt=`close-${this._counter++}`),this.watchForReceipt(e.receipt,t=>{this._closeWebsocket(),this._cleanUp(),this.onDisconnect(t)}),this._transmit({command:"DISCONNECT",headers:e})}catch(e){this.debug(`Ignoring error during disconnect ${e}`)}else(this._webSocket.readyState===ig.CONNECTING||this._webSocket.readyState===ig.OPEN)&&this._closeWebsocket()}_cleanUp(){this._connected=!1,this._pinger&&(this._pinger.stop(),this._pinger=void 0),this._ponger&&(clearInterval(this._ponger),this._ponger=void 0)}publish(e){const{destination:t,headers:r,body:i,binaryBody:s,skipContentLengthHeader:a}=e,o=Object.assign({destination:t},r);this._transmit({command:"SEND",headers:o,body:i,binaryBody:s,skipContentLengthHeader:a})}watchForReceipt(e,t){this._receiptWatchers[e]=t}subscribe(e,t,r={}){r=Object.assign({},r),r.id||(r.id=`sub-${this._counter++}`),r.destination=e,this._subscriptions[r.id]=t,this._transmit({command:"SUBSCRIBE",headers:r});const i=this;return{id:r.id,unsubscribe(s){return i.unsubscribe(r.id,s)}}}unsubscribe(e,t={}){t=Object.assign({},t),delete this._subscriptions[e],t.id=e,this._transmit({command:"UNSUBSCRIBE",headers:t})}begin(e){const t=e||`tx-${this._counter++}`;this._transmit({command:"BEGIN",headers:{transaction:t}});const r=this;return{id:t,commit(){r.commit(t)},abort(){r.abort(t)}}}commit(e){this._transmit({command:"COMMIT",headers:{transaction:e}})}abort(e){this._transmit({command:"ABORT",headers:{transaction:e}})}ack(e,t,r={}){r=Object.assign({},r),this._connectedVersion===Ol.V1_2?r.id=e:r["message-id"]=e,r.subscription=t,this._transmit({command:"ACK",headers:r})}nack(e,t,r={}){return r=Object.assign({},r),this._connectedVersion===Ol.V1_2?r.id=e:r["message-id"]=e,r.subscription=t,this._transmit({command:"NACK",headers:r})}}class Rse{get webSocket(){var e;return(e=this._stompHandler)==null?void 0:e._webSocket}get disconnectHeaders(){return this._disconnectHeaders}set disconnectHeaders(e){this._disconnectHeaders=e,this._stompHandler&&(this._stompHandler.disconnectHeaders=this._disconnectHeaders)}get connected(){return!!this._stompHandler&&this._stompHandler.connected}get connectedVersion(){return this._stompHandler?this._stompHandler.connectedVersion:void 0}get active(){return this.state===Hd.ACTIVE}_changeState(e){this.state=e,this.onChangeState(e)}constructor(e={}){this.stompVersions=Ol.default,this.connectionTimeout=0,this.reconnectDelay=5e3,this._nextReconnectDelay=0,this.maxReconnectDelay=900*1e3,this.reconnectTimeMode=RN.LINEAR,this.heartbeatIncoming=1e4,this.heartbeatToleranceMultiplier=2,this.heartbeatOutgoing=1e4,this.heartbeatStrategy=l_.Interval,this.splitLargeFrames=!1,this.maxWebSocketChunkSize=8*1024,this.forceBinaryWSFrames=!1,this.appendMissingNULLonIncoming=!1,this.discardWebsocketOnCommFailure=!1,this.state=Hd.INACTIVE;const t=()=>{};this.debug=t,this.beforeConnect=t,this.onConnect=t,this.onDisconnect=t,this.onUnhandledMessage=t,this.onUnhandledReceipt=t,this.onUnhandledFrame=t,this.onHeartbeatReceived=t,this.onHeartbeatLost=t,this.onStompError=t,this.onWebSocketClose=t,this.onWebSocketError=t,this.logRawCommunication=!1,this.onChangeState=t,this.connectHeaders={},this._disconnectHeaders={},this.configure(e)}configure(e){Object.assign(this,e),this.maxReconnectDelay>0&&this.maxReconnectDelay<this.reconnectDelay&&(this.debug(`Warning: maxReconnectDelay (${this.maxReconnectDelay}ms) is less than reconnectDelay (${this.reconnectDelay}ms). Using reconnectDelay as the maxReconnectDelay delay.`),this.maxReconnectDelay=this.reconnectDelay)}activate(){const e=()=>{if(this.active){this.debug("Already ACTIVE, ignoring request to activate");return}this._changeState(Hd.ACTIVE),this._nextReconnectDelay=this.reconnectDelay,this._connect()};this.state===Hd.DEACTIVATING?(this.debug("Waiting for deactivation to finish before activating"),this.deactivate().then(()=>{e()})):e()}async _connect(){if(await this.beforeConnect(this),this._stompHandler){this.debug("There is already a stompHandler, skipping the call to connect");return}if(!this.active){this.debug("Client has been marked inactive, will not attempt to connect");return}this.connectionTimeout>0&&(this._connectionWatcher&&clearTimeout(this._connectionWatcher),this._connectionWatcher=setTimeout(()=>{this.connected||(this.debug(`Connection not established in ${this.connectionTimeout}ms, closing socket`),this.forceDisconnect())},this.connectionTimeout)),this.debug("Opening Web Socket...");const e=this._createWebSocket();this._stompHandler=new gQe(this,e,{debug:this.debug,stompVersions:this.stompVersions,connectHeaders:this.connectHeaders,disconnectHeaders:this._disconnectHeaders,heartbeatIncoming:this.heartbeatIncoming,heartbeatGracePeriods:this.heartbeatToleranceMultiplier,heartbeatOutgoing:this.heartbeatOutgoing,heartbeatStrategy:this.heartbeatStrategy,splitLargeFrames:this.splitLargeFrames,maxWebSocketChunkSize:this.maxWebSocketChunkSize,forceBinaryWSFrames:this.forceBinaryWSFrames,logRawCommunication:this.logRawCommunication,appendMissingNULLonIncoming:this.appendMissingNULLonIncoming,discardWebsocketOnCommFailure:this.discardWebsocketOnCommFailure,onConnect:t=>{if(this._connectionWatcher&&(clearTimeout(this._connectionWatcher),this._connectionWatcher=void 0),this._nextReconnectDelay=this.reconnectDelay,!this.active){this.debug("STOMP got connected while deactivate was issued, will disconnect now"),this._disposeStompHandler();return}this.onConnect(t)},onDisconnect:t=>{this.onDisconnect(t)},onStompError:t=>{this.onStompError(t)},onWebSocketClose:t=>{this._stompHandler=void 0,this.state===Hd.DEACTIVATING&&this._changeState(Hd.INACTIVE),this.onWebSocketClose(t),this.active&&this._schedule_reconnect()},onWebSocketError:t=>{this.onWebSocketError(t)},onUnhandledMessage:t=>{this.onUnhandledMessage(t)},onUnhandledReceipt:t=>{this.onUnhandledReceipt(t)},onUnhandledFrame:t=>{this.onUnhandledFrame(t)},onHeartbeatReceived:()=>{this.onHeartbeatReceived()},onHeartbeatLost:()=>{this.onHeartbeatLost()}}),this._stompHandler.start()}_createWebSocket(){let e;if(this.webSocketFactory)e=this.webSocketFactory();else if(this.brokerURL)e=new WebSocket(this.brokerURL,this.stompVersions.protocolVersions());else throw new Error("Either brokerURL or webSocketFactory must be provided");return e.binaryType="arraybuffer",e}_schedule_reconnect(){this._nextReconnectDelay>0&&(this.debug(`STOMP: scheduling reconnection in ${this._nextReconnectDelay}ms`),this._reconnector=setTimeout(()=>{this.reconnectTimeMode===RN.EXPONENTIAL&&(this._nextReconnectDelay=this._nextReconnectDelay*2,this.maxReconnectDelay!==0&&(this._nextReconnectDelay=Math.min(this._nextReconnectDelay,this.maxReconnectDelay))),this._connect()},this._nextReconnectDelay))}async deactivate(e={}){var s;const t=e.force||!1,r=this.active;let i;if(this.state===Hd.INACTIVE)return this.debug("Already INACTIVE, nothing more to do"),Promise.resolve();if(this._changeState(Hd.DEACTIVATING),this._nextReconnectDelay=0,this._reconnector&&(clearTimeout(this._reconnector),this._reconnector=void 0),this._stompHandler&&this.webSocket.readyState!==ig.CLOSED){const a=this._stompHandler.onWebSocketClose;i=new Promise((o,l)=>{this._stompHandler.onWebSocketClose=c=>{a(c),o()}})}else return this._changeState(Hd.INACTIVE),Promise.resolve();return t?(s=this._stompHandler)==null||s.discardWebsocket():r&&this._disposeStompHandler(),i}forceDisconnect(){this._stompHandler&&this._stompHandler.forceDisconnect()}_disposeStompHandler(){this._stompHandler&&this._stompHandler.dispose()}publish(e){this._checkConnection(),this._stompHandler.publish(e)}_checkConnection(){if(!this.connected)throw new TypeError("There is no underlying STOMP connection")}watchForReceipt(e,t){this._checkConnection(),this._stompHandler.watchForReceipt(e,t)}subscribe(e,t,r={}){return this._checkConnection(),this._stompHandler.subscribe(e,t,r)}unsubscribe(e,t={}){this._checkConnection(),this._stompHandler.unsubscribe(e,t)}begin(e){return this._checkConnection(),this._stompHandler.begin(e)}commit(e){this._checkConnection(),this._stompHandler.commit(e)}abort(e){this._checkConnection(),this._stompHandler.abort(e)}ack(e,t,r={}){this._checkConnection(),this._stompHandler.ack(e,t,r)}nack(e,t,r={}){this._checkConnection(),this._stompHandler.nack(e,t,r)}}function yQe(){const n=Zp(),e=OI(),[t,r]=F.useState(null),[i,s]=F.useState(""),[a,o]=F.useState(""),[l,c]=F.useState(null),[u,d]=F.useState([]),[h,p]=F.useState([]),[g,v]=F.useState(!1),[b,x]=F.useState(!1),C=F.useRef(null),E=N=>{console.log("Connecting to WebSocket for user:",N);const I=new Rse({brokerURL:"ws://localhost:8080/websocket",reconnectDelay:5e3,heartbeatIncoming:4e3,heartbeatOutgoing:4e3,onConnect:k=>{console.log("Connected to WebSocket:",k),x(!0),console.log("Subscribing to /user/queue/messages"),I.subscribe(`/user/${N}/queue/messages`,P=>{console.log(" Raw message received on /user/queue/messages:",P);const G=JSON.parse(P.body);M(G)}),console.log("Subscribing to /user/queue/history"),I.subscribe(`/user/${N}/queue/history`,P=>{console.log("Raw history received on /user/queue/history:",P);const G=JSON.parse(P.body);R(G)}),console.log("Requesting chat history for user:",N),I.publish({destination:"/app/chat/history",body:JSON.stringify({userId:N})}),console.log("History request sent")},onStompError:k=>{console.error("STOMP error:",k),x(!1)},onWebSocketClose:()=>{console.log("WebSocket connection closed"),x(!1)},onWebSocketError:k=>{console.error("WebSocket error:",k)}});I.activate(),C.current=I},_=()=>{C.current&&(C.current.deactivate(),x(!1),console.log("Disconnected from WebSocket"))},M=N=>{switch(console.log("Received WebSocket message:",N),N.type){case"received":console.log(" Message received by server");break;case"response":v(!1);const I={id:`${N.chatId}-assistant`,role:"assistant",content:N.response,expression:N.expressionValues};console.log("Expression JSON Values are: "+N.expressionValues),o(N.response),p(k=>[...k,I]),N.audioData&&N.audioData.length>0?(console.log("Audio data received, size:",N.audioData.length),c(N.audioData)):console.log("No audio data in response");break;case"error":console.error("Server error:",N.message),v(!1),p(k=>[...k,{id:`error-${Date.now()}`,role:"assistant",content:`Error: ${N.message}`}]);break;case"deleted":console.log("Chat deleted:",N.chatId),p(k=>k.filter(P=>!P.id.startsWith(`${N.chatId}-`)));break}},R=N=>{console.log("Loading chat history:",N.length,"chats");const I=N.toReversed().flatMap(k=>[{id:`${k.id}-user`,role:"user",content:k.message},{id:`${k.id}-assistant`,role:"assistant",content:k.response}]);p(I)},L=()=>{if(!i.trim()||!t||g||!b){b||console.warn("Cannot send: WebSocket not connected");return}const N=i.trim(),I={id:`temp-user-${Date.now()}`,role:"user",content:N};p(k=>[...k,I]),s(""),v(!0);try{C.current.publish({destination:"/app/chat",body:JSON.stringify({userId:t.id,message:N})}),console.log("Message sent via WebSocket:",N)}catch(k){console.error("Error sending message:",k),v(!1),p(P=>[...P,{id:`error-${Date.now()}`,role:"assistant",content:"Sorry, I encountered an error sending your message. Please try again."}])}},$=()=>{p([]),o(""),c(null),console.log("Chat history cleared")};return F.useEffect(()=>{var N;if((N=n.state)!=null&&N.user){const I=n.state.user;r(I),E(I.id),console.log("User from navigation:",I.username)}else{const I=localStorage.getItem("user");if(I){const k=JSON.parse(I);r(k),E(k.id),console.log("User from localStorage:",k.username)}else console.log("No user found, redirecting to login"),e("/login")}return()=>{_()}},[n,e]),t?V.jsxs("div",{className:"flex flex-col h-screen bg-gray-50",children:[!b&&V.jsx("div",{className:"bg-yellow-100 text-yellow-800 px-4 py-2 text-center text-sm",children:"Reconnecting to server..."}),V.jsx(pZ,{user:t,clearChat:$,isGuest:!1}),V.jsx("div",{className:"flex-1 relative overflow-hidden",children:V.jsx(z5,{})}),V.jsx(gZ,{messages:h,loading:g}),V.jsx(yZ,{input:i,setInput:s,onSend:L,loading:g,disabled:!b}),V.jsx(Ase,{audioData:l,autoPlay:!0})]}):V.jsx("div",{className:"flex items-center justify-center h-screen",children:V.jsx("p",{className:"text-gray-500",children:"Loading..."})})}function vQe(){const[n,e]=F.useState(""),[t,r]=F.useState(""),[i,s]=F.useState(null),[a,o]=F.useState(null),[l,c]=F.useState(null),[u,d]=F.useState([]),[h,p]=F.useState(!1),[g,v]=F.useState(!1),[b,x]=F.useState(!1),C=F.useRef(`guest-${Date.now()}-${Math.random().toString(36).substr(2,9)}`),E=F.useRef(null),_=()=>{console.log("Connecting to WebSocket for guest session:",C.current);const I=new Rse({brokerURL:"ws://localhost:8080/websocket",reconnectDelay:5e3,heartbeatIncoming:4e3,heartbeatOutgoing:4e3,onConnect:k=>{console.log("Connected to WebSocket (Guest Mode):",k),v(!0),console.log("Subscribing to /user/queue/messages"),I.subscribe(`/user/${C.current}/queue/messages`,P=>{console.log(" Raw message received on /user/queue/messages:",P);const G=JSON.parse(P.body);R(G)}),console.log("Guest session ready - no chat history loaded")},onStompError:k=>{console.error("STOMP error:",k),v(!1)},onWebSocketClose:()=>{console.log("WebSocket connection closed"),v(!1)},onWebSocketError:k=>{console.error("WebSocket error:",k)}});I.activate(),E.current=I},M=()=>{E.current&&(E.current.deactivate(),v(!1),console.log("Disconnected from WebSocket"))},R=I=>{var k;switch(console.log("Received WebSocket message:",I),I.type){case"received":console.log(" Message received by server");break;case"response":p(!1);const P={id:`${Date.now()}-assistant`,role:"assistant",content:I.response,audio:I.audioData,expressions:I.expressionValues};console.log("AI Response:",P.content),console.log("Expressions (raw):",I.expressionValues),console.log("Pose data:",I.pose),o(((k=I.pose)==null?void 0:k.trim())||null);let G=null;if(I.expressionValues)try{typeof I.expressionValues=="string"?G=JSON.parse(I.expressionValues):G=I.expressionValues,console.log("Expressions (parsed):",G)}catch(W){console.error("Error parsing expressions:",W)}c(G),r(P.content),d(W=>[...W,P]),I.audioData&&I.audioData.length>0?(console.log("Audio data received, size:",I.audioData.length),s(I.audioData)):console.log("No audio data in response");break;case"error":console.error("Server error:",I.message),p(!1),d(W=>[...W,{id:`error-${Date.now()}`,role:"assistant",content:`Error: ${I.message}`}]);break}},L=()=>{if(!n.trim()||h||!g){g||console.warn("Cannot send: WebSocket not connected");return}const I=n.trim(),k={id:`temp-user-${Date.now()}`,role:"user",content:I};d(P=>[...P,k]),e(""),p(!0);try{E.current.publish({destination:"/app/chat",body:JSON.stringify({userId:C.current,message:I,isGuest:!0})}),console.log("Message sent via WebSocket (Guest):",I)}catch(P){console.error("Error sending message:",P),p(!1),d(G=>[...G,{id:`error-${Date.now()}`,role:"assistant",content:"Sorry, I encountered an error sending your message. Please try again."}])}},$=()=>{d([]),r(""),s(null),o(null),c(null),console.log("Chat history cleared")},N=I=>{x(I)};return F.useEffect(()=>(_(),()=>{M()}),[]),V.jsxs("div",{className:"relative w-screen h-screen overflow-hidden",children:[!g&&V.jsx("div",{className:"bg-yellow-100 text-yellow-800 px-4 py-2 text-center text-sm",children:" Reconnecting to server..."}),V.jsx(z5,{isSpeaking:b,pose:a,expressions:l}),V.jsx(pZ,{user:null,clearChat:$,isGuest:!0}),V.jsx(gZ,{messages:u,loading:h}),V.jsx(yZ,{input:n,setInput:e,onSend:L,loading:h,disabled:!g,isGuest:!0}),V.jsx(Ase,{audioData:i,autoPlay:!0,onPlayingStateChange:N})]})}function Gp(n,...e){const t=new URL(`https://mui.com/production-error/?code=${n}`);return e.forEach(r=>t.searchParams.append("args[]",r)),`Minified MUI error #${n}; visit ${t} for the full message.`}function Rn(n){if(typeof n!="string")throw new Error(Gp(7));return n.charAt(0).toUpperCase()+n.slice(1)}var o$={exports:{}},Wi={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ej;function bQe(){if(ej)return Wi;ej=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.suspense_list"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.for("react.view_transition"),p=Symbol.for("react.client.reference");function g(v){if(typeof v=="object"&&v!==null){var b=v.$$typeof;switch(b){case n:switch(v=v.type,v){case t:case i:case r:case l:case c:case h:return v;default:switch(v=v&&v.$$typeof,v){case a:case o:case d:case u:return v;case s:return v;default:return b}}case e:return b}}}return Wi.ContextConsumer=s,Wi.ContextProvider=a,Wi.Element=n,Wi.ForwardRef=o,Wi.Fragment=t,Wi.Lazy=d,Wi.Memo=u,Wi.Portal=e,Wi.Profiler=i,Wi.StrictMode=r,Wi.Suspense=l,Wi.SuspenseList=c,Wi.isContextConsumer=function(v){return g(v)===s},Wi.isContextProvider=function(v){return g(v)===a},Wi.isElement=function(v){return typeof v=="object"&&v!==null&&v.$$typeof===n},Wi.isForwardRef=function(v){return g(v)===o},Wi.isFragment=function(v){return g(v)===t},Wi.isLazy=function(v){return g(v)===d},Wi.isMemo=function(v){return g(v)===u},Wi.isPortal=function(v){return g(v)===e},Wi.isProfiler=function(v){return g(v)===i},Wi.isStrictMode=function(v){return g(v)===r},Wi.isSuspense=function(v){return g(v)===l},Wi.isSuspenseList=function(v){return g(v)===c},Wi.isValidElementType=function(v){return typeof v=="string"||typeof v=="function"||v===t||v===i||v===r||v===l||v===c||typeof v=="object"&&v!==null&&(v.$$typeof===d||v.$$typeof===u||v.$$typeof===a||v.$$typeof===s||v.$$typeof===o||v.$$typeof===p||v.getModuleId!==void 0)},Wi.typeOf=g,Wi}var tj;function xQe(){return tj||(tj=1,o$.exports=bQe()),o$.exports}var Nse=xQe();function oh(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function Ise(n){if(F.isValidElement(n)||Nse.isValidElementType(n)||!oh(n))return n;const e={};return Object.keys(n).forEach(t=>{e[t]=Ise(n[t])}),e}function io(n,e,t={clone:!0}){const r=t.clone?{...n}:n;return oh(n)&&oh(e)&&Object.keys(e).forEach(i=>{F.isValidElement(e[i])||Nse.isValidElementType(e[i])?r[i]=e[i]:oh(e[i])&&Object.prototype.hasOwnProperty.call(n,i)&&oh(n[i])?r[i]=io(n[i],e[i],t):t.clone?r[i]=oh(e[i])?Ise(e[i]):e[i]:r[i]=e[i]}),r}function AC(n,e){return e?io(n,e,{clone:!1}):n}function nj(n,e){if(!n.containerQueries)return e;const t=Object.keys(e).filter(r=>r.startsWith("@container")).sort((r,i)=>{var a,o;const s=/min-width:\s*([0-9.]+)/;return+(((a=r.match(s))==null?void 0:a[1])||0)-+(((o=i.match(s))==null?void 0:o[1])||0)});return t.length?t.reduce((r,i)=>{const s=e[i];return delete r[i],r[i]=s,r},{...e}):e}function SQe(n,e){return e==="@"||e.startsWith("@")&&(n.some(t=>e.startsWith(`@${t}`))||!!e.match(/^@\d/))}function wQe(n,e){const t=e.match(/^@([^/]+)?\/?(.+)?$/);if(!t)return null;const[,r,i]=t,s=Number.isNaN(+r)?r||0:+r;return n.containerQueries(i).up(s)}function CQe(n){const e=(s,a)=>s.replace("@media",a?`@container ${a}`:"@container");function t(s,a){s.up=(...o)=>e(n.breakpoints.up(...o),a),s.down=(...o)=>e(n.breakpoints.down(...o),a),s.between=(...o)=>e(n.breakpoints.between(...o),a),s.only=(...o)=>e(n.breakpoints.only(...o),a),s.not=(...o)=>{const l=e(n.breakpoints.not(...o),a);return l.includes("not all and")?l.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):l}}const r={},i=s=>(t(r,s),r);return t(i),{...n,containerQueries:i}}const N3={xs:0,sm:600,md:900,lg:1200,xl:1536},rj={keys:["xs","sm","md","lg","xl"],up:n=>`@media (min-width:${N3[n]}px)`},_Qe={containerQueries:n=>({up:e=>{let t=typeof e=="number"?e:N3[e]||e;return typeof t=="number"&&(t=`${t}px`),n?`@container ${n} (min-width:${t})`:`@container (min-width:${t})`}})};function cf(n,e,t){const r=n.theme||{};if(Array.isArray(e)){const s=r.breakpoints||rj;return e.reduce((a,o,l)=>(a[s.up(s.keys[l])]=t(e[l]),a),{})}if(typeof e=="object"){const s=r.breakpoints||rj;return Object.keys(e).reduce((a,o)=>{if(SQe(s.keys,o)){const l=wQe(r.containerQueries?r:_Qe,o);l&&(a[l]=t(e[o],o))}else if(Object.keys(s.values||N3).includes(o)){const l=s.up(o);a[l]=t(e[o],o)}else{const l=o;a[l]=e[l]}return a},{})}return t(e)}function Dse(n={}){var t;return((t=n.keys)==null?void 0:t.reduce((r,i)=>{const s=n.up(i);return r[s]={},r},{}))||{}}function EF(n,e){return n.reduce((t,r)=>{const i=t[r];return(!i||Object.keys(i).length===0)&&delete t[r],t},e)}function EQe(n,...e){const t=Dse(n),r=[t,...e].reduce((i,s)=>io(i,s),{});return EF(Object.keys(t),r)}function AQe(n,e){if(typeof n!="object")return{};const t={},r=Object.keys(e);return Array.isArray(n)?r.forEach((i,s)=>{s<n.length&&(t[i]=!0)}):r.forEach(i=>{n[i]!=null&&(t[i]=!0)}),t}function l$({values:n,breakpoints:e,base:t}){const r=t||AQe(n,e),i=Object.keys(r);if(i.length===0)return n;let s;return i.reduce((a,o,l)=>(Array.isArray(n)?(a[o]=n[l]!=null?n[l]:n[s],s=l):typeof n=="object"?(a[o]=n[o]!=null?n[o]:n[s],s=o):a[o]=n,a),{})}function rh(n,e,t=!0){if(!e||typeof e!="string")return null;if(n&&n.vars&&t){const r=`vars.${e}`.split(".").reduce((i,s)=>i&&i[s]?i[s]:null,n);if(r!=null)return r}return e.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,n)}function NN(n,e,t,r=t){let i;return typeof n=="function"?i=n(t):Array.isArray(n)?i=n[t]||r:i=rh(n,t)||r,e&&(i=e(i,r,n)),i}function da(n){const{prop:e,cssProperty:t=n.prop,themeKey:r,transform:i}=n,s=a=>{if(a[e]==null)return null;const o=a[e],l=a.theme,c=rh(l,r)||{};return cf(a,o,d=>{let h=NN(c,i,d);return d===h&&typeof d=="string"&&(h=NN(c,i,`${e}${d==="default"?"":Rn(d)}`,d)),t===!1?h:{[t]:h}})};return s.propTypes={},s.filterProps=[e],s}function TQe(n){const e={};return t=>(e[t]===void 0&&(e[t]=n(t)),e[t])}const MQe={m:"margin",p:"padding"},RQe={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},ij={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},NQe=TQe(n=>{if(n.length>2)if(ij[n])n=ij[n];else return[n];const[e,t]=n.split(""),r=MQe[e],i=RQe[t]||"";return Array.isArray(i)?i.map(s=>r+s):[r+i]}),H5=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],V5=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...H5,...V5];function d2(n,e,t,r){const i=rh(n,e,!0)??t;return typeof i=="number"||typeof i=="string"?s=>typeof s=="string"?s:typeof i=="string"?i.startsWith("var(")&&s===0?0:i.startsWith("var(")&&s===1?i:`calc(${s} * ${i})`:i*s:Array.isArray(i)?s=>{if(typeof s=="string")return s;const a=Math.abs(s),o=i[a];return s>=0?o:typeof o=="number"?-o:typeof o=="string"&&o.startsWith("var(")?`calc(-1 * ${o})`:`-${o}`}:typeof i=="function"?i:()=>{}}function I3(n){return d2(n,"spacing",8)}function xv(n,e){return typeof e=="string"||e==null?e:n(e)}function IQe(n,e){return t=>n.reduce((r,i)=>(r[i]=xv(e,t),r),{})}function DQe(n,e,t,r){if(!e.includes(t))return null;const i=NQe(t),s=IQe(i,r),a=n[t];return cf(n,a,s)}function kse(n,e){const t=I3(n.theme);return Object.keys(n).map(r=>DQe(n,e,r,t)).reduce(AC,{})}function Hs(n){return kse(n,H5)}Hs.propTypes={};Hs.filterProps=H5;function Vs(n){return kse(n,V5)}Vs.propTypes={};Vs.filterProps=V5;function D3(...n){const e=n.reduce((r,i)=>(i.filterProps.forEach(s=>{r[s]=i}),r),{}),t=r=>Object.keys(r).reduce((i,s)=>e[s]?AC(i,e[s](r)):i,{});return t.propTypes={},t.filterProps=n.reduce((r,i)=>r.concat(i.filterProps),[]),t}function Bu(n){return typeof n!="number"?n:`${n}px solid`}function rd(n,e){return da({prop:n,themeKey:"borders",transform:e})}const kQe=rd("border",Bu),OQe=rd("borderTop",Bu),BQe=rd("borderRight",Bu),$Qe=rd("borderBottom",Bu),LQe=rd("borderLeft",Bu),FQe=rd("borderColor"),PQe=rd("borderTopColor"),UQe=rd("borderRightColor"),zQe=rd("borderBottomColor"),HQe=rd("borderLeftColor"),VQe=rd("outline",Bu),GQe=rd("outlineColor"),k3=n=>{if(n.borderRadius!==void 0&&n.borderRadius!==null){const e=d2(n.theme,"shape.borderRadius",4),t=r=>({borderRadius:xv(e,r)});return cf(n,n.borderRadius,t)}return null};k3.propTypes={};k3.filterProps=["borderRadius"];D3(kQe,OQe,BQe,$Qe,LQe,FQe,PQe,UQe,zQe,HQe,k3,VQe,GQe);const O3=n=>{if(n.gap!==void 0&&n.gap!==null){const e=d2(n.theme,"spacing",8),t=r=>({gap:xv(e,r)});return cf(n,n.gap,t)}return null};O3.propTypes={};O3.filterProps=["gap"];const B3=n=>{if(n.columnGap!==void 0&&n.columnGap!==null){const e=d2(n.theme,"spacing",8),t=r=>({columnGap:xv(e,r)});return cf(n,n.columnGap,t)}return null};B3.propTypes={};B3.filterProps=["columnGap"];const $3=n=>{if(n.rowGap!==void 0&&n.rowGap!==null){const e=d2(n.theme,"spacing",8),t=r=>({rowGap:xv(e,r)});return cf(n,n.rowGap,t)}return null};$3.propTypes={};$3.filterProps=["rowGap"];const WQe=da({prop:"gridColumn"}),jQe=da({prop:"gridRow"}),qQe=da({prop:"gridAutoFlow"}),XQe=da({prop:"gridAutoColumns"}),KQe=da({prop:"gridAutoRows"}),YQe=da({prop:"gridTemplateColumns"}),JQe=da({prop:"gridTemplateRows"}),ZQe=da({prop:"gridTemplateAreas"}),QQe=da({prop:"gridArea"});D3(O3,B3,$3,WQe,jQe,qQe,XQe,KQe,YQe,JQe,ZQe,QQe);function Vx(n,e){return e==="grey"?e:n}const eet=da({prop:"color",themeKey:"palette",transform:Vx}),tet=da({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Vx}),net=da({prop:"backgroundColor",themeKey:"palette",transform:Vx});D3(eet,tet,net);function Yc(n){return n<=1&&n!==0?`${n*100}%`:n}const ret=da({prop:"width",transform:Yc}),G5=n=>{if(n.maxWidth!==void 0&&n.maxWidth!==null){const e=t=>{var i,s,a,o,l;const r=((a=(s=(i=n.theme)==null?void 0:i.breakpoints)==null?void 0:s.values)==null?void 0:a[t])||N3[t];return r?((l=(o=n.theme)==null?void 0:o.breakpoints)==null?void 0:l.unit)!=="px"?{maxWidth:`${r}${n.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:Yc(t)}};return cf(n,n.maxWidth,e)}return null};G5.filterProps=["maxWidth"];const iet=da({prop:"minWidth",transform:Yc}),set=da({prop:"height",transform:Yc}),aet=da({prop:"maxHeight",transform:Yc}),oet=da({prop:"minHeight",transform:Yc});da({prop:"size",cssProperty:"width",transform:Yc});da({prop:"size",cssProperty:"height",transform:Yc});const cet=da({prop:"boxSizing"});D3(ret,G5,iet,set,aet,oet,cet);const f2={border:{themeKey:"borders",transform:Bu},borderTop:{themeKey:"borders",transform:Bu},borderRight:{themeKey:"borders",transform:Bu},borderBottom:{themeKey:"borders",transform:Bu},borderLeft:{themeKey:"borders",transform:Bu},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Bu},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:k3},color:{themeKey:"palette",transform:Vx},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Vx},backgroundColor:{themeKey:"palette",transform:Vx},p:{style:Vs},pt:{style:Vs},pr:{style:Vs},pb:{style:Vs},pl:{style:Vs},px:{style:Vs},py:{style:Vs},padding:{style:Vs},paddingTop:{style:Vs},paddingRight:{style:Vs},paddingBottom:{style:Vs},paddingLeft:{style:Vs},paddingX:{style:Vs},paddingY:{style:Vs},paddingInline:{style:Vs},paddingInlineStart:{style:Vs},paddingInlineEnd:{style:Vs},paddingBlock:{style:Vs},paddingBlockStart:{style:Vs},paddingBlockEnd:{style:Vs},m:{style:Hs},mt:{style:Hs},mr:{style:Hs},mb:{style:Hs},ml:{style:Hs},mx:{style:Hs},my:{style:Hs},margin:{style:Hs},marginTop:{style:Hs},marginRight:{style:Hs},marginBottom:{style:Hs},marginLeft:{style:Hs},marginX:{style:Hs},marginY:{style:Hs},marginInline:{style:Hs},marginInlineStart:{style:Hs},marginInlineEnd:{style:Hs},marginBlock:{style:Hs},marginBlockStart:{style:Hs},marginBlockEnd:{style:Hs},displayPrint:{cssProperty:!1,transform:n=>({"@media print":{display:n}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:O3},rowGap:{style:$3},columnGap:{style:B3},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Yc},maxWidth:{style:G5},minWidth:{transform:Yc},height:{transform:Yc},maxHeight:{transform:Yc},minHeight:{transform:Yc},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function uet(...n){const e=n.reduce((r,i)=>r.concat(Object.keys(i)),[]),t=new Set(e);return n.every(r=>t.size===Object.keys(r).length)}function det(n,e){return typeof n=="function"?n(e):n}function fet(){function n(t,r,i,s){const a={[t]:r,theme:i},o=s[t];if(!o)return{[t]:r};const{cssProperty:l=t,themeKey:c,transform:u,style:d}=o;if(r==null)return null;if(c==="typography"&&r==="inherit")return{[t]:r};const h=rh(i,c)||{};return d?d(a):cf(a,r,g=>{let v=NN(h,u,g);return g===v&&typeof g=="string"&&(v=NN(h,u,`${t}${g==="default"?"":Rn(g)}`,g)),l===!1?v:{[l]:v}})}function e(t){const{sx:r,theme:i={},nested:s}=t||{};if(!r)return null;const a=i.unstable_sxConfig??f2;function o(l){let c=l;if(typeof l=="function")c=l(i);else if(typeof l!="object")return l;if(!c)return null;const u=Dse(i.breakpoints),d=Object.keys(u);let h=u;return Object.keys(c).forEach(p=>{const g=det(c[p],i);if(g!=null)if(typeof g=="object")if(a[p])h=AC(h,n(p,g,i,a));else{const v=cf({theme:i},g,b=>({[p]:b}));uet(v,g)?h[p]=e({sx:g,theme:i,nested:!0}):h=AC(h,v)}else h=AC(h,n(p,g,i,a))}),!s&&i.modularCssLayers?{"@layer sx":nj(i,EF(d,h))}:nj(i,EF(d,h))}return Array.isArray(r)?r.map(o):o(r)}return e}const Bg=fet();Bg.filterProps=["sx"];const het=n=>{var r;const e={systemProps:{},otherProps:{}},t=((r=n==null?void 0:n.theme)==null?void 0:r.unstable_sxConfig)??f2;return Object.keys(n).forEach(i=>{t[i]?e.systemProps[i]=n[i]:e.otherProps[i]=n[i]}),e};function W5(n){const{sx:e,...t}=n,{systemProps:r,otherProps:i}=het(t);let s;return Array.isArray(e)?s=[r,...e]:typeof e=="function"?s=(...a)=>{const o=e(...a);return oh(o)?{...r,...o}:r}:s={...r,...e},{...i,sx:s}}function pet(n){if(n.sheet)return n.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===n)return document.styleSheets[e]}function met(n){var e=document.createElement("style");return e.setAttribute("data-emotion",n.key),n.nonce!==void 0&&e.setAttribute("nonce",n.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var get=function(){function n(t){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=n.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(met(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=pet(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},n}(),Ko="-ms-",IN="-moz-",yi="-webkit-",Ose="comm",j5="rule",q5="decl",yet="@import",Bse="@keyframes",vet="@layer",bet=Math.abs,L3=String.fromCharCode,xet=Object.assign;function wet(n,e){return Eo(n,0)^45?(((e<<2^Eo(n,0))<<2^Eo(n,1))<<2^Eo(n,2))<<2^Eo(n,3):0}function $se(n){return n.trim()}function Cet(n,e){return(n=e.exec(n))?n[0]:n}function bi(n,e,t){return n.replace(e,t)}function AF(n,e){return n.indexOf(e)}function Eo(n,e){return n.charCodeAt(e)|0}function c_(n,e,t){return n.slice(e,t)}function ih(n){return n.length}function X5(n){return n.length}function rM(n,e){return e.push(n),n}function _et(n,e){return n.map(e).join("")}var F3=1,w1=1,Lse=0,Mc=0,ba=0,iS="";function P3(n,e,t,r,i,s,a){return{value:n,root:e,parent:t,type:r,props:i,children:s,line:F3,column:w1,length:a,return:""}}function zw(n,e){return xet(P3("",null,null,"",null,null,0),n,{length:-n.length},e)}function Eet(){return ba}function Aet(){return ba=Mc>0?Eo(iS,--Mc):0,w1--,ba===10&&(w1=1,F3--),ba}function tu(){return ba=Mc<Lse?Eo(iS,Mc++):0,w1++,ba===10&&(w1=1,F3++),ba}function gh(){return Eo(iS,Mc)}function IM(){return Mc}function h2(n,e){return c_(iS,n,e)}function u_(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Fse(n){return F3=w1=1,Lse=ih(iS=n),Mc=0,[]}function Pse(n){return iS="",n}function DM(n){return $se(h2(Mc-1,TF(n===91?n+2:n===40?n+1:n)))}function Tet(n){for(;(ba=gh())&&ba<33;)tu();return u_(n)>2||u_(ba)>3?"":" "}function Met(n,e){for(;--e&&tu()&&!(ba<48||ba>102||ba>57&&ba<65||ba>70&&ba<97););return h2(n,IM()+(e<6&&gh()==32&&tu()==32))}function TF(n){for(;tu();)switch(ba){case n:return Mc;case 34:case 39:n!==34&&n!==39&&TF(ba);break;case 40:n===41&&TF(n);break;case 92:tu();break}return Mc}function Ret(n,e){for(;tu()&&n+ba!==57;)if(n+ba===84&&gh()===47)break;return"/*"+h2(e,Mc-1)+"*"+L3(n===47?n:tu())}function Net(n){for(;!u_(gh());)tu();return h2(n,Mc)}function Iet(n){return Pse(kM("",null,null,null,[""],n=Fse(n),0,[0],n))}function kM(n,e,t,r,i,s,a,o,l){for(var c=0,u=0,d=a,h=0,p=0,g=0,v=1,b=1,x=1,C=0,E="",_=i,M=s,R=r,L=E;b;)switch(g=C,C=tu()){case 40:if(g!=108&&Eo(L,d-1)==58){AF(L+=bi(DM(C),"&","&\f"),"&\f")!=-1&&(x=-1);break}case 34:case 39:case 91:L+=DM(C);break;case 9:case 10:case 13:case 32:L+=Tet(g);break;case 92:L+=Met(IM()-1,7);continue;case 47:switch(gh()){case 42:case 47:rM(Det(Ret(tu(),IM()),e,t),l);break;default:L+="/"}break;case 123*v:o[c++]=ih(L)*x;case 125*v:case 59:case 0:switch(C){case 0:case 125:b=0;case 59+u:x==-1&&(L=bi(L,/\f/g,"")),p>0&&ih(L)-d&&rM(p>32?aj(L+";",r,t,d-1):aj(bi(L," ","")+";",r,t,d-2),l);break;case 59:L+=";";default:if(rM(R=sj(L,e,t,c,u,i,o,E,_=[],M=[],d),s),C===123)if(u===0)kM(L,e,R,R,_,s,d,o,M);else switch(h===99&&Eo(L,3)===110?100:h){case 100:case 108:case 109:case 115:kM(n,R,R,r&&rM(sj(n,R,R,0,0,i,o,E,i,_=[],d),M),i,M,d,o,r?_:M);break;default:kM(L,R,R,R,[""],M,0,o,M)}}c=u=p=0,v=x=1,E=L="",d=a;break;case 58:d=1+ih(L),p=g;default:if(v<1){if(C==123)--v;else if(C==125&&v++==0&&Aet()==125)continue}switch(L+=L3(C),C*v){case 38:x=u>0?1:(L+="\f",-1);break;case 44:o[c++]=(ih(L)-1)*x,x=1;break;case 64:gh()===45&&(L+=DM(tu())),h=gh(),u=d=ih(E=L+=Net(IM())),C++;break;case 45:g===45&&ih(L)==2&&(v=0)}}return s}function sj(n,e,t,r,i,s,a,o,l,c,u){for(var d=i-1,h=i===0?s:[""],p=X5(h),g=0,v=0,b=0;g<r;++g)for(var x=0,C=c_(n,d+1,d=bet(v=a[g])),E=n;x<p;++x)(E=$se(v>0?h[x]+" "+C:bi(C,/&\f/g,h[x])))&&(l[b++]=E);return P3(n,e,t,i===0?j5:o,l,c,u)}function Det(n,e,t){return P3(n,e,t,Ose,L3(Eet()),c_(n,2,-2),0)}function aj(n,e,t,r){return P3(n,e,t,q5,c_(n,0,r),c_(n,r+1,-1),r)}function Gx(n,e){for(var t="",r=X5(n),i=0;i<r;i++)t+=e(n[i],i,n,e)||"";return t}function ket(n,e,t,r){switch(n.type){case vet:if(n.children.length)break;case yet:case q5:return n.return=n.return||n.value;case Ose:return"";case Bse:return n.return=n.value+"{"+Gx(n.children,r)+"}";case j5:n.value=n.props.join(",")}return ih(t=Gx(n.children,r))?n.return=n.value+"{"+t+"}":""}function Oet(n){var e=X5(n);return function(t,r,i,s){for(var a="",o=0;o<e;o++)a+=n[o](t,r,i,s)||"";return a}}function Bet(n){return function(e){e.root||(e=e.return)&&n(e)}}function Use(n){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=n(t)),e[t]}}var $et=function(e,t,r){for(var i=0,s=0;i=s,s=gh(),i===38&&s===12&&(t[r]=1),!u_(s);)tu();return h2(e,Mc)},Let=function(e,t){var r=-1,i=44;do switch(u_(i)){case 0:i===38&&gh()===12&&(t[r]=1),e[r]+=$et(Mc-1,t,r);break;case 2:e[r]+=DM(i);break;case 4:if(i===44){e[++r]=gh()===58?"&\f":"",t[r]=e[r].length;break}default:e[r]+=L3(i)}while(i=tu());return e},Fet=function(e,t){return Pse(Let(Fse(e),t))},oj=new WeakMap,Pet=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!oj.get(r))&&!i){oj.set(e,!0);for(var s=[],a=Fet(t,s),o=r.props,l=0,c=0;l<a.length;l++)for(var u=0;u<o.length;u++,c++)e.props[c]=s[l]?a[l].replace(/&\f/g,o[u]):o[u]+" "+a[l]}}},Uet=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function zse(n,e){switch(wet(n,e)){case 5103:return yi+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return yi+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return yi+n+IN+n+Ko+n+n;case 6828:case 4268:return yi+n+Ko+n+n;case 6165:return yi+n+Ko+"flex-"+n+n;case 5187:return yi+n+bi(n,/(\w+).+(:[^]+)/,yi+"box-$1$2"+Ko+"flex-$1$2")+n;case 5443:return yi+n+Ko+"flex-item-"+bi(n,/flex-|-self/,"")+n;case 4675:return yi+n+Ko+"flex-line-pack"+bi(n,/align-content|flex-|-self/,"")+n;case 5548:return yi+n+Ko+bi(n,"shrink","negative")+n;case 5292:return yi+n+Ko+bi(n,"basis","preferred-size")+n;case 6060:return yi+"box-"+bi(n,"-grow","")+yi+n+Ko+bi(n,"grow","positive")+n;case 4554:return yi+bi(n,/([^-])(transform)/g,"$1"+yi+"$2")+n;case 6187:return bi(bi(bi(n,/(zoom-|grab)/,yi+"$1"),/(image-set)/,yi+"$1"),n,"")+n;case 5495:case 3959:return bi(n,/(image-set\([^]*)/,yi+"$1$`$1");case 4968:return bi(bi(n,/(.+:)(flex-)?(.*)/,yi+"box-pack:$3"+Ko+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+yi+n+n;case 4095:case 3583:case 4068:case 2532:return bi(n,/(.+)-inline(.+)/,yi+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ih(n)-1-e>6)switch(Eo(n,e+1)){case 109:if(Eo(n,e+4)!==45)break;case 102:return bi(n,/(.+:)(.+)-([^]+)/,"$1"+yi+"$2-$3$1"+IN+(Eo(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~AF(n,"stretch")?zse(bi(n,"stretch","fill-available"),e)+n:n}break;case 4949:if(Eo(n,e+1)!==115)break;case 6444:switch(Eo(n,ih(n)-3-(~AF(n,"!important")&&10))){case 107:return bi(n,":",":"+yi)+n;case 101:return bi(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+yi+(Eo(n,14)===45?"inline-":"")+"box$3$1"+yi+"$2$3$1"+Ko+"$2box$3")+n}break;case 5936:switch(Eo(n,e+11)){case 114:return yi+n+Ko+bi(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return yi+n+Ko+bi(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return yi+n+Ko+bi(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return yi+n+Ko+n+n}return n}var zet=function(e,t,r,i){if(e.length>-1&&!e.return)switch(e.type){case q5:e.return=zse(e.value,e.length);break;case Bse:return Gx([zw(e,{value:bi(e.value,"@","@"+yi)})],i);case j5:if(e.length)return _et(e.props,function(s){switch(Cet(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Gx([zw(e,{props:[bi(s,/:(read-\w+)/,":"+IN+"$1")]})],i);case"::placeholder":return Gx([zw(e,{props:[bi(s,/:(plac\w+)/,":"+yi+"input-$1")]}),zw(e,{props:[bi(s,/:(plac\w+)/,":"+IN+"$1")]}),zw(e,{props:[bi(s,/:(plac\w+)/,Ko+"input-$1")]})],i)}return""})}},Het=[zet],Vet=function(e){var t=e.key;if(t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(v){var b=v.getAttribute("data-emotion");b.indexOf(" ")!==-1&&(document.head.appendChild(v),v.setAttribute("data-s",""))})}var i=e.stylisPlugins||Het,s={},a,o=[];a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(v){for(var b=v.getAttribute("data-emotion").split(" "),x=1;x<b.length;x++)s[b[x]]=!0;o.push(v)});var l,c=[Pet,Uet];{var u,d=[ket,Bet(function(v){u.insert(v)})],h=Oet(c.concat(i,d)),p=function(b){return Gx(Iet(b),h)};l=function(b,x,C,E){u=C,p(b?b+"{"+x.styles+"}":x.styles),E&&(g.inserted[x.name]=!0)}}var g={key:t,sheet:new get({key:t,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return g.sheet.hydrate(o),g},c$={exports:{}},Ei={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lj;function Get(){if(lj)return Ei;lj=1;var n=typeof Symbol=="function"&&Symbol.for,e=n?Symbol.for("react.element"):60103,t=n?Symbol.for("react.portal"):60106,r=n?Symbol.for("react.fragment"):60107,i=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,a=n?Symbol.for("react.provider"):60109,o=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,c=n?Symbol.for("react.concurrent_mode"):60111,u=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,h=n?Symbol.for("react.suspense_list"):60120,p=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,b=n?Symbol.for("react.fundamental"):60117,x=n?Symbol.for("react.responder"):60118,C=n?Symbol.for("react.scope"):60119;function E(M){if(typeof M=="object"&&M!==null){var R=M.$$typeof;switch(R){case e:switch(M=M.type,M){case l:case c:case r:case s:case i:case d:return M;default:switch(M=M&&M.$$typeof,M){case o:case u:case g:case p:case a:return M;default:return R}}case t:return R}}}function _(M){return E(M)===c}return Ei.AsyncMode=l,Ei.ConcurrentMode=c,Ei.ContextConsumer=o,Ei.ContextProvider=a,Ei.Element=e,Ei.ForwardRef=u,Ei.Fragment=r,Ei.Lazy=g,Ei.Memo=p,Ei.Portal=t,Ei.Profiler=s,Ei.StrictMode=i,Ei.Suspense=d,Ei.isAsyncMode=function(M){return _(M)||E(M)===l},Ei.isConcurrentMode=_,Ei.isContextConsumer=function(M){return E(M)===o},Ei.isContextProvider=function(M){return E(M)===a},Ei.isElement=function(M){return typeof M=="object"&&M!==null&&M.$$typeof===e},Ei.isForwardRef=function(M){return E(M)===u},Ei.isFragment=function(M){return E(M)===r},Ei.isLazy=function(M){return E(M)===g},Ei.isMemo=function(M){return E(M)===p},Ei.isPortal=function(M){return E(M)===t},Ei.isProfiler=function(M){return E(M)===s},Ei.isStrictMode=function(M){return E(M)===i},Ei.isSuspense=function(M){return E(M)===d},Ei.isValidElementType=function(M){return typeof M=="string"||typeof M=="function"||M===r||M===c||M===s||M===i||M===d||M===h||typeof M=="object"&&M!==null&&(M.$$typeof===g||M.$$typeof===p||M.$$typeof===a||M.$$typeof===o||M.$$typeof===u||M.$$typeof===b||M.$$typeof===x||M.$$typeof===C||M.$$typeof===v)},Ei.typeOf=E,Ei}var cj;function Wet(){return cj||(cj=1,c$.exports=Get()),c$.exports}var u$,uj;function jet(){if(uj)return u$;uj=1;var n=Wet(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[n.ForwardRef]=r,s[n.Memo]=i;function a(g){return n.isMemo(g)?i:s[g.$$typeof]||e}var o=Object.defineProperty,l=Object.getOwnPropertyNames,c=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,h=Object.prototype;function p(g,v,b){if(typeof v!="string"){if(h){var x=d(v);x&&x!==h&&p(g,x,b)}var C=l(v);c&&(C=C.concat(c(v)));for(var E=a(g),_=a(v),M=0;M<C.length;++M){var R=C[M];if(!t[R]&&!(b&&b[R])&&!(_&&_[R])&&!(E&&E[R])){var L=u(v,R);try{o(g,R,L)}catch{}}}}return g}return u$=p,u$}jet();var qet=!0;function Hse(n,e,t){var r="";return t.split(" ").forEach(function(i){n[i]!==void 0?e.push(n[i]+";"):i&&(r+=i+" ")}),r}var K5=function(e,t,r){var i=e.key+"-"+t.name;(r===!1||qet===!1)&&e.registered[i]===void 0&&(e.registered[i]=t.styles)},Y5=function(e,t,r){K5(e,t,r);var i=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var s=t;do e.insert(t===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function Xet(n){for(var e=0,t,r=0,i=n.length;i>=4;++r,i-=4)t=n.charCodeAt(r)&255|(n.charCodeAt(++r)&255)<<8|(n.charCodeAt(++r)&255)<<16|(n.charCodeAt(++r)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(n.charCodeAt(r+2)&255)<<16;case 2:e^=(n.charCodeAt(r+1)&255)<<8;case 1:e^=n.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var Ket={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Yet=/[A-Z]|^ms/g,Jet=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Vse=function(e){return e.charCodeAt(1)===45},dj=function(e){return e!=null&&typeof e!="boolean"},d$=Use(function(n){return Vse(n)?n:n.replace(Yet,"-$&").toLowerCase()}),fj=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(Jet,function(r,i,s){return sh={name:i,styles:s,next:sh},i})}return Ket[e]!==1&&!Vse(e)&&typeof t=="number"&&t!==0?t+"px":t};function d_(n,e,t){if(t==null)return"";var r=t;if(r.__emotion_styles!==void 0)return r;switch(typeof t){case"boolean":return"";case"object":{var i=t;if(i.anim===1)return sh={name:i.name,styles:i.styles,next:sh},i.name;var s=t;if(s.styles!==void 0){var a=s.next;if(a!==void 0)for(;a!==void 0;)sh={name:a.name,styles:a.styles,next:sh},a=a.next;var o=s.styles+";";return o}return Zet(n,e,t)}case"function":{if(n!==void 0){var l=sh,c=t(n);return sh=l,d_(n,e,c)}break}}var u=t;if(e==null)return u;var d=e[u];return d!==void 0?d:u}function Zet(n,e,t){var r="";if(Array.isArray(t))for(var i=0;i<t.length;i++)r+=d_(n,e,t[i])+";";else for(var s in t){var a=t[s];if(typeof a!="object"){var o=a;e!=null&&e[o]!==void 0?r+=s+"{"+e[o]+"}":dj(o)&&(r+=d$(s)+":"+fj(s,o)+";")}else if(Array.isArray(a)&&typeof a[0]=="string"&&(e==null||e[a[0]]===void 0))for(var l=0;l<a.length;l++)dj(a[l])&&(r+=d$(s)+":"+fj(s,a[l])+";");else{var c=d_(n,e,a);switch(s){case"animation":case"animationName":{r+=d$(s)+":"+c+";";break}default:r+=s+"{"+c+"}"}}}return r}var hj=/label:\s*([^\s;{]+)\s*(;|$)/g,sh;function p2(n,e,t){if(n.length===1&&typeof n[0]=="object"&&n[0]!==null&&n[0].styles!==void 0)return n[0];var r=!0,i="";sh=void 0;var s=n[0];if(s==null||s.raw===void 0)r=!1,i+=d_(t,e,s);else{var a=s;i+=a[0]}for(var o=1;o<n.length;o++)if(i+=d_(t,e,n[o]),r){var l=s;i+=l[o]}hj.lastIndex=0;for(var c="",u;(u=hj.exec(i))!==null;)c+="-"+u[1];var d=Xet(i)+c;return{name:d,styles:i,next:sh}}var Qet=function(e){return e()},Gse=UM.useInsertionEffect?UM.useInsertionEffect:!1,Wse=Gse||Qet,pj=Gse||F.useLayoutEffect,jse=F.createContext(typeof HTMLElement<"u"?Vet({key:"css"}):null);jse.Provider;var J5=function(e){return F.forwardRef(function(t,r){var i=F.useContext(jse);return e(t,i,r)})},m2=F.createContext({}),Z5={}.hasOwnProperty,MF="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",ett=function(e,t){var r={};for(var i in t)Z5.call(t,i)&&(r[i]=t[i]);return r[MF]=e,r},ttt=function(e){var t=e.cache,r=e.serialized,i=e.isStringTag;return K5(t,r,i),Wse(function(){return Y5(t,r,i)}),null},ntt=J5(function(n,e,t){var r=n.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var i=n[MF],s=[r],a="";typeof n.className=="string"?a=Hse(e.registered,s,n.className):n.className!=null&&(a=n.className+" ");var o=p2(s,void 0,F.useContext(m2));a+=e.key+"-"+o.name;var l={};for(var c in n)Z5.call(n,c)&&c!=="css"&&c!==MF&&(l[c]=n[c]);return l.className=a,t&&(l.ref=t),F.createElement(F.Fragment,null,F.createElement(ttt,{cache:e,serialized:o,isStringTag:typeof i=="string"}),F.createElement(i,l))}),rtt=ntt,mj=function(e,t){var r=arguments;if(t==null||!Z5.call(t,"css"))return F.createElement.apply(void 0,r);var i=r.length,s=new Array(i);s[0]=rtt,s[1]=ett(e,t);for(var a=2;a<i;a++)s[a]=r[a];return F.createElement.apply(null,s)};(function(n){var e;e||(e=n.JSX||(n.JSX={}))})(mj||(mj={}));var itt=J5(function(n,e){var t=n.styles,r=p2([t],void 0,F.useContext(m2)),i=F.useRef();return pj(function(){var s=e.key+"-global",a=new e.sheet.constructor({key:s,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),o=!1,l=document.querySelector('style[data-emotion="'+s+" "+r.name+'"]');return e.sheet.tags.length&&(a.before=e.sheet.tags[0]),l!==null&&(o=!0,l.setAttribute("data-emotion",s),a.hydrate([l])),i.current=[a,o],function(){a.flush()}},[e]),pj(function(){var s=i.current,a=s[0],o=s[1];if(o){s[1]=!1;return}if(r.next!==void 0&&Y5(e,r.next,!0),a.tags.length){var l=a.tags[a.tags.length-1].nextElementSibling;a.before=l,a.flush()}e.insert("",r,a,!1)},[e,r.name]),null});function Q5(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return p2(e)}function g2(){var n=Q5.apply(void 0,arguments),e="animation-"+n.name;return{name:e,styles:"@keyframes "+e+"{"+n.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var stt=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,att=Use(function(n){return stt.test(n)||n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)<91}),ott=att,ltt=function(e){return e!=="theme"},gj=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?ott:ltt},yj=function(e,t,r){var i;if(t){var s=t.shouldForwardProp;i=e.__emotion_forwardProp&&s?function(a){return e.__emotion_forwardProp(a)&&s(a)}:s}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},ctt=function(e){var t=e.cache,r=e.serialized,i=e.isStringTag;return K5(t,r,i),Wse(function(){return Y5(t,r,i)}),null},utt=function n(e,t){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,s,a;t!==void 0&&(s=t.label,a=t.target);var o=yj(e,t,r),l=o||gj(i),c=!l("as");return function(){var u=arguments,d=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(s!==void 0&&d.push("label:"+s+";"),u[0]==null||u[0].raw===void 0)d.push.apply(d,u);else{var h=u[0];d.push(h[0]);for(var p=u.length,g=1;g<p;g++)d.push(u[g],h[g])}var v=J5(function(b,x,C){var E=c&&b.as||i,_="",M=[],R=b;if(b.theme==null){R={};for(var L in b)R[L]=b[L];R.theme=F.useContext(m2)}typeof b.className=="string"?_=Hse(x.registered,M,b.className):b.className!=null&&(_=b.className+" ");var $=p2(d.concat(M),x.registered,R);_+=x.key+"-"+$.name,a!==void 0&&(_+=" "+a);var N=c&&o===void 0?gj(E):l,I={};for(var k in b)c&&k==="as"||N(k)&&(I[k]=b[k]);return I.className=_,C&&(I.ref=C),F.createElement(F.Fragment,null,F.createElement(ctt,{cache:x,serialized:$,isStringTag:typeof E=="string"}),F.createElement(E,I))});return v.displayName=s!==void 0?s:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",v.defaultProps=e.defaultProps,v.__emotion_real=v,v.__emotion_base=i,v.__emotion_styles=d,v.__emotion_forwardProp=o,Object.defineProperty(v,"toString",{value:function(){return"."+a}}),v.withComponent=function(b,x){var C=n(b,ss({},t,x,{shouldForwardProp:yj(v,x,!0)}));return C.apply(void 0,d)},v}},dtt=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],RF=utt.bind(null);dtt.forEach(function(n){RF[n]=RF(n)});function ftt(n){return n==null||Object.keys(n).length===0}function qse(n){const{styles:e,defaultTheme:t={}}=n,r=typeof e=="function"?i=>e(ftt(i)?t:i):e;return V.jsx(itt,{styles:r})}function Xse(n,e){return RF(n,e)}function htt(n,e){Array.isArray(n.__emotion_styles)&&(n.__emotion_styles=e(n.__emotion_styles))}const vj=[];function yg(n){return vj[0]=n,p2(vj)}const ptt=n=>{const e=Object.keys(n).map(t=>({key:t,val:n[t]}))||[];return e.sort((t,r)=>t.val-r.val),e.reduce((t,r)=>({...t,[r.key]:r.val}),{})};function mtt(n){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:t="px",step:r=5,...i}=n,s=ptt(e),a=Object.keys(s);function o(h){return`@media (min-width:${typeof e[h]=="number"?e[h]:h}${t})`}function l(h){return`@media (max-width:${(typeof e[h]=="number"?e[h]:h)-r/100}${t})`}function c(h,p){const g=a.indexOf(p);return`@media (min-width:${typeof e[h]=="number"?e[h]:h}${t}) and (max-width:${(g!==-1&&typeof e[a[g]]=="number"?e[a[g]]:p)-r/100}${t})`}function u(h){return a.indexOf(h)+1<a.length?c(h,a[a.indexOf(h)+1]):o(h)}function d(h){const p=a.indexOf(h);return p===0?o(a[1]):p===a.length-1?l(a[p]):c(h,a[a.indexOf(h)+1]).replace("@media","@media not all and")}return{keys:a,values:s,up:o,down:l,between:c,only:u,not:d,unit:t,...i}}const gtt={borderRadius:4};function Kse(n=8,e=I3({spacing:n})){if(n.mui)return n;const t=(...r)=>(r.length===0?[1]:r).map(s=>{const a=e(s);return typeof a=="number"?`${a}px`:a}).join(" ");return t.mui=!0,t}function ytt(n,e){var r;const t=this;if(t.vars){if(!((r=t.colorSchemes)!=null&&r[n])||typeof t.getColorSchemeSelector!="function")return{};let i=t.getColorSchemeSelector(n);return i==="&"?e:((i.includes("data-")||i.includes("."))&&(i=`*:where(${i.replace(/\s*&$/,"")}) &`),{[i]:e})}return t.palette.mode===n?e:{}}function U3(n={},...e){const{breakpoints:t={},palette:r={},spacing:i,shape:s={},...a}=n,o=mtt(t),l=Kse(i);let c=io({breakpoints:o,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:l,shape:{...gtt,...s}},a);return c=CQe(c),c.applyStyles=ytt,c=e.reduce((u,d)=>io(u,d),c),c.unstable_sxConfig={...f2,...a==null?void 0:a.unstable_sxConfig},c.unstable_sx=function(d){return Bg({sx:d,theme:this})},c}function vtt(n){return Object.keys(n).length===0}function e6(n=null){const e=F.useContext(m2);return!e||vtt(e)?n:e}const btt=U3();function z3(n=btt){return e6(n)}function f$(n){const e=yg(n);return n!==e&&e.styles?(e.styles.match(/^@layer\s+[^{]*$/)||(e.styles=`@layer global{${e.styles}}`),e):n}function Yse({styles:n,themeId:e,defaultTheme:t={}}){const r=z3(t),i=e&&r[e]||r;let s=typeof n=="function"?n(i):n;return i.modularCssLayers&&(Array.isArray(s)?s=s.map(a=>f$(typeof a=="function"?a(i):a)):s=f$(s)),V.jsx(qse,{styles:s})}const bj=n=>n,xtt=()=>{let n=bj;return{configure(e){n=e},generate(e){return n(e)},reset(){n=bj}}},Jse=xtt();function Zse(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=Zse(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function Pn(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=Zse(n))&&(r&&(r+=" "),r+=e);return r}function Stt(n={}){const{themeId:e,defaultTheme:t,defaultClassName:r="MuiBox-root",generateClassName:i}=n,s=Xse("div",{shouldForwardProp:o=>o!=="theme"&&o!=="sx"&&o!=="as"})(Bg);return F.forwardRef(function(l,c){const u=z3(t),{className:d,component:h="div",...p}=W5(l);return V.jsx(s,{as:h,ref:c,className:Pn(d,i?i(r):r),theme:e&&u[e]||u,...p})})}const wtt={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Fr(n,e,t="Mui"){const r=wtt[e];return r?`${t}-${r}`:`${Jse.generate(n)}-${e}`}function yr(n,e,t="Mui"){const r={};return e.forEach(i=>{r[i]=Fr(n,i,t)}),r}function Qse(n){const{variants:e,...t}=n,r={variants:e,style:yg(t),isProcessed:!0};return r.style===t||e&&e.forEach(i=>{typeof i.style!="function"&&(i.style=yg(i.style))}),r}const Ctt=U3();function h$(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}function $y(n,e){return e&&n&&typeof n=="object"&&n.styles&&!n.styles.startsWith("@layer")&&(n.styles=`@layer ${e}{${String(n.styles)}}`),n}function _tt(n){return n?(e,t)=>t[n]:null}function Ett(n,e,t){n.theme=Ttt(n.theme)?t:n.theme[e]||n.theme}function OM(n,e,t){const r=typeof e=="function"?e(n):e;if(Array.isArray(r))return r.flatMap(i=>OM(n,i,t));if(Array.isArray(r==null?void 0:r.variants)){let i;if(r.isProcessed)i=t?$y(r.style,t):r.style;else{const{variants:s,...a}=r;i=t?$y(yg(a),t):a}return eae(n,r.variants,[i],t)}return r!=null&&r.isProcessed?t?$y(yg(r.style),t):r.style:t?$y(yg(r),t):r}function eae(n,e,t=[],r=void 0){var s;let i;e:for(let a=0;a<e.length;a+=1){const o=e[a];if(typeof o.props=="function"){if(i??(i={...n,...n.ownerState,ownerState:n.ownerState}),!o.props(i))continue}else for(const l in o.props)if(n[l]!==o.props[l]&&((s=n.ownerState)==null?void 0:s[l])!==o.props[l])continue e;typeof o.style=="function"?(i??(i={...n,...n.ownerState,ownerState:n.ownerState}),t.push(r?$y(yg(o.style(i)),r):o.style(i))):t.push(r?$y(yg(o.style),r):o.style)}return t}function tae(n={}){const{themeId:e,defaultTheme:t=Ctt,rootShouldForwardProp:r=h$,slotShouldForwardProp:i=h$}=n;function s(o){Ett(o,e,t)}return(o,l={})=>{htt(o,R=>R.filter(L=>L!==Bg));const{name:c,slot:u,skipVariantsResolver:d,skipSx:h,overridesResolver:p=_tt(Rtt(u)),...g}=l,v=c&&c.startsWith("Mui")||u?"components":"custom",b=d!==void 0?d:u&&u!=="Root"&&u!=="root"||!1,x=h||!1;let C=h$;u==="Root"||u==="root"?C=r:u?C=i:Mtt(o)&&(C=void 0);const E=Xse(o,{shouldForwardProp:C,label:Att(),...g}),_=R=>{if(R.__emotion_real===R)return R;if(typeof R=="function")return function($){return OM($,R,$.theme.modularCssLayers?v:void 0)};if(oh(R)){const L=Qse(R);return function(N){return L.variants?OM(N,L,N.theme.modularCssLayers?v:void 0):N.theme.modularCssLayers?$y(L.style,v):L.style}}return R},M=(...R)=>{const L=[],$=R.map(_),N=[];if(L.push(s),c&&p&&N.push(function(G){var J,Q;const X=(Q=(J=G.theme.components)==null?void 0:J[c])==null?void 0:Q.styleOverrides;if(!X)return null;const z={};for(const Y in X)z[Y]=OM(G,X[Y],G.theme.modularCssLayers?"theme":void 0);return p(G,z)}),c&&!b&&N.push(function(G){var z,J;const W=G.theme,X=(J=(z=W==null?void 0:W.components)==null?void 0:z[c])==null?void 0:J.variants;return X?eae(G,X,[],G.theme.modularCssLayers?"theme":void 0):null}),x||N.push(Bg),Array.isArray($[0])){const P=$.shift(),G=new Array(L.length).fill(""),W=new Array(N.length).fill("");let X;X=[...G,...P,...W],X.raw=[...G,...P.raw,...W],L.unshift(X)}const I=[...L,...$,...N],k=E(...I);return o.muiName&&(k.muiName=o.muiName),k};return E.withConfig&&(M.withConfig=E.withConfig),M}}function Att(n,e){return void 0}function Ttt(n){for(const e in n)return!1;return!0}function Mtt(n){return typeof n=="string"&&n.charCodeAt(0)>96}function Rtt(n){return n&&n.charAt(0).toLowerCase()+n.slice(1)}const Ntt=tae();function f_(n,e,t=!1){const r={...e};for(const i in n)if(Object.prototype.hasOwnProperty.call(n,i)){const s=i;if(s==="components"||s==="slots")r[s]={...n[s],...r[s]};else if(s==="componentsProps"||s==="slotProps"){const a=n[s],o=e[s];if(!o)r[s]=a||{};else if(!a)r[s]=o;else{r[s]={...o};for(const l in a)if(Object.prototype.hasOwnProperty.call(a,l)){const c=l;r[s][c]=f_(a[c],o[c],t)}}}else s==="className"&&t&&e.className?r.className=Pn(n==null?void 0:n.className,e==null?void 0:e.className):s==="style"&&t&&e.style?r.style={...n==null?void 0:n.style,...e==null?void 0:e.style}:r[s]===void 0&&(r[s]=n[s])}return r}function Itt(n){const{theme:e,name:t,props:r}=n;return!e||!e.components||!e.components[t]||!e.components[t].defaultProps?r:f_(e.components[t].defaultProps,r)}function Dtt({props:n,name:e,defaultTheme:t,themeId:r}){let i=z3(t);return r&&(i=i[r]||i),Itt({theme:i,name:e,props:n})}const Mh=typeof window<"u"?F.useLayoutEffect:F.useEffect;function ktt(n,e=Number.MIN_SAFE_INTEGER,t=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(n,t))}function t6(n,e=0,t=1){return ktt(n,e,t)}function Ott(n){n=n.slice(1);const e=new RegExp(`.{1,${n.length>=6?2:1}}`,"g");let t=n.match(e);return t&&t[0].length===1&&(t=t.map(r=>r+r)),t?`rgb${t.length===4?"a":""}(${t.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function $g(n){if(n.type)return n;if(n.charAt(0)==="#")return $g(Ott(n));const e=n.indexOf("("),t=n.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(t))throw new Error(Gp(9,n));let r=n.substring(e+1,n.length-1),i;if(t==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(i))throw new Error(Gp(10,i))}else r=r.split(",");return r=r.map(s=>parseFloat(s)),{type:t,values:r,colorSpace:i}}const Btt=n=>{const e=$g(n);return e.values.slice(0,3).map((t,r)=>e.type.includes("hsl")&&r!==0?`${t}%`:t).join(" ")},sC=(n,e)=>{try{return Btt(n)}catch{return n}};function H3(n){const{type:e,colorSpace:t}=n;let{values:r}=n;return e.includes("rgb")?r=r.map((i,s)=>s<3?parseInt(i,10):i):e.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.includes("color")?r=`${t} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function nae(n){n=$g(n);const{values:e}=n,t=e[0],r=e[1]/100,i=e[2]/100,s=r*Math.min(i,1-i),a=(c,u=(c+t/30)%12)=>i-s*Math.max(Math.min(u-3,9-u,1),-1);let o="rgb";const l=[Math.round(a(0)*255),Math.round(a(8)*255),Math.round(a(4)*255)];return n.type==="hsla"&&(o+="a",l.push(e[3])),H3({type:o,values:l})}function NF(n){n=$g(n);let e=n.type==="hsl"||n.type==="hsla"?$g(nae(n)).values:n.values;return e=e.map(t=>(n.type!=="color"&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function $tt(n,e){const t=NF(n),r=NF(e);return(Math.max(t,r)+.05)/(Math.min(t,r)+.05)}function ar(n,e){return n=$g(n),e=t6(e),(n.type==="rgb"||n.type==="hsl")&&(n.type+="a"),n.type==="color"?n.values[3]=`/${e}`:n.values[3]=e,H3(n)}function dy(n,e,t){try{return ar(n,e)}catch{return n}}function V3(n,e){if(n=$g(n),e=t6(e),n.type.includes("hsl"))n.values[2]*=1-e;else if(n.type.includes("rgb")||n.type.includes("color"))for(let t=0;t<3;t+=1)n.values[t]*=1-e;return H3(n)}function Oi(n,e,t){try{return V3(n,e)}catch{return n}}function G3(n,e){if(n=$g(n),e=t6(e),n.type.includes("hsl"))n.values[2]+=(100-n.values[2])*e;else if(n.type.includes("rgb"))for(let t=0;t<3;t+=1)n.values[t]+=(255-n.values[t])*e;else if(n.type.includes("color"))for(let t=0;t<3;t+=1)n.values[t]+=(1-n.values[t])*e;return H3(n)}function Bi(n,e,t){try{return G3(n,e)}catch{return n}}function Ltt(n,e=.15){return NF(n)>.5?V3(n,e):G3(n,e)}function iM(n,e,t){try{return Ltt(n,e)}catch{return n}}const rae=F.createContext(null);function n6(){return F.useContext(rae)}const Ftt=typeof Symbol=="function"&&Symbol.for,Ptt=Ftt?Symbol.for("mui.nested"):"__THEME_NESTED__";function Utt(n,e){return typeof e=="function"?e(n):{...n,...e}}function ztt(n){const{children:e,theme:t}=n,r=n6(),i=F.useMemo(()=>{const s=r===null?{...t}:Utt(r,t);return s!=null&&(s[Ptt]=r!==null),s},[t,r]);return V.jsx(rae.Provider,{value:i,children:e})}const iae=F.createContext();function Htt({value:n,...e}){return V.jsx(iae.Provider,{value:n??!0,...e})}const Vtt=()=>F.useContext(iae)??!1,sae=F.createContext(void 0);function Gtt({value:n,children:e}){return V.jsx(sae.Provider,{value:n,children:e})}function Wtt(n){const{theme:e,name:t,props:r}=n;if(!e||!e.components||!e.components[t])return r;const i=e.components[t];return i.defaultProps?f_(i.defaultProps,r,e.components.mergeClassNameAndStyle):!i.styleOverrides&&!i.variants?f_(i,r,e.components.mergeClassNameAndStyle):r}function jtt({props:n,name:e}){const t=F.useContext(sae);return Wtt({props:n,name:e,theme:{components:t}})}let xj=0;function qtt(n){const[e,t]=F.useState(n),r=n||e;return F.useEffect(()=>{e==null&&(xj+=1,t(`mui-${xj}`))},[e]),r}const Xtt={...UM},Sj=Xtt.useId;function sS(n){if(Sj!==void 0){const e=Sj();return n??e}return qtt(n)}function Ktt(n){const e=e6(),t=sS()||"",{modularCssLayers:r}=n;let i="mui.global, mui.components, mui.theme, mui.custom, mui.sx";return!r||e!==null?i="":typeof r=="string"?i=r.replace(/mui(?!\.)/g,i):i=`@layer ${i};`,Mh(()=>{var o,l;const s=document.querySelector("head");if(!s)return;const a=s.firstChild;if(i){if(a&&((o=a.hasAttribute)!=null&&o.call(a,"data-mui-layer-order"))&&a.getAttribute("data-mui-layer-order")===t)return;const c=document.createElement("style");c.setAttribute("data-mui-layer-order",t),c.textContent=i,s.prepend(c)}else(l=s.querySelector(`style[data-mui-layer-order="${t}"]`))==null||l.remove()},[i,t]),i?V.jsx(Yse,{styles:i}):null}const wj={};function Cj(n,e,t,r=!1){return F.useMemo(()=>{const i=n&&e[n]||e;if(typeof t=="function"){const s=t(i),a=n?{...e,[n]:s}:s;return r?()=>a:a}return n?{...e,[n]:t}:{...e,...t}},[n,e,t,r])}function aae(n){const{children:e,theme:t,themeId:r}=n,i=e6(wj),s=n6()||wj,a=Cj(r,i,t),o=Cj(r,s,t,!0),l=(r?a[r]:a).direction==="rtl",c=Ktt(a);return V.jsx(ztt,{theme:o,children:V.jsx(m2.Provider,{value:a,children:V.jsx(Htt,{value:l,children:V.jsxs(Gtt,{value:r?a[r].components:a.components,children:[c,e]})})})})}const _j={theme:void 0};function Ytt(n){let e,t;return function(i){let s=e;return(s===void 0||i.theme!==t)&&(_j.theme=i.theme,s=Qse(n(_j)),e=s,t=i.theme),s}}const r6="mode",i6="color-scheme",Jtt="data-color-scheme";function Ztt(n){const{defaultMode:e="system",defaultLightColorScheme:t="light",defaultDarkColorScheme:r="dark",modeStorageKey:i=r6,colorSchemeStorageKey:s=i6,attribute:a=Jtt,colorSchemeNode:o="document.documentElement",nonce:l}=n||{};let c="",u=a;if(a==="class"&&(u=".%s"),a==="data"&&(u="[data-%s]"),u.startsWith(".")){const h=u.substring(1);c+=`${o}.classList.remove('${h}'.replace('%s', light), '${h}'.replace('%s', dark));
      ${o}.classList.add('${h}'.replace('%s', colorScheme));`}const d=u.match(/\[([^[\]]+)\]/);if(d){const[h,p]=d[1].split("=");p||(c+=`${o}.removeAttribute('${h}'.replace('%s', light));
      ${o}.removeAttribute('${h}'.replace('%s', dark));`),c+=`
      ${o}.setAttribute('${h}'.replace('%s', colorScheme), ${p?`${p}.replace('%s', colorScheme)`:'""'});`}else c+=`${o}.setAttribute('${u}', colorScheme);`;return V.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?l:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('${i}') || '${e}';
  const dark = localStorage.getItem('${s}-dark') || '${r}';
  const light = localStorage.getItem('${s}-light') || '${t}';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    ${c}
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function Qtt(){}const ent=({key:n,storageWindow:e})=>(!e&&typeof window<"u"&&(e=window),{get(t){if(typeof window>"u")return;if(!e)return t;let r;try{r=e.localStorage.getItem(n)}catch{}return r||t},set:t=>{if(e)try{e.localStorage.setItem(n,t)}catch{}},subscribe:t=>{if(!e)return Qtt;const r=i=>{const s=i.newValue;i.key===n&&t(s)};return e.addEventListener("storage",r),()=>{e.removeEventListener("storage",r)}}});function p$(){}function Ej(n){if(typeof window<"u"&&typeof window.matchMedia=="function"&&n==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function oae(n,e){if(n.mode==="light"||n.mode==="system"&&n.systemMode==="light")return e("light");if(n.mode==="dark"||n.mode==="system"&&n.systemMode==="dark")return e("dark")}function tnt(n){return oae(n,e=>{if(e==="light")return n.lightColorScheme;if(e==="dark")return n.darkColorScheme})}function nnt(n){const{defaultMode:e="light",defaultLightColorScheme:t,defaultDarkColorScheme:r,supportedColorSchemes:i=[],modeStorageKey:s=r6,colorSchemeStorageKey:a=i6,storageWindow:o=typeof window>"u"?void 0:window,storageManager:l=ent,noSsr:c=!1}=n,u=i.join(","),d=i.length>1,h=F.useMemo(()=>l==null?void 0:l({key:s,storageWindow:o}),[l,s,o]),p=F.useMemo(()=>l==null?void 0:l({key:`${a}-light`,storageWindow:o}),[l,a,o]),g=F.useMemo(()=>l==null?void 0:l({key:`${a}-dark`,storageWindow:o}),[l,a,o]),[v,b]=F.useState(()=>{const $=(h==null?void 0:h.get(e))||e,N=(p==null?void 0:p.get(t))||t,I=(g==null?void 0:g.get(r))||r;return{mode:$,systemMode:Ej($),lightColorScheme:N,darkColorScheme:I}}),[x,C]=F.useState(c||!d);F.useEffect(()=>{C(!0)},[]);const E=tnt(v),_=F.useCallback($=>{b(N=>{if($===N.mode)return N;const I=$??e;return h==null||h.set(I),{...N,mode:I,systemMode:Ej(I)}})},[h,e]),M=F.useCallback($=>{$?typeof $=="string"?$&&!u.includes($)?console.error(`\`${$}\` does not exist in \`theme.colorSchemes\`.`):b(N=>{const I={...N};return oae(N,k=>{k==="light"&&(p==null||p.set($),I.lightColorScheme=$),k==="dark"&&(g==null||g.set($),I.darkColorScheme=$)}),I}):b(N=>{const I={...N},k=$.light===null?t:$.light,P=$.dark===null?r:$.dark;return k&&(u.includes(k)?(I.lightColorScheme=k,p==null||p.set(k)):console.error(`\`${k}\` does not exist in \`theme.colorSchemes\`.`)),P&&(u.includes(P)?(I.darkColorScheme=P,g==null||g.set(P)):console.error(`\`${P}\` does not exist in \`theme.colorSchemes\`.`)),I}):b(N=>(p==null||p.set(t),g==null||g.set(r),{...N,lightColorScheme:t,darkColorScheme:r}))},[u,p,g,t,r]),R=F.useCallback($=>{v.mode==="system"&&b(N=>{const I=$!=null&&$.matches?"dark":"light";return N.systemMode===I?N:{...N,systemMode:I}})},[v.mode]),L=F.useRef(R);return L.current=R,F.useEffect(()=>{if(typeof window.matchMedia!="function"||!d)return;const $=(...I)=>L.current(...I),N=window.matchMedia("(prefers-color-scheme: dark)");return N.addListener($),$(N),()=>{N.removeListener($)}},[d]),F.useEffect(()=>{if(d){const $=(h==null?void 0:h.subscribe(k=>{(!k||["light","dark","system"].includes(k))&&_(k||e)}))||p$,N=(p==null?void 0:p.subscribe(k=>{(!k||u.match(k))&&M({light:k})}))||p$,I=(g==null?void 0:g.subscribe(k=>{(!k||u.match(k))&&M({dark:k})}))||p$;return()=>{$(),N(),I()}}},[M,_,u,e,o,d,h,p,g]),{...v,mode:x?v.mode:void 0,systemMode:x?v.systemMode:void 0,colorScheme:x?E:void 0,setMode:_,setColorScheme:M}}const rnt="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function int(n){const{themeId:e,theme:t={},modeStorageKey:r=r6,colorSchemeStorageKey:i=i6,disableTransitionOnChange:s=!1,defaultColorScheme:a,resolveTheme:o}=n,l={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},c=F.createContext(void 0),u=()=>F.useContext(c)||l,d={},h={};function p(x){var Xe,at,et,Ft;const{children:C,theme:E,modeStorageKey:_=r,colorSchemeStorageKey:M=i,disableTransitionOnChange:R=s,storageManager:L,storageWindow:$=typeof window>"u"?void 0:window,documentNode:N=typeof document>"u"?void 0:document,colorSchemeNode:I=typeof document>"u"?void 0:document.documentElement,disableNestedContext:k=!1,disableStyleSheetGeneration:P=!1,defaultMode:G="system",forceThemeRerender:W=!1,noSsr:X}=x,z=F.useRef(!1),J=n6(),Q=F.useContext(c),Y=!!Q&&!k,q=F.useMemo(()=>E||(typeof t=="function"?t():t),[E]),te=q[e],ne=te||q,{colorSchemes:le=d,components:ye=h,cssVarPrefix:ue}=ne,ve=Object.keys(le).filter(At=>!!le[At]).join(","),xe=F.useMemo(()=>ve.split(","),[ve]),Pe=typeof a=="string"?a:a.light,ze=typeof a=="string"?a:a.dark,Ke=le[Pe]&&le[ze]?G:((at=(Xe=le[ne.defaultColorScheme])==null?void 0:Xe.palette)==null?void 0:at.mode)||((et=ne.palette)==null?void 0:et.mode),{mode:pt,setMode:dt,systemMode:pe,lightColorScheme:Le,darkColorScheme:Ue,colorScheme:Ze,setColorScheme:je}=nnt({supportedColorSchemes:xe,defaultLightColorScheme:Pe,defaultDarkColorScheme:ze,modeStorageKey:_,colorSchemeStorageKey:M,defaultMode:Ke,storageManager:L,storageWindow:$,noSsr:X});let lt=pt,st=Ze;Y&&(lt=Q.mode,st=Q.colorScheme);let ot=st||ne.defaultColorScheme;ne.vars&&!W&&(ot=ne.defaultColorScheme);const Ut=F.useMemo(()=>{var Xt;const At=((Xt=ne.generateThemeVars)==null?void 0:Xt.call(ne))||ne.vars,_t={...ne,components:ye,colorSchemes:le,cssVarPrefix:ue,vars:At};if(typeof _t.generateSpacing=="function"&&(_t.spacing=_t.generateSpacing()),ot){const yt=le[ot];yt&&typeof yt=="object"&&Object.keys(yt).forEach(Mt=>{yt[Mt]&&typeof yt[Mt]=="object"?_t[Mt]={..._t[Mt],...yt[Mt]}:_t[Mt]=yt[Mt]})}return o?o(_t):_t},[ne,ot,ye,le,ue]),mt=ne.colorSchemeSelector;Mh(()=>{if(st&&I&&mt&&mt!=="media"){const At=mt;let _t=mt;if(At==="class"&&(_t=".%s"),At==="data"&&(_t="[data-%s]"),At!=null&&At.startsWith("data-")&&!At.includes("%s")&&(_t=`[${At}="%s"]`),_t.startsWith("."))I.classList.remove(...xe.map(Xt=>_t.substring(1).replace("%s",Xt))),I.classList.add(_t.substring(1).replace("%s",st));else{const Xt=_t.replace("%s",st).match(/\[([^\]]+)\]/);if(Xt){const[yt,Mt]=Xt[1].split("=");Mt||xe.forEach(an=>{I.removeAttribute(yt.replace(st,an))}),I.setAttribute(yt,Mt?Mt.replace(/"|'/g,""):"")}else I.setAttribute(_t,st)}}},[st,mt,I,xe]),F.useEffect(()=>{let At;if(R&&z.current&&N){const _t=N.createElement("style");_t.appendChild(N.createTextNode(rnt)),N.head.appendChild(_t),window.getComputedStyle(N.body),At=setTimeout(()=>{N.head.removeChild(_t)},1)}return()=>{clearTimeout(At)}},[st,R,N]),F.useEffect(()=>(z.current=!0,()=>{z.current=!1}),[]);const ce=F.useMemo(()=>({allColorSchemes:xe,colorScheme:st,darkColorScheme:Ue,lightColorScheme:Le,mode:lt,setColorScheme:je,setMode:dt,systemMode:pe}),[xe,st,Ue,Le,lt,je,dt,pe,Ut.colorSchemeSelector]);let re=!0;(P||ne.cssVariables===!1||Y&&(J==null?void 0:J.cssVarPrefix)===ue)&&(re=!1);const $e=V.jsxs(F.Fragment,{children:[V.jsx(aae,{themeId:te?e:void 0,theme:Ut,children:C}),re&&V.jsx(qse,{styles:((Ft=Ut.generateStyleSheets)==null?void 0:Ft.call(Ut))||[]})]});return Y?$e:V.jsx(c.Provider,{value:ce,children:$e})}const g=typeof a=="string"?a:a.light,v=typeof a=="string"?a:a.dark;return{CssVarsProvider:p,useColorScheme:u,getInitColorSchemeScript:x=>Ztt({colorSchemeStorageKey:i,defaultLightColorScheme:g,defaultDarkColorScheme:v,modeStorageKey:r,...x})}}function snt(n=""){function e(...r){if(!r.length)return"";const i=r[0];return typeof i=="string"&&!i.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${n?`${n}-`:""}${i}${e(...r.slice(1))})`:`, ${i}`}return(r,...i)=>`var(--${n?`${n}-`:""}${r}${e(...i)})`}const Aj=(n,e,t,r=[])=>{let i=n;e.forEach((s,a)=>{a===e.length-1?Array.isArray(i)?i[Number(s)]=t:i&&typeof i=="object"&&(i[s]=t):i&&typeof i=="object"&&(i[s]||(i[s]=r.includes(s)?[]:{}),i=i[s])})},ant=(n,e,t)=>{function r(i,s=[],a=[]){Object.entries(i).forEach(([o,l])=>{(!t||t&&!t([...s,o]))&&l!=null&&(typeof l=="object"&&Object.keys(l).length>0?r(l,[...s,o],Array.isArray(l)?[...a,o]:a):e([...s,o],l,a))})}r(n)},ont=(n,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>n.includes(r))||n[n.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function m$(n,e){const{prefix:t,shouldSkipGeneratingVar:r}=e||{},i={},s={},a={};return ant(n,(o,l,c)=>{if((typeof l=="string"||typeof l=="number")&&(!r||!r(o,l))){const u=`--${t?`${t}-`:""}${o.join("-")}`,d=ont(o,l);Object.assign(i,{[u]:d}),Aj(s,o,`var(${u})`,c),Aj(a,o,`var(${u}, ${d})`,c)}},o=>o[0]==="vars"),{css:i,vars:s,varsWithDefaults:a}}function lnt(n,e={}){const{getSelector:t=x,disableCssColorScheme:r,colorSchemeSelector:i,enableContrastVars:s}=e,{colorSchemes:a={},components:o,defaultColorScheme:l="light",...c}=n,{vars:u,css:d,varsWithDefaults:h}=m$(c,e);let p=h;const g={},{[l]:v,...b}=a;if(Object.entries(b||{}).forEach(([_,M])=>{const{vars:R,css:L,varsWithDefaults:$}=m$(M,e);p=io(p,$),g[_]={css:L,vars:R}}),v){const{css:_,vars:M,varsWithDefaults:R}=m$(v,e);p=io(p,R),g[l]={css:_,vars:M}}function x(_,M){var L,$;let R=i;if(i==="class"&&(R=".%s"),i==="data"&&(R="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(R=`[${i}="%s"]`),_){if(R==="media")return n.defaultColorScheme===_?":root":{[`@media (prefers-color-scheme: ${(($=(L=a[_])==null?void 0:L.palette)==null?void 0:$.mode)||_})`]:{":root":M}};if(R)return n.defaultColorScheme===_?`:root, ${R.replace("%s",String(_))}`:R.replace("%s",String(_))}return":root"}return{vars:p,generateThemeVars:()=>{let _={...u};return Object.entries(g).forEach(([,{vars:M}])=>{_=io(_,M)}),_},generateStyleSheets:()=>{var N,I;const _=[],M=n.defaultColorScheme||"light";function R(k,P){Object.keys(P).length&&_.push(typeof k=="string"?{[k]:{...P}}:k)}R(t(void 0,{...d}),d);const{[M]:L,...$}=g;if(L){const{css:k}=L,P=(I=(N=a[M])==null?void 0:N.palette)==null?void 0:I.mode,G=!r&&P?{colorScheme:P,...k}:{...k};R(t(M,{...G}),G)}return Object.entries($).forEach(([k,{css:P}])=>{var X,z;const G=(z=(X=a[k])==null?void 0:X.palette)==null?void 0:z.mode,W=!r&&G?{colorScheme:G,...P}:{...P};R(t(k,{...W}),W)}),s&&_.push({":root":{"--__l-threshold":"0.7","--__l":"clamp(0, (l / var(--__l-threshold) - 1) * -infinity, 1)","--__a":"clamp(0.87, (l / var(--__l-threshold) - 1) * -infinity, 1)"}}),_}}}function cnt(n){return function(t){return n==="media"?`@media (prefers-color-scheme: ${t})`:n?n.startsWith("data-")&&!n.includes("%s")?`[${n}="${t}"] &`:n==="class"?`.${t} &`:n==="data"?`[data-${t}] &`:`${n.replace("%s",t)} &`:"&"}}function Pr(n,e,t=void 0){const r={};for(const i in n){const s=n[i];let a="",o=!0;for(let l=0;l<s.length;l+=1){const c=s[l];c&&(a+=(o===!0?"":" ")+e(c),o=!1,t&&t[c]&&(a+=" "+t[c]))}r[i]=a}return r}function g$(n,e){var t,r,i;return F.isValidElement(n)&&e.indexOf(n.type.muiName??((i=(r=(t=n.type)==null?void 0:t._payload)==null?void 0:r.value)==null?void 0:i.muiName))!==-1}const unt=U3(),dnt=Ntt("div",{name:"MuiStack",slot:"Root"});function fnt(n){return Dtt({props:n,name:"MuiStack",defaultTheme:unt})}function hnt(n,e){const t=F.Children.toArray(n).filter(Boolean);return t.reduce((r,i,s)=>(r.push(i),s<t.length-1&&r.push(F.cloneElement(e,{key:`separator-${s}`})),r),[])}const pnt=n=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[n],mnt=({ownerState:n,theme:e})=>{let t={display:"flex",flexDirection:"column",...cf({theme:e},l$({values:n.direction,breakpoints:e.breakpoints.values}),r=>({flexDirection:r}))};if(n.spacing){const r=I3(e),i=Object.keys(e.breakpoints.values).reduce((l,c)=>((typeof n.spacing=="object"&&n.spacing[c]!=null||typeof n.direction=="object"&&n.direction[c]!=null)&&(l[c]=!0),l),{}),s=l$({values:n.direction,base:i}),a=l$({values:n.spacing,base:i});typeof s=="object"&&Object.keys(s).forEach((l,c,u)=>{if(!s[l]){const h=c>0?s[u[c-1]]:"column";s[l]=h}}),t=io(t,cf({theme:e},a,(l,c)=>n.useFlexGap?{gap:xv(r,l)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${pnt(c?s[c]:n.direction)}`]:xv(r,l)}}))}return t=EQe(e.breakpoints,t),t};function gnt(n={}){const{createStyledComponent:e=dnt,useThemeProps:t=fnt,componentName:r="MuiStack"}=n,i=()=>Pr({root:["root"]},l=>Fr(r,l),{}),s=e(mnt);return F.forwardRef(function(l,c){const u=t(l),d=W5(u),{component:h="div",direction:p="column",spacing:g=0,divider:v,children:b,className:x,useFlexGap:C=!1,...E}=d,_={direction:p,spacing:g,useFlexGap:C},M=i();return V.jsx(s,{as:h,ownerState:_,ref:c,className:Pn(M.root,x),...E,children:v?hnt(b,v):b})})}const h_={black:"#000",white:"#fff"},ynt={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},mx={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},gx={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},Hw={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},yx={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},vx={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},bx={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function lae(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:h_.white,default:h_.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const cae=lae();function uae(){return{text:{primary:h_.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:h_.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const IF=uae();function Tj(n,e,t,r){const i=r.light||r,s=r.dark||r*1.5;n[e]||(n.hasOwnProperty(t)?n[e]=n[t]:e==="light"?n.light=G3(n.main,i):e==="dark"&&(n.dark=V3(n.main,s)))}function Mj(n,e,t,r,i){const s=i.light||i,a=i.dark||i*1.5;e[t]||(e.hasOwnProperty(r)?e[t]=e[r]:t==="light"?e.light=`color-mix(in ${n}, ${e.main}, #fff ${(s*100).toFixed(0)}%)`:t==="dark"&&(e.dark=`color-mix(in ${n}, ${e.main}, #000 ${(a*100).toFixed(0)}%)`))}function vnt(n="light"){return n==="dark"?{main:yx[200],light:yx[50],dark:yx[400]}:{main:yx[700],light:yx[400],dark:yx[800]}}function bnt(n="light"){return n==="dark"?{main:mx[200],light:mx[50],dark:mx[400]}:{main:mx[500],light:mx[300],dark:mx[700]}}function xnt(n="light"){return n==="dark"?{main:gx[500],light:gx[300],dark:gx[700]}:{main:gx[700],light:gx[400],dark:gx[800]}}function Snt(n="light"){return n==="dark"?{main:vx[400],light:vx[300],dark:vx[700]}:{main:vx[700],light:vx[500],dark:vx[900]}}function wnt(n="light"){return n==="dark"?{main:bx[400],light:bx[300],dark:bx[700]}:{main:bx[800],light:bx[500],dark:bx[900]}}function Cnt(n="light"){return n==="dark"?{main:Hw[400],light:Hw[300],dark:Hw[700]}:{main:"#ed6c02",light:Hw[500],dark:Hw[900]}}function _nt(n){return`oklch(from ${n} var(--__l) 0 h / var(--__a))`}function s6(n){const{mode:e="light",contrastThreshold:t=3,tonalOffset:r=.2,colorSpace:i,...s}=n,a=n.primary||vnt(e),o=n.secondary||bnt(e),l=n.error||xnt(e),c=n.info||Snt(e),u=n.success||wnt(e),d=n.warning||Cnt(e);function h(b){return i?_nt(b):$tt(b,IF.text.primary)>=t?IF.text.primary:cae.text.primary}const p=({color:b,name:x,mainShade:C=500,lightShade:E=300,darkShade:_=700})=>{if(b={...b},!b.main&&b[C]&&(b.main=b[C]),!b.hasOwnProperty("main"))throw new Error(Gp(11,x?` (${x})`:"",C));if(typeof b.main!="string")throw new Error(Gp(12,x?` (${x})`:"",JSON.stringify(b.main)));return i?(Mj(i,b,"light",E,r),Mj(i,b,"dark",_,r)):(Tj(b,"light",E,r),Tj(b,"dark",_,r)),b.contrastText||(b.contrastText=h(b.main)),b};let g;return e==="light"?g=lae():e==="dark"&&(g=uae()),io({common:{...h_},mode:e,primary:p({color:a,name:"primary"}),secondary:p({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:p({color:l,name:"error"}),warning:p({color:d,name:"warning"}),info:p({color:c,name:"info"}),success:p({color:u,name:"success"}),grey:ynt,contrastThreshold:t,getContrastText:h,augmentColor:p,tonalOffset:r,...g},s)}function Ent(n){const e={};return Object.entries(n).forEach(r=>{const[i,s]=r;typeof s=="object"&&(e[i]=`${s.fontStyle?`${s.fontStyle} `:""}${s.fontVariant?`${s.fontVariant} `:""}${s.fontWeight?`${s.fontWeight} `:""}${s.fontStretch?`${s.fontStretch} `:""}${s.fontSize||""}${s.lineHeight?`/${s.lineHeight} `:""}${s.fontFamily||""}`)}),e}function Ant(n,e){return{toolbar:{minHeight:56,[n.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[n.up("sm")]:{minHeight:64}},...e}}function Tnt(n){return Math.round(n*1e5)/1e5}const Rj={textTransform:"uppercase"},Nj='"Roboto", "Helvetica", "Arial", sans-serif';function dae(n,e){const{fontFamily:t=Nj,fontSize:r=14,fontWeightLight:i=300,fontWeightRegular:s=400,fontWeightMedium:a=500,fontWeightBold:o=700,htmlFontSize:l=16,allVariants:c,pxToRem:u,...d}=typeof e=="function"?e(n):e,h=r/14,p=u||(b=>`${b/l*h}rem`),g=(b,x,C,E,_)=>({fontFamily:t,fontWeight:b,fontSize:p(x),lineHeight:C,...t===Nj?{letterSpacing:`${Tnt(E/x)}em`}:{},..._,...c}),v={h1:g(i,96,1.167,-1.5),h2:g(i,60,1.2,-.5),h3:g(s,48,1.167,0),h4:g(s,34,1.235,.25),h5:g(s,24,1.334,0),h6:g(a,20,1.6,.15),subtitle1:g(s,16,1.75,.15),subtitle2:g(a,14,1.57,.1),body1:g(s,16,1.5,.15),body2:g(s,14,1.43,.15),button:g(a,14,1.75,.4,Rj),caption:g(s,12,1.66,.4),overline:g(s,12,2.66,1,Rj),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return io({htmlFontSize:l,pxToRem:p,fontFamily:t,fontSize:r,fontWeightLight:i,fontWeightRegular:s,fontWeightMedium:a,fontWeightBold:o,...v},d,{clone:!1})}const Mnt=.2,Rnt=.14,Nnt=.12;function vs(...n){return[`${n[0]}px ${n[1]}px ${n[2]}px ${n[3]}px rgba(0,0,0,${Mnt})`,`${n[4]}px ${n[5]}px ${n[6]}px ${n[7]}px rgba(0,0,0,${Rnt})`,`${n[8]}px ${n[9]}px ${n[10]}px ${n[11]}px rgba(0,0,0,${Nnt})`].join(",")}const Int=["none",vs(0,2,1,-1,0,1,1,0,0,1,3,0),vs(0,3,1,-2,0,2,2,0,0,1,5,0),vs(0,3,3,-2,0,3,4,0,0,1,8,0),vs(0,2,4,-1,0,4,5,0,0,1,10,0),vs(0,3,5,-1,0,5,8,0,0,1,14,0),vs(0,3,5,-1,0,6,10,0,0,1,18,0),vs(0,4,5,-2,0,7,10,1,0,2,16,1),vs(0,5,5,-3,0,8,10,1,0,3,14,2),vs(0,5,6,-3,0,9,12,1,0,3,16,2),vs(0,6,6,-3,0,10,14,1,0,4,18,3),vs(0,6,7,-4,0,11,15,1,0,4,20,3),vs(0,7,8,-4,0,12,17,2,0,5,22,4),vs(0,7,8,-4,0,13,19,2,0,5,24,4),vs(0,7,9,-4,0,14,21,2,0,5,26,4),vs(0,8,9,-5,0,15,22,2,0,6,28,5),vs(0,8,10,-5,0,16,24,2,0,6,30,5),vs(0,8,11,-5,0,17,26,2,0,6,32,5),vs(0,9,11,-5,0,18,28,2,0,7,34,6),vs(0,9,12,-6,0,19,29,2,0,7,36,6),vs(0,10,13,-6,0,20,31,3,0,8,38,7),vs(0,10,13,-6,0,21,33,3,0,8,40,7),vs(0,10,14,-6,0,22,35,3,0,8,42,7),vs(0,11,14,-7,0,23,36,3,0,9,44,8),vs(0,11,15,-7,0,24,38,3,0,9,46,8)],Dnt={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},knt={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Ij(n){return`${Math.round(n)}ms`}function Ont(n){if(!n)return 0;const e=n/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function Bnt(n){const e={...Dnt,...n.easing},t={...knt,...n.duration};return{getAutoHeightDuration:Ont,create:(i=["all"],s={})=>{const{duration:a=t.standard,easing:o=e.easeInOut,delay:l=0,...c}=s;return(Array.isArray(i)?i:[i]).map(u=>`${u} ${typeof a=="string"?a:Ij(a)} ${o} ${typeof l=="string"?l:Ij(l)}`).join(",")},...n,easing:e,duration:t}}const $nt={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function Lnt(n){return oh(n)||typeof n>"u"||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||Array.isArray(n)}function fae(n={}){const e={...n};function t(r){const i=Object.entries(r);for(let s=0;s<i.length;s++){const[a,o]=i[s];!Lnt(o)||a.startsWith("unstable_")?delete r[a]:oh(o)&&(r[a]={...o},t(r[a]))}}return t(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function Dj(n){return typeof n=="number"?`${(n*100).toFixed(0)}%`:`calc((${n}) * 100%)`}const Fnt=n=>{if(!Number.isNaN(+n))return+n;const e=n.match(/\d*\.?\d+/g);if(!e)return 0;let t=0;for(let r=0;r<e.length;r+=1)t+=+e[r];return t};function Pnt(n){Object.assign(n,{alpha(e,t){const r=this||n;return r.colorSpace?`oklch(from ${e} l c h / ${typeof t=="string"?`calc(${t})`:t})`:r.vars?`rgba(${e.replace(/var\(--([^,\s)]+)(?:,[^)]+)?\)+/g,"var(--$1Channel)")} / ${typeof t=="string"?`calc(${t})`:t})`:ar(e,Fnt(t))},lighten(e,t){const r=this||n;return r.colorSpace?`color-mix(in ${r.colorSpace}, ${e}, #fff ${Dj(t)})`:G3(e,t)},darken(e,t){const r=this||n;return r.colorSpace?`color-mix(in ${r.colorSpace}, ${e}, #000 ${Dj(t)})`:V3(e,t)}})}function DF(n={},...e){const{breakpoints:t,mixins:r={},spacing:i,palette:s={},transitions:a={},typography:o={},shape:l,colorSpace:c,...u}=n;if(n.vars&&n.generateThemeVars===void 0)throw new Error(Gp(20));const d=s6({...s,colorSpace:c}),h=U3(n);let p=io(h,{mixins:Ant(h.breakpoints,r),palette:d,shadows:Int.slice(),typography:dae(d,o),transitions:Bnt(a),zIndex:{...$nt}});return p=io(p,u),p=e.reduce((g,v)=>io(g,v),p),p.unstable_sxConfig={...f2,...u==null?void 0:u.unstable_sxConfig},p.unstable_sx=function(v){return Bg({sx:v,theme:this})},p.toRuntimeSource=fae,Pnt(p),p}function kF(n){let e;return n<1?e=5.11916*n**2:e=4.5*Math.log(n+1)+2,Math.round(e*10)/1e3}const Unt=[...Array(25)].map((n,e)=>{if(e===0)return"none";const t=kF(e);return`linear-gradient(rgba(255 255 255 / ${t}), rgba(255 255 255 / ${t}))`});function hae(n){return{inputPlaceholder:n==="dark"?.5:.42,inputUnderline:n==="dark"?.7:.42,switchTrackDisabled:n==="dark"?.2:.12,switchTrack:n==="dark"?.3:.38}}function pae(n){return n==="dark"?Unt:[]}function znt(n){const{palette:e={mode:"light"},opacity:t,overlays:r,colorSpace:i,...s}=n,a=s6({...e,colorSpace:i});return{palette:a,opacity:{...hae(a.mode),...t},overlays:r||pae(a.mode),...s}}function Hnt(n){var e;return!!n[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!n[0].match(/sxConfig$/)||n[0]==="palette"&&!!((e=n[1])!=null&&e.match(/(mode|contrastThreshold|tonalOffset)/))}const Vnt=n=>[...[...Array(25)].map((e,t)=>`--${n?`${n}-`:""}overlays-${t}`),`--${n?`${n}-`:""}palette-AppBar-darkBg`,`--${n?`${n}-`:""}palette-AppBar-darkColor`],Gnt=n=>(e,t)=>{const r=n.rootSelector||":root",i=n.colorSchemeSelector;let s=i;if(i==="class"&&(s=".%s"),i==="data"&&(s="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(s=`[${i}="%s"]`),n.defaultColorScheme===e){if(e==="dark"){const a={};return Vnt(n.cssVarPrefix).forEach(o=>{a[o]=t[o],delete t[o]}),s==="media"?{[r]:t,"@media (prefers-color-scheme: dark)":{[r]:a}}:s?{[s.replace("%s",e)]:a,[`${r}, ${s.replace("%s",e)}`]:t}:{[r]:{...t,...a}}}if(s&&s!=="media")return`${r}, ${s.replace("%s",String(e))}`}else if(e){if(s==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{[r]:t}};if(s)return s.replace("%s",String(e))}return r};function Wnt(n,e){e.forEach(t=>{n[t]||(n[t]={})})}function Rt(n,e,t){!n[e]&&t&&(n[e]=t)}function aC(n){return typeof n!="string"||!n.startsWith("hsl")?n:nae(n)}function gp(n,e){`${e}Channel`in n||(n[`${e}Channel`]=sC(aC(n[e])))}function jnt(n){return typeof n=="number"?`${n}px`:typeof n=="string"||typeof n=="function"||Array.isArray(n)?n:"8px"}const Jf=n=>{try{return n()}catch{}},qnt=(n="mui")=>snt(n);function y$(n,e,t,r,i){if(!t)return;t=t===!0?{}:t;const s=i==="dark"?"dark":"light";if(!r){e[i]=znt({...t,palette:{mode:s,...t==null?void 0:t.palette},colorSpace:n});return}const{palette:a,...o}=DF({...r,palette:{mode:s,...t==null?void 0:t.palette},colorSpace:n});return e[i]={...t,palette:a,opacity:{...hae(s),...t==null?void 0:t.opacity},overlays:(t==null?void 0:t.overlays)||pae(s)},o}function Xnt(n={},...e){const{colorSchemes:t={light:!0},defaultColorScheme:r,disableCssColorScheme:i=!1,cssVarPrefix:s="mui",nativeColor:a=!1,shouldSkipGeneratingVar:o=Hnt,colorSchemeSelector:l=t.light&&t.dark?"media":void 0,rootSelector:c=":root",...u}=n,d=Object.keys(t)[0],h=r||(t.light&&d!=="light"?"light":d),p=qnt(s),{[h]:g,light:v,dark:b,...x}=t,C={...x};let E=g;if((h==="dark"&&!("dark"in t)||h==="light"&&!("light"in t))&&(E=!0),!E)throw new Error(Gp(21,h));let _;a&&(_="oklch");const M=y$(_,C,E,u,h);v&&!C.light&&y$(_,C,v,void 0,"light"),b&&!C.dark&&y$(_,C,b,void 0,"dark");let R={defaultColorScheme:h,...M,cssVarPrefix:s,colorSchemeSelector:l,rootSelector:c,getCssVar:p,colorSchemes:C,font:{...Ent(M.typography),...M.font},spacing:jnt(u.spacing)};Object.keys(R.colorSchemes).forEach(k=>{const P=R.colorSchemes[k].palette,G=X=>{const z=X.split("-"),J=z[1],Q=z[2];return p(X,P[J][Q])};P.mode==="light"&&(Rt(P.common,"background","#fff"),Rt(P.common,"onBackground","#000")),P.mode==="dark"&&(Rt(P.common,"background","#000"),Rt(P.common,"onBackground","#fff"));function W(X,z,J){if(_){let Q;return X===dy&&(Q=`transparent ${((1-J)*100).toFixed(0)}%`),X===Oi&&(Q=`#000 ${(J*100).toFixed(0)}%`),X===Bi&&(Q=`#fff ${(J*100).toFixed(0)}%`),`color-mix(in ${_}, ${z}, ${Q})`}return X(z,J)}if(Wnt(P,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),P.mode==="light"){Rt(P.Alert,"errorColor",W(Oi,P.error.light,.6)),Rt(P.Alert,"infoColor",W(Oi,P.info.light,.6)),Rt(P.Alert,"successColor",W(Oi,P.success.light,.6)),Rt(P.Alert,"warningColor",W(Oi,P.warning.light,.6)),Rt(P.Alert,"errorFilledBg",G("palette-error-main")),Rt(P.Alert,"infoFilledBg",G("palette-info-main")),Rt(P.Alert,"successFilledBg",G("palette-success-main")),Rt(P.Alert,"warningFilledBg",G("palette-warning-main")),Rt(P.Alert,"errorFilledColor",Jf(()=>P.getContrastText(P.error.main))),Rt(P.Alert,"infoFilledColor",Jf(()=>P.getContrastText(P.info.main))),Rt(P.Alert,"successFilledColor",Jf(()=>P.getContrastText(P.success.main))),Rt(P.Alert,"warningFilledColor",Jf(()=>P.getContrastText(P.warning.main))),Rt(P.Alert,"errorStandardBg",W(Bi,P.error.light,.9)),Rt(P.Alert,"infoStandardBg",W(Bi,P.info.light,.9)),Rt(P.Alert,"successStandardBg",W(Bi,P.success.light,.9)),Rt(P.Alert,"warningStandardBg",W(Bi,P.warning.light,.9)),Rt(P.Alert,"errorIconColor",G("palette-error-main")),Rt(P.Alert,"infoIconColor",G("palette-info-main")),Rt(P.Alert,"successIconColor",G("palette-success-main")),Rt(P.Alert,"warningIconColor",G("palette-warning-main")),Rt(P.AppBar,"defaultBg",G("palette-grey-100")),Rt(P.Avatar,"defaultBg",G("palette-grey-400")),Rt(P.Button,"inheritContainedBg",G("palette-grey-300")),Rt(P.Button,"inheritContainedHoverBg",G("palette-grey-A100")),Rt(P.Chip,"defaultBorder",G("palette-grey-400")),Rt(P.Chip,"defaultAvatarColor",G("palette-grey-700")),Rt(P.Chip,"defaultIconColor",G("palette-grey-700")),Rt(P.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),Rt(P.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),Rt(P.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),Rt(P.LinearProgress,"primaryBg",W(Bi,P.primary.main,.62)),Rt(P.LinearProgress,"secondaryBg",W(Bi,P.secondary.main,.62)),Rt(P.LinearProgress,"errorBg",W(Bi,P.error.main,.62)),Rt(P.LinearProgress,"infoBg",W(Bi,P.info.main,.62)),Rt(P.LinearProgress,"successBg",W(Bi,P.success.main,.62)),Rt(P.LinearProgress,"warningBg",W(Bi,P.warning.main,.62)),Rt(P.Skeleton,"bg",_?W(dy,P.text.primary,.11):`rgba(${G("palette-text-primaryChannel")} / 0.11)`),Rt(P.Slider,"primaryTrack",W(Bi,P.primary.main,.62)),Rt(P.Slider,"secondaryTrack",W(Bi,P.secondary.main,.62)),Rt(P.Slider,"errorTrack",W(Bi,P.error.main,.62)),Rt(P.Slider,"infoTrack",W(Bi,P.info.main,.62)),Rt(P.Slider,"successTrack",W(Bi,P.success.main,.62)),Rt(P.Slider,"warningTrack",W(Bi,P.warning.main,.62));const X=_?W(Oi,P.background.default,.6825):iM(P.background.default,.8);Rt(P.SnackbarContent,"bg",X),Rt(P.SnackbarContent,"color",Jf(()=>_?IF.text.primary:P.getContrastText(X))),Rt(P.SpeedDialAction,"fabHoverBg",iM(P.background.paper,.15)),Rt(P.StepConnector,"border",G("palette-grey-400")),Rt(P.StepContent,"border",G("palette-grey-400")),Rt(P.Switch,"defaultColor",G("palette-common-white")),Rt(P.Switch,"defaultDisabledColor",G("palette-grey-100")),Rt(P.Switch,"primaryDisabledColor",W(Bi,P.primary.main,.62)),Rt(P.Switch,"secondaryDisabledColor",W(Bi,P.secondary.main,.62)),Rt(P.Switch,"errorDisabledColor",W(Bi,P.error.main,.62)),Rt(P.Switch,"infoDisabledColor",W(Bi,P.info.main,.62)),Rt(P.Switch,"successDisabledColor",W(Bi,P.success.main,.62)),Rt(P.Switch,"warningDisabledColor",W(Bi,P.warning.main,.62)),Rt(P.TableCell,"border",W(Bi,W(dy,P.divider,1),.88)),Rt(P.Tooltip,"bg",W(dy,P.grey[700],.92))}if(P.mode==="dark"){Rt(P.Alert,"errorColor",W(Bi,P.error.light,.6)),Rt(P.Alert,"infoColor",W(Bi,P.info.light,.6)),Rt(P.Alert,"successColor",W(Bi,P.success.light,.6)),Rt(P.Alert,"warningColor",W(Bi,P.warning.light,.6)),Rt(P.Alert,"errorFilledBg",G("palette-error-dark")),Rt(P.Alert,"infoFilledBg",G("palette-info-dark")),Rt(P.Alert,"successFilledBg",G("palette-success-dark")),Rt(P.Alert,"warningFilledBg",G("palette-warning-dark")),Rt(P.Alert,"errorFilledColor",Jf(()=>P.getContrastText(P.error.dark))),Rt(P.Alert,"infoFilledColor",Jf(()=>P.getContrastText(P.info.dark))),Rt(P.Alert,"successFilledColor",Jf(()=>P.getContrastText(P.success.dark))),Rt(P.Alert,"warningFilledColor",Jf(()=>P.getContrastText(P.warning.dark))),Rt(P.Alert,"errorStandardBg",W(Oi,P.error.light,.9)),Rt(P.Alert,"infoStandardBg",W(Oi,P.info.light,.9)),Rt(P.Alert,"successStandardBg",W(Oi,P.success.light,.9)),Rt(P.Alert,"warningStandardBg",W(Oi,P.warning.light,.9)),Rt(P.Alert,"errorIconColor",G("palette-error-main")),Rt(P.Alert,"infoIconColor",G("palette-info-main")),Rt(P.Alert,"successIconColor",G("palette-success-main")),Rt(P.Alert,"warningIconColor",G("palette-warning-main")),Rt(P.AppBar,"defaultBg",G("palette-grey-900")),Rt(P.AppBar,"darkBg",G("palette-background-paper")),Rt(P.AppBar,"darkColor",G("palette-text-primary")),Rt(P.Avatar,"defaultBg",G("palette-grey-600")),Rt(P.Button,"inheritContainedBg",G("palette-grey-800")),Rt(P.Button,"inheritContainedHoverBg",G("palette-grey-700")),Rt(P.Chip,"defaultBorder",G("palette-grey-700")),Rt(P.Chip,"defaultAvatarColor",G("palette-grey-300")),Rt(P.Chip,"defaultIconColor",G("palette-grey-300")),Rt(P.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),Rt(P.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),Rt(P.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),Rt(P.LinearProgress,"primaryBg",W(Oi,P.primary.main,.5)),Rt(P.LinearProgress,"secondaryBg",W(Oi,P.secondary.main,.5)),Rt(P.LinearProgress,"errorBg",W(Oi,P.error.main,.5)),Rt(P.LinearProgress,"infoBg",W(Oi,P.info.main,.5)),Rt(P.LinearProgress,"successBg",W(Oi,P.success.main,.5)),Rt(P.LinearProgress,"warningBg",W(Oi,P.warning.main,.5)),Rt(P.Skeleton,"bg",_?W(dy,P.text.primary,.13):`rgba(${G("palette-text-primaryChannel")} / 0.13)`),Rt(P.Slider,"primaryTrack",W(Oi,P.primary.main,.5)),Rt(P.Slider,"secondaryTrack",W(Oi,P.secondary.main,.5)),Rt(P.Slider,"errorTrack",W(Oi,P.error.main,.5)),Rt(P.Slider,"infoTrack",W(Oi,P.info.main,.5)),Rt(P.Slider,"successTrack",W(Oi,P.success.main,.5)),Rt(P.Slider,"warningTrack",W(Oi,P.warning.main,.5));const X=_?W(Bi,P.background.default,.985):iM(P.background.default,.98);Rt(P.SnackbarContent,"bg",X),Rt(P.SnackbarContent,"color",Jf(()=>_?cae.text.primary:P.getContrastText(X))),Rt(P.SpeedDialAction,"fabHoverBg",iM(P.background.paper,.15)),Rt(P.StepConnector,"border",G("palette-grey-600")),Rt(P.StepContent,"border",G("palette-grey-600")),Rt(P.Switch,"defaultColor",G("palette-grey-300")),Rt(P.Switch,"defaultDisabledColor",G("palette-grey-600")),Rt(P.Switch,"primaryDisabledColor",W(Oi,P.primary.main,.55)),Rt(P.Switch,"secondaryDisabledColor",W(Oi,P.secondary.main,.55)),Rt(P.Switch,"errorDisabledColor",W(Oi,P.error.main,.55)),Rt(P.Switch,"infoDisabledColor",W(Oi,P.info.main,.55)),Rt(P.Switch,"successDisabledColor",W(Oi,P.success.main,.55)),Rt(P.Switch,"warningDisabledColor",W(Oi,P.warning.main,.55)),Rt(P.TableCell,"border",W(Oi,W(dy,P.divider,1),.68)),Rt(P.Tooltip,"bg",W(dy,P.grey[700],.92))}gp(P.background,"default"),gp(P.background,"paper"),gp(P.common,"background"),gp(P.common,"onBackground"),gp(P,"divider"),Object.keys(P).forEach(X=>{const z=P[X];X!=="tonalOffset"&&z&&typeof z=="object"&&(z.main&&Rt(P[X],"mainChannel",sC(aC(z.main))),z.light&&Rt(P[X],"lightChannel",sC(aC(z.light))),z.dark&&Rt(P[X],"darkChannel",sC(aC(z.dark))),z.contrastText&&Rt(P[X],"contrastTextChannel",sC(aC(z.contrastText))),X==="text"&&(gp(P[X],"primary"),gp(P[X],"secondary")),X==="action"&&(z.active&&gp(P[X],"active"),z.selected&&gp(P[X],"selected")))})}),R=e.reduce((k,P)=>io(k,P),R);const L={prefix:s,disableCssColorScheme:i,shouldSkipGeneratingVar:o,getSelector:Gnt(R),enableContrastVars:a},{vars:$,generateThemeVars:N,generateStyleSheets:I}=lnt(R,L);return R.vars=$,Object.entries(R.colorSchemes[R.defaultColorScheme]).forEach(([k,P])=>{R[k]=P}),R.generateThemeVars=N,R.generateStyleSheets=I,R.generateSpacing=function(){return Kse(u.spacing,I3(this))},R.getColorSchemeSelector=cnt(l),R.spacing=R.generateSpacing(),R.shouldSkipGeneratingVar=o,R.unstable_sxConfig={...f2,...u==null?void 0:u.unstable_sxConfig},R.unstable_sx=function(P){return Bg({sx:P,theme:this})},R.toRuntimeSource=fae,R}function kj(n,e,t){n.colorSchemes&&t&&(n.colorSchemes[e]={...t!==!0&&t,palette:s6({...t===!0?{}:t.palette,mode:e})})}function y2(n={},...e){const{palette:t,cssVariables:r=!1,colorSchemes:i=t?void 0:{light:!0},defaultColorScheme:s=t==null?void 0:t.mode,...a}=n,o=s||"light",l=i==null?void 0:i[o],c={...i,...t?{[o]:{...typeof l!="boolean"&&l,palette:t}}:void 0};if(r===!1){if(!("colorSchemes"in n))return DF(n,...e);let u=t;"palette"in n||c[o]&&(c[o]!==!0?u=c[o].palette:o==="dark"&&(u={mode:"dark"}));const d=DF({...n,palette:u},...e);return d.defaultColorScheme=o,d.colorSchemes=c,d.palette.mode==="light"&&(d.colorSchemes.light={...c.light!==!0&&c.light,palette:d.palette},kj(d,"dark",c.dark)),d.palette.mode==="dark"&&(d.colorSchemes.dark={...c.dark!==!0&&c.dark,palette:d.palette},kj(d,"light",c.light)),d}return!t&&!("light"in c)&&o==="light"&&(c.light=!0),Xnt({...a,colorSchemes:c,defaultColorScheme:o,...typeof r!="boolean"&&r},...e)}const a6=y2(),yh="$$material";function v2(){const n=z3(a6);return n[yh]||n}function Knt(n){return V.jsx(Yse,{...n,defaultTheme:a6,themeId:yh})}function mae(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}const Gl=n=>mae(n)&&n!=="classes",on=tae({themeId:yh,defaultTheme:a6,rootShouldForwardProp:Gl});function o6(n){return function(t){return V.jsx(Knt,{styles:typeof n=="function"?r=>n({theme:r,...t}):n})}}function Ynt(){return W5}function Gr(n){return jtt(n)}const OF=typeof o6({})=="function",Jnt=(n,e)=>({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%",...e&&!n.vars&&{colorScheme:n.palette.mode}}),Znt=n=>({color:(n.vars||n).palette.text.primary,...n.typography.body1,backgroundColor:(n.vars||n).palette.background.default,"@media print":{backgroundColor:(n.vars||n).palette.common.white}}),gae=(n,e=!1)=>{var s,a;const t={};e&&n.colorSchemes&&typeof n.getColorSchemeSelector=="function"&&Object.entries(n.colorSchemes).forEach(([o,l])=>{var u,d;const c=n.getColorSchemeSelector(o);c.startsWith("@")?t[c]={":root":{colorScheme:(u=l.palette)==null?void 0:u.mode}}:t[c.replace(/\s*&/,"")]={colorScheme:(d=l.palette)==null?void 0:d.mode}});let r={html:Jnt(n,e),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:n.typography.fontWeightBold},body:{margin:0,...Znt(n),"&::backdrop":{backgroundColor:(n.vars||n).palette.background.default}},...t};const i=(a=(s=n.components)==null?void 0:s.MuiCssBaseline)==null?void 0:a.styleOverrides;return i&&(r=[r,i]),r},BM="mui-ecs",Qnt=n=>{const e=gae(n,!1),t=Array.isArray(e)?e[0]:e;return!n.vars&&t&&(t.html[`:root:has(${BM})`]={colorScheme:n.palette.mode}),n.colorSchemes&&Object.entries(n.colorSchemes).forEach(([r,i])=>{var a,o;const s=n.getColorSchemeSelector(r);s.startsWith("@")?t[s]={[`:root:not(:has(.${BM}))`]:{colorScheme:(a=i.palette)==null?void 0:a.mode}}:t[s.replace(/\s*&/,"")]={[`&:not(:has(.${BM}))`]:{colorScheme:(o=i.palette)==null?void 0:o.mode}}}),e},ert=o6(OF?({theme:n,enableColorScheme:e})=>gae(n,e):({theme:n})=>Qnt(n));function yae(n){const e=Gr({props:n,name:"MuiCssBaseline"}),{children:t,enableColorScheme:r=!1}=e;return V.jsxs(F.Fragment,{children:[OF&&V.jsx(ert,{enableColorScheme:r}),!OF&&!r&&V.jsx("span",{className:BM,style:{display:"none"}}),t]})}const Wx=gnt({createStyledComponent:on("div",{name:"MuiStack",slot:"Root"}),useThemeProps:n=>Gr({props:n,name:"MuiStack"})});function trt({theme:n,...e}){const t=yh in n?n[yh]:void 0;return V.jsx(aae,{...e,themeId:t?yh:void 0,theme:t||n})}const sM={colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},{CssVarsProvider:nrt,useColorScheme:rrt}=int({themeId:yh,theme:()=>y2({cssVariables:!0}),colorSchemeStorageKey:sM.colorSchemeStorageKey,modeStorageKey:sM.modeStorageKey,defaultColorScheme:{light:sM.defaultLightColorScheme,dark:sM.defaultDarkColorScheme},resolveTheme:n=>{const e={...n,typography:dae(n.palette,n.typography)};return e.unstable_sx=function(r){return Bg({sx:r,theme:this})},e}}),irt=nrt;function srt({theme:n,...e}){const t=F.useMemo(()=>{if(typeof n=="function")return n;const r=yh in n?n[yh]:n;return"colorSchemes"in r?null:"vars"in r?n:{...n,vars:null}},[n]);return t?V.jsx(trt,{theme:t,...e}):V.jsx(irt,{theme:n,...e})}const li=Ytt;var Oj;const art=on("fieldset",{name:"MuiNotchedOutlined",shouldForwardProp:Gl})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),ort=on("legend",{name:"MuiNotchedOutlined",shouldForwardProp:Gl})(li(({theme:n})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:e})=>!e.withLabel,style:{padding:0,lineHeight:"11px",transition:n.transitions.create("width",{duration:150,easing:n.transitions.easing.easeOut})}},{props:({ownerState:e})=>e.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:n.transitions.create("max-width",{duration:50,easing:n.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:e})=>e.withLabel&&e.notched,style:{maxWidth:"100%",transition:n.transitions.create("max-width",{duration:100,easing:n.transitions.easing.easeOut,delay:50})}}]})));function lrt(n){const{children:e,classes:t,className:r,label:i,notched:s,...a}=n,o=i!=null&&i!=="",l={...n,notched:s,withLabel:o};return V.jsx(art,{"aria-hidden":!0,className:r,ownerState:l,...a,children:V.jsx(ort,{ownerState:l,children:o?V.jsx("span",{children:i}):Oj||(Oj=V.jsx("span",{className:"notranslate","aria-hidden":!0,children:""}))})})}const l6=F.createContext(void 0);function e0(){return F.useContext(l6)}function Lv({props:n,states:e,muiFormControl:t}){return e.reduce((r,i)=>(r[i]=n[i],t&&typeof n[i]>"u"&&(r[i]=t[i]),r),{})}function crt(n){return typeof n.main=="string"}function urt(n,e=[]){if(!crt(n))return!1;for(const t of e)if(!n.hasOwnProperty(t)||typeof n[t]!="string")return!1;return!0}function Fl(n=[]){return([,e])=>e&&urt(e,n)}function DN(n){return typeof n=="string"}function vae(n,e=166){let t;function r(...i){const s=()=>{n.apply(this,i)};clearTimeout(t),t=setTimeout(s,e)}return r.clear=()=>{clearTimeout(t)},r}function Vl(...n){const e=F.useRef(void 0),t=F.useCallback(r=>{const i=n.map(s=>{if(s==null)return null;if(typeof s=="function"){const a=s,o=a(r);return typeof o=="function"?o:()=>{a(null)}}return s.current=r,()=>{s.current=null}});return()=>{i.forEach(s=>s==null?void 0:s())}},n);return F.useMemo(()=>n.every(r=>r==null)?null:r=>{e.current&&(e.current(),e.current=void 0),r!=null&&(e.current=t(r))},n)}function Xy(n){const e=F.useRef(n);return Mh(()=>{e.current=n}),F.useRef((...t)=>(0,e.current)(...t)).current}function uf(n){return n&&n.ownerDocument||document}function Wp(n){return uf(n).defaultView||window}function aM(n){return parseInt(n,10)||0}const drt={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function frt(n){for(const e in n)return!1;return!0}function Bj(n){return frt(n)||n.outerHeightStyle===0&&!n.overflowing}const hrt=F.forwardRef(function(e,t){const{onChange:r,maxRows:i,minRows:s=1,style:a,value:o,...l}=e,{current:c}=F.useRef(o!=null),u=F.useRef(null),d=Vl(t,u),h=F.useRef(null),p=F.useRef(null),g=F.useCallback(()=>{const E=u.current,_=p.current;if(!E||!_)return;const R=Wp(E).getComputedStyle(E);if(R.width==="0px")return{outerHeightStyle:0,overflowing:!1};_.style.width=R.width,_.value=E.value||e.placeholder||"x",_.value.slice(-1)===`
`&&(_.value+=" ");const L=R.boxSizing,$=aM(R.paddingBottom)+aM(R.paddingTop),N=aM(R.borderBottomWidth)+aM(R.borderTopWidth),I=_.scrollHeight;_.value="x";const k=_.scrollHeight;let P=I;s&&(P=Math.max(Number(s)*k,P)),i&&(P=Math.min(Number(i)*k,P)),P=Math.max(P,k);const G=P+(L==="border-box"?$+N:0),W=Math.abs(P-I)<=1;return{outerHeightStyle:G,overflowing:W}},[i,s,e.placeholder]),v=Xy(()=>{const E=u.current,_=g();if(!E||!_||Bj(_))return!1;const M=_.outerHeightStyle;return h.current!=null&&h.current!==M}),b=F.useCallback(()=>{const E=u.current,_=g();if(!E||!_||Bj(_))return;const M=_.outerHeightStyle;h.current!==M&&(h.current=M,E.style.height=`${M}px`),E.style.overflow=_.overflowing?"hidden":""},[g]),x=F.useRef(-1);Mh(()=>{const E=vae(b),_=u==null?void 0:u.current;if(!_)return;const M=Wp(_);M.addEventListener("resize",E);let R;return typeof ResizeObserver<"u"&&(R=new ResizeObserver(()=>{v()&&(R.unobserve(_),cancelAnimationFrame(x.current),b(),x.current=requestAnimationFrame(()=>{R.observe(_)}))}),R.observe(_)),()=>{E.clear(),cancelAnimationFrame(x.current),M.removeEventListener("resize",E),R&&R.disconnect()}},[g,b,v]),Mh(()=>{b()});const C=E=>{c||b();const _=E.target,M=_.value.length,R=_.value.endsWith(`
`),L=_.selectionStart===M;R&&L&&_.setSelectionRange(M,M),r&&r(E)};return V.jsxs(F.Fragment,{children:[V.jsx("textarea",{value:o,onChange:C,ref:d,rows:s,style:a,...l}),V.jsx("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:p,tabIndex:-1,style:{...drt.shadow,...a,paddingTop:0,paddingBottom:0}})]})});function $j(n){return n!=null&&!(Array.isArray(n)&&n.length===0)}function kN(n,e=!1){return n&&($j(n.value)&&n.value!==""||e&&$j(n.defaultValue)&&n.defaultValue!=="")}function prt(n){return n.startAdornment}function mrt(n){return Fr("MuiInputBase",n)}const C1=yr("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var Lj;const W3=(n,e)=>{const{ownerState:t}=n;return[e.root,t.formControl&&e.formControl,t.startAdornment&&e.adornedStart,t.endAdornment&&e.adornedEnd,t.error&&e.error,t.size==="small"&&e.sizeSmall,t.multiline&&e.multiline,t.color&&e[`color${Rn(t.color)}`],t.fullWidth&&e.fullWidth,t.hiddenLabel&&e.hiddenLabel]},j3=(n,e)=>{const{ownerState:t}=n;return[e.input,t.size==="small"&&e.inputSizeSmall,t.multiline&&e.inputMultiline,t.type==="search"&&e.inputTypeSearch,t.startAdornment&&e.inputAdornedStart,t.endAdornment&&e.inputAdornedEnd,t.hiddenLabel&&e.inputHiddenLabel]},grt=n=>{const{classes:e,color:t,disabled:r,error:i,endAdornment:s,focused:a,formControl:o,fullWidth:l,hiddenLabel:c,multiline:u,readOnly:d,size:h,startAdornment:p,type:g}=n,v={root:["root",`color${Rn(t)}`,r&&"disabled",i&&"error",l&&"fullWidth",a&&"focused",o&&"formControl",h&&h!=="medium"&&`size${Rn(h)}`,u&&"multiline",p&&"adornedStart",s&&"adornedEnd",c&&"hiddenLabel",d&&"readOnly"],input:["input",r&&"disabled",g==="search"&&"inputTypeSearch",u&&"inputMultiline",h==="small"&&"inputSizeSmall",c&&"inputHiddenLabel",p&&"inputAdornedStart",s&&"inputAdornedEnd",d&&"readOnly"]};return Pr(v,mrt,e)},q3=on("div",{name:"MuiInputBase",slot:"Root",overridesResolver:W3})(li(({theme:n})=>({...n.typography.body1,color:(n.vars||n).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${C1.disabled}`]:{color:(n.vars||n).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:e})=>e.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:e,size:t})=>e.multiline&&t==="small",style:{paddingTop:1}},{props:({ownerState:e})=>e.fullWidth,style:{width:"100%"}}]}))),X3=on("input",{name:"MuiInputBase",slot:"Input",overridesResolver:j3})(li(({theme:n})=>{const e=n.palette.mode==="light",t={color:"currentColor",...n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:e?.42:.5},transition:n.transitions.create("opacity",{duration:n.transitions.duration.shorter})},r={opacity:"0 !important"},i=n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:e?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":t,"&::-moz-placeholder":t,"&::-ms-input-placeholder":t,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${C1.formControl} &`]:{"&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&::-ms-input-placeholder":r,"&:focus::-webkit-input-placeholder":i,"&:focus::-moz-placeholder":i,"&:focus::-ms-input-placeholder":i},[`&.${C1.disabled}`]:{opacity:1,WebkitTextFillColor:(n.vars||n).palette.text.disabled},variants:[{props:({ownerState:s})=>!s.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:s})=>s.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),Fj=o6({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),c6=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiInputBase"}),{"aria-describedby":i,autoComplete:s,autoFocus:a,className:o,color:l,components:c={},componentsProps:u={},defaultValue:d,disabled:h,disableInjectingGlobalStyles:p,endAdornment:g,error:v,fullWidth:b=!1,id:x,inputComponent:C="input",inputProps:E={},inputRef:_,margin:M,maxRows:R,minRows:L,multiline:$=!1,name:N,onBlur:I,onChange:k,onClick:P,onFocus:G,onKeyDown:W,onKeyUp:X,placeholder:z,readOnly:J,renderSuffix:Q,rows:Y,size:q,slotProps:te={},slots:ne={},startAdornment:le,type:ye="text",value:ue,...ve}=r,xe=E.value!=null?E.value:ue,{current:Pe}=F.useRef(xe!=null),ze=F.useRef(),Ke=F.useCallback(_t=>{},[]),pt=Vl(ze,_,E.ref,Ke),[dt,pe]=F.useState(!1),Le=e0(),Ue=Lv({props:r,muiFormControl:Le,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Ue.focused=Le?Le.focused:dt,F.useEffect(()=>{!Le&&h&&dt&&(pe(!1),I&&I())},[Le,h,dt,I]);const Ze=Le&&Le.onFilled,je=Le&&Le.onEmpty,lt=F.useCallback(_t=>{kN(_t)?Ze&&Ze():je&&je()},[Ze,je]);Mh(()=>{Pe&&lt({value:xe})},[xe,lt,Pe]);const st=_t=>{G&&G(_t),E.onFocus&&E.onFocus(_t),Le&&Le.onFocus?Le.onFocus(_t):pe(!0)},ot=_t=>{I&&I(_t),E.onBlur&&E.onBlur(_t),Le&&Le.onBlur?Le.onBlur(_t):pe(!1)},Ut=(_t,...Xt)=>{if(!Pe){const yt=_t.target||ze.current;if(yt==null)throw new Error(Gp(1));lt({value:yt.value})}E.onChange&&E.onChange(_t,...Xt),k&&k(_t,...Xt)};F.useEffect(()=>{lt(ze.current)},[]);const mt=_t=>{ze.current&&_t.currentTarget===_t.target&&ze.current.focus(),P&&P(_t)};let ce=C,re=E;$&&ce==="input"&&(Y?re={type:void 0,minRows:Y,maxRows:Y,...re}:re={type:void 0,maxRows:R,minRows:L,...re},ce=hrt);const $e=_t=>{lt(_t.animationName==="mui-auto-fill-cancel"?ze.current:{value:"x"})};F.useEffect(()=>{Le&&Le.setAdornedStart(!!le)},[Le,le]);const Xe={...r,color:Ue.color||"primary",disabled:Ue.disabled,endAdornment:g,error:Ue.error,focused:Ue.focused,formControl:Le,fullWidth:b,hiddenLabel:Ue.hiddenLabel,multiline:$,size:Ue.size,startAdornment:le,type:ye},at=grt(Xe),et=ne.root||c.Root||q3,Ft=te.root||u.root||{},At=ne.input||c.Input||X3;return re={...re,...te.input??u.input},V.jsxs(F.Fragment,{children:[!p&&typeof Fj=="function"&&(Lj||(Lj=V.jsx(Fj,{}))),V.jsxs(et,{...Ft,ref:t,onClick:mt,...ve,...!DN(et)&&{ownerState:{...Xe,...Ft.ownerState}},className:Pn(at.root,Ft.className,o,J&&"MuiInputBase-readOnly"),children:[le,V.jsx(l6.Provider,{value:null,children:V.jsx(At,{"aria-invalid":Ue.error,"aria-describedby":i,autoComplete:s,autoFocus:a,defaultValue:d,disabled:Ue.disabled,id:x,onAnimationStart:$e,name:N,placeholder:z,readOnly:J,required:Ue.required,rows:Y,value:xe,onKeyDown:W,onKeyUp:X,type:ye,...re,...!DN(At)&&{as:ce,ownerState:{...Xe,...re.ownerState}},ref:pt,className:Pn(at.input,re.className,J&&"MuiInputBase-readOnly"),onBlur:ot,onChange:Ut,onFocus:st})}),g,Q?Q({...Ue,startAdornment:le}):null]})]})});function yrt(n){return Fr("MuiOutlinedInput",n)}const Ud={...C1,...yr("MuiOutlinedInput",["root","notchedOutline","input"])};function bae(n,e,t){return n===void 0||DN(n)?e:{...e,ownerState:{...e.ownerState,...t}}}function xae(n,e,t){return typeof n=="function"?n(e,t):n}function Sae(n,e=[]){if(n===void 0)return{};const t={};return Object.keys(n).filter(r=>r.match(/^on[A-Z]/)&&typeof n[r]=="function"&&!e.includes(r)).forEach(r=>{t[r]=n[r]}),t}function Pj(n){if(n===void 0)return{};const e={};return Object.keys(n).filter(t=>!(t.match(/^on[A-Z]/)&&typeof n[t]=="function")).forEach(t=>{e[t]=n[t]}),e}function wae(n){const{getSlotProps:e,additionalProps:t,externalSlotProps:r,externalForwardedProps:i,className:s}=n;if(!e){const p=Pn(t==null?void 0:t.className,s,i==null?void 0:i.className,r==null?void 0:r.className),g={...t==null?void 0:t.style,...i==null?void 0:i.style,...r==null?void 0:r.style},v={...t,...i,...r};return p.length>0&&(v.className=p),Object.keys(g).length>0&&(v.style=g),{props:v,internalRef:void 0}}const a=Sae({...i,...r}),o=Pj(r),l=Pj(i),c=e(a),u=Pn(c==null?void 0:c.className,t==null?void 0:t.className,s,i==null?void 0:i.className,r==null?void 0:r.className),d={...c==null?void 0:c.style,...t==null?void 0:t.style,...i==null?void 0:i.style,...r==null?void 0:r.style},h={...c,...t,...l,...o};return u.length>0&&(h.className=u),Object.keys(d).length>0&&(h.style=d),{props:h,internalRef:c.ref}}function xi(n,e){const{className:t,elementType:r,ownerState:i,externalForwardedProps:s,internalForwardedProps:a,shouldForwardComponentProp:o=!1,...l}=e,{component:c,slots:u={[n]:void 0},slotProps:d={[n]:void 0},...h}=s,p=u[n]||r,g=xae(d[n],i),{props:{component:v,...b},internalRef:x}=wae({className:t,...l,externalForwardedProps:n==="root"?h:void 0,externalSlotProps:g}),C=Vl(x,g==null?void 0:g.ref,e.ref),E=n==="root"?v||c:v,_=bae(p,{...n==="root"&&!c&&!u[n]&&a,...n!=="root"&&!u[n]&&a,...b,...E&&!o&&{as:E},...E&&o&&{component:E},ref:C},i);return[p,_]}const vrt=n=>{const{classes:e}=n,r=Pr({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},yrt,e);return{...e,...r}},brt=on(q3,{shouldForwardProp:n=>Gl(n)||n==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:W3})(li(({theme:n})=>{const e=n.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(n.vars||n).shape.borderRadius,[`&:hover .${Ud.notchedOutline}`]:{borderColor:(n.vars||n).palette.text.primary},"@media (hover: none)":{[`&:hover .${Ud.notchedOutline}`]:{borderColor:n.vars?n.alpha(n.vars.palette.common.onBackground,.23):e}},[`&.${Ud.focused} .${Ud.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(n.palette).filter(Fl()).map(([t])=>({props:{color:t},style:{[`&.${Ud.focused} .${Ud.notchedOutline}`]:{borderColor:(n.vars||n).palette[t].main}}})),{props:{},style:{[`&.${Ud.error} .${Ud.notchedOutline}`]:{borderColor:(n.vars||n).palette.error.main},[`&.${Ud.disabled} .${Ud.notchedOutline}`]:{borderColor:(n.vars||n).palette.action.disabled}}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:14}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:14}},{props:({ownerState:t})=>t.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:t,size:r})=>t.multiline&&r==="small",style:{padding:"8.5px 14px"}}]}})),xrt=on(lrt,{name:"MuiOutlinedInput",slot:"NotchedOutline"})(li(({theme:n})=>{const e=n.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:n.vars?n.alpha(n.vars.palette.common.onBackground,.23):e}})),Srt=on(X3,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:j3})(li(({theme:n})=>({padding:"16.5px 14px",...!n.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:n.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:n.palette.mode==="light"?null:"#fff",caretColor:n.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...n.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[n.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:e})=>e.multiline,style:{padding:0}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:0}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:0}}]}))),K3=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiOutlinedInput"}),{components:i={},fullWidth:s=!1,inputComponent:a="input",label:o,multiline:l=!1,notched:c,slots:u={},slotProps:d={},type:h="text",...p}=r,g=vrt(r),v=e0(),b=Lv({props:r,muiFormControl:v,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),x={...r,color:b.color||"primary",disabled:b.disabled,error:b.error,focused:b.focused,formControl:v,fullWidth:s,hiddenLabel:b.hiddenLabel,multiline:l,size:b.size,type:h},C=u.root??i.Root??brt,E=u.input??i.Input??Srt,[_,M]=xi("notchedOutline",{elementType:xrt,className:g.notchedOutline,shouldForwardComponentProp:!0,ownerState:x,externalForwardedProps:{slots:u,slotProps:d},additionalProps:{label:o!=null&&o!==""&&b.required?V.jsxs(F.Fragment,{children:[o,"","*"]}):o}});return V.jsx(c6,{slots:{root:C,input:E},slotProps:d,renderSuffix:R=>V.jsx(_,{...M,notched:typeof c<"u"?c:!!(R.startAdornment||R.filled||R.focused)}),fullWidth:s,inputComponent:a,multiline:l,ref:t,type:h,...p,classes:{...g,notchedOutline:null}})});K3.muiName="Input";function wrt(n){return Fr("MuiSvgIcon",n)}const $M=yr("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]),Crt=n=>{const{color:e,fontSize:t,classes:r}=n,i={root:["root",e!=="inherit"&&`color${Rn(e)}`,`fontSize${Rn(t)}`]};return Pr(i,wrt,r)},_rt=on("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.color!=="inherit"&&e[`color${Rn(t.color)}`],e[`fontSize${Rn(t.fontSize)}`]]}})(li(({theme:n})=>{var e,t,r,i,s,a,o,l,c,u,d,h,p,g;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(i=(e=n.transitions)==null?void 0:e.create)==null?void 0:i.call(e,"fill",{duration:(r=(t=(n.vars??n).transitions)==null?void 0:t.duration)==null?void 0:r.shorter}),variants:[{props:v=>!v.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((a=(s=n.typography)==null?void 0:s.pxToRem)==null?void 0:a.call(s,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((l=(o=n.typography)==null?void 0:o.pxToRem)==null?void 0:l.call(o,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((u=(c=n.typography)==null?void 0:c.pxToRem)==null?void 0:u.call(c,35))||"2.1875rem"}},...Object.entries((n.vars??n).palette).filter(([,v])=>v&&v.main).map(([v])=>{var b,x;return{props:{color:v},style:{color:(x=(b=(n.vars??n).palette)==null?void 0:b[v])==null?void 0:x.main}}}),{props:{color:"action"},style:{color:(h=(d=(n.vars??n).palette)==null?void 0:d.action)==null?void 0:h.active}},{props:{color:"disabled"},style:{color:(g=(p=(n.vars??n).palette)==null?void 0:p.action)==null?void 0:g.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),jp=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiSvgIcon"}),{children:i,className:s,color:a="inherit",component:o="svg",fontSize:l="medium",htmlColor:c,inheritViewBox:u=!1,titleAccess:d,viewBox:h="0 0 24 24",...p}=r,g=F.isValidElement(i)&&i.type==="svg",v={...r,color:a,component:o,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:u,viewBox:h,hasSvgAsChild:g},b={};u||(b.viewBox=h);const x=Crt(v);return V.jsxs(_rt,{as:o,className:Pn(x.root,s),focusable:"false",color:c,"aria-hidden":d?void 0:!0,role:d?"img":void 0,ref:t,...b,...p,...g&&i.props,ownerState:v,children:[g?i.props.children:i,d?V.jsx("title",{children:d}):null]})});jp.muiName="SvgIcon";const Uj=yr("MuiToggleButtonGroup",["root","selected","horizontal","vertical","disabled","grouped","groupedHorizontal","groupedVertical","fullWidth","firstButton","lastButton","middleButton"]),Ert=yr("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge","fullWidth"]);function ON(n){try{return n.matches(":focus-visible")}catch{}return!1}const zj={};function Cae(n,e){const t=F.useRef(zj);return t.current===zj&&(t.current=n(e)),t}class BN{constructor(){cw(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new BN}static use(){const e=Cae(BN.create).current,[t,r]=F.useState(!1);return e.shouldMount=t,e.setShouldMount=r,F.useEffect(e.mountEffect,[t]),e}mount(){return this.mounted||(this.mounted=Trt(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...e){this.mount().then(()=>{var t;return(t=this.ref.current)==null?void 0:t.start(...e)})}stop(...e){this.mount().then(()=>{var t;return(t=this.ref.current)==null?void 0:t.stop(...e)})}pulsate(...e){this.mount().then(()=>{var t;return(t=this.ref.current)==null?void 0:t.pulsate(...e)})}}function Art(){return BN.use()}function Trt(){let n,e;const t=new Promise((r,i)=>{n=r,e=i});return t.resolve=n,t.reject=e,t}function _ae(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function BF(n,e){return BF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},BF(n,e)}function Eae(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,BF(n,e)}const Hj={disabled:!1},$N=Ne.createContext(null);var Mrt=function(e){return e.scrollTop},oC="unmounted",vy="exited",by="entering",Ex="entered",$F="exiting",kh=function(n){Eae(e,n);function e(r,i){var s;s=n.call(this,r,i)||this;var a=i,o=a&&!a.isMounting?r.enter:r.appear,l;return s.appearStatus=null,r.in?o?(l=vy,s.appearStatus=by):l=Ex:r.unmountOnExit||r.mountOnEnter?l=oC:l=vy,s.state={status:l},s.nextCallback=null,s}e.getDerivedStateFromProps=function(i,s){var a=i.in;return a&&s.status===oC?{status:vy}:null};var t=e.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(i){var s=null;if(i!==this.props){var a=this.state.status;this.props.in?a!==by&&a!==Ex&&(s=by):(a===by||a===Ex)&&(s=$F)}this.updateStatus(!1,s)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var i=this.props.timeout,s,a,o;return s=a=o=i,i!=null&&typeof i!="number"&&(s=i.exit,a=i.enter,o=i.appear!==void 0?i.appear:a),{exit:s,enter:a,appear:o}},t.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===by){if(this.props.unmountOnExit||this.props.mountOnEnter){var a=this.props.nodeRef?this.props.nodeRef.current:Kw.findDOMNode(this);a&&Mrt(a)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===vy&&this.setState({status:oC})},t.performEnter=function(i){var s=this,a=this.props.enter,o=this.context?this.context.isMounting:i,l=this.props.nodeRef?[o]:[Kw.findDOMNode(this),o],c=l[0],u=l[1],d=this.getTimeouts(),h=o?d.appear:d.enter;if(!i&&!a||Hj.disabled){this.safeSetState({status:Ex},function(){s.props.onEntered(c)});return}this.props.onEnter(c,u),this.safeSetState({status:by},function(){s.props.onEntering(c,u),s.onTransitionEnd(h,function(){s.safeSetState({status:Ex},function(){s.props.onEntered(c,u)})})})},t.performExit=function(){var i=this,s=this.props.exit,a=this.getTimeouts(),o=this.props.nodeRef?void 0:Kw.findDOMNode(this);if(!s||Hj.disabled){this.safeSetState({status:vy},function(){i.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:$F},function(){i.props.onExiting(o),i.onTransitionEnd(a.exit,function(){i.safeSetState({status:vy},function(){i.props.onExited(o)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},t.setNextCallback=function(i){var s=this,a=!0;return this.nextCallback=function(o){a&&(a=!1,s.nextCallback=null,i(o))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},t.onTransitionEnd=function(i,s){this.setNextCallback(s);var a=this.props.nodeRef?this.props.nodeRef.current:Kw.findDOMNode(this),o=i==null&&!this.props.addEndListener;if(!a||o){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[a,this.nextCallback],c=l[0],u=l[1];this.props.addEndListener(c,u)}i!=null&&setTimeout(this.nextCallback,i)},t.render=function(){var i=this.state.status;if(i===oC)return null;var s=this.props,a=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var o=_ae(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Ne.createElement($N.Provider,{value:null},typeof a=="function"?a(i,o):Ne.cloneElement(Ne.Children.only(a),o))},e}(Ne.Component);kh.contextType=$N;kh.propTypes={};function xx(){}kh.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:xx,onEntering:xx,onEntered:xx,onExit:xx,onExiting:xx,onExited:xx};kh.UNMOUNTED=oC;kh.EXITED=vy;kh.ENTERING=by;kh.ENTERED=Ex;kh.EXITING=$F;function Rrt(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function u6(n,e){var t=function(s){return e&&F.isValidElement(s)?e(s):s},r=Object.create(null);return n&&F.Children.map(n,function(i){return i}).forEach(function(i){r[i.key]=t(i)}),r}function Nrt(n,e){n=n||{},e=e||{};function t(u){return u in e?e[u]:n[u]}var r=Object.create(null),i=[];for(var s in n)s in e?i.length&&(r[s]=i,i=[]):i.push(s);var a,o={};for(var l in e){if(r[l])for(a=0;a<r[l].length;a++){var c=r[l][a];o[r[l][a]]=t(c)}o[l]=t(l)}for(a=0;a<i.length;a++)o[i[a]]=t(i[a]);return o}function Ly(n,e,t){return t[e]!=null?t[e]:n.props[e]}function Irt(n,e){return u6(n.children,function(t){return F.cloneElement(t,{onExited:e.bind(null,t),in:!0,appear:Ly(t,"appear",n),enter:Ly(t,"enter",n),exit:Ly(t,"exit",n)})})}function Drt(n,e,t){var r=u6(n.children),i=Nrt(e,r);return Object.keys(i).forEach(function(s){var a=i[s];if(F.isValidElement(a)){var o=s in e,l=s in r,c=e[s],u=F.isValidElement(c)&&!c.props.in;l&&(!o||u)?i[s]=F.cloneElement(a,{onExited:t.bind(null,a),in:!0,exit:Ly(a,"exit",n),enter:Ly(a,"enter",n)}):!l&&o&&!u?i[s]=F.cloneElement(a,{in:!1}):l&&o&&F.isValidElement(c)&&(i[s]=F.cloneElement(a,{onExited:t.bind(null,a),in:c.props.in,exit:Ly(a,"exit",n),enter:Ly(a,"enter",n)}))}}),i}var krt=Object.values||function(n){return Object.keys(n).map(function(e){return n[e]})},Ort={component:"div",childFactory:function(e){return e}},d6=function(n){Eae(e,n);function e(r,i){var s;s=n.call(this,r,i)||this;var a=s.handleExited.bind(Rrt(s));return s.state={contextValue:{isMounting:!0},handleExited:a,firstRender:!0},s}var t=e.prototype;return t.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},t.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(i,s){var a=s.children,o=s.handleExited,l=s.firstRender;return{children:l?Irt(i,o):Drt(i,a,o),firstRender:!1}},t.handleExited=function(i,s){var a=u6(this.props.children);i.key in a||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(o){var l=ss({},o.children);return delete l[i.key],{children:l}}))},t.render=function(){var i=this.props,s=i.component,a=i.childFactory,o=_ae(i,["component","childFactory"]),l=this.state.contextValue,c=krt(this.state.children).map(a);return delete o.appear,delete o.enter,delete o.exit,s===null?Ne.createElement($N.Provider,{value:l},c):Ne.createElement($N.Provider,{value:l},Ne.createElement(s,o,c))},e}(Ne.Component);d6.propTypes={};d6.defaultProps=Ort;const Brt=[];function $rt(n){F.useEffect(n,Brt)}class f6{constructor(){cw(this,"currentId",null);cw(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});cw(this,"disposeEffect",()=>this.clear)}static create(){return new f6}start(e,t){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,t()},e)}}function Aae(){const n=Cae(f6.create).current;return $rt(n.disposeEffect),n}function Lrt(n){const{className:e,classes:t,pulsate:r=!1,rippleX:i,rippleY:s,rippleSize:a,in:o,onExited:l,timeout:c}=n,[u,d]=F.useState(!1),h=Pn(e,t.ripple,t.rippleVisible,r&&t.ripplePulsate),p={width:a,height:a,top:-(a/2)+s,left:-(a/2)+i},g=Pn(t.child,u&&t.childLeaving,r&&t.childPulsate);return!o&&!u&&d(!0),F.useEffect(()=>{if(!o&&l!=null){const v=setTimeout(l,c);return()=>{clearTimeout(v)}}},[l,o,c]),V.jsx("span",{className:h,style:p,children:V.jsx("span",{className:g})})}const Du=yr("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),LF=550,Frt=80,Prt=g2`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,Urt=g2`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,zrt=g2`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,Hrt=on("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Vrt=on(Lrt,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${Du.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${Prt};
    animation-duration: ${LF}ms;
    animation-timing-function: ${({theme:n})=>n.transitions.easing.easeInOut};
  }

  &.${Du.ripplePulsate} {
    animation-duration: ${({theme:n})=>n.transitions.duration.shorter}ms;
  }

  & .${Du.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${Du.childLeaving} {
    opacity: 0;
    animation-name: ${Urt};
    animation-duration: ${LF}ms;
    animation-timing-function: ${({theme:n})=>n.transitions.easing.easeInOut};
  }

  & .${Du.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${zrt};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:n})=>n.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,Grt=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:s={},className:a,...o}=r,[l,c]=F.useState([]),u=F.useRef(0),d=F.useRef(null);F.useEffect(()=>{d.current&&(d.current(),d.current=null)},[l]);const h=F.useRef(!1),p=Aae(),g=F.useRef(null),v=F.useRef(null),b=F.useCallback(_=>{const{pulsate:M,rippleX:R,rippleY:L,rippleSize:$,cb:N}=_;c(I=>[...I,V.jsx(Vrt,{classes:{ripple:Pn(s.ripple,Du.ripple),rippleVisible:Pn(s.rippleVisible,Du.rippleVisible),ripplePulsate:Pn(s.ripplePulsate,Du.ripplePulsate),child:Pn(s.child,Du.child),childLeaving:Pn(s.childLeaving,Du.childLeaving),childPulsate:Pn(s.childPulsate,Du.childPulsate)},timeout:LF,pulsate:M,rippleX:R,rippleY:L,rippleSize:$},u.current)]),u.current+=1,d.current=N},[s]),x=F.useCallback((_={},M={},R=()=>{})=>{const{pulsate:L=!1,center:$=i||M.pulsate,fakeElement:N=!1}=M;if((_==null?void 0:_.type)==="mousedown"&&h.current){h.current=!1;return}(_==null?void 0:_.type)==="touchstart"&&(h.current=!0);const I=N?null:v.current,k=I?I.getBoundingClientRect():{width:0,height:0,left:0,top:0};let P,G,W;if($||_===void 0||_.clientX===0&&_.clientY===0||!_.clientX&&!_.touches)P=Math.round(k.width/2),G=Math.round(k.height/2);else{const{clientX:X,clientY:z}=_.touches&&_.touches.length>0?_.touches[0]:_;P=Math.round(X-k.left),G=Math.round(z-k.top)}if($)W=Math.sqrt((2*k.width**2+k.height**2)/3),W%2===0&&(W+=1);else{const X=Math.max(Math.abs((I?I.clientWidth:0)-P),P)*2+2,z=Math.max(Math.abs((I?I.clientHeight:0)-G),G)*2+2;W=Math.sqrt(X**2+z**2)}_!=null&&_.touches?g.current===null&&(g.current=()=>{b({pulsate:L,rippleX:P,rippleY:G,rippleSize:W,cb:R})},p.start(Frt,()=>{g.current&&(g.current(),g.current=null)})):b({pulsate:L,rippleX:P,rippleY:G,rippleSize:W,cb:R})},[i,b,p]),C=F.useCallback(()=>{x({},{pulsate:!0})},[x]),E=F.useCallback((_,M)=>{if(p.clear(),(_==null?void 0:_.type)==="touchend"&&g.current){g.current(),g.current=null,p.start(0,()=>{E(_,M)});return}g.current=null,c(R=>R.length>0?R.slice(1):R),d.current=M},[p]);return F.useImperativeHandle(t,()=>({pulsate:C,start:x,stop:E}),[C,x,E]),V.jsx(Hrt,{className:Pn(Du.root,s.root,a),ref:v,...o,children:V.jsx(d6,{component:null,exit:!0,children:l})})});function Wrt(n){return Fr("MuiButtonBase",n)}const h6=yr("MuiButtonBase",["root","disabled","focusVisible"]),jrt=n=>{const{disabled:e,focusVisible:t,focusVisibleClassName:r,classes:i}=n,a=Pr({root:["root",e&&"disabled",t&&"focusVisible"]},Wrt,i);return t&&r&&(a.root+=` ${r}`),a},qrt=on("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${h6.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Y3=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:s=!1,children:a,className:o,component:l="button",disabled:c=!1,disableRipple:u=!1,disableTouchRipple:d=!1,focusRipple:h=!1,focusVisibleClassName:p,LinkComponent:g="a",onBlur:v,onClick:b,onContextMenu:x,onDragLeave:C,onFocus:E,onFocusVisible:_,onKeyDown:M,onKeyUp:R,onMouseDown:L,onMouseLeave:$,onMouseUp:N,onTouchEnd:I,onTouchMove:k,onTouchStart:P,tabIndex:G=0,TouchRippleProps:W,touchRippleRef:X,type:z,...J}=r,Q=F.useRef(null),Y=Art(),q=Vl(Y.ref,X),[te,ne]=F.useState(!1);c&&te&&ne(!1),F.useImperativeHandle(i,()=>({focusVisible:()=>{ne(!0),Q.current.focus()}}),[]);const le=Y.shouldMount&&!u&&!c;F.useEffect(()=>{te&&h&&!u&&Y.pulsate()},[u,h,te,Y]);const ye=yp(Y,"start",L,d),ue=yp(Y,"stop",x,d),ve=yp(Y,"stop",C,d),xe=yp(Y,"stop",N,d),Pe=yp(Y,"stop",mt=>{te&&mt.preventDefault(),$&&$(mt)},d),ze=yp(Y,"start",P,d),Ke=yp(Y,"stop",I,d),pt=yp(Y,"stop",k,d),dt=yp(Y,"stop",mt=>{ON(mt.target)||ne(!1),v&&v(mt)},!1),pe=Xy(mt=>{Q.current||(Q.current=mt.currentTarget),ON(mt.target)&&(ne(!0),_&&_(mt)),E&&E(mt)}),Le=()=>{const mt=Q.current;return l&&l!=="button"&&!(mt.tagName==="A"&&mt.href)},Ue=Xy(mt=>{h&&!mt.repeat&&te&&mt.key===" "&&Y.stop(mt,()=>{Y.start(mt)}),mt.target===mt.currentTarget&&Le()&&mt.key===" "&&mt.preventDefault(),M&&M(mt),mt.target===mt.currentTarget&&Le()&&mt.key==="Enter"&&!c&&(mt.preventDefault(),b&&b(mt))}),Ze=Xy(mt=>{h&&mt.key===" "&&te&&!mt.defaultPrevented&&Y.stop(mt,()=>{Y.pulsate(mt)}),R&&R(mt),b&&mt.target===mt.currentTarget&&Le()&&mt.key===" "&&!mt.defaultPrevented&&b(mt)});let je=l;je==="button"&&(J.href||J.to)&&(je=g);const lt={};je==="button"?(lt.type=z===void 0?"button":z,lt.disabled=c):(!J.href&&!J.to&&(lt.role="button"),c&&(lt["aria-disabled"]=c));const st=Vl(t,Q),ot={...r,centerRipple:s,component:l,disabled:c,disableRipple:u,disableTouchRipple:d,focusRipple:h,tabIndex:G,focusVisible:te},Ut=jrt(ot);return V.jsxs(qrt,{as:je,className:Pn(Ut.root,o),ownerState:ot,onBlur:dt,onClick:b,onContextMenu:ue,onFocus:pe,onKeyDown:Ue,onKeyUp:Ze,onMouseDown:ye,onMouseLeave:Pe,onMouseUp:xe,onDragLeave:ve,onTouchEnd:Ke,onTouchMove:pt,onTouchStart:ze,ref:st,tabIndex:c?-1:G,type:z,...lt,...J,children:[a,le?V.jsx(Grt,{ref:q,center:s,...W}):null]})});function yp(n,e,t,r=!1){return Xy(i=>(t&&t(i),r||n[e](i),!0))}function Vj(...n){return n.reduce((e,t)=>t==null?e:function(...i){e.apply(this,i),t.apply(this,i)},()=>{})}function Bo(n,e){function t(r,i){return V.jsx(jp,{"data-testid":void 0,ref:i,...r,children:n})}return t.muiName=jp.muiName,F.memo(F.forwardRef(t))}function Gj(n,e){typeof n=="function"?n(e):n&&(n.current=e)}function FF(n){const{controlled:e,default:t,name:r,state:i="value"}=n,{current:s}=F.useRef(e!==void 0),[a,o]=F.useState(t),l=s?e:a,c=F.useCallback(u=>{s||o(u)},[]);return[l,c]}function Xrt(n,e){const t=n.charCodeAt(2);return n[0]==="o"&&n[1]==="n"&&t>=65&&t<=90&&typeof e=="function"}function Tae(n,e){if(!n)return e;function t(a,o){const l={};return Object.keys(o).forEach(c=>{Xrt(c,o[c])&&typeof a[c]=="function"&&(l[c]=(...u)=>{a[c](...u),o[c](...u)})}),l}if(typeof n=="function"||typeof e=="function")return a=>{const o=typeof e=="function"?e(a):e,l=typeof n=="function"?n({...a,...o}):n,c=Pn(a==null?void 0:a.className,o==null?void 0:o.className,l==null?void 0:l.className),u=t(l,o);return{...o,...l,...u,...!!c&&{className:c},...(o==null?void 0:o.style)&&(l==null?void 0:l.style)&&{style:{...o.style,...l.style}},...(o==null?void 0:o.sx)&&(l==null?void 0:l.sx)&&{sx:[...Array.isArray(o.sx)?o.sx:[o.sx],...Array.isArray(l.sx)?l.sx:[l.sx]]}}};const r=e,i=t(n,r),s=Pn(r==null?void 0:r.className,n==null?void 0:n.className);return{...e,...n,...i,...!!s&&{className:s},...(r==null?void 0:r.style)&&(n==null?void 0:n.style)&&{style:{...r.style,...n.style}},...(r==null?void 0:r.sx)&&(n==null?void 0:n.sx)&&{sx:[...Array.isArray(r.sx)?r.sx:[r.sx],...Array.isArray(n.sx)?n.sx:[n.sx]]}}}const Krt=Bo(V.jsx("path",{d:"M18 19H6c-.55 0-1-.45-1-1V6c0-.55.45-1 1-1h12c.55 0 1 .45 1 1v12c0 .55-.45 1-1 1m1-16H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"})),Yrt=Bo(V.jsx("path",{d:"M9 16.17 5.53 12.7a.996.996 0 0 0-1.41 0c-.39.39-.39 1.02 0 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71c.39-.39.39-1.02 0-1.41a.996.996 0 0 0-1.41 0z"})),Jrt=Bo(V.jsx("path",{d:"M18 13H6c-.55 0-1-.45-1-1s.45-1 1-1h12c.55 0 1 .45 1 1s-.45 1-1 1"})),Xc=y2();[...Xc.shadows];const Ln={50:"hsl(210, 100%, 95%)",100:"hsl(210, 100%, 92%)",200:"hsl(210, 100%, 80%)",300:"hsl(210, 100%, 65%)",400:"hsl(210, 98%, 48%)",500:"hsl(210, 98%, 42%)",600:"hsl(210, 98%, 55%)",700:"hsl(210, 100%, 35%)",900:"hsl(210, 100%, 21%)"},Yt={50:"hsl(220, 35%, 97%)",100:"hsl(220, 30%, 94%)",200:"hsl(220, 20%, 88%)",300:"hsl(220, 20%, 80%)",400:"hsl(220, 20%, 65%)",500:"hsl(220, 20%, 42%)",600:"hsl(220, 20%, 35%)",700:"hsl(220, 20%, 25%)",800:"hsl(220, 30%, 6%)",900:"hsl(220, 35%, 3%)"},fc={50:"hsl(120, 80%, 98%)",200:"hsl(120, 75%, 87%)",300:"hsl(120, 61%, 77%)",400:"hsl(120, 44%, 53%)",500:"hsl(120, 59%, 30%)",700:"hsl(120, 75%, 16%)",800:"hsl(120, 84%, 10%)",900:"hsl(120, 87%, 6%)"},ku={100:"hsl(45, 92%, 90%)",300:"hsl(45, 90%, 65%)",400:"hsl(45, 90%, 40%)",500:"hsl(45, 90%, 35%)",700:"hsl(45, 94%, 20%)",800:"hsl(45, 95%, 16%)",900:"hsl(45, 93%, 12%)"},hc={50:"hsl(0, 100%, 97%)",100:"hsl(0, 92%, 90%)",200:"hsl(0, 94%, 80%)",300:"hsl(0, 90%, 65%)",400:"hsl(0, 90%, 40%)",500:"hsl(0, 90%, 30%)",700:"hsl(0, 94%, 18%)",800:"hsl(0, 95%, 12%)",900:"hsl(0, 93%, 6%)"},Zrt={light:{palette:{primary:{light:Ln[200],main:Ln[400],dark:Ln[700],contrastText:Ln[50]},info:{light:Ln[100],main:Ln[300],dark:Ln[600],contrastText:Yt[50]},warning:{light:ku[300],main:ku[400],dark:ku[800]},error:{light:hc[300],main:hc[400],dark:hc[800]},success:{light:fc[300],main:fc[400],dark:fc[800]},grey:{...Yt},divider:ar(Yt[300],.4),background:{default:"hsl(0, 0%, 99%)",paper:"hsl(220, 35%, 97%)"},text:{primary:Yt[800],secondary:Yt[600],warning:ku[400]},action:{hover:ar(Yt[200],.2),selected:`${ar(Yt[200],.3)}`},baseShadow:"hsla(220, 30%, 5%, 0.07) 0px 4px 16px 0px, hsla(220, 25%, 10%, 0.07) 0px 8px 16px -5px"}},dark:{palette:{primary:{contrastText:Ln[50],light:Ln[300],main:Ln[400],dark:Ln[700]},info:{contrastText:Ln[300],light:Ln[500],main:Ln[700],dark:Ln[900]},warning:{light:ku[400],main:ku[500],dark:ku[700]},error:{light:hc[400],main:hc[500],dark:hc[700]},success:{light:fc[400],main:fc[500],dark:fc[700]},grey:{...Yt},divider:ar(Yt[700],.6),background:{default:Yt[900],paper:"hsl(220, 30%, 7%)"},text:{primary:"hsl(0, 0%, 100%)",secondary:Yt[400]},action:{hover:ar(Yt[600],.2),selected:ar(Yt[600],.3)},baseShadow:"hsla(220, 30%, 5%, 0.7) 0px 4px 16px 0px, hsla(220, 25%, 10%, 0.8) 0px 8px 16px -5px"}}},Qrt={fontFamily:"Inter, sans-serif",h1:{fontSize:Xc.typography.pxToRem(48),fontWeight:600,lineHeight:1.2,letterSpacing:-.5},h2:{fontSize:Xc.typography.pxToRem(36),fontWeight:600,lineHeight:1.2},h3:{fontSize:Xc.typography.pxToRem(30),lineHeight:1.2},h4:{fontSize:Xc.typography.pxToRem(24),fontWeight:600,lineHeight:1.5},h5:{fontSize:Xc.typography.pxToRem(20),fontWeight:600},h6:{fontSize:Xc.typography.pxToRem(18),fontWeight:600},subtitle1:{fontSize:Xc.typography.pxToRem(18)},subtitle2:{fontSize:Xc.typography.pxToRem(14),fontWeight:500},body1:{fontSize:Xc.typography.pxToRem(14)},body2:{fontSize:Xc.typography.pxToRem(14),fontWeight:400},caption:{fontSize:Xc.typography.pxToRem(12),fontWeight:400}},eit={borderRadius:8},tit=["none","var(--template-palette-baseShadow)",...Xc.shadows.slice(2)],nit=tit,rit={MuiButtonBase:{defaultProps:{disableTouchRipple:!0,disableRipple:!0},styleOverrides:{root:({theme:n})=>({boxSizing:"border-box",transition:"all 100ms ease-in","&:focus-visible":{outline:`3px solid ${ar(n.palette.primary.main,.5)}`,outlineOffset:"2px"}})}},MuiButton:{styleOverrides:{root:({theme:n})=>({boxShadow:"none",borderRadius:(n.vars||n).shape.borderRadius,textTransform:"none",variants:[{props:{size:"small"},style:{height:"2.25rem",padding:"8px 12px"}},{props:{size:"medium"},style:{height:"2.5rem"}},{props:{color:"primary",variant:"contained"},style:{color:"white",backgroundColor:Yt[900],backgroundImage:`linear-gradient(to bottom, ${Yt[700]}, ${Yt[800]})`,boxShadow:`inset 0 1px 0 ${Yt[600]}, inset 0 -1px 0 1px hsl(220, 0%, 0%)`,border:`1px solid ${Yt[700]}`,"&:hover":{backgroundImage:"none",backgroundColor:Yt[700],boxShadow:"none"},"&:active":{backgroundColor:Yt[800]},...n.applyStyles("dark",{color:"black",backgroundColor:Yt[50],backgroundImage:`linear-gradient(to bottom, ${Yt[100]}, ${Yt[50]})`,boxShadow:"inset 0 -1px 0  hsl(220, 30%, 80%)",border:`1px solid ${Yt[50]}`,"&:hover":{backgroundImage:"none",backgroundColor:Yt[300],boxShadow:"none"},"&:active":{backgroundColor:Yt[400]}})}},{props:{color:"secondary",variant:"contained"},style:{color:"white",backgroundColor:Ln[300],backgroundImage:`linear-gradient(to bottom, ${ar(Ln[400],.8)}, ${Ln[500]})`,boxShadow:`inset 0 2px 0 ${ar(Ln[200],.2)}, inset 0 -2px 0 ${ar(Ln[700],.4)}`,border:`1px solid ${Ln[500]}`,"&:hover":{backgroundColor:Ln[700],boxShadow:"none"},"&:active":{backgroundColor:Ln[700],backgroundImage:"none"}}},{props:{variant:"outlined"},style:{color:(n.vars||n).palette.text.primary,border:"1px solid",borderColor:Yt[200],backgroundColor:ar(Yt[50],.3),"&:hover":{backgroundColor:Yt[100],borderColor:Yt[300]},"&:active":{backgroundColor:Yt[200]},...n.applyStyles("dark",{backgroundColor:Yt[800],borderColor:Yt[700],"&:hover":{backgroundColor:Yt[900],borderColor:Yt[600]},"&:active":{backgroundColor:Yt[900]}})}},{props:{color:"secondary",variant:"outlined"},style:{color:Ln[700],border:"1px solid",borderColor:Ln[200],backgroundColor:Ln[50],"&:hover":{backgroundColor:Ln[100],borderColor:Ln[400]},"&:active":{backgroundColor:ar(Ln[200],.7)},...n.applyStyles("dark",{color:Ln[50],border:"1px solid",borderColor:Ln[900],backgroundColor:ar(Ln[900],.3),"&:hover":{borderColor:Ln[700],backgroundColor:ar(Ln[900],.6)},"&:active":{backgroundColor:ar(Ln[900],.5)}})}},{props:{variant:"text"},style:{color:Yt[600],"&:hover":{backgroundColor:Yt[100]},"&:active":{backgroundColor:Yt[200]},...n.applyStyles("dark",{color:Yt[50],"&:hover":{backgroundColor:Yt[700]},"&:active":{backgroundColor:ar(Yt[700],.7)}})}},{props:{color:"secondary",variant:"text"},style:{color:Ln[700],"&:hover":{backgroundColor:ar(Ln[100],.5)},"&:active":{backgroundColor:ar(Ln[200],.7)},...n.applyStyles("dark",{color:Ln[100],"&:hover":{backgroundColor:ar(Ln[900],.5)},"&:active":{backgroundColor:ar(Ln[900],.3)}})}}]})}},MuiIconButton:{styleOverrides:{root:({theme:n})=>({boxShadow:"none",borderRadius:(n.vars||n).shape.borderRadius,textTransform:"none",fontWeight:n.typography.fontWeightMedium,letterSpacing:0,color:(n.vars||n).palette.text.primary,border:"1px solid ",borderColor:Yt[200],backgroundColor:ar(Yt[50],.3),"&:hover":{backgroundColor:Yt[100],borderColor:Yt[300]},"&:active":{backgroundColor:Yt[200]},...n.applyStyles("dark",{backgroundColor:Yt[800],borderColor:Yt[700],"&:hover":{backgroundColor:Yt[900],borderColor:Yt[600]},"&:active":{backgroundColor:Yt[900]}}),variants:[{props:{size:"small"},style:{width:"2.25rem",height:"2.25rem",padding:"0.25rem",[`& .${$M.root}`]:{fontSize:"1rem"}}},{props:{size:"medium"},style:{width:"2.5rem",height:"2.5rem"}}]})}},MuiToggleButtonGroup:{styleOverrides:{root:({theme:n})=>({borderRadius:"10px",boxShadow:`0 4px 16px ${ar(Yt[400],.2)}`,[`& .${Uj.selected}`]:{color:Ln[500]},...n.applyStyles("dark",{[`& .${Uj.selected}`]:{color:"#fff"},boxShadow:`0 4px 16px ${ar(Ln[700],.5)}`})})}},MuiToggleButton:{styleOverrides:{root:({theme:n})=>({padding:"12px 16px",textTransform:"none",borderRadius:"10px",fontWeight:500,...n.applyStyles("dark",{color:Yt[400],boxShadow:"0 4px 16px rgba(0, 0, 0, 0.5)",[`&.${Ert.selected}`]:{color:Ln[300]}})})}},MuiCheckbox:{defaultProps:{disableRipple:!0,icon:V.jsx(Krt,{sx:{color:"hsla(210, 0%, 0%, 0.0)"}}),checkedIcon:V.jsx(Yrt,{sx:{height:14,width:14}}),indeterminateIcon:V.jsx(Jrt,{sx:{height:14,width:14}})},styleOverrides:{root:({theme:n})=>({margin:10,height:16,width:16,borderRadius:5,border:"1px solid ",borderColor:ar(Yt[300],.8),boxShadow:"0 0 0 1.5px hsla(210, 0%, 0%, 0.04) inset",backgroundColor:ar(Yt[100],.4),transition:"border-color, background-color, 120ms ease-in","&:hover":{borderColor:Ln[300]},"&.Mui-focusVisible":{outline:`3px solid ${ar(Ln[500],.5)}`,outlineOffset:"2px",borderColor:Ln[400]},"&.Mui-checked":{color:"white",backgroundColor:Ln[500],borderColor:Ln[500],boxShadow:"none","&:hover":{backgroundColor:Ln[600]}},...n.applyStyles("dark",{borderColor:ar(Yt[700],.8),boxShadow:"0 0 0 1.5px hsl(210, 0%, 0%) inset",backgroundColor:ar(Yt[900],.8),"&:hover":{borderColor:Ln[300]},"&.Mui-focusVisible":{borderColor:Ln[400],outline:`3px solid ${ar(Ln[500],.5)}`,outlineOffset:"2px"}})})}},MuiInputBase:{styleOverrides:{root:{border:"none"},input:{"&::placeholder":{opacity:.7,color:Yt[500]}}}},MuiOutlinedInput:{styleOverrides:{input:{padding:0},root:({theme:n})=>({padding:"8px 12px",color:(n.vars||n).palette.text.primary,borderRadius:(n.vars||n).shape.borderRadius,border:`1px solid ${(n.vars||n).palette.divider}`,backgroundColor:(n.vars||n).palette.background.default,transition:"border 120ms ease-in","&:hover":{borderColor:Yt[400]},[`&.${Ud.focused}`]:{outline:`3px solid ${ar(Ln[500],.5)}`,borderColor:Ln[400]},...n.applyStyles("dark",{"&:hover":{borderColor:Yt[500]}}),variants:[{props:{size:"small"},style:{height:"2.25rem"}},{props:{size:"medium"},style:{height:"2.5rem"}}]}),notchedOutline:{border:"none"}}},MuiInputAdornment:{styleOverrides:{root:({theme:n})=>({color:(n.vars||n).palette.grey[500],...n.applyStyles("dark",{color:(n.vars||n).palette.grey[400]})})}},MuiFormLabel:{styleOverrides:{root:({theme:n})=>({typography:n.typography.caption,marginBottom:8})}}};function iit(n){return Fr("MuiTypography",n)}const sit=yr("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]),ait={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},oit=Ynt(),lit=n=>{const{align:e,gutterBottom:t,noWrap:r,paragraph:i,variant:s,classes:a}=n,o={root:["root",s,n.align!=="inherit"&&`align${Rn(e)}`,t&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return Pr(o,iit,a)},cit=on("span",{name:"MuiTypography",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.variant&&e[t.variant],t.align!=="inherit"&&e[`align${Rn(t.align)}`],t.noWrap&&e.noWrap,t.gutterBottom&&e.gutterBottom,t.paragraph&&e.paragraph]}})(li(({theme:n})=>{var e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(n.typography).filter(([t,r])=>t!=="inherit"&&r&&typeof r=="object").map(([t,r])=>({props:{variant:t},style:r})),...Object.entries(n.palette).filter(Fl()).map(([t])=>({props:{color:t},style:{color:(n.vars||n).palette[t].main}})),...Object.entries(((e=n.palette)==null?void 0:e.text)||{}).filter(([,t])=>typeof t=="string").map(([t])=>({props:{color:`text${Rn(t)}`},style:{color:(n.vars||n).palette.text[t]}})),{props:({ownerState:t})=>t.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:t})=>t.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:t})=>t.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:t})=>t.paragraph,style:{marginBottom:16}}]}})),Wj={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},ju=F.forwardRef(function(e,t){const{color:r,...i}=Gr({props:e,name:"MuiTypography"}),s=!ait[r],a=oit({...i,...s&&{color:r}}),{align:o="inherit",className:l,component:c,gutterBottom:u=!1,noWrap:d=!1,paragraph:h=!1,variant:p="body1",variantMapping:g=Wj,...v}=a,b={...a,align:o,color:r,className:l,component:c,gutterBottom:u,noWrap:d,paragraph:h,variant:p,variantMapping:g},x=c||(h?"p":g[p]||Wj[p])||"span",C=lit(b);return V.jsx(cit,{as:x,ref:t,className:Pn(C.root,l),...v,ownerState:b,style:{...o!=="inherit"&&{"--Typography-textAlign":o},...v.style}})}),Ml=yr("MuiChip",["root","sizeSmall","sizeMedium","colorDefault","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]);function uit(n){return Fr("MuiCircularProgress",n)}yr("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","track","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Pd=44,PF=g2`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,UF=g2`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,dit=typeof PF!="string"?Q5`
        animation: ${PF} 1.4s linear infinite;
      `:null,fit=typeof UF!="string"?Q5`
        animation: ${UF} 1.4s ease-in-out infinite;
      `:null,hit=n=>{const{classes:e,variant:t,color:r,disableShrink:i}=n,s={root:["root",t,`color${Rn(r)}`],svg:["svg"],track:["track"],circle:["circle",`circle${Rn(t)}`,i&&"circleDisableShrink"]};return Pr(s,uit,e)},pit=on("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[t.variant],e[`color${Rn(t.color)}`]]}})(li(({theme:n})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:n.transitions.create("transform")}},{props:{variant:"indeterminate"},style:dit||{animation:`${PF} 1.4s linear infinite`}},...Object.entries(n.palette).filter(Fl()).map(([e])=>({props:{color:e},style:{color:(n.vars||n).palette[e].main}}))]}))),mit=on("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),git=on("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.circle,e[`circle${Rn(t.variant)}`],t.disableShrink&&e.circleDisableShrink]}})(li(({theme:n})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:n.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:e})=>e.variant==="indeterminate"&&!e.disableShrink,style:fit||{animation:`${UF} 1.4s ease-in-out infinite`}}]}))),yit=on("circle",{name:"MuiCircularProgress",slot:"Track"})(li(({theme:n})=>({stroke:"currentColor",opacity:(n.vars||n).palette.action.activatedOpacity}))),J3=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiCircularProgress"}),{className:i,color:s="primary",disableShrink:a=!1,enableTrackSlot:o=!1,size:l=40,style:c,thickness:u=3.6,value:d=0,variant:h="indeterminate",...p}=r,g={...r,color:s,disableShrink:a,size:l,thickness:u,value:d,variant:h,enableTrackSlot:o},v=hit(g),b={},x={},C={};if(h==="determinate"){const E=2*Math.PI*((Pd-u)/2);b.strokeDasharray=E.toFixed(3),C["aria-valuenow"]=Math.round(d),b.strokeDashoffset=`${((100-d)/100*E).toFixed(3)}px`,x.transform="rotate(-90deg)"}return V.jsx(pit,{className:Pn(v.root,i),style:{width:l,height:l,...x,...c},ownerState:g,ref:t,role:"progressbar",...C,...p,children:V.jsxs(mit,{className:v.svg,ownerState:g,viewBox:`${Pd/2} ${Pd/2} ${Pd} ${Pd}`,children:[o?V.jsx(yit,{className:v.track,ownerState:g,cx:Pd,cy:Pd,r:(Pd-u)/2,fill:"none",strokeWidth:u,"aria-hidden":"true"}):null,V.jsx(git,{className:v.circle,style:b,ownerState:g,cx:Pd,cy:Pd,r:(Pd-u)/2,fill:"none",strokeWidth:u})]})})});function vit(n){return Fr("MuiIconButton",n)}const zF=yr("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),bit=n=>{const{classes:e,disabled:t,color:r,edge:i,size:s,loading:a}=n,o={root:["root",a&&"loading",t&&"disabled",r!=="default"&&`color${Rn(r)}`,i&&`edge${Rn(i)}`,`size${Rn(s)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return Pr(o,vit,e)},xit=on(Y3,{name:"MuiIconButton",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.loading&&e.loading,t.color!=="default"&&e[`color${Rn(t.color)}`],t.edge&&e[`edge${Rn(t.edge)}`],e[`size${Rn(t.size)}`]]}})(li(({theme:n})=>({textAlign:"center",flex:"0 0 auto",fontSize:n.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(n.vars||n).palette.action.active,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shortest}),variants:[{props:e=>!e.disableRipple,style:{"--IconButton-hoverBg":n.alpha((n.vars||n).palette.action.active,(n.vars||n).palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),li(({theme:n})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(n.palette).filter(Fl()).map(([e])=>({props:{color:e},style:{color:(n.vars||n).palette[e].main}})),...Object.entries(n.palette).filter(Fl()).map(([e])=>({props:{color:e},style:{"--IconButton-hoverBg":n.alpha((n.vars||n).palette[e].main,(n.vars||n).palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:n.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:n.typography.pxToRem(28)}}],[`&.${zF.disabled}`]:{backgroundColor:"transparent",color:(n.vars||n).palette.action.disabled},[`&.${zF.loading}`]:{color:"transparent"}}))),Sit=on("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:n})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(n.vars||n).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),wit=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiIconButton"}),{edge:i=!1,children:s,className:a,color:o="default",disabled:l=!1,disableFocusRipple:c=!1,size:u="medium",id:d,loading:h=null,loadingIndicator:p,...g}=r,v=sS(d),b=p??V.jsx(J3,{"aria-labelledby":v,color:"inherit",size:16}),x={...r,edge:i,color:o,disabled:l,disableFocusRipple:c,loading:h,loadingIndicator:b,size:u},C=bit(x);return V.jsxs(xit,{id:h?v:d,className:Pn(C.root,a),centerRipple:!0,focusRipple:!c,disabled:l||h,ref:t,...g,ownerState:x,children:[typeof h=="boolean"&&V.jsx("span",{className:C.loadingWrapper,style:{display:"contents"},children:V.jsx(Sit,{className:C.loadingIndicator,ownerState:x,children:h&&b})}),s]})}),Cit={MuiList:{styleOverrides:{root:{padding:"8px",display:"flex",flexDirection:"column",gap:0}}},MuiListItem:{styleOverrides:{root:({theme:n})=>({[`& .${$M.root}`]:{width:"1rem",height:"1rem",color:(n.vars||n).palette.text.secondary},[`& .${sit.root}`]:{fontWeight:500},[`& .${h6.root}`]:{display:"flex",gap:8,padding:"2px 8px",borderRadius:(n.vars||n).shape.borderRadius,opacity:.7,"&.Mui-selected":{opacity:1,backgroundColor:ar(n.palette.action.selected,.3),[`& .${$M.root}`]:{color:(n.vars||n).palette.text.primary},"&:focus-visible":{backgroundColor:ar(n.palette.action.selected,.3)},"&:hover":{backgroundColor:ar(n.palette.action.selected,.5)}},"&:focus-visible":{backgroundColor:"transparent"}}})}},MuiListItemText:{styleOverrides:{primary:({theme:n})=>({fontSize:n.typography.body2.fontSize,fontWeight:500,lineHeight:n.typography.body2.lineHeight}),secondary:({theme:n})=>({fontSize:n.typography.caption.fontSize,lineHeight:n.typography.caption.lineHeight})}},MuiListSubheader:{styleOverrides:{root:({theme:n})=>({backgroundColor:"transparent",padding:"4px 8px",fontSize:n.typography.caption.fontSize,fontWeight:500,lineHeight:n.typography.caption.lineHeight})}},MuiListItemIcon:{styleOverrides:{root:{minWidth:0}}},MuiChip:{defaultProps:{size:"small"},styleOverrides:{root:({theme:n})=>({border:"1px solid",borderRadius:"999px",[`& .${Ml.label}`]:{fontWeight:600},variants:[{props:{color:"default"},style:{borderColor:Yt[200],backgroundColor:Yt[100],[`& .${Ml.label}`]:{color:Yt[500]},[`& .${Ml.icon}`]:{color:Yt[500]},...n.applyStyles("dark",{borderColor:Yt[700],backgroundColor:Yt[800],[`& .${Ml.label}`]:{color:Yt[300]},[`& .${Ml.icon}`]:{color:Yt[300]}})}},{props:{color:"success"},style:{borderColor:fc[200],backgroundColor:fc[50],[`& .${Ml.label}`]:{color:fc[500]},[`& .${Ml.icon}`]:{color:fc[500]},...n.applyStyles("dark",{borderColor:fc[800],backgroundColor:fc[900],[`& .${Ml.label}`]:{color:fc[300]},[`& .${Ml.icon}`]:{color:fc[300]}})}},{props:{color:"error"},style:{borderColor:hc[100],backgroundColor:hc[50],[`& .${Ml.label}`]:{color:hc[500]},[`& .${Ml.icon}`]:{color:hc[500]},...n.applyStyles("dark",{borderColor:hc[800],backgroundColor:hc[900],[`& .${Ml.label}`]:{color:hc[200]},[`& .${Ml.icon}`]:{color:hc[300]}})}},{props:{size:"small"},style:{maxHeight:20,[`& .${Ml.label}`]:{fontSize:n.typography.caption.fontSize},[`& .${$M.root}`]:{fontSize:n.typography.caption.fontSize}}},{props:{size:"medium"},style:{[`& .${Ml.label}`]:{fontSize:n.typography.caption.fontSize}}}]})}},MuiTablePagination:{styleOverrides:{actions:{display:"flex",gap:8,marginRight:6,[`& .${zF.root}`]:{minWidth:0,width:36,height:36}}}},MuiIcon:{defaultProps:{fontSize:"small"},styleOverrides:{root:{variants:[{props:{fontSize:"small"},style:{fontSize:"1rem"}}]}}}},_it={MuiAlert:{styleOverrides:{root:({theme:n})=>({borderRadius:10,backgroundColor:ku[100],color:(n.vars||n).palette.text.primary,border:`1px solid ${ar(ku[300],.5)}`,"& .MuiAlert-icon":{color:ku[500]},...n.applyStyles("dark",{backgroundColor:`${ar(ku[900],.5)}`,border:`1px solid ${ar(ku[800],.5)}`})})}},MuiDialog:{styleOverrides:{root:({theme:n})=>({"& .MuiDialog-paper":{borderRadius:"10px",border:"1px solid",borderColor:(n.vars||n).palette.divider}})}},MuiLinearProgress:{styleOverrides:{root:({theme:n})=>({height:8,borderRadius:8,backgroundColor:Yt[200],...n.applyStyles("dark",{backgroundColor:Yt[800]})})}}};function Eit(n){return Fr("MuiDivider",n)}const HF=yr("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),Ait=n=>{const{absolute:e,children:t,classes:r,flexItem:i,light:s,orientation:a,textAlign:o,variant:l}=n;return Pr({root:["root",e&&"absolute",l,s&&"light",a==="vertical"&&"vertical",i&&"flexItem",t&&"withChildren",t&&a==="vertical"&&"withChildrenVertical",o==="right"&&a!=="vertical"&&"textAlignRight",o==="left"&&a!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",a==="vertical"&&"wrapperVertical"]},Eit,r)},Tit=on("div",{name:"MuiDivider",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.absolute&&e.absolute,e[t.variant],t.light&&e.light,t.orientation==="vertical"&&e.vertical,t.flexItem&&e.flexItem,t.children&&e.withChildren,t.children&&t.orientation==="vertical"&&e.withChildrenVertical,t.textAlign==="right"&&t.orientation!=="vertical"&&e.textAlignRight,t.textAlign==="left"&&t.orientation!=="vertical"&&e.textAlignLeft]}})(li(({theme:n})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(n.vars||n).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:n.alpha((n.vars||n).palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:n.spacing(2),marginRight:n.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:n.spacing(1),marginBottom:n.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:e})=>!!e.children,style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:e})=>e.children&&e.orientation!=="vertical",style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(n.vars||n).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:e})=>e.orientation==="vertical"&&e.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(n.vars||n).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:e})=>e.textAlign==="right"&&e.orientation!=="vertical",style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:e})=>e.textAlign==="left"&&e.orientation!=="vertical",style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),Mit=on("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.wrapper,t.orientation==="vertical"&&e.wrapperVertical]}})(li(({theme:n})=>({display:"inline-block",paddingLeft:`calc(${n.spacing(1)} * 1.2)`,paddingRight:`calc(${n.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${n.spacing(1)} * 1.2)`,paddingBottom:`calc(${n.spacing(1)} * 1.2)`}}]}))),LN=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiDivider"}),{absolute:i=!1,children:s,className:a,orientation:o="horizontal",component:l=s||o==="vertical"?"div":"hr",flexItem:c=!1,light:u=!1,role:d=l!=="hr"?"separator":void 0,textAlign:h="center",variant:p="fullWidth",...g}=r,v={...r,absolute:i,component:l,flexItem:c,light:u,orientation:o,role:d,textAlign:h,variant:p},b=Ait(v);return V.jsx(Tit,{as:l,className:Pn(b.root,a),role:d,ref:t,ownerState:v,"aria-orientation":d==="separator"&&(l!=="hr"||o==="vertical")?o:void 0,...g,children:s?V.jsx(Mit,{className:b.wrapper,ownerState:v,children:s}):null})});LN&&(LN.muiSkipListHighlight=!0);const VF=F.createContext({}),jj=yr("MuiListItemIcon",["root","alignItemsFlexStart"]),qj=yr("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function Rit(n){return Fr("MuiMenuItem",n)}const sg=yr("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),Nit=(n,e)=>{const{ownerState:t}=n;return[e.root,t.dense&&e.dense,t.divider&&e.divider,!t.disableGutters&&e.gutters]},Iit=n=>{const{disabled:e,dense:t,divider:r,disableGutters:i,selected:s,classes:a}=n,l=Pr({root:["root",t&&"dense",e&&"disabled",!i&&"gutters",r&&"divider",s&&"selected"]},Rit,a);return{...a,...l}},Dit=on(Y3,{shouldForwardProp:n=>Gl(n)||n==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:Nit})(li(({theme:n})=>({...n.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(n.vars||n).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${sg.selected}`]:{backgroundColor:n.alpha((n.vars||n).palette.primary.main,(n.vars||n).palette.action.selectedOpacity),[`&.${sg.focusVisible}`]:{backgroundColor:n.alpha((n.vars||n).palette.primary.main,`${(n.vars||n).palette.action.selectedOpacity} + ${(n.vars||n).palette.action.focusOpacity}`)}},[`&.${sg.selected}:hover`]:{backgroundColor:n.alpha((n.vars||n).palette.primary.main,`${(n.vars||n).palette.action.selectedOpacity} + ${(n.vars||n).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:n.alpha((n.vars||n).palette.primary.main,(n.vars||n).palette.action.selectedOpacity)}},[`&.${sg.focusVisible}`]:{backgroundColor:(n.vars||n).palette.action.focus},[`&.${sg.disabled}`]:{opacity:(n.vars||n).palette.action.disabledOpacity},[`& + .${HF.root}`]:{marginTop:n.spacing(1),marginBottom:n.spacing(1)},[`& + .${HF.inset}`]:{marginLeft:52},[`& .${qj.root}`]:{marginTop:0,marginBottom:0},[`& .${qj.inset}`]:{paddingLeft:36},[`& .${jj.root}`]:{minWidth:36},variants:[{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(n.vars||n).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:e})=>!e.dense,style:{[n.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:e})=>e.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...n.typography.body2,[`& .${jj.root} svg`]:{fontSize:"1.25rem"}}}]}))),v$=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiMenuItem"}),{autoFocus:i=!1,component:s="li",dense:a=!1,divider:o=!1,disableGutters:l=!1,focusVisibleClassName:c,role:u="menuitem",tabIndex:d,className:h,...p}=r,g=F.useContext(VF),v=F.useMemo(()=>({dense:a||g.dense||!1,disableGutters:l}),[g.dense,a,l]),b=F.useRef(null);Mh(()=>{i&&b.current&&b.current.focus()},[i]);const x={...r,dense:v.dense,divider:o,disableGutters:l},C=Iit(r),E=Vl(b,t);let _;return r.disabled||(_=d!==void 0?d:-1),V.jsx(VF.Provider,{value:v,children:V.jsx(Dit,{ref:E,role:u,tabIndex:_,component:s,focusVisibleClassName:Pn(C.focusVisible,c),className:Pn(C.root,h),...p,ownerState:x,classes:C})})});function b2(n){var e;return parseInt(F.version,10)>=19?((e=n==null?void 0:n.props)==null?void 0:e.ref)||null:(n==null?void 0:n.ref)||null}function kit(n){var d;const{elementType:e,externalSlotProps:t,ownerState:r,skipResolvingSlotProps:i=!1,...s}=n,a=i?{}:xae(t,r),{props:o,internalRef:l}=wae({...s,externalSlotProps:a}),c=Vl(l,a==null?void 0:a.ref,(d=n.additionalProps)==null?void 0:d.ref);return bae(e,{...o,ref:c},r)}function Oit(n){return Fr("MuiList",n)}yr("MuiList",["root","padding","dense","subheader"]);const Bit=n=>{const{classes:e,disablePadding:t,dense:r,subheader:i}=n;return Pr({root:["root",!t&&"padding",r&&"dense",i&&"subheader"]},Oit,e)},$it=on("ul",{name:"MuiList",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,!t.disablePadding&&e.padding,t.dense&&e.dense,t.subheader&&e.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:n})=>!n.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:n})=>n.subheader,style:{paddingTop:0}}]}),Lit=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiList"}),{children:i,className:s,component:a="ul",dense:o=!1,disablePadding:l=!1,subheader:c,...u}=r,d=F.useMemo(()=>({dense:o}),[o]),h={...r,component:a,dense:o,disablePadding:l},p=Bit(h);return V.jsx(VF.Provider,{value:d,children:V.jsxs($it,{as:a,className:Pn(p.root,s),ref:t,ownerState:h,...u,children:[c,i]})})});function Mae(n=window){const e=n.document.documentElement.clientWidth;return n.innerWidth-e}function b$(n,e,t){return n===e?n.firstChild:e&&e.nextElementSibling?e.nextElementSibling:t?null:n.firstChild}function Xj(n,e,t){return n===e?t?n.firstChild:n.lastChild:e&&e.previousElementSibling?e.previousElementSibling:t?null:n.lastChild}function Rae(n,e){if(e===void 0)return!0;let t=n.innerText;return t===void 0&&(t=n.textContent),t=t.trim().toLowerCase(),t.length===0?!1:e.repeating?t[0]===e.keys[0]:t.startsWith(e.keys.join(""))}function Vw(n,e,t,r,i,s){let a=!1,o=i(n,e,e?t:!1);for(;o;){if(o===n.firstChild){if(a)return!1;a=!0}const l=r?!1:o.disabled||o.getAttribute("aria-disabled")==="true";if(!o.hasAttribute("tabindex")||!Rae(o,s)||l)o=i(n,o,t);else return o.focus(),!0}return!1}const Fit=F.forwardRef(function(e,t){const{actions:r,autoFocus:i=!1,autoFocusItem:s=!1,children:a,className:o,disabledItemsFocusable:l=!1,disableListWrap:c=!1,onKeyDown:u,variant:d="selectedMenu",...h}=e,p=F.useRef(null),g=F.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Mh(()=>{i&&p.current.focus()},[i]),F.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(E,{direction:_})=>{const M=!p.current.style.width;if(E.clientHeight<p.current.clientHeight&&M){const R=`${Mae(Wp(E))}px`;p.current.style[_==="rtl"?"paddingLeft":"paddingRight"]=R,p.current.style.width=`calc(100% + ${R})`}return p.current}}),[]);const v=E=>{const _=p.current,M=E.key;if(E.ctrlKey||E.metaKey||E.altKey){u&&u(E);return}const L=uf(_).activeElement;if(M==="ArrowDown")E.preventDefault(),Vw(_,L,c,l,b$);else if(M==="ArrowUp")E.preventDefault(),Vw(_,L,c,l,Xj);else if(M==="Home")E.preventDefault(),Vw(_,null,c,l,b$);else if(M==="End")E.preventDefault(),Vw(_,null,c,l,Xj);else if(M.length===1){const $=g.current,N=M.toLowerCase(),I=performance.now();$.keys.length>0&&(I-$.lastTime>500?($.keys=[],$.repeating=!0,$.previousKeyMatched=!0):$.repeating&&N!==$.keys[0]&&($.repeating=!1)),$.lastTime=I,$.keys.push(N);const k=L&&!$.repeating&&Rae(L,$);$.previousKeyMatched&&(k||Vw(_,L,!1,l,b$,$))?E.preventDefault():$.previousKeyMatched=!1}u&&u(E)},b=Vl(p,t);let x=-1;F.Children.forEach(a,(E,_)=>{if(!F.isValidElement(E)){x===_&&(x+=1,x>=a.length&&(x=-1));return}E.props.disabled||(d==="selectedMenu"&&E.props.selected||x===-1)&&(x=_),x===_&&(E.props.disabled||E.props.muiSkipListHighlight||E.type.muiSkipListHighlight)&&(x+=1,x>=a.length&&(x=-1))});const C=F.Children.map(a,(E,_)=>{if(_===x){const M={};return s&&(M.autoFocus=!0),E.props.tabIndex===void 0&&d==="selectedMenu"&&(M.tabIndex=0),F.cloneElement(E,M)}return E});return V.jsx(Lit,{role:"menu",ref:b,className:o,onKeyDown:v,tabIndex:i?0:-1,...h,children:C})}),Nae=n=>n.scrollTop;function FN(n,e){const{timeout:t,easing:r,style:i={}}=n;return{duration:i.transitionDuration??(typeof t=="number"?t:t[e.mode]||0),easing:i.transitionTimingFunction??(typeof r=="object"?r[e.mode]:r),delay:i.transitionDelay}}function GF(n){return`scale(${n}, ${n**2})`}const Pit={entering:{opacity:1,transform:GF(1)},entered:{opacity:1,transform:"none"}},x$=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),WF=F.forwardRef(function(e,t){const{addEndListener:r,appear:i=!0,children:s,easing:a,in:o,onEnter:l,onEntered:c,onEntering:u,onExit:d,onExited:h,onExiting:p,style:g,timeout:v="auto",TransitionComponent:b=kh,...x}=e,C=Aae(),E=F.useRef(),_=v2(),M=F.useRef(null),R=Vl(M,b2(s),t),L=X=>z=>{if(X){const J=M.current;z===void 0?X(J):X(J,z)}},$=L(u),N=L((X,z)=>{Nae(X);const{duration:J,delay:Q,easing:Y}=FN({style:g,timeout:v,easing:a},{mode:"enter"});let q;v==="auto"?(q=_.transitions.getAutoHeightDuration(X.clientHeight),E.current=q):q=J,X.style.transition=[_.transitions.create("opacity",{duration:q,delay:Q}),_.transitions.create("transform",{duration:x$?q:q*.666,delay:Q,easing:Y})].join(","),l&&l(X,z)}),I=L(c),k=L(p),P=L(X=>{const{duration:z,delay:J,easing:Q}=FN({style:g,timeout:v,easing:a},{mode:"exit"});let Y;v==="auto"?(Y=_.transitions.getAutoHeightDuration(X.clientHeight),E.current=Y):Y=z,X.style.transition=[_.transitions.create("opacity",{duration:Y,delay:J}),_.transitions.create("transform",{duration:x$?Y:Y*.666,delay:x$?J:J||Y*.333,easing:Q})].join(","),X.style.opacity=0,X.style.transform=GF(.75),d&&d(X)}),G=L(h),W=X=>{v==="auto"&&C.start(E.current||0,X),r&&r(M.current,X)};return V.jsx(b,{appear:i,in:o,nodeRef:M,onEnter:N,onEntered:I,onEntering:$,onExit:P,onExited:G,onExiting:k,addEndListener:W,timeout:v==="auto"?null:v,...x,children:(X,{ownerState:z,...J})=>F.cloneElement(s,{style:{opacity:0,transform:GF(.75),visibility:X==="exited"&&!o?"hidden":void 0,...Pit[X],...g,...s.props.style},ref:R,...J})})});WF&&(WF.muiSupportAuto=!0);function Uit(n){const e=uf(n);return e.body===n?Wp(n).innerWidth>e.documentElement.clientWidth:n.scrollHeight>n.clientHeight}function TC(n,e){e?n.setAttribute("aria-hidden","true"):n.removeAttribute("aria-hidden")}function Kj(n){return parseInt(Wp(n).getComputedStyle(n).paddingRight,10)||0}function zit(n){const t=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(n.tagName),r=n.tagName==="INPUT"&&n.getAttribute("type")==="hidden";return t||r}function Yj(n,e,t,r,i){const s=[e,t,...r];[].forEach.call(n.children,a=>{const o=!s.includes(a),l=!zit(a);o&&l&&TC(a,i)})}function S$(n,e){let t=-1;return n.some((r,i)=>e(r)?(t=i,!0):!1),t}function Hit(n,e){const t=[],r=n.container;if(!e.disableScrollLock){if(Uit(r)){const a=Mae(Wp(r));t.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${Kj(r)+a}px`;const o=uf(r).querySelectorAll(".mui-fixed");[].forEach.call(o,l=>{t.push({value:l.style.paddingRight,property:"padding-right",el:l}),l.style.paddingRight=`${Kj(l)+a}px`})}let s;if(r.parentNode instanceof DocumentFragment)s=uf(r).body;else{const a=r.parentElement,o=Wp(r);s=(a==null?void 0:a.nodeName)==="HTML"&&o.getComputedStyle(a).overflowY==="scroll"?a:r}t.push({value:s.style.overflow,property:"overflow",el:s},{value:s.style.overflowX,property:"overflow-x",el:s},{value:s.style.overflowY,property:"overflow-y",el:s}),s.style.overflow="hidden"}return()=>{t.forEach(({value:s,el:a,property:o})=>{s?a.style.setProperty(o,s):a.style.removeProperty(o)})}}function Vit(n){const e=[];return[].forEach.call(n.children,t=>{t.getAttribute("aria-hidden")==="true"&&e.push(t)}),e}class Git{constructor(){this.modals=[],this.containers=[]}add(e,t){let r=this.modals.indexOf(e);if(r!==-1)return r;r=this.modals.length,this.modals.push(e),e.modalRef&&TC(e.modalRef,!1);const i=Vit(t);Yj(t,e.mount,e.modalRef,i,!0);const s=S$(this.containers,a=>a.container===t);return s!==-1?(this.containers[s].modals.push(e),r):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:i}),r)}mount(e,t){const r=S$(this.containers,s=>s.modals.includes(e)),i=this.containers[r];i.restore||(i.restore=Hit(i,t))}remove(e,t=!0){const r=this.modals.indexOf(e);if(r===-1)return r;const i=S$(this.containers,a=>a.modals.includes(e)),s=this.containers[i];if(s.modals.splice(s.modals.indexOf(e),1),this.modals.splice(r,1),s.modals.length===0)s.restore&&s.restore(),e.modalRef&&TC(e.modalRef,t),Yj(s.container,e.mount,e.modalRef,s.hiddenSiblings,!1),this.containers.splice(i,1);else{const a=s.modals[s.modals.length-1];a.modalRef&&TC(a.modalRef,!1)}return r}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}const Wit=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function jit(n){const e=parseInt(n.getAttribute("tabindex")||"",10);return Number.isNaN(e)?n.contentEditable==="true"||(n.nodeName==="AUDIO"||n.nodeName==="VIDEO"||n.nodeName==="DETAILS")&&n.getAttribute("tabindex")===null?0:n.tabIndex:e}function qit(n){if(n.tagName!=="INPUT"||n.type!=="radio"||!n.name)return!1;const e=r=>n.ownerDocument.querySelector(`input[type="radio"]${r}`);let t=e(`[name="${n.name}"]:checked`);return t||(t=e(`[name="${n.name}"]`)),t!==n}function Xit(n){return!(n.disabled||n.tagName==="INPUT"&&n.type==="hidden"||qit(n))}function Kit(n){const e=[],t=[];return Array.from(n.querySelectorAll(Wit)).forEach((r,i)=>{const s=jit(r);s===-1||!Xit(r)||(s===0?e.push(r):t.push({documentOrder:i,tabIndex:s,node:r}))}),t.sort((r,i)=>r.tabIndex===i.tabIndex?r.documentOrder-i.documentOrder:r.tabIndex-i.tabIndex).map(r=>r.node).concat(e)}function Yit(){return!0}function Jit(n){const{children:e,disableAutoFocus:t=!1,disableEnforceFocus:r=!1,disableRestoreFocus:i=!1,getTabbable:s=Kit,isEnabled:a=Yit,open:o}=n,l=F.useRef(!1),c=F.useRef(null),u=F.useRef(null),d=F.useRef(null),h=F.useRef(null),p=F.useRef(!1),g=F.useRef(null),v=Vl(b2(e),g),b=F.useRef(null);F.useEffect(()=>{!o||!g.current||(p.current=!t)},[t,o]),F.useEffect(()=>{if(!o||!g.current)return;const E=uf(g.current);return g.current.contains(E.activeElement)||(g.current.hasAttribute("tabIndex")||g.current.setAttribute("tabIndex","-1"),p.current&&g.current.focus()),()=>{i||(d.current&&d.current.focus&&(l.current=!0,d.current.focus()),d.current=null)}},[o]),F.useEffect(()=>{if(!o||!g.current)return;const E=uf(g.current),_=L=>{b.current=L,!(r||!a()||L.key!=="Tab")&&E.activeElement===g.current&&L.shiftKey&&(l.current=!0,u.current&&u.current.focus())},M=()=>{var N,I;const L=g.current;if(L===null)return;if(!E.hasFocus()||!a()||l.current){l.current=!1;return}if(L.contains(E.activeElement)||r&&E.activeElement!==c.current&&E.activeElement!==u.current)return;if(E.activeElement!==h.current)h.current=null;else if(h.current!==null)return;if(!p.current)return;let $=[];if((E.activeElement===c.current||E.activeElement===u.current)&&($=s(g.current)),$.length>0){const k=!!((N=b.current)!=null&&N.shiftKey&&((I=b.current)==null?void 0:I.key)==="Tab"),P=$[0],G=$[$.length-1];typeof P!="string"&&typeof G!="string"&&(k?G.focus():P.focus())}else L.focus()};E.addEventListener("focusin",M),E.addEventListener("keydown",_,!0);const R=setInterval(()=>{E.activeElement&&E.activeElement.tagName==="BODY"&&M()},50);return()=>{clearInterval(R),E.removeEventListener("focusin",M),E.removeEventListener("keydown",_,!0)}},[t,r,i,a,o,s]);const x=E=>{d.current===null&&(d.current=E.relatedTarget),p.current=!0,h.current=E.target;const _=e.props.onFocus;_&&_(E)},C=E=>{d.current===null&&(d.current=E.relatedTarget),p.current=!0};return V.jsxs(F.Fragment,{children:[V.jsx("div",{tabIndex:o?0:-1,onFocus:C,ref:c,"data-testid":"sentinelStart"}),F.cloneElement(e,{ref:v,onFocus:x}),V.jsx("div",{tabIndex:o?0:-1,onFocus:C,ref:u,"data-testid":"sentinelEnd"})]})}function Zit(n){return typeof n=="function"?n():n}const Qit=F.forwardRef(function(e,t){const{children:r,container:i,disablePortal:s=!1}=e,[a,o]=F.useState(null),l=Vl(F.isValidElement(r)?b2(r):null,t);if(Mh(()=>{s||o(Zit(i)||document.body)},[i,s]),Mh(()=>{if(a&&!s)return Gj(t,a),()=>{Gj(t,null)}},[t,a,s]),s){if(F.isValidElement(r)){const c={ref:l};return F.cloneElement(r,c)}return r}return a&&O_.createPortal(r,a)}),est={entering:{opacity:1},entered:{opacity:1}},jF=F.forwardRef(function(e,t){const r=v2(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:s,appear:a=!0,children:o,easing:l,in:c,onEnter:u,onEntered:d,onEntering:h,onExit:p,onExited:g,onExiting:v,style:b,timeout:x=i,TransitionComponent:C=kh,...E}=e,_=F.useRef(null),M=Vl(_,b2(o),t),R=W=>X=>{if(W){const z=_.current;X===void 0?W(z):W(z,X)}},L=R(h),$=R((W,X)=>{Nae(W);const z=FN({style:b,timeout:x,easing:l},{mode:"enter"});W.style.webkitTransition=r.transitions.create("opacity",z),W.style.transition=r.transitions.create("opacity",z),u&&u(W,X)}),N=R(d),I=R(v),k=R(W=>{const X=FN({style:b,timeout:x,easing:l},{mode:"exit"});W.style.webkitTransition=r.transitions.create("opacity",X),W.style.transition=r.transitions.create("opacity",X),p&&p(W)}),P=R(g),G=W=>{s&&s(_.current,W)};return V.jsx(C,{appear:a,in:c,nodeRef:_,onEnter:$,onEntered:N,onEntering:L,onExit:k,onExited:P,onExiting:I,addEndListener:G,timeout:x,...E,children:(W,{ownerState:X,...z})=>F.cloneElement(o,{style:{opacity:0,visibility:W==="exited"&&!c?"hidden":void 0,...est[W],...b,...o.props.style},ref:M,...z})})});function tst(n){return Fr("MuiBackdrop",n)}yr("MuiBackdrop",["root","invisible"]);const nst=n=>{const{classes:e,invisible:t}=n;return Pr({root:["root",t&&"invisible"]},tst,e)},rst=on("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.invisible&&e.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),Iae=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiBackdrop"}),{children:i,className:s,component:a="div",invisible:o=!1,open:l,components:c={},componentsProps:u={},slotProps:d={},slots:h={},TransitionComponent:p,transitionDuration:g,...v}=r,b={...r,component:a,invisible:o},x=nst(b),C={transition:p,root:c.Root,...h},E={...u,...d},_={component:a,slots:C,slotProps:E},[M,R]=xi("root",{elementType:rst,externalForwardedProps:_,className:Pn(x.root,s),ownerState:b}),[L,$]=xi("transition",{elementType:jF,externalForwardedProps:_,ownerState:b});return V.jsx(L,{in:l,timeout:g,...v,...$,children:V.jsx(M,{"aria-hidden":!0,...R,classes:x,ref:t,children:i})})});function ist(n){return typeof n=="function"?n():n}function sst(n){return n?n.props.hasOwnProperty("in"):!1}const Jj=()=>{},oM=new Git;function ast(n){const{container:e,disableEscapeKeyDown:t=!1,disableScrollLock:r=!1,closeAfterTransition:i=!1,onTransitionEnter:s,onTransitionExited:a,children:o,onClose:l,open:c,rootRef:u}=n,d=F.useRef({}),h=F.useRef(null),p=F.useRef(null),g=Vl(p,u),[v,b]=F.useState(!c),x=sst(o);let C=!0;(n["aria-hidden"]==="false"||n["aria-hidden"]===!1)&&(C=!1);const E=()=>uf(h.current),_=()=>(d.current.modalRef=p.current,d.current.mount=h.current,d.current),M=()=>{oM.mount(_(),{disableScrollLock:r}),p.current&&(p.current.scrollTop=0)},R=Xy(()=>{const X=ist(e)||E().body;oM.add(_(),X),p.current&&M()}),L=()=>oM.isTopModal(_()),$=Xy(X=>{h.current=X,X&&(c&&L()?M():p.current&&TC(p.current,C))}),N=F.useCallback(()=>{oM.remove(_(),C)},[C]);F.useEffect(()=>()=>{N()},[N]),F.useEffect(()=>{c?R():(!x||!i)&&N()},[c,N,x,i,R]);const I=X=>z=>{var J;(J=X.onKeyDown)==null||J.call(X,z),!(z.key!=="Escape"||z.which===229||!L())&&(t||(z.stopPropagation(),l&&l(z,"escapeKeyDown")))},k=X=>z=>{var J;(J=X.onClick)==null||J.call(X,z),z.target===z.currentTarget&&l&&l(z,"backdropClick")};return{getRootProps:(X={})=>{const z=Sae(n);delete z.onTransitionEnter,delete z.onTransitionExited;const J={...z,...X};return{role:"presentation",...J,onKeyDown:I(J),ref:g}},getBackdropProps:(X={})=>{const z=X;return{"aria-hidden":!0,...z,onClick:k(z),open:c}},getTransitionProps:()=>{const X=()=>{b(!1),s&&s()},z=()=>{b(!0),a&&a(),i&&N()};return{onEnter:Vj(X,(o==null?void 0:o.props.onEnter)??Jj),onExited:Vj(z,(o==null?void 0:o.props.onExited)??Jj)}},rootRef:g,portalRef:$,isTopModal:L,exited:v,hasTransition:x}}function ost(n){return Fr("MuiModal",n)}yr("MuiModal",["root","hidden","backdrop"]);const lst=n=>{const{open:e,exited:t,classes:r}=n;return Pr({root:["root",!e&&t&&"hidden"],backdrop:["backdrop"]},ost,r)},cst=on("div",{name:"MuiModal",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,!t.open&&t.exited&&e.hidden]}})(li(({theme:n})=>({position:"fixed",zIndex:(n.vars||n).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:e})=>!e.open&&e.exited,style:{visibility:"hidden"}}]}))),ust=on(Iae,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),Dae=F.forwardRef(function(e,t){const r=Gr({name:"MuiModal",props:e}),{BackdropComponent:i=ust,BackdropProps:s,classes:a,className:o,closeAfterTransition:l=!1,children:c,container:u,component:d,components:h={},componentsProps:p={},disableAutoFocus:g=!1,disableEnforceFocus:v=!1,disableEscapeKeyDown:b=!1,disablePortal:x=!1,disableRestoreFocus:C=!1,disableScrollLock:E=!1,hideBackdrop:_=!1,keepMounted:M=!1,onClose:R,onTransitionEnter:L,onTransitionExited:$,open:N,slotProps:I={},slots:k={},theme:P,...G}=r,W={...r,closeAfterTransition:l,disableAutoFocus:g,disableEnforceFocus:v,disableEscapeKeyDown:b,disablePortal:x,disableRestoreFocus:C,disableScrollLock:E,hideBackdrop:_,keepMounted:M},{getRootProps:X,getBackdropProps:z,getTransitionProps:J,portalRef:Q,isTopModal:Y,exited:q,hasTransition:te}=ast({...W,rootRef:t}),ne={...W,exited:q},le=lst(ne),ye={};if(c.props.tabIndex===void 0&&(ye.tabIndex="-1"),te){const{onEnter:Ke,onExited:pt}=J();ye.onEnter=Ke,ye.onExited=pt}const ue={slots:{root:h.Root,backdrop:h.Backdrop,...k},slotProps:{...p,...I}},[ve,xe]=xi("root",{ref:t,elementType:cst,externalForwardedProps:{...ue,...G,component:d},getSlotProps:X,ownerState:ne,className:Pn(o,le==null?void 0:le.root,!ne.open&&ne.exited&&(le==null?void 0:le.hidden))}),[Pe,ze]=xi("backdrop",{ref:s==null?void 0:s.ref,elementType:i,externalForwardedProps:ue,shouldForwardComponentProp:!0,additionalProps:s,getSlotProps:Ke=>z({...Ke,onClick:pt=>{Ke!=null&&Ke.onClick&&Ke.onClick(pt)}}),className:Pn(s==null?void 0:s.className,le==null?void 0:le.backdrop),ownerState:ne});return!M&&!N&&(!te||q)?null:V.jsx(Qit,{ref:Q,container:u,disablePortal:x,children:V.jsxs(ve,{...xe,children:[!_&&i?V.jsx(Pe,{...ze}):null,V.jsx(Jit,{disableEnforceFocus:v,disableAutoFocus:g,disableRestoreFocus:C,isEnabled:Y,open:N,children:F.cloneElement(c,ye)})]})})});function dst(n){return Fr("MuiPaper",n)}yr("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const fst=n=>{const{square:e,elevation:t,variant:r,classes:i}=n,s={root:["root",r,!e&&"rounded",r==="elevation"&&`elevation${t}`]};return Pr(s,dst,i)},hst=on("div",{name:"MuiPaper",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[t.variant],!t.square&&e.rounded,t.variant==="elevation"&&e[`elevation${t.elevation}`]]}})(li(({theme:n})=>({backgroundColor:(n.vars||n).palette.background.paper,color:(n.vars||n).palette.text.primary,transition:n.transitions.create("box-shadow"),variants:[{props:({ownerState:e})=>!e.square,style:{borderRadius:n.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(n.vars||n).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),x2=F.forwardRef(function(e,t){var p;const r=Gr({props:e,name:"MuiPaper"}),i=v2(),{className:s,component:a="div",elevation:o=1,square:l=!1,variant:c="elevation",...u}=r,d={...r,component:a,elevation:o,square:l,variant:c},h=fst(d);return V.jsx(hst,{as:a,ownerState:d,className:Pn(h.root,s),ref:t,...u,style:{...c==="elevation"&&{"--Paper-shadow":(i.vars||i).shadows[o],...i.vars&&{"--Paper-overlay":(p=i.vars.overlays)==null?void 0:p[o]},...!i.vars&&i.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${ar("#fff",kF(o))}, ${ar("#fff",kF(o))})`}},...u.style}})});function pst(n){return Fr("MuiPopover",n)}yr("MuiPopover",["root","paper"]);function Zj(n,e){let t=0;return typeof e=="number"?t=e:e==="center"?t=n.height/2:e==="bottom"&&(t=n.height),t}function Qj(n,e){let t=0;return typeof e=="number"?t=e:e==="center"?t=n.width/2:e==="right"&&(t=n.width),t}function eq(n){return[n.horizontal,n.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function lM(n){return typeof n=="function"?n():n}const mst=n=>{const{classes:e}=n;return Pr({root:["root"],paper:["paper"]},pst,e)},gst=on(Dae,{name:"MuiPopover",slot:"Root"})({}),kae=on(x2,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),yst=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiPopover"}),{action:i,anchorEl:s,anchorOrigin:a={vertical:"top",horizontal:"left"},anchorPosition:o,anchorReference:l="anchorEl",children:c,className:u,container:d,elevation:h=8,marginThreshold:p=16,open:g,PaperProps:v={},slots:b={},slotProps:x={},transformOrigin:C={vertical:"top",horizontal:"left"},TransitionComponent:E,transitionDuration:_="auto",TransitionProps:M={},disableScrollLock:R=!1,...L}=r,$=F.useRef(),N={...r,anchorOrigin:a,anchorReference:l,elevation:h,marginThreshold:p,transformOrigin:C,TransitionComponent:E,transitionDuration:_,TransitionProps:M},I=mst(N),k=F.useCallback(()=>{if(l==="anchorPosition")return o;const Ke=lM(s),dt=(Ke&&Ke.nodeType===1?Ke:uf($.current).body).getBoundingClientRect();return{top:dt.top+Zj(dt,a.vertical),left:dt.left+Qj(dt,a.horizontal)}},[s,a.horizontal,a.vertical,o,l]),P=F.useCallback(Ke=>({vertical:Zj(Ke,C.vertical),horizontal:Qj(Ke,C.horizontal)}),[C.horizontal,C.vertical]),G=F.useCallback(Ke=>{const pt={width:Ke.offsetWidth,height:Ke.offsetHeight},dt=P(pt);if(l==="none")return{top:null,left:null,transformOrigin:eq(dt)};const pe=k();let Le=pe.top-dt.vertical,Ue=pe.left-dt.horizontal;const Ze=Le+pt.height,je=Ue+pt.width,lt=Wp(lM(s)),st=lt.innerHeight-p,ot=lt.innerWidth-p;if(p!==null&&Le<p){const Ut=Le-p;Le-=Ut,dt.vertical+=Ut}else if(p!==null&&Ze>st){const Ut=Ze-st;Le-=Ut,dt.vertical+=Ut}if(p!==null&&Ue<p){const Ut=Ue-p;Ue-=Ut,dt.horizontal+=Ut}else if(je>ot){const Ut=je-ot;Ue-=Ut,dt.horizontal+=Ut}return{top:`${Math.round(Le)}px`,left:`${Math.round(Ue)}px`,transformOrigin:eq(dt)}},[s,l,k,P,p]),[W,X]=F.useState(g),z=F.useCallback(()=>{const Ke=$.current;if(!Ke)return;const pt=G(Ke);pt.top!==null&&Ke.style.setProperty("top",pt.top),pt.left!==null&&(Ke.style.left=pt.left),Ke.style.transformOrigin=pt.transformOrigin,X(!0)},[G]);F.useEffect(()=>(R&&window.addEventListener("scroll",z),()=>window.removeEventListener("scroll",z)),[s,R,z]);const J=()=>{z()},Q=()=>{X(!1)};F.useEffect(()=>{g&&z()}),F.useImperativeHandle(i,()=>g?{updatePosition:()=>{z()}}:null,[g,z]),F.useEffect(()=>{if(!g)return;const Ke=vae(()=>{z()}),pt=Wp(lM(s));return pt.addEventListener("resize",Ke),()=>{Ke.clear(),pt.removeEventListener("resize",Ke)}},[s,g,z]);let Y=_;const q={slots:{transition:E,...b},slotProps:{transition:M,paper:v,...x}},[te,ne]=xi("transition",{elementType:WF,externalForwardedProps:q,ownerState:N,getSlotProps:Ke=>({...Ke,onEntering:(pt,dt)=>{var pe;(pe=Ke.onEntering)==null||pe.call(Ke,pt,dt),J()},onExited:pt=>{var dt;(dt=Ke.onExited)==null||dt.call(Ke,pt),Q()}}),additionalProps:{appear:!0,in:g}});_==="auto"&&!te.muiSupportAuto&&(Y=void 0);const le=d||(s?uf(lM(s)).body:void 0),[ye,{slots:ue,slotProps:ve,...xe}]=xi("root",{ref:t,elementType:gst,externalForwardedProps:{...q,...L},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:b.backdrop},slotProps:{backdrop:Tae(typeof x.backdrop=="function"?x.backdrop(N):x.backdrop,{invisible:!0})},container:le,open:g},ownerState:N,className:Pn(I.root,u)}),[Pe,ze]=xi("paper",{ref:$,className:I.paper,elementType:kae,externalForwardedProps:q,shouldForwardComponentProp:!0,additionalProps:{elevation:h,style:W?void 0:{opacity:0}},ownerState:N});return V.jsx(ye,{...xe,...!DN(ye)&&{slots:ue,slotProps:ve,disableScrollLock:R},children:V.jsx(te,{...ne,timeout:Y,children:V.jsx(Pe,{...ze,children:c})})})});function vst(n){return Fr("MuiMenu",n)}yr("MuiMenu",["root","paper","list"]);const bst={vertical:"top",horizontal:"right"},xst={vertical:"top",horizontal:"left"},Sst=n=>{const{classes:e}=n;return Pr({root:["root"],paper:["paper"],list:["list"]},vst,e)},wst=on(yst,{shouldForwardProp:n=>Gl(n)||n==="classes",name:"MuiMenu",slot:"Root"})({}),Cst=on(kae,{name:"MuiMenu",slot:"Paper"})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),_st=on(Fit,{name:"MuiMenu",slot:"List"})({outline:0}),Est=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiMenu"}),{autoFocus:i=!0,children:s,className:a,disableAutoFocusItem:o=!1,MenuListProps:l={},onClose:c,open:u,PaperProps:d={},PopoverClasses:h,transitionDuration:p="auto",TransitionProps:{onEntering:g,...v}={},variant:b="selectedMenu",slots:x={},slotProps:C={},...E}=r,_=Vtt(),M={...r,autoFocus:i,disableAutoFocusItem:o,MenuListProps:l,onEntering:g,PaperProps:d,transitionDuration:p,TransitionProps:v,variant:b},R=Sst(M),L=i&&!o&&u,$=F.useRef(null),N=(Y,q)=>{$.current&&$.current.adjustStyleForScrollbar(Y,{direction:_?"rtl":"ltr"}),g&&g(Y,q)},I=Y=>{Y.key==="Tab"&&(Y.preventDefault(),c&&c(Y,"tabKeyDown"))};let k=-1;F.Children.map(s,(Y,q)=>{F.isValidElement(Y)&&(Y.props.disabled||(b==="selectedMenu"&&Y.props.selected||k===-1)&&(k=q))});const P={slots:x,slotProps:{list:l,transition:v,paper:d,...C}},G=kit({elementType:x.root,externalSlotProps:C.root,ownerState:M,className:[R.root,a]}),[W,X]=xi("paper",{className:R.paper,elementType:Cst,externalForwardedProps:P,shouldForwardComponentProp:!0,ownerState:M}),[z,J]=xi("list",{className:Pn(R.list,l.className),elementType:_st,shouldForwardComponentProp:!0,externalForwardedProps:P,getSlotProps:Y=>({...Y,onKeyDown:q=>{var te;I(q),(te=Y.onKeyDown)==null||te.call(Y,q)}}),ownerState:M}),Q=typeof P.slotProps.transition=="function"?P.slotProps.transition(M):P.slotProps.transition;return V.jsx(wst,{onClose:c,anchorOrigin:{vertical:"bottom",horizontal:_?"right":"left"},transformOrigin:_?bst:xst,slots:{root:x.root,paper:W,backdrop:x.backdrop,...x.transition&&{transition:x.transition}},slotProps:{root:G,paper:X,backdrop:typeof C.backdrop=="function"?C.backdrop(M):C.backdrop,transition:{...Q,onEntering:(...Y)=>{var q;N(...Y),(q=Q==null?void 0:Q.onEntering)==null||q.call(Q,...Y)}}},open:u,ref:t,transitionDuration:p,ownerState:M,...E,classes:h,children:V.jsx(z,{actions:$,autoFocus:i&&(k===-1||o),autoFocusItem:L,variant:b,...J,children:s})})});function Ast(n){return Fr("MuiNativeSelect",n)}const p6=yr("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),Tst=n=>{const{classes:e,variant:t,disabled:r,multiple:i,open:s,error:a}=n,o={select:["select",t,r&&"disabled",i&&"multiple",a&&"error"],icon:["icon",`icon${Rn(t)}`,s&&"iconOpen",r&&"disabled"]};return Pr(o,Ast,e)},Oae=on("select",{name:"MuiNativeSelect"})(({theme:n})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${p6.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(n.vars||n).palette.background.paper},variants:[{props:({ownerState:e})=>e.variant!=="filled"&&e.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(n.vars||n).shape.borderRadius,"&:focus":{borderRadius:(n.vars||n).shape.borderRadius},"&&&":{paddingRight:32}}}]})),Mst=on(Oae,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Gl,overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.select,e[t.variant],t.error&&e.error,{[`&.${p6.multiple}`]:e.multiple}]}})({}),Bae=on("svg",{name:"MuiNativeSelect"})(({theme:n})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(n.vars||n).palette.action.active,[`&.${p6.disabled}`]:{color:(n.vars||n).palette.action.disabled},variants:[{props:({ownerState:e})=>e.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),Rst=on(Bae,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.icon,t.variant&&e[`icon${Rn(t.variant)}`],t.open&&e.iconOpen]}})({}),Nst=F.forwardRef(function(e,t){const{className:r,disabled:i,error:s,IconComponent:a,inputRef:o,variant:l="standard",...c}=e,u={...e,disabled:i,variant:l,error:s},d=Tst(u);return V.jsxs(F.Fragment,{children:[V.jsx(Mst,{ownerState:u,className:Pn(d.select,r),disabled:i,ref:o||t,...c}),e.multiple?null:V.jsx(Rst,{as:a,ownerState:u,className:d.icon})]})});function $ae(n){return Fr("MuiSelect",n)}const Ay=yr("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var tq;const Ist=on(Oae,{name:"MuiSelect",slot:"Select",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`&.${Ay.select}`]:e.select},{[`&.${Ay.select}`]:e[t.variant]},{[`&.${Ay.error}`]:e.error},{[`&.${Ay.multiple}`]:e.multiple}]}})({[`&.${Ay.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),Dst=on(Bae,{name:"MuiSelect",slot:"Icon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.icon,t.variant&&e[`icon${Rn(t.variant)}`],t.open&&e.iconOpen]}})({}),kst=on("input",{shouldForwardProp:n=>mae(n)&&n!=="classes",name:"MuiSelect",slot:"NativeInput"})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function nq(n,e){return typeof e=="object"&&e!==null?n===e:String(n)===String(e)}function Ost(n){return n==null||typeof n=="string"&&!n.trim()}const Bst=n=>{const{classes:e,variant:t,disabled:r,multiple:i,open:s,error:a}=n,o={select:["select",t,r&&"disabled",i&&"multiple",a&&"error"],icon:["icon",`icon${Rn(t)}`,s&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return Pr(o,$ae,e)},$st=F.forwardRef(function(e,t){var an,tn,zt,hn;const{"aria-describedby":r,"aria-label":i,autoFocus:s,autoWidth:a,children:o,className:l,defaultOpen:c,defaultValue:u,disabled:d,displayEmpty:h,error:p=!1,IconComponent:g,inputRef:v,labelId:b,MenuProps:x={},multiple:C,name:E,onBlur:_,onChange:M,onClose:R,onFocus:L,onOpen:$,open:N,readOnly:I,renderValue:k,required:P,SelectDisplayProps:G={},tabIndex:W,type:X,value:z,variant:J="standard",...Q}=e,[Y,q]=FF({controlled:z,default:u,name:"Select"}),[te,ne]=FF({controlled:N,default:c,name:"Select"}),le=F.useRef(null),ye=F.useRef(null),[ue,ve]=F.useState(null),{current:xe}=F.useRef(N!=null),[Pe,ze]=F.useState(),Ke=Vl(t,v),pt=F.useCallback(Te=>{ye.current=Te,Te&&ve(Te)},[]),dt=ue==null?void 0:ue.parentNode;F.useImperativeHandle(Ke,()=>({focus:()=>{ye.current.focus()},node:le.current,value:Y}),[Y]),F.useEffect(()=>{c&&te&&ue&&!xe&&(ze(a?null:dt.clientWidth),ye.current.focus())},[ue,a]),F.useEffect(()=>{s&&ye.current.focus()},[s]),F.useEffect(()=>{if(!b)return;const Te=uf(ye.current).getElementById(b);if(Te){const qe=()=>{getSelection().isCollapsed&&ye.current.focus()};return Te.addEventListener("click",qe),()=>{Te.removeEventListener("click",qe)}}},[b]);const pe=(Te,qe)=>{Te?$&&$(qe):R&&R(qe),xe||(ze(a?null:dt.clientWidth),ne(Te))},Le=Te=>{Te.button===0&&(Te.preventDefault(),ye.current.focus(),pe(!0,Te))},Ue=Te=>{pe(!1,Te)},Ze=F.Children.toArray(o),je=Te=>{const qe=Ze.find($t=>$t.props.value===Te.target.value);qe!==void 0&&(q(qe.props.value),M&&M(Te,qe))},lt=Te=>qe=>{let $t;if(qe.currentTarget.hasAttribute("tabindex")){if(C){$t=Array.isArray(Y)?Y.slice():[];const en=Y.indexOf(Te.props.value);en===-1?$t.push(Te.props.value):$t.splice(en,1)}else $t=Te.props.value;if(Te.props.onClick&&Te.props.onClick(qe),Y!==$t&&(q($t),M)){const en=qe.nativeEvent||qe,Vt=new en.constructor(en.type,en);Object.defineProperty(Vt,"target",{writable:!0,value:{value:$t,name:E}}),M(Vt,Te)}C||pe(!1,qe)}},st=Te=>{I||[" ","ArrowUp","ArrowDown","Enter"].includes(Te.key)&&(Te.preventDefault(),pe(!0,Te))},ot=ue!==null&&te,Ut=Te=>{!ot&&_&&(Object.defineProperty(Te,"target",{writable:!0,value:{value:Y,name:E}}),_(Te))};delete Q["aria-invalid"];let mt,ce;const re=[];let $e=!1;(kN({value:Y})||h)&&(k?mt=k(Y):$e=!0);const Xe=Ze.map(Te=>{if(!F.isValidElement(Te))return null;let qe;if(C){if(!Array.isArray(Y))throw new Error(Gp(2));qe=Y.some($t=>nq($t,Te.props.value)),qe&&$e&&re.push(Te.props.children)}else qe=nq(Y,Te.props.value),qe&&$e&&(ce=Te.props.children);return F.cloneElement(Te,{"aria-selected":qe?"true":"false",onClick:lt(Te),onKeyUp:$t=>{$t.key===" "&&$t.preventDefault(),Te.props.onKeyUp&&Te.props.onKeyUp($t)},role:"option",selected:qe,value:void 0,"data-value":Te.props.value})});$e&&(C?re.length===0?mt=null:mt=re.reduce((Te,qe,$t)=>(Te.push(qe),$t<re.length-1&&Te.push(", "),Te),[]):mt=ce);let at=Pe;!a&&xe&&ue&&(at=dt.clientWidth);let et;typeof W<"u"?et=W:et=d?null:0;const Ft=G.id||(E?`mui-component-select-${E}`:void 0),At={...e,variant:J,value:Y,open:ot,error:p},_t=Bst(At),Xt={...x.PaperProps,...typeof((an=x.slotProps)==null?void 0:an.paper)=="function"?x.slotProps.paper(At):(tn=x.slotProps)==null?void 0:tn.paper},yt={...x.MenuListProps,...typeof((zt=x.slotProps)==null?void 0:zt.list)=="function"?x.slotProps.list(At):(hn=x.slotProps)==null?void 0:hn.list},Mt=sS();return V.jsxs(F.Fragment,{children:[V.jsx(Ist,{as:"div",ref:pt,tabIndex:et,role:"combobox","aria-controls":ot?Mt:void 0,"aria-disabled":d?"true":void 0,"aria-expanded":ot?"true":"false","aria-haspopup":"listbox","aria-label":i,"aria-labelledby":[b,Ft].filter(Boolean).join(" ")||void 0,"aria-describedby":r,"aria-required":P?"true":void 0,"aria-invalid":p?"true":void 0,onKeyDown:st,onMouseDown:d||I?null:Le,onBlur:Ut,onFocus:L,...G,ownerState:At,className:Pn(G.className,_t.select,l),id:Ft,children:Ost(mt)?tq||(tq=V.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):mt}),V.jsx(kst,{"aria-invalid":p,value:Array.isArray(Y)?Y.join(","):Y,name:E,ref:le,"aria-hidden":!0,onChange:je,tabIndex:-1,disabled:d,className:_t.nativeInput,autoFocus:s,required:P,...Q,ownerState:At}),V.jsx(Dst,{as:g,className:_t.icon,ownerState:At}),V.jsx(Est,{id:`menu-${E||""}`,anchorEl:dt,open:ot,onClose:Ue,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...x,slotProps:{...x.slotProps,list:{"aria-labelledby":b,role:"listbox","aria-multiselectable":C?"true":void 0,disableListWrap:!0,id:Mt,...yt},paper:{...Xt,style:{minWidth:at,...Xt!=null?Xt.style:null}}},children:Xe})]})}),Lst=Bo(V.jsx("path",{d:"M7 10l5 5 5-5z"}));function Fst(n){return Fr("MuiInput",n)}const Gw={...C1,...yr("MuiInput",["root","underline","input"])},Pst=n=>{const{classes:e,disableUnderline:t}=n,i=Pr({root:["root",!t&&"underline"],input:["input"]},Fst,e);return{...e,...i}},Ust=on(q3,{shouldForwardProp:n=>Gl(n)||n==="classes",name:"MuiInput",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[...W3(n,e),!t.disableUnderline&&e.underline]}})(li(({theme:n})=>{let t=n.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return n.vars&&(t=n.alpha(n.vars.palette.common.onBackground,n.vars.opacity.inputUnderline)),{position:"relative",variants:[{props:({ownerState:r})=>r.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:r})=>!r.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Gw.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Gw.error}`]:{"&::before, &::after":{borderBottomColor:(n.vars||n).palette.error.main}},"&::before":{borderBottom:`1px solid ${t}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Gw.disabled}, .${Gw.error}):before`]:{borderBottom:`2px solid ${(n.vars||n).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${t}`}},[`&.${Gw.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(n.palette).filter(Fl()).map(([r])=>({props:{color:r,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(n.vars||n).palette[r].main}`}}}))]}})),zst=on(X3,{name:"MuiInput",slot:"Input",overridesResolver:j3})({}),m6=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiInput"}),{disableUnderline:i=!1,components:s={},componentsProps:a,fullWidth:o=!1,inputComponent:l="input",multiline:c=!1,slotProps:u,slots:d={},type:h="text",...p}=r,g=Pst(r),b={root:{ownerState:{disableUnderline:i}}},x=u??a?io(u??a,b):b,C=d.root??s.Root??Ust,E=d.input??s.Input??zst;return V.jsx(c6,{slots:{root:C,input:E},slotProps:x,fullWidth:o,inputComponent:l,multiline:c,ref:t,type:h,...p,classes:g})});m6.muiName="Input";function Hst(n){return Fr("MuiFilledInput",n)}const fy={...C1,...yr("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},Vst=n=>{const{classes:e,disableUnderline:t,startAdornment:r,endAdornment:i,size:s,hiddenLabel:a,multiline:o}=n,l={root:["root",!t&&"underline",r&&"adornedStart",i&&"adornedEnd",s==="small"&&`size${Rn(s)}`,a&&"hiddenLabel",o&&"multiline"],input:["input"]},c=Pr(l,Hst,e);return{...e,...c}},Gst=on(q3,{shouldForwardProp:n=>Gl(n)||n==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[...W3(n,e),!t.disableUnderline&&e.underline]}})(li(({theme:n})=>{const e=n.palette.mode==="light",t=e?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=e?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",i=e?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",s=e?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:n.vars?n.vars.palette.FilledInput.bg:r,borderTopLeftRadius:(n.vars||n).shape.borderRadius,borderTopRightRadius:(n.vars||n).shape.borderRadius,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),"&:hover":{backgroundColor:n.vars?n.vars.palette.FilledInput.hoverBg:i,"@media (hover: none)":{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:r}},[`&.${fy.focused}`]:{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:r},[`&.${fy.disabled}`]:{backgroundColor:n.vars?n.vars.palette.FilledInput.disabledBg:s},variants:[{props:({ownerState:a})=>!a.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${fy.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${fy.error}`]:{"&::before, &::after":{borderBottomColor:(n.vars||n).palette.error.main}},"&::before":{borderBottom:`1px solid ${n.vars?n.alpha(n.vars.palette.common.onBackground,n.vars.opacity.inputUnderline):t}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${fy.disabled}, .${fy.error}):before`]:{borderBottom:`1px solid ${(n.vars||n).palette.text.primary}`},[`&.${fy.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(n.palette).filter(Fl()).map(([a])=>{var o;return{props:{disableUnderline:!1,color:a},style:{"&::after":{borderBottom:`2px solid ${(o=(n.vars||n).palette[a])==null?void 0:o.main}`}}}}),{props:({ownerState:a})=>a.startAdornment,style:{paddingLeft:12}},{props:({ownerState:a})=>a.endAdornment,style:{paddingRight:12}},{props:({ownerState:a})=>a.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:a,size:o})=>a.multiline&&o==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:a})=>a.multiline&&a.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:a})=>a.multiline&&a.hiddenLabel&&a.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),Wst=on(X3,{name:"MuiFilledInput",slot:"Input",overridesResolver:j3})(li(({theme:n})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!n.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:n.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:n.palette.mode==="light"?null:"#fff",caretColor:n.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...n.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[n.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:e})=>e.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:0}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:0}},{props:({ownerState:e})=>e.hiddenLabel&&e.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:e})=>e.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),g6=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiFilledInput"}),{disableUnderline:i=!1,components:s={},componentsProps:a,fullWidth:o=!1,hiddenLabel:l,inputComponent:c="input",multiline:u=!1,slotProps:d,slots:h={},type:p="text",...g}=r,v={...r,disableUnderline:i,fullWidth:o,inputComponent:c,multiline:u,type:p},b=Vst(r),x={root:{ownerState:v},input:{ownerState:v}},C=d??a?io(x,d??a):x,E=h.root??s.Root??Gst,_=h.input??s.Input??Wst;return V.jsx(c6,{slots:{root:E,input:_},slotProps:C,fullWidth:o,inputComponent:c,multiline:u,ref:t,type:p,...g,classes:b})});g6.muiName="Input";const jst=n=>{const{classes:e}=n,r=Pr({root:["root"]},$ae,e);return{...e,...r}},y6={name:"MuiSelect",slot:"Root",shouldForwardProp:n=>Gl(n)&&n!=="variant"},qst=on(m6,y6)(""),Xst=on(K3,y6)(""),Kst=on(g6,y6)(""),v6=F.forwardRef(function(e,t){const r=Gr({name:"MuiSelect",props:e}),{autoWidth:i=!1,children:s,classes:a={},className:o,defaultOpen:l=!1,displayEmpty:c=!1,IconComponent:u=Lst,id:d,input:h,inputProps:p,label:g,labelId:v,MenuProps:b,multiple:x=!1,native:C=!1,onClose:E,onOpen:_,open:M,renderValue:R,SelectDisplayProps:L,variant:$="outlined",...N}=r,I=C?Nst:$st,k=e0(),P=Lv({props:r,muiFormControl:k,states:["variant","error"]}),G=P.variant||$,W={...r,variant:G,classes:a},X=jst(W),{root:z,...J}=X,Q=h||{standard:V.jsx(qst,{ownerState:W}),outlined:V.jsx(Xst,{label:g,ownerState:W}),filled:V.jsx(Kst,{ownerState:W})}[G],Y=Vl(t,b2(Q));return V.jsx(F.Fragment,{children:F.cloneElement(Q,{inputComponent:I,inputProps:{children:s,error:P.error,IconComponent:u,variant:G,type:void 0,multiple:x,...C?{id:d}:{autoWidth:i,defaultOpen:l,displayEmpty:c,labelId:v,MenuProps:b,onClose:E,onOpen:_,open:M,renderValue:R,SelectDisplayProps:{id:d,...L}},...p,classes:p?io(J,p.classes):J,...h?h.props.inputProps:{}},...(x&&C||c)&&G==="outlined"?{notched:!0}:{},ref:Y,className:Pn(Q.props.className,o,X.root),...!h&&{variant:G},...N})})});v6.muiName="Select";const rq=yr("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper","icon"]),Yst=Bo(V.jsx("path",{d:"m12 5.83 2.46 2.46c.39.39 1.02.39 1.41 0s.39-1.02 0-1.41L12.7 3.7a.996.996 0 0 0-1.41 0L8.12 6.88c-.39.39-.39 1.02 0 1.41s1.02.39 1.41 0zm0 12.34-2.46-2.46a.996.996 0 0 0-1.41 0c-.39.39-.39 1.02 0 1.41l3.17 3.18c.39.39 1.02.39 1.41 0l3.17-3.17c.39-.39.39-1.02 0-1.41a.996.996 0 0 0-1.41 0z"})),Jst={MuiMenuItem:{styleOverrides:{root:({theme:n})=>({borderRadius:(n.vars||n).shape.borderRadius,padding:"6px 8px",[`&.${sg.focusVisible}`]:{backgroundColor:"transparent"},[`&.${sg.selected}`]:{[`&.${sg.focusVisible}`]:{backgroundColor:ar(n.palette.action.selected,.3)}}})}},MuiMenu:{styleOverrides:{list:{gap:"0px",[`&.${HF.root}`]:{margin:"0 -8px"}},paper:({theme:n})=>({marginTop:"4px",borderRadius:(n.vars||n).shape.borderRadius,border:`1px solid ${(n.vars||n).palette.divider}`,backgroundImage:"none",background:"hsl(0, 0%, 100%)",boxShadow:"hsla(220, 30%, 5%, 0.07) 0px 4px 16px 0px, hsla(220, 25%, 10%, 0.07) 0px 8px 16px -5px",[`& .${h6.root}`]:{"&.Mui-selected":{backgroundColor:ar(n.palette.action.selected,.3)}},...n.applyStyles("dark",{background:Yt[900],boxShadow:"hsla(220, 30%, 5%, 0.7) 0px 4px 16px 0px, hsla(220, 25%, 10%, 0.8) 0px 8px 16px -5px"})})}},MuiSelect:{defaultProps:{IconComponent:F.forwardRef((n,e)=>V.jsx(Yst,{fontSize:"small",...n,ref:e}))},styleOverrides:{root:({theme:n})=>({borderRadius:(n.vars||n).shape.borderRadius,border:"1px solid",borderColor:Yt[200],backgroundColor:(n.vars||n).palette.background.paper,boxShadow:"inset 0 1px 0 1px hsla(220, 0%, 100%, 0.6), inset 0 -1px 0 1px hsla(220, 35%, 90%, 0.5)","&:hover":{borderColor:Yt[300],backgroundColor:(n.vars||n).palette.background.paper,boxShadow:"none"},[`&.${Ay.focused}`]:{outlineOffset:0,borderColor:Yt[400]},"&:before, &:after":{display:"none"},...n.applyStyles("dark",{borderRadius:(n.vars||n).shape.borderRadius,borderColor:Yt[700],backgroundColor:(n.vars||n).palette.background.paper,boxShadow:`inset 0 1px 0 1px ${ar(Yt[700],.15)}, inset 0 -1px 0 1px hsla(220, 0%, 0%, 0.7)`,"&:hover":{borderColor:ar(Yt[700],.7),backgroundColor:(n.vars||n).palette.background.paper,boxShadow:"none"},[`&.${Ay.focused}`]:{outlineOffset:0,borderColor:Yt[900]},"&:before, &:after":{display:"none"}})}),select:({theme:n})=>({display:"flex",alignItems:"center",...n.applyStyles("dark",{display:"flex",alignItems:"center","&:focus-visible":{backgroundColor:Yt[900]}})})}},MuiLink:{defaultProps:{underline:"none"},styleOverrides:{root:({theme:n})=>({color:(n.vars||n).palette.text.primary,fontWeight:500,position:"relative",textDecoration:"none",width:"fit-content","&::before":{content:'""',position:"absolute",width:"100%",height:"1px",bottom:0,left:0,backgroundColor:(n.vars||n).palette.text.secondary,opacity:.3,transition:"width 0.3s ease, opacity 0.3s ease"},"&:hover::before":{width:0},"&:focus-visible":{outline:`3px solid ${ar(Ln[500],.5)}`,outlineOffset:"4px",borderRadius:"2px"}})}},MuiDrawer:{styleOverrides:{paper:({theme:n})=>({backgroundColor:(n.vars||n).palette.background.default})}},MuiPaginationItem:{styleOverrides:{root:({theme:n})=>({"&.Mui-selected":{color:"white",backgroundColor:(n.vars||n).palette.grey[900]},...n.applyStyles("dark",{"&.Mui-selected":{color:"black",backgroundColor:(n.vars||n).palette.grey[50]}})})}},MuiTabs:{styleOverrides:{root:{minHeight:"fit-content"},indicator:({theme:n})=>({backgroundColor:(n.vars||n).palette.grey[800],...n.applyStyles("dark",{backgroundColor:(n.vars||n).palette.grey[200]})})}},MuiTab:{styleOverrides:{root:({theme:n})=>({padding:"6px 8px",marginBottom:"8px",textTransform:"none",minWidth:"fit-content",minHeight:"fit-content",color:(n.vars||n).palette.text.secondary,borderRadius:(n.vars||n).shape.borderRadius,border:"1px solid",borderColor:"transparent",":hover":{color:(n.vars||n).palette.text.primary,backgroundColor:Yt[100],borderColor:Yt[200]},[`&.${rq.selected}`]:{color:Yt[900]},...n.applyStyles("dark",{":hover":{color:(n.vars||n).palette.text.primary,backgroundColor:Yt[800],borderColor:Yt[700]},[`&.${rq.selected}`]:{color:"#fff"}})})}},MuiStepConnector:{styleOverrides:{line:({theme:n})=>({borderTop:"1px solid",borderColor:(n.vars||n).palette.divider,flex:1,borderRadius:"99px"})}},MuiStepIcon:{styleOverrides:{root:({theme:n})=>({color:"transparent",border:`1px solid ${Yt[400]}`,width:12,height:12,borderRadius:"50%","& text":{display:"none"},"&.Mui-active":{border:"none",color:(n.vars||n).palette.primary.main},"&.Mui-completed":{border:"none",color:(n.vars||n).palette.success.main},...n.applyStyles("dark",{border:`1px solid ${Yt[700]}`,"&.Mui-active":{border:"none",color:(n.vars||n).palette.primary.light},"&.Mui-completed":{border:"none",color:(n.vars||n).palette.success.light}}),variants:[{props:{completed:!0},style:{width:12,height:12}}]})}},MuiStepLabel:{styleOverrides:{label:({theme:n})=>({"&.Mui-completed":{opacity:.6,...n.applyStyles("dark",{opacity:.5})}})}}},Zst={MuiAccordion:{defaultProps:{elevation:0,disableGutters:!0},styleOverrides:{root:({theme:n})=>({padding:4,overflow:"clip",backgroundColor:(n.vars||n).palette.background.default,border:"1px solid",borderColor:(n.vars||n).palette.divider,":before":{backgroundColor:"transparent"},"&:not(:last-of-type)":{borderBottom:"none"},"&:first-of-type":{borderTopLeftRadius:(n.vars||n).shape.borderRadius,borderTopRightRadius:(n.vars||n).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(n.vars||n).shape.borderRadius,borderBottomRightRadius:(n.vars||n).shape.borderRadius}})}},MuiAccordionSummary:{styleOverrides:{root:({theme:n})=>({border:"none",borderRadius:8,"&:hover":{backgroundColor:Yt[50]},"&:focus-visible":{backgroundColor:"transparent"},...n.applyStyles("dark",{"&:hover":{backgroundColor:Yt[800]}})})}},MuiAccordionDetails:{styleOverrides:{root:{mb:20,border:"none"}}},MuiPaper:{defaultProps:{elevation:0}},MuiCard:{styleOverrides:{root:({theme:n})=>({padding:16,gap:16,transition:"all 100ms ease",backgroundColor:Yt[50],borderRadius:(n.vars||n).shape.borderRadius,border:`1px solid ${(n.vars||n).palette.divider}`,boxShadow:"none",...n.applyStyles("dark",{backgroundColor:Yt[800]}),variants:[{props:{variant:"outlined"},style:{border:`1px solid ${(n.vars||n).palette.divider}`,boxShadow:"none",background:"hsl(0, 0%, 100%)",...n.applyStyles("dark",{background:ar(Yt[900],.4)})}}]})}},MuiCardContent:{styleOverrides:{root:{padding:0,"&:last-child":{paddingBottom:0}}}},MuiCardHeader:{styleOverrides:{root:{padding:0}}},MuiCardActions:{styleOverrides:{root:{padding:0}}}};function b6(n){const{children:e,disableCustomTheme:t,themeComponents:r}=n,i=F.useMemo(()=>t?{}:y2({cssVariables:{colorSchemeSelector:"data-mui-color-scheme",cssVarPrefix:"template"},colorSchemes:Zrt,typography:Qrt,shadows:nit,shape:eit,components:{...rit,...Cit,..._it,...Jst,...Zst,...r}}),[t,r]);return t?V.jsx(F.Fragment,{children:e}):V.jsx(srt,{theme:i,disableTransitionOnChange:!0,children:e})}b6.propTypes={children:vi.node,disableCustomTheme:vi.bool,themeComponents:vi.object};function Lae(n){const{mode:e,setMode:t}=rrt();return e?V.jsxs(v6,{value:e,onChange:r=>t(r.target.value),SelectDisplayProps:{"data-screenshot":"toggle-mode"},...n,children:[V.jsx(v$,{value:"system",children:"System"}),V.jsx(v$,{value:"light",children:"Light"}),V.jsx(v$,{value:"dark",children:"Dark"})]}):null}function Fae(n,e){return function(){return n.apply(e,arguments)}}const{toString:Qst}=Object.prototype,{getPrototypeOf:x6}=Object,{iterator:Z3,toStringTag:Pae}=Symbol,Q3=(n=>e=>{const t=Qst.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),gf=n=>(n=n.toLowerCase(),e=>Q3(e)===n),ek=n=>e=>typeof e===n,{isArray:aS}=Array,_1=ek("undefined");function S2(n){return n!==null&&!_1(n)&&n.constructor!==null&&!_1(n.constructor)&&xc(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const Uae=gf("ArrayBuffer");function eat(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&Uae(n.buffer),e}const tat=ek("string"),xc=ek("function"),zae=ek("number"),w2=n=>n!==null&&typeof n=="object",nat=n=>n===!0||n===!1,LM=n=>{if(Q3(n)!=="object")return!1;const e=x6(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Pae in n)&&!(Z3 in n)},rat=n=>{if(!w2(n)||S2(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},iat=gf("Date"),sat=gf("File"),aat=gf("Blob"),oat=gf("FileList"),lat=n=>w2(n)&&xc(n.pipe),cat=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||xc(n.append)&&((e=Q3(n))==="formdata"||e==="object"&&xc(n.toString)&&n.toString()==="[object FormData]"))},uat=gf("URLSearchParams"),[dat,fat,hat,pat]=["ReadableStream","Request","Response","Headers"].map(gf),mat=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function C2(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,i;if(typeof n!="object"&&(n=[n]),aS(n))for(r=0,i=n.length;r<i;r++)e.call(null,n[r],r,n);else{if(S2(n))return;const s=t?Object.getOwnPropertyNames(n):Object.keys(n),a=s.length;let o;for(r=0;r<a;r++)o=s[r],e.call(null,n[o],o,n)}}function Hae(n,e){if(S2(n))return null;e=e.toLowerCase();const t=Object.keys(n);let r=t.length,i;for(;r-- >0;)if(i=t[r],e===i.toLowerCase())return i;return null}const Fy=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Vae=n=>!_1(n)&&n!==Fy;function qF(){const{caseless:n,skipUndefined:e}=Vae(this)&&this||{},t={},r=(i,s)=>{const a=n&&Hae(t,s)||s;LM(t[a])&&LM(i)?t[a]=qF(t[a],i):LM(i)?t[a]=qF({},i):aS(i)?t[a]=i.slice():(!e||!_1(i))&&(t[a]=i)};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&C2(arguments[i],r);return t}const gat=(n,e,t,{allOwnKeys:r}={})=>(C2(e,(i,s)=>{t&&xc(i)?n[s]=Fae(i,t):n[s]=i},{allOwnKeys:r}),n),yat=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),vat=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},bat=(n,e,t,r)=>{let i,s,a;const o={};if(e=e||{},n==null)return e;do{for(i=Object.getOwnPropertyNames(n),s=i.length;s-- >0;)a=i[s],(!r||r(a,n,e))&&!o[a]&&(e[a]=n[a],o[a]=!0);n=t!==!1&&x6(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},xat=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},Sat=n=>{if(!n)return null;if(aS(n))return n;let e=n.length;if(!zae(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},wat=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&x6(Uint8Array)),Cat=(n,e)=>{const r=(n&&n[Z3]).call(n);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(n,s[0],s[1])}},_at=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},Eat=gf("HTMLFormElement"),Aat=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,i){return r.toUpperCase()+i}),iq=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),Tat=gf("RegExp"),Gae=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};C2(t,(i,s)=>{let a;(a=e(i,s,n))!==!1&&(r[s]=a||i)}),Object.defineProperties(n,r)},Mat=n=>{Gae(n,(e,t)=>{if(xc(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(xc(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},Rat=(n,e)=>{const t={},r=i=>{i.forEach(s=>{t[s]=!0})};return aS(n)?r(n):r(String(n).split(e)),t},Nat=()=>{},Iat=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function Dat(n){return!!(n&&xc(n.append)&&n[Pae]==="FormData"&&n[Z3])}const kat=n=>{const e=new Array(10),t=(r,i)=>{if(w2(r)){if(e.indexOf(r)>=0)return;if(S2(r))return r;if(!("toJSON"in r)){e[i]=r;const s=aS(r)?[]:{};return C2(r,(a,o)=>{const l=t(a,i+1);!_1(l)&&(s[o]=l)}),e[i]=void 0,s}}return r};return t(n,0)},Oat=gf("AsyncFunction"),Bat=n=>n&&(w2(n)||xc(n))&&xc(n.then)&&xc(n.catch),Wae=((n,e)=>n?setImmediate:e?((t,r)=>(Fy.addEventListener("message",({source:i,data:s})=>{i===Fy&&s===t&&r.length&&r.shift()()},!1),i=>{r.push(i),Fy.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",xc(Fy.postMessage)),$at=typeof queueMicrotask<"u"?queueMicrotask.bind(Fy):typeof process<"u"&&process.nextTick||Wae,Lat=n=>n!=null&&xc(n[Z3]),wt={isArray:aS,isArrayBuffer:Uae,isBuffer:S2,isFormData:cat,isArrayBufferView:eat,isString:tat,isNumber:zae,isBoolean:nat,isObject:w2,isPlainObject:LM,isEmptyObject:rat,isReadableStream:dat,isRequest:fat,isResponse:hat,isHeaders:pat,isUndefined:_1,isDate:iat,isFile:sat,isBlob:aat,isRegExp:Tat,isFunction:xc,isStream:lat,isURLSearchParams:uat,isTypedArray:wat,isFileList:oat,forEach:C2,merge:qF,extend:gat,trim:mat,stripBOM:yat,inherits:vat,toFlatObject:bat,kindOf:Q3,kindOfTest:gf,endsWith:xat,toArray:Sat,forEachEntry:Cat,matchAll:_at,isHTMLForm:Eat,hasOwnProperty:iq,hasOwnProp:iq,reduceDescriptors:Gae,freezeMethods:Mat,toObjectSet:Rat,toCamelCase:Aat,noop:Nat,toFiniteNumber:Iat,findKey:Hae,global:Fy,isContextDefined:Vae,isSpecCompliantForm:Dat,toJSONObject:kat,isAsyncFn:Oat,isThenable:Bat,setImmediate:Wae,asap:$at,isIterable:Lat};function _r(n,e,t,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}wt.inherits(_r,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:wt.toJSONObject(this.config),code:this.code,status:this.status}}});const jae=_r.prototype,qae={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{qae[n]={value:n}});Object.defineProperties(_r,qae);Object.defineProperty(jae,"isAxiosError",{value:!0});_r.from=(n,e,t,r,i,s)=>{const a=Object.create(jae);wt.toFlatObject(n,a,function(u){return u!==Error.prototype},c=>c!=="isAxiosError");const o=n&&n.message?n.message:"Error",l=e==null&&n?n.code:e;return _r.call(a,o,l,t,r,i),n&&a.cause==null&&Object.defineProperty(a,"cause",{value:n,configurable:!0}),a.name=n&&n.name||"Error",s&&Object.assign(a,s),a};const Fat=null;function XF(n){return wt.isPlainObject(n)||wt.isArray(n)}function Xae(n){return wt.endsWith(n,"[]")?n.slice(0,-2):n}function sq(n,e,t){return n?n.concat(e).map(function(i,s){return i=Xae(i),!t&&s?"["+i+"]":i}).join(t?".":""):e}function Pat(n){return wt.isArray(n)&&!n.some(XF)}const Uat=wt.toFlatObject(wt,{},null,function(e){return/^is[A-Z]/.test(e)});function tk(n,e,t){if(!wt.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=wt.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,b){return!wt.isUndefined(b[v])});const r=t.metaTokens,i=t.visitor||u,s=t.dots,a=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&wt.isSpecCompliantForm(e);if(!wt.isFunction(i))throw new TypeError("visitor must be a function");function c(g){if(g===null)return"";if(wt.isDate(g))return g.toISOString();if(wt.isBoolean(g))return g.toString();if(!l&&wt.isBlob(g))throw new _r("Blob is not supported. Use a Buffer instead.");return wt.isArrayBuffer(g)||wt.isTypedArray(g)?l&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function u(g,v,b){let x=g;if(g&&!b&&typeof g=="object"){if(wt.endsWith(v,"{}"))v=r?v:v.slice(0,-2),g=JSON.stringify(g);else if(wt.isArray(g)&&Pat(g)||(wt.isFileList(g)||wt.endsWith(v,"[]"))&&(x=wt.toArray(g)))return v=Xae(v),x.forEach(function(E,_){!(wt.isUndefined(E)||E===null)&&e.append(a===!0?sq([v],_,s):a===null?v:v+"[]",c(E))}),!1}return XF(g)?!0:(e.append(sq(b,v,s),c(g)),!1)}const d=[],h=Object.assign(Uat,{defaultVisitor:u,convertValue:c,isVisitable:XF});function p(g,v){if(!wt.isUndefined(g)){if(d.indexOf(g)!==-1)throw Error("Circular reference detected in "+v.join("."));d.push(g),wt.forEach(g,function(x,C){(!(wt.isUndefined(x)||x===null)&&i.call(e,x,wt.isString(C)?C.trim():C,v,h))===!0&&p(x,v?v.concat(C):[C])}),d.pop()}}if(!wt.isObject(n))throw new TypeError("data must be an object");return p(n),e}function aq(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function S6(n,e){this._pairs=[],n&&tk(n,this,e)}const Kae=S6.prototype;Kae.append=function(e,t){this._pairs.push([e,t])};Kae.toString=function(e){const t=e?function(r){return e.call(this,r,aq)}:aq;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function zat(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Yae(n,e,t){if(!e)return n;const r=t&&t.encode||zat;wt.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let s;if(i?s=i(e,t):s=wt.isURLSearchParams(e)?e.toString():new S6(e,t).toString(r),s){const a=n.indexOf("#");a!==-1&&(n=n.slice(0,a)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n}class oq{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){wt.forEach(this.handlers,function(r){r!==null&&e(r)})}}const Jae={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Hat=typeof URLSearchParams<"u"?URLSearchParams:S6,Vat=typeof FormData<"u"?FormData:null,Gat=typeof Blob<"u"?Blob:null,Wat={isBrowser:!0,classes:{URLSearchParams:Hat,FormData:Vat,Blob:Gat},protocols:["http","https","file","blob","url","data"]},w6=typeof window<"u"&&typeof document<"u",KF=typeof navigator=="object"&&navigator||void 0,jat=w6&&(!KF||["ReactNative","NativeScript","NS"].indexOf(KF.product)<0),qat=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Xat=w6&&window.location.href||"http://localhost",Kat=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:w6,hasStandardBrowserEnv:jat,hasStandardBrowserWebWorkerEnv:qat,navigator:KF,origin:Xat},Symbol.toStringTag,{value:"Module"})),el={...Kat,...Wat};function Yat(n,e){return tk(n,new el.classes.URLSearchParams,{visitor:function(t,r,i,s){return el.isNode&&wt.isBuffer(t)?(this.append(r,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...e})}function Jat(n){return wt.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Zat(n){const e={},t=Object.keys(n);let r;const i=t.length;let s;for(r=0;r<i;r++)s=t[r],e[s]=n[s];return e}function Zae(n){function e(t,r,i,s){let a=t[s++];if(a==="__proto__")return!0;const o=Number.isFinite(+a),l=s>=t.length;return a=!a&&wt.isArray(i)?i.length:a,l?(wt.hasOwnProp(i,a)?i[a]=[i[a],r]:i[a]=r,!o):((!i[a]||!wt.isObject(i[a]))&&(i[a]=[]),e(t,r,i[a],s)&&wt.isArray(i[a])&&(i[a]=Zat(i[a])),!o)}if(wt.isFormData(n)&&wt.isFunction(n.entries)){const t={};return wt.forEachEntry(n,(r,i)=>{e(Jat(r),i,t,0)}),t}return null}function Qat(n,e,t){if(wt.isString(n))try{return(e||JSON.parse)(n),wt.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}const _2={transitional:Jae,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",i=r.indexOf("application/json")>-1,s=wt.isObject(e);if(s&&wt.isHTMLForm(e)&&(e=new FormData(e)),wt.isFormData(e))return i?JSON.stringify(Zae(e)):e;if(wt.isArrayBuffer(e)||wt.isBuffer(e)||wt.isStream(e)||wt.isFile(e)||wt.isBlob(e)||wt.isReadableStream(e))return e;if(wt.isArrayBufferView(e))return e.buffer;if(wt.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Yat(e,this.formSerializer).toString();if((o=wt.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return tk(o?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(t.setContentType("application/json",!1),Qat(e)):e}],transformResponse:[function(e){const t=this.transitional||_2.transitional,r=t&&t.forcedJSONParsing,i=this.responseType==="json";if(wt.isResponse(e)||wt.isReadableStream(e))return e;if(e&&wt.isString(e)&&(r&&!this.responseType||i)){const a=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(o){if(a)throw o.name==="SyntaxError"?_r.from(o,_r.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:el.classes.FormData,Blob:el.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};wt.forEach(["delete","get","head","post","put","patch"],n=>{_2.headers[n]={}});const eot=wt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),tot=n=>{const e={};let t,r,i;return n&&n.split(`
`).forEach(function(a){i=a.indexOf(":"),t=a.substring(0,i).trim().toLowerCase(),r=a.substring(i+1).trim(),!(!t||e[t]&&eot[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},lq=Symbol("internals");function Ww(n){return n&&String(n).trim().toLowerCase()}function FM(n){return n===!1||n==null?n:wt.isArray(n)?n.map(FM):String(n)}function not(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const rot=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function w$(n,e,t,r,i){if(wt.isFunction(r))return r.call(this,e,t);if(i&&(e=t),!!wt.isString(e)){if(wt.isString(r))return e.indexOf(r)!==-1;if(wt.isRegExp(r))return r.test(e)}}function iot(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function sot(n,e){const t=wt.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(i,s,a){return this[r].call(this,e,i,s,a)},configurable:!0})})}let Sc=class{constructor(e){e&&this.set(e)}set(e,t,r){const i=this;function s(o,l,c){const u=Ww(l);if(!u)throw new Error("header name must be a non-empty string");const d=wt.findKey(i,u);(!d||i[d]===void 0||c===!0||c===void 0&&i[d]!==!1)&&(i[d||l]=FM(o))}const a=(o,l)=>wt.forEach(o,(c,u)=>s(c,u,l));if(wt.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(wt.isString(e)&&(e=e.trim())&&!rot(e))a(tot(e),t);else if(wt.isObject(e)&&wt.isIterable(e)){let o={},l,c;for(const u of e){if(!wt.isArray(u))throw TypeError("Object iterator must return a key-value pair");o[c=u[0]]=(l=o[c])?wt.isArray(l)?[...l,u[1]]:[l,u[1]]:u[1]}a(o,t)}else e!=null&&s(t,e,r);return this}get(e,t){if(e=Ww(e),e){const r=wt.findKey(this,e);if(r){const i=this[r];if(!t)return i;if(t===!0)return not(i);if(wt.isFunction(t))return t.call(this,i,r);if(wt.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Ww(e),e){const r=wt.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||w$(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let i=!1;function s(a){if(a=Ww(a),a){const o=wt.findKey(r,a);o&&(!t||w$(r,r[o],o,t))&&(delete r[o],i=!0)}}return wt.isArray(e)?e.forEach(s):s(e),i}clear(e){const t=Object.keys(this);let r=t.length,i=!1;for(;r--;){const s=t[r];(!e||w$(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const t=this,r={};return wt.forEach(this,(i,s)=>{const a=wt.findKey(r,s);if(a){t[a]=FM(i),delete t[s];return}const o=e?iot(s):String(s).trim();o!==s&&delete t[s],t[o]=FM(i),r[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return wt.forEach(this,(r,i)=>{r!=null&&r!==!1&&(t[i]=e&&wt.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[lq]=this[lq]={accessors:{}}).accessors,i=this.prototype;function s(a){const o=Ww(a);r[o]||(sot(i,a),r[o]=!0)}return wt.isArray(e)?e.forEach(s):s(e),this}};Sc.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);wt.reduceDescriptors(Sc.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});wt.freezeMethods(Sc);function C$(n,e){const t=this||_2,r=e||t,i=Sc.from(r.headers);let s=r.data;return wt.forEach(n,function(o){s=o.call(t,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function Qae(n){return!!(n&&n.__CANCEL__)}function oS(n,e,t){_r.call(this,n??"canceled",_r.ERR_CANCELED,e,t),this.name="CanceledError"}wt.inherits(oS,_r,{__CANCEL__:!0});function eoe(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new _r("Request failed with status code "+t.status,[_r.ERR_BAD_REQUEST,_r.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function aot(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function oot(n,e){n=n||10;const t=new Array(n),r=new Array(n);let i=0,s=0,a;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=r[s];a||(a=c),t[i]=l,r[i]=c;let d=s,h=0;for(;d!==i;)h+=t[d++],d=d%n;if(i=(i+1)%n,i===s&&(s=(s+1)%n),c-a<e)return;const p=u&&c-u;return p?Math.round(h*1e3/p):void 0}}function lot(n,e){let t=0,r=1e3/e,i,s;const a=(c,u=Date.now())=>{t=u,i=null,s&&(clearTimeout(s),s=null),n(...c)};return[(...c)=>{const u=Date.now(),d=u-t;d>=r?a(c,u):(i=c,s||(s=setTimeout(()=>{s=null,a(i)},r-d)))},()=>i&&a(i)]}const PN=(n,e,t=3)=>{let r=0;const i=oot(50,250);return lot(s=>{const a=s.loaded,o=s.lengthComputable?s.total:void 0,l=a-r,c=i(l),u=a<=o;r=a;const d={loaded:a,total:o,progress:o?a/o:void 0,bytes:l,rate:c||void 0,estimated:c&&o&&u?(o-a)/c:void 0,event:s,lengthComputable:o!=null,[e?"download":"upload"]:!0};n(d)},t)},cq=(n,e)=>{const t=n!=null;return[r=>e[0]({lengthComputable:t,total:n,loaded:r}),e[1]]},uq=n=>(...e)=>wt.asap(()=>n(...e)),cot=el.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,el.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(el.origin),el.navigator&&/(msie|trident)/i.test(el.navigator.userAgent)):()=>!0,uot=el.hasStandardBrowserEnv?{write(n,e,t,r,i,s){const a=[n+"="+encodeURIComponent(e)];wt.isNumber(t)&&a.push("expires="+new Date(t).toGMTString()),wt.isString(r)&&a.push("path="+r),wt.isString(i)&&a.push("domain="+i),s===!0&&a.push("secure"),document.cookie=a.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function dot(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function fot(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function toe(n,e,t){let r=!dot(e);return n&&(r||t==!1)?fot(n,e):e}const dq=n=>n instanceof Sc?{...n}:n;function Sv(n,e){e=e||{};const t={};function r(c,u,d,h){return wt.isPlainObject(c)&&wt.isPlainObject(u)?wt.merge.call({caseless:h},c,u):wt.isPlainObject(u)?wt.merge({},u):wt.isArray(u)?u.slice():u}function i(c,u,d,h){if(wt.isUndefined(u)){if(!wt.isUndefined(c))return r(void 0,c,d,h)}else return r(c,u,d,h)}function s(c,u){if(!wt.isUndefined(u))return r(void 0,u)}function a(c,u){if(wt.isUndefined(u)){if(!wt.isUndefined(c))return r(void 0,c)}else return r(void 0,u)}function o(c,u,d){if(d in e)return r(c,u);if(d in n)return r(void 0,c)}const l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(c,u,d)=>i(dq(c),dq(u),d,!0)};return wt.forEach(Object.keys({...n,...e}),function(u){const d=l[u]||i,h=d(n[u],e[u],u);wt.isUndefined(h)&&d!==o||(t[u]=h)}),t}const noe=n=>{const e=Sv({},n);let{data:t,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:a,auth:o}=e;if(e.headers=a=Sc.from(a),e.url=Yae(toe(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),o&&a.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),wt.isFormData(t)){if(el.hasStandardBrowserEnv||el.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(wt.isFunction(t.getHeaders)){const l=t.getHeaders(),c=["content-type","content-length"];Object.entries(l).forEach(([u,d])=>{c.includes(u.toLowerCase())&&a.set(u,d)})}}if(el.hasStandardBrowserEnv&&(r&&wt.isFunction(r)&&(r=r(e)),r||r!==!1&&cot(e.url))){const l=i&&s&&uot.read(s);l&&a.set(i,l)}return e},hot=typeof XMLHttpRequest<"u",pot=hot&&function(n){return new Promise(function(t,r){const i=noe(n);let s=i.data;const a=Sc.from(i.headers).normalize();let{responseType:o,onUploadProgress:l,onDownloadProgress:c}=i,u,d,h,p,g;function v(){p&&p(),g&&g(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let b=new XMLHttpRequest;b.open(i.method.toUpperCase(),i.url,!0),b.timeout=i.timeout;function x(){if(!b)return;const E=Sc.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),M={data:!o||o==="text"||o==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:E,config:n,request:b};eoe(function(L){t(L),v()},function(L){r(L),v()},M),b=null}"onloadend"in b?b.onloadend=x:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(x)},b.onabort=function(){b&&(r(new _r("Request aborted",_r.ECONNABORTED,n,b)),b=null)},b.onerror=function(_){const M=_&&_.message?_.message:"Network Error",R=new _r(M,_r.ERR_NETWORK,n,b);R.event=_||null,r(R),b=null},b.ontimeout=function(){let _=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const M=i.transitional||Jae;i.timeoutErrorMessage&&(_=i.timeoutErrorMessage),r(new _r(_,M.clarifyTimeoutError?_r.ETIMEDOUT:_r.ECONNABORTED,n,b)),b=null},s===void 0&&a.setContentType(null),"setRequestHeader"in b&&wt.forEach(a.toJSON(),function(_,M){b.setRequestHeader(M,_)}),wt.isUndefined(i.withCredentials)||(b.withCredentials=!!i.withCredentials),o&&o!=="json"&&(b.responseType=i.responseType),c&&([h,g]=PN(c,!0),b.addEventListener("progress",h)),l&&b.upload&&([d,p]=PN(l),b.upload.addEventListener("progress",d),b.upload.addEventListener("loadend",p)),(i.cancelToken||i.signal)&&(u=E=>{b&&(r(!E||E.type?new oS(null,n,b):E),b.abort(),b=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const C=aot(i.url);if(C&&el.protocols.indexOf(C)===-1){r(new _r("Unsupported protocol "+C+":",_r.ERR_BAD_REQUEST,n));return}b.send(s||null)})},mot=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let r=new AbortController,i;const s=function(c){if(!i){i=!0,o();const u=c instanceof Error?c:this.reason;r.abort(u instanceof _r?u:new oS(u instanceof Error?u.message:u))}};let a=e&&setTimeout(()=>{a=null,s(new _r(`timeout ${e} of ms exceeded`,_r.ETIMEDOUT))},e);const o=()=>{n&&(a&&clearTimeout(a),a=null,n.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),n=null)};n.forEach(c=>c.addEventListener("abort",s));const{signal:l}=r;return l.unsubscribe=()=>wt.asap(o),l}},got=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let r=0,i;for(;r<t;)i=r+e,yield n.slice(r,i),r=i},yot=async function*(n,e){for await(const t of vot(n))yield*got(t,e)},vot=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},fq=(n,e,t,r)=>{const i=yot(n,e);let s=0,a,o=l=>{a||(a=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await i.next();if(c){o(),l.close();return}let d=u.byteLength;if(t){let h=s+=d;t(h)}l.enqueue(new Uint8Array(u))}catch(c){throw o(c),c}},cancel(l){return o(l),i.return()}},{highWaterMark:2})},hq=64*1024,{isFunction:cM}=wt,bot=(({Request:n,Response:e})=>({Request:n,Response:e}))(wt.global),{ReadableStream:pq,TextEncoder:mq}=wt.global,gq=(n,...e)=>{try{return!!n(...e)}catch{return!1}},xot=n=>{n=wt.merge.call({skipUndefined:!0},bot,n);const{fetch:e,Request:t,Response:r}=n,i=e?cM(e):typeof fetch=="function",s=cM(t),a=cM(r);if(!i)return!1;const o=i&&cM(pq),l=i&&(typeof mq=="function"?(g=>v=>g.encode(v))(new mq):async g=>new Uint8Array(await new t(g).arrayBuffer())),c=s&&o&&gq(()=>{let g=!1;const v=new t(el.origin,{body:new pq,method:"POST",get duplex(){return g=!0,"half"}}).headers.has("Content-Type");return g&&!v}),u=a&&o&&gq(()=>wt.isReadableStream(new r("").body)),d={stream:u&&(g=>g.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(g=>{!d[g]&&(d[g]=(v,b)=>{let x=v&&v[g];if(x)return x.call(v);throw new _r(`Response type '${g}' is not supported`,_r.ERR_NOT_SUPPORT,b)})});const h=async g=>{if(g==null)return 0;if(wt.isBlob(g))return g.size;if(wt.isSpecCompliantForm(g))return(await new t(el.origin,{method:"POST",body:g}).arrayBuffer()).byteLength;if(wt.isArrayBufferView(g)||wt.isArrayBuffer(g))return g.byteLength;if(wt.isURLSearchParams(g)&&(g=g+""),wt.isString(g))return(await l(g)).byteLength},p=async(g,v)=>{const b=wt.toFiniteNumber(g.getContentLength());return b??h(v)};return async g=>{let{url:v,method:b,data:x,signal:C,cancelToken:E,timeout:_,onDownloadProgress:M,onUploadProgress:R,responseType:L,headers:$,withCredentials:N="same-origin",fetchOptions:I}=noe(g),k=e||fetch;L=L?(L+"").toLowerCase():"text";let P=mot([C,E&&E.toAbortSignal()],_),G=null;const W=P&&P.unsubscribe&&(()=>{P.unsubscribe()});let X;try{if(R&&c&&b!=="get"&&b!=="head"&&(X=await p($,x))!==0){let te=new t(v,{method:"POST",body:x,duplex:"half"}),ne;if(wt.isFormData(x)&&(ne=te.headers.get("content-type"))&&$.setContentType(ne),te.body){const[le,ye]=cq(X,PN(uq(R)));x=fq(te.body,hq,le,ye)}}wt.isString(N)||(N=N?"include":"omit");const z=s&&"credentials"in t.prototype,J={...I,signal:P,method:b.toUpperCase(),headers:$.normalize().toJSON(),body:x,duplex:"half",credentials:z?N:void 0};G=s&&new t(v,J);let Q=await(s?k(G,I):k(v,J));const Y=u&&(L==="stream"||L==="response");if(u&&(M||Y&&W)){const te={};["status","statusText","headers"].forEach(ue=>{te[ue]=Q[ue]});const ne=wt.toFiniteNumber(Q.headers.get("content-length")),[le,ye]=M&&cq(ne,PN(uq(M),!0))||[];Q=new r(fq(Q.body,hq,le,()=>{ye&&ye(),W&&W()}),te)}L=L||"text";let q=await d[wt.findKey(d,L)||"text"](Q,g);return!Y&&W&&W(),await new Promise((te,ne)=>{eoe(te,ne,{data:q,headers:Sc.from(Q.headers),status:Q.status,statusText:Q.statusText,config:g,request:G})})}catch(z){throw W&&W(),z&&z.name==="TypeError"&&/Load failed|fetch/i.test(z.message)?Object.assign(new _r("Network Error",_r.ERR_NETWORK,g,G),{cause:z.cause||z}):_r.from(z,z&&z.code,g,G)}}},Sot=new Map,roe=n=>{let e=n?n.env:{};const{fetch:t,Request:r,Response:i}=e,s=[r,i,t];let a=s.length,o=a,l,c,u=Sot;for(;o--;)l=s[o],c=u.get(l),c===void 0&&u.set(l,c=o?new Map:xot(e)),u=c;return c};roe();const YF={http:Fat,xhr:pot,fetch:{get:roe}};wt.forEach(YF,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const yq=n=>`- ${n}`,wot=n=>wt.isFunction(n)||n===null||n===!1,ioe={getAdapter:(n,e)=>{n=wt.isArray(n)?n:[n];const{length:t}=n;let r,i;const s={};for(let a=0;a<t;a++){r=n[a];let o;if(i=r,!wot(r)&&(i=YF[(o=String(r)).toLowerCase()],i===void 0))throw new _r(`Unknown adapter '${o}'`);if(i&&(wt.isFunction(i)||(i=i.get(e))))break;s[o||"#"+a]=i}if(!i){const a=Object.entries(s).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=t?a.length>1?`since :
`+a.map(yq).join(`
`):" "+yq(a[0]):"as no adapter specified";throw new _r("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return i},adapters:YF};function _$(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new oS(null,n)}function vq(n){return _$(n),n.headers=Sc.from(n.headers),n.data=C$.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),ioe.getAdapter(n.adapter||_2.adapter,n)(n).then(function(r){return _$(n),r.data=C$.call(n,n.transformResponse,r),r.headers=Sc.from(r.headers),r},function(r){return Qae(r)||(_$(n),r&&r.response&&(r.response.data=C$.call(n,n.transformResponse,r.response),r.response.headers=Sc.from(r.response.headers))),Promise.reject(r)})}const soe="1.12.2",nk={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{nk[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const bq={};nk.transitional=function(e,t,r){function i(s,a){return"[Axios v"+soe+"] Transitional option '"+s+"'"+a+(r?". "+r:"")}return(s,a,o)=>{if(e===!1)throw new _r(i(a," has been removed"+(t?" in "+t:"")),_r.ERR_DEPRECATED);return t&&!bq[a]&&(bq[a]=!0,console.warn(i(a," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,a,o):!0}};nk.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function Cot(n,e,t){if(typeof n!="object")throw new _r("options must be an object",_r.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let i=r.length;for(;i-- >0;){const s=r[i],a=e[s];if(a){const o=n[s],l=o===void 0||a(o,s,n);if(l!==!0)throw new _r("option "+s+" must be "+l,_r.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new _r("Unknown option "+s,_r.ERR_BAD_OPTION)}}const PM={assertOptions:Cot,validators:nk},Zf=PM.validators;let Ky=class{constructor(e){this.defaults=e||{},this.interceptors={request:new oq,response:new oq}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Sv(this.defaults,t);const{transitional:r,paramsSerializer:i,headers:s}=t;r!==void 0&&PM.assertOptions(r,{silentJSONParsing:Zf.transitional(Zf.boolean),forcedJSONParsing:Zf.transitional(Zf.boolean),clarifyTimeoutError:Zf.transitional(Zf.boolean)},!1),i!=null&&(wt.isFunction(i)?t.paramsSerializer={serialize:i}:PM.assertOptions(i,{encode:Zf.function,serialize:Zf.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),PM.assertOptions(t,{baseUrl:Zf.spelling("baseURL"),withXsrfToken:Zf.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=s&&wt.merge(s.common,s[t.method]);s&&wt.forEach(["delete","get","head","post","put","patch","common"],g=>{delete s[g]}),t.headers=Sc.concat(a,s);const o=[];let l=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(t)===!1||(l=l&&v.synchronous,o.unshift(v.fulfilled,v.rejected))});const c=[];this.interceptors.response.forEach(function(v){c.push(v.fulfilled,v.rejected)});let u,d=0,h;if(!l){const g=[vq.bind(this),void 0];for(g.unshift(...o),g.push(...c),h=g.length,u=Promise.resolve(t);d<h;)u=u.then(g[d++],g[d++]);return u}h=o.length;let p=t;for(;d<h;){const g=o[d++],v=o[d++];try{p=g(p)}catch(b){v.call(this,b);break}}try{u=vq.call(this,p)}catch(g){return Promise.reject(g)}for(d=0,h=c.length;d<h;)u=u.then(c[d++],c[d++]);return u}getUri(e){e=Sv(this.defaults,e);const t=toe(e.baseURL,e.url,e.allowAbsoluteUrls);return Yae(t,e.params,e.paramsSerializer)}};wt.forEach(["delete","get","head","options"],function(e){Ky.prototype[e]=function(t,r){return this.request(Sv(r||{},{method:e,url:t,data:(r||{}).data}))}});wt.forEach(["post","put","patch"],function(e){function t(r){return function(s,a,o){return this.request(Sv(o||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}Ky.prototype[e]=t(),Ky.prototype[e+"Form"]=t(!0)});let _ot=class aoe{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const a=new Promise(o=>{r.subscribe(o),s=o}).then(i);return a.cancel=function(){r.unsubscribe(s)},a},e(function(s,a,o){r.reason||(r.reason=new oS(s,a,o),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new aoe(function(i){e=i}),cancel:e}}};function Eot(n){return function(t){return n.apply(null,t)}}function Aot(n){return wt.isObject(n)&&n.isAxiosError===!0}const JF={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(JF).forEach(([n,e])=>{JF[e]=n});function ooe(n){const e=new Ky(n),t=Fae(Ky.prototype.request,e);return wt.extend(t,Ky.prototype,e,{allOwnKeys:!0}),wt.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return ooe(Sv(n,i))},t}const Ks=ooe(_2);Ks.Axios=Ky;Ks.CanceledError=oS;Ks.CancelToken=_ot;Ks.isCancel=Qae;Ks.VERSION=soe;Ks.toFormData=tk;Ks.AxiosError=_r;Ks.Cancel=Ks.CanceledError;Ks.all=function(e){return Promise.all(e)};Ks.spread=Eot;Ks.isAxiosError=Aot;Ks.mergeConfig=Sv;Ks.AxiosHeaders=Sc;Ks.formToJSON=n=>Zae(wt.isHTMLForm(n)?new FormData(n):n);Ks.getAdapter=ioe.getAdapter;Ks.HttpStatusCode=JF;Ks.default=Ks;const{Axios:Qct,AxiosError:eut,CanceledError:tut,isCancel:nut,CancelToken:rut,VERSION:iut,all:sut,Cancel:aut,isAxiosError:out,spread:lut,toFormData:cut,AxiosHeaders:uut,HttpStatusCode:dut,formToJSON:fut,getAdapter:hut,mergeConfig:put}=Ks,Tot=yr("MuiBox",["root"]),Mot=y2(),Py=Stt({themeId:yh,defaultTheme:Mot,defaultClassName:Tot.root,generateClassName:Jse.generate});function Rot(n){return Fr("MuiButton",n)}const hy=yr("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),Not=F.createContext({}),Iot=F.createContext(void 0),Dot=n=>{const{color:e,disableElevation:t,fullWidth:r,size:i,variant:s,loading:a,loadingPosition:o,classes:l}=n,c={root:["root",a&&"loading",s,`${s}${Rn(e)}`,`size${Rn(i)}`,`${s}Size${Rn(i)}`,`color${Rn(e)}`,t&&"disableElevation",r&&"fullWidth",a&&`loadingPosition${Rn(o)}`],startIcon:["icon","startIcon",`iconSize${Rn(i)}`],endIcon:["icon","endIcon",`iconSize${Rn(i)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},u=Pr(c,Rot,l);return{...l,...u}},loe=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],kot=on(Y3,{shouldForwardProp:n=>Gl(n)||n==="classes",name:"MuiButton",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[t.variant],e[`${t.variant}${Rn(t.color)}`],e[`size${Rn(t.size)}`],e[`${t.variant}Size${Rn(t.size)}`],t.color==="inherit"&&e.colorInherit,t.disableElevation&&e.disableElevation,t.fullWidth&&e.fullWidth,t.loading&&e.loading]}})(li(({theme:n})=>{const e=n.palette.mode==="light"?n.palette.grey[300]:n.palette.grey[800],t=n.palette.mode==="light"?n.palette.grey.A100:n.palette.grey[700];return{...n.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(n.vars||n).shape.borderRadius,transition:n.transitions.create(["background-color","box-shadow","border-color","color"],{duration:n.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${hy.disabled}`]:{color:(n.vars||n).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(n.vars||n).shadows[2],"&:hover":{boxShadow:(n.vars||n).shadows[4],"@media (hover: none)":{boxShadow:(n.vars||n).shadows[2]}},"&:active":{boxShadow:(n.vars||n).shadows[8]},[`&.${hy.focusVisible}`]:{boxShadow:(n.vars||n).shadows[6]},[`&.${hy.disabled}`]:{color:(n.vars||n).palette.action.disabled,boxShadow:(n.vars||n).shadows[0],backgroundColor:(n.vars||n).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${hy.disabled}`]:{border:`1px solid ${(n.vars||n).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(n.palette).filter(Fl()).map(([r])=>({props:{color:r},style:{"--variant-textColor":(n.vars||n).palette[r].main,"--variant-outlinedColor":(n.vars||n).palette[r].main,"--variant-outlinedBorder":n.alpha((n.vars||n).palette[r].main,.5),"--variant-containedColor":(n.vars||n).palette[r].contrastText,"--variant-containedBg":(n.vars||n).palette[r].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(n.vars||n).palette[r].dark,"--variant-textBg":n.alpha((n.vars||n).palette[r].main,(n.vars||n).palette.action.hoverOpacity),"--variant-outlinedBorder":(n.vars||n).palette[r].main,"--variant-outlinedBg":n.alpha((n.vars||n).palette[r].main,(n.vars||n).palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":n.vars?n.vars.palette.Button.inheritContainedBg:e,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":n.vars?n.vars.palette.Button.inheritContainedHoverBg:t,"--variant-textBg":n.alpha((n.vars||n).palette.text.primary,(n.vars||n).palette.action.hoverOpacity),"--variant-outlinedBg":n.alpha((n.vars||n).palette.text.primary,(n.vars||n).palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:n.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:n.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:n.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:n.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:n.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:n.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${hy.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${hy.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:n.transitions.create(["background-color","box-shadow","border-color"],{duration:n.transitions.duration.short}),[`&.${hy.loading}`]:{color:"transparent"}}}]}})),Oot=on("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.startIcon,t.loading&&e.startIconLoadingStart,e[`iconSize${Rn(t.size)}`]]}})(({theme:n})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:n.transitions.create(["opacity"],{duration:n.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...loe]})),Bot=on("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.endIcon,t.loading&&e.endIconLoadingEnd,e[`iconSize${Rn(t.size)}`]]}})(({theme:n})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:n.transitions.create(["opacity"],{duration:n.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...loe]})),$ot=on("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:n})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(n.vars||n).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),xq=on("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),vg=F.forwardRef(function(e,t){const r=F.useContext(Not),i=F.useContext(Iot),s=f_(r,e),a=Gr({props:s,name:"MuiButton"}),{children:o,color:l="primary",component:c="button",className:u,disabled:d=!1,disableElevation:h=!1,disableFocusRipple:p=!1,endIcon:g,focusVisibleClassName:v,fullWidth:b=!1,id:x,loading:C=null,loadingIndicator:E,loadingPosition:_="center",size:M="medium",startIcon:R,type:L,variant:$="text",...N}=a,I=sS(x),k=E??V.jsx(J3,{"aria-labelledby":I,color:"inherit",size:16}),P={...a,color:l,component:c,disabled:d,disableElevation:h,disableFocusRipple:p,fullWidth:b,loading:C,loadingIndicator:k,loadingPosition:_,size:M,type:L,variant:$},G=Dot(P),W=(R||C&&_==="start")&&V.jsx(Oot,{className:G.startIcon,ownerState:P,children:R||V.jsx(xq,{className:G.loadingIconPlaceholder,ownerState:P})}),X=(g||C&&_==="end")&&V.jsx(Bot,{className:G.endIcon,ownerState:P,children:g||V.jsx(xq,{className:G.loadingIconPlaceholder,ownerState:P})}),z=i||"",J=typeof C=="boolean"?V.jsx("span",{className:G.loadingWrapper,style:{display:"contents"},children:C&&V.jsx($ot,{className:G.loadingIndicator,ownerState:P,children:k})}):null;return V.jsxs(kot,{ownerState:P,className:Pn(r.className,G.root,u,z),component:c,disabled:d||C,focusRipple:!p,focusVisibleClassName:Pn(G.focusVisible,v),ref:t,type:L,id:C?I:x,...N,classes:G,children:[W,_!=="end"&&J,o,_==="end"&&J,X]})});function Lot(n){return Fr("MuiCard",n)}yr("MuiCard",["root"]);const Fot=n=>{const{classes:e}=n;return Pr({root:["root"]},Lot,e)},Pot=on(x2,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),coe=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiCard"}),{className:i,raised:s=!1,...a}=r,o={...r,raised:s},l=Fot(o);return V.jsx(Pot,{className:Pn(l.root,i),elevation:s?8:void 0,ref:t,ownerState:o,...a})});function Uot(n){return Fr("PrivateSwitchBase",n)}yr("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const zot=n=>{const{classes:e,checked:t,disabled:r,edge:i}=n,s={root:["root",t&&"checked",r&&"disabled",i&&`edge${Rn(i)}`],input:["input"]};return Pr(s,Uot,e)},Hot=on(Y3,{name:"MuiSwitchBase"})({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:n,ownerState:e})=>n==="start"&&e.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:n,ownerState:e})=>n==="end"&&e.size!=="small",style:{marginRight:-12}}]}),Vot=on("input",{name:"MuiSwitchBase",shouldForwardProp:Gl})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),Got=F.forwardRef(function(e,t){const{autoFocus:r,checked:i,checkedIcon:s,defaultChecked:a,disabled:o,disableFocusRipple:l=!1,edge:c=!1,icon:u,id:d,inputProps:h,inputRef:p,name:g,onBlur:v,onChange:b,onFocus:x,readOnly:C,required:E=!1,tabIndex:_,type:M,value:R,slots:L={},slotProps:$={},...N}=e,[I,k]=FF({controlled:i,default:!!a,name:"SwitchBase",state:"checked"}),P=e0(),G=ue=>{x&&x(ue),P&&P.onFocus&&P.onFocus(ue)},W=ue=>{v&&v(ue),P&&P.onBlur&&P.onBlur(ue)},X=ue=>{if(ue.nativeEvent.defaultPrevented)return;const ve=ue.target.checked;k(ve),b&&b(ue,ve)};let z=o;P&&typeof z>"u"&&(z=P.disabled);const J=M==="checkbox"||M==="radio",Q={...e,checked:I,disabled:z,disableFocusRipple:l,edge:c},Y=zot(Q),q={slots:L,slotProps:{input:h,...$}},[te,ne]=xi("root",{ref:t,elementType:Hot,className:Y.root,shouldForwardComponentProp:!0,externalForwardedProps:{...q,component:"span",...N},getSlotProps:ue=>({...ue,onFocus:ve=>{var xe;(xe=ue.onFocus)==null||xe.call(ue,ve),G(ve)},onBlur:ve=>{var xe;(xe=ue.onBlur)==null||xe.call(ue,ve),W(ve)}}),ownerState:Q,additionalProps:{centerRipple:!0,focusRipple:!l,disabled:z,role:void 0,tabIndex:null}}),[le,ye]=xi("input",{ref:p,elementType:Vot,className:Y.input,externalForwardedProps:q,getSlotProps:ue=>({...ue,onChange:ve=>{var xe;(xe=ue.onChange)==null||xe.call(ue,ve),X(ve)}}),ownerState:Q,additionalProps:{autoFocus:r,checked:i,defaultChecked:a,disabled:z,id:J?d:void 0,name:g,readOnly:C,required:E,tabIndex:_,type:M,...M==="checkbox"&&R===void 0?{}:{value:R}}});return V.jsxs(te,{...ne,children:[V.jsx(le,{...ye}),I?s:u]})}),Wot=Bo(V.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})),jot=Bo(V.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})),qot=Bo(V.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}));function Xot(n){return Fr("MuiCheckbox",n)}const E$=yr("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),Kot=n=>{const{classes:e,indeterminate:t,color:r,size:i}=n,s={root:["root",t&&"indeterminate",`color${Rn(r)}`,`size${Rn(i)}`]},a=Pr(s,Xot,e);return{...e,...a}},Yot=on(Got,{shouldForwardProp:n=>Gl(n)||n==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.indeterminate&&e.indeterminate,e[`size${Rn(t.size)}`],t.color!=="default"&&e[`color${Rn(t.color)}`]]}})(li(({theme:n})=>({color:(n.vars||n).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:n.alpha((n.vars||n).palette.action.active,(n.vars||n).palette.action.hoverOpacity)}}},...Object.entries(n.palette).filter(Fl()).map(([e])=>({props:{color:e,disableRipple:!1},style:{"&:hover":{backgroundColor:n.alpha((n.vars||n).palette[e].main,(n.vars||n).palette.action.hoverOpacity)}}})),...Object.entries(n.palette).filter(Fl()).map(([e])=>({props:{color:e},style:{[`&.${E$.checked}, &.${E$.indeterminate}`]:{color:(n.vars||n).palette[e].main},[`&.${E$.disabled}`]:{color:(n.vars||n).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}))),Jot=V.jsx(jot,{}),Zot=V.jsx(Wot,{}),Qot=V.jsx(qot,{}),uoe=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiCheckbox"}),{checkedIcon:i=Jot,color:s="primary",icon:a=Zot,indeterminate:o=!1,indeterminateIcon:l=Qot,inputProps:c,size:u="medium",disableRipple:d=!1,className:h,slots:p={},slotProps:g={},...v}=r,b=o?l:a,x=o?l:i,C={...r,disableRipple:d,color:s,indeterminate:o,size:u},E=Kot(C),_=g.input??c,[M,R]=xi("root",{ref:t,elementType:Yot,className:Pn(E.root,h),shouldForwardComponentProp:!0,externalForwardedProps:{slots:p,slotProps:g,...v},ownerState:C,additionalProps:{type:"checkbox",icon:F.cloneElement(b,{fontSize:b.props.fontSize??u}),checkedIcon:F.cloneElement(x,{fontSize:x.props.fontSize??u}),disableRipple:d,slots:p,slotProps:{input:Tae(typeof _=="function"?_(C):_,{"data-indeterminate":o})}}});return V.jsx(M,{...R,classes:E})});function elt(n){return Fr("MuiFormLabel",n)}const MC=yr("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),tlt=n=>{const{classes:e,color:t,focused:r,disabled:i,error:s,filled:a,required:o}=n,l={root:["root",`color${Rn(t)}`,i&&"disabled",s&&"error",a&&"filled",r&&"focused",o&&"required"],asterisk:["asterisk",s&&"error"]};return Pr(l,elt,e)},nlt=on("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.color==="secondary"&&e.colorSecondary,t.filled&&e.filled]}})(li(({theme:n})=>({color:(n.vars||n).palette.text.secondary,...n.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(n.palette).filter(Fl()).map(([e])=>({props:{color:e},style:{[`&.${MC.focused}`]:{color:(n.vars||n).palette[e].main}}})),{props:{},style:{[`&.${MC.disabled}`]:{color:(n.vars||n).palette.text.disabled},[`&.${MC.error}`]:{color:(n.vars||n).palette.error.main}}}]}))),rlt=on("span",{name:"MuiFormLabel",slot:"Asterisk"})(li(({theme:n})=>({[`&.${MC.error}`]:{color:(n.vars||n).palette.error.main}}))),jx=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiFormLabel"}),{children:i,className:s,color:a,component:o="label",disabled:l,error:c,filled:u,focused:d,required:h,...p}=r,g=e0(),v=Lv({props:r,muiFormControl:g,states:["color","required","focused","disabled","error","filled"]}),b={...r,color:v.color||"primary",component:o,disabled:v.disabled,error:v.error,filled:v.filled,focused:v.focused,required:v.required},x=tlt(b);return V.jsxs(nlt,{as:o,ownerState:b,className:Pn(x.root,s),ref:t,...p,children:[i,v.required&&V.jsxs(rlt,{ownerState:b,"aria-hidden":!0,className:x.asterisk,children:["","*"]})]})});function ilt(n){return Fr("MuiFormControl",n)}yr("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const slt=n=>{const{classes:e,margin:t,fullWidth:r}=n,i={root:["root",t!=="none"&&`margin${Rn(t)}`,r&&"fullWidth"]};return Pr(i,ilt,e)},alt=on("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[`margin${Rn(t.margin)}`],t.fullWidth&&e.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),qx=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiFormControl"}),{children:i,className:s,color:a="primary",component:o="div",disabled:l=!1,error:c=!1,focused:u,fullWidth:d=!1,hiddenLabel:h=!1,margin:p="none",required:g=!1,size:v="medium",variant:b="outlined",...x}=r,C={...r,color:a,component:o,disabled:l,error:c,fullWidth:d,hiddenLabel:h,margin:p,required:g,size:v,variant:b},E=slt(C),[_,M]=F.useState(()=>{let X=!1;return i&&F.Children.forEach(i,z=>{if(!g$(z,["Input","Select"]))return;const J=g$(z,["Select"])?z.props.input:z;J&&prt(J.props)&&(X=!0)}),X}),[R,L]=F.useState(()=>{let X=!1;return i&&F.Children.forEach(i,z=>{g$(z,["Input","Select"])&&(kN(z.props,!0)||kN(z.props.inputProps,!0))&&(X=!0)}),X}),[$,N]=F.useState(!1);l&&$&&N(!1);const I=u!==void 0&&!l?u:$;let k;F.useRef(!1);const P=F.useCallback(()=>{L(!0)},[]),G=F.useCallback(()=>{L(!1)},[]),W=F.useMemo(()=>({adornedStart:_,setAdornedStart:M,color:a,disabled:l,error:c,filled:R,focused:I,fullWidth:d,hiddenLabel:h,size:v,onBlur:()=>{N(!1)},onFocus:()=>{N(!0)},onEmpty:G,onFilled:P,registerEffect:k,required:g,variant:b}),[_,a,l,c,R,I,d,h,k,G,P,g,v,b]);return V.jsx(l6.Provider,{value:W,children:V.jsx(alt,{as:o,ownerState:C,className:Pn(E.root,s),ref:t,...x,children:i})})});function olt(n){return Fr("MuiFormControlLabel",n)}const lC=yr("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),llt=n=>{const{classes:e,disabled:t,labelPlacement:r,error:i,required:s}=n,a={root:["root",t&&"disabled",`labelPlacement${Rn(r)}`,i&&"error",s&&"required"],label:["label",t&&"disabled"],asterisk:["asterisk",i&&"error"]};return Pr(a,olt,e)},clt=on("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`& .${lC.label}`]:e.label},e.root,e[`labelPlacement${Rn(t.labelPlacement)}`]]}})(li(({theme:n})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${lC.disabled}`]:{cursor:"default"},[`& .${lC.label}`]:{[`&.${lC.disabled}`]:{color:(n.vars||n).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:e})=>e==="start"||e==="top"||e==="bottom",style:{marginLeft:16}}]}))),ult=on("span",{name:"MuiFormControlLabel",slot:"Asterisk"})(li(({theme:n})=>({[`&.${lC.error}`]:{color:(n.vars||n).palette.error.main}}))),doe=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiFormControlLabel"}),{checked:i,className:s,componentsProps:a={},control:o,disabled:l,disableTypography:c,inputRef:u,label:d,labelPlacement:h="end",name:p,onChange:g,required:v,slots:b={},slotProps:x={},value:C,...E}=r,_=e0(),M=l??o.props.disabled??(_==null?void 0:_.disabled),R=v??o.props.required,L={disabled:M,required:R};["checked","name","onChange","value","inputRef"].forEach(X=>{typeof o.props[X]>"u"&&typeof r[X]<"u"&&(L[X]=r[X])});const $=Lv({props:r,muiFormControl:_,states:["error"]}),N={...r,disabled:M,labelPlacement:h,required:R,error:$.error},I=llt(N),k={slots:b,slotProps:{...a,...x}},[P,G]=xi("typography",{elementType:ju,externalForwardedProps:k,ownerState:N});let W=d;return W!=null&&W.type!==ju&&!c&&(W=V.jsx(P,{component:"span",...G,className:Pn(I.label,G==null?void 0:G.className),children:W})),V.jsxs(clt,{className:Pn(I.root,s),ownerState:N,ref:t,...E,children:[F.cloneElement(o,L),R?V.jsxs("div",{children:[W,V.jsxs(ult,{ownerState:N,"aria-hidden":!0,className:I.asterisk,children:["","*"]})]}):W]})});function dlt(n){return Fr("MuiLink",n)}const flt=yr("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),hlt=({theme:n,ownerState:e})=>{const t=e.color;if("colorSpace"in n&&n.colorSpace){const s=rh(n,`palette.${t}.main`)||rh(n,`palette.${t}`)||e.color;return n.alpha(s,.4)}const r=rh(n,`palette.${t}.main`,!1)||rh(n,`palette.${t}`,!1)||e.color,i=rh(n,`palette.${t}.mainChannel`)||rh(n,`palette.${t}Channel`);return"vars"in n&&i?`rgba(${i} / 0.4)`:ar(r,.4)},Sq={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},plt=n=>{const{classes:e,component:t,focusVisible:r,underline:i}=n,s={root:["root",`underline${Rn(i)}`,t==="button"&&"button",r&&"focusVisible"]};return Pr(s,dlt,e)},mlt=on(ju,{name:"MuiLink",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[`underline${Rn(t.underline)}`],t.component==="button"&&e.button]}})(li(({theme:n})=>({variants:[{props:{underline:"none"},style:{textDecoration:"none"}},{props:{underline:"hover"},style:{textDecoration:"none","&:hover":{textDecoration:"underline"}}},{props:{underline:"always"},style:{textDecoration:"underline","&:hover":{textDecorationColor:"inherit"}}},{props:({underline:e,ownerState:t})=>e==="always"&&t.color!=="inherit",style:{textDecorationColor:"var(--Link-underlineColor)"}},{props:({underline:e,ownerState:t})=>e==="always"&&t.color==="inherit",style:n.colorSpace?{textDecorationColor:n.alpha("currentColor",.4)}:null},...Object.entries(n.palette).filter(Fl()).map(([e])=>({props:{underline:"always",color:e},style:{"--Link-underlineColor":n.alpha((n.vars||n).palette[e].main,.4)}})),{props:{underline:"always",color:"textPrimary"},style:{"--Link-underlineColor":n.alpha((n.vars||n).palette.text.primary,.4)}},{props:{underline:"always",color:"textSecondary"},style:{"--Link-underlineColor":n.alpha((n.vars||n).palette.text.secondary,.4)}},{props:{underline:"always",color:"textDisabled"},style:{"--Link-underlineColor":(n.vars||n).palette.text.disabled}},{props:{component:"button"},style:{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${flt.focusVisible}`]:{outline:"auto"}}}]}))),ZF=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiLink"}),i=v2(),{className:s,color:a="primary",component:o="a",onBlur:l,onFocus:c,TypographyClasses:u,underline:d="always",variant:h="inherit",sx:p,...g}=r,[v,b]=F.useState(!1),x=M=>{ON(M.target)||b(!1),l&&l(M)},C=M=>{ON(M.target)&&b(!0),c&&c(M)},E={...r,color:a,component:o,focusVisible:v,underline:d,variant:h},_=plt(E);return V.jsx(mlt,{color:a,className:Pn(_.root,s),classes:u,component:o,onBlur:x,onFocus:C,ref:t,ownerState:E,variant:h,...g,sx:[...Sq[a]===void 0?[{color:a}]:[],...Array.isArray(p)?p:[p]],style:{...g.style,...d==="always"&&a!=="inherit"&&!Sq[a]&&{"--Link-underlineColor":hlt({theme:i,ownerState:E})}}})});function glt(n){return Fr("MuiInputLabel",n)}yr("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const ylt=n=>{const{classes:e,formControl:t,size:r,shrink:i,disableAnimation:s,variant:a,required:o}=n,l={root:["root",t&&"formControl",!s&&"animated",i&&"shrink",r&&r!=="medium"&&`size${Rn(r)}`,a],asterisk:[o&&"asterisk"]},c=Pr(l,glt,e);return{...e,...c}},vlt=on(jx,{shouldForwardProp:n=>Gl(n)||n==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`& .${MC.asterisk}`]:e.asterisk},e.root,t.formControl&&e.formControl,t.size==="small"&&e.sizeSmall,t.shrink&&e.shrink,!t.disableAnimation&&e.animated,t.focused&&e.focused,e[t.variant]]}})(li(({theme:n})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:e})=>e.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:e})=>e.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:e})=>!e.disableAnimation,style:{transition:n.transitions.create(["color","transform","max-width"],{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:e,ownerState:t})=>e==="filled"&&t.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:e,ownerState:t,size:r})=>e==="filled"&&t.shrink&&r==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:e,ownerState:t})=>e==="outlined"&&t.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),blt=F.forwardRef(function(e,t){const r=Gr({name:"MuiInputLabel",props:e}),{disableAnimation:i=!1,margin:s,shrink:a,variant:o,className:l,...c}=r,u=e0();let d=a;typeof d>"u"&&u&&(d=u.filled||u.focused||u.adornedStart);const h=Lv({props:r,muiFormControl:u,states:["size","variant","required","focused"]}),p={...r,disableAnimation:i,formControl:u,shrink:d,size:h.size,variant:h.variant,required:h.required,focused:h.focused},g=ylt(p);return V.jsx(vlt,{"data-shrink":d,ref:t,className:Pn(g.root,l),...c,ownerState:p,classes:g})});function xlt(n){return Fr("MuiFormHelperText",n)}const wq=yr("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var Cq;const Slt=n=>{const{classes:e,contained:t,size:r,disabled:i,error:s,filled:a,focused:o,required:l}=n,c={root:["root",i&&"disabled",s&&"error",r&&`size${Rn(r)}`,t&&"contained",o&&"focused",a&&"filled",l&&"required"]};return Pr(c,xlt,e)},wlt=on("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.size&&e[`size${Rn(t.size)}`],t.contained&&e.contained,t.filled&&e.filled]}})(li(({theme:n})=>({color:(n.vars||n).palette.text.secondary,...n.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${wq.disabled}`]:{color:(n.vars||n).palette.text.disabled},[`&.${wq.error}`]:{color:(n.vars||n).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:e})=>e.contained,style:{marginLeft:14,marginRight:14}}]}))),Clt=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiFormHelperText"}),{children:i,className:s,component:a="p",disabled:o,error:l,filled:c,focused:u,margin:d,required:h,variant:p,...g}=r,v=e0(),b=Lv({props:r,muiFormControl:v,states:["variant","size","disabled","error","filled","focused","required"]}),x={...r,component:a,contained:b.variant==="filled"||b.variant==="outlined",variant:b.variant,size:b.size,disabled:b.disabled,error:b.error,filled:b.filled,focused:b.focused,required:b.required};delete x.ownerState;const C=Slt(x);return V.jsx(wlt,{as:a,className:Pn(C.root,s),ref:t,...g,ownerState:x,children:i===" "?Cq||(Cq=V.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):i})});function _lt(n){return Fr("MuiTextField",n)}yr("MuiTextField",["root"]);const Elt={standard:m6,filled:g6,outlined:K3},Alt=n=>{const{classes:e}=n;return Pr({root:["root"]},_lt,e)},Tlt=on(qx,{name:"MuiTextField",slot:"Root"})({}),RC=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiTextField"}),{autoComplete:i,autoFocus:s=!1,children:a,className:o,color:l="primary",defaultValue:c,disabled:u=!1,error:d=!1,FormHelperTextProps:h,fullWidth:p=!1,helperText:g,id:v,InputLabelProps:b,inputProps:x,InputProps:C,inputRef:E,label:_,maxRows:M,minRows:R,multiline:L=!1,name:$,onBlur:N,onChange:I,onFocus:k,placeholder:P,required:G=!1,rows:W,select:X=!1,SelectProps:z,slots:J={},slotProps:Q={},type:Y,value:q,variant:te="outlined",...ne}=r,le={...r,autoFocus:s,color:l,disabled:u,error:d,fullWidth:p,multiline:L,required:G,select:X,variant:te},ye=Alt(le),ue=sS(v),ve=g&&ue?`${ue}-helper-text`:void 0,xe=_&&ue?`${ue}-label`:void 0,Pe=Elt[te],ze={slots:J,slotProps:{input:C,inputLabel:b,htmlInput:x,formHelperText:h,select:z,...Q}},Ke={},pt=ze.slotProps.inputLabel;te==="outlined"&&(pt&&typeof pt.shrink<"u"&&(Ke.notched=pt.shrink),Ke.label=_),X&&((!z||!z.native)&&(Ke.id=void 0),Ke["aria-describedby"]=void 0);const[dt,pe]=xi("root",{elementType:Tlt,shouldForwardComponentProp:!0,externalForwardedProps:{...ze,...ne},ownerState:le,className:Pn(ye.root,o),ref:t,additionalProps:{disabled:u,error:d,fullWidth:p,required:G,color:l,variant:te}}),[Le,Ue]=xi("input",{elementType:Pe,externalForwardedProps:ze,additionalProps:Ke,ownerState:le}),[Ze,je]=xi("inputLabel",{elementType:blt,externalForwardedProps:ze,ownerState:le}),[lt,st]=xi("htmlInput",{elementType:"input",externalForwardedProps:ze,ownerState:le}),[ot,Ut]=xi("formHelperText",{elementType:Clt,externalForwardedProps:ze,ownerState:le}),[mt,ce]=xi("select",{elementType:v6,externalForwardedProps:ze,ownerState:le}),re=V.jsx(Le,{"aria-describedby":ve,autoComplete:i,autoFocus:s,defaultValue:c,fullWidth:p,multiline:L,name:$,rows:W,maxRows:M,minRows:R,type:Y,value:q,id:ue,inputRef:E,onBlur:N,onChange:I,onFocus:k,placeholder:P,inputProps:st,slots:{input:J.htmlInput?lt:void 0},...Ue});return V.jsxs(dt,{...pe,children:[_!=null&&_!==""&&V.jsx(Ze,{htmlFor:ue,id:xe,...je,children:_}),X?V.jsx(mt,{"aria-describedby":ve,id:ue,labelId:xe,value:q,input:re,...ce,children:a}):re,g&&V.jsx(ot,{id:ve,...Ut,children:g})]})});function Mlt(n){return Fr("MuiAlert",n)}const _q=yr("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),Rlt=Bo(V.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"})),Nlt=Bo(V.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"})),Ilt=Bo(V.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),Dlt=Bo(V.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"})),klt=Bo(V.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),Olt=n=>{const{variant:e,color:t,severity:r,classes:i}=n,s={root:["root",`color${Rn(t||r)}`,`${e}${Rn(t||r)}`,`${e}`],icon:["icon"],message:["message"],action:["action"]};return Pr(s,Mlt,i)},Blt=on(x2,{name:"MuiAlert",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[t.variant],e[`${t.variant}${Rn(t.color||t.severity)}`]]}})(li(({theme:n})=>{const e=n.palette.mode==="light"?n.darken:n.lighten,t=n.palette.mode==="light"?n.lighten:n.darken;return{...n.typography.body2,backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(n.palette).filter(Fl(["light"])).map(([r])=>({props:{colorSeverity:r,variant:"standard"},style:{color:n.vars?n.vars.palette.Alert[`${r}Color`]:e(n.palette[r].light,.6),backgroundColor:n.vars?n.vars.palette.Alert[`${r}StandardBg`]:t(n.palette[r].light,.9),[`& .${_q.icon}`]:n.vars?{color:n.vars.palette.Alert[`${r}IconColor`]}:{color:n.palette[r].main}}})),...Object.entries(n.palette).filter(Fl(["light"])).map(([r])=>({props:{colorSeverity:r,variant:"outlined"},style:{color:n.vars?n.vars.palette.Alert[`${r}Color`]:e(n.palette[r].light,.6),border:`1px solid ${(n.vars||n).palette[r].light}`,[`& .${_q.icon}`]:n.vars?{color:n.vars.palette.Alert[`${r}IconColor`]}:{color:n.palette[r].main}}})),...Object.entries(n.palette).filter(Fl(["dark"])).map(([r])=>({props:{colorSeverity:r,variant:"filled"},style:{fontWeight:n.typography.fontWeightMedium,...n.vars?{color:n.vars.palette.Alert[`${r}FilledColor`],backgroundColor:n.vars.palette.Alert[`${r}FilledBg`]}:{backgroundColor:n.palette.mode==="dark"?n.palette[r].dark:n.palette[r].main,color:n.palette.getContrastText(n.palette[r].main)}}}))]}})),$lt=on("div",{name:"MuiAlert",slot:"Icon"})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),Llt=on("div",{name:"MuiAlert",slot:"Message"})({padding:"8px 0",minWidth:0,overflow:"auto"}),Flt=on("div",{name:"MuiAlert",slot:"Action"})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),Eq={success:V.jsx(Rlt,{fontSize:"inherit"}),warning:V.jsx(Nlt,{fontSize:"inherit"}),error:V.jsx(Ilt,{fontSize:"inherit"}),info:V.jsx(Dlt,{fontSize:"inherit"})},UN=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiAlert"}),{action:i,children:s,className:a,closeText:o="Close",color:l,components:c={},componentsProps:u={},icon:d,iconMapping:h=Eq,onClose:p,role:g="alert",severity:v="success",slotProps:b={},slots:x={},variant:C="standard",...E}=r,_={...r,color:l,severity:v,variant:C,colorSeverity:l||v},M=Olt(_),R={slots:{closeButton:c.CloseButton,closeIcon:c.CloseIcon,...x},slotProps:{...u,...b}},[L,$]=xi("root",{ref:t,shouldForwardComponentProp:!0,className:Pn(M.root,a),elementType:Blt,externalForwardedProps:{...R,...E},ownerState:_,additionalProps:{role:g,elevation:0}}),[N,I]=xi("icon",{className:M.icon,elementType:$lt,externalForwardedProps:R,ownerState:_}),[k,P]=xi("message",{className:M.message,elementType:Llt,externalForwardedProps:R,ownerState:_}),[G,W]=xi("action",{className:M.action,elementType:Flt,externalForwardedProps:R,ownerState:_}),[X,z]=xi("closeButton",{elementType:wit,externalForwardedProps:R,ownerState:_}),[J,Q]=xi("closeIcon",{elementType:klt,externalForwardedProps:R,ownerState:_});return V.jsxs(L,{...$,children:[d!==!1?V.jsx(N,{...I,children:d||h[v]||Eq[v]}):null,V.jsx(k,{...P,children:s}),i!=null?V.jsx(G,{...W,children:i}):null,i==null&&p?V.jsx(G,{...W,children:V.jsx(X,{size:"small","aria-label":o,title:o,color:"inherit",onClick:p,...z,children:V.jsx(J,{fontSize:"small",...Q})})}):null]})});function Plt(n){return Fr("MuiDialog",n)}const A$=yr("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),foe=F.createContext({}),Ult=on(Iae,{name:"MuiDialog",slot:"Backdrop",overrides:(n,e)=>e.backdrop})({zIndex:-1}),zlt=n=>{const{classes:e,scroll:t,maxWidth:r,fullWidth:i,fullScreen:s}=n,a={root:["root"],container:["container",`scroll${Rn(t)}`],paper:["paper",`paperScroll${Rn(t)}`,`paperWidth${Rn(String(r))}`,i&&"paperFullWidth",s&&"paperFullScreen"]};return Pr(a,Plt,e)},Hlt=on(Dae,{name:"MuiDialog",slot:"Root"})({"@media print":{position:"absolute !important"}}),Vlt=on("div",{name:"MuiDialog",slot:"Container",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.container,e[`scroll${Rn(t.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),Glt=on(x2,{name:"MuiDialog",slot:"Paper",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.paper,e[`scrollPaper${Rn(t.scroll)}`],e[`paperWidth${Rn(String(t.maxWidth))}`],t.fullWidth&&e.paperFullWidth,t.fullScreen&&e.paperFullScreen]}})(li(({theme:n})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:e})=>!e.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:n.breakpoints.unit==="px"?Math.max(n.breakpoints.values.xs,444):`max(${n.breakpoints.values.xs}${n.breakpoints.unit}, 444px)`,[`&.${A$.paperScrollBody}`]:{[n.breakpoints.down(Math.max(n.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(n.breakpoints.values).filter(e=>e!=="xs").map(e=>({props:{maxWidth:e},style:{maxWidth:`${n.breakpoints.values[e]}${n.breakpoints.unit}`,[`&.${A$.paperScrollBody}`]:{[n.breakpoints.down(n.breakpoints.values[e]+64)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:e})=>e.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:e})=>e.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${A$.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),Wlt=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiDialog"}),i=v2(),s={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{"aria-describedby":a,"aria-labelledby":o,"aria-modal":l=!0,BackdropComponent:c,BackdropProps:u,children:d,className:h,disableEscapeKeyDown:p=!1,fullScreen:g=!1,fullWidth:v=!1,maxWidth:b="sm",onClick:x,onClose:C,open:E,PaperComponent:_=x2,PaperProps:M={},scroll:R="paper",slots:L={},slotProps:$={},TransitionComponent:N=jF,transitionDuration:I=s,TransitionProps:k,...P}=r,G={...r,disableEscapeKeyDown:p,fullScreen:g,fullWidth:v,maxWidth:b,scroll:R},W=zlt(G),X=F.useRef(),z=pe=>{X.current=pe.target===pe.currentTarget},J=pe=>{x&&x(pe),X.current&&(X.current=null,C&&C(pe,"backdropClick"))},Q=sS(o),Y=F.useMemo(()=>({titleId:Q}),[Q]),q={transition:N,...L},te={transition:k,paper:M,backdrop:u,...$},ne={slots:q,slotProps:te},[le,ye]=xi("root",{elementType:Hlt,shouldForwardComponentProp:!0,externalForwardedProps:ne,ownerState:G,className:Pn(W.root,h),ref:t}),[ue,ve]=xi("backdrop",{elementType:Ult,shouldForwardComponentProp:!0,externalForwardedProps:ne,ownerState:G}),[xe,Pe]=xi("paper",{elementType:Glt,shouldForwardComponentProp:!0,externalForwardedProps:ne,ownerState:G,className:Pn(W.paper,M.className)}),[ze,Ke]=xi("container",{elementType:Vlt,externalForwardedProps:ne,ownerState:G,className:W.container}),[pt,dt]=xi("transition",{elementType:jF,externalForwardedProps:ne,ownerState:G,additionalProps:{appear:!0,in:E,timeout:I,role:"presentation"}});return V.jsx(le,{closeAfterTransition:!0,slots:{backdrop:ue},slotProps:{backdrop:{transitionDuration:I,as:c,...ve}},disableEscapeKeyDown:p,onClose:C,open:E,onClick:J,...ye,...P,children:V.jsx(pt,{...dt,children:V.jsx(ze,{onMouseDown:z,...Ke,children:V.jsx(xe,{as:_,elevation:24,role:"dialog","aria-describedby":a,"aria-labelledby":Q,"aria-modal":l,...Pe,children:V.jsx(foe.Provider,{value:Y,children:d})})})})})});function jlt(n){return Fr("MuiDialogActions",n)}yr("MuiDialogActions",["root","spacing"]);const qlt=n=>{const{classes:e,disableSpacing:t}=n;return Pr({root:["root",!t&&"spacing"]},jlt,e)},Xlt=on("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,!t.disableSpacing&&e.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:n})=>!n.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),Klt=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiDialogActions"}),{className:i,disableSpacing:s=!1,...a}=r,o={...r,disableSpacing:s},l=qlt(o);return V.jsx(Xlt,{className:Pn(l.root,i),ownerState:o,ref:t,...a})});function Ylt(n){return Fr("MuiDialogContent",n)}yr("MuiDialogContent",["root","dividers"]);function Jlt(n){return Fr("MuiDialogTitle",n)}const Zlt=yr("MuiDialogTitle",["root"]),Qlt=n=>{const{classes:e,dividers:t}=n;return Pr({root:["root",t&&"dividers"]},Ylt,e)},ect=on("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.dividers&&e.dividers]}})(li(({theme:n})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:e})=>e.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(n.vars||n).palette.divider}`,borderBottom:`1px solid ${(n.vars||n).palette.divider}`}},{props:({ownerState:e})=>!e.dividers,style:{[`.${Zlt.root} + &`]:{paddingTop:0}}}]}))),tct=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiDialogContent"}),{className:i,dividers:s=!1,...a}=r,o={...r,dividers:s},l=Qlt(o);return V.jsx(ect,{className:Pn(l.root,i),ownerState:o,ref:t,...a})});function nct(n){return Fr("MuiDialogContentText",n)}yr("MuiDialogContentText",["root"]);const rct=n=>{const{classes:e}=n,r=Pr({root:["root"]},nct,e);return{...e,...r}},ict=on(ju,{shouldForwardProp:n=>Gl(n)||n==="classes",name:"MuiDialogContentText",slot:"Root"})({}),sct=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiDialogContentText"}),{children:i,className:s,...a}=r,o=rct(a);return V.jsx(ict,{component:"p",variant:"body1",color:"textSecondary",ref:t,ownerState:a,className:Pn(o.root,s),...r,classes:o})}),act=n=>{const{classes:e}=n;return Pr({root:["root"]},Jlt,e)},oct=on(ju,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),lct=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiDialogTitle"}),{className:i,id:s,...a}=r,o=r,l=act(o),{titleId:c=s}=F.useContext(foe);return V.jsx(oct,{component:"h2",className:Pn(l.root,i),ownerState:o,ref:t,variant:"h6",id:s??c,...a})});function hoe({open:n,handleClose:e}){return V.jsxs(Wlt,{open:n,onClose:e,slotProps:{paper:{component:"form",onSubmit:t=>{t.preventDefault(),e()},sx:{backgroundImage:"none"}}},children:[V.jsx(lct,{children:"Reset password"}),V.jsxs(tct,{sx:{display:"flex",flexDirection:"column",gap:2,width:"100%"},children:[V.jsx(sct,{children:"Enter your account's email address, and we'll send you a link to reset your password."}),V.jsx(K3,{autoFocus:!0,required:!0,margin:"dense",id:"email",name:"email",label:"Email address",placeholder:"Email address",type:"email",fullWidth:!0})]}),V.jsxs(Klt,{sx:{pb:3,px:3},children:[V.jsx(vg,{onClick:e,children:"Cancel"}),V.jsx(vg,{variant:"contained",type:"submit",children:"Continue"})]})]})}hoe.propTypes={handleClose:vi.func.isRequired,open:vi.bool.isRequired};function poe(){return V.jsx(jp,{sx:{height:21,width:100,mr:2},children:V.jsxs("svg",{width:86,height:19,viewBox:"0 0 86 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[V.jsx("path",{fill:"#B4C0D3",d:"m.787 12.567 6.055-2.675 3.485 2.006.704 6.583-4.295-.035.634-4.577-.74-.422-3.625 2.817-2.218-3.697Z"}),V.jsx("path",{fill:"#00D3AB",d:"m10.714 11.616 5.352 3.908 2.112-3.767-4.295-1.725v-.845l4.295-1.76-2.112-3.732-5.352 3.908v4.013Z"}),V.jsx("path",{fill:"#4876EF",d:"m10.327 7.286.704-6.583-4.295.07.634 4.577-.74.422-3.66-2.816L.786 6.617l6.055 2.676 3.485-2.007Z"}),V.jsx("path",{fill:"#4876EE",d:"M32.507 8.804v6.167h2.312v-7.86h-3.366v1.693h1.054ZM32.435 6.006c.212.22.535.33.968.33.434 0 .751-.11.953-.33.213-.23.318-.516.318-.86 0-.354-.105-.641-.318-.86-.202-.23-.52-.345-.953-.345-.433 0-.756.115-.968.344-.202.22-.303.507-.303.86 0 .345.101.632.303.861ZM24.46 14.799c.655.296 1.46.444 2.413.444.896 0 1.667-.139 2.312-.416.645-.277 1.141-.664 1.488-1.162.357-.506.535-1.094.535-1.764 0-.65-.169-1.2-.506-1.649-.328-.459-.785-.818-1.373-1.076-.587-.267-1.266-.435-2.037-.502l-.809-.071c-.481-.039-.828-.168-1.04-.388a1.08 1.08 0 0 1-.318-.774c0-.23.058-.44.173-.631.116-.201.29-.359.52-.474.241-.114.535-.172.882-.172.366 0 .67.067.91.201.053.029.104.059.15.09l.012.009.052.037c.146.111.263.243.35.395.125.21.188.444.188.703h2.311c0-.689-.159-1.286-.476-1.793-.318-.516-.776-.913-1.373-1.19-.588-.287-1.296-.43-2.124-.43-.79 0-1.474.133-2.052.4a3.131 3.131 0 0 0-1.358 1.12c-.318.487-.477 1.066-.477 1.735 0 .927.314 1.673.94 2.237.626.564 1.464.89 2.514.976l.794.071c.645.058 1.113.187 1.401.388a.899.899 0 0 1 .434.788 1.181 1.181 0 0 1-.231.717c-.154.201-.38.36-.68.474-.298.115-.669.172-1.112.172-.49 0-.89-.067-1.199-.2-.308-.144-.539-.33-.694-.56a1.375 1.375 0 0 1-.216-.746h-2.297c0 .679.168 1.281.505 1.807.337.517.834.928 1.489 1.234ZM39.977 15.07c-.8 0-1.445-.095-1.936-.286a2.03 2.03 0 0 1-1.084-.99c-.221-.469-.332-1.1-.332-1.893V8.789h-1.2V7.11h1.2V4.988h2.153V7.11h2.312V8.79h-2.312v3.198c0 .373.096.66.289.86.202.192.486.287.852.287h1.17v1.937h-1.112Z"}),V.jsx("path",{fill:"#4876EE",fillRule:"evenodd",d:"M43.873 14.899c.52.23 1.117.344 1.791.344.665 0 1.252-.115 1.763-.344.51-.23.934-.55 1.271-.96.337-.412.564-.88.679-1.407h-2.124c-.096.24-.279.44-.549.603-.27.162-.616.244-1.04.244-.262 0-.497-.031-.704-.093a1.572 1.572 0 0 1-.423-.194 1.662 1.662 0 0 1-.636-.803 3.159 3.159 0 0 1-.163-.645h5.784v-.775a4.28 4.28 0 0 0-.463-1.98 3.686 3.686 0 0 0-1.343-1.477c-.578-.382-1.291-.574-2.139-.574-.645 0-1.223.115-1.733.345-.501.22-.92.52-1.257.903a4.178 4.178 0 0 0-.78 1.305c-.174.478-.26.98-.26 1.506v.287c0 .507.086 1.004.26 1.492.183.478.443.913.78 1.305.347.382.775.688 1.286.918Zm-.094-4.674.02-.09a2.507 2.507 0 0 1 .117-.356c.145-.354.356-.622.636-.804.104-.067.217-.123.339-.165.204-.071.433-.107.686-.107.395 0 .723.09.983.272.27.173.472.426.607.76a2.487 2.487 0 0 1 .16.603h-3.57c.006-.038.013-.076.022-.113Z",clipRule:"evenodd"}),V.jsx("path",{fill:"#4876EE",d:"M50.476 14.97V7.112h1.835v1.98a4.54 4.54 0 0 1 .173-.603c.202-.536.506-.937.91-1.205.405-.277.9-.416 1.488-.416h.101c.598 0 1.094.139 1.489.416.404.268.707.67.91 1.205l.016.04.013.037.028-.077c.212-.536.52-.937.925-1.205.405-.277.901-.416 1.489-.416h.1c.598 0 1.098.139 1.503.416.414.268.727.67.94 1.205.211.535.317 1.205.317 2.008v4.475h-2.312v-4.604c0-.43-.115-.78-.346-1.047-.222-.268-.54-.402-.954-.402-.414 0-.742.139-.982.416-.241.268-.362.626-.362 1.076v4.56h-2.326v-4.603c0-.43-.115-.78-.346-1.047-.222-.268-.535-.402-.94-.402-.423 0-.756.139-.996.416-.241.268-.362.626-.362 1.076v4.56h-2.311Z"}),V.jsx("path",{fill:"#4876EE",fillRule:"evenodd",d:"M68.888 13.456v1.515h1.834v-4.82c0-.726-.144-1.319-.433-1.778-.289-.468-.712-.817-1.271-1.047-.549-.23-1.228-.344-2.037-.344a27.76 27.76 0 0 0-.896.014c-.318.01-.626.024-.924.043l-.229.016a36.79 36.79 0 0 0-.552.042v1.936a81.998 81.998 0 0 1 1.733-.09 37.806 37.806 0 0 1 1.171-.025c.424 0 .732.1.925.301.193.201.289.502.289.904v.029h-1.43c-.704 0-1.325.09-1.864.272-.54.172-.959.445-1.257.818-.299.363-.448.832-.448 1.405 0 .526.12.98.361 1.363.24.373.573.66.997.86.433.201.934.302 1.502.302.55 0 1.012-.1 1.388-.302.385-.2.683-.487.895-.86a2.443 2.443 0 0 0 .228-.498l.018-.056Zm-.39-1.397v-.63h-1.445c-.405 0-.718.1-.939.3-.212.192-.318.455-.318.79 0 .157.026.3.08.429a.99.99 0 0 0 .238.345c.221.191.534.287.939.287a2.125 2.125 0 0 0 .394-.038c.106-.021.206-.052.3-.092.212-.095.385-.253.52-.473.135-.22.212-.526.23-.918Z",clipRule:"evenodd"}),V.jsx("path",{fill:"#4876EE",d:"M72.106 14.97V7.11h1.835v2.595c.088-.74.31-1.338.665-1.791.481-.603 1.174-.904 2.08-.904h.303v1.98h-.578c-.635 0-1.127.172-1.473.516-.347.334-.52.822-.52 1.463v4.001h-2.312ZM79.92 11.298h.767l2.499 3.672h2.6l-3.169-4.51 2.606-3.35h-2.427l-2.875 3.737V4.5h-2.312v10.47h2.312v-3.672Z"})]})})}function cct(){return V.jsx(jp,{children:V.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[V.jsx("path",{d:"M6.68 15.92C2.88 15.24 0 11.96 0 8C0 3.6 3.6 0 8 0C12.4 0 16 3.6 16 8C16 11.96 13.12 15.24 9.32 15.92L8.88 15.56H7.12L6.68 15.92Z",fill:"url(#paint0_linear_795_116)"}),V.jsx("path",{d:"M11.12 10.2391L11.48 7.99914H9.36V6.43914C9.36 5.79914 9.6 5.31914 10.56 5.31914H11.6V3.27914C11.04 3.19914 10.4 3.11914 9.84 3.11914C8 3.11914 6.72 4.23914 6.72 6.23914V7.99914H4.72V10.2391H6.72V15.8791C7.16 15.9591 7.6 15.9991 8.04 15.9991C8.48 15.9991 8.92 15.9591 9.36 15.8791V10.2391H11.12Z",fill:"white"}),V.jsx("defs",{children:V.jsxs("linearGradient",{id:"paint0_linear_795_116",x1:"8",y1:"0",x2:"8",y2:"15.9991",gradientUnits:"userSpaceOnUse",children:[V.jsx("stop",{stopColor:"#1AAFFF"}),V.jsx("stop",{offset:"1",stopColor:"#0163E0"})]})})]})})}function uct(){return V.jsx(jp,{children:V.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[V.jsx("path",{d:"M15.68 8.18182C15.68 7.61455 15.6291 7.06909 15.5345 6.54545H8V9.64364H12.3055C12.1164 10.64 11.5491 11.4836 10.6982 12.0509V14.0655H13.2945C14.8073 12.6691 15.68 10.6182 15.68 8.18182Z",fill:"#4285F4"}),V.jsx("path",{d:"M8 16C10.16 16 11.9709 15.2873 13.2945 14.0655L10.6982 12.0509C9.98545 12.5309 9.07636 12.8218 8 12.8218C5.92 12.8218 4.15273 11.4182 3.52 9.52727H0.858182V11.5927C2.17455 14.2036 4.87273 16 8 16Z",fill:"#34A853"}),V.jsx("path",{d:"M3.52 9.52C3.36 9.04 3.26545 8.53091 3.26545 8C3.26545 7.46909 3.36 6.96 3.52 6.48V4.41455H0.858182C0.312727 5.49091 0 6.70545 0 8C0 9.29455 0.312727 10.5091 0.858182 11.5855L2.93091 9.97091L3.52 9.52Z",fill:"#FBBC05"}),V.jsx("path",{d:"M8 3.18545C9.17818 3.18545 10.2255 3.59273 11.0618 4.37818L13.3527 2.08727C11.9636 0.792727 10.16 0 8 0C4.87273 0 2.17455 1.79636 0.858182 4.41455L3.52 6.48C4.15273 4.58909 5.92 3.18545 8 3.18545Z",fill:"#EA4335"})]})})}const dct=on(coe)(({theme:n})=>({display:"flex",flexDirection:"column",alignSelf:"center",width:"100%",padding:n.spacing(4),gap:n.spacing(2),boxShadow:"hsla(220, 30%, 5%, 0.05) 0px 5px 15px 0px, hsla(220, 25%, 10%, 0.05) 0px 15px 35px -5px",[n.breakpoints.up("sm")]:{width:"450px"},...n.applyStyles("dark",{boxShadow:"hsla(220, 30%, 5%, 0.5) 0px 5px 15px 0px, hsla(220, 25%, 10%, 0.08) 0px 15px 35px -5px"})})),fct=Ks.create({baseURL:"http://localhost:8080/",timeout:5e3});function hct(){const n=OI(),[e,t]=F.useState(!1),[r,i]=F.useState(""),[s,a]=F.useState(!1),[o,l]=F.useState(""),[c,u]=F.useState(!1),[d,h]=F.useState(!1),[p,g]=F.useState(""),[v,b]=F.useState(!1),x=()=>{u(!0)},C=()=>{u(!1)},E=async M=>{if(M.preventDefault(),g(""),b(!1),!_())return;const R=new FormData(M.currentTarget),L=R.get("email"),$=R.get("password");h(!0);try{const N=await fct.post("/api/v1/users/login",{email:L,password:$});N.status===200&&(b(!0),console.log("Login successful:",N.data));const I=N.data;localStorage.setItem("user",JSON.stringify({id:N.data.id,username:N.data.username,email:N.data.email})),setTimeout(()=>{n("/chatbot",{state:{user:I}})},1500)}catch(N){if(console.error("Login error:",N),N.response){const I=N.response.data.error||"Login failed. Please check your credentials.";g(I)}else N.request?g("Unable to connect to server. Please try again later."):g("An unexpected error occurred. Please try again.")}finally{h(!1)}},_=()=>{const M=document.getElementById("email"),R=document.getElementById("password");let L=!0;return!M.value||!/\S+@\S+\.\S+/.test(M.value)?(t(!0),i("Please enter a valid email address."),L=!1):(t(!1),i("")),!R.value||R.value.length<6?(a(!0),l("Password must be at least 6 characters long."),L=!1):(a(!1),l("")),L};return V.jsxs(dct,{variant:"outlined",children:[V.jsx(Py,{sx:{display:{xs:"flex",md:"none"}},children:V.jsx(poe,{})}),V.jsx(ju,{component:"h1",variant:"h4",sx:{width:"100%",fontSize:"clamp(2rem, 10vw, 2.15rem)"},children:"Sign in"}),p&&V.jsx(UN,{severity:"error",onClose:()=>g(""),children:p}),v&&V.jsx(UN,{severity:"success",children:"Login successful! Redirecting..."}),V.jsxs(Py,{component:"form",onSubmit:E,noValidate:!0,sx:{display:"flex",flexDirection:"column",width:"100%",gap:2},children:[V.jsxs(qx,{children:[V.jsx(jx,{htmlFor:"email",children:"Email"}),V.jsx(RC,{error:e,helperText:r,id:"email",type:"email",name:"email",placeholder:"your@email.com",autoComplete:"email",autoFocus:!0,required:!0,fullWidth:!0,variant:"outlined",color:e?"error":"primary",disabled:d})]}),V.jsxs(qx,{children:[V.jsxs(Py,{sx:{display:"flex",justifyContent:"space-between"},children:[V.jsx(jx,{htmlFor:"password",children:"Password"}),V.jsx(ZF,{component:"button",type:"button",onClick:x,variant:"body2",sx:{alignSelf:"baseline"},children:"Forgot your password?"})]}),V.jsx(RC,{error:s,helperText:o,name:"password",placeholder:"",type:"password",id:"password",autoComplete:"current-password",required:!0,fullWidth:!0,variant:"outlined",color:s?"error":"primary",disabled:d})]}),V.jsx(doe,{control:V.jsx(uoe,{value:"remember",color:"primary"}),label:"Remember me",disabled:d}),V.jsx(hoe,{open:c,handleClose:C}),V.jsx(vg,{type:"submit",fullWidth:!0,variant:"contained",disabled:d,children:d?V.jsx(J3,{size:24}):"Sign in"}),V.jsxs(ju,{sx:{textAlign:"center"},children:["Don't have an account?"," ",V.jsx("span",{children:V.jsx(ZF,{href:"/signup",variant:"body2",sx:{alignSelf:"center"},children:"Sign up"})})]})]}),V.jsx(LN,{children:"or"}),V.jsxs(Py,{sx:{display:"flex",flexDirection:"column",gap:2},children:[V.jsx(vg,{fullWidth:!0,variant:"outlined",onClick:()=>alert("Sign in with Google"),startIcon:V.jsx(uct,{}),disabled:d,children:"Sign in with Google"}),V.jsx(vg,{fullWidth:!0,variant:"outlined",onClick:()=>alert("Sign in with Facebook"),startIcon:V.jsx(cct,{}),disabled:d,children:"Sign in with Facebook"})]})]})}const pct=Bo(V.jsx("path",{d:"m20.45 6 .49-1.06L22 4.45c.39-.18.39-.73 0-.91l-1.06-.49L20.45 2c-.18-.39-.73-.39-.91 0l-.49 1.06-1.05.49c-.39.18-.39.73 0 .91l1.06.49.49 1.05c.17.39.73.39.9 0M8.95 6l.49-1.06 1.06-.49c.39-.18.39-.73 0-.91l-1.06-.48L8.95 2c-.17-.39-.73-.39-.9 0l-.49 1.06-1.06.49c-.39.18-.39.73 0 .91l1.06.49L8.05 6c.17.39.73.39.9 0m10.6 7.5-.49 1.06-1.06.49c-.39.18-.39.73 0 .91l1.06.49.49 1.06c.18.39.73.39.91 0l.49-1.06 1.05-.5c.39-.18.39-.73 0-.91l-1.06-.49-.49-1.06c-.17-.38-.73-.38-.9.01m-1.84-4.38-2.83-2.83a.996.996 0 0 0-1.41 0L2.29 17.46c-.39.39-.39 1.02 0 1.41l2.83 2.83c.39.39 1.02.39 1.41 0L17.7 10.53c.4-.38.4-1.02.01-1.41m-3.5 2.09L12.8 9.8l1.38-1.38 1.41 1.41z"})),mct=Bo(V.jsx("path",{d:"m20.99 17.99-4.94-4.94-2.12 2.12 4.94 4.94c.59.59 1.54.59 2.12 0s.58-1.54 0-2.12M17.65 10c1.93 0 3.5-1.57 3.5-3.5 0-.58-.16-1.12-.41-1.6l-2.7 2.7-1.49-1.49 2.7-2.7c-.48-.25-1.02-.41-1.6-.41-1.93 0-3.5 1.57-3.5 3.5 0 .41.08.8.21 1.16l-1.85 1.85-1.78-1.78c.39-.39.39-1.02 0-1.41l-.71-.71 2.12-2.12c-1.17-1.17-3.07-1.17-4.24 0L5.08 6.32c-.39.39-.39 1.02 0 1.41l.71.71H3.25c-.19 0-.37.07-.5.21-.28.28-.28.72 0 1l2.54 2.54c.28.28.72.28 1 0 .13-.13.21-.31.21-.5V9.15l.7.7c.39.39 1.02.39 1.41 0l1.78 1.78-6.35 6.35c-.59.59-.59 1.54 0 2.12.59.59 1.54.59 2.12 0L16.48 9.79c.37.13.76.21 1.17.21"})),gct=Bo(V.jsx("path",{d:"m18.04 7.99-.63-1.4-1.4-.63c-.39-.18-.39-.73 0-.91l1.4-.63.63-1.4c.18-.39.73-.39.91 0l.63 1.4 1.4.63c.39.18.39.73 0 .91l-1.4.63-.63 1.4c-.17.39-.73.39-.91 0m3.24 4.73-.32-.72c-.18-.39-.73-.39-.91 0l-.32.72-.73.32c-.39.18-.39.73 0 .91l.72.32.32.73c.18.39.73.39.91 0l.32-.72.73-.32c.39-.18.39-.73 0-.91zm-5.04 1.65 1.23.93c.4.3.51.86.26 1.3l-1.62 2.8c-.25.44-.79.62-1.25.42l-1.43-.6c-.2.13-.42.26-.64.37l-.19 1.54c-.06.5-.49.88-.99.88H8.38c-.5 0-.93-.38-.99-.88l-.19-1.54c-.22-.11-.43-.23-.64-.37l-1.43.6c-.46.2-1 .02-1.25-.42l-1.62-2.8c-.25-.44-.14-.99.26-1.3l1.23-.93V14c0-.12 0-.25.01-.37l-1.23-.93c-.4-.3-.51-.86-.26-1.3l1.62-2.8c.25-.44.79-.62 1.25-.42l1.43.6c.2-.13.42-.26.64-.37l.19-1.54c.05-.49.48-.87.98-.87h3.23c.5 0 .93.38.99.88l.19 1.54c.22.11.43.23.64.37l1.43-.6c.46-.2 1-.02 1.25.42l1.62 2.8c.25.44.14.99-.26 1.3l-1.23.93c.01.12.01.24.01.37s0 .24-.01.36M13 14c0-1.66-1.34-3-3-3s-3 1.34-3 3 1.34 3 3 3 3-1.34 3-3"})),yct=Bo(V.jsx("path",{d:"M13.12 2.06 7.58 7.6c-.37.37-.58.88-.58 1.41V19c0 1.1.9 2 2 2h9c.8 0 1.52-.48 1.84-1.21l3.26-7.61C23.94 10.2 22.49 8 20.34 8h-5.65l.95-4.58c.1-.5-.05-1.01-.41-1.37-.59-.58-1.53-.58-2.11.01M3 21c1.1 0 2-.9 2-2v-8c0-1.1-.9-2-2-2s-2 .9-2 2v8c0 1.1.9 2 2 2"})),vct=[{icon:V.jsx(gct,{sx:{color:"text.secondary"}}),title:"Adaptable performance",description:"Our product effortlessly adjusts to your needs, boosting efficiency and simplifying your tasks."},{icon:V.jsx(mct,{sx:{color:"text.secondary"}}),title:"Built to last",description:"Experience unmatched durability that goes above and beyond with lasting investment."},{icon:V.jsx(yct,{sx:{color:"text.secondary"}}),title:"Great user experience",description:"Integrate our product into your routine with an intuitive and easy-to-use interface."},{icon:V.jsx(pct,{sx:{color:"text.secondary"}}),title:"Innovative functionality",description:"Stay ahead with features that set new standards, addressing your evolving needs better than the rest."}];function bct(){return V.jsxs(Wx,{sx:{flexDirection:"column",alignSelf:"center",gap:4,maxWidth:450},children:[V.jsx(Py,{sx:{display:{xs:"none",md:"flex"}},children:V.jsx(poe,{})}),vct.map((n,e)=>V.jsxs(Wx,{direction:"row",sx:{gap:2},children:[n.icon,V.jsxs("div",{children:[V.jsx(ju,{gutterBottom:!0,sx:{fontWeight:"medium"},children:n.title}),V.jsx(ju,{variant:"body2",sx:{color:"text.secondary"},children:n.description})]})]},e))]})}function xct(n){return V.jsxs(b6,{...n,children:[V.jsx(yae,{enableColorScheme:!0}),V.jsx(Lae,{sx:{position:"fixed",top:"1rem",right:"1rem"}}),V.jsx(Wx,{direction:"column",component:"main",sx:[{justifyContent:"center",height:"calc((1 - var(--template-frame-height, 0)) * 100%)",marginTop:"max(40px - var(--template-frame-height, 0px), 0px)",minHeight:"100%"},e=>({"&::before":{content:'""',display:"block",position:"absolute",zIndex:-1,inset:0,backgroundImage:"radial-gradient(ellipse at 50% 50%, hsl(210, 100%, 97%), hsl(0, 0%, 100%))",backgroundRepeat:"no-repeat",...e.applyStyles("dark",{backgroundImage:"radial-gradient(at 50% 50%, hsla(210, 100%, 16%, 0.5), hsl(220, 30%, 5%))"})}})],children:V.jsx(Wx,{direction:{xs:"column-reverse",md:"row"},sx:{justifyContent:"center",gap:{xs:6,sm:12},p:2,mx:"auto"},children:V.jsxs(Wx,{direction:{xs:"column-reverse",md:"row"},sx:{justifyContent:"center",gap:{xs:6,sm:12},p:{xs:2,sm:4},m:"auto"},children:[V.jsx(bct,{}),V.jsx(hct,{})]})})})]})}function Sct(){return V.jsx(jp,{sx:{height:21,width:100},children:V.jsxs("svg",{width:86,height:19,viewBox:"0 0 86 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[V.jsx("path",{fill:"#B4C0D3",d:"m.787 12.567 6.055-2.675 3.485 2.006.704 6.583-4.295-.035.634-4.577-.74-.422-3.625 2.817-2.218-3.697Z"}),V.jsx("path",{fill:"#00D3AB",d:"m10.714 11.616 5.352 3.908 2.112-3.767-4.295-1.725v-.845l4.295-1.76-2.112-3.732-5.352 3.908v4.013Z"}),V.jsx("path",{fill:"#4876EF",d:"m10.327 7.286.704-6.583-4.295.07.634 4.577-.74.422-3.66-2.816L.786 6.617l6.055 2.676 3.485-2.007Z"}),V.jsx("path",{fill:"#4876EE",d:"M32.507 8.804v6.167h2.312v-7.86h-3.366v1.693h1.054ZM32.435 6.006c.212.22.535.33.968.33.434 0 .751-.11.953-.33.213-.23.318-.516.318-.86 0-.354-.105-.641-.318-.86-.202-.23-.52-.345-.953-.345-.433 0-.756.115-.968.344-.202.22-.303.507-.303.86 0 .345.101.632.303.861ZM24.46 14.799c.655.296 1.46.444 2.413.444.896 0 1.667-.139 2.312-.416.645-.277 1.141-.664 1.488-1.162.357-.506.535-1.094.535-1.764 0-.65-.169-1.2-.506-1.649-.328-.459-.785-.818-1.373-1.076-.587-.267-1.266-.435-2.037-.502l-.809-.071c-.481-.039-.828-.168-1.04-.388a1.08 1.08 0 0 1-.318-.774c0-.23.058-.44.173-.631.116-.201.29-.359.52-.474.241-.114.535-.172.882-.172.366 0 .67.067.91.201.053.029.104.059.15.09l.012.009.052.037c.146.111.263.243.35.395.125.21.188.444.188.703h2.311c0-.689-.159-1.286-.476-1.793-.318-.516-.776-.913-1.373-1.19-.588-.287-1.296-.43-2.124-.43-.79 0-1.474.133-2.052.4a3.131 3.131 0 0 0-1.358 1.12c-.318.487-.477 1.066-.477 1.735 0 .927.314 1.673.94 2.237.626.564 1.464.89 2.514.976l.794.071c.645.058 1.113.187 1.401.388a.899.899 0 0 1 .434.788 1.181 1.181 0 0 1-.231.717c-.154.201-.38.36-.68.474-.298.115-.669.172-1.112.172-.49 0-.89-.067-1.199-.2-.308-.144-.539-.33-.694-.56a1.375 1.375 0 0 1-.216-.746h-2.297c0 .679.168 1.281.505 1.807.337.517.834.928 1.489 1.234ZM39.977 15.07c-.8 0-1.445-.095-1.936-.286a2.03 2.03 0 0 1-1.084-.99c-.221-.469-.332-1.1-.332-1.893V8.789h-1.2V7.11h1.2V4.988h2.153V7.11h2.312V8.79h-2.312v3.198c0 .373.096.66.289.86.202.192.486.287.852.287h1.17v1.937h-1.112Z"}),V.jsx("path",{fill:"#4876EE",fillRule:"evenodd",d:"M43.873 14.899c.52.23 1.117.344 1.791.344.665 0 1.252-.115 1.763-.344.51-.23.934-.55 1.271-.96.337-.412.564-.88.679-1.407h-2.124c-.096.24-.279.44-.549.603-.27.162-.616.244-1.04.244-.262 0-.497-.031-.704-.093a1.572 1.572 0 0 1-.423-.194 1.662 1.662 0 0 1-.636-.803 3.159 3.159 0 0 1-.163-.645h5.784v-.775a4.28 4.28 0 0 0-.463-1.98 3.686 3.686 0 0 0-1.343-1.477c-.578-.382-1.291-.574-2.139-.574-.645 0-1.223.115-1.733.345-.501.22-.92.52-1.257.903a4.178 4.178 0 0 0-.78 1.305c-.174.478-.26.98-.26 1.506v.287c0 .507.086 1.004.26 1.492.183.478.443.913.78 1.305.347.382.775.688 1.286.918Zm-.094-4.674.02-.09a2.507 2.507 0 0 1 .117-.356c.145-.354.356-.622.636-.804.104-.067.217-.123.339-.165.204-.071.433-.107.686-.107.395 0 .723.09.983.272.27.173.472.426.607.76a2.487 2.487 0 0 1 .16.603h-3.57c.006-.038.013-.076.022-.113Z",clipRule:"evenodd"}),V.jsx("path",{fill:"#4876EE",d:"M50.476 14.97V7.112h1.835v1.98a4.54 4.54 0 0 1 .173-.603c.202-.536.506-.937.91-1.205.405-.277.9-.416 1.488-.416h.101c.598 0 1.094.139 1.489.416.404.268.707.67.91 1.205l.016.04.013.037.028-.077c.212-.536.52-.937.925-1.205.405-.277.901-.416 1.489-.416h.1c.598 0 1.098.139 1.503.416.414.268.727.67.94 1.205.211.535.317 1.205.317 2.008v4.475h-2.312v-4.604c0-.43-.115-.78-.346-1.047-.222-.268-.54-.402-.954-.402-.414 0-.742.139-.982.416-.241.268-.362.626-.362 1.076v4.56h-2.326v-4.603c0-.43-.115-.78-.346-1.047-.222-.268-.535-.402-.94-.402-.423 0-.756.139-.996.416-.241.268-.362.626-.362 1.076v4.56h-2.311Z"}),V.jsx("path",{fill:"#4876EE",fillRule:"evenodd",d:"M68.888 13.456v1.515h1.834v-4.82c0-.726-.144-1.319-.433-1.778-.289-.468-.712-.817-1.271-1.047-.549-.23-1.228-.344-2.037-.344a27.76 27.76 0 0 0-.896.014c-.318.01-.626.024-.924.043l-.229.016a36.79 36.79 0 0 0-.552.042v1.936a81.998 81.998 0 0 1 1.733-.09 37.806 37.806 0 0 1 1.171-.025c.424 0 .732.1.925.301.193.201.289.502.289.904v.029h-1.43c-.704 0-1.325.09-1.864.272-.54.172-.959.445-1.257.818-.299.363-.448.832-.448 1.405 0 .526.12.98.361 1.363.24.373.573.66.997.86.433.201.934.302 1.502.302.55 0 1.012-.1 1.388-.302.385-.2.683-.487.895-.86a2.443 2.443 0 0 0 .228-.498l.018-.056Zm-.39-1.397v-.63h-1.445c-.405 0-.718.1-.939.3-.212.192-.318.455-.318.79 0 .157.026.3.08.429a.99.99 0 0 0 .238.345c.221.191.534.287.939.287a2.125 2.125 0 0 0 .394-.038c.106-.021.206-.052.3-.092.212-.095.385-.253.52-.473.135-.22.212-.526.23-.918Z",clipRule:"evenodd"}),V.jsx("path",{fill:"#4876EE",d:"M72.106 14.97V7.11h1.835v2.595c.088-.74.31-1.338.665-1.791.481-.603 1.174-.904 2.08-.904h.303v1.98h-.578c-.635 0-1.127.172-1.473.516-.347.334-.52.822-.52 1.463v4.001h-2.312ZM79.92 11.298h.767l2.499 3.672h2.6l-3.169-4.51 2.606-3.35h-2.427l-2.875 3.737V4.5h-2.312v10.47h2.312v-3.672Z"})]})})}function wct(){return V.jsx(jp,{children:V.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[V.jsx("path",{d:"M6.68 15.92C2.88 15.24 0 11.96 0 8C0 3.6 3.6 0 8 0C12.4 0 16 3.6 16 8C16 11.96 13.12 15.24 9.32 15.92L8.88 15.56H7.12L6.68 15.92Z",fill:"url(#paint0_linear_795_116)"}),V.jsx("path",{d:"M11.12 10.2391L11.48 7.99914H9.36V6.43914C9.36 5.79914 9.6 5.31914 10.56 5.31914H11.6V3.27914C11.04 3.19914 10.4 3.11914 9.84 3.11914C8 3.11914 6.72 4.23914 6.72 6.23914V7.99914H4.72V10.2391H6.72V15.8791C7.16 15.9591 7.6 15.9991 8.04 15.9991C8.48 15.9991 8.92 15.9591 9.36 15.8791V10.2391H11.12Z",fill:"white"}),V.jsx("defs",{children:V.jsxs("linearGradient",{id:"paint0_linear_795_116",x1:"8",y1:"0",x2:"8",y2:"15.9991",gradientUnits:"userSpaceOnUse",children:[V.jsx("stop",{stopColor:"#1AAFFF"}),V.jsx("stop",{offset:"1",stopColor:"#0163E0"})]})})]})})}function Cct(){return V.jsx(jp,{children:V.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[V.jsx("path",{d:"M15.68 8.18182C15.68 7.61455 15.6291 7.06909 15.5345 6.54545H8V9.64364H12.3055C12.1164 10.64 11.5491 11.4836 10.6982 12.0509V14.0655H13.2945C14.8073 12.6691 15.68 10.6182 15.68 8.18182Z",fill:"#4285F4"}),V.jsx("path",{d:"M8 16C10.16 16 11.9709 15.2873 13.2945 14.0655L10.6982 12.0509C9.98545 12.5309 9.07636 12.8218 8 12.8218C5.92 12.8218 4.15273 11.4182 3.52 9.52727H0.858182V11.5927C2.17455 14.2036 4.87273 16 8 16Z",fill:"#34A853"}),V.jsx("path",{d:"M3.52 9.52C3.36 9.04 3.26545 8.53091 3.26545 8C3.26545 7.46909 3.36 6.96 3.52 6.48V4.41455H0.858182C0.312727 5.49091 0 6.70545 0 8C0 9.29455 0.312727 10.5091 0.858182 11.5855L2.93091 9.97091L3.52 9.52Z",fill:"#FBBC05"}),V.jsx("path",{d:"M8 3.18545C9.17818 3.18545 10.2255 3.59273 11.0618 4.37818L13.3527 2.08727C11.9636 0.792727 10.16 0 8 0C4.87273 0 2.17455 1.79636 0.858182 4.41455L3.52 6.48C4.15273 4.58909 5.92 3.18545 8 3.18545Z",fill:"#EA4335"})]})})}const _ct=on(coe)(({theme:n})=>({display:"flex",flexDirection:"column",alignSelf:"center",width:"100%",padding:n.spacing(4),gap:n.spacing(2),margin:"auto",boxShadow:"hsla(220, 30%, 5%, 0.05) 0px 5px 15px 0px, hsla(220, 25%, 10%, 0.05) 0px 15px 35px -5px",[n.breakpoints.up("sm")]:{width:"450px"},...n.applyStyles("dark",{boxShadow:"hsla(220, 30%, 5%, 0.5) 0px 5px 15px 0px, hsla(220, 25%, 10%, 0.08) 0px 15px 35px -5px"})})),Ect=on(Wx)(({theme:n})=>({height:"calc((1 - var(--template-frame-height, 0)) * 100dvh)",minHeight:"100%",padding:n.spacing(2),[n.breakpoints.up("sm")]:{padding:n.spacing(4)},"&::before":{content:'""',display:"block",position:"absolute",zIndex:-1,inset:0,backgroundImage:"radial-gradient(ellipse at 50% 50%, hsl(210, 100%, 97%), hsl(0, 0%, 100%))",backgroundRepeat:"no-repeat",...n.applyStyles("dark",{backgroundImage:"radial-gradient(at 50% 50%, hsla(210, 100%, 16%, 0.5), hsl(220, 30%, 5%))"})}})),Act=Ks.create({baseURL:"http://localhost:8080/",timeout:5e3});function Tct(n){const[e,t]=F.useState(!1),[r,i]=F.useState(""),[s,a]=F.useState(!1),[o,l]=F.useState(""),[c,u]=F.useState(!1),[d,h]=F.useState(""),[p,g]=F.useState(!1),[v,b]=F.useState(""),[x,C]=F.useState(!1),E=()=>{const M=document.getElementById("email"),R=document.getElementById("password"),L=document.getElementById("name");let $=!0;return!M.value||!/\S+@\S+\.\S+/.test(M.value)?(t(!0),i("Please enter a valid email address."),$=!1):(t(!1),i("")),!R.value||R.value.length<6?(a(!0),l("Password must be at least 6 characters long."),$=!1):(a(!1),l("")),!L.value||L.value.length<1?(u(!0),h("Name is required."),$=!1):(u(!1),h("")),$},_=async M=>{if(M.preventDefault(),b(""),C(!1),!E())return;const R=new FormData(M.currentTarget),L=R.get("name"),$=R.get("email"),N=R.get("password");g(!0);try{const I=new Date().toISOString(),k=await Act.post("/api/v1/users/create-user",{username:L,email:$,password:N});console.log("Signup successful:",k.data),C(!0),M.target.reset(),setTimeout(()=>{window.location.href="/login"},2e3)}catch(I){if(console.error("Signup error:",I),I.response)if(I.response.status===409)b("An account with this email already exists.");else{const k=I.response.data||"Signup failed. Please try again.";b(typeof k=="string"?k:"Signup failed. Please try again.")}else I.request?b("Unable to connect to server. Please try again later."):b("An unexpected error occurred. Please try again.")}finally{g(!1)}};return V.jsxs(b6,{...n,children:[V.jsx(yae,{enableColorScheme:!0}),V.jsx(Lae,{sx:{position:"fixed",top:"1rem",right:"1rem"}}),V.jsx(Ect,{direction:"column",justifyContent:"space-between",children:V.jsxs(_ct,{variant:"outlined",children:[V.jsx(Sct,{}),V.jsx(ju,{component:"h1",variant:"h4",sx:{width:"100%",fontSize:"clamp(2rem, 10vw, 2.15rem)"},children:"Sign up"}),v&&V.jsx(UN,{severity:"error",onClose:()=>b(""),children:v}),x&&V.jsx(UN,{severity:"success",children:"Account created successfully! Redirecting to login..."}),V.jsxs(Py,{component:"form",onSubmit:_,sx:{display:"flex",flexDirection:"column",gap:2},children:[V.jsxs(qx,{children:[V.jsx(jx,{htmlFor:"name",children:"Full name"}),V.jsx(RC,{autoComplete:"name",name:"name",required:!0,fullWidth:!0,id:"name",placeholder:"Jon Snow",error:c,helperText:d,color:c?"error":"primary",disabled:p})]}),V.jsxs(qx,{children:[V.jsx(jx,{htmlFor:"email",children:"Email"}),V.jsx(RC,{required:!0,fullWidth:!0,id:"email",placeholder:"your@email.com",name:"email",autoComplete:"email",variant:"outlined",error:e,helperText:r,color:e?"error":"primary",disabled:p})]}),V.jsxs(qx,{children:[V.jsx(jx,{htmlFor:"password",children:"Password"}),V.jsx(RC,{required:!0,fullWidth:!0,name:"password",placeholder:"",type:"password",id:"password",autoComplete:"new-password",variant:"outlined",error:s,helperText:o,color:s?"error":"primary",disabled:p})]}),V.jsx(doe,{control:V.jsx(uoe,{value:"allowExtraEmails",color:"primary"}),label:"I want to receive updates via email.",disabled:p}),V.jsx(vg,{type:"submit",fullWidth:!0,variant:"contained",disabled:p,children:p?V.jsx(J3,{size:24}):"Sign up"})]}),V.jsx(LN,{children:V.jsx(ju,{sx:{color:"text.secondary"},children:"or"})}),V.jsxs(Py,{sx:{display:"flex",flexDirection:"column",gap:2},children:[V.jsx(vg,{fullWidth:!0,variant:"outlined",onClick:()=>alert("Sign up with Google"),startIcon:V.jsx(Cct,{}),disabled:p,children:"Sign up with Google"}),V.jsx(vg,{fullWidth:!0,variant:"outlined",onClick:()=>alert("Sign up with Facebook"),startIcon:V.jsx(wct,{}),disabled:p,children:"Sign up with Facebook"}),V.jsxs(ju,{sx:{textAlign:"center"},children:["Already have an account?"," ",V.jsx(ZF,{href:"/src/InteractiveVirtualAssistant/pages/Login",variant:"body2",sx:{alignSelf:"center"},children:"Sign in"})]})]})]})})]})}function Mct({children:n}){const e=Zp(),t=e.pathname==="/"||e.pathname==="/denniswong-portfolio",[r,i]=F.useState(!1);return V.jsxs(V.Fragment,{children:[t&&V.jsx(fle,{menuOpen:r,setMenuOpen:i}),t&&V.jsx(hle,{menuOpen:r,setMenuOpen:i}),n]})}function Rct(){const[n,e]=F.useState(!1);return V.jsxs(V.Fragment,{children:[!n&&V.jsx(dle,{onComplete:()=>e(!0)}),V.jsx("div",{className:`font-display min-h-screen transition-opacity duration-700 ${n?"opacity-100":"opacity-0"} bg-black text-gray-100`,children:V.jsx(EAe,{children:V.jsx(Mct,{children:V.jsxs(nAe,{children:[V.jsx(vp,{path:"/",element:V.jsx(V9,{})}),V.jsx(vp,{path:"/denniswong-portfolio",element:V.jsx(V9,{})}),V.jsx(vp,{path:"/chatbot",element:V.jsx(yQe,{})}),V.jsx(vp,{path:"/login",element:V.jsx(xct,{})}),V.jsx(vp,{path:"/signup",element:V.jsx(Tct,{})}),V.jsx(vp,{path:"/video-test",element:V.jsx(sQe,{})}),V.jsx(vp,{path:"/scene-test",element:V.jsx(z5,{})}),V.jsx(vp,{path:"/chatbot-test",element:V.jsx(vQe,{})})]})})})})]})}Mq.createRoot(document.getElementById("root")).render(V.jsx(Rct,{}));
